<!doctype html><head>
  <meta charset="UTF-8">
  <meta name="keywords" content="visualization,embeddings,machine learning,javascript">

  <meta property="og:type" content="article">
  <meta property="og:title" content="Embedding projector - visualization of high-dimensional data">
  <meta property="og:description" content="Visualize high dimensional data.">
  <meta property="og:url" content="http://projector.tensorflow.org">
  <meta property="og:image" content="http://projector.tensorflow.org/preview.png">

  <meta name="twitter:card" value="summary_large_image">
  <meta name="twitter:title" content="Embedding projector - visualization of high-dimensional data">
  <meta name="twitter:description" content="Visualize high dimensional data.">
  <meta name="twitter:url" content="http://projector.tensorflow.org">
  <meta name="twitter:image" content="http://projector.tensorflow.org/preview.png">

  <meta http-equiv="cache-control" content="max-age=0">
  <meta http-equiv="cache-control" content="no-cache">
  <meta http-equiv="expires" content="0">
  <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT">
  <meta http-equiv="pragma" content="no-cache">

  <meta name="author" content="Daniel Smilkov, Nikhil Thorat, Charles Nicholson, Big Picture">

  <link rel="icon" type="image/png" href="favicon.png">
  
  <script>/**
 * @license
 * Copyright (c) 2014 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
 */
// @version 0.7.24
!function(){window.WebComponents=window.WebComponents||{flags:{}};var e="webcomponents-lite.js",t=document.querySelector('script[src*="'+e+'"]'),n={};if(!n.noOpts){if(location.search.slice(1).split("&").forEach(function(e){var t,o=e.split("=");o[0]&&(t=o[0].match(/wc-(.+)/))&&(n[t[1]]=o[1]||!0)}),t)for(var o,r=0;o=t.attributes[r];r++)"src"!==o.name&&(n[o.name]=o.value||!0);if(n.log&&n.log.split){var i=n.log.split(",");n.log={},i.forEach(function(e){n.log[e]=!0})}else n.log={}}n.register&&(window.CustomElements=window.CustomElements||{flags:{}},window.CustomElements.flags.register=n.register),WebComponents.flags=n}(),function(e){"use strict";function t(e){return void 0!==h[e]}function n(){s.call(this),this._isInvalid=!0}function o(e){return""==e&&n.call(this),e.toLowerCase()}function r(e){var t=e.charCodeAt(0);return t>32&&t<127&&[34,35,60,62,63,96].indexOf(t)==-1?e:encodeURIComponent(e)}function i(e){var t=e.charCodeAt(0);return t>32&&t<127&&[34,35,60,62,96].indexOf(t)==-1?e:encodeURIComponent(e)}function a(e,a,s){function c(e){g.push(e)}var d=a||"scheme start",l=0,u="",w=!1,_=!1,g=[];e:for(;(e[l-1]!=p||0==l)&&!this._isInvalid;){var b=e[l];switch(d){case"scheme start":if(!b||!m.test(b)){if(a){c("Invalid scheme.");break e}u="",d="no scheme";continue}u+=b.toLowerCase(),d="scheme";break;case"scheme":if(b&&v.test(b))u+=b.toLowerCase();else{if(":"!=b){if(a){if(p==b)break e;c("Code point not allowed in scheme: "+b);break e}u="",l=0,d="no scheme";continue}if(this._scheme=u,u="",a)break e;t(this._scheme)&&(this._isRelative=!0),d="file"==this._scheme?"relative":this._isRelative&&s&&s._scheme==this._scheme?"relative or authority":this._isRelative?"authority first slash":"scheme data"}break;case"scheme data":"?"==b?(this._query="?",d="query"):"#"==b?(this._fragment="#",d="fragment"):p!=b&&"\t"!=b&&"\n"!=b&&"\r"!=b&&(this._schemeData+=r(b));break;case"no scheme":if(s&&t(s._scheme)){d="relative";continue}c("Missing scheme."),n.call(this);break;case"relative or authority":if("/"!=b||"/"!=e[l+1]){c("Expected /, got: "+b),d="relative";continue}d="authority ignore slashes";break;case"relative":if(this._isRelative=!0,"file"!=this._scheme&&(this._scheme=s._scheme),p==b){this._host=s._host,this._port=s._port,this._path=s._path.slice(),this._query=s._query,this._username=s._username,this._password=s._password;break e}if("/"==b||"\\"==b)"\\"==b&&c("\\ is an invalid code point."),d="relative slash";else if("?"==b)this._host=s._host,this._port=s._port,this._path=s._path.slice(),this._query="?",this._username=s._username,this._password=s._password,d="query";else{if("#"!=b){var y=e[l+1],E=e[l+2];("file"!=this._scheme||!m.test(b)||":"!=y&&"|"!=y||p!=E&&"/"!=E&&"\\"!=E&&"?"!=E&&"#"!=E)&&(this._host=s._host,this._port=s._port,this._username=s._username,this._password=s._password,this._path=s._path.slice(),this._path.pop()),d="relative path";continue}this._host=s._host,this._port=s._port,this._path=s._path.slice(),this._query=s._query,this._fragment="#",this._username=s._username,this._password=s._password,d="fragment"}break;case"relative slash":if("/"!=b&&"\\"!=b){"file"!=this._scheme&&(this._host=s._host,this._port=s._port,this._username=s._username,this._password=s._password),d="relative path";continue}"\\"==b&&c("\\ is an invalid code point."),d="file"==this._scheme?"file host":"authority ignore slashes";break;case"authority first slash":if("/"!=b){c("Expected '/', got: "+b),d="authority ignore slashes";continue}d="authority second slash";break;case"authority second slash":if(d="authority ignore slashes","/"!=b){c("Expected '/', got: "+b);continue}break;case"authority ignore slashes":if("/"!=b&&"\\"!=b){d="authority";continue}c("Expected authority, got: "+b);break;case"authority":if("@"==b){w&&(c("@ already seen."),u+="%40"),w=!0;for(var L=0;L<u.length;L++){var N=u[L];if("\t"!=N&&"\n"!=N&&"\r"!=N)if(":"!=N||null!==this._password){var M=r(N);null!==this._password?this._password+=M:this._username+=M}else this._password="";else c("Invalid whitespace in authority.")}u=""}else{if(p==b||"/"==b||"\\"==b||"?"==b||"#"==b){l-=u.length,u="",d="host";continue}u+=b}break;case"file host":if(p==b||"/"==b||"\\"==b||"?"==b||"#"==b){2!=u.length||!m.test(u[0])||":"!=u[1]&&"|"!=u[1]?0==u.length?d="relative path start":(this._host=o.call(this,u),u="",d="relative path start"):d="relative path";continue}"\t"==b||"\n"==b||"\r"==b?c("Invalid whitespace in file host."):u+=b;break;case"host":case"hostname":if(":"!=b||_){if(p==b||"/"==b||"\\"==b||"?"==b||"#"==b){if(this._host=o.call(this,u),u="",d="relative path start",a)break e;continue}"\t"!=b&&"\n"!=b&&"\r"!=b?("["==b?_=!0:"]"==b&&(_=!1),u+=b):c("Invalid code point in host/hostname: "+b)}else if(this._host=o.call(this,u),u="",d="port","hostname"==a)break e;break;case"port":if(/[0-9]/.test(b))u+=b;else{if(p==b||"/"==b||"\\"==b||"?"==b||"#"==b||a){if(""!=u){var T=parseInt(u,10);T!=h[this._scheme]&&(this._port=T+""),u=""}if(a)break e;d="relative path start";continue}"\t"==b||"\n"==b||"\r"==b?c("Invalid code point in port: "+b):n.call(this)}break;case"relative path start":if("\\"==b&&c("'\\' not allowed in path."),d="relative path","/"!=b&&"\\"!=b)continue;break;case"relative path":if(p!=b&&"/"!=b&&"\\"!=b&&(a||"?"!=b&&"#"!=b))"\t"!=b&&"\n"!=b&&"\r"!=b&&(u+=r(b));else{"\\"==b&&c("\\ not allowed in relative path.");var O;(O=f[u.toLowerCase()])&&(u=O),".."==u?(this._path.pop(),"/"!=b&&"\\"!=b&&this._path.push("")):"."==u&&"/"!=b&&"\\"!=b?this._path.push(""):"."!=u&&("file"==this._scheme&&0==this._path.length&&2==u.length&&m.test(u[0])&&"|"==u[1]&&(u=u[0]+":"),this._path.push(u)),u="","?"==b?(this._query="?",d="query"):"#"==b&&(this._fragment="#",d="fragment")}break;case"query":a||"#"!=b?p!=b&&"\t"!=b&&"\n"!=b&&"\r"!=b&&(this._query+=i(b)):(this._fragment="#",d="fragment");break;case"fragment":p!=b&&"\t"!=b&&"\n"!=b&&"\r"!=b&&(this._fragment+=b)}l++}}function s(){this._scheme="",this._schemeData="",this._username="",this._password=null,this._host="",this._port="",this._path=[],this._query="",this._fragment="",this._isInvalid=!1,this._isRelative=!1}function c(e,t){void 0===t||t instanceof c||(t=new c(String(t))),this._url=e,s.call(this);var n=e.replace(/^[ \t\r\n\f]+|[ \t\r\n\f]+$/g,"");a.call(this,n,null,t)}var d=!1;if(!e.forceJURL)try{var l=new URL("b","http://a");l.pathname="c%20d",d="http://a/c%20d"===l.href}catch(u){}if(!d){var h=Object.create(null);h.ftp=21,h.file=0,h.gopher=70,h.http=80,h.https=443,h.ws=80,h.wss=443;var f=Object.create(null);f["%2e"]=".",f[".%2e"]="..",f["%2e."]="..",f["%2e%2e"]="..";var p=void 0,m=/[a-zA-Z]/,v=/[a-zA-Z0-9\+\-\.]/;c.prototype={toString:function(){return this.href},get href(){if(this._isInvalid)return this._url;var e="";return""==this._username&&null==this._password||(e=this._username+(null!=this._password?":"+this._password:"")+"@"),this.protocol+(this._isRelative?"//"+e+this.host:"")+this.pathname+this._query+this._fragment},set href(e){s.call(this),a.call(this,e)},get protocol(){return this._scheme+":"},set protocol(e){this._isInvalid||a.call(this,e+":","scheme start")},get host(){return this._isInvalid?"":this._port?this._host+":"+this._port:this._host},set host(e){!this._isInvalid&&this._isRelative&&a.call(this,e,"host")},get hostname(){return this._host},set hostname(e){!this._isInvalid&&this._isRelative&&a.call(this,e,"hostname")},get port(){return this._port},set port(e){!this._isInvalid&&this._isRelative&&a.call(this,e,"port")},get pathname(){return this._isInvalid?"":this._isRelative?"/"+this._path.join("/"):this._schemeData},set pathname(e){!this._isInvalid&&this._isRelative&&(this._path=[],a.call(this,e,"relative path start"))},get search(){return this._isInvalid||!this._query||"?"==this._query?"":this._query},set search(e){!this._isInvalid&&this._isRelative&&(this._query="?","?"==e[0]&&(e=e.slice(1)),a.call(this,e,"query"))},get hash(){return this._isInvalid||!this._fragment||"#"==this._fragment?"":this._fragment},set hash(e){this._isInvalid||(this._fragment="#","#"==e[0]&&(e=e.slice(1)),a.call(this,e,"fragment"))},get origin(){var e;if(this._isInvalid||!this._scheme)return"";switch(this._scheme){case"data":case"file":case"javascript":case"mailto":return"null"}return e=this.host,e?this._scheme+"://"+e:""}};var w=e.URL;w&&(c.createObjectURL=function(e){return w.createObjectURL.apply(w,arguments)},c.revokeObjectURL=function(e){w.revokeObjectURL(e)}),e.URL=c}}(self),"undefined"==typeof WeakMap&&!function(){var e=Object.defineProperty,t=Date.now()%1e9,n=function(){this.name="__st"+(1e9*Math.random()>>>0)+(t++ +"__")};n.prototype={set:function(t,n){var o=t[this.name];return o&&o[0]===t?o[1]=n:e(t,this.name,{value:[t,n],writable:!0}),this},get:function(e){var t;return(t=e[this.name])&&t[0]===e?t[1]:void 0},"delete":function(e){var t=e[this.name];return!(!t||t[0]!==e)&&(t[0]=t[1]=void 0,!0)},has:function(e){var t=e[this.name];return!!t&&t[0]===e}},window.WeakMap=n}(),function(e){function t(e){b.push(e),g||(g=!0,m(o))}function n(e){return window.ShadowDOMPolyfill&&window.ShadowDOMPolyfill.wrapIfNeeded(e)||e}function o(){g=!1;var e=b;b=[],e.sort(function(e,t){return e.uid_-t.uid_});var t=!1;e.forEach(function(e){var n=e.takeRecords();r(e),n.length&&(e.callback_(n,e),t=!0)}),t&&o()}function r(e){e.nodes_.forEach(function(t){var n=v.get(t);n&&n.forEach(function(t){t.observer===e&&t.removeTransientObservers()})})}function i(e,t){for(var n=e;n;n=n.parentNode){var o=v.get(n);if(o)for(var r=0;r<o.length;r++){var i=o[r],a=i.options;if(n===e||a.subtree){var s=t(a);s&&i.enqueue(s)}}}}function a(e){this.callback_=e,this.nodes_=[],this.records_=[],this.uid_=++y}function s(e,t){this.type=e,this.target=t,this.addedNodes=[],this.removedNodes=[],this.previousSibling=null,this.nextSibling=null,this.attributeName=null,this.attributeNamespace=null,this.oldValue=null}function c(e){var t=new s(e.type,e.target);return t.addedNodes=e.addedNodes.slice(),t.removedNodes=e.removedNodes.slice(),t.previousSibling=e.previousSibling,t.nextSibling=e.nextSibling,t.attributeName=e.attributeName,t.attributeNamespace=e.attributeNamespace,t.oldValue=e.oldValue,t}function d(e,t){return E=new s(e,t)}function l(e){return L?L:(L=c(E),L.oldValue=e,L)}function u(){E=L=void 0}function h(e){return e===L||e===E}function f(e,t){return e===t?e:L&&h(e)?L:null}function p(e,t,n){this.observer=e,this.target=t,this.options=n,this.transientObservedNodes=[]}if(!e.JsMutationObserver){var m,v=new WeakMap;if(/Trident|Edge/.test(navigator.userAgent))m=setTimeout;else if(window.setImmediate)m=window.setImmediate;else{var w=[],_=String(Math.random());window.addEventListener("message",function(e){if(e.data===_){var t=w;w=[],t.forEach(function(e){e()})}}),m=function(e){w.push(e),window.postMessage(_,"*")}}var g=!1,b=[],y=0;a.prototype={observe:function(e,t){if(e=n(e),!t.childList&&!t.attributes&&!t.characterData||t.attributeOldValue&&!t.attributes||t.attributeFilter&&t.attributeFilter.length&&!t.attributes||t.characterDataOldValue&&!t.characterData)throw new SyntaxError;var o=v.get(e);o||v.set(e,o=[]);for(var r,i=0;i<o.length;i++)if(o[i].observer===this){r=o[i],r.removeListeners(),r.options=t;break}r||(r=new p(this,e,t),o.push(r),this.nodes_.push(e)),r.addListeners()},disconnect:function(){this.nodes_.forEach(function(e){for(var t=v.get(e),n=0;n<t.length;n++){var o=t[n];if(o.observer===this){o.removeListeners(),t.splice(n,1);break}}},this),this.records_=[]},takeRecords:function(){var e=this.records_;return this.records_=[],e}};var E,L;p.prototype={enqueue:function(e){var n=this.observer.records_,o=n.length;if(n.length>0){var r=n[o-1],i=f(r,e);if(i)return void(n[o-1]=i)}else t(this.observer);n[o]=e},addListeners:function(){this.addListeners_(this.target)},addListeners_:function(e){var t=this.options;t.attributes&&e.addEventListener("DOMAttrModified",this,!0),t.characterData&&e.addEventListener("DOMCharacterDataModified",this,!0),t.childList&&e.addEventListener("DOMNodeInserted",this,!0),(t.childList||t.subtree)&&e.addEventListener("DOMNodeRemoved",this,!0)},removeListeners:function(){this.removeListeners_(this.target)},removeListeners_:function(e){var t=this.options;t.attributes&&e.removeEventListener("DOMAttrModified",this,!0),t.characterData&&e.removeEventListener("DOMCharacterDataModified",this,!0),t.childList&&e.removeEventListener("DOMNodeInserted",this,!0),(t.childList||t.subtree)&&e.removeEventListener("DOMNodeRemoved",this,!0)},addTransientObserver:function(e){if(e!==this.target){this.addListeners_(e),this.transientObservedNodes.push(e);var t=v.get(e);t||v.set(e,t=[]),t.push(this)}},removeTransientObservers:function(){var e=this.transientObservedNodes;this.transientObservedNodes=[],e.forEach(function(e){this.removeListeners_(e);for(var t=v.get(e),n=0;n<t.length;n++)if(t[n]===this){t.splice(n,1);break}},this)},handleEvent:function(e){switch(e.stopImmediatePropagation(),e.type){case"DOMAttrModified":var t=e.attrName,n=e.relatedNode.namespaceURI,o=e.target,r=new d("attributes",o);r.attributeName=t,r.attributeNamespace=n;var a=e.attrChange===MutationEvent.ADDITION?null:e.prevValue;i(o,function(e){if(e.attributes&&(!e.attributeFilter||!e.attributeFilter.length||e.attributeFilter.indexOf(t)!==-1||e.attributeFilter.indexOf(n)!==-1))return e.attributeOldValue?l(a):r});break;case"DOMCharacterDataModified":var o=e.target,r=d("characterData",o),a=e.prevValue;i(o,function(e){if(e.characterData)return e.characterDataOldValue?l(a):r});break;case"DOMNodeRemoved":this.addTransientObserver(e.target);case"DOMNodeInserted":var s,c,h=e.target;"DOMNodeInserted"===e.type?(s=[h],c=[]):(s=[],c=[h]);var f=h.previousSibling,p=h.nextSibling,r=d("childList",e.target.parentNode);r.addedNodes=s,r.removedNodes=c,r.previousSibling=f,r.nextSibling=p,i(e.relatedNode,function(e){if(e.childList)return r})}u()}},e.JsMutationObserver=a,e.MutationObserver||(e.MutationObserver=a,a._isPolyfilled=!0)}}(self),function(){function e(e){switch(e){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case" ":return"&nbsp;"}}function t(t){return t.replace(u,e)}var n="undefined"==typeof HTMLTemplateElement;/Trident/.test(navigator.userAgent)&&!function(){var e=document.importNode;document.importNode=function(){var t=e.apply(document,arguments);if(t.nodeType===Node.DOCUMENT_FRAGMENT_NODE){var n=document.createDocumentFragment();return n.appendChild(t),n}return t}}();var o=function(){if(!n){var e=document.createElement("template"),t=document.createElement("template");t.content.appendChild(document.createElement("div")),e.content.appendChild(t);var o=e.cloneNode(!0);return 0===o.content.childNodes.length||0===o.content.firstChild.content.childNodes.length}}(),r="template",i=function(){};if(n){var a=document.implementation.createHTMLDocument("template"),s=!0,c=document.createElement("style");c.textContent=r+"{display:none;}";var d=document.head;d.insertBefore(c,d.firstElementChild),i.prototype=Object.create(HTMLElement.prototype),i.decorate=function(e){if(!e.content){e.content=a.createDocumentFragment();for(var n;n=e.firstChild;)e.content.appendChild(n);if(e.cloneNode=function(e){return i.cloneNode(this,e)},s)try{Object.defineProperty(e,"innerHTML",{get:function(){for(var e="",n=this.content.firstChild;n;n=n.nextSibling)e+=n.outerHTML||t(n.data);return e},set:function(e){for(a.body.innerHTML=e,i.bootstrap(a);this.content.firstChild;)this.content.removeChild(this.content.firstChild);for(;a.body.firstChild;)this.content.appendChild(a.body.firstChild)},configurable:!0})}catch(o){s=!1}i.bootstrap(e.content)}},i.bootstrap=function(e){for(var t,n=e.querySelectorAll(r),o=0,a=n.length;o<a&&(t=n[o]);o++)i.decorate(t)},document.addEventListener("DOMContentLoaded",function(){i.bootstrap(document)});var l=document.createElement;document.createElement=function(){"use strict";var e=l.apply(document,arguments);return"template"===e.localName&&i.decorate(e),e};var u=/[&\u00A0<>]/g}if(n||o){var h=Node.prototype.cloneNode;i.cloneNode=function(e,t){var n=h.call(e,!1);return this.decorate&&this.decorate(n),t&&(n.content.appendChild(h.call(e.content,!0)),this.fixClonedDom(n.content,e.content)),n},i.fixClonedDom=function(e,t){if(t.querySelectorAll)for(var n,o,i=t.querySelectorAll(r),a=e.querySelectorAll(r),s=0,c=a.length;s<c;s++)o=i[s],n=a[s],this.decorate&&this.decorate(o),n.parentNode.replaceChild(o.cloneNode(!0),n)};var f=document.importNode;Node.prototype.cloneNode=function(e){var t=h.call(this,e);return e&&i.fixClonedDom(t,this),t},document.importNode=function(e,t){if(e.localName===r)return i.cloneNode(e,t);var n=f.call(document,e,t);return t&&i.fixClonedDom(n,e),n},o&&(HTMLTemplateElement.prototype.cloneNode=function(e){return i.cloneNode(this,e)})}n&&(window.HTMLTemplateElement=i)}(),function(e){"use strict";if(!window.performance||!window.performance.now){var t=Date.now();window.performance={now:function(){return Date.now()-t}}}window.requestAnimationFrame||(window.requestAnimationFrame=function(){var e=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame;return e?function(t){return e(function(){t(performance.now())})}:function(e){return window.setTimeout(e,1e3/60)}}()),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(){return window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(e){clearTimeout(e)}}());var n=function(){var e=document.createEvent("Event");return e.initEvent("foo",!0,!0),e.preventDefault(),e.defaultPrevented}();if(!n){var o=Event.prototype.preventDefault;Event.prototype.preventDefault=function(){this.cancelable&&(o.call(this),Object.defineProperty(this,"defaultPrevented",{get:function(){return!0},configurable:!0}))}}var r=/Trident/.test(navigator.userAgent);if((!window.CustomEvent||r&&"function"!=typeof window.CustomEvent)&&(window.CustomEvent=function(e,t){t=t||{};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,Boolean(t.bubbles),Boolean(t.cancelable),t.detail),n},window.CustomEvent.prototype=window.Event.prototype),!window.Event||r&&"function"!=typeof window.Event){var i=window.Event;window.Event=function(e,t){t=t||{};var n=document.createEvent("Event");return n.initEvent(e,Boolean(t.bubbles),Boolean(t.cancelable)),n},window.Event.prototype=i.prototype}}(window.WebComponents),window.HTMLImports=window.HTMLImports||{flags:{}},function(e){function t(e,t){t=t||p,o(function(){i(e,t)},t)}function n(e){return"complete"===e.readyState||e.readyState===w}function o(e,t){if(n(t))e&&e();else{var r=function(){"complete"!==t.readyState&&t.readyState!==w||(t.removeEventListener(_,r),o(e,t))};t.addEventListener(_,r)}}function r(e){e.target.__loaded=!0}function i(e,t){function n(){c==d&&e&&e({allImports:s,loadedImports:l,errorImports:u})}function o(e){r(e),l.push(this),c++,n()}function i(e){u.push(this),c++,n()}var s=t.querySelectorAll("link[rel=import]"),c=0,d=s.length,l=[],u=[];if(d)for(var h,f=0;f<d&&(h=s[f]);f++)a(h)?(l.push(this),c++,n()):(h.addEventListener("load",o),h.addEventListener("error",i));else n()}function a(e){return u?e.__loaded||e["import"]&&"loading"!==e["import"].readyState:e.__importParsed}function s(e){for(var t,n=0,o=e.length;n<o&&(t=e[n]);n++)c(t)&&d(t)}function c(e){return"link"===e.localName&&"import"===e.rel}function d(e){var t=e["import"];t?r({target:e}):(e.addEventListener("load",r),e.addEventListener("error",r))}var l="import",u=Boolean(l in document.createElement("link")),h=Boolean(window.ShadowDOMPolyfill),f=function(e){return h?window.ShadowDOMPolyfill.wrapIfNeeded(e):e},p=f(document),m={get:function(){var e=window.HTMLImports.currentScript||document.currentScript||("complete"!==document.readyState?document.scripts[document.scripts.length-1]:null);return f(e)},configurable:!0};Object.defineProperty(document,"_currentScript",m),Object.defineProperty(p,"_currentScript",m);var v=/Trident/.test(navigator.userAgent),w=v?"complete":"interactive",_="readystatechange";u&&(new MutationObserver(function(e){for(var t,n=0,o=e.length;n<o&&(t=e[n]);n++)t.addedNodes&&s(t.addedNodes)}).observe(document.head,{childList:!0}),function(){if("loading"===document.readyState)for(var e,t=document.querySelectorAll("link[rel=import]"),n=0,o=t.length;n<o&&(e=t[n]);n++)d(e)}()),t(function(e){window.HTMLImports.ready=!0,window.HTMLImports.readyTime=(new Date).getTime();var t=p.createEvent("CustomEvent");t.initCustomEvent("HTMLImportsLoaded",!0,!0,e),p.dispatchEvent(t)}),e.IMPORT_LINK_TYPE=l,e.useNative=u,e.rootDocument=p,e.whenReady=t,e.isIE=v}(window.HTMLImports),function(e){var t=[],n=function(e){t.push(e)},o=function(){t.forEach(function(t){t(e)})};e.addModule=n,e.initializeModules=o}(window.HTMLImports),window.HTMLImports.addModule(function(e){var t=/(url\()([^)]*)(\))/g,n=/(@import[\s]+(?!url\())([^;]*)(;)/g,o={resolveUrlsInStyle:function(e,t){var n=e.ownerDocument,o=n.createElement("a");return e.textContent=this.resolveUrlsInCssText(e.textContent,t,o),e},resolveUrlsInCssText:function(e,o,r){var i=this.replaceUrls(e,r,o,t);return i=this.replaceUrls(i,r,o,n)},replaceUrls:function(e,t,n,o){return e.replace(o,function(e,o,r,i){var a=r.replace(/["']/g,"");return n&&(a=new URL(a,n).href),t.href=a,a=t.href,o+"'"+a+"'"+i})}};e.path=o}),window.HTMLImports.addModule(function(e){var t={async:!0,ok:function(e){return e.status>=200&&e.status<300||304===e.status||0===e.status},load:function(n,o,r){var i=new XMLHttpRequest;return(e.flags.debug||e.flags.bust)&&(n+="?"+Math.random()),i.open("GET",n,t.async),i.addEventListener("readystatechange",function(e){if(4===i.readyState){var n=null;try{var a=i.getResponseHeader("Location");a&&(n="/"===a.substr(0,1)?location.origin+a:a)}catch(e){console.error(e.message)}o.call(r,!t.ok(i)&&i,i.response||i.responseText,n)}}),i.send(),i},loadDocument:function(e,t,n){this.load(e,t,n).responseType="document"}};e.xhr=t}),window.HTMLImports.addModule(function(e){var t=e.xhr,n=e.flags,o=function(e,t){this.cache={},this.onload=e,this.oncomplete=t,this.inflight=0,this.pending={}};o.prototype={addNodes:function(e){this.inflight+=e.length;for(var t,n=0,o=e.length;n<o&&(t=e[n]);n++)this.require(t);this.checkDone()},addNode:function(e){this.inflight++,this.require(e),this.checkDone()},require:function(e){var t=e.src||e.href;e.__nodeUrl=t,this.dedupe(t,e)||this.fetch(t,e)},dedupe:function(e,t){if(this.pending[e])return this.pending[e].push(t),!0;return this.cache[e]?(this.onload(e,t,this.cache[e]),this.tail(),!0):(this.pending[e]=[t],!1)},fetch:function(e,o){if(n.load&&console.log("fetch",e,o),e)if(e.match(/^data:/)){var r=e.split(","),i=r[0],a=r[1];a=i.indexOf(";base64")>-1?atob(a):decodeURIComponent(a),setTimeout(function(){this.receive(e,o,null,a)}.bind(this),0)}else{var s=function(t,n,r){this.receive(e,o,t,n,r)}.bind(this);t.load(e,s)}else setTimeout(function(){this.receive(e,o,{error:"href must be specified"},null)}.bind(this),0)},receive:function(e,t,n,o,r){this.cache[e]=o;for(var i,a=this.pending[e],s=0,c=a.length;s<c&&(i=a[s]);s++)this.onload(e,i,o,n,r),this.tail();this.pending[e]=null},tail:function(){--this.inflight,this.checkDone()},checkDone:function(){this.inflight||this.oncomplete()}},e.Loader=o}),window.HTMLImports.addModule(function(e){var t=function(e){this.addCallback=e,this.mo=new MutationObserver(this.handler.bind(this))};t.prototype={handler:function(e){for(var t,n=0,o=e.length;n<o&&(t=e[n]);n++)"childList"===t.type&&t.addedNodes.length&&this.addedNodes(t.addedNodes)},addedNodes:function(e){this.addCallback&&this.addCallback(e);for(var t,n=0,o=e.length;n<o&&(t=e[n]);n++)t.children&&t.children.length&&this.addedNodes(t.children)},observe:function(e){this.mo.observe(e,{childList:!0,subtree:!0})}},e.Observer=t}),window.HTMLImports.addModule(function(e){function t(e){return"link"===e.localName&&e.rel===l}function n(e){var t=o(e);return"data:text/javascript;charset=utf-8,"+encodeURIComponent(t)}function o(e){return e.textContent+r(e)}function r(e){var t=e.ownerDocument;t.__importedScripts=t.__importedScripts||0;var n=e.ownerDocument.baseURI,o=t.__importedScripts?"-"+t.__importedScripts:"";return t.__importedScripts++,"\n//# sourceURL="+n+o+".js\n"}function i(e){var t=e.ownerDocument.createElement("style");return t.textContent=e.textContent,a.resolveUrlsInStyle(t),t}var a=e.path,s=e.rootDocument,c=e.flags,d=e.isIE,l=e.IMPORT_LINK_TYPE,u="link[rel="+l+"]",h={documentSelectors:u,importsSelectors:[u,"link[rel=stylesheet]:not([type])","style:not([type])","script:not([type])",'script[type="application/javascript"]','script[type="text/javascript"]'].join(","),map:{link:"parseLink",script:"parseScript",style:"parseStyle"},dynamicElements:[],parseNext:function(){var e=this.nextToParse();e&&this.parse(e)},parse:function(e){if(this.isParsed(e))return void(c.parse&&console.log("[%s] is already parsed",e.localName));var t=this[this.map[e.localName]];t&&(this.markParsing(e),t.call(this,e))},parseDynamic:function(e,t){this.dynamicElements.push(e),t||this.parseNext()},markParsing:function(e){c.parse&&console.log("parsing",e),this.parsingElement=e},markParsingComplete:function(e){e.__importParsed=!0,this.markDynamicParsingComplete(e),e.__importElement&&(e.__importElement.__importParsed=!0,this.markDynamicParsingComplete(e.__importElement)),this.parsingElement=null,c.parse&&console.log("completed",e)},markDynamicParsingComplete:function(e){var t=this.dynamicElements.indexOf(e);t>=0&&this.dynamicElements.splice(t,1)},parseImport:function(e){if(e["import"]=e.__doc,window.HTMLImports.__importsParsingHook&&window.HTMLImports.__importsParsingHook(e),e["import"]&&(e["import"].__importParsed=!0),this.markParsingComplete(e),e.__resource&&!e.__error?e.dispatchEvent(new CustomEvent("load",{bubbles:!1})):e.dispatchEvent(new CustomEvent("error",{bubbles:!1})),e.__pending)for(var t;e.__pending.length;)t=e.__pending.shift(),t&&t({target:e});this.parseNext()},parseLink:function(e){t(e)?this.parseImport(e):(e.href=e.href,this.parseGeneric(e))},parseStyle:function(e){var t=e;e=i(e),t.__appliedElement=e,e.__importElement=t,this.parseGeneric(e)},parseGeneric:function(e){this.trackElement(e),this.addElementToDocument(e)},rootImportForElement:function(e){for(var t=e;t.ownerDocument.__importLink;)t=t.ownerDocument.__importLink;return t},addElementToDocument:function(e){var t=this.rootImportForElement(e.__importElement||e);t.parentNode.insertBefore(e,t)},trackElement:function(e,t){var n=this,o=function(r){e.removeEventListener("load",o),e.removeEventListener("error",o),t&&t(r),n.markParsingComplete(e),n.parseNext()};if(e.addEventListener("load",o),e.addEventListener("error",o),d&&"style"===e.localName){var r=!1;if(e.textContent.indexOf("@import")==-1)r=!0;else if(e.sheet){r=!0;for(var i,a=e.sheet.cssRules,s=a?a.length:0,c=0;c<s&&(i=a[c]);c++)i.type===CSSRule.IMPORT_RULE&&(r=r&&Boolean(i.styleSheet))}r&&setTimeout(function(){e.dispatchEvent(new CustomEvent("load",{bubbles:!1}))})}},parseScript:function(t){var o=document.createElement("script");o.__importElement=t,o.src=t.src?t.src:n(t),e.currentScript=t,this.trackElement(o,function(t){o.parentNode&&o.parentNode.removeChild(o),e.currentScript=null}),this.addElementToDocument(o)},nextToParse:function(){return this._mayParse=[],!this.parsingElement&&(this.nextToParseInDoc(s)||this.nextToParseDynamic())},nextToParseInDoc:function(e,n){if(e&&this._mayParse.indexOf(e)<0){this._mayParse.push(e);for(var o,r=e.querySelectorAll(this.parseSelectorsForNode(e)),i=0,a=r.length;i<a&&(o=r[i]);i++)if(!this.isParsed(o))return this.hasResource(o)?t(o)?this.nextToParseInDoc(o.__doc,o):o:void 0}return n},nextToParseDynamic:function(){return this.dynamicElements[0]},parseSelectorsForNode:function(e){var t=e.ownerDocument||e;return t===s?this.documentSelectors:this.importsSelectors},isParsed:function(e){return e.__importParsed},needsDynamicParsing:function(e){return this.dynamicElements.indexOf(e)>=0},hasResource:function(e){return!t(e)||void 0!==e.__doc}};e.parser=h,e.IMPORT_SELECTOR=u}),window.HTMLImports.addModule(function(e){function t(e){return n(e,a)}function n(e,t){return"link"===e.localName&&e.getAttribute("rel")===t}function o(e){return!!Object.getOwnPropertyDescriptor(e,"baseURI")}function r(e,t){var n=document.implementation.createHTMLDocument(a);n._URL=t;var r=n.createElement("base");r.setAttribute("href",t),n.baseURI||o(n)||Object.defineProperty(n,"baseURI",{value:t});var i=n.createElement("meta");return i.setAttribute("charset","utf-8"),n.head.appendChild(i),n.head.appendChild(r),n.body.innerHTML=e,window.HTMLTemplateElement&&HTMLTemplateElement.bootstrap&&HTMLTemplateElement.bootstrap(n),n}var i=e.flags,a=e.IMPORT_LINK_TYPE,s=e.IMPORT_SELECTOR,c=e.rootDocument,d=e.Loader,l=e.Observer,u=e.parser,h={documents:{},documentPreloadSelectors:s,importsPreloadSelectors:[s].join(","),loadNode:function(e){f.addNode(e)},loadSubtree:function(e){var t=this.marshalNodes(e);f.addNodes(t)},marshalNodes:function(e){return e.querySelectorAll(this.loadSelectorsForNode(e))},loadSelectorsForNode:function(e){var t=e.ownerDocument||e;return t===c?this.documentPreloadSelectors:this.importsPreloadSelectors},loaded:function(e,n,o,a,s){if(i.load&&console.log("loaded",e,n),n.__resource=o,n.__error=a,t(n)){var c=this.documents[e];void 0===c&&(c=a?null:r(o,s||e),c&&(c.__importLink=n,this.bootDocument(c)),this.documents[e]=c),n.__doc=c}u.parseNext()},bootDocument:function(e){this.loadSubtree(e),this.observer.observe(e),u.parseNext()},loadedAll:function(){u.parseNext()}},f=new d(h.loaded.bind(h),h.loadedAll.bind(h));if(h.observer=new l,!document.baseURI){var p={get:function(){var e=document.querySelector("base");return e?e.href:window.location.href},configurable:!0};Object.defineProperty(document,"baseURI",p),Object.defineProperty(c,"baseURI",p)}e.importer=h,e.importLoader=f}),window.HTMLImports.addModule(function(e){var t=e.parser,n=e.importer,o={added:function(e){for(var o,r,i,a,s=0,c=e.length;s<c&&(a=e[s]);s++)o||(o=a.ownerDocument,r=t.isParsed(o)),i=this.shouldLoadNode(a),i&&n.loadNode(a),this.shouldParseNode(a)&&r&&t.parseDynamic(a,i)},shouldLoadNode:function(e){return 1===e.nodeType&&r.call(e,n.loadSelectorsForNode(e))},shouldParseNode:function(e){return 1===e.nodeType&&r.call(e,t.parseSelectorsForNode(e))}};n.observer.addCallback=o.added.bind(o);var r=HTMLElement.prototype.matches||HTMLElement.prototype.matchesSelector||HTMLElement.prototype.webkitMatchesSelector||HTMLElement.prototype.mozMatchesSelector||HTMLElement.prototype.msMatchesSelector}),function(e){function t(){window.HTMLImports.importer.bootDocument(o)}var n=e.initializeModules;e.isIE;if(!e.useNative){n();var o=e.rootDocument;"complete"===document.readyState||"interactive"===document.readyState&&!window.attachEvent?t():document.addEventListener("DOMContentLoaded",t)}}(window.HTMLImports),window.CustomElements=window.CustomElements||{flags:{}},function(e){var t=e.flags,n=[],o=function(e){n.push(e)},r=function(){n.forEach(function(t){t(e)})};e.addModule=o,e.initializeModules=r,e.hasNative=Boolean(document.registerElement),e.isIE=/Trident/.test(navigator.userAgent),e.useNative=!t.register&&e.hasNative&&!window.ShadowDOMPolyfill&&(!window.HTMLImports||window.HTMLImports.useNative)}(window.CustomElements),window.CustomElements.addModule(function(e){function t(e,t){n(e,function(e){return!!t(e)||void o(e,t)}),o(e,t)}function n(e,t,o){var r=e.firstElementChild;if(!r)for(r=e.firstChild;r&&r.nodeType!==Node.ELEMENT_NODE;)r=r.nextSibling;for(;r;)t(r,o)!==!0&&n(r,t,o),r=r.nextElementSibling;return null}function o(e,n){for(var o=e.shadowRoot;o;)t(o,n),o=o.olderShadowRoot}function r(e,t){i(e,t,[])}function i(e,t,n){if(e=window.wrap(e),!(n.indexOf(e)>=0)){n.push(e);for(var o,r=e.querySelectorAll("link[rel="+a+"]"),s=0,c=r.length;s<c&&(o=r[s]);s++)o["import"]&&i(o["import"],t,n);t(e)}}var a=window.HTMLImports?window.HTMLImports.IMPORT_LINK_TYPE:"none";e.forDocumentTree=r,e.forSubtree=t}),window.CustomElements.addModule(function(e){function t(e,t){return n(e,t)||o(e,t)}function n(t,n){return!!e.upgrade(t,n)||void(n&&a(t))}function o(e,t){g(e,function(e){if(n(e,t))return!0})}function r(e){L.push(e),E||(E=!0,setTimeout(i))}function i(){E=!1;for(var e,t=L,n=0,o=t.length;n<o&&(e=t[n]);n++)e();L=[]}function a(e){y?r(function(){s(e);
}):s(e)}function s(e){e.__upgraded__&&!e.__attached&&(e.__attached=!0,e.attachedCallback&&e.attachedCallback())}function c(e){d(e),g(e,function(e){d(e)})}function d(e){y?r(function(){l(e)}):l(e)}function l(e){e.__upgraded__&&e.__attached&&(e.__attached=!1,e.detachedCallback&&e.detachedCallback())}function u(e){for(var t=e,n=window.wrap(document);t;){if(t==n)return!0;t=t.parentNode||t.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&t.host}}function h(e){if(e.shadowRoot&&!e.shadowRoot.__watched){_.dom&&console.log("watching shadow-root for: ",e.localName);for(var t=e.shadowRoot;t;)m(t),t=t.olderShadowRoot}}function f(e,n){if(_.dom){var o=n[0];if(o&&"childList"===o.type&&o.addedNodes&&o.addedNodes){for(var r=o.addedNodes[0];r&&r!==document&&!r.host;)r=r.parentNode;var i=r&&(r.URL||r._URL||r.host&&r.host.localName)||"";i=i.split("/?").shift().split("/").pop()}console.group("mutations (%d) [%s]",n.length,i||"")}var a=u(e);n.forEach(function(e){"childList"===e.type&&(N(e.addedNodes,function(e){e.localName&&t(e,a)}),N(e.removedNodes,function(e){e.localName&&c(e)}))}),_.dom&&console.groupEnd()}function p(e){for(e=window.wrap(e),e||(e=window.wrap(document));e.parentNode;)e=e.parentNode;var t=e.__observer;t&&(f(e,t.takeRecords()),i())}function m(e){if(!e.__observer){var t=new MutationObserver(f.bind(this,e));t.observe(e,{childList:!0,subtree:!0}),e.__observer=t}}function v(e){e=window.wrap(e),_.dom&&console.group("upgradeDocument: ",e.baseURI.split("/").pop());var n=e===window.wrap(document);t(e,n),m(e),_.dom&&console.groupEnd()}function w(e){b(e,v)}var _=e.flags,g=e.forSubtree,b=e.forDocumentTree,y=window.MutationObserver._isPolyfilled&&_["throttle-attached"];e.hasPolyfillMutations=y,e.hasThrottledAttached=y;var E=!1,L=[],N=Array.prototype.forEach.call.bind(Array.prototype.forEach),M=Element.prototype.createShadowRoot;M&&(Element.prototype.createShadowRoot=function(){var e=M.call(this);return window.CustomElements.watchShadow(this),e}),e.watchShadow=h,e.upgradeDocumentTree=w,e.upgradeDocument=v,e.upgradeSubtree=o,e.upgradeAll=t,e.attached=a,e.takeRecords=p}),window.CustomElements.addModule(function(e){function t(t,o){if("template"===t.localName&&window.HTMLTemplateElement&&HTMLTemplateElement.decorate&&HTMLTemplateElement.decorate(t),!t.__upgraded__&&t.nodeType===Node.ELEMENT_NODE){var r=t.getAttribute("is"),i=e.getRegisteredDefinition(t.localName)||e.getRegisteredDefinition(r);if(i&&(r&&i.tag==t.localName||!r&&!i["extends"]))return n(t,i,o)}}function n(t,n,r){return a.upgrade&&console.group("upgrade:",t.localName),n.is&&t.setAttribute("is",n.is),o(t,n),t.__upgraded__=!0,i(t),r&&e.attached(t),e.upgradeSubtree(t,r),a.upgrade&&console.groupEnd(),t}function o(e,t){Object.__proto__?e.__proto__=t.prototype:(r(e,t.prototype,t["native"]),e.__proto__=t.prototype)}function r(e,t,n){for(var o={},r=t;r!==n&&r!==HTMLElement.prototype;){for(var i,a=Object.getOwnPropertyNames(r),s=0;i=a[s];s++)o[i]||(Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i)),o[i]=1);r=Object.getPrototypeOf(r)}}function i(e){e.createdCallback&&e.createdCallback()}var a=e.flags;e.upgrade=t,e.upgradeWithDefinition=n,e.implementPrototype=o}),window.CustomElements.addModule(function(e){function t(t,o){var c=o||{};if(!t)throw new Error("document.registerElement: first argument `name` must not be empty");if(t.indexOf("-")<0)throw new Error("document.registerElement: first argument ('name') must contain a dash ('-'). Argument provided was '"+String(t)+"'.");if(r(t))throw new Error("Failed to execute 'registerElement' on 'Document': Registration failed for type '"+String(t)+"'. The type name is invalid.");if(d(t))throw new Error("DuplicateDefinitionError: a type with name '"+String(t)+"' is already registered");return c.prototype||(c.prototype=Object.create(HTMLElement.prototype)),c.__name=t.toLowerCase(),c["extends"]&&(c["extends"]=c["extends"].toLowerCase()),c.lifecycle=c.lifecycle||{},c.ancestry=i(c["extends"]),a(c),s(c),n(c.prototype),l(c.__name,c),c.ctor=u(c),c.ctor.prototype=c.prototype,c.prototype.constructor=c.ctor,e.ready&&v(document),c.ctor}function n(e){if(!e.setAttribute._polyfilled){var t=e.setAttribute;e.setAttribute=function(e,n){o.call(this,e,n,t)};var n=e.removeAttribute;e.removeAttribute=function(e){o.call(this,e,null,n)},e.setAttribute._polyfilled=!0}}function o(e,t,n){e=e.toLowerCase();var o=this.getAttribute(e);n.apply(this,arguments);var r=this.getAttribute(e);this.attributeChangedCallback&&r!==o&&this.attributeChangedCallback(e,o,r)}function r(e){for(var t=0;t<y.length;t++)if(e===y[t])return!0}function i(e){var t=d(e);return t?i(t["extends"]).concat([t]):[]}function a(e){for(var t,n=e["extends"],o=0;t=e.ancestry[o];o++)n=t.is&&t.tag;e.tag=n||e.__name,n&&(e.is=e.__name)}function s(e){if(!Object.__proto__){var t=HTMLElement.prototype;if(e.is){var n=document.createElement(e.tag);t=Object.getPrototypeOf(n)}for(var o,r=e.prototype,i=!1;r;)r==t&&(i=!0),o=Object.getPrototypeOf(r),o&&(r.__proto__=o),r=o;i||console.warn(e.tag+" prototype not found in prototype chain for "+e.is),e["native"]=t}}function c(e){return _(N(e.tag),e)}function d(e){if(e)return E[e.toLowerCase()]}function l(e,t){E[e]=t}function u(e){return function(){return c(e)}}function h(e,t,n){return e===L?f(t,n):M(e,t)}function f(e,t){e&&(e=e.toLowerCase()),t&&(t=t.toLowerCase());var n=d(t||e);if(n){if(e==n.tag&&t==n.is)return new n.ctor;if(!t&&!n.is)return new n.ctor}var o;return t?(o=f(e),o.setAttribute("is",t),o):(o=N(e),e.indexOf("-")>=0&&g(o,HTMLElement),o)}function p(e,t){var n=e[t];e[t]=function(){var e=n.apply(this,arguments);return w(e),e}}var m,v=(e.isIE,e.upgradeDocumentTree),w=e.upgradeAll,_=e.upgradeWithDefinition,g=e.implementPrototype,b=e.useNative,y=["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"],E={},L="http://www.w3.org/1999/xhtml",N=document.createElement.bind(document),M=document.createElementNS.bind(document);m=Object.__proto__||b?function(e,t){return e instanceof t}:function(e,t){if(e instanceof t)return!0;for(var n=e;n;){if(n===t.prototype)return!0;n=n.__proto__}return!1},p(Node.prototype,"cloneNode"),p(document,"importNode"),document.registerElement=t,document.createElement=f,document.createElementNS=h,e.registry=E,e["instanceof"]=m,e.reservedTagList=y,e.getRegisteredDefinition=d,document.register=document.registerElement}),function(e){function t(){i(window.wrap(document)),window.CustomElements.ready=!0;var e=window.requestAnimationFrame||function(e){setTimeout(e,16)};e(function(){setTimeout(function(){window.CustomElements.readyTime=Date.now(),window.HTMLImports&&(window.CustomElements.elapsed=window.CustomElements.readyTime-window.HTMLImports.readyTime),document.dispatchEvent(new CustomEvent("WebComponentsReady",{bubbles:!0}))})})}var n=e.useNative,o=e.initializeModules;e.isIE;if(n){var r=function(){};e.watchShadow=r,e.upgrade=r,e.upgradeAll=r,e.upgradeDocumentTree=r,e.upgradeSubtree=r,e.takeRecords=r,e["instanceof"]=function(e,t){return e instanceof t}}else o();var i=e.upgradeDocumentTree,a=e.upgradeDocument;if(window.wrap||(window.ShadowDOMPolyfill?(window.wrap=window.ShadowDOMPolyfill.wrapIfNeeded,window.unwrap=window.ShadowDOMPolyfill.unwrapIfNeeded):window.wrap=window.unwrap=function(e){return e}),window.HTMLImports&&(window.HTMLImports.__importsParsingHook=function(e){e["import"]&&a(wrap(e["import"]))}),"complete"===document.readyState||e.flags.eager)t();else if("interactive"!==document.readyState||window.attachEvent||window.HTMLImports&&!window.HTMLImports.ready){var s=window.HTMLImports&&!window.HTMLImports.ready?"HTMLImportsLoaded":"DOMContentLoaded";window.addEventListener(s,t)}else t()}(window.CustomElements),function(e){var t=document.createElement("style");t.textContent="body {transition: opacity ease-in 0.2s; } \nbody[unresolved] {opacity: 0; display: block; overflow: hidden; position: relative; } \n";var n=document.querySelector("head");n.insertBefore(t,n.firstChild)}(window.WebComponents);</script>
  <!--
@license
Copyright 2016 The TensorFlow Authors. All Rights Reserved.

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.

@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt

@license
Copyright (c) 2014 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt

@license
Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt

@license
three.js
Copyright (c) 2010-2013 three.js authors

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

@license
d3
Copyright 2010-2017 Mike Bostock
All rights reserved.

Redistribution and use in source and binary forms, with or without modification,
are permitted provided that the following conditions are met:

* Redistributions of source code must retain the above copyright notice, this
  list of conditions and the following disclaimer.

* Redistributions in binary form must reproduce the above copyright notice,
  this list of conditions and the following disclaimer in the documentation
  and/or other materials provided with the distribution.

* Neither the name of the author nor the names of contributors may be used to
  endorse or promote products derived from this software without specific prior
  written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

@license
Numeric Javascript
Copyright (C) 2011 by Sébastien Loisel
Copyright (c) 2011 Alberto Santini <albertosantini@gmail.com>

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

@license
weblas
Copyright (c) 2015 Waylon Flinn

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
--><script>/**
 * @license
 * Copyright 2014 Google Inc. All rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 *     You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *     See the License for the specific language governing permissions and
 * limitations under the License.
 */
(/** @suppress {checkTypes|globalThis|checkVars|suspiciousCode|uselessCode} */ function() {
!function(a,b){var c={},d={},e={},f=null;!function(a,b){function c(a){if("number"==typeof a)return a;var b={};for(var c in a)b[c]=a[c];return b}function d(){this._delay=0,this._endDelay=0,this._fill="none",this._iterationStart=0,this._iterations=1,this._duration=0,this._playbackRate=1,this._direction="normal",this._easing="linear",this._easingFunction=w}function e(){return a.isDeprecated("Invalid timing inputs","2016-03-02","TypeError exceptions will be thrown instead.",!0)}function f(b,c,e){var f=new d;return c&&(f.fill="both",f.duration="auto"),"number"!=typeof b||isNaN(b)?void 0!==b&&Object.getOwnPropertyNames(b).forEach(function(c){if("auto"!=b[c]){if(("number"==typeof f[c]||"duration"==c)&&("number"!=typeof b[c]||isNaN(b[c])))return;if("fill"==c&&-1==u.indexOf(b[c]))return;if("direction"==c&&-1==v.indexOf(b[c]))return;if("playbackRate"==c&&1!==b[c]&&a.isDeprecated("AnimationEffectTiming.playbackRate","2014-11-28","Use Animation.playbackRate instead."))return;f[c]=b[c]}}):f.duration=b,f}function g(a){return"number"==typeof a&&(a=isNaN(a)?{duration:0}:{duration:a}),a}function h(b,c){return b=a.numericTimingToObject(b),f(b,c)}function i(a,b,c,d){return 0>a||a>1||0>c||c>1?w:function(e){function f(a,b,c){return 3*a*(1-c)*(1-c)*c+3*b*(1-c)*c*c+c*c*c}if(0==e||1==e)return e;for(var g=0,h=1;;){var i=(g+h)/2,j=f(a,c,i);if(Math.abs(e-j)<1e-4)return f(b,d,i);e>j?g=i:h=i}}}function j(a,b){return function(c){if(c>=1)return 1;var d=1/a;return c+=b*d,c-c%d}}function k(a){B||(B=document.createElement("div").style),B.animationTimingFunction="",B.animationTimingFunction=a;var b=B.animationTimingFunction;if(""==b&&e())throw new TypeError(a+" is not a valid value for easing");var c=D.exec(b);if(c)return i.apply(this,c.slice(1).map(Number));var d=E.exec(b);if(d)return j(Number(d[1]),{start:x,middle:y,end:z}[d[2]]);var f=A[b];return f?f:w}function l(a){return Math.abs(m(a)/a.playbackRate)}function m(a){return a.duration*a.iterations}function n(a,b,c){return null==b?F:b<c.delay?G:b>=c.delay+a?H:I}function o(a,b,c,d,e){switch(d){case G:return"backwards"==b||"both"==b?0:null;case I:return c-e;case H:return"forwards"==b||"both"==b?a:null;case F:return null}}function p(a,b,c,d){return(d.playbackRate<0?b-a:b)*d.playbackRate+c}function q(a,b,c,d,e){return c===1/0||c===-(1/0)||c-d==b&&e.iterations&&(e.iterations+e.iterationStart)%1==0?a:c%a}function r(a,b,c,d){return 0===c?0:b==a?d.iterationStart+d.iterations-1:Math.floor(c/a)}function s(a,b,c,d){var e=a%2>=1,f="normal"==d.direction||d.direction==(e?"alternate-reverse":"alternate"),g=f?c:b-c,h=g/b;return b*d._easingFunction(h)}function t(a,b,c){var d=n(a,b,c),e=o(a,c.fill,b,d,c.delay);if(null===e)return null;if(0===a)return d===G?0:1;var f=c.iterationStart*c.duration,g=p(a,e,f,c),h=q(c.duration,m(c),g,f,c),i=r(c.duration,h,g,c);return s(i,c.duration,h,c)/c.duration}var u="backwards|forwards|both|none".split("|"),v="reverse|alternate|alternate-reverse".split("|"),w=function(a){return a};d.prototype={_setMember:function(b,c){this["_"+b]=c,this._effect&&(this._effect._timingInput[b]=c,this._effect._timing=a.normalizeTimingInput(this._effect._timingInput),this._effect.activeDuration=a.calculateActiveDuration(this._effect._timing),this._effect._animation&&this._effect._animation._rebuildUnderlyingAnimation())},get playbackRate(){return this._playbackRate},set delay(a){this._setMember("delay",a)},get delay(){return this._delay},set endDelay(a){this._setMember("endDelay",a)},get endDelay(){return this._endDelay},set fill(a){this._setMember("fill",a)},get fill(){return this._fill},set iterationStart(a){if((isNaN(a)||0>a)&&e())throw new TypeError("iterationStart must be a non-negative number, received: "+timing.iterationStart);this._setMember("iterationStart",a)},get iterationStart(){return this._iterationStart},set duration(a){if("auto"!=a&&(isNaN(a)||0>a)&&e())throw new TypeError("duration must be non-negative or auto, received: "+a);this._setMember("duration",a)},get duration(){return this._duration},set direction(a){this._setMember("direction",a)},get direction(){return this._direction},set easing(a){this._easingFunction=k(a),this._setMember("easing",a)},get easing(){return this._easing},set iterations(a){if((isNaN(a)||0>a)&&e())throw new TypeError("iterations must be non-negative, received: "+a);this._setMember("iterations",a)},get iterations(){return this._iterations}};var x=1,y=.5,z=0,A={ease:i(.25,.1,.25,1),"ease-in":i(.42,0,1,1),"ease-out":i(0,0,.58,1),"ease-in-out":i(.42,0,.58,1),"step-start":j(1,x),"step-middle":j(1,y),"step-end":j(1,z)},B=null,C="\\s*(-?\\d+\\.?\\d*|-?\\.\\d+)\\s*",D=new RegExp("cubic-bezier\\("+C+","+C+","+C+","+C+"\\)"),E=/steps\(\s*(\d+)\s*,\s*(start|middle|end)\s*\)/,F=0,G=1,H=2,I=3;a.cloneTimingInput=c,a.makeTiming=f,a.numericTimingToObject=g,a.normalizeTimingInput=h,a.calculateActiveDuration=l,a.calculateTimeFraction=t,a.calculatePhase=n,a.toTimingFunction=k}(c,f),function(a,b){function c(a,b){return a in j?j[a][b]||b:b}function d(a,b,d){var e=g[a];if(e){h.style[a]=b;for(var f in e){var i=e[f],j=h.style[i];d[i]=c(i,j)}}else d[a]=c(a,b)}function e(a){var b=[];for(var c in a)if(!(c in["easing","offset","composite"])){var d=a[c];Array.isArray(d)||(d=[d]);for(var e,f=d.length,g=0;f>g;g++)e={},"offset"in a?e.offset=a.offset:1==f?e.offset=1:e.offset=g/(f-1),"easing"in a&&(e.easing=a.easing),"composite"in a&&(e.composite=a.composite),e[c]=d[g],b.push(e)}return b.sort(function(a,b){return a.offset-b.offset}),b}function f(a){function b(){var a=c.length;null==c[a-1].offset&&(c[a-1].offset=1),a>1&&null==c[0].offset&&(c[0].offset=0);for(var b=0,d=c[0].offset,e=1;a>e;e++){var f=c[e].offset;if(null!=f){for(var g=1;e-b>g;g++)c[b+g].offset=d+(f-d)*g/(e-b);b=e,d=f}}}if(null==a)return[];window.Symbol&&Symbol.iterator&&Array.prototype.from&&a[Symbol.iterator]&&(a=Array.from(a)),Array.isArray(a)||(a=e(a));for(var c=a.map(function(a){var b={};for(var c in a){var e=a[c];if("offset"==c){if(null!=e&&(e=Number(e),!isFinite(e)))throw new TypeError("keyframe offsets must be numbers.")}else{if("composite"==c)throw{type:DOMException.NOT_SUPPORTED_ERR,name:"NotSupportedError",message:"add compositing is not supported"};e=""+e}d(c,e,b)}return void 0==b.offset&&(b.offset=null),b}),f=!0,g=-(1/0),h=0;h<c.length;h++){var i=c[h].offset;if(null!=i){if(g>i)throw{code:DOMException.INVALID_MODIFICATION_ERR,name:"InvalidModificationError",message:"Keyframes are not loosely sorted by offset. Sort or specify offsets."};g=i}else f=!1}return c=c.filter(function(a){return a.offset>=0&&a.offset<=1}),f||b(),c}var g={background:["backgroundImage","backgroundPosition","backgroundSize","backgroundRepeat","backgroundAttachment","backgroundOrigin","backgroundClip","backgroundColor"],border:["borderTopColor","borderTopStyle","borderTopWidth","borderRightColor","borderRightStyle","borderRightWidth","borderBottomColor","borderBottomStyle","borderBottomWidth","borderLeftColor","borderLeftStyle","borderLeftWidth"],borderBottom:["borderBottomWidth","borderBottomStyle","borderBottomColor"],borderColor:["borderTopColor","borderRightColor","borderBottomColor","borderLeftColor"],borderLeft:["borderLeftWidth","borderLeftStyle","borderLeftColor"],borderRadius:["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],borderRight:["borderRightWidth","borderRightStyle","borderRightColor"],borderTop:["borderTopWidth","borderTopStyle","borderTopColor"],borderWidth:["borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth"],flex:["flexGrow","flexShrink","flexBasis"],font:["fontFamily","fontSize","fontStyle","fontVariant","fontWeight","lineHeight"],margin:["marginTop","marginRight","marginBottom","marginLeft"],outline:["outlineColor","outlineStyle","outlineWidth"],padding:["paddingTop","paddingRight","paddingBottom","paddingLeft"]},h=document.createElementNS("http://www.w3.org/1999/xhtml","div"),i={thin:"1px",medium:"3px",thick:"5px"},j={borderBottomWidth:i,borderLeftWidth:i,borderRightWidth:i,borderTopWidth:i,fontSize:{"xx-small":"60%","x-small":"75%",small:"89%",medium:"100%",large:"120%","x-large":"150%","xx-large":"200%"},fontWeight:{normal:"400",bold:"700"},outlineWidth:i,textShadow:{none:"0px 0px 0px transparent"},boxShadow:{none:"0px 0px 0px 0px transparent"}};a.convertToArrayForm=e,a.normalizeKeyframes=f}(c,f),function(a){var b={};a.isDeprecated=function(a,c,d,e){var f=e?"are":"is",g=new Date,h=new Date(c);return h.setMonth(h.getMonth()+3),h>g?(a in b||console.warn("Web Animations: "+a+" "+f+" deprecated and will stop working on "+h.toDateString()+". "+d),b[a]=!0,!1):!0},a.deprecated=function(b,c,d,e){var f=e?"are":"is";if(a.isDeprecated(b,c,d,e))throw new Error(b+" "+f+" no longer supported. "+d)}}(c),function(){if(document.documentElement.animate){var a=document.documentElement.animate([],0),b=!0;if(a&&(b=!1,"play|currentTime|pause|reverse|playbackRate|cancel|finish|startTime|playState".split("|").forEach(function(c){void 0===a[c]&&(b=!0)})),!b)return}!function(a,b,c){function d(a){for(var b={},c=0;c<a.length;c++)for(var d in a[c])if("offset"!=d&&"easing"!=d&&"composite"!=d){var e={offset:a[c].offset,easing:a[c].easing,value:a[c][d]};b[d]=b[d]||[],b[d].push(e)}for(var f in b){var g=b[f];if(0!=g[0].offset||1!=g[g.length-1].offset)throw{type:DOMException.NOT_SUPPORTED_ERR,name:"NotSupportedError",message:"Partial keyframes are not supported"}}return b}function e(c){var d=[];for(var e in c)for(var f=c[e],g=0;g<f.length-1;g++){var h=f[g].offset,i=f[g+1].offset,j=f[g].value,k=f[g+1].value,l=f[g].easing;h==i&&(1==i?j=k:k=j),d.push({startTime:h,endTime:i,easing:a.toTimingFunction(l?l:"linear"),property:e,interpolation:b.propertyInterpolation(e,j,k)})}return d.sort(function(a,b){return a.startTime-b.startTime}),d}b.convertEffectInput=function(c){var f=a.normalizeKeyframes(c),g=d(f),h=e(g);return function(a,c){if(null!=c)h.filter(function(a){return 0>=c&&0==a.startTime||c>=1&&1==a.endTime||c>=a.startTime&&c<=a.endTime}).forEach(function(d){var e=c-d.startTime,f=d.endTime-d.startTime,g=0==f?0:d.easing(e/f);b.apply(a,d.property,d.interpolation(g))});else for(var d in g)"offset"!=d&&"easing"!=d&&"composite"!=d&&b.clear(a,d)}}}(c,d,f),function(a,b,c){function d(a){return a.replace(/-(.)/g,function(a,b){return b.toUpperCase()})}function e(a,b,c){h[c]=h[c]||[],h[c].push([a,b])}function f(a,b,c){for(var f=0;f<c.length;f++){var g=c[f];e(a,b,d(g))}}function g(c,e,f){var g=c;/-/.test(c)&&!a.isDeprecated("Hyphenated property names","2016-03-22","Use camelCase instead.",!0)&&(g=d(c)),"initial"!=e&&"initial"!=f||("initial"==e&&(e=i[g]),"initial"==f&&(f=i[g]));for(var j=e==f?[]:h[g],k=0;j&&k<j.length;k++){var l=j[k][0](e),m=j[k][0](f);if(void 0!==l&&void 0!==m){var n=j[k][1](l,m);if(n){var o=b.Interpolation.apply(null,n);return function(a){return 0==a?e:1==a?f:o(a)}}}}return b.Interpolation(!1,!0,function(a){return a?f:e})}var h={};b.addPropertiesHandler=f;var i={backgroundColor:"transparent",backgroundPosition:"0% 0%",borderBottomColor:"currentColor",borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px",borderBottomWidth:"3px",borderLeftColor:"currentColor",borderLeftWidth:"3px",borderRightColor:"currentColor",borderRightWidth:"3px",borderSpacing:"2px",borderTopColor:"currentColor",borderTopLeftRadius:"0px",borderTopRightRadius:"0px",borderTopWidth:"3px",bottom:"auto",clip:"rect(0px, 0px, 0px, 0px)",color:"black",fontSize:"100%",fontWeight:"400",height:"auto",left:"auto",letterSpacing:"normal",lineHeight:"120%",marginBottom:"0px",marginLeft:"0px",marginRight:"0px",marginTop:"0px",maxHeight:"none",maxWidth:"none",minHeight:"0px",minWidth:"0px",opacity:"1.0",outlineColor:"invert",outlineOffset:"0px",outlineWidth:"3px",paddingBottom:"0px",paddingLeft:"0px",paddingRight:"0px",paddingTop:"0px",right:"auto",textIndent:"0px",textShadow:"0px 0px 0px transparent",top:"auto",transform:"",verticalAlign:"0px",visibility:"visible",width:"auto",wordSpacing:"normal",zIndex:"auto"};b.propertyInterpolation=g}(c,d,f),function(a,b,c){function d(b){var c=a.calculateActiveDuration(b),d=function(d){return a.calculateTimeFraction(c,d,b)};return d._totalDuration=b.delay+c+b.endDelay,d._isCurrent=function(d){var e=a.calculatePhase(c,d,b);return e===PhaseActive||e===PhaseBefore},d}b.KeyframeEffect=function(c,e,f,g){var h,i=d(a.normalizeTimingInput(f)),j=b.convertEffectInput(e),k=function(){j(c,h)};return k._update=function(a){return h=i(a),null!==h},k._clear=function(){j(c,null)},k._hasSameTarget=function(a){return c===a},k._isCurrent=i._isCurrent,k._totalDuration=i._totalDuration,k._id=g,k},b.NullEffect=function(a){var b=function(){a&&(a(),a=null)};return b._update=function(){return null},b._totalDuration=0,b._isCurrent=function(){return!1},b._hasSameTarget=function(){return!1},b}}(c,d,f),function(a,b){a.apply=function(b,c,d){b.style[a.propertyName(c)]=d},a.clear=function(b,c){b.style[a.propertyName(c)]=""}}(d,f),function(a){window.Element.prototype.animate=function(b,c){var d="";return c&&c.id&&(d=c.id),a.timeline._play(a.KeyframeEffect(this,b,c,d))}}(d),function(a,b){function c(a,b,d){if("number"==typeof a&&"number"==typeof b)return a*(1-d)+b*d;if("boolean"==typeof a&&"boolean"==typeof b)return.5>d?a:b;if(a.length==b.length){for(var e=[],f=0;f<a.length;f++)e.push(c(a[f],b[f],d));return e}throw"Mismatched interpolation arguments "+a+":"+b}a.Interpolation=function(a,b,d){return function(e){return d(c(a,b,e))}}}(d,f),function(a,b,c){a.sequenceNumber=0;var d=function(a,b,c){this.target=a,this.currentTime=b,this.timelineTime=c,this.type="finish",this.bubbles=!1,this.cancelable=!1,this.currentTarget=a,this.defaultPrevented=!1,this.eventPhase=Event.AT_TARGET,this.timeStamp=Date.now()};b.Animation=function(b){this.id="",b&&b._id&&(this.id=b._id),this._sequenceNumber=a.sequenceNumber++,this._currentTime=0,this._startTime=null,this._paused=!1,this._playbackRate=1,this._inTimeline=!0,this._finishedFlag=!0,this.onfinish=null,this._finishHandlers=[],this._effect=b,this._inEffect=this._effect._update(0),this._idle=!0,this._currentTimePending=!1},b.Animation.prototype={_ensureAlive:function(){this.playbackRate<0&&0===this.currentTime?this._inEffect=this._effect._update(-1):this._inEffect=this._effect._update(this.currentTime),this._inTimeline||!this._inEffect&&this._finishedFlag||(this._inTimeline=!0,b.timeline._animations.push(this))},_tickCurrentTime:function(a,b){a!=this._currentTime&&(this._currentTime=a,this._isFinished&&!b&&(this._currentTime=this._playbackRate>0?this._totalDuration:0),this._ensureAlive())},get currentTime(){return this._idle||this._currentTimePending?null:this._currentTime},set currentTime(a){a=+a,isNaN(a)||(b.restart(),this._paused||null==this._startTime||(this._startTime=this._timeline.currentTime-a/this._playbackRate),this._currentTimePending=!1,this._currentTime!=a&&(this._tickCurrentTime(a,!0),b.invalidateEffects()))},get startTime(){return this._startTime},set startTime(a){a=+a,isNaN(a)||this._paused||this._idle||(this._startTime=a,this._tickCurrentTime((this._timeline.currentTime-this._startTime)*this.playbackRate),b.invalidateEffects())},get playbackRate(){return this._playbackRate},set playbackRate(a){if(a!=this._playbackRate){var b=this.currentTime;this._playbackRate=a,this._startTime=null,"paused"!=this.playState&&"idle"!=this.playState&&this.play(),null!=b&&(this.currentTime=b)}},get _isFinished(){return!this._idle&&(this._playbackRate>0&&this._currentTime>=this._totalDuration||this._playbackRate<0&&this._currentTime<=0)},get _totalDuration(){return this._effect._totalDuration},get playState(){return this._idle?"idle":null==this._startTime&&!this._paused&&0!=this.playbackRate||this._currentTimePending?"pending":this._paused?"paused":this._isFinished?"finished":"running"},play:function(){this._paused=!1,(this._isFinished||this._idle)&&(this._currentTime=this._playbackRate>0?0:this._totalDuration,this._startTime=null),this._finishedFlag=!1,this._idle=!1,this._ensureAlive(),b.invalidateEffects()},pause:function(){this._isFinished||this._paused||this._idle||(this._currentTimePending=!0),this._startTime=null,this._paused=!0},finish:function(){this._idle||(this.currentTime=this._playbackRate>0?this._totalDuration:0,this._startTime=this._totalDuration-this.currentTime,this._currentTimePending=!1,b.invalidateEffects())},cancel:function(){this._inEffect&&(this._inEffect=!1,this._idle=!0,this._finishedFlag=!0,this.currentTime=0,this._startTime=null,this._effect._update(null),b.invalidateEffects())},reverse:function(){this.playbackRate*=-1,this.play()},addEventListener:function(a,b){"function"==typeof b&&"finish"==a&&this._finishHandlers.push(b)},removeEventListener:function(a,b){if("finish"==a){var c=this._finishHandlers.indexOf(b);c>=0&&this._finishHandlers.splice(c,1)}},_fireEvents:function(a){if(this._isFinished){if(!this._finishedFlag){var b=new d(this,this._currentTime,a),c=this._finishHandlers.concat(this.onfinish?[this.onfinish]:[]);setTimeout(function(){c.forEach(function(a){a.call(b.target,b)})},0),this._finishedFlag=!0}}else this._finishedFlag=!1},_tick:function(a,b){this._idle||this._paused||(null==this._startTime?b&&(this.startTime=a-this._currentTime/this.playbackRate):this._isFinished||this._tickCurrentTime((a-this._startTime)*this.playbackRate)),b&&(this._currentTimePending=!1,this._fireEvents(a))},get _needsTick(){return this.playState in{pending:1,running:1}||!this._finishedFlag}}}(c,d,f),function(a,b,c){function d(a){var b=j;j=[],a<p.currentTime&&(a=p.currentTime),h(a,!0),b.forEach(function(b){b[1](a)}),g(),l=void 0}function e(a,b){return a._sequenceNumber-b._sequenceNumber}function f(){this._animations=[],this.currentTime=window.performance&&performance.now?performance.now():0}function g(){o.forEach(function(a){a()}),o.length=0}function h(a,c){n=!1;var d=b.timeline;d.currentTime=a,d._animations.sort(e),m=!1;var f=d._animations;d._animations=[];var g=[],h=[];f=f.filter(function(b){b._tick(a,c),b._inEffect?h.push(b._effect):g.push(b._effect),b._needsTick&&(m=!0);var d=b._inEffect||b._needsTick;return b._inTimeline=d,d}),o.push.apply(o,g),o.push.apply(o,h),d._animations.push.apply(d._animations,f),m&&requestAnimationFrame(function(){})}var i=window.requestAnimationFrame,j=[],k=0;window.requestAnimationFrame=function(a){var b=k++;return 0==j.length&&i(d),j.push([b,a]),b},window.cancelAnimationFrame=function(a){j.forEach(function(b){b[0]==a&&(b[1]=function(){})})},f.prototype={_play:function(c){c._timing=a.normalizeTimingInput(c.timing);var d=new b.Animation(c);return d._idle=!1,d._timeline=this,this._animations.push(d),b.restart(),b.invalidateEffects(),d}};var l=void 0,m=!1,n=!1;b.restart=function(){return m||(m=!0,requestAnimationFrame(function(){}),n=!0),n},b.invalidateEffects=function(){h(b.timeline.currentTime,!1),g()};var o=[],p=new f;b.timeline=p}(c,d,f),function(a){function b(a,b){var c=a.exec(b);return c?(c=a.ignoreCase?c[0].toLowerCase():c[0],[c,b.substr(c.length)]):void 0}function c(a,b){b=b.replace(/^\s*/,"");var c=a(b);return c?[c[0],c[1].replace(/^\s*/,"")]:void 0}function d(a,d,e){a=c.bind(null,a);for(var f=[];;){var g=a(e);if(!g)return[f,e];if(f.push(g[0]),e=g[1],g=b(d,e),!g||""==g[1])return[f,e];e=g[1]}}function e(a,b){for(var c=0,d=0;d<b.length&&(!/\s|,/.test(b[d])||0!=c);d++)if("("==b[d])c++;else if(")"==b[d]&&(c--,0==c&&d++,0>=c))break;var e=a(b.substr(0,d));return void 0==e?void 0:[e,b.substr(d)]}function f(a,b){for(var c=a,d=b;c&&d;)c>d?c%=d:d%=c;return c=a*b/(c+d)}function g(a){return function(b){var c=a(b);return c&&(c[0]=void 0),c}}function h(a,b){return function(c){var d=a(c);return d?d:[b,c]}}function i(b,c){for(var d=[],e=0;e<b.length;e++){var f=a.consumeTrimmed(b[e],c);if(!f||""==f[0])return;void 0!==f[0]&&d.push(f[0]),c=f[1]}return""==c?d:void 0}function j(a,b,c,d,e){for(var g=[],h=[],i=[],j=f(d.length,e.length),k=0;j>k;k++){var l=b(d[k%d.length],e[k%e.length]);if(!l)return;g.push(l[0]),h.push(l[1]),i.push(l[2])}return[g,h,function(b){var d=b.map(function(a,b){return i[b](a)}).join(c);return a?a(d):d}]}function k(a,b,c){for(var d=[],e=[],f=[],g=0,h=0;h<c.length;h++)if("function"==typeof c[h]){var i=c[h](a[g],b[g++]);d.push(i[0]),e.push(i[1]),f.push(i[2])}else!function(a){d.push(!1),e.push(!1),f.push(function(){return c[a]})}(h);return[d,e,function(a){for(var b="",c=0;c<a.length;c++)b+=f[c](a[c]);return b}]}a.consumeToken=b,a.consumeTrimmed=c,a.consumeRepeated=d,a.consumeParenthesised=e,a.ignore=g,a.optional=h,a.consumeList=i,a.mergeNestedRepeated=j.bind(null,null),a.mergeWrappedNestedRepeated=j,a.mergeList=k}(d),function(a){function b(b){function c(b){var c=a.consumeToken(/^inset/i,b);if(c)return d.inset=!0,c;var c=a.consumeLengthOrPercent(b);if(c)return d.lengths.push(c[0]),c;var c=a.consumeColor(b);return c?(d.color=c[0],c):void 0}var d={inset:!1,lengths:[],color:null},e=a.consumeRepeated(c,/^/,b);return e&&e[0].length?[d,e[1]]:void 0}function c(c){var d=a.consumeRepeated(b,/^,/,c);return d&&""==d[1]?d[0]:void 0}function d(b,c){for(;b.lengths.length<Math.max(b.lengths.length,c.lengths.length);)b.lengths.push({px:0});for(;c.lengths.length<Math.max(b.lengths.length,c.lengths.length);)c.lengths.push({px:0});if(b.inset==c.inset&&!!b.color==!!c.color){for(var d,e=[],f=[[],0],g=[[],0],h=0;h<b.lengths.length;h++){var i=a.mergeDimensions(b.lengths[h],c.lengths[h],2==h);f[0].push(i[0]),g[0].push(i[1]),e.push(i[2])}if(b.color&&c.color){var j=a.mergeColors(b.color,c.color);f[1]=j[0],g[1]=j[1],d=j[2]}return[f,g,function(a){for(var c=b.inset?"inset ":" ",f=0;f<e.length;f++)c+=e[f](a[0][f])+" ";return d&&(c+=d(a[1])),c}]}}function e(b,c,d,e){function f(a){return{inset:a,color:[0,0,0,0],lengths:[{px:0},{px:0},{px:0},{px:0}]}}for(var g=[],h=[],i=0;i<d.length||i<e.length;i++){var j=d[i]||f(e[i].inset),k=e[i]||f(d[i].inset);g.push(j),h.push(k)}return a.mergeNestedRepeated(b,c,g,h)}var f=e.bind(null,d,", ");a.addPropertiesHandler(c,f,["box-shadow","text-shadow"])}(d),function(a,b){function c(a){return a.toFixed(3).replace(".000","")}function d(a,b,c){return Math.min(b,Math.max(a,c))}function e(a){return/^\s*[-+]?(\d*\.)?\d+\s*$/.test(a)?Number(a):void 0}function f(a,b){return[a,b,c]}function g(a,b){return 0!=a?i(0,1/0)(a,b):void 0}function h(a,b){return[a,b,function(a){return Math.round(d(1,1/0,a))}]}function i(a,b){return function(e,f){return[e,f,function(e){return c(d(a,b,e))}]}}function j(a,b){return[a,b,Math.round]}a.clamp=d,a.addPropertiesHandler(e,i(0,1/0),["border-image-width","line-height"]),a.addPropertiesHandler(e,i(0,1),["opacity","shape-image-threshold"]),a.addPropertiesHandler(e,g,["flex-grow","flex-shrink"]),a.addPropertiesHandler(e,h,["orphans","widows"]),a.addPropertiesHandler(e,j,["z-index"]),a.parseNumber=e,a.mergeNumbers=f,a.numberToString=c}(d,f),function(a,b){function c(a,b){return"visible"==a||"visible"==b?[0,1,function(c){return 0>=c?a:c>=1?b:"visible"}]:void 0}a.addPropertiesHandler(String,c,["visibility"])}(d),function(a,b){function c(a){a=a.trim(),f.fillStyle="#000",f.fillStyle=a;var b=f.fillStyle;if(f.fillStyle="#fff",f.fillStyle=a,b==f.fillStyle){f.fillRect(0,0,1,1);var c=f.getImageData(0,0,1,1).data;f.clearRect(0,0,1,1);var d=c[3]/255;return[c[0]*d,c[1]*d,c[2]*d,d]}}function d(b,c){return[b,c,function(b){function c(a){return Math.max(0,Math.min(255,a))}if(b[3])for(var d=0;3>d;d++)b[d]=Math.round(c(b[d]/b[3]));return b[3]=a.numberToString(a.clamp(0,1,b[3])),"rgba("+b.join(",")+")"}]}var e=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");e.width=e.height=1;var f=e.getContext("2d");a.addPropertiesHandler(c,d,["background-color","border-bottom-color","border-left-color","border-right-color","border-top-color","color","outline-color","text-decoration-color"]),a.consumeColor=a.consumeParenthesised.bind(null,c),a.mergeColors=d}(d,f),function(a,b){function c(a,b){if(b=b.trim().toLowerCase(),"0"==b&&"px".search(a)>=0)return{px:0};if(/^[^(]*$|^calc/.test(b)){b=b.replace(/calc\(/g,"(");var c={};b=b.replace(a,function(a){return c[a]=null,"U"+a});for(var d="U("+a.source+")",e=b.replace(/[-+]?(\d*\.)?\d+/g,"N").replace(new RegExp("N"+d,"g"),"D").replace(/\s[+-]\s/g,"O").replace(/\s/g,""),f=[/N\*(D)/g,/(N|D)[*\/]N/g,/(N|D)O\1/g,/\((N|D)\)/g],g=0;g<f.length;)f[g].test(e)?(e=e.replace(f[g],"$1"),g=0):g++;if("D"==e){for(var h in c){var i=eval(b.replace(new RegExp("U"+h,"g"),"").replace(new RegExp(d,"g"),"*0"));if(!isFinite(i))return;c[h]=i}return c}}}function d(a,b){return e(a,b,!0)}function e(b,c,d){var e,f=[];for(e in b)f.push(e);for(e in c)f.indexOf(e)<0&&f.push(e);return b=f.map(function(a){return b[a]||0}),c=f.map(function(a){return c[a]||0}),[b,c,function(b){var c=b.map(function(c,e){return 1==b.length&&d&&(c=Math.max(c,0)),a.numberToString(c)+f[e]}).join(" + ");return b.length>1?"calc("+c+")":c}]}var f="px|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc",g=c.bind(null,new RegExp(f,"g")),h=c.bind(null,new RegExp(f+"|%","g")),i=c.bind(null,/deg|rad|grad|turn/g);a.parseLength=g,a.parseLengthOrPercent=h,a.consumeLengthOrPercent=a.consumeParenthesised.bind(null,h),a.parseAngle=i,a.mergeDimensions=e;var j=a.consumeParenthesised.bind(null,g),k=a.consumeRepeated.bind(void 0,j,/^/),l=a.consumeRepeated.bind(void 0,k,/^,/);a.consumeSizePairList=l;var m=function(a){var b=l(a);return b&&""==b[1]?b[0]:void 0},n=a.mergeNestedRepeated.bind(void 0,d," "),o=a.mergeNestedRepeated.bind(void 0,n,",");a.mergeNonNegativeSizePair=n,a.addPropertiesHandler(m,o,["background-size"]),a.addPropertiesHandler(h,d,["border-bottom-width","border-image-width","border-left-width","border-right-width","border-top-width","flex-basis","font-size","height","line-height","max-height","max-width","outline-width","width"]),a.addPropertiesHandler(h,e,["border-bottom-left-radius","border-bottom-right-radius","border-top-left-radius","border-top-right-radius","bottom","left","letter-spacing","margin-bottom","margin-left","margin-right","margin-top","min-height","min-width","outline-offset","padding-bottom","padding-left","padding-right","padding-top","perspective","right","shape-margin","text-indent","top","vertical-align","word-spacing"])}(d,f),function(a,b){function c(b){return a.consumeLengthOrPercent(b)||a.consumeToken(/^auto/,b)}function d(b){var d=a.consumeList([a.ignore(a.consumeToken.bind(null,/^rect/)),a.ignore(a.consumeToken.bind(null,/^\(/)),a.consumeRepeated.bind(null,c,/^,/),a.ignore(a.consumeToken.bind(null,/^\)/))],b);return d&&4==d[0].length?d[0]:void 0}function e(b,c){return"auto"==b||"auto"==c?[!0,!1,function(d){var e=d?b:c;if("auto"==e)return"auto";var f=a.mergeDimensions(e,e);return f[2](f[0])}]:a.mergeDimensions(b,c)}function f(a){return"rect("+a+")"}var g=a.mergeWrappedNestedRepeated.bind(null,f,e,", ");a.parseBox=d,a.mergeBoxes=g,a.addPropertiesHandler(d,g,["clip"])}(d,f),function(a,b){function c(a){return function(b){var c=0;return a.map(function(a){return a===k?b[c++]:a})}}function d(a){return a}function e(b){if(b=b.toLowerCase().trim(),"none"==b)return[];for(var c,d=/\s*(\w+)\(([^)]*)\)/g,e=[],f=0;c=d.exec(b);){if(c.index!=f)return;f=c.index+c[0].length;var g=c[1],h=n[g];if(!h)return;var i=c[2].split(","),j=h[0];if(j.length<i.length)return;for(var k=[],o=0;o<j.length;o++){var p,q=i[o],r=j[o];if(p=q?{A:function(b){return"0"==b.trim()?m:a.parseAngle(b)},N:a.parseNumber,T:a.parseLengthOrPercent,L:a.parseLength}[r.toUpperCase()](q):{a:m,n:k[0],t:l}[r],void 0===p)return;k.push(p)}if(e.push({t:g,d:k}),d.lastIndex==b.length)return e}}function f(a){return a.toFixed(6).replace(".000000","")}function g(b,c){if(b.decompositionPair!==c){b.decompositionPair=c;var d=a.makeMatrixDecomposition(b)}if(c.decompositionPair!==b){c.decompositionPair=b;var e=a.makeMatrixDecomposition(c)}return null==d[0]||null==e[0]?[[!1],[!0],function(a){return a?c[0].d:b[0].d}]:(d[0].push(0),e[0].push(1),[d,e,function(b){var c=a.quat(d[0][3],e[0][3],b[5]),g=a.composeMatrix(b[0],b[1],b[2],c,b[4]),h=g.map(f).join(",");return h}])}function h(a){return a.replace(/[xy]/,"")}function i(a){return a.replace(/(x|y|z|3d)?$/,"3d")}function j(b,c){var d=a.makeMatrixDecomposition&&!0,e=!1;if(!b.length||!c.length){b.length||(e=!0,b=c,c=[]);for(var f=0;f<b.length;f++){var j=b[f].t,k=b[f].d,l="scale"==j.substr(0,5)?1:0;c.push({t:j,d:k.map(function(a){if("number"==typeof a)return l;var b={};for(var c in a)b[c]=l;return b})})}}var m=function(a,b){return"perspective"==a&&"perspective"==b||("matrix"==a||"matrix3d"==a)&&("matrix"==b||"matrix3d"==b)},o=[],p=[],q=[];if(b.length!=c.length){if(!d)return;var r=g(b,c);o=[r[0]],p=[r[1]],q=[["matrix",[r[2]]]]}else for(var f=0;f<b.length;f++){var j,s=b[f].t,t=c[f].t,u=b[f].d,v=c[f].d,w=n[s],x=n[t];if(m(s,t)){if(!d)return;var r=g([b[f]],[c[f]]);o.push(r[0]),p.push(r[1]),q.push(["matrix",[r[2]]])}else{if(s==t)j=s;else if(w[2]&&x[2]&&h(s)==h(t))j=h(s),u=w[2](u),v=x[2](v);else{if(!w[1]||!x[1]||i(s)!=i(t)){if(!d)return;var r=g(b,c);o=[r[0]],p=[r[1]],q=[["matrix",[r[2]]]];break}j=i(s),u=w[1](u),v=x[1](v)}for(var y=[],z=[],A=[],B=0;B<u.length;B++){var C="number"==typeof u[B]?a.mergeNumbers:a.mergeDimensions,r=C(u[B],v[B]);y[B]=r[0],z[B]=r[1],A.push(r[2])}o.push(y),p.push(z),q.push([j,A])}}if(e){var D=o;o=p,p=D}return[o,p,function(a){return a.map(function(a,b){var c=a.map(function(a,c){return q[b][1][c](a)}).join(",");return"matrix"==q[b][0]&&16==c.split(",").length&&(q[b][0]="matrix3d"),q[b][0]+"("+c+")"}).join(" ")}]}var k=null,l={px:0},m={deg:0},n={matrix:["NNNNNN",[k,k,0,0,k,k,0,0,0,0,1,0,k,k,0,1],d],matrix3d:["NNNNNNNNNNNNNNNN",d],rotate:["A"],rotatex:["A"],rotatey:["A"],rotatez:["A"],rotate3d:["NNNA"],perspective:["L"],scale:["Nn",c([k,k,1]),d],scalex:["N",c([k,1,1]),c([k,1])],scaley:["N",c([1,k,1]),c([1,k])],scalez:["N",c([1,1,k])],scale3d:["NNN",d],skew:["Aa",null,d],skewx:["A",null,c([k,m])],skewy:["A",null,c([m,k])],translate:["Tt",c([k,k,l]),d],translatex:["T",c([k,l,l]),c([k,l])],translatey:["T",c([l,k,l]),c([l,k])],translatez:["L",c([l,l,k])],translate3d:["TTL",d]};a.addPropertiesHandler(e,j,["transform"])}(d,f),function(a,b){function c(a,b){b.concat([a]).forEach(function(b){b in document.documentElement.style&&(d[a]=b)})}var d={};c("transform",["webkitTransform","msTransform"]),c("transformOrigin",["webkitTransformOrigin"]),c("perspective",["webkitPerspective"]),c("perspectiveOrigin",["webkitPerspectiveOrigin"]),a.propertyName=function(a){return d[a]||a}}(d,f)}(),!function(){if(void 0===document.createElement("div").animate([]).oncancel){var a;if(window.performance&&performance.now)var a=function(){return performance.now()};else var a=function(){return Date.now()};var b=function(a,b,c){this.target=a,this.currentTime=b,this.timelineTime=c,this.type="cancel",this.bubbles=!1,this.cancelable=!1,this.currentTarget=a,this.defaultPrevented=!1,this.eventPhase=Event.AT_TARGET,this.timeStamp=Date.now()},c=window.Element.prototype.animate;window.Element.prototype.animate=function(d,e){var f=c.call(this,d,e);f._cancelHandlers=[],f.oncancel=null;var g=f.cancel;f.cancel=function(){g.call(this);var c=new b(this,null,a()),d=this._cancelHandlers.concat(this.oncancel?[this.oncancel]:[]);setTimeout(function(){d.forEach(function(a){a.call(c.target,c)})},0)};var h=f.addEventListener;f.addEventListener=function(a,b){"function"==typeof b&&"cancel"==a?this._cancelHandlers.push(b):h.call(this,a,b)};var i=f.removeEventListener;return f.removeEventListener=function(a,b){if("cancel"==a){var c=this._cancelHandlers.indexOf(b);c>=0&&this._cancelHandlers.splice(c,1)}else i.call(this,a,b)},f}}}(),function(a){var b=document.documentElement,c=null,d=!1;try{var e=getComputedStyle(b).getPropertyValue("opacity"),f="0"==e?"1":"0";c=b.animate({opacity:[f,f]},{duration:1}),c.currentTime=0,d=getComputedStyle(b).getPropertyValue("opacity")==f}catch(g){}finally{c&&c.cancel()}if(!d){var h=window.Element.prototype.animate;window.Element.prototype.animate=function(b,c){return window.Symbol&&Symbol.iterator&&Array.prototype.from&&b[Symbol.iterator]&&(b=Array.from(b)),Array.isArray(b)||null===b||(b=a.convertToArrayForm(b)),h.call(this,b,c)}}}(c),!function(a,b,c){function d(a){var b=window.document.timeline;b.currentTime=a,b._discardAnimations(),0==b._animations.length?f=!1:requestAnimationFrame(d);
}var e=window.requestAnimationFrame;window.requestAnimationFrame=function(a){return e(function(b){window.document.timeline._updateAnimationsPromises(),a(b),window.document.timeline._updateAnimationsPromises()})},b.AnimationTimeline=function(){this._animations=[],this.currentTime=void 0},b.AnimationTimeline.prototype={getAnimations:function(){return this._discardAnimations(),this._animations.slice()},_updateAnimationsPromises:function(){b.animationsWithPromises=b.animationsWithPromises.filter(function(a){return a._updatePromises()})},_discardAnimations:function(){this._updateAnimationsPromises(),this._animations=this._animations.filter(function(a){return"finished"!=a.playState&&"idle"!=a.playState})},_play:function(a){var c=new b.Animation(a,this);return this._animations.push(c),b.restartWebAnimationsNextTick(),c._updatePromises(),c._animation.play(),c._updatePromises(),c},play:function(a){return a&&a.remove(),this._play(a)}};var f=!1;b.restartWebAnimationsNextTick=function(){f||(f=!0,requestAnimationFrame(d))};var g=new b.AnimationTimeline;b.timeline=g;try{Object.defineProperty(window.document,"timeline",{configurable:!0,get:function(){return g}})}catch(h){}try{window.document.timeline=g}catch(h){}}(c,e,f),function(a,b,c){b.animationsWithPromises=[],b.Animation=function(b,c){if(this.id="",b&&b._id&&(this.id=b._id),this.effect=b,b&&(b._animation=this),!c)throw new Error("Animation with null timeline is not supported");this._timeline=c,this._sequenceNumber=a.sequenceNumber++,this._holdTime=0,this._paused=!1,this._isGroup=!1,this._animation=null,this._childAnimations=[],this._callback=null,this._oldPlayState="idle",this._rebuildUnderlyingAnimation(),this._animation.cancel(),this._updatePromises()},b.Animation.prototype={_updatePromises:function(){var a=this._oldPlayState,b=this.playState;return this._readyPromise&&b!==a&&("idle"==b?(this._rejectReadyPromise(),this._readyPromise=void 0):"pending"==a?this._resolveReadyPromise():"pending"==b&&(this._readyPromise=void 0)),this._finishedPromise&&b!==a&&("idle"==b?(this._rejectFinishedPromise(),this._finishedPromise=void 0):"finished"==b?this._resolveFinishedPromise():"finished"==a&&(this._finishedPromise=void 0)),this._oldPlayState=this.playState,this._readyPromise||this._finishedPromise},_rebuildUnderlyingAnimation:function(){this._updatePromises();var a,c,d,e,f=!!this._animation;f&&(a=this.playbackRate,c=this._paused,d=this.startTime,e=this.currentTime,this._animation.cancel(),this._animation._wrapper=null,this._animation=null),(!this.effect||this.effect instanceof window.KeyframeEffect)&&(this._animation=b.newUnderlyingAnimationForKeyframeEffect(this.effect),b.bindAnimationForKeyframeEffect(this)),(this.effect instanceof window.SequenceEffect||this.effect instanceof window.GroupEffect)&&(this._animation=b.newUnderlyingAnimationForGroup(this.effect),b.bindAnimationForGroup(this)),this.effect&&this.effect._onsample&&b.bindAnimationForCustomEffect(this),f&&(1!=a&&(this.playbackRate=a),null!==d?this.startTime=d:null!==e?this.currentTime=e:null!==this._holdTime&&(this.currentTime=this._holdTime),c&&this.pause()),this._updatePromises()},_updateChildren:function(){if(this.effect&&"idle"!=this.playState){var a=this.effect._timing.delay;this._childAnimations.forEach(function(c){this._arrangeChildren(c,a),this.effect instanceof window.SequenceEffect&&(a+=b.groupChildDuration(c.effect))}.bind(this))}},_setExternalAnimation:function(a){if(this.effect&&this._isGroup)for(var b=0;b<this.effect.children.length;b++)this.effect.children[b]._animation=a,this._childAnimations[b]._setExternalAnimation(a)},_constructChildAnimations:function(){if(this.effect&&this._isGroup){var a=this.effect._timing.delay;this._removeChildAnimations(),this.effect.children.forEach(function(c){var d=window.document.timeline._play(c);this._childAnimations.push(d),d.playbackRate=this.playbackRate,this._paused&&d.pause(),c._animation=this.effect._animation,this._arrangeChildren(d,a),this.effect instanceof window.SequenceEffect&&(a+=b.groupChildDuration(c))}.bind(this))}},_arrangeChildren:function(a,b){null===this.startTime?a.currentTime=this.currentTime-b/this.playbackRate:a.startTime!==this.startTime+b/this.playbackRate&&(a.startTime=this.startTime+b/this.playbackRate)},get timeline(){return this._timeline},get playState(){return this._animation?this._animation.playState:"idle"},get finished(){return window.Promise?(this._finishedPromise||(-1==b.animationsWithPromises.indexOf(this)&&b.animationsWithPromises.push(this),this._finishedPromise=new Promise(function(a,b){this._resolveFinishedPromise=function(){a(this)},this._rejectFinishedPromise=function(){b({type:DOMException.ABORT_ERR,name:"AbortError"})}}.bind(this)),"finished"==this.playState&&this._resolveFinishedPromise()),this._finishedPromise):(console.warn("Animation Promises require JavaScript Promise constructor"),null)},get ready(){return window.Promise?(this._readyPromise||(-1==b.animationsWithPromises.indexOf(this)&&b.animationsWithPromises.push(this),this._readyPromise=new Promise(function(a,b){this._resolveReadyPromise=function(){a(this)},this._rejectReadyPromise=function(){b({type:DOMException.ABORT_ERR,name:"AbortError"})}}.bind(this)),"pending"!==this.playState&&this._resolveReadyPromise()),this._readyPromise):(console.warn("Animation Promises require JavaScript Promise constructor"),null)},get onfinish(){return this._animation.onfinish},set onfinish(a){"function"==typeof a?this._animation.onfinish=function(b){b.target=this,a.call(this,b)}.bind(this):this._animation.onfinish=a},get oncancel(){return this._animation.oncancel},set oncancel(a){"function"==typeof a?this._animation.oncancel=function(b){b.target=this,a.call(this,b)}.bind(this):this._animation.oncancel=a},get currentTime(){this._updatePromises();var a=this._animation.currentTime;return this._updatePromises(),a},set currentTime(a){this._updatePromises(),this._animation.currentTime=isFinite(a)?a:Math.sign(a)*Number.MAX_VALUE,this._register(),this._forEachChild(function(b,c){b.currentTime=a-c}),this._updatePromises()},get startTime(){return this._animation.startTime},set startTime(a){this._updatePromises(),this._animation.startTime=isFinite(a)?a:Math.sign(a)*Number.MAX_VALUE,this._register(),this._forEachChild(function(b,c){b.startTime=a+c}),this._updatePromises()},get playbackRate(){return this._animation.playbackRate},set playbackRate(a){this._updatePromises();var b=this.currentTime;this._animation.playbackRate=a,this._forEachChild(function(b){b.playbackRate=a}),"paused"!=this.playState&&"idle"!=this.playState&&this.play(),null!==b&&(this.currentTime=b),this._updatePromises()},play:function(){this._updatePromises(),this._paused=!1,this._animation.play(),-1==this._timeline._animations.indexOf(this)&&this._timeline._animations.push(this),this._register(),b.awaitStartTime(this),this._forEachChild(function(a){var b=a.currentTime;a.play(),a.currentTime=b}),this._updatePromises()},pause:function(){this._updatePromises(),this.currentTime&&(this._holdTime=this.currentTime),this._animation.pause(),this._register(),this._forEachChild(function(a){a.pause()}),this._paused=!0,this._updatePromises()},finish:function(){this._updatePromises(),this._animation.finish(),this._register(),this._updatePromises()},cancel:function(){this._updatePromises(),this._animation.cancel(),this._register(),this._removeChildAnimations(),this._updatePromises()},reverse:function(){this._updatePromises();var a=this.currentTime;this._animation.reverse(),this._forEachChild(function(a){a.reverse()}),null!==a&&(this.currentTime=a),this._updatePromises()},addEventListener:function(a,b){var c=b;"function"==typeof b&&(c=function(a){a.target=this,b.call(this,a)}.bind(this),b._wrapper=c),this._animation.addEventListener(a,c)},removeEventListener:function(a,b){this._animation.removeEventListener(a,b&&b._wrapper||b)},_removeChildAnimations:function(){for(;this._childAnimations.length;)this._childAnimations.pop().cancel()},_forEachChild:function(b){var c=0;if(this.effect.children&&this._childAnimations.length<this.effect.children.length&&this._constructChildAnimations(),this._childAnimations.forEach(function(a){b.call(this,a,c),this.effect instanceof window.SequenceEffect&&(c+=a.effect.activeDuration)}.bind(this)),"pending"!=this.playState){var d=this.effect._timing,e=this.currentTime;null!==e&&(e=a.calculateTimeFraction(a.calculateActiveDuration(d),e,d)),(null==e||isNaN(e))&&this._removeChildAnimations()}}},window.Animation=b.Animation}(c,e,f),function(a,b,c){function d(b){this._frames=a.normalizeKeyframes(b)}function e(){for(var a=!1;i.length;){var b=i.shift();b._updateChildren(),a=!0}return a}var f=function(a){if(a._animation=void 0,a instanceof window.SequenceEffect||a instanceof window.GroupEffect)for(var b=0;b<a.children.length;b++)f(a.children[b])};b.removeMulti=function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c];d._parent?(-1==b.indexOf(d._parent)&&b.push(d._parent),d._parent.children.splice(d._parent.children.indexOf(d),1),d._parent=null,f(d)):d._animation&&d._animation.effect==d&&(d._animation.cancel(),d._animation.effect=new KeyframeEffect(null,[]),d._animation._callback&&(d._animation._callback._animation=null),d._animation._rebuildUnderlyingAnimation(),f(d))}for(c=0;c<b.length;c++)b[c]._rebuild()},b.KeyframeEffect=function(b,c,e,f){return this.target=b,this._parent=null,e=a.numericTimingToObject(e),this._timingInput=a.cloneTimingInput(e),this._timing=a.normalizeTimingInput(e),this.timing=a.makeTiming(e,!1,this),this.timing._effect=this,"function"==typeof c?(a.deprecated("Custom KeyframeEffect","2015-06-22","Use KeyframeEffect.onsample instead."),this._normalizedKeyframes=c):this._normalizedKeyframes=new d(c),this._keyframes=c,this.activeDuration=a.calculateActiveDuration(this._timing),this._id=f,this},b.KeyframeEffect.prototype={getFrames:function(){return"function"==typeof this._normalizedKeyframes?this._normalizedKeyframes:this._normalizedKeyframes._frames},set onsample(a){if("function"==typeof this.getFrames())throw new Error("Setting onsample on custom effect KeyframeEffect is not supported.");this._onsample=a,this._animation&&this._animation._rebuildUnderlyingAnimation()},get parent(){return this._parent},clone:function(){if("function"==typeof this.getFrames())throw new Error("Cloning custom effects is not supported.");var b=new KeyframeEffect(this.target,[],a.cloneTimingInput(this._timingInput),this._id);return b._normalizedKeyframes=this._normalizedKeyframes,b._keyframes=this._keyframes,b},remove:function(){b.removeMulti([this])}};var g=Element.prototype.animate;Element.prototype.animate=function(a,c){var d="";return c&&c.id&&(d=c.id),b.timeline._play(new b.KeyframeEffect(this,a,c,d))};var h=document.createElementNS("http://www.w3.org/1999/xhtml","div");b.newUnderlyingAnimationForKeyframeEffect=function(a){if(a){var b=a.target||h,c=a._keyframes;"function"==typeof c&&(c=[]);var d=a._timingInput;d.id=a._id}else var b=h,c=[],d=0;return g.apply(b,[c,d])},b.bindAnimationForKeyframeEffect=function(a){a.effect&&"function"==typeof a.effect._normalizedKeyframes&&b.bindAnimationForCustomEffect(a)};var i=[];b.awaitStartTime=function(a){null===a.startTime&&a._isGroup&&(0==i.length&&requestAnimationFrame(e),i.push(a))};var j=window.getComputedStyle;Object.defineProperty(window,"getComputedStyle",{configurable:!0,enumerable:!0,value:function(){window.document.timeline._updateAnimationsPromises();var a=j.apply(this,arguments);return e()&&(a=j.apply(this,arguments)),window.document.timeline._updateAnimationsPromises(),a}}),window.KeyframeEffect=b.KeyframeEffect,window.Element.prototype.getAnimations=function(){return document.timeline.getAnimations().filter(function(a){return null!==a.effect&&a.effect.target==this}.bind(this))}}(c,e,f),function(a,b,c){function d(a){a._registered||(a._registered=!0,g.push(a),h||(h=!0,requestAnimationFrame(e)))}function e(a){var b=g;g=[],b.sort(function(a,b){return a._sequenceNumber-b._sequenceNumber}),b=b.filter(function(a){a();var b=a._animation?a._animation.playState:"idle";return"running"!=b&&"pending"!=b&&(a._registered=!1),a._registered}),g.push.apply(g,b),g.length?(h=!0,requestAnimationFrame(e)):h=!1}var f=(document.createElementNS("http://www.w3.org/1999/xhtml","div"),0);b.bindAnimationForCustomEffect=function(b){var c,e=b.effect.target,g="function"==typeof b.effect.getFrames();c=g?b.effect.getFrames():b.effect._onsample;var h=b.effect.timing,i=null;h=a.normalizeTimingInput(h);var j=function(){var d=j._animation?j._animation.currentTime:null;null!==d&&(d=a.calculateTimeFraction(a.calculateActiveDuration(h),d,h),isNaN(d)&&(d=null)),d!==i&&(g?c(d,e,b.effect):c(d,b.effect,b.effect._animation)),i=d};j._animation=b,j._registered=!1,j._sequenceNumber=f++,b._callback=j,d(j)};var g=[],h=!1;b.Animation.prototype._register=function(){this._callback&&d(this._callback)}}(c,e,f),function(a,b,c){function d(a){return a._timing.delay+a.activeDuration+a._timing.endDelay}function e(b,c,d){this._id=d,this._parent=null,this.children=b||[],this._reparent(this.children),c=a.numericTimingToObject(c),this._timingInput=a.cloneTimingInput(c),this._timing=a.normalizeTimingInput(c,!0),this.timing=a.makeTiming(c,!0,this),this.timing._effect=this,"auto"===this._timing.duration&&(this._timing.duration=this.activeDuration)}window.SequenceEffect=function(){e.apply(this,arguments)},window.GroupEffect=function(){e.apply(this,arguments)},e.prototype={_isAncestor:function(a){for(var b=this;null!==b;){if(b==a)return!0;b=b._parent}return!1},_rebuild:function(){for(var a=this;a;)"auto"===a.timing.duration&&(a._timing.duration=a.activeDuration),a=a._parent;this._animation&&this._animation._rebuildUnderlyingAnimation()},_reparent:function(a){b.removeMulti(a);for(var c=0;c<a.length;c++)a[c]._parent=this},_putChild:function(a,b){for(var c=b?"Cannot append an ancestor or self":"Cannot prepend an ancestor or self",d=0;d<a.length;d++)if(this._isAncestor(a[d]))throw{type:DOMException.HIERARCHY_REQUEST_ERR,name:"HierarchyRequestError",message:c};for(var d=0;d<a.length;d++)b?this.children.push(a[d]):this.children.unshift(a[d]);this._reparent(a),this._rebuild()},append:function(){this._putChild(arguments,!0)},prepend:function(){this._putChild(arguments,!1)},get parent(){return this._parent},get firstChild(){return this.children.length?this.children[0]:null},get lastChild(){return this.children.length?this.children[this.children.length-1]:null},clone:function(){for(var b=a.cloneTimingInput(this._timingInput),c=[],d=0;d<this.children.length;d++)c.push(this.children[d].clone());return this instanceof GroupEffect?new GroupEffect(c,b):new SequenceEffect(c,b)},remove:function(){b.removeMulti([this])}},window.SequenceEffect.prototype=Object.create(e.prototype),Object.defineProperty(window.SequenceEffect.prototype,"activeDuration",{get:function(){var a=0;return this.children.forEach(function(b){a+=d(b)}),Math.max(a,0)}}),window.GroupEffect.prototype=Object.create(e.prototype),Object.defineProperty(window.GroupEffect.prototype,"activeDuration",{get:function(){var a=0;return this.children.forEach(function(b){a=Math.max(a,d(b))}),a}}),b.newUnderlyingAnimationForGroup=function(c){var d,e=null,f=function(b){var c=d._wrapper;return c&&"pending"!=c.playState&&c.effect?null==b?void c._removeChildAnimations():0==b&&c.playbackRate<0&&(e||(e=a.normalizeTimingInput(c.effect.timing)),b=a.calculateTimeFraction(a.calculateActiveDuration(e),-1,e),isNaN(b)||null==b)?(c._forEachChild(function(a){a.currentTime=-1}),void c._removeChildAnimations()):void 0:void 0},g=new KeyframeEffect(null,[],c._timing,c._id);return g.onsample=f,d=b.timeline._play(g)},b.bindAnimationForGroup=function(a){a._animation._wrapper=a,a._isGroup=!0,b.awaitStartTime(a),a._constructChildAnimations(),a._setExternalAnimation(a)},b.groupChildDuration=d}(c,e,f),b["true"]=a}({},function(){return this}());
})();
</script><script>/*

Copyright 2010-2017 Mike Bostock
All rights reserved.

Redistribution and use in source and binary forms, with or without modification,
are permitted provided that the following conditions are met:

 Redistributions of source code must retain the above copyright notice, this
  list of conditions and the following disclaimer.

 Redistributions in binary form must reproduce the above copyright notice,
  this list of conditions and the following disclaimer in the documentation
  and/or other materials provided with the distribution.

 Neither the name of the author nor the names of contributors may be used to
  endorse or promote products derived from this software without specific prior
  written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/
var d3=d3||{};
(function(){function wc(){d3.event.preventDefault();d3.event.stopImmediatePropagation()}function Bh(a){return function(){return a}}function Ch(a){return function(){return a}}function Dh(a){var b=a.map(Eh);return Rb(a).sort(function(a,e){return b[a]-b[e]})}function Rb(a){a=a.length;for(var b=Array(a);0<=--a;)b[a]=a;return b}function Sb(a,b){if(1<(l=a.length))for(var c=1,e,f,h=a[b[0]],l,p=h.length;c<l;++c)for(f=h,h=a[b[c]],e=0;e<p;++e)h[e][1]+=h[e][0]=isNaN(f[e][1])?f[e][0]:f[e][1]}function fb(){}function qd(a,
b){return[(b=+b)*Math.cos(a-=Math.PI/2),b*Math.sin(a)]}function rm(a){return a}function sm(a,b){return b<a?-1:b>a?1:b>=a?0:NaN}function Fh(){function a(a){var b,k,z=a.length,D,F=!1,I,J=Array(z),u=Array(z);null==p&&(x=v(I=gb()));for(b=0;b<=z;++b){if(!(b<z&&l(D=a[b],b,a))===F)if(F=!F){var y=b;x.areaStart();x.lineStart()}else{x.lineEnd();x.lineStart();for(k=b-1;k>=y;--k)x.point(J[k],u[k]);x.lineEnd();x.areaEnd()}F&&(J[b]=+c(D,b,a),u[b]=+f(D,b,a),x.point(e?+e(D,b,a):J[b],h?+h(D,b,a):u[b]))}if(I)return x=
null,I+""||null}function b(){return We().defined(l).curve(v).context(p)}var c=Xe,e=null,f=X(0),h=Ye,l=X(!0),p=null,v=rd,x=null;a.x=function(b){return arguments.length?(c="function"===typeof b?b:X(+b),e=null,a):c};a.x0=function(b){return arguments.length?(c="function"===typeof b?b:X(+b),a):c};a.x1=function(b){return arguments.length?(e=null==b?null:"function"===typeof b?b:X(+b),a):e};a.y=function(b){return arguments.length?(f="function"===typeof b?b:X(+b),h=null,a):f};a.y0=function(b){return arguments.length?
(f="function"===typeof b?b:X(+b),a):f};a.y1=function(b){return arguments.length?(h=null==b?null:"function"===typeof b?b:X(+b),a):h};a.lineX0=a.lineY0=function(){return b().x(c).y(f)};a.lineY1=function(){return b().x(c).y(h)};a.lineX1=function(){return b().x(e).y(f)};a.defined=function(b){return arguments.length?(l="function"===typeof b?b:X(!!b),a):l};a.curve=function(b){return arguments.length?(v=b,null!=p&&(x=v(p)),a):v};a.context=function(b){return arguments.length?(null==b?p=x=null:x=v(p=b),a):
p};return a}function We(){function a(a){var p,x=a.length,k,q=!1,t;null==f&&(l=h(t=gb()));for(p=0;p<=x;++p)!(p<x&&e(k=a[p],p,a))===q&&((q=!q)?l.lineStart():l.lineEnd()),q&&l.point(+b(k,p,a),+c(k,p,a));if(t)return l=null,t+""||null}var b=Xe,c=Ye,e=X(!0),f=null,h=rd,l=null;a.x=function(c){return arguments.length?(b="function"===typeof c?c:X(+c),a):b};a.y=function(b){return arguments.length?(c="function"===typeof b?b:X(+b),a):c};a.defined=function(b){return arguments.length?(e="function"===typeof b?b:
X(!!b),a):e};a.curve=function(b){return arguments.length?(h=b,null!=f&&(l=h(f)),a):h};a.context=function(b){return arguments.length?(null==b?f=l=null:l=h(f=b),a):f};return a}function rd(a){return new Gh(a)}function X(a){return function(){return a}}function hb(a){return a.match(/.{6}/g).map(function(a){return"#"+a})}function Hh(a,b){a=a.slice();var c=0,e=a.length-1,f=a[c],h=a[e];if(h<f){var l=c;c=e;e=l;l=f;f=h;h=l}a[c]=b.floor(f);a[e]=b.ceil(h);return a}function Ih(a){return+a}function Ze(a){return function(){return a}}
function Jh(a,b){return function(c,e,f){3>arguments.length&&(f=e,e=null);var h=$e(c).mimeType(a);h.row=function(a){return arguments.length?h.response(tm(b,e=a)):e};h.row(e);return f?h.get(f):h}}function sd(a,b){return function(c,e){c=$e(c).mimeType(a).response(b);if(null!=e){if("function"!==typeof e)throw Error("invalid callback: "+e);return c.get(e)}return c}}function $e(a,b){function c(a){var b=l.status,c;if(c=!b)c=(c=l.responseType)&&"text"!==c?l.response:l.responseText;if(c||200<=b&&300>b||304===
b){if(x)try{var f=x.call(t,l)}catch(J){e.call("error",t,J);return}else f=l;e.call("load",t,f)}else e.call("error",t,a)}var e=ib("beforesend","progress","load","error"),f,h=Sa(),l=new XMLHttpRequest,p=null,v=null,x,k,q=0;"undefined"===typeof XDomainRequest||"withCredentials"in l||!/^(http(s)?:)?\/\//.test(a)||(l=new XDomainRequest);"onload"in l?l.onload=l.onerror=l.ontimeout=c:l.onreadystatechange=function(a){3<l.readyState&&c(a)};l.onprogress=function(a){e.call("progress",t,a)};var t={header:function(a,
b){a=(a+"").toLowerCase();if(2>arguments.length)return h.get(a);null==b?h.remove(a):h.set(a,b+"");return t},mimeType:function(a){if(!arguments.length)return f;f=null==a?null:a+"";return t},responseType:function(a){if(!arguments.length)return k;k=a;return t},timeout:function(a){if(!arguments.length)return q;q=+a;return t},user:function(a){return 1>arguments.length?p:(p=null==a?null:a+"",t)},password:function(a){return 1>arguments.length?v:(v=null==a?null:a+"",t)},response:function(a){x=a;return t},
get:function(a,b){return t.send("GET",a,b)},post:function(a,b){return t.send("POST",a,b)},send:function(b,c,x){l.open(b,a,!0,p,v);null==f||h.has("accept")||h.set("accept",f+",*/*");l.setRequestHeader&&h.each(function(a,b){l.setRequestHeader(b,a)});null!=f&&l.overrideMimeType&&l.overrideMimeType(f);null!=k&&(l.responseType=k);0<q&&(l.timeout=q);null==x&&"function"===typeof c&&(x=c,c=null);null!=x&&1===x.length&&(x=um(x));if(null!=x)t.on("error",x).on("load",function(a){x(null,a)});e.call("beforesend",
t,l);l.send(null==c?null:c);return t},abort:function(){l.abort();return t},on:function(){var a=e.on.apply(e,arguments);return a===e?t:a}};if(null!=b){if("function"!==typeof b)throw Error("invalid callback: "+b);return t.get(b)}return t}function Tb(){return Math.random()}function vm(a,b,c){return(b[0]-a[0])*(c[1]-a[1])-(b[1]-a[1])*(c[0]-a[0])}function td(a,b,c,e,f){var h=a.children,l=-1,p=h.length;for(f=a.value&&(f-c)/a.value;++l<p;)a=h[l],a.x0=b,a.x1=e,a.y0=c,a.y1=c+=a.value*f}function xc(a,b,c,e,
f){var h=a.children,l=-1,p=h.length;for(e=a.value&&(e-b)/a.value;++l<p;)a=h[l],a.y0=c,a.y1=f,a.x0=b,a.x1=b+=a.value*e}function Kh(a){a.x0=Math.round(a.x0);a.y0=Math.round(a.y0);a.x1=Math.round(a.x1);a.y1=Math.round(a.y1)}function Ub(a){return function(){return a}}function Lh(a){for(var b=(a=a.slice()).length,c=null,e=c;b;){var f=new wm(a[b-1]),e=e?e.next=f:c=f;a[void 0]=a[--b]}return Mh({head:c,tail:e},[])}function Nh(){return ud().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,
0]).center([-.6,38.7])}function ud(){return af(Oh).scale(155.424).center([0,33.6442])}function Ph(a,b){return+b?xm(a,b):ym(a)}function zm(a,b){function c(a,b){return V(a)*V(b)>h}function e(a,b,c){var e=vb(a),f=vb(b),k=[1,0,0],f=Vb(e,f),l=vd(f,f),e=f[0],p=l-e*e;if(!p)return!c&&a;l=h*l/p;p=-h*e/p;e=Vb(k,f);k=wd(k,l);f=wd(f,p);bf(k,f);f=vd(k,e);l=vd(e,e);p=f*f-l*(vd(k,k)-1);if(!(0>p)){var v=ma(p),p=wd(e,(-f-v)/l);bf(p,k);p=xd(p);if(!c)return p;c=a[0];var x=b[0];a=a[1];b=b[1];if(x<c){var u=c;c=x;x=u}var y=
x-c,G=1E-6>Y(y-Z);!G&&b<a&&(u=a,a=b,b=u);if(G||1E-6>y?G?0<a+b^p[1]<(1E-6>Y(p[0]-c)?a:b):a<=p[1]&&p[1]<=b:y>Z^(c<=p[0]&&p[0]<=x))return b=wd(e,(-f+v)/l),bf(b,k),[p,xd(b)]}}function f(b,c){var e=l?a:Z-a,f=0;b<-e?f|=1:b>e&&(f|=2);c<-e?f|=4:c>e&&(f|=8);return f}var h=V(a),l=0<h,p=1E-6<Y(h);return Qh(c,function(a){var b,h,q,t,v;return{lineStart:function(){t=q=!1;v=1},point:function(k,z){var x=[k,z],D=c(k,z);z=l?D?0:f(k,z):D?f(k+(0>k?Z:-Z),z):0;!b&&(t=q=D)&&a.lineStart();D!==q&&(k=e(b,x),!k||yd(b,k)||yd(x,
k))&&(x[0]+=1E-6,x[1]+=1E-6,D=c(x[0],x[1]));if(D!==q)v=0,D?(a.lineStart(),k=e(x,b),a.point(k[0],k[1])):(k=e(b,x),a.point(k[0],k[1]),a.lineEnd()),b=k;else if(p&&b&&l^D){var u;z&h||!(u=e(x,b,!0))||(v=0,l?(a.lineStart(),a.point(u[0][0],u[0][1]),a.point(u[1][0],u[1][1]),a.lineEnd()):(a.point(u[1][0],u[1][1]),a.lineEnd(),a.lineStart(),a.point(u[0][0],u[0][1])))}!D||b&&yd(b,x)||a.point(x[0],x[1]);b=x;q=D;h=z},lineEnd:function(){q&&a.lineEnd();b=null},clean:function(){return v|(t&&q)<<1}}},function(c,e,
f,h){Rh(h,a,b,f,c,e)},l?[0,-a]:[-Z,a-Z])}function Qh(a,b,c,e){return function(f,h){function l(b,c){var e=f(b,c);a(b=e[0],c=e[1])&&h.point(b,c)}function p(a,b){a=f(a,b);z.point(a[0],a[1])}function v(){H.point=p;z.lineStart()}function x(){H.point=l;z.lineEnd()}function k(a,b){G.push([a,b]);a=f(a,b);I.point(a[0],a[1])}function q(){I.lineStart();G=[]}function t(){k(G[0][0],G[0][1]);I.lineEnd();var a=I.clean(),b=F.result(),c=b.length,e;G.pop();u.push(G);G=null;if(c)if(a&1){if(c=b[0],0<(b=c.length-1)){J||
(h.polygonStart(),J=!0);h.lineStart();for(a=0;a<b;++a)h.point((e=c[a])[0],e[1]);h.lineEnd()}}else 1<c&&a&2&&b.push(b.pop().concat(b.shift())),y.push(b.filter(Am))}var z=b(h),D=f.invert(e[0],e[1]),F=Sh(),I=b(F),J=!1,u,y,G,H={point:l,lineStart:v,lineEnd:x,polygonStart:function(){H.point=k;H.lineStart=q;H.lineEnd=t;y=[];u=[]},polygonEnd:function(){H.point=l;H.lineStart=v;H.lineEnd=x;y=cf(y);var a=Th(u,D);y.length?(J||(h.polygonStart(),J=!0),Uh(y,Bm,a,c,h)):a&&(J||(h.polygonStart(),J=!0),h.lineStart(),
c(null,null,1,h),h.lineEnd());J&&(h.polygonEnd(),J=!1);y=u=null},sphere:function(){h.polygonStart();h.lineStart();c(null,null,1,h);h.lineEnd();h.polygonEnd()}};return H}}function wb(a){return a}function Wb(a,b){df[0]=a;df[1]=b;return Vh(Cm)}function Vh(a){ef.reset();Na(a,Xb);return+ef}function Th(a,b){var c=b[0];b=b[1];var e=[O(c),-V(c),0],f=0,h=0;ff.reset();for(var l=0,p=a.length;l<p;++l)if(x=(v=a[l]).length){var v,x,k=v[x-1],q=k[0];var t=k[1]/2+zd;for(var z=O(t),D=V(t),F=0;F<x;++F,q=J,z=t,D=u,k=
I){var I=v[F];var J=I[0];var u=I[1]/2+zd;t=O(u);u=V(u);var y=J-q,G=0<=y?1:-1,H=G*y,N=H>Z,z=z*t;ff.add(ta(z*G*O(H),D*u+z*V(H)));f+=N?y+G*Ba:y;N^q>=c^J>=c&&(k=Vb(vb(k),vb(I)),Ad(k),q=Vb(e,k),Ad(q),q=(N^0<=y?-1:1)*Ca(q[2]),b>q||b===q&&(k[0]||k[1]))&&(h+=N^0<=y?1:-1)}}return(-1E-6>f||1E-6>f&&-1E-6>ff)^h&1}function Uh(a,b,c,e,f){var h=[],l=[];a.forEach(function(a){if(!(0>=(b=a.length-1))){var b,c=a[0],e=a[b];if(yd(c,e)){f.lineStart();for(p=0;p<b;++p)f.point((c=a[p])[0],c[1]);f.lineEnd()}else h.push(b=
new Bd(c,a,null,!0)),l.push(b.o=new Bd(c,null,b,!1)),h.push(b=new Bd(e,a,null,!1)),l.push(b.o=new Bd(e,null,b,!0))}});if(h.length){l.sort(b);Wh(h);Wh(l);var p=0;for(a=l.length;p<a;++p)l[p].e=c=!c;c=h[0];for(var v;;){for(var x=c,k=!0;x.v;)if((x=x.n)===c)return;b=x.z;f.lineStart();do{x.v=x.o.v=!0;if(x.e){if(k)for(p=0,a=b.length;p<a;++p)f.point((v=b[p])[0],v[1]);else e(x.x,x.n.x,1,f);x=x.n}else{if(k)for(b=x.p.z,p=b.length-1;0<=p;--p)f.point((v=b[p])[0],v[1]);else e(x.x,x.p.x,-1,f);x=x.p}x=x.o;b=x.z;
k=!k}while(!x.v);f.lineEnd()}}}function yd(a,b){return 1E-6>Y(a[0]-b[0])&&1E-6>Y(a[1]-b[1])}function Dm(a,b,c,e,f,h){var l=a[0],p=a[1],v=0,x=1,k=b[0]-l,q=b[1]-p;c-=l;if(k||!(0<c)){c/=k;if(0>k){if(c<v)return;c<x&&(x=c)}else if(0<k){if(c>x)return;c>v&&(v=c)}c=f-l;if(k||!(0>c)){c/=k;if(0>k){if(c>x)return;c>v&&(v=c)}else if(0<k){if(c<v)return;c<x&&(x=c)}c=e-p;if(q||!(0<c)){c/=q;if(0>q){if(c<v)return;c<x&&(x=c)}else if(0<q){if(c>x)return;c>v&&(v=c)}c=h-p;if(q||!(0>c)){c/=q;if(0>q){if(c>x)return;c>v&&(v=
c)}else if(0<q){if(c<v)return;c<x&&(x=c)}0<v&&(a[0]=l+v*k,a[1]=p+v*q);1>x&&(b[0]=l+x*k,b[1]=p+x*q);return!0}}}}}function Sh(){var a=[],b;return{point:function(a,e){b.push([a,e])},lineStart:function(){a.push(b=[])},lineEnd:ea,rejoin:function(){1<a.length&&a.push(a.pop().concat(a.shift()))},result:function(){var c=a;a=[];b=null;return c}}}function Xh(a){function b(b){b=a(b[0]*T,b[1]*T);return b[0]*=ba,b[1]*=ba,b}a=gf(a[0]*T,a[1]*T,2<a.length?a[2]*T:0);b.invert=function(b){b=a.invert(b[0]*T,b[1]*T);
return b[0]*=ba,b[1]*=ba,b};return b}function Yh(a,b){function c(c,f){return c=a(c,f),b(c[0],c[1])}a.invert&&b.invert&&(c.invert=function(c,f){return c=b.invert(c,f),c&&a.invert(c[0],c[1])});return c}function Yb(a){return function(){return a}}function Na(a,b){if(a&&Zh.hasOwnProperty(a.type))Zh[a.type](a,b);else Cd(a,b)}function $h(a,b){a=Math.abs(a);b=Math.abs(b)-a;return Math.max(0,Zb(b)-Zb(a))+1}function ai(a,b){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Zb(b)/3)))-Zb(Math.abs(a)))}function bi(a){return Math.max(0,
-Zb(Math.abs(a)))}function ci(a){function b(a){function b(a){var b=u,e=y,d,l;if("c"===J)e=G(a)+e,a="";else{a=+a;var t=0>a;a=G(Math.abs(a),I);t&&0===+a&&(t=!1);b=(t?"("===q?q:"-":"-"===q||"("===q?"":q)+b;e=e+("s"===J?di[8+ei/3]:"")+(t&&"("===q?")":"");if(H)for(t=-1,d=a.length;++t<d;)if(l=a.charCodeAt(t),48>l||57<l){e=(46===l?f+a.slice(t+1):a.slice(t))+e;a=a.slice(0,t);break}}F&&!z&&(a=c(a,Infinity));l=b.length+a.length+e.length;t=l<D?Array(D-l+1).join(p):"";F&&z&&(a=c(t+a,t.length?D-e.length:Infinity),
t="");switch(k){case "<":a=b+a+e+t;break;case "=":a=b+t+a+e;break;case "^":a=t.slice(0,l=t.length>>1)+b+a+e+t.slice(l);break;default:a=t+b+a+e}return h(a)}a=yc(a);var p=a.fill,k=a.align,q=a.sign,t=a.symbol,z=a.zero,D=a.width,F=a.comma,I=a.precision,J=a.type,u="$"===t?e[0]:"#"===t&&/[boxX]/.test(J)?"0"+J.toLowerCase():"",y="$"===t?e[1]:/[%p]/.test(J)?l:"",G=fi[J],H=!J||/[defgprs%]/.test(J),I=null==I?J?6:12:/[gprs]/.test(J)?Math.max(1,Math.min(21,I)):Math.max(0,Math.min(20,I));b.toString=function(){return a+
""};return b}var c=a.grouping&&a.thousands?Em(a.grouping,a.thousands):gi,e=a.currency,f=a.decimal,h=a.numerals?Fm(a.numerals):gi,l=a.percent||"%";return{format:b,formatPrefix:function(a,c){var e=b((a=yc(a),a.type="f",a));a=3*Math.max(-8,Math.min(8,Math.floor(Zb(c)/3)));var f=Math.pow(10,-a),h=di[8+a/3];return function(a){return e(f*a)+h}}}}function gi(a){return a}function hi(a,b){b=Dd(a,b);if(!b)return a+"";a=b[0];b=b[1];return 0>b?"0."+Array(-b).join("0")+a:a.length>b+1?a.slice(0,b+1)+"."+a.slice(b+
1):a+Array(b-a.length+2).join("0")}function Fm(a){return function(b){return b.replace(/[0-9]/g,function(b){return a[+b]})}}function Em(a,b){return function(c,e){for(var f=c.length,h=[],l=0,p=a[0],v=0;0<f&&0<p;){v+p+1>e&&(p=Math.max(1,e-v));h.push(c.substring(f-=p,f+p));if((v+=p+1)>e)break;p=a[l=(l+1)%a.length]}return h.reverse().join(b)}}function Zb(a){return a=Dd(Math.abs(a)),a?a[1]:NaN}function Dd(a,b){if(0>(b=(a=b?a.toExponential(b-1):a.toExponential()).indexOf("e")))return null;var c=a.slice(0,
b);return[1<c.length?c[0]+c.slice(2):c,+a.slice(b+1)]}function ua(a,b,c,e,f){this.node=a;this.x0=b;this.y0=c;this.x1=e;this.y1=f}function jb(){return 1E-6*(Math.random()-.5)}function va(a){return function(){return a}}function hf(a){function b(a,b){function c(){if(z>=p)return f;if(I)return I=!1,e;var b=z;if(34===a.charCodeAt(b)){for(var c=b;c++<p;)if(34===a.charCodeAt(c)){if(34!==a.charCodeAt(c+1))break;++c}z=c+2;var k=a.charCodeAt(c+1);13===k?(I=!0,10===a.charCodeAt(c+2)&&++z):10===k&&(I=!0);return a.slice(b+
1,c).replace(/""/g,'"')}for(;z<p;){c=1;k=a.charCodeAt(z++);if(10===k)I=!0;else if(13===k)I=!0,10===a.charCodeAt(z)&&(++z,++c);else if(k!==h)continue;return a.slice(b,z-c)}return a.slice(b)}for(var e={},f={},l=[],p=a.length,z=0,D=0,F,I;(F=c())!==f;){for(var J=[];F!==e&&F!==f;)J.push(F),F=c();b&&null==(J=b(J,D++))||l.push(J)}return l}function c(b){return b.map(e).join(a)}function e(a){return null==a?"":f.test(a+="")?'"'+a.replace(/\"/g,'""')+'"':a}var f=new RegExp('["'+a+"\n\r]"),h=a.charCodeAt(0);
return{parse:function(a,c){var e,f;a=b(a,function(a,b){if(e)return e(a,b-1);f=a;e=c?Gm(a,c):ii(a)});a.columns=f;return a},parseRows:b,format:function(b,c){null==c&&(c=Hm(b));return[c.map(e).join(a)].concat(b.map(function(b){return c.map(function(a){return e(b[a])}).join(a)})).join("\n")},formatRows:function(a){return a.map(c).join("\n")}}}function jf(a){return function(){return a}}function Ed(){d3.event.preventDefault();d3.event.stopImmediatePropagation()}function Im(a,b,c){this.target=a;this.type=
b;this.selection=c}function ji(a){return function(){return a}}function ki(a,b){var c;return("number"===typeof b?Da:b instanceof kb?zc:(c=kb(b))?(b=c,zc):kf)(a,b)}function xb(a,b){var c=a.__transition,e,f=!0,h;if(c){b=null==b?null:b+"";for(h in c)if((e=c[h]).name!==b)f=!1;else{var l=2<e.state&&5>e.state;e.state=6;e.timer.stop();l&&e.on.call("interrupt",a,a.__data__,e.index,e.group);delete c[h]}f&&delete a.__transition}}function Fd(a,b,c,e,f,h){var l=a.__transition;if(!l)a.__transition={};else if(c in
l)return;Jm(a,c,{name:b,index:e,group:f,on:Km,tween:Lm,time:h.time,delay:h.delay,duration:h.duration,ease:h.ease,timer:null,state:0})}function lf(a,b,c){var e=new Ac;b=null==b?0:+b;e.restart(function(c){e.stop();a(c+b)},b,c);return e}function li(a,b){var c=a[0],e=a[1],f=a[2];a=b[2];var h=b[0]-c,l=b[1]-e,p=h*h+l*l;if(1E-12>p){var v=Math.log(a/f)/Bc;a=function(a){return[c+a*h,e+a*l,f*Math.exp(Bc*a*v)]}}else{var x=Math.sqrt(p);b=(a*a-f*f+4*p)/(4*f*x);a=(a*a-f*f-4*p)/(4*a*x);var k=Math.log(Math.sqrt(b*
b+1)-b);v=(Math.log(Math.sqrt(a*a+1)-a)-k)/Bc;a=function(a){a*=v;var b=mi(k),p=Bc*a+k;var q=((p=Math.exp(2*p))-1)/(p+1);var F=k,p=((F=Math.exp(F))-1/F)/2;q=f/(2*x)*(b*q-p);return[c+q*h,e+q*l,f*b/mi(Bc*a+k)]}}a.duration=1E3*v;return a}function ni(a,b,c,e,f,h){var l,p,v;if(l=Math.sqrt(a*a+b*b))a/=l,b/=l;if(v=a*c+b*e)c-=a*v,e-=b*v;if(p=Math.sqrt(c*c+e*e))c/=p,e/=p,v/=p;a*e<b*c&&(a=-a,b=-b,v=-v,l=-l);return{translateX:f,translateY:h,rotate:Math.atan2(b,a)*oi,skewX:Math.atan(v)*oi,scaleX:l,scaleY:p}}function pi(a,
b){return a=+a,b-=a,function(c){return Math.round(a+b*c)}}function Cc(a,b){var c=typeof b,e;return null==b||"boolean"===c?Gd(b):("number"===c?Da:"string"===c?(e=kb(b))?(b=e,zc):kf:b instanceof kb?zc:b instanceof Date?qi:Array.isArray(b)?ri:"function"!==typeof b.valueOf&&"function"!==typeof b.toString||isNaN(b)?si:Da)(a,b)}function kf(a,b){var c=mf.lastIndex=nf.lastIndex=0,e,f,h,l=-1,p=[],v=[];a+="";for(b+="";(e=mf.exec(a))&&(f=nf.exec(b));)(h=f.index)>c&&(h=b.slice(c,h),p[l]?p[l]+=h:p[++l]=h),(e=
e[0])===(f=f[0])?p[l]?p[l]+=f:p[++l]=f:(p[++l]=null,v.push({i:l,x:Da(e,f)})),c=nf.lastIndex;c<b.length&&(h=b.slice(c),p[l]?p[l]+=h:p[++l]=h);return 2>p.length?v[0]?Mm(v[0].x):Nm(b):(b=v.length,function(a){for(var c=0,e;c<b;++c)p[(e=v[c]).i]=e.x(a);return p.join("")})}function si(a,b){var c={},e={},f;if(null===a||"object"!==typeof a)a={};if(null===b||"object"!==typeof b)b={};for(f in b)f in a?c[f]=Cc(a[f],b[f]):e[f]=b[f];return function(a){for(f in c)e[f]=c[f](a);return e}}function Da(a,b){return a=
+a,b-=a,function(c){return a+b*c}}function qi(a,b){var c=new Date;return a=+a,b-=a,function(e){return c.setTime(a+b*e),c}}function ri(a,b){var c=b?b.length:0,e=a?Math.min(c,a.length):0,f=Array(c),h=Array(c),l;for(l=0;l<e;++l)f[l]=Cc(a[l],b[l]);for(;l<c;++l)h[l]=b[l];return function(a){for(l=0;l<e;++l)h[l]=f[l](a);return h}}function Gd(a){return function(){return a}}function ti(a){var b=a.length;return function(c){var e=Math.floor((0>(c%=1)?++c:c)*b);return ui((c-e/b)*b,a[(e+b-1)%b],a[e%b],a[(e+1)%
b],a[(e+2)%b])}}function vi(a){var b=a.length-1;return function(c){var e=0>=c?c=0:1<=c?(c=1,b-1):Math.floor(c*b),f=a[e],h=a[e+1];return ui((c-e/b)*b,0<e?a[e-1]:2*f-h,f,h,e<b-1?a[e+2]:2*h-f)}}function $b(a,b,c){a.prototype=b.prototype=c;c.constructor=a}function of(a){return function(){return a}}function Hd(a){var b=a.document.documentElement;a=Ea(a).on("dragstart.drag",ac,!0);if("onselectstart"in b)a.on("selectstart.drag",ac,!0);else b.__noselect=b.style.MozUserSelect,b.style.MozUserSelect="none"}
function ac(){d3.event.preventDefault();d3.event.stopImmediatePropagation()}function Id(a,b,c){3>arguments.length&&(c=b,b=pf().changedTouches);for(var e=0,f=b?b.length:0,h;e<f;++e)if((h=b[e]).identifier===c)return qf(a,h);return null}function Ea(a){return"string"===typeof a?new wa([[document.querySelector(a)]],[document.documentElement]):new wa([[a]],rf)}function sf(a){return a.ownerDocument&&a.ownerDocument.defaultView||a.document&&a||a.defaultView}function Om(a){return function(){return a}}function wi(a){return Array(a.length)}
function tf(a){return null==a?Pm:function(){return this.querySelectorAll(a)}}function Jd(a){return null==a?Qm:function(){return this.querySelector(a)}}function lb(a){var b=pf();b.changedTouches&&(b=b.changedTouches[0]);return qf(a,b)}function qf(a,b){var c=a.ownerSVGElement||a;if(c.createSVGPoint)return c=c.createSVGPoint(),c.x=b.clientX,c.y=b.clientY,c=c.matrixTransform(a.getScreenCTM().inverse()),[c.x,c.y];c=a.getBoundingClientRect();return[b.clientX-c.left-a.clientLeft,b.clientY-c.top-a.clientTop]}
function pf(){for(var a=d3.event,b;b=a.sourceEvent;)a=b;return a}function xi(a){return function(){return this.matches(a)}}function uf(a){a=Dc(a);return(a.local?Rm:Sm)(a)}function Dc(a){var b=a+="",c=b.indexOf(":");0<=c&&"xmlns"!==(b=a.slice(0,c))&&(a=a.slice(c+1));return Fa.hasOwnProperty(b)?{space:Fa[b],local:a}:a}function yi(a){return a}function zi(a){if(!(h=a.length))return[];for(var b=-1,c=Ai(a,Tm),e=Array(c);++b<c;)for(var f=-1,h,l=e[b]=Array(h);++f<h;)l[f]=a[f][b];return e}function Ai(a,b){var c=
a.length,e=-1,f,h;if(null==b)for(;++e<c;){if(null!=(f=a[e])&&f>=f)for(h=f;++e<c;)null!=(f=a[e])&&h>f&&(h=f)}else for(;++e<c;)if(null!=(f=b(a[e],e,a))&&f>=f)for(h=f;++e<c;)null!=(f=b(a[e],e,a))&&h>f&&(h=f);return h}function cf(a){var b=a.length;var c=-1;for(var e=0,f,h;++c<b;)e+=a[c].length;for(f=Array(e);0<=--b;)for(h=a[b],c=h.length;0<=--c;)f[--e]=h[c];return f}function Ec(a,b,c){null==c&&(c=mb);if(e=a.length){if(0>=(b=+b)||2>e)return+c(a[0],0,a);if(1<=b)return+c(a[e-1],e-1,a);var e;b*=e-1;e=Math.floor(b);
var f=+c(a[e],e,a);a=+c(a[e+1],e+1,a);return f+(a-f)*(b-e)}}function Bi(a){return Math.ceil(Math.log(a.length)/Math.LN2)+1}function vf(a,b,c){var e=b<a,f=-1,h;if(e){var l=a;a=b;b=l}if(0===(h=Fc(a,b,c))||!isFinite(h))return[];if(0<h)for(a=Math.ceil(a/h),b=Math.floor(b/h),b=Array(l=Math.ceil(b-a+1));++f<l;)b[f]=(a+f)*h;else for(a=Math.floor(a*h),b=Math.ceil(b*h),b=Array(l=Math.ceil(a-b+1));++f<l;)b[f]=(a-f)/h;e&&b.reverse();return b}function Oa(a,b,c){a=+a;b=+b;c=2>(f=arguments.length)?(b=a,a=0,1):
3>f?1:+c;for(var e=-1,f=Math.max(0,Math.ceil((b-a)/c))|0,h=Array(f);++e<f;)h[e]=a+e*c;return h}function Um(a){return a}function Kd(a){return function(){return a}}function Ci(a,b){var c=a.length,e=-1,f,h,l;if(null==b)for(;++e<c;){if(null!=(f=a[e])&&f>=f)for(h=l=f;++e<c;)null!=(f=a[e])&&(h>f&&(h=f),l<f&&(l=f))}else for(;++e<c;)if(null!=(f=b(a[e],e,a))&&f>=f)for(h=l=f;++e<c;)null!=(f=b(a[e],e,a))&&(h>f&&(h=f),l<f&&(l=f));return[h,l]}function Di(a,b){return(a=Ei(a,b))?Math.sqrt(a):a}function Ei(a,b){var c=
a.length,e=0,f=-1,h=0,l,p=0;if(null==b)for(;++f<c;){if(!isNaN(l=mb(a[f]))){var v=l-h;h+=v/++e;p+=v*(l-h)}}else for(;++f<c;)isNaN(l=mb(b(a[f],f,a)))||(v=l-h,h+=v/++e,p+=v*(l-h));if(1<e)return p/(e-1)}function mb(a){return null===a?NaN:+a}function wf(a){1===a.length&&(a=Vm(a));return{left:function(b,c,e,f){null==e&&(e=0);null==f&&(f=b.length);for(;e<f;){var h=e+f>>>1;0>a(b[h],c)?e=h+1:f=h}return e},right:function(b,c,e,f){null==e&&(e=0);null==f&&(f=b.length);for(;e<f;){var h=e+f>>>1;0<a(b[h],c)?f=h:
e=h+1}return e}}}function yb(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}function Vm(a){return function(b,c){return yb(a(b),c)}}function Fi(a,b){return[a,b]}function Fc(a,b,c){b=(b-a)/Math.max(0,c);a=Math.floor(Math.log(b)/Math.LN10);b/=Math.pow(10,a);return 0<=a?(b>=xf?10:b>=yf?5:b>=zf?2:1)*Math.pow(10,a):-Math.pow(10,-a)/(b>=xf?10:b>=yf?5:b>=zf?2:1)}function Gc(a,b,c){var e=Math.abs(b-a)/Math.max(0,c);c=Math.pow(10,Math.floor(Math.log(e)/Math.LN10));e/=c;e>=xf?c*=10:e>=yf?c*=5:e>=zf&&(c*=2);return b<a?
-c:c}function Tm(a){return a.length}function Wm(a){return"translate("+(a+.5)+",0)"}function Xm(a){return"translate(0,"+(a+.5)+")"}function Ym(a){var b=Math.max(0,a.bandwidth()-1)/2;a.round()&&(b=Math.round(b));return function(c){return a(c)+b}}function Zm(){return!this.__axis}function Ld(a,b){function c(c){var t=null==f?b.ticks?b.ticks.apply(b,e):b.domain():f,D=null==h?b.tickFormat?b.tickFormat.apply(b,e):yi:h,F=Math.max(l,0)+v,I=b.range(),J=I[0]+.5,I=I[I.length-1]+.5,u=(b.bandwidth?Ym:yi)(b.copy()),
y=c.selection?c.selection():c,G=y.selectAll(".domain").data([null]),t=y.selectAll(".tick").data(t,b).order(),H=t.exit(),N=t.enter().append("g").attr("class","tick"),P=t.select("line"),R=t.select("text"),G=G.merge(G.enter().insert("path",".tick").attr("class","domain").attr("stroke","#000")),t=t.merge(N),P=P.merge(N.append("line").attr("stroke","#000").attr(k+"2",x*l)),R=R.merge(N.append("text").attr("fill","#000").attr(k,x*F).attr("dy",1===a?"0em":3===a?"0.71em":"0.32em"));c!==y&&(G=G.transition(c),
t=t.transition(c),P=P.transition(c),R=R.transition(c),H=H.transition(c).attr("opacity",1E-6).attr("transform",function(a){return isFinite(a=u(a))?q(a):this.getAttribute("transform")}),N.attr("opacity",1E-6).attr("transform",function(a){var b=this.parentNode.__axis;return q(b&&isFinite(b=b(a))?b:u(a))}));H.remove();G.attr("d",4===a||2==a?"M"+x*p+","+J+"H0.5V"+I+"H"+x*p:"M"+J+","+x*p+"V0.5H"+I+"V"+x*p);t.attr("opacity",1).attr("transform",function(a){return q(u(a))});P.attr(k+"2",x*l);R.attr(k,x*F).text(D);
y.filter(Zm).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===a?"start":4===a?"end":"middle");y.each(function(){this.__axis=u})}var e=[],f=null,h=null,l=6,p=6,v=3,x=1===a||4===a?-1:1,k=4===a||2===a?"x":"y",q=1===a||3===a?Wm:Xm;c.scale=function(a){return arguments.length?(b=a,c):b};c.ticks=function(){return e=Af.call(arguments),c};c.tickArguments=function(a){return arguments.length?(e=null==a?[]:Af.call(a),c):e.slice()};c.tickValues=function(a){return arguments.length?
(f=null==a?null:Af.call(a),c):f&&f.slice()};c.tickFormat=function(a){return arguments.length?(h=a,c):h};c.tickSize=function(a){return arguments.length?(l=p=+a,c):l};c.tickSizeInner=function(a){return arguments.length?(l=+a,c):l};c.tickSizeOuter=function(a){return arguments.length?(p=+a,c):p};c.tickPadding=function(a){return arguments.length?(v=+a,c):v};return c}function ib(){for(var a=0,b=arguments.length,c={},e;a<b;++a){if(!(e=arguments[a]+"")||e in c)throw Error("illegal type: "+e);c[e]=[]}return new Md(c)}
function Md(a){this._=a}function $m(a,b){return a.trim().split(/^|\s+/).map(function(a){var c="",f=a.indexOf(".");0<=f&&(c=a.slice(f+1),a=a.slice(0,f));if(a&&!b.hasOwnProperty(a))throw Error("unknown type: "+a);return{type:a,name:c}})}function Gi(a,b,c){for(var e=0,f=a.length;e<f;++e)if(a[e].name===b){a[e]=an;a=a.slice(0,e).concat(a.slice(e+1));break}null!=c&&a.push({name:b,value:c});return a}function Sm(a){return function(){var b=this.ownerDocument,c=this.namespaceURI;return"http://www.w3.org/1999/xhtml"===
c&&"http://www.w3.org/1999/xhtml"===b.documentElement.namespaceURI?b.createElement(a):b.createElementNS(c,a)}}function Rm(a){return function(){return this.ownerDocument.createElementNS(a.space,a.local)}}function Hi(){return new Bf}function Bf(){this._="@"+(++bn).toString(36)}function cn(a,b,c){a=Ii(a,b,c);return function(b){var c=b.relatedTarget;c&&(c===this||c.compareDocumentPosition(this)&8)||a.call(this,b)}}function Ii(a,b,c){return function(e){var f=d3.event;d3.event=e;try{a.call(this,this.__data__,
b,c)}finally{d3.event=f}}}function dn(a){return a.trim().split(/^|\s+/).map(function(a){var b="",e=a.indexOf(".");0<=e&&(b=a.slice(e+1),a=a.slice(0,e));return{type:a,name:b}})}function en(a){return function(){var b=this.__on;if(b){for(var c=0,e=-1,f=b.length,h;c<f;++c)(h=b[c],a.type&&h.type!==a.type||h.name!==a.name)?b[++e]=h:this.removeEventListener(h.type,h.listener,h.capture);++e?b.length=e:delete this.__on}}}function fn(a,b,c){var e=Ji.hasOwnProperty(a.type)?cn:Ii;return function(f,h,l){f=this.__on;
var p;h=e(b,h,l);if(f){l=0;for(var v=f.length;l<v;++l)if((p=f[l]).type===a.type&&p.name===a.name){this.removeEventListener(p.type,p.listener,p.capture);this.addEventListener(p.type,p.listener=h,p.capture=c);p.value=b;return}}this.addEventListener(a.type,h,c);p={type:a.type,name:a.name,value:b,listener:h,capture:c};f?f.push(p):this.__on=[p]}}function Hc(a,b,c,e){var f=d3.event;a.sourceEvent=d3.event;d3.event=a;try{return b.apply(c,e)}finally{d3.event=f}}function Qm(){}function Pm(){return[]}function Nd(a,
b){this.ownerDocument=a.ownerDocument;this.namespaceURI=a.namespaceURI;this._next=null;this._parent=a;this.__data__=b}function gn(a,b,c,e,f,h){for(var l=0,p,v=b.length,x=h.length;l<x;++l)(p=b[l])?(p.__data__=h[l],e[l]=p):c[l]=new Nd(a,h[l]);for(;l<v;++l)if(p=b[l])f[l]=p}function hn(a,b,c,e,f,h,l){var p,v,x={},k=b.length,q=h.length,t=Array(k),z;for(p=0;p<k;++p)if(v=b[p])t[p]=z="$"+l.call(v,v.__data__,p,b),z in x?f[p]=v:x[z]=v;for(p=0;p<q;++p)z="$"+l.call(a,h[p],p,h),(v=x[z])?(e[p]=v,v.__data__=h[p],
x[z]=null):c[p]=new Nd(a,h[p]);for(p=0;p<k;++p)(v=b[p])&&x[t[p]]===v&&(f[p]=v)}function jn(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}function kn(a){return function(){this.removeAttribute(a)}}function ln(a){return function(){this.removeAttributeNS(a.space,a.local)}}function mn(a,b){return function(){this.setAttribute(a,b)}}function nn(a,b){return function(){this.setAttributeNS(a.space,a.local,b)}}function on(a,b){return function(){var c=b.apply(this,arguments);null==c?this.removeAttribute(a):this.setAttribute(a,
c)}}function pn(a,b){return function(){var c=b.apply(this,arguments);null==c?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,c)}}function qn(a){return function(){this.style.removeProperty(a)}}function rn(a,b,c){return function(){this.style.setProperty(a,b,c)}}function sn(a,b,c){return function(){var e=b.apply(this,arguments);null==e?this.style.removeProperty(a):this.style.setProperty(a,e,c)}}function zb(a,b){return a.style.getPropertyValue(b)||sf(a).getComputedStyle(a,
null).getPropertyValue(b)}function tn(a){return function(){delete this[a]}}function un(a,b){return function(){this[a]=b}}function vn(a,b){return function(){var c=b.apply(this,arguments);null==c?delete this[a]:this[a]=c}}function Cf(a){return a.classList||new Ki(a)}function Ki(a){this._node=a;this._names=(a.getAttribute("class")||"").trim().split(/^|\s+/)}function Li(a,b){a=Cf(a);for(var c=-1,e=b.length;++c<e;)a.add(b[c])}function Mi(a,b){a=Cf(a);for(var c=-1,e=b.length;++c<e;)a.remove(b[c])}function wn(a){return function(){Li(this,
a)}}function xn(a){return function(){Mi(this,a)}}function yn(a,b){return function(){(b.apply(this,arguments)?Li:Mi)(this,a)}}function zn(){this.textContent=""}function An(a){return function(){this.textContent=a}}function Bn(a){return function(){var b=a.apply(this,arguments);this.textContent=null==b?"":b}}function Cn(){this.innerHTML=""}function Dn(a){return function(){this.innerHTML=a}}function En(a){return function(){var b=a.apply(this,arguments);this.innerHTML=null==b?"":b}}function Fn(){this.nextSibling&&
this.parentNode.appendChild(this)}function Gn(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Hn(){return null}function In(){var a=this.parentNode;a&&a.removeChild(this)}function Ni(a,b,c){var e=sf(a),f=e.CustomEvent;"function"===typeof f?f=new f(b,c):(f=e.document.createEvent("Event"),c?(f.initEvent(b,c.bubbles,c.cancelable),f.detail=c.detail):f.initEvent(b,!1,!1));a.dispatchEvent(f)}function Jn(a,b){return function(){return Ni(this,a,b)}}function Kn(a,
b){return function(){return Ni(this,a,b.apply(this,arguments))}}function wa(a,b){this._groups=a;this._parents=b}function Ab(){return new wa([[document.documentElement]],rf)}function Od(a,b){var c=a.document.documentElement,e=Ea(a).on("dragstart.drag",null);b&&(e.on("click.drag",ac,!0),setTimeout(function(){e.on("click.drag",null)},0));if("onselectstart"in c)e.on("selectstart.drag",null);else c.style.MozUserSelect=c.__noselect,delete c.__noselect}function Df(a,b,c,e,f,h,l,p,v,x){this.target=a;this.type=
b;this.subject=c;this.identifier=e;this.active=f;this.x=h;this.y=l;this.dx=p;this.dy=v;this._=x}function Ln(){return!d3.event.button}function Mn(){return this.parentNode}function Nn(a){return null==a?{x:d3.event.x,y:d3.event.y}:a}function Ic(a,b){a=Object.create(a.prototype);for(var c in b)a[c]=b[c];return a}function nb(){}function kb(a){var b;a=(a+"").trim().toLowerCase();return(b=On.exec(a))?(b=parseInt(b[1],16),new qa(b>>8&15|b>>4&240,b>>4&15|b&240,(b&15)<<4|b&15,1)):(b=Pn.exec(a))?Oi(parseInt(b[1],
16)):(b=Qn.exec(a))?new qa(b[1],b[2],b[3],1):(b=Rn.exec(a))?new qa(255*b[1]/100,255*b[2]/100,255*b[3]/100,1):(b=Sn.exec(a))?Pi(b[1],b[2],b[3],b[4]):(b=Tn.exec(a))?Pi(255*b[1]/100,255*b[2]/100,255*b[3]/100,b[4]):(b=Un.exec(a))?Qi(b[1],b[2]/100,b[3]/100,1):(b=Vn.exec(a))?Qi(b[1],b[2]/100,b[3]/100,b[4]):Ri.hasOwnProperty(a)?Oi(Ri[a]):"transparent"===a?new qa(NaN,NaN,NaN,0):null}function Oi(a){return new qa(a>>16&255,a>>8&255,a&255,1)}function Pi(a,b,c,e){0>=e&&(a=b=c=NaN);return new qa(a,b,c,e)}function Ef(a){a instanceof
nb||(a=kb(a));if(!a)return new qa;a=a.rgb();return new qa(a.r,a.g,a.b,a.opacity)}function Jc(a,b,c,e){return 1===arguments.length?Ef(a):new qa(a,b,c,null==e?1:e)}function qa(a,b,c,e){this.r=+a;this.g=+b;this.b=+c;this.opacity=+e}function Qi(a,b,c,e){0>=e?a=b=c=NaN:0>=c||1<=c?a=b=NaN:0>=b&&(a=NaN);return new Ta(a,b,c,e)}function Wn(a){if(a instanceof Ta)return new Ta(a.h,a.s,a.l,a.opacity);a instanceof nb||(a=kb(a));if(!a)return new Ta;if(a instanceof Ta)return a;a=a.rgb();var b=a.r/255,c=a.g/255,
e=a.b/255,f=Math.min(b,c,e),h=Math.max(b,c,e),l=NaN,p=h-f,v=(h+f)/2;p?(l=b===h?(c-e)/p+6*(c<e):c===h?(e-b)/p+2:(b-c)/p+4,p/=.5>v?h+f:2-h-f,l*=60):p=0<v&&1>v?0:l;return new Ta(l,p,v,a.opacity)}function Pd(a,b,c,e){return 1===arguments.length?Wn(a):new Ta(a,b,c,null==e?1:e)}function Ta(a,b,c,e){this.h=+a;this.s=+b;this.l=+c;this.opacity=+e}function Ff(a,b,c){return 255*(60>a?b+(c-b)*a/60:180>a?c:240>a?b+(c-b)*(240-a)/60:b)}function Gf(a){if(a instanceof Za)return new Za(a.l,a.a,a.b,a.opacity);if(a instanceof
ob){var b=a.h*Si;return new Za(a.l,Math.cos(b)*a.c,Math.sin(b)*a.c,a.opacity)}a instanceof qa||(a=Ef(a));var c=Hf(a.r),e=Hf(a.g),f=Hf(a.b),b=If((.4124564*c+.3575761*e+.1804375*f)/.95047),h=If((.2126729*c+.7151522*e+.072175*f)/1),c=If((.0193339*c+.119192*e+.9503041*f)/1.08883);return new Za(116*h-16,500*(b-h),200*(h-c),a.opacity)}function Qd(a,b,c,e){return 1===arguments.length?Gf(a):new Za(a,b,c,null==e?1:e)}function Za(a,b,c,e){this.l=+a;this.a=+b;this.b=+c;this.opacity=+e}function If(a){return a>
Xn?Math.pow(a,1/3):a/Ti+Ui}function Jf(a){return a>bc?a*a*a:Ti*(a-Ui)}function Kf(a){return 255*(.0031308>=a?12.92*a:1.055*Math.pow(a,1/2.4)-.055)}function Hf(a){return.04045>=(a/=255)?a/12.92:Math.pow((a+.055)/1.055,2.4)}function Rd(a,b,c,e){if(1===arguments.length){var f=a;if(f instanceof ob)f=new ob(f.h,f.c,f.l,f.opacity);else{f instanceof Za||(f=Gf(f));var h=Math.atan2(f.b,f.a)*Vi;f=new ob(0>h?h+360:h,Math.sqrt(f.a*f.a+f.b*f.b),f.l,f.opacity)}}else f=new ob(a,b,c,null==e?1:e);return f}function ob(a,
b,c,e){this.h=+a;this.c=+b;this.l=+c;this.opacity=+e}function Pa(a,b,c,e){if(1===arguments.length){var f=a;if(f instanceof Bb)f=new Bb(f.h,f.s,f.l,f.opacity);else{f instanceof qa||(f=Ef(f));var h=f.g/255,l=f.b/255,p=(Wi*l+f.r/255*-1.7884503806-3.5172982438*h)/(Wi+-1.7884503806-3.5172982438),l=l-p,v=(1.97294*(h-p)- -.29227*l)/-.90649,l=(h=Math.sqrt(v*v+l*l)/(1.97294*p*(1-p)))?Math.atan2(v,l)*Vi-120:NaN;f=new Bb(0>l?l+360:l,h,p,f.opacity)}}else f=new Bb(a,b,c,null==e?1:e);return f}function Bb(a,b,c,
e){this.h=+a;this.s=+b;this.l=+c;this.opacity=+e}function ui(a,b,c,e,f){var h=a*a,l=h*a;return((1-3*a+3*h-l)*b+(4-6*h+3*l)*c+(1+3*a+3*h-3*l)*e+l*f)/6}function Xi(a,b){return function(c){return a+c*b}}function Yn(a,b,c){return a=Math.pow(a,c),b=Math.pow(b,c)-a,c=1/c,function(e){return Math.pow(a+e*b,c)}}function Lf(a,b){var c=b-a;return c?Xi(a,180<c||-180>c?c-360*Math.round(c/360):c):Gd(isNaN(a)?b:a)}function Zn(a){return 1===(a=+a)?pa:function(b,c){return c-b?Yn(b,c,a):Gd(isNaN(b)?c:b)}}function pa(a,
b){var c=b-a;return c?Xi(a,c):Gd(isNaN(a)?b:a)}function Yi(a){return function(b){var c=b.length,e=Array(c),f=Array(c),h=Array(c),l;for(l=0;l<c;++l){var p=Jc(b[l]);e[l]=p.r||0;f[l]=p.g||0;h[l]=p.b||0}e=a(e);f=a(f);h=a(h);p.opacity=1;return function(a){p.r=e(a);p.g=f(a);p.b=h(a);return p+""}}}function Nm(a){return function(){return a}}function Mm(a){return function(b){return a(b)+""}}function Zi(a,b,c,e){function f(a){return a.length?a.pop()+" ":""}function h(a,e,f,h,l,p){a!==f||e!==h?(l=l.push("translate(",
null,b,null,c),p.push({i:l-4,x:Da(a,f)},{i:l-2,x:Da(e,h)})):(f||h)&&l.push("translate("+f+b+h+c)}function l(a,b,c,h){a!==b?(180<a-b?b+=360:180<b-a&&(a+=360),h.push({i:c.push(f(c)+"rotate(",null,e)-2,x:Da(a,b)})):b&&c.push(f(c)+"rotate("+b+e)}function p(a,b,c,h){a!==b?h.push({i:c.push(f(c)+"skewX(",null,e)-2,x:Da(a,b)}):b&&c.push(f(c)+"skewX("+b+e)}function v(a,b,c,e,h,l){a!==c||b!==e?(h=h.push(f(h)+"scale(",null,",",null,")"),l.push({i:h-4,x:Da(a,c)},{i:h-2,x:Da(b,e)})):1===c&&1===e||h.push(f(h)+
"scale("+c+","+e+")")}return function(b,c){var e=[],f=[];b=a(b);c=a(c);h(b.translateX,b.translateY,c.translateX,c.translateY,e,f);l(b.rotate,c.rotate,e,f);p(b.skewX,c.skewX,e,f);v(b.scaleX,b.scaleY,c.scaleX,c.scaleY,e,f);b=c=null;return function(a){for(var b=-1,c=f.length,h;++b<c;)e[(h=f[b]).i]=h.x(a);return e.join("")}}}function mi(a){return((a=Math.exp(a))+1/a)/2}function $i(a){return function(b,c){var e=a((b=Pd(b)).h,(c=Pd(c)).h),f=pa(b.s,c.s),h=pa(b.l,c.l),l=pa(b.opacity,c.opacity);return function(a){b.h=
e(a);b.s=f(a);b.l=h(a);b.opacity=l(a);return b+""}}}function aj(a){return function(b,c){var e=a((b=Rd(b)).h,(c=Rd(c)).h),f=pa(b.c,c.c),h=pa(b.l,c.l),l=pa(b.opacity,c.opacity);return function(a){b.h=e(a);b.c=f(a);b.l=h(a);b.opacity=l(a);return b+""}}}function bj(a){return function c(e){function f(c,f){var h=a((c=Pa(c)).h,(f=Pa(f)).h),l=pa(c.s,f.s),x=pa(c.l,f.l),k=pa(c.opacity,f.opacity);return function(a){c.h=h(a);c.s=l(a);c.l=x(Math.pow(a,e));c.opacity=k(a);return c+""}}e=+e;f.gamma=c;return f}(1)}
function cc(){return pb||(cj($n),pb=Mf.now()+Nf)}function $n(){pb=0}function Ac(){this._call=this._time=this._next=null}function Sd(a,b,c){var e=new Ac;e.restart(a,b,c);return e}function dj(){cc();++dc;for(var a=Td,b;a;)0<=(b=pb-a._time)&&a._call.call(null,b),a=a._next;--dc}function ej(){pb=(Ud=Mf.now())+Nf;dc=Kc=0;try{dj()}finally{dc=0;for(var a,b=Td,c,e=Infinity;b;)b._call?(e>b._time&&(e=b._time),a=b,b=b._next):(c=b._next,b._next=null,b=a?a._next=c:Td=c);Lc=a;Of(e);pb=0}}function ao(){var a=Mf.now(),
b=a-Ud;1E3<b&&(Nf-=b,Ud=a)}function Of(a){if(!dc){Kc&&(Kc=clearTimeout(Kc));var b=a-pb;24<b?(Infinity>a&&(Kc=setTimeout(ej,b)),Mc&&(Mc=clearInterval(Mc))):(Mc||(Ud=pb,Mc=setInterval(ao,1E3)),dc=1,cj(ej))}}function Pf(a,b){a=a.__transition;if(!a||!(a=a[b])||0<a.state)throw Error("too late");return a}function Cb(a,b){a=a.__transition;if(!a||!(a=a[b])||2<a.state)throw Error("too late");return a}function $a(a,b){a=a.__transition;if(!a||!(a=a[b]))throw Error("too late");return a}function Jm(a,b,c){function e(v){var x,
k;if(1!==c.state)return h();for(t in l){var q=l[t];if(q.name===c.name){if(3===q.state)return lf(e);4===q.state?(q.state=6,q.timer.stop(),q.on.call("interrupt",a,a.__data__,q.index,q.group),delete l[t]):+t<b&&(q.state=6,q.timer.stop(),delete l[t])}}lf(function(){3===c.state&&(c.state=4,c.timer.restart(f,c.delay,c.time),f(v))});c.state=2;c.on.call("start",a,a.__data__,c.index,c.group);if(2===c.state){c.state=3;p=Array(k=c.tween.length);var t=0;for(x=-1;t<k;++t)if(q=c.tween[t].value.call(a,a.__data__,
c.index,c.group))p[++x]=q;p.length=x+1}}function f(b){b=b<c.duration?c.ease.call(null,b/c.duration):(c.timer.restart(h),c.state=5,1);for(var e=-1,f=p.length;++e<f;)p[e].call(null,b);5===c.state&&(c.on.call("end",a,a.__data__,c.index,c.group),h())}function h(){c.state=6;c.timer.stop();delete l[b];for(var e in l)return;delete a.__transition}var l=a.__transition,p;l[b]=c;c.timer=Sd(function(a){c.state=1;c.timer.restart(e,c.delay,c.time);c.delay<=a&&e(a-c.delay)},0,c.time)}function bo(a,b){var c,e;return function(){var f=
Cb(this,a),h=f.tween;if(h!==c){e=c=h;for(var h=0,l=e.length;h<l;++h)if(e[h].name===b){e=e.slice();e.splice(h,1);break}}f.tween=e}}function co(a,b,c){var e,f;if("function"!==typeof c)throw Error();return function(){var h=Cb(this,a),l=h.tween;if(l!==e){f=(e=l).slice();for(var l={name:b,value:c},p=0,v=f.length;p<v;++p)if(f[p].name===b){f[p]=l;break}p===v&&f.push(l)}h.tween=f}}function Qf(a,b,c){var e=a._id;a.each(function(){var a=Cb(this,e);(a.value||(a.value={}))[b]=c.apply(this,arguments)});return function(a){return $a(a,
e).value[b]}}function eo(a){return function(){this.removeAttribute(a)}}function fo(a){return function(){this.removeAttributeNS(a.space,a.local)}}function go(a,b,c){var e,f;return function(){var h=this.getAttribute(a);return h===c?null:h===e?f:f=b(e=h,c)}}function ho(a,b,c){var e,f;return function(){var h=this.getAttributeNS(a.space,a.local);return h===c?null:h===e?f:f=b(e=h,c)}}function io(a,b,c){var e,f,h;return function(){var l=c(this);if(null==l)return void this.removeAttribute(a);var p=this.getAttribute(a);
return p===l?null:p===e&&l===f?h:h=b(e=p,f=l)}}function jo(a,b,c){var e,f,h;return function(){var l=c(this);if(null==l)return void this.removeAttributeNS(a.space,a.local);var p=this.getAttributeNS(a.space,a.local);return p===l?null:p===e&&l===f?h:h=b(e=p,f=l)}}function ko(a,b){function c(){var c=this,f=b.apply(c,arguments);return f&&function(b){c.setAttributeNS(a.space,a.local,f(b))}}c._value=b;return c}function lo(a,b){function c(){var c=this,f=b.apply(c,arguments);return f&&function(b){c.setAttribute(a,
f(b))}}c._value=b;return c}function mo(a,b){return function(){Pf(this,a).delay=+b.apply(this,arguments)}}function no(a,b){return b=+b,function(){Pf(this,a).delay=b}}function oo(a,b){return function(){Cb(this,a).duration=+b.apply(this,arguments)}}function po(a,b){return b=+b,function(){Cb(this,a).duration=b}}function qo(a,b){if("function"!==typeof b)throw Error();return function(){Cb(this,a).ease=b}}function ro(a){return(a+"").trim().split(/^|\s+/).every(function(a){var b=a.indexOf(".");0<=b&&(a=a.slice(0,
b));return!a||"start"===a})}function so(a,b,c){var e,f,h=ro(b)?Pf:Cb;return function(){var l=h(this,a),p=l.on;if(p!==e)(f=(e=p).copy()).on(b,c);l.on=f}}function to(a){return function(){var b=this.parentNode,c;for(c in this.__transition)if(+c!==a)return;b&&b.removeChild(this)}}function uo(a,b){var c,e,f;return function(){var h=zb(this,a),l=(this.style.removeProperty(a),zb(this,a));return h===l?null:h===c&&l===e?f:f=b(c=h,e=l)}}function vo(a){return function(){this.style.removeProperty(a)}}function wo(a,
b,c){var e,f;return function(){var h=zb(this,a);return h===c?null:h===e?f:f=b(e=h,c)}}function xo(a,b,c){var e,f,h;return function(){var l=zb(this,a),p=c(this);null==p&&(p=(this.style.removeProperty(a),zb(this,a)));return l===p?null:l===e&&p===f?h:h=b(e=l,f=p)}}function yo(a,b,c){function e(){var e=this,h=b.apply(e,arguments);return h&&function(b){e.style.setProperty(a,h(b),c)}}e._value=b;return e}function zo(a){return function(){this.textContent=a}}function Ao(a){return function(){var b=a(this);
this.textContent=null==b?"":b}}function Ua(a,b,c,e){this._groups=a;this._parents=b;this._name=c;this._id=e}function fj(a){return Ab().transition(a)}function gj(a){return(1>=(a*=2)?a*a:--a*(2-a)+1)/2}function Rf(a){return(1>=(a*=2)?a*a*a:(a-=2)*a*a+2)/2}function hj(a){return(1-Math.cos(ij*a))/2}function jj(a){return(1>=(a*=2)?Math.pow(2,10*a-10):2-Math.pow(2,10-10*a))/2}function kj(a){return(1>=(a*=2)?1-Math.sqrt(1-a*a):Math.sqrt(1-(a-=2)*a)+1)/2}function Nc(a){return(a=+a)<Sf?Vd*a*a:a<Bo?Vd*(a-=Co)*
a+.75:a<Do?Vd*(a-=Eo)*a+.9375:Vd*(a-=Fo)*a+.984375}function Oc(a){return{type:a}}function Go(){return!d3.event.button}function Ho(){var a=this.ownerSVGElement||this;return[[0,0],[a.width.baseVal.value,a.height.baseVal.value]]}function Tf(a){for(;!a.__brush;)if(!(a=a.parentNode))return;return a.__brush}function Uf(a){return a[0][0]===a[1][0]||a[0][1]===a[1][1]}function Vf(a){function b(b){var e=b.property("__brush",l).selectAll(".overlay").data([Oc("overlay")]);e.enter().append("rect").attr("class",
"overlay").attr("pointer-events","all").attr("cursor",ab.overlay).merge(e).each(function(){var a=Tf(this).extent;Ea(this).attr("x",a[0][0]).attr("y",a[0][1]).attr("width",a[1][0]-a[0][0]).attr("height",a[1][1]-a[0][1])});b.selectAll(".selection").data([Oc("selection")]).enter().append("rect").attr("class","selection").attr("cursor",ab.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");e=b.selectAll(".handle").data(a.handles,function(a){return a.type});
e.exit().remove();e.enter().append("rect").attr("class",function(a){return"handle handle--"+a.type}).attr("cursor",function(a){return ab[a.type]});b.each(c).attr("fill","none").attr("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush touchstart.brush",h)}function c(){var a=Ea(this),b=Tf(this).selection;b?(a.selectAll(".selection").style("display",null).attr("x",b[0][0]).attr("y",b[0][1]).attr("width",b[1][0]-b[0][0]).attr("height",b[1][1]-b[0][1]),a.selectAll(".handle").style("display",
null).attr("x",function(a){return"e"===a.type[a.type.length-1]?b[1][0]-k/2:b[0][0]-k/2}).attr("y",function(a){return"s"===a.type[0]?b[1][1]-k/2:b[0][1]-k/2}).attr("width",function(a){return"n"===a.type||"s"===a.type?b[1][0]-b[0][0]+k:k}).attr("height",function(a){return"e"===a.type||"w"===a.type?b[1][1]-b[0][1]+k:k})):a.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function e(a,b){return a.__brush.emitter||new f(a,b)}function f(a,
b){this.that=a;this.args=b;this.state=a.__brush;this.active=0}function h(){function b(){var a=lb(p);!K||L||S||(Math.abs(a[0]-fa[0])>Math.abs(a[1]-fa[1])?S=!0:L=!0);fa=a;E=!0;Ed();f()}function f(){A=fa[0]-U[0];M=fa[1]-U[1];switch(y){case Wf:case lj:x&&(A=Math.max(d-g,Math.min(m-w,A)),Q=g+A,ia=w+A);H&&(M=Math.max(r-n,Math.min(C-B,M)),W=n+M,na=B+M);break;case ec:0>x?(A=Math.max(d-g,Math.min(m-g,A)),Q=g+A,ia=w):0<x&&(A=Math.max(d-w,Math.min(m-w,A)),Q=g,ia=w+A);0>H?(M=Math.max(r-n,Math.min(C-n,M)),W=n+
M,na=B):0<H&&(M=Math.max(r-B,Math.min(C-B,M)),W=n,na=B+M);break;case fc:x&&(Q=Math.max(d,Math.min(m,g-A*x)),ia=Math.max(d,Math.min(m,w+A*x))),H&&(W=Math.max(r,Math.min(C,n-M*H)),na=Math.max(r,Math.min(C,B+M*H)))}if(ia<Q){x*=-1;var a=g;g=w;w=a;a=Q;Q=ia;ia=a;u in mj&&Db.attr("cursor",ab[u=mj[u]])}na<W&&(H*=-1,a=n,n=B,B=a,a=W,W=na,na=a,u in nj&&Db.attr("cursor",ab[u=nj[u]]));N.selection&&(R=N.selection);L&&(Q=R[0][0],ia=R[1][0]);S&&(W=R[0][1],na=R[1][1]);if(R[0][0]!==Q||R[0][1]!==W||R[1][0]!==ia||R[1][1]!==
na)N.selection=[[Q,W],[ia,na]],c.call(p),da.brush()}function h(){d3.event.stopImmediatePropagation();if(d3.event.touches){if(d3.event.touches.length)return;q&&clearTimeout(q);q=setTimeout(function(){q=null},500);Eb.on("touchmove.brush touchend.brush touchcancel.brush",null)}else Od(d3.event.view,E),O.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);Eb.attr("pointer-events","all");Db.attr("cursor",ab.overlay);N.selection&&(R=N.selection);Uf(R)&&(N.selection=null,c.call(p));da.end()}
function k(){switch(d3.event.keyCode){case 16:K=x&&H;break;case 18:y===ec&&(x&&(w=ia-A*x,g=Q+A*x),H&&(B=na-M*H,n=W+M*H),y=fc,f());break;case 32:if(y===ec||y===fc)0>x?w=ia-A:0<x&&(g=Q-A),0>H?B=na-M:0<H&&(n=W-M),y=Wf,Db.attr("cursor",ab.selection),f();break;default:return}Ed()}function l(){switch(d3.event.keyCode){case 16:K&&(L=S=K=!1,f());break;case 18:y===fc&&(0>x?w=ia:0<x&&(g=Q),0>H?B=na:0<H&&(n=W),y=ec,f());break;case 32:y===Wf&&(d3.event.altKey?(x&&(w=ia-A*x,g=Q+A*x),H&&(B=na-M*H,n=W+M*H),y=fc):
(0>x?w=ia:0<x&&(g=Q),0>H?B=na:0<H&&(n=W),y=ec),Db.attr("cursor",ab[u]),f());break;default:return}Ed()}if(d3.event.touches){if(d3.event.changedTouches.length<d3.event.touches.length)return Ed()}else if(q)return;if(v.apply(this,arguments)){var p=this,u=d3.event.target.__data__.type,y="selection"===(d3.event.metaKey?u="overlay":u)?lj:d3.event.altKey?fc:ec,x=a===Wd?null:Io[u],H=a===Xd?null:Jo[u],N=Tf(p),P=N.extent,R=N.selection,d=P[0][0],g,r=P[0][1],n,m=P[1][0],w,C=P[1][1],B,A,M,E,K=x&&H&&d3.event.shiftKey,
L,S,U=lb(p),fa=U,da=e(p,arguments).beforestart();"overlay"===u?N.selection=R=[[g=a===Wd?d:U[0],n=a===Xd?r:U[1]],[w=a===Wd?m:g,B=a===Xd?C:n]]:(g=R[0][0],n=R[0][1],w=R[1][0],B=R[1][1]);var Q=g;var W=n;var ia=w;var na=B;var Eb=Ea(p).attr("pointer-events","none"),Db=Eb.selectAll(".overlay").attr("cursor",ab[u]);if(d3.event.touches)Eb.on("touchmove.brush",b,!0).on("touchend.brush touchcancel.brush",h,!0);else{var O=Ea(d3.event.view).on("keydown.brush",k,!0).on("keyup.brush",l,!0).on("mousemove.brush",
b,!0).on("mouseup.brush",h,!0);Hd(d3.event.view)}d3.event.stopImmediatePropagation();xb(p);c.call(p);da.start()}}function l(){var b=this.__brush||{selection:null};b.extent=p.apply(this,arguments);b.dim=a;return b}var p=Ho,v=Go,x=ib(b,"start","brush","end"),k=6,q;b.move=function(b,f){b.selection?b.on("start.brush",function(){e(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){e(this,arguments).end()}).tween("brush",function(){function b(a){k.selection=1===a&&Uf(q)?null:
t(a);c.call(h);l.brush()}var h=this,k=h.__brush,l=e(h,arguments),p=k.selection,q=a.input("function"===typeof f?f.apply(this,arguments):f,k.extent),t=Cc(p,q);return p&&q?b:b(1)}):b.each(function(){var b=arguments,h=this.__brush,k=a.input("function"===typeof f?f.apply(this,b):f,h.extent),b=e(this,b).beforestart();xb(this);h.selection=null==k||Uf(k)?null:k;c.call(this);b.start().brush().end()})};f.prototype={beforestart:function(){1===++this.active&&(this.state.emitter=this,this.starting=!0);return this},
start:function(){this.starting&&(this.starting=!1,this.emit("start"));return this},brush:function(){this.emit("brush");return this},end:function(){0===--this.active&&(delete this.state.emitter,this.emit("end"));return this},emit:function(c){Hc(new Im(b,c,a.output(this.state.selection)),x.apply,x,[c,this.that,this.args])}};b.extent=function(a){return arguments.length?(p="function"===typeof a?a:ji([[+a[0][0],+a[0][1]],[+a[1][0],+a[1][1]]]),b):p};b.filter=function(a){return arguments.length?(v="function"===
typeof a?a:ji(!!a),b):v};b.handleSize=function(a){return arguments.length?(k=+a,b):k};b.on=function(){var a=x.on.apply(x,arguments);return a===x?b:a};return b}function Ko(a){return function(b,c){return a(b.source.value+b.target.value,c.source.value+c.target.value)}}function Xf(){this._x0=this._y0=this._x1=this._y1=null;this._=""}function gb(){return new Xf}function Lo(a){return a.source}function Mo(a){return a.target}function No(a){return a.radius}function Oo(a){return a.startAngle}function Po(a){return a.endAngle}
function Yd(){}function Sa(a,b){var c=new Yd;if(a instanceof Yd)a.each(function(a,b){c.set(b,a)});else if(Array.isArray(a)){var e=-1,f=a.length,h;if(null==b)for(;++e<f;)c.set(e,a[e]);else for(;++e<f;)c.set(b(h=a[e],e,a),h)}else if(a)for(e in a)c.set(e,a[e]);return c}function Qo(){return{}}function Ro(a,b,c){a[b]=c}function oj(){return Sa()}function pj(a,b,c){a.set(b,c)}function Zd(){}function qj(a,b){var c=new Zd;if(a instanceof Zd)a.each(function(a){c.add(a)});else if(a){var e=-1,f=a.length;if(null==
b)for(;++e<f;)c.add(a[e]);else for(;++e<f;)c.add(b(a[e],e,a))}return c}function ii(a){return new Function("d","return {"+a.map(function(a,c){return JSON.stringify(a)+": d["+c+"]"}).join(",")+"}")}function Gm(a,b){var c=ii(a);return function(e,f){return b(c(e),f,a)}}function Hm(a){var b=Object.create(null),c=[];a.forEach(function(a){for(var e in a)e in b||c.push(b[e]=e)});return c}function rj(a,b,c,e){if(isNaN(b)||isNaN(c))return a;var f,h=a._root;e={data:e};var l=a._x0,p=a._y0,v=a._x1,x=a._y1,k,q,
t,z;if(!h)return a._root=e,a;for(;h.length;)if((t=b>=(k=(l+v)/2))?l=k:v=k,(z=c>=(q=(p+x)/2))?p=q:x=q,f=h,!(h=h[t|=z<<1]))return f[t]=e,a;var D=+a._x.call(null,h.data);var F=+a._y.call(null,h.data);if(b===D&&c===F)return e.next=h,f?f[t]=e:a._root=e,a;do f=f?f[t]=Array(4):a._root=Array(4),(t=b>=(k=(l+v)/2))?l=k:v=k,(z=c>=(q=(p+x)/2))?p=q:x=q;while((t|=z<<1)===(z=(F>=q)<<1|D>=k));return f[z]=h,f[t]=e,a}function So(a){return a[0]}function To(a){return a[1]}function $d(a,b,c){b=new Yf(null==b?So:b,null==
c?To:c,NaN,NaN,NaN,NaN);return null==a?b:b.addAll(a)}function Yf(a,b,c,e,f,h){this._x=a;this._y=b;this._x0=c;this._y0=e;this._x1=f;this._y1=h;this._root=void 0}function sj(a){for(var b={data:a.data},c=b;a=a.next;)c=c.next={data:a.data};return b}function Uo(a){return a.x+a.vx}function Vo(a){return a.y+a.vy}function Wo(a){return a.index}function tj(a,b){a=a.get(b);if(!a)throw Error("missing: "+b);return a}function Xo(a){return a.x}function Yo(a){return a.y}function yc(a){return new Zf(a)}function Zf(a){if(!(b=
Zo.exec(a)))throw Error("invalid format: "+a);var b;a=b[1]||" ";var c=b[2]||">",e=b[3]||"-",f=b[4]||"",h=!!b[5],l=b[6]&&+b[6],p=!!b[7],v=b[8]&&+b[8].slice(1);b=b[9]||"";"n"===b?(p=!0,b="g"):fi[b]||(b="");if(h||"0"===a&&"="===c)h=!0,a="0",c="=";this.fill=a;this.align=c;this.sign=e;this.symbol=f;this.zero=h;this.width=l;this.comma=p;this.precision=v;this.type=b}function uj(a){ae=ci(a);d3.format=ae.format;d3.formatPrefix=ae.formatPrefix;return ae}function Qa(){this.reset()}function vj(a,b,c){var e=a.s=
b+c,f=e-b;a.t=b-(e-f)+(c-f)}function wj(a){return 1<a?0:-1>a?Z:Math.acos(a)}function Ca(a){return 1<a?ha:-1>a?-ha:Math.asin(a)}function xj(a){return(a=O(a/2))*a}function ea(){}function Cd(a,b){if(a&&yj.hasOwnProperty(a.type))yj[a.type](a,b)}function $f(a,b,c){var e=-1;c=a.length-c;for(b.lineStart();++e<c;){var f=a[e];b.point(f[0],f[1],f[2])}b.lineEnd()}function zj(a,b){var c=-1,e=a.length;for(b.polygonStart();++c<e;)$f(a[c],b,1);b.polygonEnd()}function $o(){Va.point=ap}function bp(){Aj(Bj,Cj)}function ap(a,
b){Va.point=Aj;Bj=a;Cj=b;a*=T;b*=T;ag=a;bg=V(b=b/2+zd);cg=O(b)}function Aj(a,b){a*=T;b*=T;b=b/2+zd;var c=a-ag,e=0<=c?1:-1,f=e*c,c=V(b);b=O(b);var h=cg*b,l=bg*c+h*V(f),e=h*e*O(f);be.add(ta(e,l));ag=a;bg=c;cg=b}function xd(a){return[ta(a[1],a[0]),Ca(a[2])]}function vb(a){var b=a[0];a=a[1];var c=V(a);return[c*V(b),c*O(b),O(a)]}function vd(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}function Vb(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function bf(a,b){a[0]+=b[0];a[1]+=b[1];
a[2]+=b[2]}function wd(a,b){return[a[0]*b,a[1]*b,a[2]*b]}function Ad(a){var b=ma(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);a[0]/=b;a[1]/=b;a[2]/=b}function dg(a,b){qb.push(bb=[ja=a,ka=a]);b<Ga&&(Ga=b);b>Ja&&(Ja=b)}function Dj(a,b){var c=vb([a*T,b*T]);if(gc){var e=Vb(gc,c),e=Vb([e[1],-e[0],0],e);Ad(e);var e=xd(e),f=a-Fb,h=0<f?1:-1,l=e[0]*ba*h,f=180<Y(f);f^(h*Fb<l&&l<h*a)?(e=e[1]*ba,e>Ja&&(Ja=e)):(l=(l+360)%360-180,f^(h*Fb<l&&l<h*a))?(e=-e[1]*ba,e<Ga&&(Ga=e)):(b<Ga&&(Ga=b),b>Ja&&(Ja=b));f?a<Fb?Ha(ja,a)>Ha(ja,
ka)&&(ka=a):Ha(a,ka)>Ha(ja,ka)&&(ja=a):ka>=ja?(a<ja&&(ja=a),a>ka&&(ka=a)):a>Fb?Ha(ja,a)>Ha(ja,ka)&&(ka=a):Ha(a,ka)>Ha(ja,ka)&&(ja=a)}else qb.push(bb=[ja=a,ka=a]);b<Ga&&(Ga=b);b>Ja&&(Ja=b);gc=c;Fb=a}function Ej(){cb.point=Dj}function Fj(){bb[0]=ja;bb[1]=ka;cb.point=dg;gc=null}function Gj(a,b){if(gc){var c=a-Fb;Pc.add(180<Y(c)?c+(0<c?360:-360):c)}else Hj=a,Ij=b;Va.point(a,b);Dj(a,b)}function cp(){Va.lineStart()}function dp(){Gj(Hj,Ij);Va.lineEnd();1E-6<Y(Pc)&&(ja=-(ka=180));bb[0]=ja;bb[1]=ka;gc=null}
function Ha(a,b){return 0>(b-=a)?b+360:b}function ep(a,b){return a[0]-b[0]}function Jj(a,b){return a[0]<=a[1]?a[0]<=b&&b<=a[1]:b<a[0]||a[1]<b}function eg(a,b){a*=T;b*=T;var c=V(b);Qc(c*V(a),c*O(a),O(b))}function Qc(a,b,c){++Rc;ce+=(a-ce)/Rc;de+=(b-de)/Rc;ee+=(c-ee)/Rc}function Kj(){Ra.point=fp}function fp(a,b){a*=T;b*=T;var c=V(b);xa=c*V(a);ya=c*O(a);za=O(b);Ra.point=gp;Qc(xa,ya,za)}function gp(a,b){a*=T;b*=T;var c=V(b),e=c*V(a);a=c*O(a);b=O(b);var f=ta(ma((f=ya*b-za*a)*f+(f=za*e-xa*b)*f+(f=xa*a-
ya*e)*f),xa*e+ya*a+za*b);fe+=f;ge+=f*(xa+(xa=e));he+=f*(ya+(ya=a));ie+=f*(za+(za=b));Qc(xa,ya,za)}function Lj(){Ra.point=eg}function hp(){Ra.point=ip}function jp(){Mj(Nj,Oj);Ra.point=eg}function ip(a,b){Nj=a;Oj=b;a*=T;b*=T;Ra.point=Mj;var c=V(b);xa=c*V(a);ya=c*O(a);za=O(b);Qc(xa,ya,za)}function Mj(a,b){a*=T;b*=T;var c=V(b),e=c*V(a);a=c*O(a);b=O(b);var c=ya*b-za*a,f=za*e-xa*b,h=xa*a-ya*e,l=ma(c*c+f*f+h*h),p=Ca(l),l=l&&-p/l;fg+=l*c;gg+=l*f;hg+=l*h;fe+=p;ge+=p*(xa+(xa=e));he+=p*(ya+(ya=a));ie+=p*(za+
(za=b));Qc(xa,ya,za)}function ig(a,b){return[a>Z?a-Ba:a<-Z?a+Ba:a,b]}function gf(a,b,c){return(a%=Ba)?b||c?Yh(Pj(a),Qj(b,c)):Pj(a):b||c?Qj(b,c):ig}function Rj(a){return function(b,c){return b+=a,[b>Z?b-Ba:b<-Z?b+Ba:b,c]}}function Pj(a){var b=Rj(a);b.invert=Rj(-a);return b}function Qj(a,b){function c(a,b){var c=V(b),k=V(a)*c;a=O(a)*c;b=O(b);c=b*e+k*f;return[ta(a*h-c*l,k*e-b*f),Ca(c*h+a*l)]}var e=V(a),f=O(a),h=V(b),l=O(b);c.invert=function(a,b){var c=V(b),k=V(a)*c;a=O(a)*c;b=O(b);c=b*h-a*l;return[ta(a*
h+b*l,k*e+c*f),Ca(c*e-k*f)]};return c}function Rh(a,b,c,e,f,h){if(c){var l=V(b),p=O(b);c*=e;if(null==f)f=b+e*Ba,h=b-c/2;else if(f=Sj(l,f),h=Sj(l,h),0<e?f<h:f>h)f+=e*Ba;for(;0<e?f>h:f<h;f-=c)b=xd([l,-p*V(f),-p*O(f)]),a.point(b[0],b[1])}}function Sj(a,b){b=vb(b);b[0]-=a;Ad(b);a=wj(-b[1]);return((0>-b[2]?-a:a)+Ba-1E-6)%Ba}function Bd(a,b,c,e){this.x=a;this.z=b;this.o=c;this.e=e;this.v=!1;this.n=this.p=null}function Wh(a){if(b=a.length){for(var b,c=0,e=a[0],f;++c<b;)e.n=f=a[c],f.p=e,e=f;e.n=f=a[0];f.p=
e}}function jg(a,b,c,e){function f(f,l,k,q){var t=0,v=0;if(null==f||(t=h(f,k))!==(v=h(l,k))||0>p(f,l)^0<k){do q.point(0===t||3===t?a:c,1<t?e:b);while((t=(t+k+4)%4)!==v)}else q.point(l[0],l[1])}function h(e,f){return 1E-6>Y(e[0]-a)?0<f?0:3:1E-6>Y(e[0]-c)?0<f?2:1:1E-6>Y(e[1]-b)?0<f?1:0:0<f?3:2}function l(a,b){return p(a.x,b.x)}function p(a,b){var c=h(a,1),e=h(b,1);return c!==e?c-e:0===c?b[1]-a[1]:1===c?a[0]-b[0]:2===c?a[1]-b[1]:b[0]-a[0]}return function(h){function p(f,h){a<=f&&f<=c&&b<=h&&h<=e&&q.point(f,
h)}function k(f,h){var d=a<=f&&f<=c&&b<=h&&h<=e;D&&F.push([f,h]);if(N)I=f,J=h,u=d,N=!1,d&&(q.lineStart(),q.point(f,h));else if(d&&H)q.point(f,h);else{var k=[y=Math.max(-1E9,Math.min(1E9,y)),G=Math.max(-1E9,Math.min(1E9,G))],l=[f=Math.max(-1E9,Math.min(1E9,f)),h=Math.max(-1E9,Math.min(1E9,h))];Dm(k,l,a,b,c,e)?(H||(q.lineStart(),q.point(k[0],k[1])),q.point(l[0],l[1]),d||q.lineEnd(),P=!1):d&&(q.lineStart(),q.point(f,h),P=!1)}y=f;G=h;H=d}var q=h,t=Sh(),v,D,F,I,J,u,y,G,H,N,P,R={point:p,lineStart:function(){R.point=
k;D&&D.push(F=[]);N=!0;H=!1;y=G=NaN},lineEnd:function(){v&&(k(I,J),u&&H&&t.rejoin(),v.push(t.result()));R.point=p;H&&q.lineEnd()},polygonStart:function(){q=t;v=[];D=[];P=!0},polygonEnd:function(){for(var b,c=b=0,k=D.length;c<k;++c)for(var p=D[c],t=1,w=p.length,u=p[0],y,x,z=u[0],u=u[1];t<w;++t)y=z,x=u,u=p[t],z=u[0],u=u[1],x<=e?u>e&&(z-y)*(e-x)>(u-x)*(a-y)&&++b:u<=e&&(z-y)*(e-x)<(u-x)*(a-y)&&--b;c=P&&b;k=(v=cf(v)).length;if(c||k)h.polygonStart(),c&&(h.lineStart(),f(null,null,1,h),h.lineEnd()),k&&Uh(v,
l,b,f,h),h.polygonEnd();q=h;v=D=F=null}};return R}}function kp(){Xb.point=Xb.lineEnd=ea}function lp(a,b){a*=T;b*=T;kg=a;je=O(b);ke=V(b);Xb.point=mp}function mp(a,b){a*=T;b*=T;var c=O(b);b=V(b);var e=Y(a-kg),f=V(e),e=O(e),e=b*e,h=ke*c-je*b*f,f=je*c+ke*b*f;ef.add(ta(ma(e*e+h*h),f));kg=a;je=c;ke=b}function le(a,b){return a&&Tj.hasOwnProperty(a.type)?Tj[a.type](a,b):!1}function Uj(a,b){var c=Wb(a[0],a[1]),e=Wb(a[0],b);a=Wb(b,a[1]);return e+a<=c+1E-6}function Vj(a,b){return!!Th(a.map(np),Wj(b))}function np(a){return a=
a.map(Wj),a.pop(),a}function Wj(a){return[a[0]*T,a[1]*T]}function Xj(a,b,c){var e=Oa(a,b-1E-6,c).concat(b);return function(a){return e.map(function(b){return[a,b]})}}function Yj(a,b,c){var e=Oa(a,b-1E-6,c).concat(b);return function(a){return e.map(function(b){return[b,a]})}}function Zj(){function a(){return{type:"MultiLineString",coordinates:b()}}function b(){return Oa(me(h/t)*t,f,t).map(I).concat(Oa(me(x/z)*z,v,z).map(J)).concat(Oa(me(e/k)*k,c,k).filter(function(a){return 1E-6<Y(a%t)}).map(D)).concat(Oa(me(p/
q)*q,l,q).filter(function(a){return 1E-6<Y(a%z)}).map(F))}var c,e,f,h,l,p,v,x,k=10,q=k,t=90,z=360,D,F,I,J,u=2.5;a.lines=function(){return b().map(function(a){return{type:"LineString",coordinates:a}})};a.outline=function(){return{type:"Polygon",coordinates:[I(h).concat(J(v).slice(1),I(f).reverse().slice(1),J(x).reverse().slice(1))]}};a.extent=function(b){return arguments.length?a.extentMajor(b).extentMinor(b):a.extentMinor()};a.extentMajor=function(b){if(!arguments.length)return[[h,x],[f,v]];h=+b[0][0];
f=+b[1][0];x=+b[0][1];v=+b[1][1];h>f&&(b=h,h=f,f=b);x>v&&(b=x,x=v,v=b);return a.precision(u)};a.extentMinor=function(b){if(!arguments.length)return[[e,p],[c,l]];e=+b[0][0];c=+b[1][0];p=+b[0][1];l=+b[1][1];e>c&&(b=e,e=c,c=b);p>l&&(b=p,p=l,l=b);return a.precision(u)};a.step=function(b){return arguments.length?a.stepMajor(b).stepMinor(b):a.stepMinor()};a.stepMajor=function(b){if(!arguments.length)return[t,z];t=+b[0];z=+b[1];return a};a.stepMinor=function(b){if(!arguments.length)return[k,q];k=+b[0];q=
+b[1];return a};a.precision=function(b){if(!arguments.length)return u;u=+b;D=Xj(p,l,90);F=Yj(e,c,u);I=Xj(x,v,90);J=Yj(h,f,u);return a};return a.extentMajor([[-180,-89.999999],[180,89.999999]]).extentMinor([[-180,-80.000001],[180,80.000001]])}function op(){db.point=pp}function pp(a,b){db.point=ak;bk=lg=a;ck=mg=b}function ak(a,b){ng.add(mg*a-lg*b);lg=a;mg=b}function qp(){ak(bk,ck)}function Gb(a,b){og+=a;pg+=b;++Sc}function dk(){Ka.point=rp}function rp(a,b){Ka.point=sp;Gb(Wa=a,Xa=b)}function sp(a,b){var c=
a-Wa,e=b-Xa,c=ma(c*c+e*e);ne+=c*(Wa+a)/2;oe+=c*(Xa+b)/2;hc+=c;Gb(Wa=a,Xa=b)}function ek(){Ka.point=Gb}function tp(){Ka.point=up}function vp(){fk(gk,hk)}function up(a,b){Ka.point=fk;Gb(gk=Wa=a,hk=Xa=b)}function fk(a,b){var c=a-Wa,e=b-Xa,c=ma(c*c+e*e);ne+=c*(Wa+a)/2;oe+=c*(Xa+b)/2;hc+=c;c=Xa*a-Wa*b;qg+=c*(Wa+a);rg+=c*(Xa+b);Tc+=3*c;Gb(Wa=a,Xa=b)}function ik(a){this._context=a}function wp(a,b){Uc.point=jk;kk=Vc=a;lk=Wc=b}function jk(a,b){Vc-=a;Wc-=b;sg.add(ma(Vc*Vc+Wc*Wc));Vc=a;Wc=b}function mk(){this._string=
[]}function nk(a){return"m0,"+a+"a"+a+","+a+" 0 1,1 0,"+-2*a+"a"+a+","+a+" 0 1,1 0,"+2*a+"z"}function Am(a){return 1<a.length}function Bm(a,b){return(0>(a=a.x)[0]?a[1]-ha-1E-6:ha-a[1])-(0>(b=b.x)[0]?b[1]-ha-1E-6:ha-b[1])}function pe(a){return function(b){var c=new tg,e;for(e in a)c[e]=a[e];c.stream=b;return c}}function tg(){}function ic(a,b,c){var e=b[1][0]-b[0][0],f=b[1][1]-b[0][1],h=a.clipExtent&&a.clipExtent();a.scale(150).translate([0,0]);null!=h&&a.clipExtent(null);Na(c,a.stream(qe));var l=qe.result();
c=Math.min(e/(l[1][0]-l[0][0]),f/(l[1][1]-l[0][1]));e=+b[0][0]+(e-c*(l[1][0]+l[0][0]))/2;b=+b[0][1]+(f-c*(l[1][1]+l[0][1]))/2;null!=h&&a.clipExtent(h);return a.scale(150*c).translate([e,b])}function ym(a){return pe({point:function(b,c){b=a(b,c);this.stream.point(b[0],b[1])}})}function xm(a,b){function c(e,f,h,l,p,v,x,k,q,t,z,D,F,I){var J=x-e,u=k-f,y=J*J+u*u;if(y>4*b&&F--){var G=l+t,H=p+z,N=v+D,P=ma(G*G+H*H+N*N),R=Ca(N/=P),d=1E-6>Y(Y(N)-1)||1E-6>Y(h-q)?(h+q)/2:ta(H,G),g=a(d,R),R=g[0],g=g[1],r=R-e,
n=g-f,m=u*r-J*n;if(m*m/y>b||.3<Y((J*r+u*n)/y-.5)||l*t+p*z+v*D<xp)c(e,f,h,l,p,v,R,g,d,G/=P,H/=P,N,F,I),I.point(R,g),c(R,g,d,G,H,N,x,k,q,t,z,D,F,I)}}return function(b){function e(c,e){c=a(c,e);b.point(c[0],c[1])}function h(){u=NaN;P.point=l;b.lineStart()}function l(e,f){var d=vb([e,f]);f=a(e,f);c(u,y,J,G,H,N,u=f[0],y=f[1],J=e,G=d[0],H=d[1],N=d[2],16,b);b.point(u,y)}function p(){P.point=e;b.lineEnd()}function v(){h();P.point=x;P.lineEnd=k}function x(a,b){l(q=a,b);t=u;z=y;D=G;F=H;I=N;P.point=l}function k(){c(u,
y,J,G,H,N,t,z,q,D,F,I,16,b);P.lineEnd=p;p()}var q,t,z,D,F,I,J,u,y,G,H,N,P={point:e,lineStart:h,lineEnd:p,polygonStart:function(){b.polygonStart();P.lineStart=v},polygonEnd:function(){b.polygonEnd();P.lineStart=h}};return P}}function rb(a){return ug(function(){return a})()}function ug(a){function b(a){a=u(a[0]*T,a[1]*T);return[a[0]*p+k,q-a[1]*p]}function c(a){return(a=u.invert((a[0]-k)/p,(q-a[1])/p))&&[a[0]*ba,a[1]*ba]}function e(a,b){return a=l(a,b),[a[0]*p+k,q-a[1]*p]}function f(){u=Yh(J=gf(D,F,
I),l);var a=l(t,z);k=v-a[0]*p;q=x+a[1]*p;return h()}function h(){n=m=null;return b}var l,p=150,v=480,x=250,k,q,t=0,z=0,D=0,F=0,I=0,J,u,y=null,G=ok,H=null,N,P,R,d=wb,g=.5,r=Ph(e,g),n,m;b.stream=function(a){return n&&m===a?n:n=yp(G(J,r(d(m=a))))};b.clipAngle=function(a){return arguments.length?(G=+a?zm(y=a*T,6*T):(y=null,ok),h()):y*ba};b.clipExtent=function(a){return arguments.length?(d=null==a?(H=N=P=R=null,wb):jg(H=+a[0][0],N=+a[0][1],P=+a[1][0],R=+a[1][1]),h()):null==H?null:[[H,N],[P,R]]};b.scale=
function(a){return arguments.length?(p=+a,f()):p};b.translate=function(a){return arguments.length?(v=+a[0],x=+a[1],f()):[v,x]};b.center=function(a){return arguments.length?(t=a[0]%360*T,z=a[1]%360*T,f()):[t*ba,z*ba]};b.rotate=function(a){return arguments.length?(D=a[0]%360*T,F=a[1]%360*T,I=2<a.length?a[2]%360*T:0,f()):[D*ba,F*ba,I*ba]};b.precision=function(a){return arguments.length?(r=Ph(e,g=a*a),h()):ma(g)};b.fitExtent=function(a,c){return ic(b,a,c)};b.fitSize=function(a,c){return ic(b,[[0,0],a],
c)};return function(){l=a.apply(this,arguments);b.invert=l.invert&&c;return f()}}function af(a){var b=0,c=Z/3,e=ug(a);a=e(b,c);a.parallels=function(a){return arguments.length?e(b=a[0]*T,c=a[1]*T):[b*ba,c*ba]};return a}function zp(a){function b(a,b){return[a*c,O(b)/c]}var c=V(a);b.invert=function(a,b){return[a/c,Ca(b*c)]};return b}function Oh(a,b){function c(a,b){b=ma(h-2*f*O(b))/f;return[b*O(a*=f),l-b*V(a)]}var e=O(a),f=(e+O(b))/2;if(1E-6>Y(f))return zp(a);var h=1+e*(2*f-e),l=ma(h)/f;c.invert=function(a,
b){b=l-b;return[ta(a,Y(b))/f*Xc(b),Ca((h-(a*a+b*b)*f*f)/(2*f))]};return c}function Ap(a){var b=a.length;return{point:function(c,e){for(var f=-1;++f<b;)a[f].point(c,e)},sphere:function(){for(var c=-1;++c<b;)a[c].sphere()},lineStart:function(){for(var c=-1;++c<b;)a[c].lineStart()},lineEnd:function(){for(var c=-1;++c<b;)a[c].lineEnd()},polygonStart:function(){for(var c=-1;++c<b;)a[c].polygonStart()},polygonEnd:function(){for(var c=-1;++c<b;)a[c].polygonEnd()}}}function pk(a){return function(b,c){var e=
V(b),f=V(c),e=a(e*f);return[e*f*O(b),e*O(c)]}}function Yc(a){return function(b,c){var e=ma(b*b+c*c),f=a(e),h=O(f),f=V(f);return[ta(b*h,e*f),Ca(e&&c*h/e)]}}function Zc(a,b){return[a,re(jc((ha+b)/2))]}function qk(a){function b(){var b=Z*f(),e=c(Xh(c.rotate()).invert([0,0]));return l(null==p?[[e[0]-b,e[1]-b],[e[0]+b,e[1]+b]]:a===Zc?[[Math.max(e[0]-b,p),v],[Math.min(e[0]+b,x),k]]:[[p,Math.max(e[1]-b,v)],[x,Math.min(e[1]+b,k)]])}var c=rb(a),e=c.center,f=c.scale,h=c.translate,l=c.clipExtent,p=null,v,x,
k;c.scale=function(a){return arguments.length?(f(a),b()):f()};c.translate=function(a){return arguments.length?(h(a),b()):h()};c.center=function(a){return arguments.length?(e(a),b()):e()};c.clipExtent=function(a){return arguments.length?(null==a?p=v=x=k=null:(p=+a[0][0],v=+a[0][1],x=+a[1][0],k=+a[1][1]),b()):null==p?null:[[p,v],[x,k]]};return b()}function rk(a,b){function c(a,b){0<h?b<-ha+1E-6&&(b=-ha+1E-6):b>ha-1E-6&&(b=ha-1E-6);b=h/vg(jc((ha+b)/2),f);return[b*O(f*a),h-b*V(f*a)]}var e=V(a),f=a===
b?O(a):re(e/V(b))/re(jc((ha+b)/2)/jc((ha+a)/2)),h=e*vg(jc((ha+a)/2),f)/f;if(!f)return Zc;c.invert=function(a,b){b=h-b;var c=Xc(f)*ma(a*a+b*b);return[ta(a,Y(b))/f*Xc(b),2*kc(vg(h/c,1/f))-ha]};return c}function $c(a,b){return[a,b]}function sk(a,b){function c(a,b){b=h-b;a*=f;return[b*O(a),h-b*V(a)]}var e=V(a),f=a===b?O(a):(e-V(b))/(b-a),h=e/f+a;if(1E-6>Y(f))return $c;c.invert=function(a,b){b=h-b;return[ta(a,Y(b))/f*Xc(b),h-Xc(f)*ma(a*a+b*b)]};return c}function wg(a,b){var c=V(b),e=V(a)*c;return[c*O(a)/
e,O(b)/e]}function se(a,b,c,e){return 1===a&&1===b&&0===c&&0===e?wb:pe({point:function(f,h){this.stream.point(f*a+c,h*b+e)}})}function xg(a,b){return[V(b)*O(a),O(b)]}function yg(a,b){var c=V(b),e=1+V(a)*c;return[c*O(a)/e,O(b)/e]}function zg(a,b){return[re(jc((ha+b)/2)),-a]}function Bp(a,b){return a.parent===b.parent?1:2}function Cp(a,b){return a+b.x}function Dp(a,b){return Math.max(a,b.y)}function Ep(a){for(var b;b=a.children;)a=b[0];return a}function Fp(a){for(var b;b=a.children;)a=b[b.length-1];
return a}function Gp(a){var b=0,c=a.children,e=c&&c.length;if(e)for(;0<=--e;)b+=c[e].value;else b=1;a.value=b}function Ag(a,b){var c=new lc(a);a=+a.value&&(c.value=a.value);var e,f=[c],h,l,p,v;for(null==b&&(b=Hp);e=f.pop();)if(a&&(e.value=+e.data.value),(l=b(e.data))&&(v=l.length))for(e.children=Array(v),p=v-1;0<=p;--p)f.push(h=e.children[p]=new lc(l[p])),h.parent=e,h.depth=e.depth+1;return c.eachBefore(tk)}function Hp(a){return a.children}function Ip(a){a.data=a.data.data}function tk(a){var b=0;
do a.height=b;while((a=a.parent)&&a.height<++b)}function lc(a){this.data=a;this.depth=this.height=0;this.parent=null}function wm(a){this._=a;this.next=null}function Mh(a,b){var c=null,e=a.head;switch(b.length){case 1:var f=b[0];f={x:f.x,y:f.y,r:f.r};break;case 2:var h=b[0];var l=b[1];f=h.x;var p=h.y;h=h.r;var v=l.x,x=l.y,l=l.r,k=v-f,q=x-p,t=l-h,z=Math.sqrt(k*k+q*q);f={x:(f+v+k/z*t)/2,y:(p+x+q/z*t)/2,r:(z+h+l)/2};break;case 3:h=b[0];x=b[1];v=b[2];f=h.x;p=h.y;h=h.r;var q=x.x,t=x.y,D=x.r,k=v.x,z=v.y,
F=v.r,v=2*(f-q),l=2*(p-t),x=2*(D-h),D=f*f+p*p-h*h-q*q-t*t+D*D,q=2*(f-k),I=2*(p-z),t=2*(F-h),F=f*f+p*p-h*h-k*k-z*z+F*F,z=q*l-v*I,k=(l*F-I*D)/z-f,l=(I*x-l*t)/z,D=(q*D-v*F)/z-p,v=(v*t-q*x)/z,x=l*l+v*v-1,q=2*(k*l+D*v+h);h=(-q-Math.sqrt(q*q-4*x*(k*k+D*D-h*h)))/(2*x);f={x:k+l*h+f,y:D+v*h+p,r:h}}for(;e;)h=e._,p=e.next,(v=!f)||(v=h.x-f.x,x=h.y-f.y,l=f.r-h.r,v=!(l*l+1E-6>v*v+x*x)),v?(c?(a.tail=c,c.next=null):a.head=a.tail=null,b.push(h),f=Mh(a,b),b.pop(),a.head?(e.next=a.head,a.head=e):(e.next=null,a.head=
a.tail=e),c=a.tail,c.next=p):c=e,e=p;a.tail=c;return f}function uk(a,b,c){var e=a.x,f=a.y,h=b.r+c.r;a=a.r+c.r;var l=b.x-e;b=b.y-f;var p=l*l+b*b;if(p){var v=.5+((a*=a)-(h*=h))/(2*p),h=Math.sqrt(Math.max(0,2*h*(a+p)-(a-=p)*a-h*h))/(2*p);c.x=e+v*l+h*b;c.y=f+v*b-h*l}else c.x=e+a,c.y=f}function vk(a,b){var c=b.x-a.x,e=b.y-a.y;a=a.r+b.r;return a*a-1E-6>c*c+e*e}function wk(a,b,c){var e=a._;a=a.next._;var f=e.r+a.r;b=(e.x*a.r+a.x*e.r)/f-b;c=(e.y*a.r+a.y*e.r)/f-c;return b*b+c*c}function te(a){this._=a;this.previous=
this.next=null}function xk(a){if(!(c=a.length))return 0;var b,c;var e=a[0];e.x=0;e.y=0;if(!(1<c))return e.r;var f=a[1];e.x=-f.r;f.x=e.r;f.y=0;if(!(2<c))return e.r+f.r;uk(f,e,b=a[2]);var h=e.r*e.r,l=f.r*f.r,p=b.r*b.r,v=h+l+p,x=h*e.x+l*f.x+p*b.x,l=h*e.y+l*f.y+p*b.y;e=new te(e);f=new te(f);b=new te(b);e.next=b.previous=f;f.next=e.previous=b;b.next=f.previous=e;var k=3;a:for(;k<c;++k){uk(e._,f._,b=a[k]);b=new te(b);h=f.next;p=e.previous;var q=f._.r;var t=e._.r;do if(q<=t){if(vk(h._,b._)){f=h;e.next=f;
f.previous=e;--k;continue a}q+=h._.r;h=h.next}else{if(vk(p._,b._)){e=p;e.next=f;f.previous=e;--k;continue a}t+=p._.r;p=p.previous}while(h!==p.next);b.previous=e;b.next=f;e.next=f.previous=f=b;v+=p=b._.r*b._.r;x+=p*b._.x;l+=p*b._.y;for(h=wk(e,q=x/v,t=l/v);(b=b.next)!==f;)(p=wk(b,q,t))<h&&(e=b,h=p);f=e.next}e=[f._];for(b=f;(b=b.next)!==f;)e.push(b._);b=Lh(e);for(k=0;k<c;++k)e=a[k],e.x-=b.x,e.y-=b.y;return b.r}function ue(a){if("function"!==typeof a)throw Error();return a}function Hb(){return 0}function Jp(a){return Math.sqrt(a.value)}
function yk(a){return function(b){b.children||(b.r=Math.max(0,+a(b)||0))}}function Bg(a,b){return function(c){var e;if(e=c.children){var f,h=e.length,l=a(c)*b||0;if(l)for(f=0;f<h;++f)e[f].r+=l;var p=xk(e);if(l)for(f=0;f<h;++f)e[f].r-=l;c.r=p+l}}}function zk(a){return function(b){var c=b.parent;b.r*=a;c&&(b.x=c.x+a*b.x,b.y=c.y+a*b.y)}}function Kp(a){return a.id}function Lp(a){return a.parentId}function Mp(a,b){return a.parent===b.parent?1:2}function Cg(a){var b=a.children;return b?b[0]:a.t}function Dg(a){var b=
a.children;return b?b[b.length-1]:a.t}function ve(a,b){this._=a;this.A=this.children=this.parent=null;this.a=this;this.s=this.c=this.m=this.z=0;this.t=null;this.i=b}function Np(a){a=new ve(a,0);for(var b,c=[a],e,f,h;b=c.pop();)if(f=b._.children)for(b.children=Array(e=f.length),h=e-1;0<=h;--h)c.push(e=b.children[h]=new ve(f[h],h)),e.parent=b;(a.parent=new ve(null,0)).children=[a];return a}function Ak(a,b,c,e,f,h){for(var l=[],p=b.children,v,x,k=v=0,q=p.length,t,z=b.value,D,F,I,J,u,y;v<q;){b=f-c;t=
h-e;do D=p[k++].value;while(!D&&k<q);F=I=D;y=Math.max(t/b,b/t)/(z*a);J=D*D*y;for(u=Math.max(I/J,J/F);k<q;++k){D+=x=p[k].value;x<F&&(F=x);x>I&&(I=x);J=D*D*y;J=Math.max(I/J,J/F);if(J>u){D-=x;break}u=J}l.push(v={value:D,dice:b<t,children:p.slice(v,k)});v.dice?xc(v,c,e,f,z?e+=t*D/z:h):td(v,c,e,z?c+=b*D/z:f,h);z-=D;v=k}return l}function Op(a,b){return a[0]-b[0]||a[1]-b[1]}function Bk(a){for(var b=a.length,c=[0,1],e=2,f=2;f<b;++f){for(;1<e&&0>=vm(a[c[e-2]],a[c[e-1]],a[f]);)--e;c[e++]=f}return c.slice(0,
e)}function Eg(a){this._size=a;this._call=this._error=null;this._tasks=[];this._data=[];this._waiting=this._active=this._ended=this._start=0}function Ck(a){if(!a._start)try{for(;a._start=a._waiting&&a._active<a._size;){var b=a._ended+a._active,c=a._tasks[b],e=c.length-1,f=c[e];c[e]=Pp(a,b);--a._waiting;++a._active;c=f.apply(null,c);a._tasks[b]&&(a._tasks[b]=c||Qp)}}catch(h){if(a._tasks[a._ended+a._active-1])Fg(a,h);else if(!a._data)throw h;}}function Pp(a,b){return function(c,e){a._tasks[b]&&(--a._active,
++a._ended,a._tasks[b]=null,null==a._error&&(null!=c?Fg(a,c):(a._data[b]=e,a._waiting?Ck(a):we(a))))}}function Fg(a,b){var c=a._tasks.length;a._error=b;a._data=void 0;for(a._waiting=NaN;0<=--c;)if(b=a._tasks[c])if(a._tasks[c]=null,b.abort)try{b.abort()}catch(e){}a._active=NaN;we(a)}function we(a){if(!a._active&&a._call){var b=a._data;a._data=void 0;a._call(a._error,b)}}function Dk(a){if(null==a)a=Infinity;else if(!(1<=(a=+a)))throw Error("invalid concurrency");return new Eg(a)}function um(a){return function(b,
c){a(null==b?c:null)}}function tm(a,b){return function(c){return a(c.responseText,b)}}function Gg(a){function b(b){var h=b+"",p=c.get(h);if(!p){if(f!==Hg)return f;c.set(h,p=e.push(b))}return a[(p-1)%a.length]}var c=Sa(),e=[],f=Hg;a=null==a?[]:sb.call(a);b.domain=function(a){if(!arguments.length)return e.slice();e=[];c=Sa();for(var f=-1,h=a.length,v,x;++f<h;)c.has(x=(v=a[f])+"")||c.set(x,e.push(v));return b};b.range=function(c){return arguments.length?(a=sb.call(c),b):a.slice()};b.unknown=function(a){return arguments.length?
(f=a,b):f};b.copy=function(){return Gg().domain(e).range(a).unknown(f)};return b}function Ig(){function a(){var a=c().length,b=f[1]<f[0],z=f[b-0],D=f[1-b];h=(D-z)/Math.max(1,a-v+2*x);p&&(h=Math.floor(h));z+=(D-z-h*(a-v))*k;l=h*(1-v);p&&(z=Math.round(z),l=Math.round(l));a=Oa(a).map(function(a){return z+h*a});return e(b?a.reverse():a)}var b=Gg().unknown(void 0),c=b.domain,e=b.range,f=[0,1],h,l,p=!1,v=0,x=0,k=.5;delete b.unknown;b.domain=function(b){return arguments.length?(c(b),a()):c()};b.range=function(b){return arguments.length?
(f=[+b[0],+b[1]],a()):f.slice()};b.rangeRound=function(b){return f=[+b[0],+b[1]],p=!0,a()};b.bandwidth=function(){return l};b.step=function(){return h};b.round=function(b){return arguments.length?(p=!!b,a()):p};b.padding=function(b){return arguments.length?(v=x=Math.max(0,Math.min(1,b)),a()):v};b.paddingInner=function(b){return arguments.length?(v=Math.max(0,Math.min(1,b)),a()):v};b.paddingOuter=function(b){return arguments.length?(x=Math.max(0,Math.min(1,b)),a()):x};b.align=function(b){return arguments.length?
(k=Math.max(0,Math.min(1,b)),a()):k};b.copy=function(){return Ig().domain(c()).range(f).round(p).paddingInner(v).paddingOuter(x).align(k)};return a()}function Ek(a){var b=a.copy;a.padding=a.paddingOuter;delete a.paddingInner;delete a.paddingOuter;a.copy=function(){return Ek(b())};return a}function Jg(a,b){return(b-=a=+a)?function(c){return(c-a)/b}:Ze(b)}function Rp(a){return function(b,c){var e=a(b=+b,c=+c);return function(a){return a<=b?0:a>=c?1:e(a)}}}function Sp(a){return function(b,c){var e=a(b=
+b,c=+c);return function(a){return 0>=a?b:1<=a?c:e(a)}}}function Tp(a,b,c,e){var f=a[0];a=a[1];var h=b[0];b=b[1];a<f?(f=c(a,f),h=e(b,h)):(f=c(f,a),h=e(h,b));return function(a){return h(f(a))}}function Up(a,b,c,e){var f=Math.min(a.length,b.length)-1,h=Array(f),l=Array(f),p=-1;a[f]<a[0]&&(a=a.slice().reverse(),b=b.slice().reverse());for(;++p<f;)h[p]=c(a[p],a[p+1]),l[p]=e(b[p],b[p+1]);return function(b){var c=Ib(a,b,1,f)-1;return l[c](h[c](b))}}function xe(a,b){return b.domain(a.domain()).range(a.range()).interpolate(a.interpolate()).clamp(a.clamp())}
function ye(a,b){function c(){v=2<Math.min(f.length,h.length)?Up:Tp;x=k=null;return e}function e(b){return(x||(x=v(f,h,p?Rp(a):a,l)))(+b)}var f=Fk,h=Fk,l=Cc,p=!1,v,x,k;e.invert=function(a){return(k||(k=v(h,f,Jg,p?Sp(b):b)))(+a)};e.domain=function(a){return arguments.length?(f=Kg.call(a,Ih),c()):f.slice()};e.range=function(a){return arguments.length?(h=sb.call(a),c()):h.slice()};e.rangeRound=function(a){return h=sb.call(a),l=pi,c()};e.clamp=function(a){return arguments.length?(p=!!a,c()):p};e.interpolate=
function(a){return arguments.length?(l=a,c()):l};return c()}function ad(a){var b=a.domain;a.ticks=function(a){var c=b();return vf(c[0],c[c.length-1],null==a?10:a)};a.tickFormat=function(a,e){var c;a:{var h=b(),l=h[0],h=h[h.length-1];a=Gc(l,h,null==a?10:a);e=yc(null==e?",f":e);switch(e.type){case "s":l=Math.max(Math.abs(l),Math.abs(h));null!=e.precision||isNaN(c=ai(a,l))||(e.precision=c);c=d3.formatPrefix(e,l);break a;case "":case "e":case "g":case "p":case "r":null!=e.precision||isNaN(c=$h(a,Math.max(Math.abs(l),
Math.abs(h))))||(e.precision=c-("e"===e.type));break;case "f":case "%":null!=e.precision||isNaN(c=bi(a))||(e.precision=c-2*("%"===e.type))}c=d3.format(e)}return c};a.nice=function(c){null==c&&(c=10);var e=b(),f=0,h=e.length-1,l=e[f],p=e[h];if(p<l){var v=l;l=p;p=v;v=f;f=h;h=v}v=Fc(l,p,c);0<v?(l=Math.floor(l/v)*v,p=Math.ceil(p/v)*v,v=Fc(l,p,c)):0>v&&(l=Math.ceil(l*v)/v,p=Math.floor(p*v)/v,v=Fc(l,p,c));0<v?(e[f]=Math.floor(l/v)*v,e[h]=Math.ceil(p/v)*v,b(e)):0>v&&(e[f]=Math.ceil(l*v)/v,e[h]=Math.floor(p*
v)/v,b(e));return a};return a}function Gk(){var a=ye(Jg,Da);a.copy=function(){return xe(a,Gk())};return ad(a)}function Hk(){function a(a){return+a}var b=[0,1];a.invert=a;a.domain=a.range=function(c){return arguments.length?(b=Kg.call(c,Ih),a):b.slice()};a.copy=function(){return Hk().domain(b)};return ad(a)}function Vp(a,b){return(b=Math.log(b/a))?function(c){return Math.log(c/a)/b}:Ze(b)}function Wp(a,b){return 0>a?function(c){return-Math.pow(-b,c)*Math.pow(-a,1-c)}:function(c){return Math.pow(b,
c)*Math.pow(a,1-c)}}function Xp(a){return isFinite(a)?+("1e"+a):0>a?0:a}function Ik(a){return 10===a?Xp:a===Math.E?Math.exp:function(b){return Math.pow(a,b)}}function Jk(a){return a===Math.E?Math.log:10===a&&Math.log10||2===a&&Math.log2||(a=Math.log(a),function(b){return Math.log(b)/a})}function Kk(a){return function(b){return-a(-b)}}function Lk(){function a(){f=Jk(e);h=Ik(e);0>c()[0]&&(f=Kk(f),h=Kk(h));return b}var b=ye(Vp,Wp).domain([1,10]),c=b.domain,e=10,f=Jk(10),h=Ik(10);b.base=function(b){return arguments.length?
(e=+b,a()):e};b.domain=function(b){return arguments.length?(c(b),a()):c()};b.ticks=function(a){var b=c(),l=b[0],b=b[b.length-1],x;if(x=b<l)k=l,l=b,b=k;var k=f(l),q=f(b);var t=null==a?10:+a;a=[];if(!(e%1)&&q-k<t)if(k=Math.round(k)-1,q=Math.round(q)+1,0<l)for(;k<q;++k){var z=1;for(t=h(k);z<e;++z){var D=t*z;if(!(D<l)){if(D>b)break;a.push(D)}}}else for(;k<q;++k)for(z=e-1,t=h(k);1<=z;--z){if(D=t*z,!(D<l)){if(D>b)break;a.push(D)}}else a=vf(k,q,Math.min(q-k,t)).map(h);return x?a.reverse():a};b.tickFormat=
function(a,c){null==c&&(c=10===e?".0e":",");"function"!==typeof c&&(c=d3.format(c));if(Infinity===a)return c;null==a&&(a=10);var l=Math.max(1,e*a/b.ticks().length);return function(a){var b=a/h(Math.round(f(a)));b*e<e-.5&&(b*=e);return b<=l?c(a):""}};b.nice=function(){return c(Hh(c(),{floor:function(a){return h(Math.floor(f(a)))},ceil:function(a){return h(Math.ceil(f(a)))}}))};b.copy=function(){return xe(b,Lk().base(e))};return b}function mc(a,b){return 0>a?-Math.pow(-a,b):Math.pow(a,b)}function Lg(){var a=
1,b=ye(function(b,c){return(c=mc(c,a)-(b=mc(b,a)))?function(e){return(mc(e,a)-b)/c}:Ze(c)},function(b,c){c=mc(c,a)-(b=mc(b,a));return function(e){return mc(b+c*e,1/a)}}),c=b.domain;b.exponent=function(b){return arguments.length?(a=+b,c(c())):a};b.copy=function(){return xe(b,Lg().exponent(a))};return ad(b)}function Mk(){function a(){var a=0,l=Math.max(1,e.length);for(f=Array(l-1);++a<l;)f[a-1]=Ec(c,a/l);return b}function b(a){if(!isNaN(a=+a))return e[Ib(f,a)]}var c=[],e=[],f=[];b.invertExtent=function(a){a=
e.indexOf(a);return 0>a?[NaN,NaN]:[0<a?f[a-1]:c[0],a<f.length?f[a]:c[c.length-1]]};b.domain=function(b){if(!arguments.length)return c.slice();c=[];for(var e=0,f=b.length,h;e<f;++e)(h=b[e],null==h||isNaN(h=+h))||c.push(h);c.sort(yb);return a()};b.range=function(b){return arguments.length?(e=sb.call(b),a()):e.slice()};b.quantiles=function(){return f.slice()};b.copy=function(){return Mk().domain(c).range(e)};return b}function Nk(){function a(a){if(a<=a)return l[Ib(h,a,0,f)]}function b(){var b=-1;for(h=
Array(f);++b<f;)h[b]=((b+1)*e-(b-f)*c)/(f+1);return a}var c=0,e=1,f=1,h=[.5],l=[0,1];a.domain=function(a){return arguments.length?(c=+a[0],e=+a[1],b()):[c,e]};a.range=function(a){return arguments.length?(f=(l=sb.call(a)).length-1,b()):l.slice()};a.invertExtent=function(a){a=l.indexOf(a);return 0>a?[NaN,NaN]:1>a?[c,h[0]]:a>=f?[h[f-1],e]:[h[a-1],h[a]]};a.copy=function(){return Nk().domain([c,e]).range(l)};return ad(a)}function Ok(){function a(a){if(a<=a)return c[Ib(b,a,0,e)]}var b=[.5],c=[0,1],e=1;
a.domain=function(f){return arguments.length?(b=sb.call(f),e=Math.min(b.length,c.length-1),a):b.slice()};a.range=function(f){return arguments.length?(c=sb.call(f),e=Math.min(b.length,c.length-1),a):c.slice()};a.invertExtent=function(a){a=c.indexOf(a);return[b[a-1],b[a]]};a.copy=function(){return Ok().domain(b).range(c)};return a}function oa(a,b,c,e){function f(b){return a(b=new Date(+b)),b}f.floor=f;f.ceil=function(c){return a(c=new Date(c-1)),b(c,1),a(c),c};f.round=function(a){var b=f(a),c=f.ceil(a);
return a-b<c-a?b:c};f.offset=function(a,c){return b(a=new Date(+a),null==c?1:Math.floor(c)),a};f.range=function(c,e,p){var h=[];c=f.ceil(c);p=null==p?1:Math.floor(p);if(!(c<e&&0<p))return h;do h.push(new Date(+c));while(b(c,p),a(c),c<e);return h};f.filter=function(c){return oa(function(b){if(b>=b)for(;a(b),!c(b);)b.setTime(b-1)},function(a,e){if(a>=a)for(;0<=--e;)for(;b(a,1),!c(a););})};c&&(f.count=function(b,e){Mg.setTime(+b);Ng.setTime(+e);a(Mg);a(Ng);return Math.floor(c(Mg,Ng))},f.every=function(a){a=
Math.floor(a);return isFinite(a)&&0<a?1<a?f.filter(e?function(b){return 0===e(b)%a}:function(b){return 0===f.count(0,b)%a}):f:null});return f}function Jb(a){return oa(function(b){b.setDate(b.getDate()-(b.getDay()+7-a)%7);b.setHours(0,0,0,0)},function(a,c){a.setDate(a.getDate()+7*c)},function(a,c){return(c-a-6E4*(c.getTimezoneOffset()-a.getTimezoneOffset()))/6048E5})}function Kb(a){return oa(function(b){b.setUTCDate(b.getUTCDate()-(b.getUTCDay()+7-a)%7);b.setUTCHours(0,0,0,0)},function(a,c){a.setUTCDate(a.getUTCDate()+
7*c)},function(a,c){return(c-a)/6048E5})}function Yp(a){if(0<=a.y&&100>a.y){var b=new Date(-1,a.m,a.d,a.H,a.M,a.S,a.L);b.setFullYear(a.y);return b}return new Date(a.y,a.m,a.d,a.H,a.M,a.S,a.L)}function Og(a){if(0<=a.y&&100>a.y){var b=new Date(Date.UTC(-1,a.m,a.d,a.H,a.M,a.S,a.L));b.setUTCFullYear(a.y);return b}return new Date(Date.UTC(a.y,a.m,a.d,a.H,a.M,a.S,a.L))}function Pg(a){return{y:a,m:0,d:1,H:0,M:0,S:0,L:0}}function Pk(a){function b(a,b){return function(c){var e=[],f=-1,d=0,h=a.length,k,l;for(c instanceof
Date||(c=new Date(+c));++f<h;)if(37===a.charCodeAt(f)){e.push(a.slice(d,f));null!=(d=Qk[k=a.charAt(++f)])?k=a.charAt(++f):d="e"===k?" ":"0";if(l=b[k])k=l(c,d);e.push(k);d=f+1}e.push(a.slice(d,f));return e.join("")}}function c(a,b){return function(c){var f=Pg(1900);if(e(f,a,c+="",0)!=c.length)return null;"p"in f&&(f.H=f.H%12+12*f.p);if("W"in f||"U"in f)"w"in f||(f.w="W"in f?1:0),c="Z"in f?Og(Pg(f.y)).getUTCDay():b(Pg(f.y)).getDay(),f.m=0,f.d="W"in f?(f.w+6)%7+7*f.W-(c+5)%7:f.w+7*f.U-(c+6)%7;return"Z"in
f?(f.H+=f.Z/100|0,f.M+=f.Z%100,Og(f)):b(f)}}function e(a,b,c,e){for(var f=0,d=b.length,h=c.length,k;f<d;){if(e>=h)return-1;k=b.charCodeAt(f++);if(37===k){if(k=b.charAt(f++),k=R[k in Qk?b.charAt(f++):k],!k||0>(e=k(a,c,e)))return-1}else if(k!=c.charCodeAt(e++))return-1}return e}var f=a.dateTime,h=a.date,l=a.time,p=a.periods,v=a.days,x=a.shortDays,k=a.months,q=a.shortMonths,t=bd(p),z=cd(p),D=bd(v),F=cd(v),I=bd(x),J=cd(x),u=bd(k),y=cd(k),G=bd(q),H=cd(q),N={a:function(a){return x[a.getDay()]},A:function(a){return v[a.getDay()]},
b:function(a){return q[a.getMonth()]},B:function(a){return k[a.getMonth()]},c:null,d:Rk,e:Rk,H:Zp,I:$p,j:aq,L:bq,m:cq,M:dq,p:function(a){return p[+(12<=a.getHours())]},S:eq,U:fq,w:gq,W:hq,x:null,X:null,y:iq,Y:jq,Z:kq,"%":Sk},P={a:function(a){return x[a.getUTCDay()]},A:function(a){return v[a.getUTCDay()]},b:function(a){return q[a.getUTCMonth()]},B:function(a){return k[a.getUTCMonth()]},c:null,d:Tk,e:Tk,H:lq,I:mq,j:nq,L:oq,m:pq,M:qq,p:function(a){return p[+(12<=a.getUTCHours())]},S:rq,U:sq,w:tq,W:uq,
x:null,X:null,y:vq,Y:wq,Z:xq,"%":Sk},R={a:function(a,b,c){return(b=I.exec(b.slice(c)))?(a.w=J[b[0].toLowerCase()],c+b[0].length):-1},A:function(a,b,c){return(b=D.exec(b.slice(c)))?(a.w=F[b[0].toLowerCase()],c+b[0].length):-1},b:function(a,b,c){return(b=G.exec(b.slice(c)))?(a.m=H[b[0].toLowerCase()],c+b[0].length):-1},B:function(a,b,c){return(b=u.exec(b.slice(c)))?(a.m=y[b[0].toLowerCase()],c+b[0].length):-1},c:function(a,b,c){return e(a,f,b,c)},d:Uk,e:Uk,H:Vk,I:Vk,j:yq,L:zq,m:Aq,M:Bq,p:function(a,
b,c){return(b=t.exec(b.slice(c)))?(a.p=z[b[0].toLowerCase()],c+b[0].length):-1},S:Cq,U:Dq,w:Eq,W:Fq,x:function(a,b,c){return e(a,h,b,c)},X:function(a,b,c){return e(a,l,b,c)},y:Gq,Y:Hq,Z:Iq,"%":Jq};N.x=b(h,N);N.X=b(l,N);N.c=b(f,N);P.x=b(h,P);P.X=b(l,P);P.c=b(f,P);return{format:function(a){var c=b(a+="",N);c.toString=function(){return a};return c},parse:function(a){var b=c(a+="",Yp);b.toString=function(){return a};return b},utcFormat:function(a){var c=b(a+="",P);c.toString=function(){return a};return c},
utcParse:function(a){var b=c(a,Og);b.toString=function(){return a};return b}}}function ca(a,b,c){var e=0>a?"-":"";a=(e?-a:a)+"";var f=a.length;return e+(f<c?Array(c-f+1).join(b)+a:a)}function Kq(a){return a.replace(Lq,"\\$&")}function bd(a){return new RegExp("^(?:"+a.map(Kq).join("|")+")","i")}function cd(a){for(var b={},c=-1,e=a.length;++c<e;)b[a[c].toLowerCase()]=c;return b}function Eq(a,b,c){return(b=La.exec(b.slice(c,c+1)))?(a.w=+b[0],c+b[0].length):-1}function Dq(a,b,c){return(b=La.exec(b.slice(c)))?
(a.U=+b[0],c+b[0].length):-1}function Fq(a,b,c){return(b=La.exec(b.slice(c)))?(a.W=+b[0],c+b[0].length):-1}function Hq(a,b,c){return(b=La.exec(b.slice(c,c+4)))?(a.y=+b[0],c+b[0].length):-1}function Gq(a,b,c){return(b=La.exec(b.slice(c,c+2)))?(a.y=+b[0]+(68<+b[0]?1900:2E3),c+b[0].length):-1}function Iq(a,b,c){return(b=/^(Z)|([+-]\d\d)(?:\:?(\d\d))?/.exec(b.slice(c,c+6)))?(a.Z=b[1]?0:-(b[2]+(b[3]||"00")),c+b[0].length):-1}function Aq(a,b,c){return(b=La.exec(b.slice(c,c+2)))?(a.m=b[0]-1,c+b[0].length):
-1}function Uk(a,b,c){return(b=La.exec(b.slice(c,c+2)))?(a.d=+b[0],c+b[0].length):-1}function yq(a,b,c){return(b=La.exec(b.slice(c,c+3)))?(a.m=0,a.d=+b[0],c+b[0].length):-1}function Vk(a,b,c){return(b=La.exec(b.slice(c,c+2)))?(a.H=+b[0],c+b[0].length):-1}function Bq(a,b,c){return(b=La.exec(b.slice(c,c+2)))?(a.M=+b[0],c+b[0].length):-1}function Cq(a,b,c){return(b=La.exec(b.slice(c,c+2)))?(a.S=+b[0],c+b[0].length):-1}function zq(a,b,c){return(b=La.exec(b.slice(c,c+3)))?(a.L=+b[0],c+b[0].length):-1}
function Jq(a,b,c){return(a=Mq.exec(b.slice(c,c+1)))?c+a[0].length:-1}function Rk(a,b){return ca(a.getDate(),b,2)}function Zp(a,b){return ca(a.getHours(),b,2)}function $p(a,b){return ca(a.getHours()%12||12,b,2)}function aq(a,b){return ca(1+ze.count(Lb(a),a),b,3)}function bq(a,b){return ca(a.getMilliseconds(),b,3)}function cq(a,b){return ca(a.getMonth()+1,b,2)}function dq(a,b){return ca(a.getMinutes(),b,2)}function eq(a,b){return ca(a.getSeconds(),b,2)}function fq(a,b){return ca(dd.count(Lb(a),a),
b,2)}function gq(a){return a.getDay()}function hq(a,b){return ca(Qg.count(Lb(a),a),b,2)}function iq(a,b){return ca(a.getFullYear()%100,b,2)}function jq(a,b){return ca(a.getFullYear()%1E4,b,4)}function kq(a){a=a.getTimezoneOffset();return(0<a?"-":(a*=-1,"+"))+ca(a/60|0,"0",2)+ca(a%60,"0",2)}function Tk(a,b){return ca(a.getUTCDate(),b,2)}function lq(a,b){return ca(a.getUTCHours(),b,2)}function mq(a,b){return ca(a.getUTCHours()%12||12,b,2)}function nq(a,b){return ca(1+Ae.count(Mb(a),a),b,3)}function oq(a,
b){return ca(a.getUTCMilliseconds(),b,3)}function pq(a,b){return ca(a.getUTCMonth()+1,b,2)}function qq(a,b){return ca(a.getUTCMinutes(),b,2)}function rq(a,b){return ca(a.getUTCSeconds(),b,2)}function sq(a,b){return ca(ed.count(Mb(a),a),b,2)}function tq(a){return a.getUTCDay()}function uq(a,b){return ca(Rg.count(Mb(a),a),b,2)}function vq(a,b){return ca(a.getUTCFullYear()%100,b,2)}function wq(a,b){return ca(a.getUTCFullYear()%1E4,b,4)}function xq(){return"+0000"}function Sk(){return"%"}function Wk(a){nc=
Pk(a);d3.timeFormat=nc.format;d3.timeParse=nc.parse;d3.utcFormat=nc.utcFormat;d3.utcParse=nc.utcParse;return nc}function Nq(a){return a.toISOString()}function Oq(a){a=new Date(a);return isNaN(a)?null:a}function Pq(a){return new Date(a)}function Qq(a){return a instanceof Date?+a:+new Date(+a)}function Sg(a,b,c,e,f,h,l,p,v){function x(k){return(l(k)<k?D:h(k)<k?F:f(k)<k?I:e(k)<k?J:b(k)<k?c(k)<k?u:y:a(k)<k?G:H)(k)}function k(b,c,e,f){null==b&&(b=10);if("number"===typeof b){f=Math.abs(e-c)/b;var d=wf(function(a){return a[2]}).right(N,
f);d===N.length?(f=Gc(c/Tg,e/Tg,b),b=a):d?(d=N[f/N[d-1][2]<N[d][2]/f?d-1:d],f=d[1],b=d[0]):(f=Gc(c,e,b),b=p)}return null==f?b:b.every(f)}var q=ye(Jg,Da),t=q.invert,z=q.domain,D=v(".%L"),F=v(":%S"),I=v("%I:%M"),J=v("%I %p"),u=v("%a %d"),y=v("%b %d"),G=v("%B"),H=v("%Y"),N=[[l,1,1E3],[l,5,5E3],[l,15,15E3],[l,30,3E4],[h,1,6E4],[h,5,3E5],[h,15,9E5],[h,30,18E5],[f,1,36E5],[f,3,108E5],[f,6,216E5],[f,12,432E5],[e,1,864E5],[e,2,1728E5],[c,1,Rq],[b,1,Xk],[b,3,3*Xk],[a,1,Tg]];q.invert=function(a){return new Date(t(a))};
q.domain=function(a){return arguments.length?z(Kg.call(a,Qq)):z().map(Pq)};q.ticks=function(a,b){var c=z(),e=c[0],c=c[c.length-1],f=c<e;if(f){var h=e;e=c;c=h}h=(h=k(a,e,c,b))?h.range(e,c+1):[];return f?h.reverse():h};q.tickFormat=function(a,b){return null==b?x:v(b)};q.nice=function(a,b){var c=z();return(a=k(a,c[0],c[c.length-1],b))?z(Hh(c,a)):q};q.copy=function(){return xe(q,Sg(a,b,c,e,f,h,l,p,v))};return q}function Be(a){var b=a.length;return function(c){return a[Math.max(0,Math.min(b-1,Math.floor(c*
b)))]}}function Yk(a){function b(b){b=(b-c)/(e-c);return a(f?Math.max(0,Math.min(1,b)):b)}var c=0,e=1,f=!1;b.domain=function(a){return arguments.length?(c=+a[0],e=+a[1],b):[c,e]};b.clamp=function(a){return arguments.length?(f=!!a,b):f};b.interpolator=function(c){return arguments.length?(a=c,b):a};b.copy=function(){return Yk(a).domain([c,e]).clamp(f)};return ad(b)}function Zk(a){return 1<=a?Ce:-1>=a?-Ce:Math.asin(a)}function Sq(a){return a.innerRadius}function Tq(a){return a.outerRadius}function Uq(a){return a.startAngle}
function Vq(a){return a.endAngle}function Wq(a){return a&&a.padAngle}function De(a,b,c,e,f,h,l){var p=a-c,v=b-e;l=(l?h:-h)/oc(p*p+v*v);var v=l*v,p=-l*p,x=a+v,k=b+p,q=c+v,t=e+p;c=(x+q)/2;e=(k+t)/2;b=q-x;a=t-k;l=b*b+a*a;h=f-h;var t=x*t-q*k,z=(0>a?-1:1)*oc(Xq(0,h*h*l-t*t)),x=(t*a-b*z)/l,k=(-t*b-a*z)/l,q=(t*a+b*z)/l;b=(-t*b+a*z)/l;a=x-c;l=k-e;c=q-c;e=b-e;a*a+l*l>c*c+e*e&&(x=q,k=b);return{cx:x,cy:k,x01:-v,y01:-p,x11:x*(f/h-1),y11:k*(f/h-1)}}function Gh(a){this._context=a}function Xe(a){return a[0]}function Ye(a){return a[1]}
function $k(a){this._curve=a}function Ug(a){function b(b){return new $k(a(b))}b._curve=a;return b}function fd(a){var b=a.curve;a.angle=a.x;delete a.x;a.radius=a.y;delete a.y;a.curve=function(a){return arguments.length?b(Ug(a)):b()._curve};return a}function Yq(a){return a.source}function Zq(a){return a.target}function Vg(a){function b(){var b,v=Wg.call(arguments),x=c.apply(this,v),k=e.apply(this,v);l||(l=b=gb());a(l,+f.apply(this,(v[0]=x,v)),+h.apply(this,v),+f.apply(this,(v[0]=k,v)),+h.apply(this,
v));if(b)return l=null,b+""||null}var c=Yq,e=Zq,f=Xe,h=Ye,l=null;b.source=function(a){return arguments.length?(c=a,b):c};b.target=function(a){return arguments.length?(e=a,b):e};b.x=function(a){return arguments.length?(f="function"===typeof a?a:X(+a),b):f};b.y=function(a){return arguments.length?(h="function"===typeof a?a:X(+a),b):h};b.context=function(a){return arguments.length?(l=null==a?null:a,b):l};return b}function $q(a,b,c,e,f){a.moveTo(b,c);a.bezierCurveTo(b=(b+e)/2,c,b,f,e,f)}function ar(a,
b,c,e,f){a.moveTo(b,c);a.bezierCurveTo(b,c=(c+f)/2,e,c,e,f)}function br(a,b,c,e,f){var h=qd(b,c);b=qd(b,c=(c+f)/2);c=qd(e,c);e=qd(e,f);a.moveTo(h[0],h[1]);a.bezierCurveTo(b[0],b[1],c[0],c[1],e[0],e[1])}function Ee(a,b,c){a._context.bezierCurveTo((2*a._x0+a._x1)/3,(2*a._y0+a._y1)/3,(a._x0+2*a._x1)/3,(a._y0+2*a._y1)/3,(a._x0+4*a._x1+b)/6,(a._y0+4*a._y1+c)/6)}function Fe(a){this._context=a}function al(a){this._context=a}function bl(a){this._context=a}function cl(a,b){this._basis=new Fe(a);this._beta=
b}function Ge(a,b,c){a._context.bezierCurveTo(a._x1+a._k*(a._x2-a._x0),a._y1+a._k*(a._y2-a._y0),a._x2+a._k*(a._x1-b),a._y2+a._k*(a._y1-c),a._x2,a._y2)}function Xg(a,b){this._context=a;this._k=(1-b)/6}function Yg(a,b){this._context=a;this._k=(1-b)/6}function Zg(a,b){this._context=a;this._k=(1-b)/6}function $g(a,b,c){var e=a._x1,f=a._y1,h=a._x2,l=a._y2;if(1E-12<a._l01_a)var p=2*a._l01_2a+3*a._l01_a*a._l12_a+a._l12_2a,v=3*a._l01_a*(a._l01_a+a._l12_a),e=(e*p-a._x0*a._l12_2a+a._x2*a._l01_2a)/v,f=(f*p-
a._y0*a._l12_2a+a._y2*a._l01_2a)/v;1E-12<a._l23_a&&(p=2*a._l23_2a+3*a._l23_a*a._l12_a+a._l12_2a,v=3*a._l23_a*(a._l23_a+a._l12_a),h=(h*p+a._x1*a._l23_2a-b*a._l12_2a)/v,l=(l*p+a._y1*a._l23_2a-c*a._l12_2a)/v);a._context.bezierCurveTo(e,f,h,l,a._x2,a._y2)}function dl(a,b){this._context=a;this._alpha=b}function el(a,b){this._context=a;this._alpha=b}function fl(a,b){this._context=a;this._alpha=b}function gl(a){this._context=a}function hl(a,b,c){var e=a._x1-a._x0;b-=a._x1;var f=(a._y1-a._y0)/(e||0>b&&-0);
a=(c-a._y1)/(b||0>e&&-0);return((0>f?-1:1)+(0>a?-1:1))*Math.min(Math.abs(f),Math.abs(a),.5*Math.abs((f*b+a*e)/(e+b)))||0}function il(a,b){var c=a._x1-a._x0;return c?(3*(a._y1-a._y0)/c-b)/2:b}function ah(a,b,c){var e=a._x0,f=a._x1,h=a._y1,l=(f-e)/3;a._context.bezierCurveTo(e+l,a._y0+l*b,f-l,h-l*c,f,h)}function He(a){this._context=a}function jl(a){this._context=new kl(a)}function kl(a){this._context=a}function ll(a){this._context=a}function ml(a){var b,c=a.length-1,e=Array(c),f=Array(c),h=Array(c);
e[0]=0;f[0]=2;h[0]=a[0]+2*a[1];for(b=1;b<c-1;++b)e[b]=1,f[b]=4,h[b]=4*a[b]+2*a[b+1];e[c-1]=2;f[c-1]=7;h[c-1]=8*a[c-1]+a[c];for(b=1;b<c;++b){var l=e[b]/f[b-1];f[b]-=l;h[b]-=l*h[b-1]}e[c-1]=h[c-1]/f[c-1];for(b=c-2;0<=b;--b)e[b]=(h[b]-e[b+1])/f[b];f[c-1]=(a[c]+e[c-1])/2;for(b=0;b<c-1;++b)f[b]=2*a[b+1]-e[b+1];return[e,f]}function Ie(a,b){this._context=a;this._t=b}function cr(a,b){return a[b]}function Eh(a){for(var b=0,c=-1,e=a.length,f;++c<e;)if(f=+a[c][1])b+=f;return b}function dr(a){return a[0]}function er(a){return a[1]}
function Je(){this._=null}function Ke(a){a.U=a.C=a.L=a.R=a.P=a.N=null}function gd(a,b){var c=b.R,e=b.U;e?e.L===b?e.L=c:e.R=c:a._=c;c.U=e;b.U=c;b.R=c.L;b.R&&(b.R.U=b);c.L=b}function hd(a,b){var c=b.L,e=b.U;e?e.L===b?e.L=c:e.R=c:a._=c;c.U=e;b.U=c;b.L=c.R;b.L&&(b.L.U=b);c.R=b}function nl(a){for(;a.L;)a=a.L;return a}function id(a,b,c,e){var f=[null,null],h=ra.push(f)-1;f.left=a;f.right=b;c&&Le(f,a,b,c);e&&Le(f,b,a,e);Ia[a.index].halfedges.push(h);Ia[b.index].halfedges.push(h);return f}function jd(a,b,
c){b=[b,c];b.left=a;return b}function Le(a,b,c,e){a[0]||a[1]?a.left===c?a[1]=e:a[0]=e:(a[0]=e,a.left=b,a.right=c)}function fr(a,b,c,e,f){var h=a[0],l=a[1],p=h[0],h=h[1],v=0,x=1,k=l[0]-p,l=l[1]-h;b-=p;if(k||!(0<b)){b/=k;if(0>k){if(b<v)return;b<x&&(x=b)}else if(0<k){if(b>x)return;b>v&&(v=b)}b=e-p;if(k||!(0>b)){b/=k;if(0>k){if(b>x)return;b>v&&(v=b)}else if(0<k){if(b<v)return;b<x&&(x=b)}b=c-h;if(l||!(0<b)){b/=l;if(0>l){if(b<v)return;b<x&&(x=b)}else if(0<l){if(b>x)return;b>v&&(v=b)}b=f-h;if(l||!(0>b)){b/=
l;if(0>l){if(b>x)return;b>v&&(v=b)}else if(0<l){if(b<v)return;b<x&&(x=b)}if(!(0<v||1>x))return!0;0<v&&(a[0]=[p+v*k,h+v*l]);1>x&&(a[1]=[p+x*k,h+x*l]);return!0}}}}}function gr(a,b,c,e,f){var h=a[1];if(h)return!0;var l=a[0],p=a.left,v=a.right,h=p[0],p=p[1],x=v[0],v=v[1],k=(h+x)/2;if(v===p){if(k<b||k>=e)return;if(h>x){if(!l)l=[k,c];else if(l[1]>=f)return;h=[k,f]}else{if(!l)l=[k,f];else if(l[1]<c)return;h=[k,c]}}else{var q=(h-x)/(v-p);k=(p+v)/2-q*k;if(-1>q||1<q)if(h>x){if(!l)l=[(c-k)/q,c];else if(l[1]>=
f)return;h=[(f-k)/q,f]}else{if(!l)l=[(f-k)/q,f];else if(l[1]<c)return;h=[(c-k)/q,c]}else if(p<v){if(!l)l=[b,q*b+k];else if(l[0]>=e)return;h=[e,q*e+k]}else{if(!l)l=[e,q*e+k];else if(l[0]<b)return;h=[b,q*b+k]}}a[0]=l;a[1]=h;return!0}function hr(a,b){a=a.site;var c=b.left,e=b.right;a===e&&(e=c,c=a);if(e)return Math.atan2(e[1]-c[1],e[0]-c[0]);a===c?(c=b[1],e=b[0]):(c=b[0],e=b[1]);return Math.atan2(c[0]-e[0],e[1]-c[1])}function ol(a,b){return b[+(b.left!==a.site)]}function ir(){for(var a=0,b=Ia.length,
c,e,f,h;a<b;++a)if((c=Ia[a])&&(h=(e=c.halfedges).length)){var l=Array(h),p=Array(h);for(f=0;f<h;++f)l[f]=f,p[f]=hr(c,ra[e[f]]);l.sort(function(a,b){return p[b]-p[a]});for(f=0;f<h;++f)p[f]=e[l[f]];for(f=0;f<h;++f)e[f]=p[f]}}function jr(){Ke(this);this.x=this.y=this.arc=this.site=this.cy=null}function pc(a){var b=a.P,c=a.N;if(b&&c){var e=b.site,b=a.site,f=c.site;if(e!==f){var c=b[0],h=b[1],l=e[0]-c,p=e[1]-h,e=f[0]-c,v=f[1]-h,f=2*(l*v-p*e);if(!(f>=-kr)){var x=l*l+p*p,k=e*e+v*v,p=(v*x-p*k)/f,e=(l*k-e*
x)/f,l=pl.pop()||new jr;l.arc=a;l.site=b;l.x=p+c;l.y=(l.cy=e+h)+Math.sqrt(p*p+e*e);a.circle=l;a=null;for(b=kd._;b;)if(l.y<b.y||l.y===b.y&&l.x<=b.x)if(b.L)b=b.L;else{a=b.P;break}else if(b.R)b=b.R;else{a=b;break}kd.insert(a,l);a||(bh=l)}}}}function qc(a){var b=a.circle;b&&(b.P||(bh=b.N),kd.remove(b),pl.push(b),Ke(b),a.circle=null)}function lr(){Ke(this);this.edge=this.site=this.circle=null}function ql(a){var b=rl.pop()||new lr;b.site=a;return b}function ch(a){qc(a);rc.remove(a);rl.push(a);Ke(a)}function sl(a,
b){var c=a.site,e=c[0],f=c[1],h=f-b;if(!h)return e;a=a.P;if(!a)return-Infinity;c=a.site;a=c[0];c=c[1];b=c-b;if(!b)return a;var l=a-e,p=1/h-1/b,v=l/b;return p?(-v+Math.sqrt(v*v-2*p*(l*l/(-2*b)-c+b/2+f-h/2)))/p+e:(e+a)/2}function mr(a,b){return b[1]-a[1]||b[0]-a[0]}function dh(a,b){var c=a.sort(mr).pop(),e;ra=[];Ia=Array(a.length);rc=new Je;for(kd=new Je;;){var f=bh;if(c&&(!f||c[1]<f.y||c[1]===f.y&&c[0]<f.x)){if(c[0]!==e||c[1]!==h){var h=e=void 0;f=c;for(var l=f[0],p=f[1],v=rc._;v;){var x=sl(v,p)-l;
if(x>aa)v=v.L;else{var k=v;var q=p;var t=k.N;t?q=sl(t,q):(k=k.site,q=k[1]===q?k[0]:Infinity);q=l-q;if(q>aa){if(!v.R){h=v;break}v=v.R}else{x>-aa?(h=v.P,e=v):q>-aa?(h=v,e=v.N):h=e=v;break}}}Ia[f.index]={site:f,halfedges:[]};x=ql(f);rc.insert(h,x);if(h||e)if(h===e)qc(h),e=ql(h.site),rc.insert(x,e),x.edge=e.edge=id(h.site,x.site),pc(h),pc(e);else if(e){qc(h);qc(e);l=h.site;v=l[0];q=l[1];var k=f[0]-v,t=f[1]-q,p=e.site,z=p[0]-v,D=p[1]-q,F=2*(k*D-t*z),I=k*k+t*t,J=z*z+D*D,v=[(D*I-t*J)/F+v,(k*J-z*I)/F+q];
Le(e.edge,l,p,v);x.edge=id(l,f,null,v);e.edge=id(f,p,null,v);pc(h);pc(e)}else x.edge=id(h.site,x.site);e=c[0];h=c[1]}c=a.pop()}else if(f){p=f.arc;f=p.circle;l=f.x;v=f.cy;f=[l,v];k=p.P;q=p.N;x=[p];ch(p);for(p=k;p.circle&&Math.abs(l-p.circle.x)<aa&&Math.abs(v-p.circle.cy)<aa;)k=p.P,x.unshift(p),ch(p),p=k;x.unshift(p);qc(p);for(k=q;k.circle&&Math.abs(l-k.circle.x)<aa&&Math.abs(v-k.circle.cy)<aa;)q=k.N,x.push(k),ch(k),k=q;x.push(k);qc(k);v=x.length;for(l=1;l<v;++l)k=x[l],p=x[l-1],Le(k.edge,p.site,k.site,
f);p=x[0];k=x[v-1];k.edge=id(p.site,k.site,null,f);pc(p);pc(k)}else break}ir();if(b){e=+b[0][0];a=+b[0][1];c=+b[1][0];b=+b[1][1];h=ra.length;for(var u;h--;)gr(u=ra[h],e,a,c,b)&&fr(u,e,a,c,b)&&(Math.abs(u[0][0]-u[1][0])>aa||Math.abs(u[0][1]-u[1][1])>aa)||delete ra[h];u=Ia.length;h=!0;for(f=0;f<u;++f)if(x=Ia[f]){var y=x.site;p=x.halfedges;for(l=p.length;l--;)ra[p[l]]||p.splice(l,1);l=0;for(v=p.length;l<v;)if(q=ra[p[l]],k=q[+(q.left===x.site)],t=k[0],z=k[1],D=ol(x,ra[p[++l%v]]),q=D[0],D=D[1],Math.abs(t-
q)>aa||Math.abs(z-D)>aa)p.splice(l,0,ra.push(jd(y,k,Math.abs(t-e)<aa&&b-z>aa?[e,Math.abs(q-e)<aa?D:b]:Math.abs(z-b)<aa&&c-t>aa?[Math.abs(D-b)<aa?q:c,b]:Math.abs(t-c)<aa&&z-a>aa?[c,Math.abs(q-c)<aa?D:a]:Math.abs(z-a)<aa&&t-e>aa?[Math.abs(D-a)<aa?q:e,a]:null))-1),++v;v&&(h=!1)}if(h){l=Infinity;f=0;for(h=null;f<u;++f)if(x=Ia[f])y=x.site,p=y[0]-e,v=y[1]-a,p=p*p+v*v,p<l&&(l=p,h=x);h&&(f=[e,a],e=[e,b],b=[c,b],a=[c,a],h.halfedges.push(ra.push(jd(y=h.site,f,e))-1,ra.push(jd(y,e,b))-1,ra.push(jd(y,b,a))-1,
ra.push(jd(y,a,f))-1))}for(f=0;f<u;++f)if(x=Ia[f])x.halfedges.length||delete Ia[f]}this.edges=ra;this.cells=Ia;rc=kd=ra=Ia=null}function nr(a,b,c){this.target=a;this.type=b;this.transform=c}function eb(a,b,c){this.k=a;this.x=b;this.y=c}function tl(a){return a.__zoom||eh}function or(){return!d3.event.button}function pr(){var a=this;if(a instanceof SVGElement){a=a.ownerSVGElement||a;var b=a.width.baseVal.value;a=a.height.baseVal.value}else b=a.clientWidth,a=a.clientHeight;return[[0,0],[b,a]]}function ul(){return this.__zoom||
eh}var vl=wf(yb),Ib=vl.right,qr=vl.left,wl=Array.prototype,rr=wl.slice,sr=wl.map,xf=Math.sqrt(50),yf=Math.sqrt(10),zf=Math.sqrt(2),Af=Array.prototype.slice,an={value:function(){}};Md.prototype=ib.prototype={constructor:Md,on:function(a,b){var c=this._,e=$m(a+"",c),f,h=-1,l=e.length;if(2>arguments.length)for(;++h<l;){var p;if(p=f=(a=e[h]).type){a:{p=c[f];for(var v=0,x=p.length;v<x;++v)if((f=p[v]).name===a.name){f=f.value;break a}f=void 0}p=f}if(p)return f}else{if(null!=b&&"function"!==typeof b)throw Error("invalid callback: "+
b);for(;++h<l;)if(f=(a=e[h]).type)c[f]=Gi(c[f],a.name,b);else if(null==b)for(f in c)c[f]=Gi(c[f],a.name,null);return this}},copy:function(){var a={},b=this._,c;for(c in b)a[c]=b[c].slice();return new Md(a)},call:function(a,b){if(0<(f=arguments.length-2))for(var c=Array(f),e=0,f,h;e<f;++e)c[e]=arguments[e+2];if(!this._.hasOwnProperty(a))throw Error("unknown type: "+a);h=this._[a];e=0;for(f=h.length;e<f;++e)h[e].value.apply(b,c)},apply:function(a,b,c){if(!this._.hasOwnProperty(a))throw Error("unknown type: "+
a);a=this._[a];for(var e=0,f=a.length;e<f;++e)a[e].value.apply(b,c)}};var Fa={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},bn=0;Bf.prototype=Hi.prototype={constructor:Bf,get:function(a){for(var b=this._;!(b in a);)if(!(a=a.parentNode))return;return a[b]},set:function(a,b){return a[this._]=b},remove:function(a){return this._ in a&&delete a[this._]},toString:function(){return this._}};
if("undefined"!==typeof document){var ld=document.documentElement;if(!ld.matches)var tr=ld.webkitMatchesSelector||ld.msMatchesSelector||ld.mozMatchesSelector||ld.oMatchesSelector,xi=function(a){return function(){return tr.call(this,a)}}}var fh=xi,Ji={};d3.event=null;"undefined"!==typeof document&&("onmouseenter"in document.documentElement||(Ji={mouseenter:"mouseover",mouseleave:"mouseout"}));Nd.prototype={constructor:Nd,appendChild:function(a){return this._parent.insertBefore(a,this._next)},insertBefore:function(a,
b){return this._parent.insertBefore(a,b)},querySelector:function(a){return this._parent.querySelector(a)},querySelectorAll:function(a){return this._parent.querySelectorAll(a)}};Ki.prototype={add:function(a){0>this._names.indexOf(a)&&(this._names.push(a),this._node.setAttribute("class",this._names.join(" ")))},remove:function(a){a=this._names.indexOf(a);0<=a&&(this._names.splice(a,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(a){return 0<=this._names.indexOf(a)}};var rf=
[null];wa.prototype=Ab.prototype={constructor:wa,select:function(a){"function"!==typeof a&&(a=Jd(a));for(var b=this._groups,c=b.length,e=Array(c),f=0;f<c;++f)for(var h=b[f],l=h.length,p=e[f]=Array(l),v,x,k=0;k<l;++k)(v=h[k])&&(x=a.call(v,v.__data__,k,h))&&("__data__"in v&&(x.__data__=v.__data__),p[k]=x);return new wa(e,this._parents)},selectAll:function(a){"function"!==typeof a&&(a=tf(a));for(var b=this._groups,c=b.length,e=[],f=[],h=0;h<c;++h)for(var l=b[h],p=l.length,v,x=0;x<p;++x)if(v=l[x])e.push(a.call(v,
v.__data__,x,l)),f.push(v);return new wa(e,f)},filter:function(a){"function"!==typeof a&&(a=fh(a));for(var b=this._groups,c=b.length,e=Array(c),f=0;f<c;++f)for(var h=b[f],l=h.length,p=e[f]=[],v,x=0;x<l;++x)(v=h[x])&&a.call(v,v.__data__,x,h)&&p.push(v);return new wa(e,this._parents)},data:function(a,b){if(!a){var c=Array(this.size());k=-1;this.each(function(a){c[++k]=a});return c}var e=b?hn:gn,f=this._parents,h=this._groups;"function"!==typeof a&&(a=Om(a));for(var l=h.length,p=Array(l),v=Array(l),
x=Array(l),k=0;k<l;++k){var q=f[k],t=h[k],z=t.length;c=a.call(q,q&&q.__data__,k,f);var D=c.length,F=v[k]=Array(D),I=p[k]=Array(D),z=x[k]=Array(z);e(q,t,F,I,z,c,b);for(var t=q=0,J;q<D;++q)if(z=F[q]){for(q>=t&&(t=q+1);!(J=I[t])&&++t<D;);z._next=J||null}}p=new wa(p,f);p._enter=v;p._exit=x;return p},enter:function(){return new wa(this._enter||this._groups.map(wi),this._parents)},exit:function(){return new wa(this._exit||this._groups.map(wi),this._parents)},merge:function(a){var b=this._groups;a=a._groups;
for(var c=b.length,e=Math.min(c,a.length),f=Array(c),h=0;h<e;++h)for(var l=b[h],p=a[h],v=l.length,x=f[h]=Array(v),k,q=0;q<v;++q)if(k=l[q]||p[q])x[q]=k;for(;h<c;++h)f[h]=b[h];return new wa(f,this._parents)},order:function(){for(var a=this._groups,b=-1,c=a.length;++b<c;)for(var e=a[b],f=e.length-1,h=e[f],l;0<=--f;)if(l=e[f])h&&h!==l.nextSibling&&h.parentNode.insertBefore(l,h),h=l;return this},sort:function(a){function b(b,c){return b&&c?a(b.__data__,c.__data__):!b-!c}a||(a=jn);for(var c=this._groups,
e=c.length,f=Array(e),h=0;h<e;++h){for(var l=c[h],p=l.length,v=f[h]=Array(p),x,k=0;k<p;++k)if(x=l[k])v[k]=x;v.sort(b)}return(new wa(f,this._parents)).order()},call:function(){var a=arguments[0];arguments[0]=this;a.apply(null,arguments);return this},nodes:function(){var a=Array(this.size()),b=-1;this.each(function(){a[++b]=this});return a},node:function(){for(var a=this._groups,b=0,c=a.length;b<c;++b)for(var e=a[b],f=0,h=e.length;f<h;++f){var l=e[f];if(l)return l}return null},size:function(){var a=
0;this.each(function(){++a});return a},empty:function(){return!this.node()},each:function(a){for(var b=this._groups,c=0,e=b.length;c<e;++c)for(var f=b[c],h=0,l=f.length,p;h<l;++h)(p=f[h])&&a.call(p,p.__data__,h,f);return this},attr:function(a,b){var c=Dc(a);if(2>arguments.length){var e=this.node();return c.local?e.getAttributeNS(c.space,c.local):e.getAttribute(c)}return this.each((null==b?c.local?ln:kn:"function"===typeof b?c.local?pn:on:c.local?nn:mn)(c,b))},style:function(a,b,c){return 1<arguments.length?
this.each((null==b?qn:"function"===typeof b?sn:rn)(a,b,null==c?"":c)):zb(this.node(),a)},property:function(a,b){return 1<arguments.length?this.each((null==b?tn:"function"===typeof b?vn:un)(a,b)):this.node()[a]},classed:function(a,b){var c=(a+"").trim().split(/^|\s+/);if(2>arguments.length){for(var e=Cf(this.node()),f=-1,h=c.length;++f<h;)if(!e.contains(c[f]))return!1;return!0}return this.each(("function"===typeof b?yn:b?wn:xn)(c,b))},text:function(a){return arguments.length?this.each(null==a?zn:("function"===
typeof a?Bn:An)(a)):this.node().textContent},html:function(a){return arguments.length?this.each(null==a?Cn:("function"===typeof a?En:Dn)(a)):this.node().innerHTML},raise:function(){return this.each(Fn)},lower:function(){return this.each(Gn)},append:function(a){var b="function"===typeof a?a:uf(a);return this.select(function(){return this.appendChild(b.apply(this,arguments))})},insert:function(a,b){var c="function"===typeof a?a:uf(a),e=null==b?Hn:"function"===typeof b?b:Jd(b);return this.select(function(){return this.insertBefore(c.apply(this,
arguments),e.apply(this,arguments)||null)})},remove:function(){return this.each(In)},datum:function(a){return arguments.length?this.property("__data__",a):this.node().__data__},on:function(a,b,c){var e,f=dn(a+""),h=f.length,l;if(2>arguments.length){if(e=this.node().__on)for(var p=0,v=e.length,x;p<v;++p){var k=0;for(x=e[p];k<h;++k)if((l=f[k]).type===x.type&&l.name===x.name)return x.value}}else{e=b?fn:en;null==c&&(c=!1);for(k=0;k<h;++k)this.each(e(f[k],b,c));return this}},dispatch:function(a,b){return this.each(("function"===
typeof b?Kn:Jn)(a,b))}};Df.prototype.on=function(){var a=this._.on.apply(this._,arguments);return a===this._?this:a};var sc=1/.7,On=/^#([0-9a-f]{3})$/,Pn=/^#([0-9a-f]{6})$/,Qn=/^rgb\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*\)$/,Rn=/^rgb\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*\)$/,Sn=/^rgba\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,Tn=/^rgba\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,
Un=/^hsl\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*\)$/,Vn=/^hsla\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,Ri={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,
burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,
darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,
lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,
mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,
red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};$b(nb,kb,{displayable:function(){return this.rgb().displayable()},
toString:function(){return this.rgb()+""}});$b(qa,Jc,Ic(nb,{brighter:function(a){a=null==a?sc:Math.pow(sc,a);return new qa(this.r*a,this.g*a,this.b*a,this.opacity)},darker:function(a){a=null==a?.7:Math.pow(.7,a);return new qa(this.r*a,this.g*a,this.b*a,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&255>=this.r&&0<=this.g&&255>=this.g&&0<=this.b&&255>=this.b&&0<=this.opacity&&1>=this.opacity},toString:function(){var a=this.opacity,a=isNaN(a)?1:Math.max(0,Math.min(1,
a));return(1===a?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===a?")":", "+a+")")}}));$b(Ta,Pd,Ic(nb,{brighter:function(a){a=null==a?sc:Math.pow(sc,a);return new Ta(this.h,this.s,this.l*a,this.opacity)},darker:function(a){a=null==a?.7:Math.pow(.7,a);return new Ta(this.h,this.s,this.l*a,this.opacity)},rgb:function(){var a=this.h%360+360*(0>this.h),b=isNaN(a)||isNaN(this.s)?
0:this.s,c=this.l,b=c+(.5>c?c:1-c)*b,c=2*c-b;return new qa(Ff(240<=a?a-240:a+120,c,b),Ff(a,c,b),Ff(120>a?a+240:a-120,c,b),this.opacity)},displayable:function(){return(0<=this.s&&1>=this.s||isNaN(this.s))&&0<=this.l&&1>=this.l&&0<=this.opacity&&1>=this.opacity}}));var Si=Math.PI/180,Vi=180/Math.PI,Ui=4/29,bc=6/29,Ti=3*bc*bc,Xn=bc*bc*bc;$b(Za,Qd,Ic(nb,{brighter:function(a){return new Za(this.l+18*(null==a?1:a),this.a,this.b,this.opacity)},darker:function(a){return new Za(this.l-18*(null==a?1:a),this.a,
this.b,this.opacity)},rgb:function(){var a=(this.l+16)/116,b=isNaN(this.a)?a:a+this.a/500,c=isNaN(this.b)?a:a-this.b/200,a=1*Jf(a),b=.95047*Jf(b),c=1.08883*Jf(c);return new qa(Kf(3.2404542*b-1.5371385*a-.4985314*c),Kf(-.969266*b+1.8760108*a+.041556*c),Kf(.0556434*b-.2040259*a+1.0572252*c),this.opacity)}}));$b(ob,Rd,Ic(nb,{brighter:function(a){return new ob(this.h,this.c,this.l+18*(null==a?1:a),this.opacity)},darker:function(a){return new ob(this.h,this.c,this.l-18*(null==a?1:a),this.opacity)},rgb:function(){return Gf(this).rgb()}}));
var Wi=1.78277*-.29227-.1347134789;$b(Bb,Pa,Ic(nb,{brighter:function(a){a=null==a?sc:Math.pow(sc,a);return new Bb(this.h,this.s,this.l*a,this.opacity)},darker:function(a){a=null==a?.7:Math.pow(.7,a);return new Bb(this.h,this.s,this.l*a,this.opacity)},rgb:function(){var a=isNaN(this.h)?0:(this.h+120)*Si,b=+this.l,c=isNaN(this.s)?0:this.s*b*(1-b),e=Math.cos(a),a=Math.sin(a);return new qa(255*(b+c*(-.14861*e+1.78277*a)),255*(b+c*(-.29227*e+-.90649*a)),255*(b+1.97294*c*e),this.opacity)}}));var zc=function b(c){function e(b,
c){var e=f((b=Jc(b)).r,(c=Jc(c)).r),h=f(b.g,c.g),l=f(b.b,c.b),k=pa(b.opacity,c.opacity);return function(c){b.r=e(c);b.g=h(c);b.b=l(c);b.opacity=k(c);return b+""}}var f=Zn(c);e.gamma=b;return e}(1),ur=Yi(vi),vr=Yi(ti),mf=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,nf=new RegExp(mf.source,"g"),oi=180/Math.PI,gh={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},md,hh,xl,Me,yl=Zi(function(b){if("none"===b)return gh;md||(md=document.createElement("DIV"),hh=document.documentElement,xl=document.defaultView);
md.style.transform=b;b=xl.getComputedStyle(hh.appendChild(md),null).getPropertyValue("transform");hh.removeChild(md);b=b.slice(7,-1).split(",");return ni(+b[0],+b[1],+b[2],+b[3],+b[4],+b[5])},"px, ","px)","deg)"),zl=Zi(function(b){if(null==b)return gh;Me||(Me=document.createElementNS("http://www.w3.org/2000/svg","g"));Me.setAttribute("transform",b);if(!(b=Me.transform.baseVal.consolidate()))return gh;b=b.matrix;return ni(b.a,b.b,b.c,b.d,b.e,b.f)},", ",")",")"),Bc=Math.SQRT2,wr=$i(Lf),xr=$i(pa),yr=
aj(Lf),zr=aj(pa),Ar=bj(Lf),Ne=bj(pa),dc=0,Kc=0,Mc=0,Td,Lc,Ud=0,pb=0,Nf=0,Mf="object"===typeof performance&&performance.now?performance:Date,cj="function"===typeof requestAnimationFrame?requestAnimationFrame:function(b){setTimeout(b,17)};Ac.prototype=Sd.prototype={constructor:Ac,restart:function(b,c,e){if("function"!==typeof b)throw new TypeError("callback is not a function");e=(null==e?cc():+e)+(null==c?0:+c);this._next||Lc===this||(Lc?Lc._next=this:Td=this,Lc=this);this._call=b;this._time=e;Of()},
stop:function(){this._call&&(this._call=null,this._time=Infinity,Of())}};var Km=ib("start","end","interrupt"),Lm=[],Br=Ab.prototype.constructor,Al=0,tc=Ab.prototype;Ua.prototype=fj.prototype={constructor:Ua,select:function(b){var c=this._name,e=this._id;"function"!==typeof b&&(b=Jd(b));for(var f=this._groups,h=f.length,l=Array(h),p=0;p<h;++p)for(var v=f[p],x=v.length,k=l[p]=Array(x),q,t,z=0;z<x;++z)(q=v[z])&&(t=b.call(q,q.__data__,z,v))&&("__data__"in q&&(t.__data__=q.__data__),k[z]=t,Fd(k[z],c,e,
z,k,$a(q,e)));return new Ua(l,this._parents,c,e)},selectAll:function(b){var c=this._name,e=this._id;"function"!==typeof b&&(b=tf(b));for(var f=this._groups,h=f.length,l=[],p=[],v=0;v<h;++v)for(var x=f[v],k=x.length,q,t=0;t<k;++t)if(q=x[t]){for(var z=b.call(q,q.__data__,t,x),D,F=$a(q,e),I=0,J=z.length;I<J;++I)(D=z[I])&&Fd(D,c,e,I,z,F);l.push(z);p.push(q)}return new Ua(l,p,c,e)},filter:function(b){"function"!==typeof b&&(b=fh(b));for(var c=this._groups,e=c.length,f=Array(e),h=0;h<e;++h)for(var l=c[h],
p=l.length,v=f[h]=[],x,k=0;k<p;++k)(x=l[k])&&b.call(x,x.__data__,k,l)&&v.push(x);return new Ua(f,this._parents,this._name,this._id)},merge:function(b){if(b._id!==this._id)throw Error();var c=this._groups;b=b._groups;for(var e=c.length,f=Math.min(e,b.length),h=Array(e),l=0;l<f;++l)for(var p=c[l],v=b[l],x=p.length,k=h[l]=Array(x),q,t=0;t<x;++t)if(q=p[t]||v[t])k[t]=q;for(;l<e;++l)h[l]=c[l];return new Ua(h,this._parents,this._name,this._id)},selection:function(){return new Br(this._groups,this._parents)},
transition:function(){for(var b=this._name,c=this._id,e=++Al,f=this._groups,h=f.length,l=0;l<h;++l)for(var p=f[l],v=p.length,x,k=0;k<v;++k)if(x=p[k]){var q=$a(x,c);Fd(x,b,e,k,p,{time:q.time+q.delay+q.duration,delay:0,duration:q.duration,ease:q.ease})}return new Ua(f,this._parents,b,e)},call:tc.call,nodes:tc.nodes,node:tc.node,size:tc.size,empty:tc.empty,each:tc.each,on:function(b,c){var e=this._id;return 2>arguments.length?$a(this.node(),e).on.on(b):this.each(so(e,b,c))},attr:function(b,c){var e=
Dc(b),f="transform"===e?zl:ki;return this.attrTween(b,"function"===typeof c?(e.local?jo:io)(e,f,Qf(this,"attr."+b,c)):null==c?(e.local?fo:eo)(e):(e.local?ho:go)(e,f,c+""))},attrTween:function(b,c){var e="attr."+b;if(2>arguments.length)return(e=this.tween(e))&&e._value;if(null==c)return this.tween(e,null);if("function"!==typeof c)throw Error();var f=Dc(b);return this.tween(e,(f.local?ko:lo)(f,c))},style:function(b,c,e){var f="transform"===(b+="")?yl:ki;return null==c?this.styleTween(b,uo(b,f)).on("end.style."+
b,vo(b)):this.styleTween(b,"function"===typeof c?xo(b,f,Qf(this,"style."+b,c)):wo(b,f,c+""),e)},styleTween:function(b,c,e){var f="style."+(b+="");if(2>arguments.length)return(f=this.tween(f))&&f._value;if(null==c)return this.tween(f,null);if("function"!==typeof c)throw Error();return this.tween(f,yo(b,c,null==e?"":e))},text:function(b){return this.tween("text","function"===typeof b?Ao(Qf(this,"text",b)):zo(null==b?"":b+""))},remove:function(){return this.on("end.remove",to(this._id))},tween:function(b,
c){var e=this._id;b+="";if(2>arguments.length){for(var e=$a(this.node(),e).tween,f=0,h=e.length,l;f<h;++f)if((l=e[f]).name===b)return l.value;return null}return this.each((null==c?bo:co)(e,b,c))},delay:function(b){var c=this._id;return arguments.length?this.each(("function"===typeof b?mo:no)(c,b)):$a(this.node(),c).delay},duration:function(b){var c=this._id;return arguments.length?this.each(("function"===typeof b?oo:po)(c,b)):$a(this.node(),c).duration},ease:function(b){var c=this._id;return arguments.length?
this.each(qo(c,b)):$a(this.node(),c).ease}};var Cr=function c(e){function f(c){return Math.pow(c,e)}e=+e;f.exponent=c;return f}(3),Dr=function e(f){function h(e){return 1-Math.pow(1-e,f)}f=+f;h.exponent=e;return h}(3),Bl=function f(h){function l(f){return(1>=(f*=2)?Math.pow(f,h):2-Math.pow(2-f,h))/2}h=+h;l.exponent=f;return l}(3),ij=Math.PI,Cl=ij/2,Sf=4/11,Co=6/11,Bo=8/11,Eo=9/11,Do=10/11,Fo=21/22,Vd=1/Sf/Sf,Er=function h(l){function p(h){return h*h*((l+1)*h-l)}l=+l;p.overshoot=h;return p}(1.70158),
Fr=function l(p){function v(l){return--l*l*((p+1)*l+p)+1}p=+p;v.overshoot=l;return v}(1.70158),Dl=function p(v){function x(k){return(1>(k*=2)?k*k*((v+1)*k-v):(k-=2)*k*((v+1)*k+v)+2)/2}v=+v;x.overshoot=p;return x}(1.70158),uc=2*Math.PI,Gr=function v(x,k){function q(q){return x*Math.pow(2,10*--q)*Math.sin((t-q)/k)}var t=Math.asin(1/(x=Math.max(1,x)))*(k/=uc);q.amplitude=function(q){return v(q,k*uc)};q.period=function(k){return v(x,k)};return q}(1,.3),El=function x(k,q){function t(t){return 1-k*Math.pow(2,
-10*(t=+t))*Math.sin((t+z)/q)}var z=Math.asin(1/(k=Math.max(1,k)))*(q/=uc);t.amplitude=function(k){return x(k,q*uc)};t.period=function(q){return x(k,q)};return t}(1,.3),Hr=function k(q,t){function z(k){return(0>(k=2*k-1)?q*Math.pow(2,10*k)*Math.sin((D-k)/t):2-q*Math.pow(2,-10*k)*Math.sin((D+k)/t))/2}var D=Math.asin(1/(q=Math.max(1,q)))*(t/=uc);z.amplitude=function(q){return k(q,t*uc)};z.period=function(t){return k(q,t)};return z}(1,.3),ih={time:null,delay:0,duration:250,ease:Rf};Ab.prototype.interrupt=
function(k){return this.each(function(){xb(this,k)})};Ab.prototype.transition=function(k){var q;if(k instanceof Ua){var t=k._id;k=k._name}else t=++Al,(q=ih).time=cc(),k=null==k?null:k+"";for(var z=this._groups,D=z.length,F=0;F<D;++F)for(var I=z[F],J=I.length,u,y=0;y<J;++y)if(u=I[y]){var G=u,H=k,N=t,P=y,R=I,d;if(!(d=q))a:{d=void 0;for(var g=t;!(d=u.__transition)||!(d=d[g]);)if(!(u=u.parentNode)){d=(ih.time=cc(),ih);break a}}Fd(G,H,N,P,R,d)}return new Ua(z,this._parents,k,t)};var Ir=[null],lj={name:"drag"},
Wf={name:"space"},ec={name:"handle"},fc={name:"center"},Xd={name:"x",handles:["e","w"].map(Oc),input:function(k,q){return k&&[[k[0],q[0][1]],[k[1],q[1][1]]]},output:function(k){return k&&[k[0][0],k[1][0]]}},Wd={name:"y",handles:["n","s"].map(Oc),input:function(k,q){return k&&[[q[0][0],k[0]],[q[1][0],k[1]]]},output:function(k){return k&&[k[0][1],k[1][1]]}},Jr={name:"xy",handles:"n e s w nw ne se sw".split(" ").map(Oc),input:function(k){return k},output:function(k){return k}},ab={overlay:"crosshair",
selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},mj={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},nj={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Io={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Jo={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1},Fl=Math.cos,Gl=Math.sin,Hl=Math.PI,Oe=Hl/2,Il=2*Hl,Jl=Math.max,Kr=Array.prototype.slice,jh=Math.PI,kh=2*jh,Lr=kh-1E-6;
Xf.prototype=gb.prototype={constructor:Xf,moveTo:function(k,q){this._+="M"+(this._x0=this._x1=+k)+","+(this._y0=this._y1=+q)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(k,q){this._+="L"+(this._x1=+k)+","+(this._y1=+q)},quadraticCurveTo:function(k,q,t,z){this._+="Q"+ +k+","+ +q+","+(this._x1=+t)+","+(this._y1=+z)},bezierCurveTo:function(k,q,t,z,D,F){this._+="C"+ +k+","+ +q+","+ +t+","+ +z+","+(this._x1=+D)+","+(this._y1=+F)},arcTo:function(k,
q,t,z,D){k=+k;q=+q;t=+t;z=+z;D=+D;var F=this._x1,I=this._y1,J=t-k,u=z-q,y=F-k,G=I-q,H=y*y+G*G;if(0>D)throw Error("negative radius: "+D);if(null===this._x1)this._+="M"+(this._x1=k)+","+(this._y1=q);else if(1E-6<H)if(1E-6<Math.abs(G*J-u*y)&&D){t-=F;z-=I;var N=J*J+u*u,I=Math.sqrt(N),F=Math.sqrt(H),H=D*Math.tan((jh-Math.acos((N+H-(t*t+z*z))/(2*I*F)))/2),F=H/F,H=H/I;1E-6<Math.abs(F-1)&&(this._+="L"+(k+F*y)+","+(q+F*G));this._+="A"+D+","+D+",0,0,"+ +(G*t>y*z)+","+(this._x1=k+H*J)+","+(this._y1=q+H*u)}else this._+=
"L"+(this._x1=k)+","+(this._y1=q)},arc:function(k,q,t,z,D,F){k=+k;q=+q;t=+t;var I=t*Math.cos(z),J=t*Math.sin(z),u=k+I,y=q+J,G=1^F;z=F?z-D:D-z;if(0>t)throw Error("negative radius: "+t);if(null===this._x1)this._+="M"+u+","+y;else if(1E-6<Math.abs(this._x1-u)||1E-6<Math.abs(this._y1-y))this._+="L"+u+","+y;t&&(0>z&&(z=z%kh+kh),z>Lr?this._+="A"+t+","+t+",0,1,"+G+","+(k-I)+","+(q-J)+"A"+t+","+t+",0,1,"+G+","+(this._x1=u)+","+(this._y1=y):1E-6<z&&(this._+="A"+t+","+t+",0,"+ +(z>=jh)+","+G+","+(this._x1=
k+t*Math.cos(D))+","+(this._y1=q+t*Math.sin(D))))},rect:function(k,q,t,z){this._+="M"+(this._x0=this._x1=+k)+","+(this._y0=this._y1=+q)+"h"+ +t+"v"+ +z+"h"+-t+"Z"},toString:function(){return this._}};Yd.prototype=Sa.prototype={constructor:Yd,has:function(k){return"$"+k in this},get:function(k){return this["$"+k]},set:function(k,q){this["$"+k]=q;return this},remove:function(k){k="$"+k;return k in this&&delete this[k]},clear:function(){for(var k in this)"$"===k[0]&&delete this[k]},keys:function(){var k=
[],q;for(q in this)"$"===q[0]&&k.push(q.slice(1));return k},values:function(){var k=[],q;for(q in this)"$"===q[0]&&k.push(this[q]);return k},entries:function(){var k=[],q;for(q in this)"$"===q[0]&&k.push({key:q.slice(1),value:this[q]});return k},size:function(){var k=0,q;for(q in this)"$"===q[0]&&++k;return k},empty:function(){for(var k in this)if("$"===k[0])return!1;return!0},each:function(k){for(var q in this)"$"===q[0]&&k(this[q],q.slice(1),this)}};var Nb=Sa.prototype;Zd.prototype=qj.prototype=
{constructor:Zd,has:Nb.has,add:function(k){k+="";this["$"+k]=k;return this},remove:Nb.remove,clear:Nb.clear,values:Nb.keys,size:Nb.size,empty:Nb.empty,each:Nb.each};var Pe=hf(","),Kl=Pe.parse,Mr=Pe.parseRows,Nr=Pe.format,Or=Pe.formatRows,Qe=hf("\t"),Ll=Qe.parse,Pr=Qe.parseRows,Qr=Qe.format,Rr=Qe.formatRows,Aa=$d.prototype=Yf.prototype;Aa.copy=function(){var k=new Yf(this._x,this._y,this._x0,this._y0,this._x1,this._y1),q=this._root,t,z;if(!q)return k;if(!q.length)return k._root=sj(q),k;for(t=[{source:q,
target:k._root=Array(4)}];q=t.pop();)for(var D=0;4>D;++D)if(z=q.source[D])z.length?t.push({source:z,target:q.target[D]=Array(4)}):q.target[D]=sj(z);return k};Aa.add=function(k){var q=+this._x.call(null,k),t=+this._y.call(null,k);return rj(this.cover(q,t),q,t,k)};Aa.addAll=function(k){var q,t,z=k.length,D,F,I=Array(z),J=Array(z),u=Infinity,y=Infinity,G=-Infinity,H=-Infinity;for(t=0;t<z;++t)isNaN(D=+this._x.call(null,q=k[t]))||isNaN(F=+this._y.call(null,q))||(I[t]=D,J[t]=F,D<u&&(u=D),D>G&&(G=D),F<y&&
(y=F),F>H&&(H=F));G<u&&(u=this._x0,G=this._x1);H<y&&(y=this._y0,H=this._y1);this.cover(u,y).cover(G,H);for(t=0;t<z;++t)rj(this,I[t],J[t],k[t]);return this};Aa.cover=function(k,q){if(isNaN(k=+k)||isNaN(q=+q))return this;var t=this._x0,z=this._y0,D=this._x1,F=this._y1;if(isNaN(t))D=(t=Math.floor(k))+1,F=(z=Math.floor(q))+1;else if(t>k||k>D||z>q||q>F){var I=D-t,J=this._root,u;switch(u=(q<(z+F)/2)<<1|k<(t+D)/2){case 0:do{var y=Array(4);y[u]=J;J=y}while(I*=2,D=t+I,F=z+I,k>D||q>F);break;case 1:do y=Array(4),
y[u]=J,J=y;while(I*=2,t=D-I,F=z+I,t>k||q>F);break;case 2:do y=Array(4),y[u]=J,J=y;while(I*=2,D=t+I,z=F-I,k>D||z>q);break;case 3:do y=Array(4),y[u]=J,J=y;while(I*=2,t=D-I,z=F-I,t>k||z>q)}this._root&&this._root.length&&(this._root=J)}else return this;this._x0=t;this._y0=z;this._x1=D;this._y1=F;return this};Aa.data=function(){var k=[];this.visit(function(q){if(!q.length){do k.push(q.data);while(q=q.next)}});return k};Aa.extent=function(k){return arguments.length?this.cover(+k[0][0],+k[0][1]).cover(+k[1][0],
+k[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]};Aa.find=function(k,q,t){var z=this._x0,D=this._y0,F,I,J,u,y=this._x1,G=this._y1,H=[],N=this._root,P;N&&H.push(new ua(N,z,D,y,G));null==t?t=Infinity:(z=k-t,D=q-t,y=k+t,G=q+t,t*=t);for(;P=H.pop();)if(!(!(N=P.node)||(F=P.x0)>y||(I=P.y0)>G||(J=P.x1)<z||(u=P.y1)<D))if(N.length){P=(F+J)/2;var R=(I+u)/2;H.push(new ua(N[3],P,R,J,u),new ua(N[2],F,R,P,u),new ua(N[1],P,I,J,R),new ua(N[0],F,I,P,R));if(N=(q>=R)<<1|k>=P)P=H[H.length-1],
H[H.length-1]=H[H.length-1-N],H[H.length-1-N]=P}else if(P=k-+this._x.call(null,N.data),R=q-+this._y.call(null,N.data),P=P*P+R*R,P<t){var d=Math.sqrt(t=P);z=k-d;D=q-d;y=k+d;G=q+d;d=N.data}return d};Aa.remove=function(k){if(isNaN(u=+this._x.call(null,k))||isNaN(y=+this._y.call(null,k)))return this;var q,t=this._root,z,D=this._x0,F=this._y0,I=this._x1,J=this._y1,u,y,G,H,N,P;if(!t)return this;if(t.length)for(;;){(N=u>=(G=(D+I)/2))?D=G:I=G;(P=y>=(H=(F+J)/2))?F=H:J=H;if(!(q=t,t=t[N|=P<<1]))return this;
if(!t.length)break;if(q[N+1&3]||q[N+2&3]||q[N+3&3]){var R=q;var d=N}}for(;t.data!==k;)if(!(z=t,t=t.next))return this;(k=t.next)&&delete t.next;if(z)return k?z.next=k:delete z.next,this;if(!q)return this._root=k,this;k?q[N]=k:delete q[N];(t=q[0]||q[1]||q[2]||q[3])&&t===(q[3]||q[2]||q[1]||q[0])&&!t.length&&(R?R[d]=t:this._root=t);return this};Aa.removeAll=function(k){for(var q=0,t=k.length;q<t;++q)this.remove(k[q]);return this};Aa.root=function(){return this._root};Aa.size=function(){var k=0;this.visit(function(q){if(!q.length){do++k;
while(q=q.next)}});return k};Aa.visit=function(k){var q=[],t,z=this._root,D,F,I,J;for(z&&q.push(new ua(z,this._x0,this._y0,this._x1,this._y1));t=q.pop();)if(!k(z=t.node,F=t.x0,I=t.y0,J=t.x1,t=t.y1)&&z.length){var u=(F+J)/2,y=(I+t)/2;(D=z[3])&&q.push(new ua(D,u,y,J,t));(D=z[2])&&q.push(new ua(D,F,y,u,t));(D=z[1])&&q.push(new ua(D,u,I,J,y));(D=z[0])&&q.push(new ua(D,F,I,u,y))}return this};Aa.visitAfter=function(k){var q=[],t=[],z;for(this._root&&q.push(new ua(this._root,this._x0,this._y0,this._x1,this._y1));z=
q.pop();){var D=z.node;if(D.length){var F,I=z.x0,J=z.y0,u=z.x1,y=z.y1,G=(I+u)/2,H=(J+y)/2;(F=D[0])&&q.push(new ua(F,I,J,G,H));(F=D[1])&&q.push(new ua(F,G,J,u,H));(F=D[2])&&q.push(new ua(F,I,H,G,y));(F=D[3])&&q.push(new ua(F,G,H,u,y))}t.push(z)}for(;z=t.pop();)k(z.node,z.x0,z.y0,z.x1,z.y1);return this};Aa.x=function(k){return arguments.length?(this._x=k,this):this._x};Aa.y=function(k){return arguments.length?(this._y=k,this):this._y};var Sr=Math.PI*(3-Math.sqrt(5)),ei,fi={"":function(k,q){k=k.toPrecision(q);
q=k.length;var t=1,z=-1,D;a:for(;t<q;++t)switch(k[t]){case ".":z=D=t;break;case "0":0===z&&(z=t);D=t;break;case "e":break a;default:0<z&&(z=0)}return 0<z?k.slice(0,z)+k.slice(D+1):k},"%":function(k,q){return(100*k).toFixed(q)},b:function(k){return Math.round(k).toString(2)},c:function(k){return k+""},d:function(k){return Math.round(k).toString(10)},e:function(k,q){return k.toExponential(q)},f:function(k,q){return k.toFixed(q)},g:function(k,q){return k.toPrecision(q)},o:function(k){return Math.round(k).toString(8)},
p:function(k,q){return hi(100*k,q)},r:hi,s:function(k,q){var t=Dd(k,q);if(!t)return k+"";var z=t[0],t=t[1],t=t-(ei=3*Math.max(-8,Math.min(8,Math.floor(t/3))))+1,D=z.length;return t===D?z:t>D?z+Array(t-D+1).join("0"):0<t?z.slice(0,t)+"."+z.slice(t):"0."+Array(1-t).join("0")+Dd(k,Math.max(0,q+t-1))[0]},X:function(k){return Math.round(k).toString(16).toUpperCase()},x:function(k){return Math.round(k).toString(16)}},Zo=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;yc.prototype=
Zf.prototype;Zf.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,this.width|0))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,this.precision|0))+this.type};var di="y z a f p n \u00b5 m  k M G T P E Z Y".split(" "),ae;uj({decimal:".",thousands:",",grouping:[3],currency:["$",""]});Qa.prototype={constructor:Qa,reset:function(){this.s=this.t=0},add:function(k){vj(Re,k,this.t);vj(this,Re.s,this.s);this.s?this.t+=
Re.t:this.s=Re.t},valueOf:function(){return this.s}};var Re=new Qa,Z=Math.PI,ha=Z/2,zd=Z/4,Ba=2*Z,ba=180/Z,T=Z/180,Y=Math.abs,kc=Math.atan,ta=Math.atan2,V=Math.cos,me=Math.ceil,Ml=Math.exp,re=Math.log,vg=Math.pow,O=Math.sin,Xc=Math.sign||function(k){return 0<k?1:0>k?-1:0},ma=Math.sqrt,jc=Math.tan,Zh={Feature:function(k,q){Cd(k.geometry,q)},FeatureCollection:function(k,q){k=k.features;for(var t=-1,z=k.length;++t<z;)Cd(k[t].geometry,q)}},yj={Sphere:function(k,q){q.sphere()},Point:function(k,q){k=k.coordinates;
q.point(k[0],k[1],k[2])},MultiPoint:function(k,q){for(var t=k.coordinates,z=-1,D=t.length;++z<D;)k=t[z],q.point(k[0],k[1],k[2])},LineString:function(k,q){$f(k.coordinates,q,0)},MultiLineString:function(k,q){k=k.coordinates;for(var t=-1,z=k.length;++t<z;)$f(k[t],q,0)},Polygon:function(k,q){zj(k.coordinates,q)},MultiPolygon:function(k,q){k=k.coordinates;for(var t=-1,z=k.length;++t<z;)zj(k[t],q)},GeometryCollection:function(k,q){k=k.geometries;for(var t=-1,z=k.length;++t<z;)Cd(k[t],q)}},be=new Qa,Se=
new Qa,Bj,Cj,ag,bg,cg,Va={point:ea,lineStart:ea,lineEnd:ea,polygonStart:function(){be.reset();Va.lineStart=$o;Va.lineEnd=bp},polygonEnd:function(){var k=+be;Se.add(0>k?Ba+k:k);this.lineStart=this.lineEnd=this.point=ea},sphere:function(){Se.add(Ba)}},ja,Ga,ka,Ja,Fb,Hj,Ij,gc,Pc=new Qa,qb,bb,cb={point:dg,lineStart:Ej,lineEnd:Fj,polygonStart:function(){cb.point=Gj;cb.lineStart=cp;cb.lineEnd=dp;Pc.reset();Va.polygonStart()},polygonEnd:function(){Va.polygonEnd();cb.point=dg;cb.lineStart=Ej;cb.lineEnd=Fj;
0>be?(ja=-(ka=180),Ga=-(Ja=90)):1E-6<Pc?Ja=90:-1E-6>Pc&&(Ga=-90);bb[0]=ja;bb[1]=ka}},Rc,fe,ce,de,ee,ge,he,ie,fg,gg,hg,Nj,Oj,xa,ya,za,Ra={sphere:ea,point:eg,lineStart:Kj,lineEnd:Lj,polygonStart:function(){Ra.lineStart=hp;Ra.lineEnd=jp},polygonEnd:function(){Ra.lineStart=Kj;Ra.lineEnd=Lj}};ig.invert=ig;var ff=new Qa,ef=new Qa,kg,je,ke,Xb={sphere:ea,point:ea,lineStart:function(){Xb.point=lp;Xb.lineEnd=kp},lineEnd:ea,polygonStart:ea,polygonEnd:ea},df=[null,null],Cm={type:"LineString",coordinates:df},
Nl={Feature:function(k,q){return le(k.geometry,q)},FeatureCollection:function(k,q){k=k.features;for(var t=-1,z=k.length;++t<z;)if(le(k[t].geometry,q))return!0;return!1}},Tj={Sphere:function(){return!0},Point:function(k,q){return 0===Wb(k.coordinates,q)},MultiPoint:function(k,q){k=k.coordinates;for(var t=-1,z=k.length;++t<z;)if(0===Wb(k[t],q))return!0;return!1},LineString:function(k,q){return Uj(k.coordinates,q)},MultiLineString:function(k,q){k=k.coordinates;for(var t=-1,z=k.length;++t<z;)if(Uj(k[t],
q))return!0;return!1},Polygon:function(k,q){return Vj(k.coordinates,q)},MultiPolygon:function(k,q){k=k.coordinates;for(var t=-1,z=k.length;++t<z;)if(Vj(k[t],q))return!0;return!1},GeometryCollection:function(k,q){k=k.geometries;for(var t=-1,z=k.length;++t<z;)if(le(k[t],q))return!0;return!1}},lh=new Qa,ng=new Qa,bk,ck,lg,mg,db={point:ea,lineStart:ea,lineEnd:ea,polygonStart:function(){db.lineStart=op;db.lineEnd=qp},polygonEnd:function(){db.lineStart=db.lineEnd=db.point=ea;lh.add(Y(ng));ng.reset()},result:function(){var k=
lh/2;lh.reset();return k}},vc=Infinity,Te=vc,nd=-vc,Ue=nd,qe={point:function(k,q){k<vc&&(vc=k);k>nd&&(nd=k);q<Te&&(Te=q);q>Ue&&(Ue=q)},lineStart:ea,lineEnd:ea,polygonStart:ea,polygonEnd:ea,result:function(){var k=[[vc,Te],[nd,Ue]];nd=Ue=-(Te=vc=Infinity);return k}},og=0,pg=0,Sc=0,ne=0,oe=0,hc=0,qg=0,rg=0,Tc=0,gk,hk,Wa,Xa,Ka={point:Gb,lineStart:dk,lineEnd:ek,polygonStart:function(){Ka.lineStart=tp;Ka.lineEnd=vp},polygonEnd:function(){Ka.point=Gb;Ka.lineStart=dk;Ka.lineEnd=ek},result:function(){var k=
Tc?[qg/Tc,rg/Tc]:hc?[ne/hc,oe/hc]:Sc?[og/Sc,pg/Sc]:[NaN,NaN];og=pg=Sc=ne=oe=hc=qg=rg=Tc=0;return k}};ik.prototype={_radius:4.5,pointRadius:function(k){return this._radius=k,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath();this._point=NaN},point:function(k,q){switch(this._point){case 0:this._context.moveTo(k,q);this._point=1;break;case 1:this._context.lineTo(k,q);break;
default:this._context.moveTo(k+this._radius,q),this._context.arc(k,q,this._radius,0,Ba)}},result:ea};var sg=new Qa,mh,kk,lk,Vc,Wc,Uc={point:ea,lineStart:function(){Uc.point=wp},lineEnd:function(){mh&&jk(kk,lk);Uc.point=ea},polygonStart:function(){mh=!0},polygonEnd:function(){mh=null},result:function(){var k=+sg;sg.reset();return k}};mk.prototype={_radius:4.5,_circle:nk(4.5),pointRadius:function(k){(k=+k)!==this._radius&&(this._radius=k,this._circle=null);return this},polygonStart:function(){this._line=
0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z");this._point=NaN},point:function(k,q){switch(this._point){case 0:this._string.push("M",k,",",q);this._point=1;break;case 1:this._string.push("L",k,",",q);break;default:null==this._circle&&(this._circle=nk(this._radius)),this._string.push("M",k,",",q,this._circle)}},result:function(){if(this._string.length){var k=this._string.join("");this._string=[];return k}return null}};
var ok=Qh(function(){return!0},function(k){var q=NaN,t=NaN,z=NaN,D;return{lineStart:function(){k.lineStart();D=1},point:function(F,I){var J=0<F?Z:-Z,u=Y(F-q);if(1E-6>Y(u-Z))k.point(q,t=0<(t+I)/2?ha:-ha),k.point(z,t),k.lineEnd(),k.lineStart(),k.point(J,t),k.point(F,t),D=0;else if(z!==J&&u>=Z){1E-6>Y(q-z)&&(q-=1E-6*z);1E-6>Y(F-J)&&(F-=1E-6*J);var u=q,y=t,G=F,H,N,P=O(u-G);t=1E-6<Y(P)?kc((O(y)*(N=V(I))*O(G)-O(I)*(H=V(y))*O(u))/(H*N*P)):(y+I)/2;k.point(z,t);k.lineEnd();k.lineStart();k.point(J,t);D=0}k.point(q=
F,t=I);z=J},lineEnd:function(){k.lineEnd();q=t=NaN},clean:function(){return 2-D}}},function(k,q,t,z){null==k?(t*=ha,z.point(-Z,t),z.point(0,t),z.point(Z,t),z.point(Z,0),z.point(Z,-t),z.point(0,-t),z.point(-Z,-t),z.point(-Z,0),z.point(-Z,t)):1E-6<Y(k[0]-q[0])?(k=k[0]<q[0]?Z:-Z,t=t*k/2,z.point(-k,t),z.point(0,t),z.point(k,t)):z.point(q[0],q[1])},[-Z,-ha]);tg.prototype={constructor:tg,point:function(k,q){this.stream.point(k,q)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},
lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var xp=V(30*T),yp=pe({point:function(k,q){this.stream.point(k*T,q*T)}}),nh=pk(function(k){return ma(2/(1+k))});nh.invert=Yc(function(k){return 2*Ca(k/2)});var oh=pk(function(k){return(k=wj(k))&&k/O(k)});oh.invert=Yc(function(k){return k});Zc.invert=function(k,q){return[k,2*kc(Ml(q))-ha]};$c.invert=$c;wg.invert=Yc(kc);xg.invert=Yc(Ca);yg.invert=Yc(function(k){return 2*
kc(k)});zg.invert=function(k,q){return[-q,2*kc(Ml(k))-ha]};lc.prototype=Ag.prototype={constructor:lc,count:function(){return this.eachAfter(Gp)},each:function(k){var q,t=[this],z;do{var D=t.reverse();for(t=[];q=D.pop();)if(k(q),q=q.children){var F=0;for(z=q.length;F<z;++F)t.push(q[F])}}while(t.length);return this},eachAfter:function(k){for(var q,t=[this],z=[],D,F;q=t.pop();)if(z.push(q),q=q.children)for(D=0,F=q.length;D<F;++D)t.push(q[D]);for(;q=z.pop();)k(q);return this},eachBefore:function(k){for(var q,
t=[this],z;q=t.pop();)if(k(q),q=q.children)for(z=q.length-1;0<=z;--z)t.push(q[z]);return this},sum:function(k){return this.eachAfter(function(q){for(var t=+k(q.data)||0,z=q.children,D=z&&z.length;0<=--D;)t+=z[D].value;q.value=t})},sort:function(k){return this.eachBefore(function(q){q.children&&q.children.sort(k)})},path:function(k){var q=this;var t=q;var z=k;if(t!==z){var D=t.ancestors(),F=z.ancestors(),I=null;t=D.pop();for(z=F.pop();t===z;)I=t,t=D.pop(),z=F.pop();t=I}for(z=[q];q!==t;)q=q.parent,
z.push(q);for(q=z.length;k!==t;)z.splice(q,0,k),k=k.parent;return z},ancestors:function(){for(var k=this,q=[k];k=k.parent;)q.push(k);return q},descendants:function(){var k=[];this.each(function(q){k.push(q)});return k},leaves:function(){var k=[];this.eachBefore(function(q){q.children||k.push(q)});return k},links:function(){var k=this,q=[];k.each(function(t){t!==k&&q.push({source:t.parent,target:t})});return q},copy:function(){return Ag(this).eachBefore(Ip)}};var Tr={depth:-1},Ol={};ve.prototype=Object.create(lc.prototype);
var Pl=(1+Math.sqrt(5))/2,Ql=function q(t){function z(q,z,I,J,u){Ak(t,q,z,I,J,u)}z.ratio=function(t){return q(1<(t=+t)?t:1)};return z}(Pl),Ur=function t(z){function D(t,D,J,u,y){var G;if((G=t._squarify)&&G.ratio===z)for(var F,I,P=-1,R,d=G.length,g=t.value;++P<d;){t=G[P];F=t.children;I=t.value=0;for(R=F.length;I<R;++I)t.value+=F[I].value;t.dice?xc(t,D,J,u,J+=(y-J)*t.value/g):td(t,D,J,D+=(u-D)*t.value/g,y);g-=t.value}else t._squarify=G=Ak(z,t,D,J,u,y),G.ratio=z}D.ratio=function(z){return t(1<(z=+z)?
z:1)};return D}(Pl),Vr=[].slice,Qp={};Eg.prototype=Dk.prototype={constructor:Eg,defer:function(t){if("function"!==typeof t)throw Error("invalid callback");if(this._call)throw Error("defer after await");if(null!=this._error)return this;var z=Vr.call(arguments,1);z.push(t);++this._waiting;this._tasks.push(z);Ck(this);return this},abort:function(){null==this._error&&Fg(this,Error("abort"));return this},await:function(t){if("function"!==typeof t)throw Error("invalid callback");if(this._call)throw Error("multiple await");
this._call=function(z,D){t.apply(null,[z].concat(D))};we(this);return this},awaitAll:function(t){if("function"!==typeof t)throw Error("invalid callback");if(this._call)throw Error("multiple await");this._call=t;we(this);return this}};var Wr=function z(D){function F(z,F){z=null==z?0:+z;F=null==F?1:+F;1===arguments.length?(F=z,z=0):F-=z;return function(){return D()*F+z}}F.source=z;return F}(Tb),Rl=function D(F){function I(D,u){var y,G;D=null==D?0:+D;u=null==u?1:+u;return function(){if(null!=y){var H=
y;y=null}else{do y=2*F()-1,H=2*F()-1,G=y*y+H*H;while(!G||1<G)}return D+u*H*Math.sqrt(-2*Math.log(G)/G)}}I.source=D;return I}(Tb),Xr=function F(I){function J(){var u=Rl.source(I).apply(this,arguments);return function(){return Math.exp(u())}}J.source=F;return J}(Tb),Sl=function I(J){function u(u){return function(){for(var y=0,H=0;H<u;++H)y+=J();return y}}u.source=I;return u}(Tb),Yr=function J(u){function y(y){var G=Sl.source(u)(y);return function(){return G()/y}}y.source=J;return y}(Tb),Zr=function u(y){function G(u){return function(){return-Math.log(1-
y())/u}}G.source=u;return G}(Tb),$r=sd("text/html",function(u){return document.createRange().createContextualFragment(u.responseText)}),as=sd("application/json",function(u){return JSON.parse(u.responseText)}),bs=sd("text/plain",function(u){return u.responseText}),cs=sd("application/xml",function(u){u=u.responseXML;if(!u)throw Error("parse error");return u}),ds=Jh("text/csv",Kl),es=Jh("text/tab-separated-values",Ll),Tl=Array.prototype,Kg=Tl.map,sb=Tl.slice,Hg={name:"implicit"},Fk=[0,1],Mg=new Date,
Ng=new Date,Ob=oa(function(){},function(u,y){u.setTime(+u+y)},function(u,y){return y-u});Ob.every=function(u){u=Math.floor(u);return isFinite(u)&&0<u?1<u?oa(function(y){y.setTime(Math.floor(y/u)*u)},function(y,G){y.setTime(+y+G*u)},function(y,G){return(G-y)/u}):Ob:null};var Ul=Ob.range,od=oa(function(u){u.setTime(1E3*Math.floor(u/1E3))},function(u,y){u.setTime(+u+1E3*y)},function(u,y){return(y-u)/1E3},function(u){return u.getUTCSeconds()}),Vl=od.range,ph=oa(function(u){u.setTime(6E4*Math.floor(u/
6E4))},function(u,y){u.setTime(+u+6E4*y)},function(u,y){return(y-u)/6E4},function(u){return u.getMinutes()}),fs=ph.range,qh=oa(function(u){var y=6E4*u.getTimezoneOffset()%36E5;0>y&&(y+=36E5);u.setTime(36E5*Math.floor((+u-y)/36E5)+y)},function(u,y){u.setTime(+u+36E5*y)},function(u,y){return(y-u)/36E5},function(u){return u.getHours()}),gs=qh.range,ze=oa(function(u){u.setHours(0,0,0,0)},function(u,y){u.setDate(u.getDate()+y)},function(u,y){return(y-u-6E4*(y.getTimezoneOffset()-u.getTimezoneOffset()))/
864E5},function(u){return u.getDate()-1}),hs=ze.range,dd=Jb(0),Qg=Jb(1),Wl=Jb(2),Xl=Jb(3),Yl=Jb(4),Zl=Jb(5),$l=Jb(6),am=dd.range,is=Qg.range,js=Wl.range,ks=Xl.range,ls=Yl.range,ms=Zl.range,ns=$l.range,rh=oa(function(u){u.setDate(1);u.setHours(0,0,0,0)},function(u,y){u.setMonth(u.getMonth()+y)},function(u,y){return y.getMonth()-u.getMonth()+12*(y.getFullYear()-u.getFullYear())},function(u){return u.getMonth()}),os=rh.range,Lb=oa(function(u){u.setMonth(0,1);u.setHours(0,0,0,0)},function(u,y){u.setFullYear(u.getFullYear()+
y)},function(u,y){return y.getFullYear()-u.getFullYear()},function(u){return u.getFullYear()});Lb.every=function(u){return isFinite(u=Math.floor(u))&&0<u?oa(function(y){y.setFullYear(Math.floor(y.getFullYear()/u)*u);y.setMonth(0,1);y.setHours(0,0,0,0)},function(y,G){y.setFullYear(y.getFullYear()+G*u)}):null};var ps=Lb.range,sh=oa(function(u){u.setUTCSeconds(0,0)},function(u,y){u.setTime(+u+6E4*y)},function(u,y){return(y-u)/6E4},function(u){return u.getUTCMinutes()}),qs=sh.range,th=oa(function(u){u.setUTCMinutes(0,
0,0)},function(u,y){u.setTime(+u+36E5*y)},function(u,y){return(y-u)/36E5},function(u){return u.getUTCHours()}),rs=th.range,Ae=oa(function(u){u.setUTCHours(0,0,0,0)},function(u,y){u.setUTCDate(u.getUTCDate()+y)},function(u,y){return(y-u)/864E5},function(u){return u.getUTCDate()-1}),ss=Ae.range,ed=Kb(0),Rg=Kb(1),bm=Kb(2),cm=Kb(3),dm=Kb(4),em=Kb(5),fm=Kb(6),gm=ed.range,ts=Rg.range,us=bm.range,vs=cm.range,ws=dm.range,xs=em.range,ys=fm.range,uh=oa(function(u){u.setUTCDate(1);u.setUTCHours(0,0,0,0)},function(u,
y){u.setUTCMonth(u.getUTCMonth()+y)},function(u,y){return y.getUTCMonth()-u.getUTCMonth()+12*(y.getUTCFullYear()-u.getUTCFullYear())},function(u){return u.getUTCMonth()}),zs=uh.range,Mb=oa(function(u){u.setUTCMonth(0,1);u.setUTCHours(0,0,0,0)},function(u,y){u.setUTCFullYear(u.getUTCFullYear()+y)},function(u,y){return y.getUTCFullYear()-u.getUTCFullYear()},function(u){return u.getUTCFullYear()});Mb.every=function(u){return isFinite(u=Math.floor(u))&&0<u?oa(function(y){y.setUTCFullYear(Math.floor(y.getUTCFullYear()/
u)*u);y.setUTCMonth(0,1);y.setUTCHours(0,0,0,0)},function(y,G){y.setUTCFullYear(y.getUTCFullYear()+G*u)}):null};var As=Mb.range,Qk={"-":"",_:" ",0:"0"},La=/^\s*\d+/,Mq=/^%/,Lq=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,nc;Wk({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),
shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")});var Bs=Date.prototype.toISOString?Nq:d3.utcFormat("%Y-%m-%dT%H:%M:%S.%LZ"),Cs=+new Date("2000-01-01T00:00:00.000Z")?Oq:d3.utcParse("%Y-%m-%dT%H:%M:%S.%LZ"),Rq=6048E5,Xk=2592E6,Tg=31536E6,Ds=hb("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Es=hb("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),Fs=hb("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),
Gs=hb("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),Hs=Ne(Pa(300,.5,0),Pa(-240,.5,1)),Is=Ne(Pa(-100,.75,.35),Pa(80,1.5,.8)),Js=Ne(Pa(260,.75,.35),Pa(80,1.5,.8)),Ve=Pa(),Ks=Be(hb("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),
Ls=Be(hb("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),
Ms=Be(hb("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),
Ns=Be(hb("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921")),
hm=Math.abs,sa=Math.atan2,Pb=Math.cos,Xq=Math.max,vh=Math.min,Ya=Math.sin,oc=Math.sqrt,tb=Math.PI,Ce=tb/2,ub=2*tb;Gh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(u,y){u=+u;y=+y;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(u,y):this._context.moveTo(u,y);break;case 1:this._point=
2;default:this._context.lineTo(u,y)}}};var im=Ug(rd);$k.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(u,y){this._curve.point(y*Math.sin(u),y*-Math.cos(u))}};var Wg=Array.prototype.slice,wh={draw:function(u,y){y=Math.sqrt(y/tb);u.moveTo(y,0);u.arc(0,0,y,0,ub)}},jm={draw:function(u,y){y=Math.sqrt(y/5)/2;u.moveTo(-3*y,-y);u.lineTo(-y,-y);u.lineTo(-y,
-3*y);u.lineTo(y,-3*y);u.lineTo(y,-y);u.lineTo(3*y,-y);u.lineTo(3*y,y);u.lineTo(y,y);u.lineTo(y,3*y);u.lineTo(-y,3*y);u.lineTo(-y,y);u.lineTo(-3*y,y);u.closePath()}},km=Math.sqrt(1/3),Os=2*km,lm={draw:function(u,y){y=Math.sqrt(y/Os);var G=y*km;u.moveTo(0,-y);u.lineTo(G,0);u.lineTo(0,y);u.lineTo(-G,0);u.closePath()}},mm=Math.sin(tb/10)/Math.sin(7*tb/10),Ps=Math.sin(ub/10)*mm,Qs=-Math.cos(ub/10)*mm,nm={draw:function(u,y){y=Math.sqrt(.8908130915292852*y);var G=Ps*y,H=Qs*y;u.moveTo(0,-y);u.lineTo(G,H);
for(var N=1;5>N;++N){var P=ub*N/5,R=Math.cos(P),P=Math.sin(P);u.lineTo(P*y,-R*y);u.lineTo(R*G-P*H,P*G+R*H)}u.closePath()}},om={draw:function(u,y){y=Math.sqrt(y);var G=-y/2;u.rect(G,G,y,y)}},xh=Math.sqrt(3),pm={draw:function(u,y){y=-Math.sqrt(y/(3*xh));u.moveTo(0,2*y);u.lineTo(-xh*y,-y);u.lineTo(xh*y,-y);u.closePath()}},Ma=Math.sqrt(3)/2,yh=1/Math.sqrt(12),Rs=3*(yh/2+1),qm={draw:function(u,y){var G=Math.sqrt(y/Rs);y=G/2;var H=G*yh,G=G*yh+G,N=-y;u.moveTo(y,H);u.lineTo(y,G);u.lineTo(N,G);u.lineTo(-.5*
y-Ma*H,Ma*y+-.5*H);u.lineTo(-.5*y-Ma*G,Ma*y+-.5*G);u.lineTo(-.5*N-Ma*G,Ma*N+-.5*G);u.lineTo(-.5*y+Ma*H,-.5*H-Ma*y);u.lineTo(-.5*y+Ma*G,-.5*G-Ma*y);u.lineTo(-.5*N+Ma*G,-.5*G-Ma*N);u.closePath()}},Ss=[wh,jm,lm,om,nm,pm,qm];Fe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN;this._point=0},lineEnd:function(){switch(this._point){case 3:Ee(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||
0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(u,y){u=+u;y=+y;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(u,y):this._context.moveTo(u,y);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Ee(this,u,y)}this._x0=this._x1;this._x1=u;this._y0=this._y1;this._y1=y}};al.prototype={areaStart:fb,areaEnd:fb,lineStart:function(){this._x0=this._x1=
this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN;this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2);this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3);this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3);this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(u,
y){u=+u;y=+y;switch(this._point){case 0:this._point=1;this._x2=u;this._y2=y;break;case 1:this._point=2;this._x3=u;this._y3=y;break;case 2:this._point=3;this._x4=u;this._y4=y;this._context.moveTo((this._x0+4*this._x1+u)/6,(this._y0+4*this._y1+y)/6);break;default:Ee(this,u,y)}this._x0=this._x1;this._x1=u;this._y0=this._y1;this._y1=y}};bl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN;this._point=0},lineEnd:function(){(this._line||
0!==this._line&&3===this._point)&&this._context.closePath();this._line=1-this._line},point:function(u,y){u=+u;y=+y;switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var G=(this._x0+4*this._x1+u)/6,H=(this._y0+4*this._y1+y)/6;this._line?this._context.lineTo(G,H):this._context.moveTo(G,H);break;case 3:this._point=4;default:Ee(this,u,y)}this._x0=this._x1;this._x1=u;this._y0=this._y1;this._y1=y}};cl.prototype={lineStart:function(){this._x=[];this._y=[];this._basis.lineStart()},
lineEnd:function(){var u=this._x,y=this._y,G=u.length-1;if(0<G)for(var H=u[0],N=y[0],P=u[G]-H,R=y[G]-N,d=-1,g;++d<=G;)g=d/G,this._basis.point(this._beta*u[d]+(1-this._beta)*(H+g*P),this._beta*y[d]+(1-this._beta)*(N+g*R));this._x=this._y=null;this._basis.lineEnd()},point:function(u,y){this._x.push(+u);this._y.push(+y)}};var Ts=function y(G){function H(y){return 1===G?new Fe(y):new cl(y,G)}H.beta=function(G){return y(+G)};return H}(.85);Xg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=
NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Ge(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(y,G){y=+y;G=+G;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(y,G):this._context.moveTo(y,G);break;case 1:this._point=2;this._x1=y;this._y1=
G;break;case 2:this._point=3;default:Ge(this,y,G)}this._x0=this._x1;this._x1=this._x2;this._x2=y;this._y0=this._y1;this._y1=this._y2;this._y2=G}};var Us=function G(H){function N(G){return new Xg(G,H)}N.tension=function(H){return G(+H)};return N}(0);Yg.prototype={areaStart:fb,areaEnd:fb,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN;this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,
this._y3);this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3);this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(G,H){G=+G;H=+H;switch(this._point){case 0:this._point=1;this._x3=G;this._y3=H;break;case 1:this._point=2;this._context.moveTo(this._x4=G,this._y4=H);break;case 2:this._point=3;this._x5=G;this._y5=H;break;default:Ge(this,G,H)}this._x0=this._x1;this._x1=this._x2;this._x2=
G;this._y0=this._y1;this._y1=this._y2;this._y2=H}};var Vs=function H(N){function P(H){return new Yg(H,N)}P.tension=function(N){return H(+N)};return P}(0);Zg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath();this._line=1-this._line},point:function(H,N){H=+H;N=+N;switch(this._point){case 0:this._point=
1;break;case 1:this._point=2;break;case 2:this._point=3;this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ge(this,H,N)}this._x0=this._x1;this._x1=this._x2;this._x2=H;this._y0=this._y1;this._y1=this._y2;this._y2=N}};var Ws=function N(P){function R(d){return new Zg(d,P)}R.tension=function(d){return N(+d)};return R}(0);dl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=
this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(N,P){N=+N;P=+P;if(this._point){var R=this._x2-N,d=this._y2-P;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(R*R+d*d,this._alpha))}switch(this._point){case 0:this._point=
1;this._line?this._context.lineTo(N,P):this._context.moveTo(N,P);break;case 1:this._point=2;break;case 2:this._point=3;default:$g(this,N,P)}this._l01_a=this._l12_a;this._l12_a=this._l23_a;this._l01_2a=this._l12_2a;this._l12_2a=this._l23_2a;this._x0=this._x1;this._x1=this._x2;this._x2=N;this._y0=this._y1;this._y1=this._y2;this._y2=P}};var Xs=function P(R){function d(d){return R?new dl(d,R):new Xg(d,0)}d.alpha=function(d){return P(+d)};return d}(.5);el.prototype={areaStart:fb,areaEnd:fb,lineStart:function(){this._x0=
this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3);this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3);this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(P,
R){P=+P;R=+R;if(this._point){var d=this._x2-P,g=this._y2-R;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(d*d+g*g,this._alpha))}switch(this._point){case 0:this._point=1;this._x3=P;this._y3=R;break;case 1:this._point=2;this._context.moveTo(this._x4=P,this._y4=R);break;case 2:this._point=3;this._x5=P;this._y5=R;break;default:$g(this,P,R)}this._l01_a=this._l12_a;this._l12_a=this._l23_a;this._l01_2a=this._l12_2a;this._l12_2a=this._l23_2a;this._x0=this._x1;this._x1=this._x2;this._x2=P;this._y0=this._y1;this._y1=
this._y2;this._y2=R}};var Ys=function R(d){function g(g){return d?new el(g,d):new Yg(g,0)}g.alpha=function(d){return R(+d)};return g}(.5);fl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath();this._line=1-this._line},
point:function(R,d){R=+R;d=+d;if(this._point){var g=this._x2-R,r=this._y2-d;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(g*g+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:$g(this,R,d)}this._l01_a=this._l12_a;this._l12_a=this._l23_a;this._l01_2a=this._l12_2a;this._l12_2a=this._l23_2a;this._x0=this._x1;this._x1=
this._x2;this._x2=R;this._y0=this._y1;this._y1=this._y2;this._y2=d}};var Zs=function d(g){function r(d){return g?new fl(d,g):new Zg(d,0)}r.alpha=function(g){return d(+g)};return r}(.5);gl.prototype={areaStart:fb,areaEnd:fb,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(d,g){d=+d;g=+g;this._point?this._context.lineTo(d,g):(this._point=1,this._context.moveTo(d,g))}};He.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=
NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN;this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:ah(this,this._t0,il(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(d,g){var r=NaN;d=+d;g=+g;if(d!==this._x1||g!==this._y1){switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(d,g):this._context.moveTo(d,g);break;
case 1:this._point=2;break;case 2:this._point=3;ah(this,il(this,r=hl(this,d,g)),r);break;default:ah(this,this._t0,r=hl(this,d,g))}this._x0=this._x1;this._x1=d;this._y0=this._y1;this._y1=g;this._t0=r}}};(jl.prototype=Object.create(He.prototype)).point=function(d,g){He.prototype.point.call(this,g,d)};kl.prototype={moveTo:function(d,g){this._context.moveTo(g,d)},closePath:function(){this._context.closePath()},lineTo:function(d,g){this._context.lineTo(g,d)},bezierCurveTo:function(d,g,r,n,m,w){this._context.bezierCurveTo(g,
d,n,r,w,m)}};ll.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[];this._y=[]},lineEnd:function(){var d=this._x,g=this._y,r=d.length;if(r)if(this._line?this._context.lineTo(d[0],g[0]):this._context.moveTo(d[0],g[0]),2===r)this._context.lineTo(d[1],g[1]);else for(var n=ml(d),m=ml(g),w=0,C=1;C<r;++w,++C)this._context.bezierCurveTo(n[0][w],m[0][w],n[1][w],m[1][w],d[C],g[C]);(this._line||0!==this._line&&1===r)&&this._context.closePath();this._line=
1-this._line;this._x=this._y=null},point:function(d,g){this._x.push(+d);this._y.push(+g)}};Ie.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN;this._point=0},lineEnd:function(){0<this._t&&1>this._t&&2===this._point&&this._context.lineTo(this._x,this._y);(this._line||0!==this._line&&1===this._point)&&this._context.closePath();0<=this._line&&(this._t=1-this._t,this._line=1-this._line)},point:function(d,g){d=+d;g=+g;switch(this._point){case 0:this._point=
1;this._line?this._context.lineTo(d,g):this._context.moveTo(d,g);break;case 1:this._point=2;default:if(0>=this._t)this._context.lineTo(this._x,g),this._context.lineTo(d,g);else{var r=this._x*(1-this._t)+d*this._t;this._context.lineTo(r,this._y);this._context.lineTo(r,g)}}this._x=d;this._y=g}};Je.prototype={constructor:Je,insert:function(d,g){var r;if(d){g.P=d;if(g.N=d.N)d.N.P=g;d.N=g;if(d.R){for(d=d.R;d.L;)d=d.L;d.L=g}else d.R=g;var n=d}else this._?(d=nl(this._),g.P=null,g.N=d,d.P=d.L=g,n=d):(g.P=
g.N=null,this._=g,n=null);g.L=g.R=null;g.U=n;g.C=!0;for(d=g;n&&n.C;)g=n.U,n===g.L?(r=g.R)&&r.C?(n.C=r.C=!1,g.C=!0,d=g):(d===n.R&&(gd(this,n),d=n,n=d.U),n.C=!1,g.C=!0,hd(this,g)):(r=g.L)&&r.C?(n.C=r.C=!1,g.C=!0,d=g):(d===n.L&&(hd(this,n),d=n,n=d.U),n.C=!1,g.C=!0,gd(this,g)),n=d.U;this._.C=!1},remove:function(d){d.N&&(d.N.P=d.P);d.P&&(d.P.N=d.N);d.N=d.P=null;var g=d.U,r=d.L,n=d.R;var m=r?n?nl(n):r:n;g?g.L===d?g.L=m:g.R=m:this._=m;if(r&&n){var w=m.C;m.C=d.C;m.L=r;r.U=m;m!==n?(g=m.U,m.U=d.U,d=m.R,g.L=
d,m.R=n,n.U=m):(m.U=g,g=m,d=m.R)}else w=d.C,d=m;d&&(d.U=g);if(!w)if(d&&d.C)d.C=!1;else{do{if(d===this._)break;if(d===g.L){if(d=g.R,d.C&&(d.C=!1,g.C=!0,gd(this,g),d=g.R),d.L&&d.L.C||d.R&&d.R.C){d.R&&d.R.C||(d.L.C=!1,d.C=!0,hd(this,d),d=g.R);d.C=g.C;g.C=d.R.C=!1;gd(this,g);d=this._;break}}else if(d=g.L,d.C&&(d.C=!1,g.C=!0,hd(this,g),d=g.L),d.L&&d.L.C||d.R&&d.R.C){d.L&&d.L.C||(d.R.C=!1,d.C=!0,gd(this,d),d=g.L);d.C=g.C;g.C=d.L.C=!1;hd(this,g);d=this._;break}d.C=!0;d=g;g=g.U}while(!d.C);d&&(d.C=!1)}}};
var pl=[],bh,rl=[],aa=1E-6,kr=1E-12,rc,Ia,kd,ra;dh.prototype={constructor:dh,polygons:function(){var d=this.edges;return this.cells.map(function(g){var r=g.halfedges.map(function(n){return ol(g,d[n])});r.data=g.site.data;return r})},triangles:function(){var d=[],g=this.edges;this.cells.forEach(function(r,n){if(C=(m=r.halfedges).length){r=r.site;for(var m,w=-1,C,B,A=g[m[C-1]],A=A.left===r?A.right:A.left;++w<C;)B=A,A=g[m[w]],A=A.left===r?A.right:A.left,B&&A&&n<B.index&&n<A.index&&0>(r[0]-A[0])*(B[1]-
r[1])-(r[0]-B[0])*(A[1]-r[1])&&d.push([r.data,B.data,A.data])}});return d},links:function(){return this.edges.filter(function(d){return d.right}).map(function(d){return{source:d.left.data,target:d.right.data}})},find:function(d,g,r){var n=this,m=n._found||0;var w=n.cells.length;for(var C;!(C=n.cells[m]);)if(++m>=w)return null;w=d-C.site[0];var B=g-C.site[1],A=w*w+B*B;do C=n.cells[w=m],m=null,C.halfedges.forEach(function(r){var w=n.edges[r];r=w.left;if(r!==C.site&&r||(r=w.right)){var w=d-r[0],B=g-
r[1],w=w*w+B*B;w<A&&(A=w,m=r.index)}});while(null!==m);n._found=w;return null==r||A<=r*r?C.site:null}};eb.prototype={constructor:eb,scale:function(d){return 1===d?this:new eb(this.k*d,this.x,this.y)},translate:function(d,g){return 0===d&0===g?this:new eb(this.k,this.x+this.k*d,this.y+this.k*g)},apply:function(d){return[d[0]*this.k+this.x,d[1]*this.k+this.y]},applyX:function(d){return d*this.k+this.x},applyY:function(d){return d*this.k+this.y},invert:function(d){return[(d[0]-this.x)/this.k,(d[1]-this.y)/
this.k]},invertX:function(d){return(d-this.x)/this.k},invertY:function(d){return(d-this.y)/this.k},rescaleX:function(d){return d.copy().domain(d.range().map(this.invertX,this).map(d.invert,d))},rescaleY:function(d){return d.copy().domain(d.range().map(this.invertY,this).map(d.invert,d))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var eh=new eb(1,0,0);tl.prototype=eb.prototype;d3.version="4.9.1";d3.bisect=Ib;d3.bisectRight=Ib;d3.bisectLeft=qr;d3.ascending=yb;d3.bisector=
wf;d3.cross=function(d,g,r){var n=d.length,m=g.length,w=Array(n*m),C,B,A;null==r&&(r=Fi);for(C=A=0;C<n;++C){var M=d[C];for(B=0;B<m;++B,++A)w[A]=r(M,g[B])}return w};d3.descending=function(d,g){return g<d?-1:g>d?1:g>=d?0:NaN};d3.deviation=Di;d3.extent=Ci;d3.histogram=function(){function d(d){var m,C=d.length,B=Array(C);for(m=0;m<C;++m)B[m]=g(d[m],m,d);m=r(B);var A=m[0],M=m[1],E=n(B,A,M);Array.isArray(E)||(E=Gc(A,M,E),E=Oa(Math.ceil(A/E)*E,Math.floor(M/E)*E,E));for(var K=E.length;E[0]<=A;)E.shift(),
--K;for(;E[K-1]>M;)E.pop(),--K;var L=Array(K+1);for(m=0;m<=K;++m){var S=L[m]=[];S.x0=0<m?E[m-1]:A;S.x1=m<K?E[m]:M}for(m=0;m<C;++m)S=B[m],A<=S&&S<=M&&L[Ib(E,S,0,K)].push(d[m]);return L}var g=Um,r=Ci,n=Bi;d.value=function(m){return arguments.length?(g="function"===typeof m?m:Kd(m),d):g};d.domain=function(g){return arguments.length?(r="function"===typeof g?g:Kd([g[0],g[1]]),d):r};d.thresholds=function(g){return arguments.length?(n="function"===typeof g?g:Array.isArray(g)?Kd(rr.call(g)):Kd(g),d):n};return d};
d3.thresholdFreedmanDiaconis=function(d,g,r){d=sr.call(d,mb).sort(yb);return Math.ceil((r-g)/(2*(Ec(d,.75)-Ec(d,.25))*Math.pow(d.length,-1/3)))};d3.thresholdScott=function(d,g,r){return Math.ceil((r-g)/(3.5*Di(d)*Math.pow(d.length,-1/3)))};d3.thresholdSturges=Bi;d3.max=function(d,g){var r=d.length,n=-1,m,w;if(null==g)for(;++n<r;){if(null!=(m=d[n])&&m>=m)for(w=m;++n<r;)null!=(m=d[n])&&m>w&&(w=m)}else for(;++n<r;)if(null!=(m=g(d[n],n,d))&&m>=m)for(w=m;++n<r;)null!=(m=g(d[n],n,d))&&m>w&&(w=m);return w};
d3.mean=function(d,g){var r=d.length,n=r,m=-1,w,C=0;if(null==g)for(;++m<r;)isNaN(w=mb(d[m]))?--n:C+=w;else for(;++m<r;)isNaN(w=mb(g(d[m],m,d)))?--n:C+=w;if(n)return C/n};d3.median=function(d,g){var r=d.length,n=-1,m,w=[];if(null==g)for(;++n<r;)isNaN(m=mb(d[n]))||w.push(m);else for(;++n<r;)isNaN(m=mb(g(d[n],n,d)))||w.push(m);return Ec(w.sort(yb),.5)};d3.merge=cf;d3.min=Ai;d3.pairs=function(d,g){null==g&&(g=Fi);for(var r=0,n=d.length-1,m=d[0],w=Array(0>n?0:n);r<n;)w[r]=g(m,m=d[++r]);return w};d3.permute=
function(d,g){for(var r=g.length,n=Array(r);r--;)n[r]=d[g[r]];return n};d3.quantile=Ec;d3.range=Oa;d3.scan=function(d,g){if(r=d.length){var r,n=0,m=0,w,C=d[m];for(null==g&&(g=yb);++n<r;)if(0>g(w=d[n],C)||0!==g(C,C))C=w,m=n;if(0===g(C,C))return m}};d3.shuffle=function(d,g,r){r=(null==r?d.length:r)-(g=null==g?0:+g);for(var n,m;r;)m=Math.random()*r--|0,n=d[r+g],d[r+g]=d[m+g],d[m+g]=n;return d};d3.sum=function(d,g){var r=d.length,n=-1,m,w=0;if(null==g)for(;++n<r;){if(m=+d[n])w+=m}else for(;++n<r;)if(m=
+g(d[n],n,d))w+=m;return w};d3.ticks=vf;d3.tickIncrement=Fc;d3.tickStep=Gc;d3.transpose=zi;d3.variance=Ei;d3.zip=function(){return zi(arguments)};d3.axisTop=function(d){return Ld(1,d)};d3.axisRight=function(d){return Ld(2,d)};d3.axisBottom=function(d){return Ld(3,d)};d3.axisLeft=function(d){return Ld(4,d)};d3.brush=function(){return Vf(Jr)};d3.brushX=function(){return Vf(Xd)};d3.brushY=function(){return Vf(Wd)};d3.brushSelection=function(d){return(d=d.__brush)?d.dim.output(d.selection):null};d3.chord=
function(){function d(d){var w=d.length,B=[],A=Oa(w),M=[],E=[],K=E.groups=Array(w),L=Array(w*w),S,U;var fa=0;for(S=-1;++S<w;){var da=0;for(U=-1;++U<w;)da+=d[S][U];B.push(da);M.push(Oa(w));fa+=da}r&&A.sort(function(d,g){return r(B[d],B[g])});n&&M.forEach(function(g,m){g.sort(function(g,r){return n(d[m][g],d[m][r])})});var Q=(fa=Jl(0,Il-g*w)/fa)?g:Il/w;da=0;for(S=-1;++S<w;){var W=da;for(U=-1;++U<w;){var ia=A[S];var na=M[ia][U],Eb=d[ia][na],Db=da,O=da+=Eb*fa;L[na*w+ia]={index:ia,subindex:na,startAngle:Db,
endAngle:O,value:Eb}}K[ia]={index:ia,startAngle:W,endAngle:da,value:B[ia]};da+=Q}for(S=-1;++S<w;)for(U=S-1;++U<w;)ia=L[U*w+S],A=L[S*w+U],(ia.value||A.value)&&E.push(ia.value<A.value?{source:A,target:ia}:{source:ia,target:A});return m?E.sort(m):E}var g=0,r=null,n=null,m=null;d.padAngle=function(m){return arguments.length?(g=Jl(0,m),d):g};d.sortGroups=function(g){return arguments.length?(r=g,d):r};d.sortSubgroups=function(g){return arguments.length?(n=g,d):n};d.sortChords=function(g){return arguments.length?
(null==g?m=null:(m=Ko(g))._=g,d):m&&m._};return d};d3.ribbon=function(){function d(){var d,A=Kr.call(arguments),M=g.apply(this,A),E=r.apply(this,A),M=+n.apply(this,(A[0]=M,A)),K=m.apply(this,A)-Oe,L=w.apply(this,A)-Oe,S=M*Fl(K),U=M*Gl(K),E=+n.apply(this,(A[0]=E,A)),fa=m.apply(this,A)-Oe,A=w.apply(this,A)-Oe;C||(C=d=gb());C.moveTo(S,U);C.arc(0,0,M,K,L);if(K!==fa||L!==A)C.quadraticCurveTo(0,0,E*Fl(fa),E*Gl(fa)),C.arc(0,0,E,fa,A);C.quadraticCurveTo(0,0,S,U);C.closePath();if(d)return C=null,d+""||null}
var g=Lo,r=Mo,n=No,m=Oo,w=Po,C=null;d.radius=function(g){return arguments.length?(n="function"===typeof g?g:jf(+g),d):n};d.startAngle=function(g){return arguments.length?(m="function"===typeof g?g:jf(+g),d):m};d.endAngle=function(g){return arguments.length?(w="function"===typeof g?g:jf(+g),d):w};d.source=function(m){return arguments.length?(g=m,d):g};d.target=function(g){return arguments.length?(r=g,d):r};d.context=function(g){return arguments.length?(C=null==g?null:g,d):C};return d};d3.nest=function(){function d(g,
n,C,E){if(n>=r.length)return null!=w?w(g):null!=m?g.sort(m):g;for(var A=-1,B=g.length,M=r[n++],U,fa,da=Sa(),Q,W=C();++A<B;)(Q=da.get(U=M(fa=g[A])+""))?Q.push(fa):da.set(U,[fa]);da.each(function(g,m){E(W,m,d(g,n,C,E))});return W}function g(d,m){if(++m>r.length)return d;var A=n[m-1];if(null!=w&&m>=r.length)var B=d.entries();else B=[],d.each(function(d,n){B.push({key:n,values:g(d,m)})});return null!=A?B.sort(function(d,g){return A(d.key,g.key)}):B}var r=[],n=[],m,w,C;return C={object:function(g){return d(g,
0,Qo,Ro)},map:function(g){return d(g,0,oj,pj)},entries:function(m){return g(d(m,0,oj,pj),0)},key:function(d){r.push(d);return C},sortKeys:function(d){n[r.length-1]=d;return C},sortValues:function(d){m=d;return C},rollup:function(d){w=d;return C}}};d3.set=qj;d3.map=Sa;d3.keys=function(d){var g=[],r;for(r in d)g.push(r);return g};d3.values=function(d){var g=[],r;for(r in d)g.push(d[r]);return g};d3.entries=function(d){var g=[],r;for(r in d)g.push({key:r,value:d[r]});return g};d3.color=kb;d3.rgb=Jc;
d3.hsl=Pd;d3.lab=Qd;d3.hcl=Rd;d3.cubehelix=Pa;d3.dispatch=ib;d3.drag=function(){function d(d){d.on("mousedown.drag",g).on("touchstart.drag",m).on("touchmove.drag",w).on("touchend.drag touchcancel.drag",C).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(){if(!Q&&A.apply(this,arguments)){var d=B("mouse",M.apply(this,arguments),lb,this,arguments);d&&(Ea(d3.event.view).on("mousemove.drag",r,!0).on("mouseup.drag",n,!0),Hd(d3.event.view),d3.event.stopImmediatePropagation(),da=!1,U=d3.event.clientX,
fa=d3.event.clientY,d("start"))}}function r(){ac();if(!da){var d=d3.event.clientX-U,g=d3.event.clientY-fa;da=d*d+g*g>W}K.mouse("drag")}function n(){Ea(d3.event.view).on("mousemove.drag mouseup.drag",null);Od(d3.event.view,da);ac();K.mouse("end")}function m(){if(A.apply(this,arguments)){var d=d3.event.changedTouches,g=M.apply(this,arguments),m=d.length,n,r;for(n=0;n<m;++n)if(r=B(d[n].identifier,g,Id,this,arguments))d3.event.stopImmediatePropagation(),r("start")}}function w(){var d=d3.event.changedTouches,
g=d.length,m,n;for(m=0;m<g;++m)if(n=K[d[m].identifier])ac(),n("drag")}function C(){var d=d3.event.changedTouches,g=d.length,m,n;Q&&clearTimeout(Q);Q=setTimeout(function(){Q=null},500);for(m=0;m<g;++m)if(n=K[d[m].identifier])d3.event.stopImmediatePropagation(),n("end")}function B(g,m,n,r,w){var A=n(m,g),B,C,U,M=L.copy();if(Hc(new Df(d,"beforestart",B,g,S,A[0],A[1],0,0,M),function(){if(null==(d3.event.subject=B=E.apply(r,w)))return!1;C=B.x-A[0]||0;U=B.y-A[1]||0;return!0}))return function pd(L){var fa=
A;switch(L){case "start":K[g]=pd;var E=S++;break;case "end":delete K[g],--S;case "drag":A=n(m,g),E=S}Hc(new Df(d,L,B,g,E,A[0]+C,A[1]+U,A[0]-fa[0],A[1]-fa[1],M),M.apply,M,[L,r,w])}}var A=Ln,M=Mn,E=Nn,K={},L=ib("start","drag","end"),S=0,U,fa,da,Q,W=0;d.filter=function(g){return arguments.length?(A="function"===typeof g?g:of(!!g),d):A};d.container=function(g){return arguments.length?(M="function"===typeof g?g:of(g),d):M};d.subject=function(g){return arguments.length?(E="function"===typeof g?g:of(g),
d):E};d.on=function(){var g=L.on.apply(L,arguments);return g===L?d:g};d.clickDistance=function(g){return arguments.length?(W=(g=+g)*g,d):Math.sqrt(W)};return d};d3.dragDisable=Hd;d3.dragEnable=Od;d3.dsvFormat=hf;d3.csvParse=Kl;d3.csvParseRows=Mr;d3.csvFormat=Nr;d3.csvFormatRows=Or;d3.tsvParse=Ll;d3.tsvParseRows=Pr;d3.tsvFormat=Qr;d3.tsvFormatRows=Rr;d3.easeLinear=function(d){return+d};d3.easeQuad=gj;d3.easeQuadIn=function(d){return d*d};d3.easeQuadOut=function(d){return d*(2-d)};d3.easeQuadInOut=
gj;d3.easeCubic=Rf;d3.easeCubicIn=function(d){return d*d*d};d3.easeCubicOut=function(d){return--d*d*d+1};d3.easeCubicInOut=Rf;d3.easePoly=Bl;d3.easePolyIn=Cr;d3.easePolyOut=Dr;d3.easePolyInOut=Bl;d3.easeSin=hj;d3.easeSinIn=function(d){return 1-Math.cos(d*Cl)};d3.easeSinOut=function(d){return Math.sin(d*Cl)};d3.easeSinInOut=hj;d3.easeExp=jj;d3.easeExpIn=function(d){return Math.pow(2,10*d-10)};d3.easeExpOut=function(d){return 1-Math.pow(2,-10*d)};d3.easeExpInOut=jj;d3.easeCircle=kj;d3.easeCircleIn=
function(d){return 1-Math.sqrt(1-d*d)};d3.easeCircleOut=function(d){return Math.sqrt(1- --d*d)};d3.easeCircleInOut=kj;d3.easeBounce=Nc;d3.easeBounceIn=function(d){return 1-Nc(1-d)};d3.easeBounceOut=Nc;d3.easeBounceInOut=function(d){return(1>=(d*=2)?1-Nc(1-d):Nc(d-1)+1)/2};d3.easeBack=Dl;d3.easeBackIn=Er;d3.easeBackOut=Fr;d3.easeBackInOut=Dl;d3.easeElastic=El;d3.easeElasticIn=Gr;d3.easeElasticOut=El;d3.easeElasticInOut=Hr;d3.forceCenter=function(d,g){function r(){var m,r=n.length,C=0,B=0;for(m=0;m<
r;++m){var A=n[m];C+=A.x;B+=A.y}C=C/r-d;B=B/r-g;for(m=0;m<r;++m)A=n[m],A.x-=C,A.y-=B}var n;null==d&&(d=0);null==g&&(g=0);r.initialize=function(d){n=d};r.x=function(g){return arguments.length?(d=+g,r):d};r.y=function(d){return arguments.length?(g=+d,r):g};return r};d3.forceCollide=function(d){function g(){function d(d,g,m,n,r){var w=d.data;d=d.r;var A=fa+d;if(w)w.index>L.index&&(g=S-w.x-w.vx,m=U-w.y-w.vy,n=g*g+m*m,n<A*A&&(0===g&&(g=jb(),n+=g*g),0===m&&(m=jb(),n+=m*m),n=(A-(n=Math.sqrt(n)))/n*C,L.vx+=
(g*=n)*(A=(d*=d)/(da+d)),L.vy+=(m*=n)*A,w.vx-=g*(A=1-A),w.vy-=m*A));else return g>S+A||n<S-A||m>U+A||r<U-A}for(var g,n=m.length,K,L,S,U,fa,da,Q=0;Q<B;++Q)for(K=$d(m,Uo,Vo).visitAfter(r),g=0;g<n;++g)L=m[g],fa=w[L.index],da=fa*fa,S=L.x+L.vx,U=L.y+L.vy,K.visit(d)}function r(d){if(d.data)return d.r=w[d.data.index];for(var g=d.r=0;4>g;++g)d[g]&&d[g].r>d.r&&(d.r=d[g].r)}function n(){if(m){var g,n=m.length;w=Array(n);for(g=0;g<n;++g){var r=m[g];w[r.index]=+d(r,g,m)}}}var m,w,C=1,B=1;"function"!==typeof d&&
(d=va(null==d?1:+d));g.initialize=function(d){m=d;n()};g.iterations=function(d){return arguments.length?(B=+d,g):B};g.strength=function(d){return arguments.length?(C=+d,g):C};g.radius=function(m){return arguments.length?(d="function"===typeof m?m:va(+m),n(),g):d};return g};d3.forceLink=function(d){function g(d){return 1/Math.min(K[d.source.index],K[d.target.index])}function r(g){for(var m=0,n=d.length;m<S;++m)for(var r=0,w,A,C,U,E;r<n;++r)w=d[r],A=w.source,w=w.target,C=w.x+w.vx-A.x-A.vx||jb(),U=w.y+
w.vy-A.y-A.vy||jb(),E=Math.sqrt(C*C+U*U),E=(E-M[r])/E*g*B[r],C*=E,U*=E,w.vx-=C*(E=L[r]),w.vy-=U*E,A.vx+=C*(E=1-E),A.vy+=U*E}function n(){if(E){var g=E.length,n=d.length,r=Sa(E,C);var A=0;for(K=Array(g);A<n;++A)g=d[A],g.index=A,"object"!==typeof g.source&&(g.source=tj(r,g.source)),"object"!==typeof g.target&&(g.target=tj(r,g.target)),K[g.source.index]=(K[g.source.index]||0)+1,K[g.target.index]=(K[g.target.index]||0)+1;A=0;for(L=Array(n);A<n;++A)g=d[A],L[A]=K[g.source.index]/(K[g.source.index]+K[g.target.index]);
B=Array(n);m();M=Array(n);w()}}function m(){if(E)for(var m=0,n=d.length;m<n;++m)B[m]=+g(d[m],m,d)}function w(){if(E)for(var g=0,m=d.length;g<m;++g)M[g]=+A(d[g],g,d)}var C=Wo,B,A=va(30),M,E,K,L,S=1;null==d&&(d=[]);r.initialize=function(d){E=d;n()};r.links=function(g){return arguments.length?(d=g,n(),r):d};r.id=function(d){return arguments.length?(C=d,r):C};r.iterations=function(d){return arguments.length?(S=+d,r):S};r.strength=function(d){return arguments.length?(g="function"===typeof d?d:va(+d),m(),
r):g};r.distance=function(d){return arguments.length?(A="function"===typeof d?d:va(+d),w(),r):A};return r};d3.forceManyBody=function(){function d(d){var g,A=m.length,B=$d(m,Xo,Yo).visitAfter(r);C=d;for(g=0;g<A;++g)w=m[g],B.visit(n)}function g(){if(m){var d,g=m.length;A=Array(g);for(d=0;d<g;++d){var n=m[d];A[n.index]=+B(n,d,m)}}}function r(d){var g=0,m,n,r,w,B;if(d.length){for(r=w=B=0;4>B;++B)(m=d[B])&&(n=m.value)&&(g+=n,r+=n*m.x,w+=n*m.y);d.x=r/g;d.y=w/g}else{m=d;m.x=m.data.x;m.y=m.data.y;do g+=A[m.data.index];
while(m=m.next)}d.value=g}function n(d,g,m,n){if(!d.value)return!0;var r=d.x-w.x,B=d.y-w.y;g=n-g;n=r*r+B*B;if(g*g/K<n)return n<E&&(0===r&&(r=jb(),n+=r*r),0===B&&(B=jb(),n+=B*B),n<M&&(n=Math.sqrt(M*n)),w.vx+=r*d.value*C/n,w.vy+=B*d.value*C/n),!0;if(!(d.length||n>=E)){if(d.data!==w||d.next)0===r&&(r=jb(),n+=r*r),0===B&&(B=jb(),n+=B*B),n<M&&(n=Math.sqrt(M*n));do d.data!==w&&(g=A[d.data.index]*C/n,w.vx+=r*g,w.vy+=B*g);while(d=d.next)}}var m,w,C,B=va(-30),A,M=1,E=Infinity,K=.81;d.initialize=function(d){m=
d;g()};d.strength=function(m){return arguments.length?(B="function"===typeof m?m:va(+m),g(),d):B};d.distanceMin=function(g){return arguments.length?(M=g*g,d):Math.sqrt(M)};d.distanceMax=function(g){return arguments.length?(E=g*g,d):Math.sqrt(E)};d.theta=function(g){return arguments.length?(K=g*g,d):Math.sqrt(K)};return d};d3.forceSimulation=function(d){function g(){r();S.call("tick",w);C<B&&(L.stop(),S.call("end",w))}function r(){var g,m=d.length;C+=(M-C)*A;K.each(function(d){d(C)});for(g=0;g<m;++g){var n=
d[g];null==n.fx?n.x+=n.vx*=E:(n.x=n.fx,n.vx=0);null==n.fy?n.y+=n.vy*=E:(n.y=n.fy,n.vy=0)}}function n(){for(var g=0,m=d.length,n;g<m;++g){n=d[g];n.index=g;if(isNaN(n.x)||isNaN(n.y)){var r=10*Math.sqrt(g),w=g*Sr;n.x=r*Math.cos(w);n.y=r*Math.sin(w)}if(isNaN(n.vx)||isNaN(n.vy))n.vx=n.vy=0}}function m(g){g.initialize&&g.initialize(d);return g}var w,C=1,B=.001,A=1-Math.pow(B,1/300),M=0,E=.6,K=Sa(),L=Sd(g),S=ib("tick","end");null==d&&(d=[]);n();return w={tick:r,restart:function(){return L.restart(g),w},
stop:function(){return L.stop(),w},nodes:function(g){return arguments.length?(d=g,n(),K.each(m),w):d},alpha:function(d){return arguments.length?(C=+d,w):C},alphaMin:function(d){return arguments.length?(B=+d,w):B},alphaDecay:function(d){return arguments.length?(A=+d,w):+A},alphaTarget:function(d){return arguments.length?(M=+d,w):M},velocityDecay:function(d){return arguments.length?(E=1-d,w):1-E},force:function(d,g){return 1<arguments.length?(null==g?K.remove(d):K.set(d,m(g)),w):K.get(d)},find:function(g,
m,n){var r,w=d.length;n=null==n?Infinity:n*n;for(r=0;r<w;++r){var A=d[r];var B=g-A.x;var C=m-A.y;B=B*B+C*C;if(B<n){var L=A;n=B}}return L},on:function(d,g){return 1<arguments.length?(S.on(d,g),w):S.on(d)}}};d3.forceX=function(d){function g(d){for(var g=0,n=m.length,r;g<n;++g)r=m[g],r.vx+=(C[g]-r.x)*w[g]*d}function r(){if(m){var g,r=m.length;w=Array(r);C=Array(r);for(g=0;g<r;++g)w[g]=isNaN(C[g]=+d(m[g],g,m))?0:+n(m[g],g,m)}}var n=va(.1),m,w,C;"function"!==typeof d&&(d=va(null==d?0:+d));g.initialize=
function(d){m=d;r()};g.strength=function(d){return arguments.length?(n="function"===typeof d?d:va(+d),r(),g):n};g.x=function(m){return arguments.length?(d="function"===typeof m?m:va(+m),r(),g):d};return g};d3.forceY=function(d){function g(d){for(var g=0,n=m.length,r;g<n;++g)r=m[g],r.vy+=(C[g]-r.y)*w[g]*d}function r(){if(m){var g,r=m.length;w=Array(r);C=Array(r);for(g=0;g<r;++g)w[g]=isNaN(C[g]=+d(m[g],g,m))?0:+n(m[g],g,m)}}var n=va(.1),m,w,C;"function"!==typeof d&&(d=va(null==d?0:+d));g.initialize=
function(d){m=d;r()};g.strength=function(d){return arguments.length?(n="function"===typeof d?d:va(+d),r(),g):n};g.y=function(m){return arguments.length?(d="function"===typeof m?m:va(+m),r(),g):d};return g};d3.formatDefaultLocale=uj;d3.formatLocale=ci;d3.formatSpecifier=yc;d3.precisionFixed=bi;d3.precisionPrefix=ai;d3.precisionRound=$h;d3.geoArea=function(d){Se.reset();Na(d,Va);return 2*Se};d3.geoBounds=function(d){var g,r,n;Ja=ka=-(ja=Ga=Infinity);qb=[];Na(d,cb);if(g=qb.length){qb.sort(ep);d=1;var m=
qb[0];for(r=[m];d<g;++d){var w=qb[d];Jj(m,w[0])||Jj(m,w[1])?(Ha(m[0],w[1])>Ha(m[0],m[1])&&(m[1]=w[1]),Ha(w[0],m[1])>Ha(m[0],m[1])&&(m[0]=w[0])):r.push(m=w)}var C=-Infinity;g=r.length-1;d=0;for(m=r[g];d<=g;m=w,++d)w=r[d],(n=Ha(m[1],w[0]))>C&&(C=n,ja=w[0],ka=m[1])}qb=bb=null;return Infinity===ja||Infinity===Ga?[[NaN,NaN],[NaN,NaN]]:[[ja,Ga],[ka,Ja]]};d3.geoCentroid=function(d){Rc=fe=ce=de=ee=ge=he=ie=fg=gg=hg=0;Na(d,Ra);d=fg;var g=gg,r=hg,n=d*d+g*g+r*r;return 1E-12>n&&(d=ge,g=he,r=ie,1E-6>fe&&(d=ce,
g=de,r=ee),n=d*d+g*g+r*r,1E-12>n)?[NaN,NaN]:[ta(g,d)*ba,Ca(r/ma(n))*ba]};d3.geoCircle=function(){function d(){var d=g.apply(this,arguments),A=r.apply(this,arguments)*T,M=n.apply(this,arguments)*T;m=[];w=gf(-d[0]*T,-d[1]*T,0).invert;Rh(C,A,M,1);d={type:"Polygon",coordinates:[m]};m=w=null;return d}var g=Yb([0,0]),r=Yb(90),n=Yb(6),m,w,C={point:function(d,g){m.push(d=w(d,g));d[0]*=ba;d[1]*=ba}};d.center=function(m){return arguments.length?(g="function"===typeof m?m:Yb([+m[0],+m[1]]),d):g};d.radius=function(g){return arguments.length?
(r="function"===typeof g?g:Yb(+g),d):r};d.precision=function(g){return arguments.length?(n="function"===typeof g?g:Yb(+g),d):n};return d};d3.geoClipExtent=function(){var d=0,g=0,r=960,n=500,m,w,C;return C={stream:function(C){return m&&w===C?m:m=jg(d,g,r,n)(w=C)},extent:function(B){return arguments.length?(d=+B[0][0],g=+B[0][1],r=+B[1][0],n=+B[1][1],m=w=null,C):[[d,g],[r,n]]}}};d3.geoContains=function(d,g){return(d&&Nl.hasOwnProperty(d.type)?Nl[d.type]:le)(d,g)};d3.geoDistance=Wb;d3.geoGraticule=Zj;
d3.geoGraticule10=function(){return Zj()()};d3.geoInterpolate=function(d,g){var r=d[0]*T,n=d[1]*T;d=g[0]*T;g=g[1]*T;var m=V(n),w=O(n),C=V(g),B=O(g),A=m*V(r),M=m*O(r),E=C*V(d),K=C*O(d),L=2*Ca(ma(xj(g-n)+m*C*xj(d-r))),S=O(L);d=L?function(d){var g=O(d*=L)/S,m=O(L-d)/S;d=m*A+g*E;var n=m*M+g*K,g=m*w+g*B;return[ta(n,d)*ba,ta(g,ma(d*d+n*n))*ba]}:function(){return[r*ba,n*ba]};d.distance=L;return d};d3.geoLength=Vh;d3.geoPath=function(d,g){function r(d){d&&("function"===typeof n&&w.pointRadius(+n.apply(this,
arguments)),Na(d,m(w)));return w.result()}var n=4.5,m,w;r.area=function(d){Na(d,m(db));return db.result()};r.measure=function(d){Na(d,m(Uc));return Uc.result()};r.bounds=function(d){Na(d,m(qe));return qe.result()};r.centroid=function(d){Na(d,m(Ka));return Ka.result()};r.projection=function(g){return arguments.length?(m=null==g?(d=null,wb):(d=g).stream,r):d};r.context=function(d){if(!arguments.length)return g;w=null==d?(g=null,new mk):new ik(g=d);"function"!==typeof n&&w.pointRadius(n);return r};r.pointRadius=
function(d){if(!arguments.length)return n;n="function"===typeof d?d:(w.pointRadius(+d),+d);return r};return r.projection(d).context(g)};d3.geoAlbers=Nh;d3.geoAlbersUsa=function(){function d(d){var g=d[0];d=d[1];return E=null,(w.point(g,d),E)||(B.point(g,d),E)||(M.point(g,d),E)}function g(){r=n=null;return d}var r,n,m=Nh(),w,C=ud().rotate([154,0]).center([-2,58.5]).parallels([55,65]),B,A=ud().rotate([157,0]).center([-3,19.9]).parallels([8,18]),M,E,K={point:function(d,g){E=[d,g]}};d.invert=function(d){var g=
m.scale(),n=m.translate(),r=(d[0]-n[0])/g,g=(d[1]-n[1])/g;return(.12<=g&&.234>g&&-.425<=r&&-.214>r?C:.166<=g&&.234>g&&-.214<=r&&-.115>r?A:m).invert(d)};d.stream=function(d){return r&&n===d?r:r=Ap([m.stream(n=d),C.stream(d),A.stream(d)])};d.precision=function(d){if(!arguments.length)return m.precision();m.precision(d);C.precision(d);A.precision(d);return g()};d.scale=function(g){if(!arguments.length)return m.scale();m.scale(g);C.scale(.35*g);A.scale(g);return d.translate(m.translate())};d.translate=
function(d){if(!arguments.length)return m.translate();var n=m.scale(),r=+d[0],L=+d[1];w=m.translate(d).clipExtent([[r-.455*n,L-.238*n],[r+.455*n,L+.238*n]]).stream(K);B=C.translate([r-.307*n,L+.201*n]).clipExtent([[r-.425*n+1E-6,L+.12*n+1E-6],[r-.214*n-1E-6,L+.234*n-1E-6]]).stream(K);M=A.translate([r-.205*n,L+.212*n]).clipExtent([[r-.214*n+1E-6,L+.166*n+1E-6],[r-.115*n-1E-6,L+.234*n-1E-6]]).stream(K);return g()};d.fitExtent=function(g,m){return ic(d,g,m)};d.fitSize=function(g,m){return ic(d,[[0,0],
g],m)};return d.scale(1070)};d3.geoAzimuthalEqualArea=function(){return rb(nh).scale(124.75).clipAngle(179.999)};d3.geoAzimuthalEqualAreaRaw=nh;d3.geoAzimuthalEquidistant=function(){return rb(oh).scale(79.4188).clipAngle(179.999)};d3.geoAzimuthalEquidistantRaw=oh;d3.geoConicConformal=function(){return af(rk).scale(109.5).parallels([30,30])};d3.geoConicConformalRaw=rk;d3.geoConicEqualArea=ud;d3.geoConicEqualAreaRaw=Oh;d3.geoConicEquidistant=function(){return af(sk).scale(131.154).center([0,13.9389])};
d3.geoConicEquidistantRaw=sk;d3.geoEquirectangular=function(){return rb($c).scale(152.63)};d3.geoEquirectangularRaw=$c;d3.geoGnomonic=function(){return rb(wg).scale(144.049).clipAngle(60)};d3.geoGnomonicRaw=wg;d3.geoIdentity=function(){function d(){L=S=null;return U}var g=1,r=0,n=0,m=1,w=1,C=wb,B=null,A,M,E,K=wb,L,S,U;return U={stream:function(d){return L&&S===d?L:L=C(K(S=d))},clipExtent:function(g){return arguments.length?(K=null==g?(B=A=M=E=null,wb):jg(B=+g[0][0],A=+g[0][1],M=+g[1][0],E=+g[1][1]),
d()):null==B?null:[[B,A],[M,E]]},scale:function(A){return arguments.length?(C=se((g=+A)*m,g*w,r,n),d()):g},translate:function(A){return arguments.length?(C=se(g*m,g*w,r=+A[0],n=+A[1]),d()):[r,n]},reflectX:function(A){return arguments.length?(C=se(g*(m=A?-1:1),g*w,r,n),d()):0>m},reflectY:function(A){return arguments.length?(C=se(g*m,g*(w=A?-1:1),r,n),d()):0>w},fitExtent:function(d,g){return ic(U,d,g)},fitSize:function(d,g){return ic(U,[[0,0],d],g)}}};d3.geoProjection=rb;d3.geoProjectionMutator=ug;
d3.geoMercator=function(){return qk(Zc).scale(961/Ba)};d3.geoMercatorRaw=Zc;d3.geoOrthographic=function(){return rb(xg).scale(249.5).clipAngle(90.000001)};d3.geoOrthographicRaw=xg;d3.geoStereographic=function(){return rb(yg).scale(250).clipAngle(142)};d3.geoStereographicRaw=yg;d3.geoTransverseMercator=function(){var d=qk(zg),g=d.center,r=d.rotate;d.center=function(d){return arguments.length?g([-d[1],d[0]]):(d=g(),[d[1],-d[0]])};d.rotate=function(d){return arguments.length?r([d[0],d[1],2<d.length?
d[2]+90:90]):(d=r(),[d[0],d[1],d[2]-90])};return r([0,0,90]).scale(159.155)};d3.geoTransverseMercatorRaw=zg;d3.geoRotation=Xh;d3.geoStream=Na;d3.geoTransform=function(d){return{stream:pe(d)}};d3.cluster=function(){function d(d){var w,B=0;d.eachAfter(function(d){var m=d.children;if(m){var n=m.reduce(Cp,0)/m.length;d.x=n;d.y=1+m.reduce(Dp,0)}else d.x=w?B+=g(d,w):0,d.y=0,w=d});var A=Ep(d),M=Fp(d),E=A.x-g(A,M)/2,K=M.x+g(M,A)/2;return d.eachAfter(m?function(g){g.x=(g.x-d.x)*r;g.y=(d.y-g.y)*n}:function(g){g.x=
(g.x-E)/(K-E)*r;g.y=(1-(d.y?g.y/d.y:1))*n})}var g=Bp,r=1,n=1,m=!1;d.separation=function(m){return arguments.length?(g=m,d):g};d.size=function(g){return arguments.length?(m=!1,r=+g[0],n=+g[1],d):m?null:[r,n]};d.nodeSize=function(g){return arguments.length?(m=!0,r=+g[0],n=+g[1],d):m?[r,n]:null};return d};d3.hierarchy=Ag;d3.pack=function(){function d(d){d.x=r/2;d.y=n/2;g?d.eachBefore(yk(g)).eachAfter(Bg(m,.5)).eachBefore(zk(1)):d.eachBefore(yk(Jp)).eachAfter(Bg(Hb,1)).eachAfter(Bg(m,d.r/Math.min(r,n))).eachBefore(zk(Math.min(r,
n)/(2*d.r)));return d}var g=null,r=1,n=1,m=Hb;d.radius=function(m){return arguments.length?(g=null==m?null:ue(m),d):g};d.size=function(g){return arguments.length?(r=+g[0],n=+g[1],d):[r,n]};d.padding=function(g){return arguments.length?(m="function"===typeof g?g:Ub(+g),d):m};return d};d3.packSiblings=function(d){xk(d);return d};d3.packEnclose=Lh;d3.partition=function(){function d(d){var C=d.height+1;d.x0=d.y0=m;d.x1=r;d.y1=n/C;d.eachBefore(g(n,C));w&&d.eachBefore(Kh);return d}function g(d,g){return function(n){n.children&&
xc(n,n.x0,d*(n.depth+1)/g,n.x1,d*(n.depth+2)/g);var r=n.x0,w=n.y0,A=n.x1-m,C=n.y1-m;A<r&&(r=A=(r+A)/2);C<w&&(w=C=(w+C)/2);n.x0=r;n.y0=w;n.x1=A;n.y1=C}}var r=1,n=1,m=0,w=!1;d.round=function(g){return arguments.length?(w=!!g,d):w};d.size=function(g){return arguments.length?(r=+g[0],n=+g[1],d):[r,n]};d.padding=function(g){return arguments.length?(m=+g,d):m};return d};d3.stratify=function(){function d(d){var m,n=d.length,C=Array(n),B,A={};for(m=0;m<n;++m){var M=d[m];var E=C[m]=new lc(M);null!=(B=g(M,
m,d))&&(B+="")&&(M="$"+(E.id=B),A[M]=M in A?Ol:E)}for(m=0;m<n;++m)if(E=C[m],B=r(d[m],m,d),null!=B&&(B+="")){M=A["$"+B];if(!M)throw Error("missing: "+B);if(M===Ol)throw Error("ambiguous: "+B);M.children?M.children.push(E):M.children=[E];E.parent=M}else{if(K)throw Error("multiple roots");var K=E}if(!K)throw Error("no root");K.parent=Tr;K.eachBefore(function(d){d.depth=d.parent.depth+1;--n}).eachBefore(tk);K.parent=null;if(0<n)throw Error("cycle");return K}var g=Kp,r=Lp;d.id=function(n){return arguments.length?
(g=ue(n),d):g};d.parentId=function(g){return arguments.length?(r=ue(g),d):r};return d};d3.tree=function(){function d(d){var A=Np(d);A.eachAfter(g);A.parent.m=-A.z;A.eachBefore(r);if(B)d.eachBefore(n);else{var E=d,K=d,L=d;d.eachBefore(function(d){d.x<E.x&&(E=d);d.x>K.x&&(K=d);d.depth>L.depth&&(L=d)});var A=E===K?1:m(E,K)/2,S=A-E.x,U=w/(K.x+A+S),fa=C/(L.depth||1);d.eachBefore(function(d){d.x=(d.x+S)*U;d.y=d.depth*fa})}return d}function g(d){var g=d.children,n=d.parent.children,r=d.i?n[d.i-1]:null;if(g){for(var w=
0,A=0,C=d.children,B=C.length,da;0<=--B;)da=C[B],da.z+=w,da.m+=w,w+=da.s+(A+=da.c);g=(g[0].z+g[g.length-1].z)/2;r?(d.z=r.z+m(d._,r._),d.m=d.z-g):d.z=g}else r&&(d.z=r.z+m(d._,r._));g=d.parent;n=d.parent.A||n[0];if(r){A=w=d;C=w.parent.children[0];B=w.m;da=A.m;for(var Q=r.m,W=C.m,O;r=Dg(r),w=Cg(w),r&&w;){C=Cg(C);A=Dg(A);A.a=d;O=r.z+Q-w.z-B+m(r._,w._);if(0<O){var V=r.a.parent===d.parent?r.a:n,T=d,X=O,Z=X/(T.i-V.i);T.c-=Z;T.s+=X;V.c+=Z;T.z+=X;T.m+=X;B+=O;da+=O}Q+=r.m;B+=w.m;W+=C.m;da+=A.m}r&&!Dg(A)&&(A.t=
r,A.m+=Q-da);w&&!Cg(C)&&(C.t=w,C.m+=B-W,n=d)}g.A=n}function r(d){d._.x=d.z+d.parent.m;d.m+=d.parent.m}function n(d){d.x*=w;d.y=d.depth*C}var m=Mp,w=1,C=1,B=null;d.separation=function(g){return arguments.length?(m=g,d):m};d.size=function(g){return arguments.length?(B=!1,w=+g[0],C=+g[1],d):B?null:[w,C]};d.nodeSize=function(g){return arguments.length?(B=!0,w=+g[0],C=+g[1],d):B?[w,C]:null};return d};d3.treemap=function(){function d(d){d.x0=d.y0=0;d.x1=m;d.y1=w;d.eachBefore(g);C=[0];n&&d.eachBefore(Kh);
return d}function g(d){var g=C[d.depth],m=d.x0+g,n=d.y0+g,w=d.x1-g,L=d.y1-g;w<m&&(m=w=(m+w)/2);L<n&&(n=L=(n+L)/2);d.x0=m;d.y0=n;d.x1=w;d.y1=L;d.children&&(g=C[d.depth+1]=B(d)/2,m+=K(d)-g,n+=A(d)-g,w-=M(d)-g,L-=E(d)-g,w<m&&(m=w=(m+w)/2),L<n&&(n=L=(n+L)/2),r(d,m,n,w,L))}var r=Ql,n=!1,m=1,w=1,C=[0],B=Hb,A=Hb,M=Hb,E=Hb,K=Hb;d.round=function(g){return arguments.length?(n=!!g,d):n};d.size=function(g){return arguments.length?(m=+g[0],w=+g[1],d):[m,w]};d.tile=function(g){return arguments.length?(r=ue(g),
d):r};d.padding=function(g){return arguments.length?d.paddingInner(g).paddingOuter(g):d.paddingInner()};d.paddingInner=function(g){return arguments.length?(B="function"===typeof g?g:Ub(+g),d):B};d.paddingOuter=function(g){return arguments.length?d.paddingTop(g).paddingRight(g).paddingBottom(g).paddingLeft(g):d.paddingTop()};d.paddingTop=function(g){return arguments.length?(A="function"===typeof g?g:Ub(+g),d):A};d.paddingRight=function(g){return arguments.length?(M="function"===typeof g?g:Ub(+g),d):
M};d.paddingBottom=function(g){return arguments.length?(E="function"===typeof g?g:Ub(+g),d):E};d.paddingLeft=function(g){return arguments.length?(K="function"===typeof g?g:Ub(+g),d):K};return d};d3.treemapBinary=function(d,g,r,n,m){function w(d,g,m,n,r,A,B){if(d>=g-1)d=C[d],d.x0=n,d.y0=r,d.x1=A,d.y1=B;else{for(var M=E[d],L=m/2+M,K=d+1,S=g-1;K<S;){var Q=K+S>>>1;E[Q]<L?K=Q+1:S=Q}L-E[K-1]<E[K]-L&&d+1<K&&--K;M=E[K]-M;L=m-M;A-n>B-r?(m=(n*L+A*M)/m,w(d,K,M,n,r,m,B),w(K,g,L,m,r,A,B)):(m=(r*L+B*M)/m,w(d,K,
M,n,r,A,m),w(K,g,L,n,m,A,B))}}var C=d.children,B,A=C.length,M,E=Array(A+1);for(E[0]=M=B=0;B<A;++B)E[B+1]=M+=C[B].value;w(0,A,d.value,g,r,n,m)};d3.treemapDice=xc;d3.treemapSlice=td;d3.treemapSliceDice=function(d,g,r,n,m){(d.depth&1?td:xc)(d,g,r,n,m)};d3.treemapSquarify=Ql;d3.treemapResquarify=Ur;d3.interpolate=Cc;d3.interpolateArray=ri;d3.interpolateBasis=vi;d3.interpolateBasisClosed=ti;d3.interpolateDate=qi;d3.interpolateNumber=Da;d3.interpolateObject=si;d3.interpolateRound=pi;d3.interpolateString=
kf;d3.interpolateTransformCss=yl;d3.interpolateTransformSvg=zl;d3.interpolateZoom=li;d3.interpolateRgb=zc;d3.interpolateRgbBasis=ur;d3.interpolateRgbBasisClosed=vr;d3.interpolateHsl=wr;d3.interpolateHslLong=xr;d3.interpolateLab=function(d,g){var r=pa((d=Qd(d)).l,(g=Qd(g)).l),n=pa(d.a,g.a),m=pa(d.b,g.b),w=pa(d.opacity,g.opacity);return function(g){d.l=r(g);d.a=n(g);d.b=m(g);d.opacity=w(g);return d+""}};d3.interpolateHcl=yr;d3.interpolateHclLong=zr;d3.interpolateCubehelix=Ar;d3.interpolateCubehelixLong=
Ne;d3.quantize=function(d,g){for(var r=Array(g),n=0;n<g;++n)r[n]=d(n/(g-1));return r};d3.path=gb;d3.polygonArea=function(d){for(var g=-1,r=d.length,n,m=d[r-1],w=0;++g<r;)n=m,m=d[g],w+=n[1]*m[0]-n[0]*m[1];return w/2};d3.polygonCentroid=function(d){for(var g=-1,r=d.length,n=0,m=0,w,C=d[r-1],B,A=0;++g<r;)w=C,C=d[g],A+=B=w[0]*C[1]-C[0]*w[1],n+=(w[0]+C[0])*B,m+=(w[1]+C[1])*B;return A*=3,[n/A,m/A]};d3.polygonHull=function(d){if(3>(r=d.length))return null;var g,r,n=Array(r),m=Array(r);for(g=0;g<r;++g)n[g]=
[+d[g][0],+d[g][1],g];n.sort(Op);for(g=0;g<r;++g)m[g]=[n[g][0],-n[g][1]];r=Bk(n);var m=Bk(m),w=m[0]===r[0],C=m[m.length-1]===r[r.length-1],B=[];for(g=r.length-1;0<=g;--g)B.push(d[n[r[g]][2]]);for(g=+w;g<m.length-C;++g)B.push(d[n[m[g]][2]]);return B};d3.polygonContains=function(d,g){var r=d.length,n=d[r-1],m=g[0];g=g[1];for(var w=n[0],C=n[1],B,A=!1,M=0;M<r;++M)n=d[M],B=n[0],n=n[1],n>g!==C>g&&m<(w-B)*(g-n)/(C-n)+B&&(A=!A),w=B,C=n;return A};d3.polygonLength=function(d){for(var g=-1,r=d.length,n=d[r-
1],m,w,C=n[0],n=n[1],B=0;++g<r;)m=C,w=n,n=d[g],C=n[0],n=n[1],m-=C,w-=n,B+=Math.sqrt(m*m+w*w);return B};d3.quadtree=$d;d3.queue=Dk;d3.randomUniform=Wr;d3.randomNormal=Rl;d3.randomLogNormal=Xr;d3.randomBates=Yr;d3.randomIrwinHall=Sl;d3.randomExponential=Zr;d3.request=$e;d3.html=$r;d3.json=as;d3.text=bs;d3.xml=cs;d3.csv=ds;d3.tsv=es;d3.scaleBand=Ig;d3.scalePoint=function(){return Ek(Ig().paddingInner(1))};d3.scaleIdentity=Hk;d3.scaleLinear=Gk;d3.scaleLog=Lk;d3.scaleOrdinal=Gg;d3.scaleImplicit=Hg;d3.scalePow=
Lg;d3.scaleSqrt=function(){return Lg().exponent(.5)};d3.scaleQuantile=Mk;d3.scaleQuantize=Nk;d3.scaleThreshold=Ok;d3.scaleTime=function(){return Sg(Lb,rh,dd,ze,qh,ph,od,Ob,d3.timeFormat).domain([new Date(2E3,0,1),new Date(2E3,0,2)])};d3.scaleUtc=function(){return Sg(Mb,uh,ed,Ae,th,sh,od,Ob,d3.utcFormat).domain([Date.UTC(2E3,0,1),Date.UTC(2E3,0,2)])};d3.schemeCategory10=Ds;d3.schemeCategory20b=Es;d3.schemeCategory20c=Fs;d3.schemeCategory20=Gs;d3.interpolateCubehelixDefault=Hs;d3.interpolateRainbow=
function(d){if(0>d||1<d)d-=Math.floor(d);var g=Math.abs(d-.5);Ve.h=360*d-100;Ve.s=1.5-1.5*g;Ve.l=.8-.9*g;return Ve+""};d3.interpolateWarm=Is;d3.interpolateCool=Js;d3.interpolateViridis=Ks;d3.interpolateMagma=Ls;d3.interpolateInferno=Ms;d3.interpolatePlasma=Ns;d3.scaleSequential=Yk;d3.creator=uf;d3.local=Hi;d3.matcher=fh;d3.mouse=lb;d3.namespace=Dc;d3.namespaces=Fa;d3.select=Ea;d3.selectAll=function(d){return"string"===typeof d?new wa([document.querySelectorAll(d)],[document.documentElement]):new wa([null==
d?[]:d],rf)};d3.selection=Ab;d3.selector=Jd;d3.selectorAll=tf;d3.style=zb;d3.touch=Id;d3.touches=function(d,g){null==g&&(g=pf().touches);for(var r=0,n=g?g.length:0,m=Array(n);r<n;++r)m[r]=qf(d,g[r]);return m};d3.window=sf;d3.customEvent=Hc;d3.arc=function(){function d(){var d,E=+g.apply(this,arguments),K=+r.apply(this,arguments),L=w.apply(this,arguments)-Ce,S=C.apply(this,arguments)-Ce,U=hm(S-L),O=S>L;A||(A=d=gb());if(K<E){var T=K;K=E;E=T}if(1E-12<K)if(U>ub-1E-12)A.moveTo(K*Pb(L),K*Ya(L)),A.arc(0,
0,K,L,S,!O),1E-12<E&&(A.moveTo(E*Pb(S),E*Ya(S)),A.arc(0,0,E,S,L,O));else{var Q=L,W=S;T=L;var V=S,X=U,Z=U,Y=B.apply(this,arguments)/2,aa=1E-12<Y&&(m?+m.apply(this,arguments):oc(E*E+K*K)),ca=vh(hm(K-E)/2,+n.apply(this,arguments)),la=ca,ga=ca;if(1E-12<aa){var ba=Zk(aa/E*Ya(Y)),Y=Zk(aa/K*Ya(Y));1E-12<(X-=2*ba)?(ba*=O?1:-1,T+=ba,V-=ba):(X=0,T=V=(L+S)/2);1E-12<(Z-=2*Y)?(Y*=O?1:-1,Q+=Y,W-=Y):(Z=0,Q=W=(L+S)/2)}L=K*Pb(Q);S=K*Ya(Q);ba=E*Pb(V);Y=E*Ya(V);if(1E-12<ca){var ea=K*Pb(W);var Qb=K*Ya(W);var pd=E*Pb(T);
var zh=E*Ya(T);if(U<tb){1E-12<X?(la=pd-L,ga=zh-S,U=ba-ea,aa=Y-Qb,U=(U*(S-Qb)-aa*(L-ea))/(aa*la-U*ga),la=[L+U*la,S+U*ga]):la=[ba,Y];var ga=L-la[0],U=S-la[1],aa=ea-la[0],Ah=Qb-la[1],ga=(ga*aa+U*Ah)/(oc(ga*ga+U*U)*oc(aa*aa+Ah*Ah)),ga=1/Ya((1<ga?0:-1>ga?tb:Math.acos(ga))/2),U=oc(la[0]*la[0]+la[1]*la[1]),la=vh(ca,(E-U)/(ga-1)),ga=vh(ca,(K-U)/(ga+1))}}1E-12<Z?1E-12<ga?(Q=De(pd,zh,L,S,K,ga,O),W=De(ea,Qb,ba,Y,K,ga,O),A.moveTo(Q.cx+Q.x01,Q.cy+Q.y01),ga<ca?A.arc(Q.cx,Q.cy,ga,sa(Q.y01,Q.x01),sa(W.y01,W.x01),
!O):(A.arc(Q.cx,Q.cy,ga,sa(Q.y01,Q.x01),sa(Q.y11,Q.x11),!O),A.arc(0,0,K,sa(Q.cy+Q.y11,Q.cx+Q.x11),sa(W.cy+W.y11,W.cx+W.x11),!O),A.arc(W.cx,W.cy,ga,sa(W.y11,W.x11),sa(W.y01,W.x01),!O))):(A.moveTo(L,S),A.arc(0,0,K,Q,W,!O)):A.moveTo(L,S);1E-12<E&&1E-12<X?1E-12<la?(Q=De(ba,Y,ea,Qb,E,-la,O),W=De(L,S,pd,zh,E,-la,O),A.lineTo(Q.cx+Q.x01,Q.cy+Q.y01),la<ca?A.arc(Q.cx,Q.cy,la,sa(Q.y01,Q.x01),sa(W.y01,W.x01),!O):(A.arc(Q.cx,Q.cy,la,sa(Q.y01,Q.x01),sa(Q.y11,Q.x11),!O),A.arc(0,0,E,sa(Q.cy+Q.y11,Q.cx+Q.x11),sa(W.cy+
W.y11,W.cx+W.x11),O),A.arc(W.cx,W.cy,la,sa(W.y11,W.x11),sa(W.y01,W.x01),!O))):A.arc(0,0,E,V,T,O):A.lineTo(ba,Y)}else A.moveTo(0,0);A.closePath();if(d)return A=null,d+""||null}var g=Sq,r=Tq,n=X(0),m=null,w=Uq,C=Vq,B=Wq,A=null;d.centroid=function(){var d=(+g.apply(this,arguments)+ +r.apply(this,arguments))/2,m=(+w.apply(this,arguments)+ +C.apply(this,arguments))/2-tb/2;return[Pb(m)*d,Ya(m)*d]};d.innerRadius=function(m){return arguments.length?(g="function"===typeof m?m:X(+m),d):g};d.outerRadius=function(g){return arguments.length?
(r="function"===typeof g?g:X(+g),d):r};d.cornerRadius=function(g){return arguments.length?(n="function"===typeof g?g:X(+g),d):n};d.padRadius=function(g){return arguments.length?(m=null==g?null:"function"===typeof g?g:X(+g),d):m};d.startAngle=function(g){return arguments.length?(w="function"===typeof g?g:X(+g),d):w};d.endAngle=function(g){return arguments.length?(C="function"===typeof g?g:X(+g),d):C};d.padAngle=function(g){return arguments.length?(B="function"===typeof g?g:X(+g),d):B};d.context=function(g){return arguments.length?
(A=null==g?null:g,d):A};return d};d3.area=Fh;d3.line=We;d3.pie=function(){function d(d){var A,B=d.length;var E=0;var K=Array(B),L=Array(B),S=+m.apply(this,arguments);var O=Math.min(ub,Math.max(-ub,w.apply(this,arguments)-S));var T=Math.min(Math.abs(O)/B,C.apply(this,arguments)),V=T*(0>O?-1:1),Q;for(A=0;A<B;++A)0<(Q=L[K[A]=A]=+g(d[A],A,d))&&(E+=Q);null!=r?K.sort(function(d,g){return r(L[d],L[g])}):null!=n&&K.sort(function(g,m){return n(d[g],d[m])});A=0;for(O=E?(O-B*V)/E:0;A<B;++A,S=W){E=K[A];Q=L[E];
var W=S+(0<Q?Q*O:0)+V;L[E]={data:d[E],index:A,value:Q,startAngle:S,endAngle:W,padAngle:T}}return L}var g=rm,r=sm,n=null,m=X(0),w=X(ub),C=X(0);d.value=function(m){return arguments.length?(g="function"===typeof m?m:X(+m),d):g};d.sortValues=function(g){return arguments.length?(r=g,n=null,d):r};d.sort=function(g){return arguments.length?(n=g,r=null,d):n};d.startAngle=function(g){return arguments.length?(m="function"===typeof g?g:X(+g),d):m};d.endAngle=function(g){return arguments.length?(w="function"===
typeof g?g:X(+g),d):w};d.padAngle=function(g){return arguments.length?(C="function"===typeof g?g:X(+g),d):C};return d};d3.radialArea=function(){var d=Fh().curve(im),g=d.curve,r=d.lineX0,n=d.lineX1,m=d.lineY0,w=d.lineY1;d.angle=d.x;delete d.x;d.startAngle=d.x0;delete d.x0;d.endAngle=d.x1;delete d.x1;d.radius=d.y;delete d.y;d.innerRadius=d.y0;delete d.y0;d.outerRadius=d.y1;delete d.y1;d.lineStartAngle=function(){return fd(r())};delete d.lineX0;d.lineEndAngle=function(){return fd(n())};delete d.lineX1;
d.lineInnerRadius=function(){return fd(m())};delete d.lineY0;d.lineOuterRadius=function(){return fd(w())};delete d.lineY1;d.curve=function(d){return arguments.length?g(Ug(d)):g()._curve};return d};d3.radialLine=function(){return fd(We().curve(im))};d3.linkHorizontal=function(){return Vg($q)};d3.linkVertical=function(){return Vg(ar)};d3.linkRadial=function(){var d=Vg(br);d.angle=d.x;delete d.x;d.radius=d.y;delete d.y;return d};d3.symbol=function(){function d(){var d;n||(n=d=gb());g.apply(this,arguments).draw(n,
+r.apply(this,arguments));if(d)return n=null,d+""||null}var g=X(wh),r=X(64),n=null;d.type=function(m){return arguments.length?(g="function"===typeof m?m:X(m),d):g};d.size=function(g){return arguments.length?(r="function"===typeof g?g:X(+g),d):r};d.context=function(g){return arguments.length?(n=null==g?null:g,d):n};return d};d3.symbols=Ss;d3.symbolCircle=wh;d3.symbolCross=jm;d3.symbolDiamond=lm;d3.symbolSquare=om;d3.symbolStar=nm;d3.symbolTriangle=pm;d3.symbolWye=qm;d3.curveBasisClosed=function(d){return new al(d)};
d3.curveBasisOpen=function(d){return new bl(d)};d3.curveBasis=function(d){return new Fe(d)};d3.curveBundle=Ts;d3.curveCardinalClosed=Vs;d3.curveCardinalOpen=Ws;d3.curveCardinal=Us;d3.curveCatmullRomClosed=Ys;d3.curveCatmullRomOpen=Zs;d3.curveCatmullRom=Xs;d3.curveLinearClosed=function(d){return new gl(d)};d3.curveLinear=rd;d3.curveMonotoneX=function(d){return new He(d)};d3.curveMonotoneY=function(d){return new jl(d)};d3.curveNatural=function(d){return new ll(d)};d3.curveStep=function(d){return new Ie(d,
.5)};d3.curveStepAfter=function(d){return new Ie(d,1)};d3.curveStepBefore=function(d){return new Ie(d,0)};d3.stack=function(){function d(d){var w=g.apply(this,arguments),B,A=d.length,M=w.length,E=Array(M);for(B=0;B<M;++B){for(var K=w[B],L=E[B]=Array(A),O=0,U;O<A;++O)L[O]=U=[0,+m(d[O],K,O,d)],U.data=d[O];L.key=K}B=0;for(w=r(E);B<M;++B)E[w[B]].index=B;n(E,w);return E}var g=X([]),r=Rb,n=Sb,m=cr;d.keys=function(m){return arguments.length?(g="function"===typeof m?m:X(Wg.call(m)),d):g};d.value=function(g){return arguments.length?
(m="function"===typeof g?g:X(+g),d):m};d.order=function(g){return arguments.length?(r=null==g?Rb:"function"===typeof g?g:X(Wg.call(g)),d):r};d.offset=function(g){return arguments.length?(n=null==g?Sb:g,d):n};return d};d3.stackOffsetExpand=function(d,g){if(0<(n=d.length)){for(var r,n,m=0,w=d[0].length,C;m<w;++m){for(C=r=0;r<n;++r)C+=d[r][m][1]||0;if(C)for(r=0;r<n;++r)d[r][m][1]/=C}Sb(d,g)}};d3.stackOffsetDiverging=function(d,g){if(1<(A=d.length))for(var r,n=0,m,w,C,B,A,M=d[g[0]].length;n<M;++n)for(r=
C=B=0;r<A;++r)0<=(w=(m=d[g[r]][n])[1]-m[0])?(m[0]=C,m[1]=C+=w):0>w?(m[1]=B,m[0]=B+=w):m[0]=C};d3.stackOffsetNone=Sb;d3.stackOffsetSilhouette=function(d,g){if(0<(m=d.length)){for(var r=0,n=d[g[0]],m,w=n.length;r<w;++r){for(var C=0,B=0;C<m;++C)B+=d[C][r][1]||0;n[r][1]+=n[r][0]=-B/2}Sb(d,g)}};d3.stackOffsetWiggle=function(d,g){if(0<(C=d.length)&&0<(w=(m=d[g[0]]).length)){for(var r=0,n=1,m,w,C;n<w;++n){for(var B=0,A=0,M=0;B<C;++B){for(var E=d[g[B]],K=E[n][1]||0,E=(K-(E[n-1][1]||0))/2,L=0;L<B;++L)var O=
d[g[L]],E=E+((O[n][1]||0)-(O[n-1][1]||0));A+=K;M+=E*K}m[n-1][1]+=m[n-1][0]=r;A&&(r-=M/A)}m[n-1][1]+=m[n-1][0]=r;Sb(d,g)}};d3.stackOrderAscending=Dh;d3.stackOrderDescending=function(d){return Dh(d).reverse()};d3.stackOrderInsideOut=function(d){var g=d.length,r=d.map(Eh),n=Rb(d).sort(function(d,g){return r[g]-r[d]}),m=0,w=0,C=[],B=[];for(d=0;d<g;++d){var A=n[d];m<w?(m+=r[A],C.push(A)):(w+=r[A],B.push(A))}return B.reverse().concat(C)};d3.stackOrderNone=Rb;d3.stackOrderReverse=function(d){return Rb(d).reverse()};
d3.timeInterval=oa;d3.timeMillisecond=Ob;d3.timeMilliseconds=Ul;d3.utcMillisecond=Ob;d3.utcMilliseconds=Ul;d3.timeSecond=od;d3.timeSeconds=Vl;d3.utcSecond=od;d3.utcSeconds=Vl;d3.timeMinute=ph;d3.timeMinutes=fs;d3.timeHour=qh;d3.timeHours=gs;d3.timeDay=ze;d3.timeDays=hs;d3.timeWeek=dd;d3.timeWeeks=am;d3.timeSunday=dd;d3.timeSundays=am;d3.timeMonday=Qg;d3.timeMondays=is;d3.timeTuesday=Wl;d3.timeTuesdays=js;d3.timeWednesday=Xl;d3.timeWednesdays=ks;d3.timeThursday=Yl;d3.timeThursdays=ls;d3.timeFriday=
Zl;d3.timeFridays=ms;d3.timeSaturday=$l;d3.timeSaturdays=ns;d3.timeMonth=rh;d3.timeMonths=os;d3.timeYear=Lb;d3.timeYears=ps;d3.utcMinute=sh;d3.utcMinutes=qs;d3.utcHour=th;d3.utcHours=rs;d3.utcDay=Ae;d3.utcDays=ss;d3.utcWeek=ed;d3.utcWeeks=gm;d3.utcSunday=ed;d3.utcSundays=gm;d3.utcMonday=Rg;d3.utcMondays=ts;d3.utcTuesday=bm;d3.utcTuesdays=us;d3.utcWednesday=cm;d3.utcWednesdays=vs;d3.utcThursday=dm;d3.utcThursdays=ws;d3.utcFriday=em;d3.utcFridays=xs;d3.utcSaturday=fm;d3.utcSaturdays=ys;d3.utcMonth=
uh;d3.utcMonths=zs;d3.utcYear=Mb;d3.utcYears=As;d3.timeFormatDefaultLocale=Wk;d3.timeFormatLocale=Pk;d3.isoFormat=Bs;d3.isoParse=Cs;d3.now=cc;d3.timer=Sd;d3.timerFlush=dj;d3.timeout=lf;d3.interval=function(d,g,r){var n=new Ac,m=g;if(null==g)return n.restart(d,g,r),n;g=+g;r=null==r?cc():+r;n.restart(function C(B){B+=m;n.restart(C,m+=g,r);d(B)},g,r);return n};d3.transition=fj;d3.active=function(d,g){var r=d.__transition,n,m;if(r)for(m in g=null==g?null:g+"",r)if(1<(n=r[m]).state&&n.name===g)return new Ua([[d]],
Ir,g,+m);return null};d3.interrupt=xb;d3.voronoi=function(){function d(d){return new dh(d.map(function(m,n){var w=[Math.round(g(m,n,d)/aa)*aa,Math.round(r(m,n,d)/aa)*aa];w.index=n;w.data=m;return w}),n)}var g=dr,r=er,n=null;d.polygons=function(g){return d(g).polygons()};d.links=function(g){return d(g).links()};d.triangles=function(g){return d(g).triangles()};d.x=function(m){return arguments.length?(g="function"===typeof m?m:Ch(+m),d):g};d.y=function(g){return arguments.length?(r="function"===typeof g?
g:Ch(+g),d):r};d.extent=function(g){return arguments.length?(n=null==g?null:[[+g[0][0],+g[0][1]],[+g[1][0],+g[1][1]]],d):n&&[[n[0][0],n[0][1]],[n[1][0],n[1][1]]]};d.size=function(g){return arguments.length?(n=null==g?null:[[0,0],[+g[0],+g[1]]],d):n&&[n[1][0]-n[0][0],n[1][1]-n[0][1]]};return d};d3.zoom=function(){function d(d){d.on("wheel.zoom",A).on("mousedown.zoom",M).on("dblclick.zoom",E).on("touchstart.zoom",K).on("touchmove.zoom",L).on("touchend.zoom touchcancel.zoom",O).style("-webkit-tap-highlight-color",
"rgba(0,0,0,0)").property("__zoom",ul)}function g(d,g){g=Math.max(V,Math.min(Q,g));return g===d.k?d:new eb(g,d.x,d.y)}function r(d,g,n){var m=g[0]-n[0]*d.k;g=g[1]-n[1]*d.k;return m===d.x&&g===d.y?d:new eb(d.k,m,g)}function n(d,g){var n=d.invertX(g[0][0])-W,m=d.invertX(g[1][0])-X,r=d.invertY(g[0][1])-Y;g=d.invertY(g[1][1])-Z;return d.translate(m>n?(n+m)/2:Math.min(0,n)||Math.max(0,m),g>r?(r+g)/2:Math.min(0,r)||Math.max(0,g))}function m(d){return[(+d[0][0]+ +d[1][0])/2,(+d[0][1]+ +d[1][1])/2]}function w(d,
g,n){d.on("start.zoom",function(){C(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){C(this,arguments).end()}).tween("zoom",function(){var d=arguments,r=C(this,d),w=T.apply(this,d),A=n||m(w),B=Math.max(w[1][0]-w[0][0],w[1][1]-w[0][1]),w=this.__zoom,E="function"===typeof g?g.apply(this,d):g,Qb=ba(w.invert(A).concat(B/w.k),E.invert(A).concat(B/E.k));return function(d){if(1===d)d=E;else{d=Qb(d);var g=B/d[2];d=new eb(g,A[0]-d[0]*g,A[1]-d[1]*g)}r.zoom(null,d)}})}function C(d,g){for(var n=
0,m=ca.length,r;n<m;++n)if((r=ca[n]).that===d)return r;return new B(d,g)}function B(d,g){this.that=d;this.args=g;this.index=-1;this.active=0;this.extent=T.apply(d,g)}function A(){if(U.apply(this,arguments)){var d=C(this,arguments),m=this.__zoom,w=Math.max(V,Math.min(Q,m.k*Math.pow(2,-d3.event.deltaY*(d3.event.deltaMode?120:1)/500))),A=lb(this);if(d.wheel){if(d.mouse[0][0]!==A[0]||d.mouse[0][1]!==A[1])d.mouse[1]=m.invert(d.mouse[0]=A);clearTimeout(d.wheel)}else{if(m.k===w)return;d.mouse=[A,m.invert(A)];
xb(this);d.start()}wc();d.wheel=setTimeout(function(){d.wheel=null;d.end()},150);d.zoom("mouse",n(r(g(m,w),d.mouse[0],d.mouse[1]),d.extent))}}function M(){if(!ha&&U.apply(this,arguments)){var d=C(this,arguments),g=Ea(d3.event.view).on("mousemove.zoom",function(){wc();if(!d.moved){var g=d3.event.clientX-w,m=d3.event.clientY-A;d.moved=g*g+m*m>ja}d.zoom("mouse",n(r(d.that.__zoom,d.mouse[0]=lb(d.that),d.mouse[1]),d.extent))},!0).on("mouseup.zoom",function(){g.on("mousemove.zoom mouseup.zoom",null);Od(d3.event.view,
d.moved);wc();d.end()},!0),m=lb(this),w=d3.event.clientX,A=d3.event.clientY;Hd(d3.event.view);d3.event.stopImmediatePropagation();d.mouse=[m,this.__zoom.invert(m)];xb(this);d.start()}}function E(){if(U.apply(this,arguments)){var m=this.__zoom,A=lb(this),C=m.invert(A),m=n(r(g(m,m.k*(d3.event.shiftKey?.5:2)),A,C),T.apply(this,arguments));wc();0<aa?Ea(this).transition().duration(aa).call(w,m,A):Ea(this).call(d.transform,m)}}function K(){if(U.apply(this,arguments)){var d=C(this,arguments),g=d3.event.changedTouches,
m=g.length,n;d3.event.stopImmediatePropagation();for(n=0;n<m;++n){var r=g[n];var w=Id(this,g,r.identifier);w=[w,this.__zoom.invert(w),r.identifier];if(d.touch0)d.touch1||(d.touch1=w);else{d.touch0=w;var A=!0}}if(ga&&(ga=clearTimeout(ga),!d.touch1)){d.end();(w=Ea(this).on("dblclick.zoom"))&&w.apply(this,arguments);return}A&&(ga=setTimeout(function(){ga=null},500),xb(this),d.start())}}function L(){var d=C(this,arguments),m=d3.event.changedTouches,w=m.length,A;wc();ga&&(ga=clearTimeout(ga));for(A=0;A<
w;++A){var B=m[A];var E=Id(this,m,B.identifier);d.touch0&&d.touch0[2]===B.identifier?d.touch0[0]=E:d.touch1&&d.touch1[2]===B.identifier&&(d.touch1[0]=E)}B=d.that.__zoom;if(d.touch1){E=d.touch0[0];m=d.touch0[1];A=d.touch1[0];w=d.touch1[1];var K=(K=A[0]-E[0])*K+(K=A[1]-E[1])*K;var L=(L=w[0]-m[0])*L+(L=w[1]-m[1])*L;B=g(B,Math.sqrt(K/L));E=[(E[0]+A[0])/2,(E[1]+A[1])/2];K=[(m[0]+w[0])/2,(m[1]+w[1])/2]}else if(d.touch0)E=d.touch0[0],K=d.touch0[1];else return;d.zoom("touch",n(r(B,E,K),d.extent))}function O(){var d=
C(this,arguments),g=d3.event.changedTouches,m=g.length,n;d3.event.stopImmediatePropagation();ha&&clearTimeout(ha);ha=setTimeout(function(){ha=null},500);for(n=0;n<m;++n){var r=g[n];d.touch0&&d.touch0[2]===r.identifier?delete d.touch0:d.touch1&&d.touch1[2]===r.identifier&&delete d.touch1}d.touch1&&!d.touch0&&(d.touch0=d.touch1,delete d.touch1);d.touch0?d.touch0[1]=this.__zoom.invert(d.touch0[0]):d.end()}var U=or,T=pr,V=0,Q=Infinity,W=-Q,X=Q,Y=W,Z=X,aa=250,ba=li,ca=[],ea=ib("start","zoom","end"),ga,
ha,ja=0;d.transform=function(d,g){var m=d.selection?d.selection():d;m.property("__zoom",ul);d!==m?w(d,g):m.interrupt().each(function(){C(this,arguments).start().zoom(null,"function"===typeof g?g.apply(this,arguments):g).end()})};d.scaleBy=function(g,m){d.scaleTo(g,function(){var d=this.__zoom.k,g="function"===typeof m?m.apply(this,arguments):m;return d*g})};d.scaleTo=function(w,A){d.transform(w,function(){var d=T.apply(this,arguments),w=this.__zoom,B=m(d),C=w.invert(B),E="function"===typeof A?A.apply(this,
arguments):A;return n(r(g(w,E),B,C),d)})};d.translateBy=function(g,m,r){d.transform(g,function(){return n(this.__zoom.translate("function"===typeof m?m.apply(this,arguments):m,"function"===typeof r?r.apply(this,arguments):r),T.apply(this,arguments))})};B.prototype={start:function(){1===++this.active&&(this.index=ca.push(this)-1,this.emit("start"));return this},zoom:function(d,g){this.mouse&&"mouse"!==d&&(this.mouse[1]=g.invert(this.mouse[0]));this.touch0&&"touch"!==d&&(this.touch0[1]=g.invert(this.touch0[0]));
this.touch1&&"touch"!==d&&(this.touch1[1]=g.invert(this.touch1[0]));this.that.__zoom=g;this.emit("zoom");return this},end:function(){0===--this.active&&(ca.splice(this.index,1),this.index=-1,this.emit("end"));return this},emit:function(g){Hc(new nr(d,g,this.that.__zoom),ea.apply,ea,[g,this.that,this.args])}};d.filter=function(g){return arguments.length?(U="function"===typeof g?g:Bh(!!g),d):U};d.extent=function(g){return arguments.length?(T="function"===typeof g?g:Bh([[+g[0][0],+g[0][1]],[+g[1][0],
+g[1][1]]]),d):T};d.scaleExtent=function(g){return arguments.length?(V=+g[0],Q=+g[1],d):[V,Q]};d.translateExtent=function(g){return arguments.length?(W=+g[0][0],X=+g[1][0],Y=+g[0][1],Z=+g[1][1],d):[[W,Y],[X,Z]]};d.duration=function(g){return arguments.length?(aa=+g,d):aa};d.interpolate=function(g){return arguments.length?(ba=g,d):ba};d.on=function(){var g=ea.on.apply(ea,arguments);return g===ea?d:g};d.clickDistance=function(g){return arguments.length?(ja=(g=+g)*g,d):Math.sqrt(ja)};return d};d3.zoomTransform=
tl;d3.zoomIdentity=eh;Fa.svg=Fa.svg;Fa.xhtml=Fa.xhtml;Fa.xlink=Fa.xlink;Fa.xml=Fa.xml;Fa.xmlns=Fa.xmlns})();
</script><script>/*

  Numeric Javascript
  Copyright (C) 2011 by Sébastien Loisel

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to deal
  in the Software without restriction, including without limitation the rights
  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
  copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
  THE SOFTWARE.
*/
var numeric=typeof exports==="undefined"?function numeric(){}:exports;if(typeof global!=="undefined")global.numeric=numeric;if(typeof window!=="undefined")window.numeric=numeric;numeric.version="1.2.6";
numeric.bench=function bench(f,interval){var t1,t2,n,i;if(typeof interval==="undefined")interval=15;n=.5;t1=new Date;while(1){n*=2;for(i=n;i>3;i-=4){f();f();f();f()}while(i>0){f();i--}t2=new Date;if(t2-t1>interval)break}for(i=n;i>3;i-=4){f();f();f();f()}while(i>0){f();i--}t2=new Date;return 1E3*(3*n-1)/(t2-t1)};numeric._myIndexOf=function _myIndexOf(w){var n=this.length,k;for(k=0;k<n;++k)if(this[k]===w)return k;return-1};numeric.myIndexOf=Array.prototype.indexOf?Array.prototype.indexOf:numeric._myIndexOf;
numeric.Function=Function;numeric.precision=4;numeric.largeArray=50;
numeric.prettyPrint=function prettyPrint(x){function fmtnum(x){if(x===0)return"0";if(isNaN(x))return"NaN";if(x<0)return"-"+fmtnum(-x);if(isFinite(x)){var scale=Math.floor(Math.log(x)/Math.log(10));var normalized=x/Math.pow(10,scale);var basic=normalized.toPrecision(numeric.precision);if(parseFloat(basic)===10){scale++;normalized=1;basic=normalized.toPrecision(numeric.precision)}return parseFloat(basic).toString()+"e"+scale.toString()}return"Infinity"}var ret=[];function foo(x){var k;if(typeof x===
"undefined"){ret.push(Array(numeric.precision+8).join(" "));return false}if(typeof x==="string"){ret.push('"'+x+'"');return false}if(typeof x==="boolean"){ret.push(x.toString());return false}if(typeof x==="number"){var a=fmtnum(x);var b=x.toPrecision(numeric.precision);var c=parseFloat(x.toString()).toString();var d=[a,b,c,parseFloat(b).toString(),parseFloat(c).toString()];for(k=1;k<d.length;k++)if(d[k].length<a.length)a=d[k];ret.push(Array(numeric.precision+8-a.length).join(" ")+a);return false}if(x===
null){ret.push("null");return false}if(typeof x==="function"){ret.push(x.toString());var flag=false;for(k in x)if(x.hasOwnProperty(k)){if(flag)ret.push(",\n");else ret.push("\n{");flag=true;ret.push(k);ret.push(": \n");foo(x[k])}if(flag)ret.push("}\n");return true}if(x instanceof Array){if(x.length>numeric.largeArray){ret.push("...Large Array...");return true}var flag=false;ret.push("[");for(k=0;k<x.length;k++){if(k>0){ret.push(",");if(flag)ret.push("\n ")}flag=foo(x[k])}ret.push("]");return true}ret.push("{");
var flag=false;for(k in x)if(x.hasOwnProperty(k)){if(flag)ret.push(",\n");flag=true;ret.push(k);ret.push(": \n");foo(x[k])}ret.push("}");return true}foo(x);return ret.join("")};numeric.parseDate=function parseDate(d){function foo(d){if(typeof d==="string")return Date.parse(d.replace(/-/g,"/"));if(!(d instanceof Array))throw new Error("parseDate: parameter must be arrays of strings");var ret=[],k;for(k=0;k<d.length;k++)ret[k]=foo(d[k]);return ret}return foo(d)};
numeric.parseFloat=function parseFloat_(d){function foo(d){if(typeof d==="string")return parseFloat(d);if(!(d instanceof Array))throw new Error("parseFloat: parameter must be arrays of strings");var ret=[],k;for(k=0;k<d.length;k++)ret[k]=foo(d[k]);return ret}return foo(d)};
numeric.parseCSV=function parseCSV(t){var foo=t.split("\n");var j,k;var ret=[];var pat=/(([^'",]*)|('[^']*')|("[^"]*")),/g;var patnum=/^\s*(([+-]?[0-9]+(\.[0-9]*)?(e[+-]?[0-9]+)?)|([+-]?[0-9]*(\.[0-9]+)?(e[+-]?[0-9]+)?))\s*$/;var stripper=function(n){return n.substr(0,n.length-1)};var count=0;for(k=0;k<foo.length;k++){var bar=(foo[k]+",").match(pat),baz;if(bar.length>0){ret[count]=[];for(j=0;j<bar.length;j++){baz=stripper(bar[j]);if(patnum.test(baz))ret[count][j]=parseFloat(baz);else ret[count][j]=
baz}count++}}return ret};numeric.toCSV=function toCSV(A){var s=numeric.dim(A);var i,j,m,n,row,ret;m=s[0];n=s[1];ret=[];for(i=0;i<m;i++){row=[];for(j=0;j<m;j++)row[j]=A[i][j].toString();ret[i]=row.join(", ")}return ret.join("\n")+"\n"};numeric.getURL=function getURL(url){var client=new XMLHttpRequest;client.open("GET",url,false);client.send();return client};
numeric.imageURL=function imageURL(img){function base64(A){var n=A.length,i,x,y,z,p,q,r,s;var key="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d";var ret="";for(i=0;i<n;i+=3){x=A[i];y=A[i+1];z=A[i+2];p=x>>2;q=((x&3)<<4)+(y>>4);r=((y&15)<<2)+(z>>6);s=z&63;if(i+1>=n)r=s=64;else if(i+2>=n)s=64;ret+=key.charAt(p)+key.charAt(q)+key.charAt(r)+key.charAt(s)}return ret}function crc32Array(a,from,to){if(typeof from==="undefined")from=0;if(typeof to==="undefined")to=a.length;var table=
[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,
651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,
4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,
167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,
3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918E3,
2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];var crc=-1,y=0,n=a.length,i;for(i=from;i<to;i++){y=(crc^a[i])&255;crc=crc>>>8^table[y]}return crc^-1}var h=img[0].length,w=img[0][0].length,s1,s2,next,k,length,a,b,i,j,adler32,crc32;var stream=[137,80,78,71,13,10,26,10,0,0,0,13,73,72,68,82,w>>24&255,w>>16&255,w>>8&255,w&255,h>>24&255,
h>>16&255,h>>8&255,h&255,8,2,0,0,0,-1,-2,-3,-4,-5,-6,-7,-8,73,68,65,84,8,29];crc32=crc32Array(stream,12,29);stream[29]=crc32>>24&255;stream[30]=crc32>>16&255;stream[31]=crc32>>8&255;stream[32]=crc32&255;s1=1;s2=0;for(i=0;i<h;i++){if(i<h-1)stream.push(0);else stream.push(1);a=3*w+1+(i===0)&255;b=3*w+1+(i===0)>>8&255;stream.push(a);stream.push(b);stream.push(~a&255);stream.push(~b&255);if(i===0)stream.push(0);for(j=0;j<w;j++)for(k=0;k<3;k++){a=img[k][i][j];if(a>255)a=255;else if(a<0)a=0;else a=Math.round(a);
s1=(s1+a)%65521;s2=(s2+s1)%65521;stream.push(a)}stream.push(0)}adler32=(s2<<16)+s1;stream.push(adler32>>24&255);stream.push(adler32>>16&255);stream.push(adler32>>8&255);stream.push(adler32&255);length=stream.length-41;stream[33]=length>>24&255;stream[34]=length>>16&255;stream[35]=length>>8&255;stream[36]=length&255;crc32=crc32Array(stream,37);stream.push(crc32>>24&255);stream.push(crc32>>16&255);stream.push(crc32>>8&255);stream.push(crc32&255);stream.push(0);stream.push(0);stream.push(0);stream.push(0);
stream.push(73);stream.push(69);stream.push(78);stream.push(68);stream.push(174);stream.push(66);stream.push(96);stream.push(130);return"data:image/png;base64,"+base64(stream)};numeric._dim=function _dim(x){var ret=[];while(typeof x==="object"){ret.push(x.length);x=x[0]}return ret};numeric.dim=function dim(x){var y,z;if(typeof x==="object"){y=x[0];if(typeof y==="object"){z=y[0];if(typeof z==="object")return numeric._dim(x);return[x.length,y.length]}return[x.length]}return[]};
numeric.mapreduce=function mapreduce(body,init){return Function("x","accum","_s","_k",'if(typeof accum \x3d\x3d\x3d "undefined") accum \x3d '+init+";\n"+'if(typeof x \x3d\x3d\x3d "number") { var xi \x3d x; '+body+"; return accum; }\n"+'if(typeof _s \x3d\x3d\x3d "undefined") _s \x3d numeric.dim(x);\n'+'if(typeof _k \x3d\x3d\x3d "undefined") _k \x3d 0;\n'+"var _n \x3d _s[_k];\n"+"var i,xi;\n"+"if(_k \x3c _s.length-1) {\n"+"    for(i\x3d_n-1;i\x3e\x3d0;i--) {\n"+"        accum \x3d arguments.callee(x[i],accum,_s,_k+1);\n"+
"    }"+"    return accum;\n"+"}\n"+"for(i\x3d_n-1;i\x3e\x3d1;i-\x3d2) { \n"+"    xi \x3d x[i];\n"+"    "+body+";\n"+"    xi \x3d x[i-1];\n"+"    "+body+";\n"+"}\n"+"if(i \x3d\x3d\x3d 0) {\n"+"    xi \x3d x[i];\n"+"    "+body+"\n"+"}\n"+"return accum;")};numeric.mapreduce2=function mapreduce2(body,setup){return Function("x","var n \x3d x.length;\n"+"var i,xi;\n"+setup+";\n"+"for(i\x3dn-1;i!\x3d\x3d-1;--i) { \n"+"    xi \x3d x[i];\n"+"    "+body+";\n"+"}\n"+"return accum;")};
numeric.same=function same(x,y){var i,n;if(!(x instanceof Array)||!(y instanceof Array))return false;n=x.length;if(n!==y.length)return false;for(i=0;i<n;i++){if(x[i]===y[i])continue;if(typeof x[i]==="object"){if(!same(x[i],y[i]))return false}else return false}return true};numeric.rep=function rep(s,v,k){if(typeof k==="undefined")k=0;var n=s[k],ret=Array(n),i;if(k===s.length-1){for(i=n-2;i>=0;i-=2){ret[i+1]=v;ret[i]=v}if(i===-1)ret[0]=v;return ret}for(i=n-1;i>=0;i--)ret[i]=numeric.rep(s,v,k+1);return ret};
numeric.dotMMsmall=function dotMMsmall(x,y){var i,j,k,p,q,r,ret,foo,bar,woo,i0,k0,p0,r0;p=x.length;q=y.length;r=y[0].length;ret=Array(p);for(i=p-1;i>=0;i--){foo=Array(r);bar=x[i];for(k=r-1;k>=0;k--){woo=bar[q-1]*y[q-1][k];for(j=q-2;j>=1;j-=2){i0=j-1;woo+=bar[j]*y[j][k]+bar[i0]*y[i0][k]}if(j===0)woo+=bar[0]*y[0][k];foo[k]=woo}ret[i]=foo}return ret};numeric._getCol=function _getCol(A,j,x){var n=A.length,i;for(i=n-1;i>0;--i){x[i]=A[i][j];--i;x[i]=A[i][j]}if(i===0)x[0]=A[0][j]};
numeric.dotMMbig=function dotMMbig(x,y){var gc=numeric._getCol,p=y.length,v=Array(p);var m=x.length,n=y[0].length,A=new Array(m),xj;var VV=numeric.dotVV;var i,j,k,z;--p;--m;for(i=m;i!==-1;--i)A[i]=Array(n);--n;for(i=n;i!==-1;--i){gc(y,i,v);for(j=m;j!==-1;--j){z=0;xj=x[j];A[j][i]=VV(xj,v)}}return A};numeric.dotMV=function dotMV(x,y){var p=x.length,q=y.length,i;var ret=Array(p),dotVV=numeric.dotVV;for(i=p-1;i>=0;i--)ret[i]=dotVV(x[i],y);return ret};
numeric.dotVM=function dotVM(x,y){var i,j,k,p,q,r,ret,foo,bar,woo,i0,k0,p0,r0,s1,s2,s3,baz,accum;p=x.length;q=y[0].length;ret=Array(q);for(k=q-1;k>=0;k--){woo=x[p-1]*y[p-1][k];for(j=p-2;j>=1;j-=2){i0=j-1;woo+=x[j]*y[j][k]+x[i0]*y[i0][k]}if(j===0)woo+=x[0]*y[0][k];ret[k]=woo}return ret};numeric.dotVV=function dotVV(x,y){var i,n=x.length,i1,ret=x[n-1]*y[n-1];for(i=n-2;i>=1;i-=2){i1=i-1;ret+=x[i]*y[i]+x[i1]*y[i1]}if(i===0)ret+=x[0]*y[0];return ret};
numeric.dot=function dot(x,y){var d=numeric.dim;switch(d(x).length*1E3+d(y).length){case 2002:if(y.length<10)return numeric.dotMMsmall(x,y);else return numeric.dotMMbig(x,y);case 2001:return numeric.dotMV(x,y);case 1002:return numeric.dotVM(x,y);case 1001:return numeric.dotVV(x,y);case 1E3:return numeric.mulVS(x,y);case 1:return numeric.mulSV(x,y);case 0:return x*y;default:throw new Error("numeric.dot only works on vectors and matrices");}};
numeric.diag=function diag(d){var i,i1,j,n=d.length,A=Array(n),Ai;for(i=n-1;i>=0;i--){Ai=Array(n);i1=i+2;for(j=n-1;j>=i1;j-=2){Ai[j]=0;Ai[j-1]=0}if(j>i)Ai[j]=0;Ai[i]=d[i];for(j=i-1;j>=1;j-=2){Ai[j]=0;Ai[j-1]=0}if(j===0)Ai[0]=0;A[i]=Ai}return A};numeric.getDiag=function(A){var n=Math.min(A.length,A[0].length),i,ret=Array(n);for(i=n-1;i>=1;--i){ret[i]=A[i][i];--i;ret[i]=A[i][i]}if(i===0)ret[0]=A[0][0];return ret};numeric.identity=function identity(n){return numeric.diag(numeric.rep([n],1))};
numeric.pointwise=function pointwise(params,body,setup){if(typeof setup==="undefined")setup="";var fun=[];var k;var avec=/\[i\]$/,p,thevec="";var haveret=false;for(k=0;k<params.length;k++){if(avec.test(params[k])){p=params[k].substring(0,params[k].length-3);thevec=p}else p=params[k];if(p==="ret")haveret=true;fun.push(p)}fun[params.length]="_s";fun[params.length+1]="_k";fun[params.length+2]='if(typeof _s \x3d\x3d\x3d "undefined") _s \x3d numeric.dim('+thevec+");\n"+'if(typeof _k \x3d\x3d\x3d "undefined") _k \x3d 0;\n'+
"var _n \x3d _s[_k];\n"+"var i"+(haveret?"":", ret \x3d Array(_n)")+";\n"+"if(_k \x3c _s.length-1) {\n"+"    for(i\x3d_n-1;i\x3e\x3d0;i--) ret[i] \x3d arguments.callee("+params.join(",")+",_s,_k+1);\n"+"    return ret;\n"+"}\n"+setup+"\n"+"for(i\x3d_n-1;i!\x3d\x3d-1;--i) {\n"+"    "+body+"\n"+"}\n"+"return ret;";return Function.apply(null,fun)};
numeric.pointwise2=function pointwise2(params,body,setup){if(typeof setup==="undefined")setup="";var fun=[];var k;var avec=/\[i\]$/,p,thevec="";var haveret=false;for(k=0;k<params.length;k++){if(avec.test(params[k])){p=params[k].substring(0,params[k].length-3);thevec=p}else p=params[k];if(p==="ret")haveret=true;fun.push(p)}fun[params.length]="var _n \x3d "+thevec+".length;\n"+"var i"+(haveret?"":", ret \x3d Array(_n)")+";\n"+setup+"\n"+"for(i\x3d_n-1;i!\x3d\x3d-1;--i) {\n"+body+"\n"+"}\n"+"return ret;";
return Function.apply(null,fun)};numeric._biforeach=function _biforeach(x,y,s,k,f){if(k===s.length-1){f(x,y);return}var i,n=s[k];for(i=n-1;i>=0;i--)_biforeach(typeof x==="object"?x[i]:x,typeof y==="object"?y[i]:y,s,k+1,f)};numeric._biforeach2=function _biforeach2(x,y,s,k,f){if(k===s.length-1)return f(x,y);var i,n=s[k],ret=Array(n);for(i=n-1;i>=0;--i)ret[i]=_biforeach2(typeof x==="object"?x[i]:x,typeof y==="object"?y[i]:y,s,k+1,f);return ret};
numeric._foreach=function _foreach(x,s,k,f){if(k===s.length-1){f(x);return}var i,n=s[k];for(i=n-1;i>=0;i--)_foreach(x[i],s,k+1,f)};numeric._foreach2=function _foreach2(x,s,k,f){if(k===s.length-1)return f(x);var i,n=s[k],ret=Array(n);for(i=n-1;i>=0;i--)ret[i]=_foreach2(x[i],s,k+1,f);return ret};
numeric.ops2={add:"+",sub:"-",mul:"*",div:"/",mod:"%",and:"\x26\x26",or:"||",eq:"\x3d\x3d\x3d",neq:"!\x3d\x3d",lt:"\x3c",gt:"\x3e",leq:"\x3c\x3d",geq:"\x3e\x3d",band:"\x26",bor:"|",bxor:"^",lshift:"\x3c\x3c",rshift:"\x3e\x3e",rrshift:"\x3e\x3e\x3e"};numeric.opseq={addeq:"+\x3d",subeq:"-\x3d",muleq:"*\x3d",diveq:"/\x3d",modeq:"%\x3d",lshifteq:"\x3c\x3c\x3d",rshifteq:"\x3e\x3e\x3d",rrshifteq:"\x3e\x3e\x3e\x3d",bandeq:"\x26\x3d",boreq:"|\x3d",bxoreq:"^\x3d"};
numeric.mathfuns=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan","isNaN","isFinite"];numeric.mathfuns2=["atan2","pow","max","min"];numeric.ops1={neg:"-",not:"!",bnot:"~",clone:""};
numeric.mapreducers={any:["if(xi) return true;","var accum \x3d false;"],all:["if(!xi) return false;","var accum \x3d true;"],sum:["accum +\x3d xi;","var accum \x3d 0;"],prod:["accum *\x3d xi;","var accum \x3d 1;"],norm2Squared:["accum +\x3d xi*xi;","var accum \x3d 0;"],norminf:["accum \x3d max(accum,abs(xi));","var accum \x3d 0, max \x3d Math.max, abs \x3d Math.abs;"],norm1:["accum +\x3d abs(xi)","var accum \x3d 0, abs \x3d Math.abs;"],sup:["accum \x3d max(accum,xi);","var accum \x3d -Infinity, max \x3d Math.max;"],
inf:["accum \x3d min(accum,xi);","var accum \x3d Infinity, min \x3d Math.min;"]};
(function(){var i,o;for(i=0;i<numeric.mathfuns2.length;++i){o=numeric.mathfuns2[i];numeric.ops2[o]=o}for(i in numeric.ops2)if(numeric.ops2.hasOwnProperty(i)){o=numeric.ops2[i];var code,codeeq,setup="";if(numeric.myIndexOf.call(numeric.mathfuns2,i)!==-1){setup="var "+o+" \x3d Math."+o+";\n";code=function(r,x,y){return r+" \x3d "+o+"("+x+","+y+")"};codeeq=function(x,y){return x+" \x3d "+o+"("+x+","+y+")"}}else{code=function(r,x,y){return r+" \x3d "+x+" "+o+" "+y};if(numeric.opseq.hasOwnProperty(i+"eq"))codeeq=
function(x,y){return x+" "+o+"\x3d "+y};else codeeq=function(x,y){return x+" \x3d "+x+" "+o+" "+y}}numeric[i+"VV"]=numeric.pointwise2(["x[i]","y[i]"],code("ret[i]","x[i]","y[i]"),setup);numeric[i+"SV"]=numeric.pointwise2(["x","y[i]"],code("ret[i]","x","y[i]"),setup);numeric[i+"VS"]=numeric.pointwise2(["x[i]","y"],code("ret[i]","x[i]","y"),setup);numeric[i]=Function("var n \x3d arguments.length, i, x \x3d arguments[0], y;\n"+"var VV \x3d numeric."+i+"VV, VS \x3d numeric."+i+"VS, SV \x3d numeric."+
i+"SV;\n"+"var dim \x3d numeric.dim;\n"+"for(i\x3d1;i!\x3d\x3dn;++i) { \n"+"  y \x3d arguments[i];\n"+'  if(typeof x \x3d\x3d\x3d "object") {\n'+'      if(typeof y \x3d\x3d\x3d "object") x \x3d numeric._biforeach2(x,y,dim(x),0,VV);\n'+"      else x \x3d numeric._biforeach2(x,y,dim(x),0,VS);\n"+'  } else if(typeof y \x3d\x3d\x3d "object") x \x3d numeric._biforeach2(x,y,dim(y),0,SV);\n'+"  else "+codeeq("x","y")+"\n"+"}\nreturn x;\n");numeric[o]=numeric[i];numeric[i+"eqV"]=numeric.pointwise2(["ret[i]",
"x[i]"],codeeq("ret[i]","x[i]"),setup);numeric[i+"eqS"]=numeric.pointwise2(["ret[i]","x"],codeeq("ret[i]","x"),setup);numeric[i+"eq"]=Function("var n \x3d arguments.length, i, x \x3d arguments[0], y;\n"+"var V \x3d numeric."+i+"eqV, S \x3d numeric."+i+"eqS\n"+"var s \x3d numeric.dim(x);\n"+"for(i\x3d1;i!\x3d\x3dn;++i) { \n"+"  y \x3d arguments[i];\n"+'  if(typeof y \x3d\x3d\x3d "object") numeric._biforeach(x,y,s,0,V);\n'+"  else numeric._biforeach(x,y,s,0,S);\n"+"}\nreturn x;\n")}for(i=0;i<numeric.mathfuns2.length;++i){o=
numeric.mathfuns2[i];delete numeric.ops2[o]}for(i=0;i<numeric.mathfuns.length;++i){o=numeric.mathfuns[i];numeric.ops1[o]=o}for(i in numeric.ops1)if(numeric.ops1.hasOwnProperty(i)){setup="";o=numeric.ops1[i];if(numeric.myIndexOf.call(numeric.mathfuns,i)!==-1)if(Math.hasOwnProperty(o))setup="var "+o+" \x3d Math."+o+";\n";numeric[i+"eqV"]=numeric.pointwise2(["ret[i]"],"ret[i] \x3d "+o+"(ret[i]);",setup);numeric[i+"eq"]=Function("x",'if(typeof x !\x3d\x3d "object") return '+o+"x\n"+"var i;\n"+"var V \x3d numeric."+
i+"eqV;\n"+"var s \x3d numeric.dim(x);\n"+"numeric._foreach(x,s,0,V);\n"+"return x;\n");numeric[i+"V"]=numeric.pointwise2(["x[i]"],"ret[i] \x3d "+o+"(x[i]);",setup);numeric[i]=Function("x",'if(typeof x !\x3d\x3d "object") return '+o+"(x)\n"+"var i;\n"+"var V \x3d numeric."+i+"V;\n"+"var s \x3d numeric.dim(x);\n"+"return numeric._foreach2(x,s,0,V);\n")}for(i=0;i<numeric.mathfuns.length;++i){o=numeric.mathfuns[i];delete numeric.ops1[o]}for(i in numeric.mapreducers)if(numeric.mapreducers.hasOwnProperty(i)){o=
numeric.mapreducers[i];numeric[i+"V"]=numeric.mapreduce2(o[0],o[1]);numeric[i]=Function("x","s","k",o[1]+'if(typeof x !\x3d\x3d "object") {'+"    xi \x3d x;\n"+o[0]+";\n"+"    return accum;\n"+"}"+'if(typeof s \x3d\x3d\x3d "undefined") s \x3d numeric.dim(x);\n'+'if(typeof k \x3d\x3d\x3d "undefined") k \x3d 0;\n'+"if(k \x3d\x3d\x3d s.length-1) return numeric."+i+"V(x);\n"+"var xi;\n"+"var n \x3d x.length, i;\n"+"for(i\x3dn-1;i!\x3d\x3d-1;--i) {\n"+"   xi \x3d arguments.callee(x[i]);\n"+o[0]+";\n"+
"}\n"+"return accum;\n")}})();numeric.truncVV=numeric.pointwise(["x[i]","y[i]"],"ret[i] \x3d round(x[i]/y[i])*y[i];","var round \x3d Math.round;");numeric.truncVS=numeric.pointwise(["x[i]","y"],"ret[i] \x3d round(x[i]/y)*y;","var round \x3d Math.round;");numeric.truncSV=numeric.pointwise(["x","y[i]"],"ret[i] \x3d round(x/y[i])*y[i];","var round \x3d Math.round;");
numeric.trunc=function trunc(x,y){if(typeof x==="object"){if(typeof y==="object")return numeric.truncVV(x,y);return numeric.truncVS(x,y)}if(typeof y==="object")return numeric.truncSV(x,y);return Math.round(x/y)*y};
numeric.inv=function inv(x){var s=numeric.dim(x),abs=Math.abs,m=s[0],n=s[1];var A=numeric.clone(x),Ai,Aj;var I=numeric.identity(m),Ii,Ij;var i,j,k,x;for(j=0;j<n;++j){var i0=-1;var v0=-1;for(i=j;i!==m;++i){k=abs(A[i][j]);if(k>v0){i0=i;v0=k}}Aj=A[i0];A[i0]=A[j];A[j]=Aj;Ij=I[i0];I[i0]=I[j];I[j]=Ij;x=Aj[j];for(k=j;k!==n;++k)Aj[k]/=x;for(k=n-1;k!==-1;--k)Ij[k]/=x;for(i=m-1;i!==-1;--i)if(i!==j){Ai=A[i];Ii=I[i];x=Ai[j];for(k=j+1;k!==n;++k)Ai[k]-=Aj[k]*x;for(k=n-1;k>0;--k){Ii[k]-=Ij[k]*x;--k;Ii[k]-=Ij[k]*
x}if(k===0)Ii[0]-=Ij[0]*x}}return I};
numeric.det=function det(x){var s=numeric.dim(x);if(s.length!==2||s[0]!==s[1])throw new Error("numeric: det() only works on square matrices");var n=s[0],ret=1,i,j,k,A=numeric.clone(x),Aj,Ai,alpha,temp,k1,k2,k3;for(j=0;j<n-1;j++){k=j;for(i=j+1;i<n;i++)if(Math.abs(A[i][j])>Math.abs(A[k][j]))k=i;if(k!==j){temp=A[k];A[k]=A[j];A[j]=temp;ret*=-1}Aj=A[j];for(i=j+1;i<n;i++){Ai=A[i];alpha=Ai[j]/Aj[j];for(k=j+1;k<n-1;k+=2){k1=k+1;Ai[k]-=Aj[k]*alpha;Ai[k1]-=Aj[k1]*alpha}if(k!==n)Ai[k]-=Aj[k]*alpha}if(Aj[j]===
0)return 0;ret*=Aj[j]}return ret*A[j][j]};numeric.transpose=function transpose(x){var i,j,m=x.length,n=x[0].length,ret=Array(n),A0,A1,Bj;for(j=0;j<n;j++)ret[j]=Array(m);for(i=m-1;i>=1;i-=2){A1=x[i];A0=x[i-1];for(j=n-1;j>=1;--j){Bj=ret[j];Bj[i]=A1[j];Bj[i-1]=A0[j];--j;Bj=ret[j];Bj[i]=A1[j];Bj[i-1]=A0[j]}if(j===0){Bj=ret[0];Bj[i]=A1[0];Bj[i-1]=A0[0]}}if(i===0){A0=x[0];for(j=n-1;j>=1;--j){ret[j][0]=A0[j];--j;ret[j][0]=A0[j]}if(j===0)ret[0][0]=A0[0]}return ret};
numeric.negtranspose=function negtranspose(x){var i,j,m=x.length,n=x[0].length,ret=Array(n),A0,A1,Bj;for(j=0;j<n;j++)ret[j]=Array(m);for(i=m-1;i>=1;i-=2){A1=x[i];A0=x[i-1];for(j=n-1;j>=1;--j){Bj=ret[j];Bj[i]=-A1[j];Bj[i-1]=-A0[j];--j;Bj=ret[j];Bj[i]=-A1[j];Bj[i-1]=-A0[j]}if(j===0){Bj=ret[0];Bj[i]=-A1[0];Bj[i-1]=-A0[0]}}if(i===0){A0=x[0];for(j=n-1;j>=1;--j){ret[j][0]=-A0[j];--j;ret[j][0]=-A0[j]}if(j===0)ret[0][0]=-A0[0]}return ret};
numeric._random=function _random(s,k){var i,n=s[k],ret=Array(n),rnd;if(k===s.length-1){rnd=Math.random;for(i=n-1;i>=1;i-=2){ret[i]=rnd();ret[i-1]=rnd()}if(i===0)ret[0]=rnd();return ret}for(i=n-1;i>=0;i--)ret[i]=_random(s,k+1);return ret};numeric.random=function random(s){return numeric._random(s,0)};numeric.norm2=function norm2(x){return Math.sqrt(numeric.norm2Squared(x))};
numeric.linspace=function linspace(a,b,n){if(typeof n==="undefined")n=Math.max(Math.round(b-a)+1,1);if(n<2)return n===1?[a]:[];var i,ret=Array(n);n--;for(i=n;i>=0;i--)ret[i]=(i*b+(n-i)*a)/n;return ret};numeric.getBlock=function getBlock(x,from,to){var s=numeric.dim(x);function foo(x,k){var i,a=from[k],n=to[k]-a,ret=Array(n);if(k===s.length-1){for(i=n;i>=0;i--)ret[i]=x[i+a];return ret}for(i=n;i>=0;i--)ret[i]=foo(x[i+a],k+1);return ret}return foo(x,0)};
numeric.setBlock=function setBlock(x,from,to,B){var s=numeric.dim(x);function foo(x,y,k){var i,a=from[k],n=to[k]-a;if(k===s.length-1)for(i=n;i>=0;i--)x[i+a]=y[i];for(i=n;i>=0;i--)foo(x[i+a],y[i],k+1)}foo(x,B,0);return x};numeric.getRange=function getRange(A,I,J){var m=I.length,n=J.length;var i,j;var B=Array(m),Bi,AI;for(i=m-1;i!==-1;--i){B[i]=Array(n);Bi=B[i];AI=A[I[i]];for(j=n-1;j!==-1;--j)Bi[j]=AI[J[j]]}return B};
numeric.blockMatrix=function blockMatrix(X){var s=numeric.dim(X);if(s.length<4)return numeric.blockMatrix([X]);var m=s[0],n=s[1],M,N,i,j,Xij;M=0;N=0;for(i=0;i<m;++i)M+=X[i][0].length;for(j=0;j<n;++j)N+=X[0][j][0].length;var Z=Array(M);for(i=0;i<M;++i)Z[i]=Array(N);var I=0,J,ZI,k,l,Xijk;for(i=0;i<m;++i){J=N;for(j=n-1;j!==-1;--j){Xij=X[i][j];J-=Xij[0].length;for(k=Xij.length-1;k!==-1;--k){Xijk=Xij[k];ZI=Z[I+k];for(l=Xijk.length-1;l!==-1;--l)ZI[J+l]=Xijk[l]}}I+=X[i][0].length}return Z};
numeric.tensor=function tensor(x,y){if(typeof x==="number"||typeof y==="number")return numeric.mul(x,y);var s1=numeric.dim(x),s2=numeric.dim(y);if(s1.length!==1||s2.length!==1)throw new Error("numeric: tensor product is only defined for vectors");var m=s1[0],n=s2[0],A=Array(m),Ai,i,j,xi;for(i=m-1;i>=0;i--){Ai=Array(n);xi=x[i];for(j=n-1;j>=3;--j){Ai[j]=xi*y[j];--j;Ai[j]=xi*y[j];--j;Ai[j]=xi*y[j];--j;Ai[j]=xi*y[j]}while(j>=0){Ai[j]=xi*y[j];--j}A[i]=Ai}return A};
numeric.T=function T(x,y){this.x=x;this.y=y};numeric.t=function t(x,y){return new numeric.T(x,y)};
numeric.Tbinop=function Tbinop(rr,rc,cr,cc,setup){var io=numeric.indexOf;if(typeof setup!=="string"){var k;setup="";for(k in numeric)if(numeric.hasOwnProperty(k)&&(rr.indexOf(k)>=0||rc.indexOf(k)>=0||cr.indexOf(k)>=0||cc.indexOf(k)>=0)&&k.length>1)setup+="var "+k+" \x3d numeric."+k+";\n"}return Function(["y"],"var x \x3d this;\n"+"if(!(y instanceof numeric.T)) { y \x3d new numeric.T(y); }\n"+setup+"\n"+"if(x.y) {"+"  if(y.y) {"+"    return new numeric.T("+cc+");\n"+"  }\n"+"  return new numeric.T("+
cr+");\n"+"}\n"+"if(y.y) {\n"+"  return new numeric.T("+rc+");\n"+"}\n"+"return new numeric.T("+rr+");\n")};numeric.T.prototype.add=numeric.Tbinop("add(x.x,y.x)","add(x.x,y.x),y.y","add(x.x,y.x),x.y","add(x.x,y.x),add(x.y,y.y)");numeric.T.prototype.sub=numeric.Tbinop("sub(x.x,y.x)","sub(x.x,y.x),neg(y.y)","sub(x.x,y.x),x.y","sub(x.x,y.x),sub(x.y,y.y)");numeric.T.prototype.mul=numeric.Tbinop("mul(x.x,y.x)","mul(x.x,y.x),mul(x.x,y.y)","mul(x.x,y.x),mul(x.y,y.x)","sub(mul(x.x,y.x),mul(x.y,y.y)),add(mul(x.x,y.y),mul(x.y,y.x))");
numeric.T.prototype.reciprocal=function reciprocal(){var mul=numeric.mul,div=numeric.div;if(this.y){var d=numeric.add(mul(this.x,this.x),mul(this.y,this.y));return new numeric.T(div(this.x,d),div(numeric.neg(this.y),d))}return new T(div(1,this.x))};numeric.T.prototype.div=function div(y){if(!(y instanceof numeric.T))y=new numeric.T(y);if(y.y)return this.mul(y.reciprocal());var div=numeric.div;if(this.y)return new numeric.T(div(this.x,y.x),div(this.y,y.x));return new numeric.T(div(this.x,y.x))};
numeric.T.prototype.dot=numeric.Tbinop("dot(x.x,y.x)","dot(x.x,y.x),dot(x.x,y.y)","dot(x.x,y.x),dot(x.y,y.x)","sub(dot(x.x,y.x),dot(x.y,y.y)),add(dot(x.x,y.y),dot(x.y,y.x))");numeric.T.prototype.transpose=function transpose(){var t=numeric.transpose,x=this.x,y=this.y;if(y)return new numeric.T(t(x),t(y));return new numeric.T(t(x))};numeric.T.prototype.transjugate=function transjugate(){var t=numeric.transpose,x=this.x,y=this.y;if(y)return new numeric.T(t(x),numeric.negtranspose(y));return new numeric.T(t(x))};
numeric.Tunop=function Tunop(r,c,s){if(typeof s!=="string")s="";return Function("var x \x3d this;\n"+s+"\n"+"if(x.y) {"+"  "+c+";\n"+"}\n"+r+";\n")};numeric.T.prototype.exp=numeric.Tunop("return new numeric.T(ex)","return new numeric.T(mul(cos(x.y),ex),mul(sin(x.y),ex))","var ex \x3d numeric.exp(x.x), cos \x3d numeric.cos, sin \x3d numeric.sin, mul \x3d numeric.mul;");numeric.T.prototype.conj=numeric.Tunop("return new numeric.T(x.x);","return new numeric.T(x.x,numeric.neg(x.y));");
numeric.T.prototype.neg=numeric.Tunop("return new numeric.T(neg(x.x));","return new numeric.T(neg(x.x),neg(x.y));","var neg \x3d numeric.neg;");numeric.T.prototype.sin=numeric.Tunop("return new numeric.T(numeric.sin(x.x))","return x.exp().sub(x.neg().exp()).div(new numeric.T(0,2));");numeric.T.prototype.cos=numeric.Tunop("return new numeric.T(numeric.cos(x.x))","return x.exp().add(x.neg().exp()).div(2);");
numeric.T.prototype.abs=numeric.Tunop("return new numeric.T(numeric.abs(x.x));","return new numeric.T(numeric.sqrt(numeric.add(mul(x.x,x.x),mul(x.y,x.y))));","var mul \x3d numeric.mul;");numeric.T.prototype.log=numeric.Tunop("return new numeric.T(numeric.log(x.x));","var theta \x3d new numeric.T(numeric.atan2(x.y,x.x)), r \x3d x.abs();\n"+"return new numeric.T(numeric.log(r.x),theta.x);");numeric.T.prototype.norm2=numeric.Tunop("return numeric.norm2(x.x);","var f \x3d numeric.norm2Squared;\n"+"return Math.sqrt(f(x.x)+f(x.y));");
numeric.T.prototype.inv=function inv(){var A=this;if(typeof A.y==="undefined")return new numeric.T(numeric.inv(A.x));var n=A.x.length,i,j,k;var Rx=numeric.identity(n),Ry=numeric.rep([n,n],0);var Ax=numeric.clone(A.x),Ay=numeric.clone(A.y);var Aix,Aiy,Ajx,Ajy,Rix,Riy,Rjx,Rjy;var i,j,k,d,d1,ax,ay,bx,by,temp;for(i=0;i<n;i++){ax=Ax[i][i];ay=Ay[i][i];d=ax*ax+ay*ay;k=i;for(j=i+1;j<n;j++){ax=Ax[j][i];ay=Ay[j][i];d1=ax*ax+ay*ay;if(d1>d){k=j;d=d1}}if(k!==i){temp=Ax[i];Ax[i]=Ax[k];Ax[k]=temp;temp=Ay[i];Ay[i]=
Ay[k];Ay[k]=temp;temp=Rx[i];Rx[i]=Rx[k];Rx[k]=temp;temp=Ry[i];Ry[i]=Ry[k];Ry[k]=temp}Aix=Ax[i];Aiy=Ay[i];Rix=Rx[i];Riy=Ry[i];ax=Aix[i];ay=Aiy[i];for(j=i+1;j<n;j++){bx=Aix[j];by=Aiy[j];Aix[j]=(bx*ax+by*ay)/d;Aiy[j]=(by*ax-bx*ay)/d}for(j=0;j<n;j++){bx=Rix[j];by=Riy[j];Rix[j]=(bx*ax+by*ay)/d;Riy[j]=(by*ax-bx*ay)/d}for(j=i+1;j<n;j++){Ajx=Ax[j];Ajy=Ay[j];Rjx=Rx[j];Rjy=Ry[j];ax=Ajx[i];ay=Ajy[i];for(k=i+1;k<n;k++){bx=Aix[k];by=Aiy[k];Ajx[k]-=bx*ax-by*ay;Ajy[k]-=by*ax+bx*ay}for(k=0;k<n;k++){bx=Rix[k];by=
Riy[k];Rjx[k]-=bx*ax-by*ay;Rjy[k]-=by*ax+bx*ay}}}for(i=n-1;i>0;i--){Rix=Rx[i];Riy=Ry[i];for(j=i-1;j>=0;j--){Rjx=Rx[j];Rjy=Ry[j];ax=Ax[j][i];ay=Ay[j][i];for(k=n-1;k>=0;k--){bx=Rix[k];by=Riy[k];Rjx[k]-=ax*bx-ay*by;Rjy[k]-=ax*by+ay*bx}}}return new numeric.T(Rx,Ry)};numeric.T.prototype.get=function get(i){var x=this.x,y=this.y,k=0,ik,n=i.length;if(y){while(k<n){ik=i[k];x=x[ik];y=y[ik];k++}return new numeric.T(x,y)}while(k<n){ik=i[k];x=x[ik];k++}return new numeric.T(x)};
numeric.T.prototype.set=function set(i,v){var x=this.x,y=this.y,k=0,ik,n=i.length,vx=v.x,vy=v.y;if(n===0){if(vy)this.y=vy;else if(y)this.y=undefined;this.x=x;return this}if(vy){if(y);else{y=numeric.rep(numeric.dim(x),0);this.y=y}while(k<n-1){ik=i[k];x=x[ik];y=y[ik];k++}ik=i[k];x[ik]=vx;y[ik]=vy;return this}if(y){while(k<n-1){ik=i[k];x=x[ik];y=y[ik];k++}ik=i[k];x[ik]=vx;if(vx instanceof Array)y[ik]=numeric.rep(numeric.dim(vx),0);else y[ik]=0;return this}while(k<n-1){ik=i[k];x=x[ik];k++}ik=i[k];x[ik]=
vx;return this};numeric.T.prototype.getRows=function getRows(i0,i1){var n=i1-i0+1,j;var rx=Array(n),ry,x=this.x,y=this.y;for(j=i0;j<=i1;j++)rx[j-i0]=x[j];if(y){ry=Array(n);for(j=i0;j<=i1;j++)ry[j-i0]=y[j];return new numeric.T(rx,ry)}return new numeric.T(rx)};
numeric.T.prototype.setRows=function setRows(i0,i1,A){var j;var rx=this.x,ry=this.y,x=A.x,y=A.y;for(j=i0;j<=i1;j++)rx[j]=x[j-i0];if(y){if(!ry){ry=numeric.rep(numeric.dim(rx),0);this.y=ry}for(j=i0;j<=i1;j++)ry[j]=y[j-i0]}else if(ry)for(j=i0;j<=i1;j++)ry[j]=numeric.rep([x[j-i0].length],0);return this};numeric.T.prototype.getRow=function getRow(k){var x=this.x,y=this.y;if(y)return new numeric.T(x[k],y[k]);return new numeric.T(x[k])};
numeric.T.prototype.setRow=function setRow(i,v){var rx=this.x,ry=this.y,x=v.x,y=v.y;rx[i]=x;if(y){if(!ry){ry=numeric.rep(numeric.dim(rx),0);this.y=ry}ry[i]=y}else if(ry)ry=numeric.rep([x.length],0);return this};numeric.T.prototype.getBlock=function getBlock(from,to){var x=this.x,y=this.y,b=numeric.getBlock;if(y)return new numeric.T(b(x,from,to),b(y,from,to));return new numeric.T(b(x,from,to))};
numeric.T.prototype.setBlock=function setBlock(from,to,A){if(!(A instanceof numeric.T))A=new numeric.T(A);var x=this.x,y=this.y,b=numeric.setBlock,Ax=A.x,Ay=A.y;if(Ay){if(!y){this.y=numeric.rep(numeric.dim(this),0);y=this.y}b(x,from,to,Ax);b(y,from,to,Ay);return this}b(x,from,to,Ax);if(y)b(y,from,to,numeric.rep(numeric.dim(Ax),0))};numeric.T.rep=function rep(s,v){var T=numeric.T;if(!(v instanceof T))v=new T(v);var x=v.x,y=v.y,r=numeric.rep;if(y)return new T(r(s,x),r(s,y));return new T(r(s,x))};
numeric.T.diag=function diag(d){if(!(d instanceof numeric.T))d=new numeric.T(d);var x=d.x,y=d.y,diag=numeric.diag;if(y)return new numeric.T(diag(x),diag(y));return new numeric.T(diag(x))};numeric.T.eig=function eig(){if(this.y)throw new Error("eig: not implemented for complex matrices.");return numeric.eig(this.x)};numeric.T.identity=function identity(n){return new numeric.T(numeric.identity(n))};
numeric.T.prototype.getDiag=function getDiag(){var n=numeric;var x=this.x,y=this.y;if(y)return new n.T(n.getDiag(x),n.getDiag(y));return new n.T(n.getDiag(x))};numeric.house=function house(x){var v=numeric.clone(x);var s=x[0]>=0?1:-1;var alpha=s*numeric.norm2(x);v[0]+=alpha;var foo=numeric.norm2(v);if(foo===0)throw new Error("eig: internal error");return numeric.div(v,foo)};
numeric.toUpperHessenberg=function toUpperHessenberg(me){var s=numeric.dim(me);if(s.length!==2||s[0]!==s[1])throw new Error("numeric: toUpperHessenberg() only works on square matrices");var m=s[0],i,j,k,x,v,A=numeric.clone(me),B,C,Ai,Ci,Q=numeric.identity(m),Qi;for(j=0;j<m-2;j++){x=Array(m-j-1);for(i=j+1;i<m;i++)x[i-j-1]=A[i][j];if(numeric.norm2(x)>0){v=numeric.house(x);B=numeric.getBlock(A,[j+1,j],[m-1,m-1]);C=numeric.tensor(v,numeric.dot(v,B));for(i=j+1;i<m;i++){Ai=A[i];Ci=C[i-j-1];for(k=j;k<m;k++)Ai[k]-=
2*Ci[k-j]}B=numeric.getBlock(A,[0,j+1],[m-1,m-1]);C=numeric.tensor(numeric.dot(B,v),v);for(i=0;i<m;i++){Ai=A[i];Ci=C[i];for(k=j+1;k<m;k++)Ai[k]-=2*Ci[k-j-1]}B=Array(m-j-1);for(i=j+1;i<m;i++)B[i-j-1]=Q[i];C=numeric.tensor(v,numeric.dot(v,B));for(i=j+1;i<m;i++){Qi=Q[i];Ci=C[i-j-1];for(k=0;k<m;k++)Qi[k]-=2*Ci[k]}}}return{H:A,Q:Q}};numeric.epsilon=2.220446049250313E-16;
numeric.QRFrancis=function(H,maxiter){if(typeof maxiter==="undefined")maxiter=1E4;H=numeric.clone(H);var H0=numeric.clone(H);var s=numeric.dim(H),m=s[0],x,v,a,b,c,d,det,tr,Hloc,Q=numeric.identity(m),Qi,Hi,B,C,Ci,i,j,k,iter;if(m<3)return{Q:Q,B:[[0,m-1]]};var epsilon=numeric.epsilon;for(iter=0;iter<maxiter;iter++){for(j=0;j<m-1;j++)if(Math.abs(H[j+1][j])<epsilon*(Math.abs(H[j][j])+Math.abs(H[j+1][j+1]))){var QH1=numeric.QRFrancis(numeric.getBlock(H,[0,0],[j,j]),maxiter);var QH2=numeric.QRFrancis(numeric.getBlock(H,
[j+1,j+1],[m-1,m-1]),maxiter);B=Array(j+1);for(i=0;i<=j;i++)B[i]=Q[i];C=numeric.dot(QH1.Q,B);for(i=0;i<=j;i++)Q[i]=C[i];B=Array(m-j-1);for(i=j+1;i<m;i++)B[i-j-1]=Q[i];C=numeric.dot(QH2.Q,B);for(i=j+1;i<m;i++)Q[i]=C[i-j-1];return{Q:Q,B:QH1.B.concat(numeric.add(QH2.B,j+1))}}a=H[m-2][m-2];b=H[m-2][m-1];c=H[m-1][m-2];d=H[m-1][m-1];tr=a+d;det=a*d-b*c;Hloc=numeric.getBlock(H,[0,0],[2,2]);if(tr*tr>=4*det){var s1,s2;s1=.5*(tr+Math.sqrt(tr*tr-4*det));s2=.5*(tr-Math.sqrt(tr*tr-4*det));Hloc=numeric.add(numeric.sub(numeric.dot(Hloc,
Hloc),numeric.mul(Hloc,s1+s2)),numeric.diag(numeric.rep([3],s1*s2)))}else Hloc=numeric.add(numeric.sub(numeric.dot(Hloc,Hloc),numeric.mul(Hloc,tr)),numeric.diag(numeric.rep([3],det)));x=[Hloc[0][0],Hloc[1][0],Hloc[2][0]];v=numeric.house(x);B=[H[0],H[1],H[2]];C=numeric.tensor(v,numeric.dot(v,B));for(i=0;i<3;i++){Hi=H[i];Ci=C[i];for(k=0;k<m;k++)Hi[k]-=2*Ci[k]}B=numeric.getBlock(H,[0,0],[m-1,2]);C=numeric.tensor(numeric.dot(B,v),v);for(i=0;i<m;i++){Hi=H[i];Ci=C[i];for(k=0;k<3;k++)Hi[k]-=2*Ci[k]}B=[Q[0],
Q[1],Q[2]];C=numeric.tensor(v,numeric.dot(v,B));for(i=0;i<3;i++){Qi=Q[i];Ci=C[i];for(k=0;k<m;k++)Qi[k]-=2*Ci[k]}var J;for(j=0;j<m-2;j++){for(k=j;k<=j+1;k++)if(Math.abs(H[k+1][k])<epsilon*(Math.abs(H[k][k])+Math.abs(H[k+1][k+1]))){var QH1=numeric.QRFrancis(numeric.getBlock(H,[0,0],[k,k]),maxiter);var QH2=numeric.QRFrancis(numeric.getBlock(H,[k+1,k+1],[m-1,m-1]),maxiter);B=Array(k+1);for(i=0;i<=k;i++)B[i]=Q[i];C=numeric.dot(QH1.Q,B);for(i=0;i<=k;i++)Q[i]=C[i];B=Array(m-k-1);for(i=k+1;i<m;i++)B[i-k-
1]=Q[i];C=numeric.dot(QH2.Q,B);for(i=k+1;i<m;i++)Q[i]=C[i-k-1];return{Q:Q,B:QH1.B.concat(numeric.add(QH2.B,k+1))}}J=Math.min(m-1,j+3);x=Array(J-j);for(i=j+1;i<=J;i++)x[i-j-1]=H[i][j];v=numeric.house(x);B=numeric.getBlock(H,[j+1,j],[J,m-1]);C=numeric.tensor(v,numeric.dot(v,B));for(i=j+1;i<=J;i++){Hi=H[i];Ci=C[i-j-1];for(k=j;k<m;k++)Hi[k]-=2*Ci[k-j]}B=numeric.getBlock(H,[0,j+1],[m-1,J]);C=numeric.tensor(numeric.dot(B,v),v);for(i=0;i<m;i++){Hi=H[i];Ci=C[i];for(k=j+1;k<=J;k++)Hi[k]-=2*Ci[k-j-1]}B=Array(J-
j);for(i=j+1;i<=J;i++)B[i-j-1]=Q[i];C=numeric.tensor(v,numeric.dot(v,B));for(i=j+1;i<=J;i++){Qi=Q[i];Ci=C[i-j-1];for(k=0;k<m;k++)Qi[k]-=2*Ci[k]}}}throw new Error("numeric: eigenvalue iteration does not converge -- increase maxiter?");};
numeric.eig=function eig(A,maxiter){var QH=numeric.toUpperHessenberg(A);var QB=numeric.QRFrancis(QH.H,maxiter);var T=numeric.T;var n=A.length,i,k,flag=false,B=QB.B,H=numeric.dot(QB.Q,numeric.dot(QH.H,numeric.transpose(QB.Q)));var Q=new T(numeric.dot(QB.Q,QH.Q)),Q0;var m=B.length,j;var a,b,c,d,p1,p2,disc,x,y,p,q,n1,n2;var sqrt=Math.sqrt;for(k=0;k<m;k++){i=B[k][0];if(i===B[k][1]);else{j=i+1;a=H[i][i];b=H[i][j];c=H[j][i];d=H[j][j];if(b===0&&c===0)continue;p1=-a-d;p2=a*d-b*c;disc=p1*p1-4*p2;if(disc>=
0){if(p1<0)x=-.5*(p1-sqrt(disc));else x=-.5*(p1+sqrt(disc));n1=(a-x)*(a-x)+b*b;n2=c*c+(d-x)*(d-x);if(n1>n2){n1=sqrt(n1);p=(a-x)/n1;q=b/n1}else{n2=sqrt(n2);p=c/n2;q=(d-x)/n2}Q0=new T([[q,-p],[p,q]]);Q.setRows(i,j,Q0.dot(Q.getRows(i,j)))}else{x=-.5*p1;y=.5*sqrt(-disc);n1=(a-x)*(a-x)+b*b;n2=c*c+(d-x)*(d-x);if(n1>n2){n1=sqrt(n1+y*y);p=(a-x)/n1;q=b/n1;x=0;y/=n1}else{n2=sqrt(n2+y*y);p=c/n2;q=(d-x)/n2;x=y/n2;y=0}Q0=new T([[q,-p],[p,q]],[[x,y],[y,-x]]);Q.setRows(i,j,Q0.dot(Q.getRows(i,j)))}}}var R=Q.dot(A).dot(Q.transjugate()),
n=A.length,E=numeric.T.identity(n);for(j=0;j<n;j++)if(j>0)for(k=j-1;k>=0;k--){var Rk=R.get([k,k]),Rj=R.get([j,j]);if(numeric.neq(Rk.x,Rj.x)||numeric.neq(Rk.y,Rj.y)){x=R.getRow(k).getBlock([k],[j-1]);y=E.getRow(j).getBlock([k],[j-1]);E.set([j,k],R.get([k,j]).neg().sub(x.dot(y)).div(Rk.sub(Rj)))}else{E.setRow(j,E.getRow(k));continue}}for(j=0;j<n;j++){x=E.getRow(j);E.setRow(j,x.div(x.norm2()))}E=E.transpose();E=Q.transjugate().dot(E);return{lambda:R.getDiag(),E:E}};
numeric.ccsSparse=function ccsSparse(A){var m=A.length,n,foo,i,j,counts=[];for(i=m-1;i!==-1;--i){foo=A[i];for(j in foo){j=parseInt(j);while(j>=counts.length)counts[counts.length]=0;if(foo[j]!==0)counts[j]++}}var n=counts.length;var Ai=Array(n+1);Ai[0]=0;for(i=0;i<n;++i)Ai[i+1]=Ai[i]+counts[i];var Aj=Array(Ai[n]),Av=Array(Ai[n]);for(i=m-1;i!==-1;--i){foo=A[i];for(j in foo)if(foo[j]!==0){counts[j]--;Aj[Ai[j]+counts[j]]=i;Av[Ai[j]+counts[j]]=foo[j]}}return[Ai,Aj,Av]};
numeric.ccsFull=function ccsFull(A){var Ai=A[0],Aj=A[1],Av=A[2],s=numeric.ccsDim(A),m=s[0],n=s[1],i,j,j0,j1,k;var B=numeric.rep([m,n],0);for(i=0;i<n;i++){j0=Ai[i];j1=Ai[i+1];for(j=j0;j<j1;++j)B[Aj[j]][i]=Av[j]}return B};
numeric.ccsTSolve=function ccsTSolve(A,b,x,bj,xj){var Ai=A[0],Aj=A[1],Av=A[2],m=Ai.length-1,max=Math.max,n=0;if(typeof bj==="undefined")x=numeric.rep([m],0);if(typeof bj==="undefined")bj=numeric.linspace(0,x.length-1);if(typeof xj==="undefined")xj=[];function dfs(j){var k;if(x[j]!==0)return;x[j]=1;for(k=Ai[j];k<Ai[j+1];++k)dfs(Aj[k]);xj[n]=j;++n}var i,j,j0,j1,k,l,l0,l1,a;for(i=bj.length-1;i!==-1;--i)dfs(bj[i]);xj.length=n;for(i=xj.length-1;i!==-1;--i)x[xj[i]]=0;for(i=bj.length-1;i!==-1;--i){j=bj[i];
x[j]=b[j]}for(i=xj.length-1;i!==-1;--i){j=xj[i];j0=Ai[j];j1=max(Ai[j+1],j0);for(k=j0;k!==j1;++k)if(Aj[k]===j){x[j]/=Av[k];break}a=x[j];for(k=j0;k!==j1;++k){l=Aj[k];if(l!==j)x[l]-=a*Av[k]}}return x};numeric.ccsDFS=function ccsDFS(n){this.k=Array(n);this.k1=Array(n);this.j=Array(n)};
numeric.ccsDFS.prototype.dfs=function dfs(J,Ai,Aj,x,xj,Pinv){var m=0,foo,n=xj.length;var k=this.k,k1=this.k1,j=this.j,km,k11;if(x[J]!==0)return;x[J]=1;j[0]=J;k[0]=km=Ai[J];k1[0]=k11=Ai[J+1];while(1)if(km>=k11){xj[n]=j[m];if(m===0)return;++n;--m;km=k[m];k11=k1[m]}else{foo=Pinv[Aj[km]];if(x[foo]===0){x[foo]=1;k[m]=km;++m;j[m]=foo;km=Ai[foo];k1[m]=k11=Ai[foo+1]}else++km}};
numeric.ccsLPSolve=function ccsLPSolve(A,B,x,xj,I,Pinv,dfs){var Ai=A[0],Aj=A[1],Av=A[2],m=Ai.length-1,n=0;var Bi=B[0],Bj=B[1],Bv=B[2];var i,i0,i1,j,J,j0,j1,k,l,l0,l1,a;i0=Bi[I];i1=Bi[I+1];xj.length=0;for(i=i0;i<i1;++i)dfs.dfs(Pinv[Bj[i]],Ai,Aj,x,xj,Pinv);for(i=xj.length-1;i!==-1;--i)x[xj[i]]=0;for(i=i0;i!==i1;++i){j=Pinv[Bj[i]];x[j]=Bv[i]}for(i=xj.length-1;i!==-1;--i){j=xj[i];j0=Ai[j];j1=Ai[j+1];for(k=j0;k<j1;++k)if(Pinv[Aj[k]]===j){x[j]/=Av[k];break}a=x[j];for(k=j0;k<j1;++k){l=Pinv[Aj[k]];if(l!==
j)x[l]-=a*Av[k]}}return x};
numeric.ccsLUP1=function ccsLUP1(A,threshold){var m=A[0].length-1;var L=[numeric.rep([m+1],0),[],[]],U=[numeric.rep([m+1],0),[],[]];var Li=L[0],Lj=L[1],Lv=L[2],Ui=U[0],Uj=U[1],Uv=U[2];var x=numeric.rep([m],0),xj=numeric.rep([m],0);var i,j,k,j0,j1,a,e,c,d,K;var sol=numeric.ccsLPSolve,max=Math.max,abs=Math.abs;var P=numeric.linspace(0,m-1),Pinv=numeric.linspace(0,m-1);var dfs=new numeric.ccsDFS(m);if(typeof threshold==="undefined")threshold=1;for(i=0;i<m;++i){sol(L,A,x,xj,i,Pinv,dfs);a=-1;e=-1;for(j=
xj.length-1;j!==-1;--j){k=xj[j];if(k<=i)continue;c=abs(x[k]);if(c>a){e=k;a=c}}if(abs(x[i])<threshold*a){j=P[i];a=P[e];P[i]=a;Pinv[a]=i;P[e]=j;Pinv[j]=e;a=x[i];x[i]=x[e];x[e]=a}a=Li[i];e=Ui[i];d=x[i];Lj[a]=P[i];Lv[a]=1;++a;for(j=xj.length-1;j!==-1;--j){k=xj[j];c=x[k];xj[j]=0;x[k]=0;if(k<=i){Uj[e]=k;Uv[e]=c;++e}else{Lj[a]=P[k];Lv[a]=c/d;++a}}Li[i+1]=a;Ui[i+1]=e}for(j=Lj.length-1;j!==-1;--j)Lj[j]=Pinv[Lj[j]];return{L:L,U:U,P:P,Pinv:Pinv}};
numeric.ccsDFS0=function ccsDFS0(n){this.k=Array(n);this.k1=Array(n);this.j=Array(n)};
numeric.ccsDFS0.prototype.dfs=function dfs(J,Ai,Aj,x,xj,Pinv,P){var m=0,foo,n=xj.length;var k=this.k,k1=this.k1,j=this.j,km,k11;if(x[J]!==0)return;x[J]=1;j[0]=J;k[0]=km=Ai[Pinv[J]];k1[0]=k11=Ai[Pinv[J]+1];while(1){if(isNaN(km))throw new Error("Ow!");if(km>=k11){xj[n]=Pinv[j[m]];if(m===0)return;++n;--m;km=k[m];k11=k1[m]}else{foo=Aj[km];if(x[foo]===0){x[foo]=1;k[m]=km;++m;j[m]=foo;foo=Pinv[foo];km=Ai[foo];k1[m]=k11=Ai[foo+1]}else++km}}};
numeric.ccsLPSolve0=function ccsLPSolve0(A,B,y,xj,I,Pinv,P,dfs){var Ai=A[0],Aj=A[1],Av=A[2],m=Ai.length-1,n=0;var Bi=B[0],Bj=B[1],Bv=B[2];var i,i0,i1,j,J,j0,j1,k,l,l0,l1,a;i0=Bi[I];i1=Bi[I+1];xj.length=0;for(i=i0;i<i1;++i)dfs.dfs(Bj[i],Ai,Aj,y,xj,Pinv,P);for(i=xj.length-1;i!==-1;--i){j=xj[i];y[P[j]]=0}for(i=i0;i!==i1;++i){j=Bj[i];y[j]=Bv[i]}for(i=xj.length-1;i!==-1;--i){j=xj[i];l=P[j];j0=Ai[j];j1=Ai[j+1];for(k=j0;k<j1;++k)if(Aj[k]===l){y[l]/=Av[k];break}a=y[l];for(k=j0;k<j1;++k)y[Aj[k]]-=a*Av[k];
y[l]=a}};
numeric.ccsLUP0=function ccsLUP0(A,threshold){var m=A[0].length-1;var L=[numeric.rep([m+1],0),[],[]],U=[numeric.rep([m+1],0),[],[]];var Li=L[0],Lj=L[1],Lv=L[2],Ui=U[0],Uj=U[1],Uv=U[2];var y=numeric.rep([m],0),xj=numeric.rep([m],0);var i,j,k,j0,j1,a,e,c,d,K;var sol=numeric.ccsLPSolve0,max=Math.max,abs=Math.abs;var P=numeric.linspace(0,m-1),Pinv=numeric.linspace(0,m-1);var dfs=new numeric.ccsDFS0(m);if(typeof threshold==="undefined")threshold=1;for(i=0;i<m;++i){sol(L,A,y,xj,i,Pinv,P,dfs);a=-1;e=-1;
for(j=xj.length-1;j!==-1;--j){k=xj[j];if(k<=i)continue;c=abs(y[P[k]]);if(c>a){e=k;a=c}}if(abs(y[P[i]])<threshold*a){j=P[i];a=P[e];P[i]=a;Pinv[a]=i;P[e]=j;Pinv[j]=e}a=Li[i];e=Ui[i];d=y[P[i]];Lj[a]=P[i];Lv[a]=1;++a;for(j=xj.length-1;j!==-1;--j){k=xj[j];c=y[P[k]];xj[j]=0;y[P[k]]=0;if(k<=i){Uj[e]=k;Uv[e]=c;++e}else{Lj[a]=P[k];Lv[a]=c/d;++a}}Li[i+1]=a;Ui[i+1]=e}for(j=Lj.length-1;j!==-1;--j)Lj[j]=Pinv[Lj[j]];return{L:L,U:U,P:P,Pinv:Pinv}};numeric.ccsLUP=numeric.ccsLUP0;
numeric.ccsDim=function ccsDim(A){return[numeric.sup(A[1])+1,A[0].length-1]};
numeric.ccsGetBlock=function ccsGetBlock(A,i,j){var s=numeric.ccsDim(A),m=s[0],n=s[1];if(typeof i==="undefined")i=numeric.linspace(0,m-1);else if(typeof i==="number")i=[i];if(typeof j==="undefined")j=numeric.linspace(0,n-1);else if(typeof j==="number")j=[j];var p,p0,p1,P=i.length,q,Q=j.length,r,jq,ip;var Bi=numeric.rep([n],0),Bj=[],Bv=[],B=[Bi,Bj,Bv];var Ai=A[0],Aj=A[1],Av=A[2];var x=numeric.rep([m],0),count=0,flags=numeric.rep([m],0);for(q=0;q<Q;++q){jq=j[q];var q0=Ai[jq];var q1=Ai[jq+1];for(p=q0;p<
q1;++p){r=Aj[p];flags[r]=1;x[r]=Av[p]}for(p=0;p<P;++p){ip=i[p];if(flags[ip]){Bj[count]=p;Bv[count]=x[i[p]];++count}}for(p=q0;p<q1;++p){r=Aj[p];flags[r]=0}Bi[q+1]=count}return B};
numeric.ccsDot=function ccsDot(A,B){var Ai=A[0],Aj=A[1],Av=A[2];var Bi=B[0],Bj=B[1],Bv=B[2];var sA=numeric.ccsDim(A),sB=numeric.ccsDim(B);var m=sA[0],n=sA[1],o=sB[1];var x=numeric.rep([m],0),flags=numeric.rep([m],0),xj=Array(m);var Ci=numeric.rep([o],0),Cj=[],Cv=[],C=[Ci,Cj,Cv];var i,j,k,j0,j1,i0,i1,l,p,a,b;for(k=0;k!==o;++k){j0=Bi[k];j1=Bi[k+1];p=0;for(j=j0;j<j1;++j){a=Bj[j];b=Bv[j];i0=Ai[a];i1=Ai[a+1];for(i=i0;i<i1;++i){l=Aj[i];if(flags[l]===0){xj[p]=l;flags[l]=1;p=p+1}x[l]=x[l]+Av[i]*b}}j0=Ci[k];
j1=j0+p;Ci[k+1]=j1;for(j=p-1;j!==-1;--j){b=j0+j;i=xj[j];Cj[b]=i;Cv[b]=x[i];flags[i]=0;x[i]=0}Ci[k+1]=Ci[k]+p}return C};
numeric.ccsLUPSolve=function ccsLUPSolve(LUP,B){var L=LUP.L,U=LUP.U,P=LUP.P;var Bi=B[0];var flag=false;if(typeof Bi!=="object"){B=[[0,B.length],numeric.linspace(0,B.length-1),B];Bi=B[0];flag=true}var Bj=B[1],Bv=B[2];var n=L[0].length-1,m=Bi.length-1;var x=numeric.rep([n],0),xj=Array(n);var b=numeric.rep([n],0),bj=Array(n);var Xi=numeric.rep([m+1],0),Xj=[],Xv=[];var sol=numeric.ccsTSolve;var i,j,j0,j1,k,J,N=0;for(i=0;i<m;++i){k=0;j0=Bi[i];j1=Bi[i+1];for(j=j0;j<j1;++j){J=LUP.Pinv[Bj[j]];bj[k]=J;b[J]=
Bv[j];++k}bj.length=k;sol(L,b,x,bj,xj);for(j=bj.length-1;j!==-1;--j)b[bj[j]]=0;sol(U,x,b,xj,bj);if(flag)return b;for(j=xj.length-1;j!==-1;--j)x[xj[j]]=0;for(j=bj.length-1;j!==-1;--j){J=bj[j];Xj[N]=J;Xv[N]=b[J];b[J]=0;++N}Xi[i+1]=N}return[Xi,Xj,Xv]};
numeric.ccsbinop=function ccsbinop(body,setup){if(typeof setup==="undefined")setup="";return Function("X","Y","var Xi \x3d X[0], Xj \x3d X[1], Xv \x3d X[2];\n"+"var Yi \x3d Y[0], Yj \x3d Y[1], Yv \x3d Y[2];\n"+"var n \x3d Xi.length-1,m \x3d Math.max(numeric.sup(Xj),numeric.sup(Yj))+1;\n"+"var Zi \x3d numeric.rep([n+1],0), Zj \x3d [], Zv \x3d [];\n"+"var x \x3d numeric.rep([m],0),y \x3d numeric.rep([m],0);\n"+"var xk,yk,zk;\n"+"var i,j,j0,j1,k,p\x3d0;\n"+setup+"for(i\x3d0;i\x3cn;++i) {\n"+"  j0 \x3d Xi[i]; j1 \x3d Xi[i+1];\n"+
"  for(j\x3dj0;j!\x3d\x3dj1;++j) {\n"+"    k \x3d Xj[j];\n"+"    x[k] \x3d 1;\n"+"    Zj[p] \x3d k;\n"+"    ++p;\n"+"  }\n"+"  j0 \x3d Yi[i]; j1 \x3d Yi[i+1];\n"+"  for(j\x3dj0;j!\x3d\x3dj1;++j) {\n"+"    k \x3d Yj[j];\n"+"    y[k] \x3d Yv[j];\n"+"    if(x[k] \x3d\x3d\x3d 0) {\n"+"      Zj[p] \x3d k;\n"+"      ++p;\n"+"    }\n"+"  }\n"+"  Zi[i+1] \x3d p;\n"+"  j0 \x3d Xi[i]; j1 \x3d Xi[i+1];\n"+"  for(j\x3dj0;j!\x3d\x3dj1;++j) x[Xj[j]] \x3d Xv[j];\n"+"  j0 \x3d Zi[i]; j1 \x3d Zi[i+1];\n"+"  for(j\x3dj0;j!\x3d\x3dj1;++j) {\n"+
"    k \x3d Zj[j];\n"+"    xk \x3d x[k];\n"+"    yk \x3d y[k];\n"+body+"\n"+"    Zv[j] \x3d zk;\n"+"  }\n"+"  j0 \x3d Xi[i]; j1 \x3d Xi[i+1];\n"+"  for(j\x3dj0;j!\x3d\x3dj1;++j) x[Xj[j]] \x3d 0;\n"+"  j0 \x3d Yi[i]; j1 \x3d Yi[i+1];\n"+"  for(j\x3dj0;j!\x3d\x3dj1;++j) y[Yj[j]] \x3d 0;\n"+"}\n"+"return [Zi,Zj,Zv];")};
(function(){var k,A,B,C;for(k in numeric.ops2){if(isFinite(eval("1"+numeric.ops2[k]+"0")))A="[Y[0],Y[1],numeric."+k+"(X,Y[2])]";else A="NaN";if(isFinite(eval("0"+numeric.ops2[k]+"1")))B="[X[0],X[1],numeric."+k+"(X[2],Y)]";else B="NaN";if(isFinite(eval("1"+numeric.ops2[k]+"0"))&&isFinite(eval("0"+numeric.ops2[k]+"1")))C="numeric.ccs"+k+"MM(X,Y)";else C="NaN";numeric["ccs"+k+"MM"]=numeric.ccsbinop("zk \x3d xk "+numeric.ops2[k]+"yk;");numeric["ccs"+k]=Function("X","Y",'if(typeof X \x3d\x3d\x3d "number") return '+
A+";\n"+'if(typeof Y \x3d\x3d\x3d "number") return '+B+";\n"+"return "+C+";\n")}})();numeric.ccsScatter=function ccsScatter(A){var Ai=A[0],Aj=A[1],Av=A[2];var n=numeric.sup(Aj)+1,m=Ai.length;var Ri=numeric.rep([n],0),Rj=Array(m),Rv=Array(m);var counts=numeric.rep([n],0),i;for(i=0;i<m;++i)counts[Aj[i]]++;for(i=0;i<n;++i)Ri[i+1]=Ri[i]+counts[i];var ptr=Ri.slice(0),k,Aii;for(i=0;i<m;++i){Aii=Aj[i];k=ptr[Aii];Rj[k]=Ai[i];Rv[k]=Av[i];ptr[Aii]=ptr[Aii]+1}return[Ri,Rj,Rv]};
numeric.ccsGather=function ccsGather(A){var Ai=A[0],Aj=A[1],Av=A[2];var n=Ai.length-1,m=Aj.length;var Ri=Array(m),Rj=Array(m),Rv=Array(m);var i,j,j0,j1,p;p=0;for(i=0;i<n;++i){j0=Ai[i];j1=Ai[i+1];for(j=j0;j!==j1;++j){Rj[p]=i;Ri[p]=Aj[j];Rv[p]=Av[j];++p}}return[Ri,Rj,Rv]};
numeric.sdim=function dim(A,ret,k){if(typeof ret==="undefined")ret=[];if(typeof A!=="object")return ret;if(typeof k==="undefined")k=0;if(!(k in ret))ret[k]=0;if(A.length>ret[k])ret[k]=A.length;var i;for(i in A)if(A.hasOwnProperty(i))dim(A[i],ret,k+1);return ret};
numeric.sclone=function clone(A,k,n){if(typeof k==="undefined")k=0;if(typeof n==="undefined")n=numeric.sdim(A).length;var i,ret=Array(A.length);if(k===n-1){for(i in A)if(A.hasOwnProperty(i))ret[i]=A[i];return ret}for(i in A)if(A.hasOwnProperty(i))ret[i]=clone(A[i],k+1,n);return ret};numeric.sdiag=function diag(d){var n=d.length,i,ret=Array(n),i1,i2,i3;for(i=n-1;i>=1;i-=2){i1=i-1;ret[i]=[];ret[i][i]=d[i];ret[i1]=[];ret[i1][i1]=d[i1]}if(i===0){ret[0]=[];ret[0][0]=d[i]}return ret};
numeric.sidentity=function identity(n){return numeric.sdiag(numeric.rep([n],1))};numeric.stranspose=function transpose(A){var ret=[],n=A.length,i,j,Ai;for(i in A){if(!A.hasOwnProperty(i))continue;Ai=A[i];for(j in Ai){if(!Ai.hasOwnProperty(j))continue;if(typeof ret[j]!=="object")ret[j]=[];ret[j][i]=Ai[j]}}return ret};numeric.sLUP=function LUP(A,tol){throw new Error("The function numeric.sLUP had a bug in it and has been removed. Please use the new numeric.ccsLUP function instead.");};
numeric.sdotMM=function dotMM(A,B){var p=A.length,q=B.length,BT=numeric.stranspose(B),r=BT.length,Ai,BTk;var i,j,k,accum;var ret=Array(p),reti;for(i=p-1;i>=0;i--){reti=[];Ai=A[i];for(k=r-1;k>=0;k--){accum=0;BTk=BT[k];for(j in Ai){if(!Ai.hasOwnProperty(j))continue;if(j in BTk)accum+=Ai[j]*BTk[j]}if(accum)reti[k]=accum}ret[i]=reti}return ret};
numeric.sdotMV=function dotMV(A,x){var p=A.length,Ai,i,j;var ret=Array(p),accum;for(i=p-1;i>=0;i--){Ai=A[i];accum=0;for(j in Ai){if(!Ai.hasOwnProperty(j))continue;if(x[j])accum+=Ai[j]*x[j]}if(accum)ret[i]=accum}return ret};numeric.sdotVM=function dotMV(x,A){var i,j,Ai,alpha;var ret=[],accum;for(i in x){if(!x.hasOwnProperty(i))continue;Ai=A[i];alpha=x[i];for(j in Ai){if(!Ai.hasOwnProperty(j))continue;if(!ret[j])ret[j]=0;ret[j]+=alpha*Ai[j]}}return ret};
numeric.sdotVV=function dotVV(x,y){var i,ret=0;for(i in x)if(x[i]&&y[i])ret+=x[i]*y[i];return ret};numeric.sdot=function dot(A,B){var m=numeric.sdim(A).length,n=numeric.sdim(B).length;var k=m*1E3+n;switch(k){case 0:return A*B;case 1001:return numeric.sdotVV(A,B);case 2001:return numeric.sdotMV(A,B);case 1002:return numeric.sdotVM(A,B);case 2002:return numeric.sdotMM(A,B);default:throw new Error("numeric.sdot not implemented for tensors of order "+m+" and "+n);}};
numeric.sscatter=function scatter(V){var n=V[0].length,Vij,i,j,m=V.length,A=[],Aj;for(i=n-1;i>=0;--i){if(!V[m-1][i])continue;Aj=A;for(j=0;j<m-2;j++){Vij=V[j][i];if(!Aj[Vij])Aj[Vij]=[];Aj=Aj[Vij]}Aj[V[j][i]]=V[j+1][i]}return A};
numeric.sgather=function gather(A,ret,k){if(typeof ret==="undefined")ret=[];if(typeof k==="undefined")k=[];var n,i,Ai;n=k.length;for(i in A)if(A.hasOwnProperty(i)){k[n]=parseInt(i);Ai=A[i];if(typeof Ai==="number"){if(Ai){if(ret.length===0)for(i=n+1;i>=0;--i)ret[i]=[];for(i=n;i>=0;--i)ret[i].push(k[i]);ret[n+1].push(Ai)}}else gather(Ai,ret,k)}if(k.length>n)k.pop();return ret};
numeric.cLU=function LU(A){var I=A[0],J=A[1],V=A[2];var p=I.length,m=0,i,j,k,a,b,c;for(i=0;i<p;i++)if(I[i]>m)m=I[i];m++;var L=Array(m),U=Array(m),left=numeric.rep([m],Infinity),right=numeric.rep([m],-Infinity);var Ui,Uj,alpha;for(k=0;k<p;k++){i=I[k];j=J[k];if(j<left[i])left[i]=j;if(j>right[i])right[i]=j}for(i=0;i<m-1;i++)if(right[i]>right[i+1])right[i+1]=right[i];for(i=m-1;i>=1;i--)if(left[i]<left[i-1])left[i-1]=left[i];var countL=0,countU=0;for(i=0;i<m;i++){U[i]=numeric.rep([right[i]-left[i]+1],
0);L[i]=numeric.rep([i-left[i]],0);countL+=i-left[i]+1;countU+=right[i]-i+1}for(k=0;k<p;k++){i=I[k];U[i][J[k]-left[i]]=V[k]}for(i=0;i<m-1;i++){a=i-left[i];Ui=U[i];for(j=i+1;left[j]<=i&&j<m;j++){b=i-left[j];c=right[i]-i;Uj=U[j];alpha=Uj[b]/Ui[a];if(alpha){for(k=1;k<=c;k++)Uj[k+b]-=alpha*Ui[k+a];L[j][i-left[j]]=alpha}}}var Ui=[],Uj=[],Uv=[],Li=[],Lj=[],Lv=[];var p,q,foo;p=0;q=0;for(i=0;i<m;i++){a=left[i];b=right[i];foo=U[i];for(j=i;j<=b;j++)if(foo[j-a]){Ui[p]=i;Uj[p]=j;Uv[p]=foo[j-a];p++}foo=L[i];for(j=
a;j<i;j++)if(foo[j-a]){Li[q]=i;Lj[q]=j;Lv[q]=foo[j-a];q++}Li[q]=i;Lj[q]=i;Lv[q]=1;q++}return{U:[Ui,Uj,Uv],L:[Li,Lj,Lv]}};numeric.cLUsolve=function LUsolve(lu,b){var L=lu.L,U=lu.U,ret=numeric.clone(b);var Li=L[0],Lj=L[1],Lv=L[2];var Ui=U[0],Uj=U[1],Uv=U[2];var p=Ui.length,q=Li.length;var m=ret.length,i,j,k;k=0;for(i=0;i<m;i++){while(Lj[k]<i){ret[i]-=Lv[k]*ret[Lj[k]];k++}k++}k=p-1;for(i=m-1;i>=0;i--){while(Uj[k]>i){ret[i]-=Uv[k]*ret[Uj[k]];k--}ret[i]/=Uv[k];k--}return ret};
numeric.cgrid=function grid(n,shape){if(typeof n==="number")n=[n,n];var ret=numeric.rep(n,-1);var i,j,count;if(typeof shape!=="function")switch(shape){case "L":shape=function(i,j){return i>=n[0]/2||j<n[1]/2};break;default:shape=function(i,j){return true};break}count=0;for(i=1;i<n[0]-1;i++)for(j=1;j<n[1]-1;j++)if(shape(i,j)){ret[i][j]=count;count++}return ret};
numeric.cdelsq=function delsq(g){var dir=[[-1,0],[0,-1],[0,1],[1,0]];var s=numeric.dim(g),m=s[0],n=s[1],i,j,k,p,q;var Li=[],Lj=[],Lv=[];for(i=1;i<m-1;i++)for(j=1;j<n-1;j++){if(g[i][j]<0)continue;for(k=0;k<4;k++){p=i+dir[k][0];q=j+dir[k][1];if(g[p][q]<0)continue;Li.push(g[i][j]);Lj.push(g[p][q]);Lv.push(-1)}Li.push(g[i][j]);Lj.push(g[i][j]);Lv.push(4)}return[Li,Lj,Lv]};
numeric.cdotMV=function dotMV(A,x){var ret,Ai=A[0],Aj=A[1],Av=A[2],k,p=Ai.length,N;N=0;for(k=0;k<p;k++)if(Ai[k]>N)N=Ai[k];N++;ret=numeric.rep([N],0);for(k=0;k<p;k++)ret[Ai[k]]+=Av[k]*x[Aj[k]];return ret};numeric.Spline=function Spline(x,yl,yr,kl,kr){this.x=x;this.yl=yl;this.yr=yr;this.kl=kl;this.kr=kr};
numeric.Spline.prototype._at=function _at(x1,p){var x=this.x;var yl=this.yl;var yr=this.yr;var kl=this.kl;var kr=this.kr;var x1,a,b,t;var add=numeric.add,sub=numeric.sub,mul=numeric.mul;a=sub(mul(kl[p],x[p+1]-x[p]),sub(yr[p+1],yl[p]));b=add(mul(kr[p+1],x[p]-x[p+1]),sub(yr[p+1],yl[p]));t=(x1-x[p])/(x[p+1]-x[p]);var s=t*(1-t);return add(add(add(mul(1-t,yl[p]),mul(t,yr[p+1])),mul(a,s*(1-t))),mul(b,s*t))};
numeric.Spline.prototype.at=function at(x0){if(typeof x0==="number"){var x=this.x;var n=x.length;var p,q,mid,floor=Math.floor,a,b,t;p=0;q=n-1;while(q-p>1){mid=floor((p+q)/2);if(x[mid]<=x0)p=mid;else q=mid}return this._at(x0,p)}var n=x0.length,i,ret=Array(n);for(i=n-1;i!==-1;--i)ret[i]=this.at(x0[i]);return ret};
numeric.Spline.prototype.diff=function diff(){var x=this.x;var yl=this.yl;var yr=this.yr;var kl=this.kl;var kr=this.kr;var n=yl.length;var i,dx,dy;var zl=kl,zr=kr,pl=Array(n),pr=Array(n);var add=numeric.add,mul=numeric.mul,div=numeric.div,sub=numeric.sub;for(i=n-1;i!==-1;--i){dx=x[i+1]-x[i];dy=sub(yr[i+1],yl[i]);pl[i]=div(add(mul(dy,6),mul(kl[i],-4*dx),mul(kr[i+1],-2*dx)),dx*dx);pr[i+1]=div(add(mul(dy,-6),mul(kl[i],2*dx),mul(kr[i+1],4*dx)),dx*dx)}return new numeric.Spline(x,zl,zr,pl,pr)};
numeric.Spline.prototype.roots=function roots(){function sqr(x){return x*x}function heval(y0,y1,k0,k1,x){var A=k0*2-(y1-y0);var B=-k1*2+(y1-y0);var t=(x+1)*.5;var s=t*(1-t);return(1-t)*y0+t*y1+A*s*(1-t)+B*s*t}var ret=[];var x=this.x,yl=this.yl,yr=this.yr,kl=this.kl,kr=this.kr;if(typeof yl[0]==="number"){yl=[yl];yr=[yr];kl=[kl];kr=[kr]}var m=yl.length,n=x.length-1,i,j,k,y,s,t;var ai,bi,ci,di,ret=Array(m),ri,k0,k1,y0,y1,A,B,D,dx,cx,stops,z0,z1,zm,t0,t1,tm;var sqrt=Math.sqrt;for(i=0;i!==m;++i){ai=yl[i];
bi=yr[i];ci=kl[i];di=kr[i];ri=[];for(j=0;j!==n;j++){if(j>0&&bi[j]*ai[j]<0)ri.push(x[j]);dx=x[j+1]-x[j];cx=x[j];y0=ai[j];y1=bi[j+1];k0=ci[j]/dx;k1=di[j+1]/dx;D=sqr(k0-k1+3*(y0-y1))+12*k1*y0;A=k1+3*y0+2*k0-3*y1;B=3*(k1+k0+2*(y0-y1));if(D<=0){z0=A/B;if(z0>x[j]&&z0<x[j+1])stops=[x[j],z0,x[j+1]];else stops=[x[j],x[j+1]]}else{z0=(A-sqrt(D))/B;z1=(A+sqrt(D))/B;stops=[x[j]];if(z0>x[j]&&z0<x[j+1])stops.push(z0);if(z1>x[j]&&z1<x[j+1])stops.push(z1);stops.push(x[j+1])}t0=stops[0];z0=this._at(t0,j);for(k=0;k<
stops.length-1;k++){t1=stops[k+1];z1=this._at(t1,j);if(z0===0){ri.push(t0);t0=t1;z0=z1;continue}if(z1===0||z0*z1>0){t0=t1;z0=z1;continue}var side=0;while(1){tm=(z0*t1-z1*t0)/(z0-z1);if(tm<=t0||tm>=t1)break;zm=this._at(tm,j);if(zm*z1>0){t1=tm;z1=zm;if(side===-1)z0*=.5;side=-1}else if(zm*z0>0){t0=tm;z0=zm;if(side===1)z1*=.5;side=1}else break}ri.push(tm);t0=stops[k+1];z0=this._at(t0,j)}if(z1===0)ri.push(t1)}ret[i]=ri}if(typeof this.yl[0]==="number")return ret[0];return ret};
numeric.spline=function spline(x,y,k1,kn){var n=x.length,b=[],dx=[],dy=[];var i;var sub=numeric.sub,mul=numeric.mul,add=numeric.add;for(i=n-2;i>=0;i--){dx[i]=x[i+1]-x[i];dy[i]=sub(y[i+1],y[i])}if(typeof k1==="string"||typeof kn==="string")k1=kn="periodic";var T=[[],[],[]];switch(typeof k1){case "undefined":b[0]=mul(3/(dx[0]*dx[0]),dy[0]);T[0].push(0,0);T[1].push(0,1);T[2].push(2/dx[0],1/dx[0]);break;case "string":b[0]=add(mul(3/(dx[n-2]*dx[n-2]),dy[n-2]),mul(3/(dx[0]*dx[0]),dy[0]));T[0].push(0,0,
0);T[1].push(n-2,0,1);T[2].push(1/dx[n-2],2/dx[n-2]+2/dx[0],1/dx[0]);break;default:b[0]=k1;T[0].push(0);T[1].push(0);T[2].push(1);break}for(i=1;i<n-1;i++){b[i]=add(mul(3/(dx[i-1]*dx[i-1]),dy[i-1]),mul(3/(dx[i]*dx[i]),dy[i]));T[0].push(i,i,i);T[1].push(i-1,i,i+1);T[2].push(1/dx[i-1],2/dx[i-1]+2/dx[i],1/dx[i])}switch(typeof kn){case "undefined":b[n-1]=mul(3/(dx[n-2]*dx[n-2]),dy[n-2]);T[0].push(n-1,n-1);T[1].push(n-2,n-1);T[2].push(1/dx[n-2],2/dx[n-2]);break;case "string":T[1][T[1].length-1]=0;break;
default:b[n-1]=kn;T[0].push(n-1);T[1].push(n-1);T[2].push(1);break}if(typeof b[0]!=="number")b=numeric.transpose(b);else b=[b];var k=Array(b.length);if(typeof k1==="string")for(i=k.length-1;i!==-1;--i){k[i]=numeric.ccsLUPSolve(numeric.ccsLUP(numeric.ccsScatter(T)),b[i]);k[i][n-1]=k[i][0]}else for(i=k.length-1;i!==-1;--i)k[i]=numeric.cLUsolve(numeric.cLU(T),b[i]);if(typeof y[0]==="number")k=k[0];else k=numeric.transpose(k);return new numeric.Spline(x,y,y,k,k)};
numeric.fftpow2=function fftpow2(x,y){var n=x.length;if(n===1)return;var cos=Math.cos,sin=Math.sin,i,j;var xe=Array(n/2),ye=Array(n/2),xo=Array(n/2),yo=Array(n/2);j=n/2;for(i=n-1;i!==-1;--i){--j;xo[j]=x[i];yo[j]=y[i];--i;xe[j]=x[i];ye[j]=y[i]}fftpow2(xe,ye);fftpow2(xo,yo);j=n/2;var t,k=-6.283185307179586/n,ci,si;for(i=n-1;i!==-1;--i){--j;if(j===-1)j=n/2-1;t=k*i;ci=cos(t);si=sin(t);x[i]=xe[j]+ci*xo[j]-si*yo[j];y[i]=ye[j]+ci*yo[j]+si*xo[j]}};
numeric._ifftpow2=function _ifftpow2(x,y){var n=x.length;if(n===1)return;var cos=Math.cos,sin=Math.sin,i,j;var xe=Array(n/2),ye=Array(n/2),xo=Array(n/2),yo=Array(n/2);j=n/2;for(i=n-1;i!==-1;--i){--j;xo[j]=x[i];yo[j]=y[i];--i;xe[j]=x[i];ye[j]=y[i]}_ifftpow2(xe,ye);_ifftpow2(xo,yo);j=n/2;var t,k=6.283185307179586/n,ci,si;for(i=n-1;i!==-1;--i){--j;if(j===-1)j=n/2-1;t=k*i;ci=cos(t);si=sin(t);x[i]=xe[j]+ci*xo[j]-si*yo[j];y[i]=ye[j]+ci*yo[j]+si*xo[j]}};
numeric.ifftpow2=function ifftpow2(x,y){numeric._ifftpow2(x,y);numeric.diveq(x,x.length);numeric.diveq(y,y.length)};numeric.convpow2=function convpow2(ax,ay,bx,by){numeric.fftpow2(ax,ay);numeric.fftpow2(bx,by);var i,n=ax.length,axi,bxi,ayi,byi;for(i=n-1;i!==-1;--i){axi=ax[i];ayi=ay[i];bxi=bx[i];byi=by[i];ax[i]=axi*bxi-ayi*byi;ay[i]=axi*byi+ayi*bxi}numeric.ifftpow2(ax,ay)};
numeric.T.prototype.fft=function fft(){var x=this.x,y=this.y;var n=x.length,log=Math.log,log2=log(2),p=Math.ceil(log(2*n-1)/log2),m=Math.pow(2,p);var cx=numeric.rep([m],0),cy=numeric.rep([m],0),cos=Math.cos,sin=Math.sin;var k,c=-3.141592653589793/n,t;var a=numeric.rep([m],0),b=numeric.rep([m],0),nhalf=Math.floor(n/2);for(k=0;k<n;k++)a[k]=x[k];if(typeof y!=="undefined")for(k=0;k<n;k++)b[k]=y[k];cx[0]=1;for(k=1;k<=m/2;k++){t=c*k*k;cx[k]=cos(t);cy[k]=sin(t);cx[m-k]=cos(t);cy[m-k]=sin(t)}var X=new numeric.T(a,
b),Y=new numeric.T(cx,cy);X=X.mul(Y);numeric.convpow2(X.x,X.y,numeric.clone(Y.x),numeric.neg(Y.y));X=X.mul(Y);X.x.length=n;X.y.length=n;return X};
numeric.T.prototype.ifft=function ifft(){var x=this.x,y=this.y;var n=x.length,log=Math.log,log2=log(2),p=Math.ceil(log(2*n-1)/log2),m=Math.pow(2,p);var cx=numeric.rep([m],0),cy=numeric.rep([m],0),cos=Math.cos,sin=Math.sin;var k,c=3.141592653589793/n,t;var a=numeric.rep([m],0),b=numeric.rep([m],0),nhalf=Math.floor(n/2);for(k=0;k<n;k++)a[k]=x[k];if(typeof y!=="undefined")for(k=0;k<n;k++)b[k]=y[k];cx[0]=1;for(k=1;k<=m/2;k++){t=c*k*k;cx[k]=cos(t);cy[k]=sin(t);cx[m-k]=cos(t);cy[m-k]=sin(t)}var X=new numeric.T(a,
b),Y=new numeric.T(cx,cy);X=X.mul(Y);numeric.convpow2(X.x,X.y,numeric.clone(Y.x),numeric.neg(Y.y));X=X.mul(Y);X.x.length=n;X.y.length=n;return X.div(n)};
numeric.gradient=function gradient(f,x){var n=x.length;var f0=f(x);if(isNaN(f0))throw new Error("gradient: f(x) is a NaN!");var max=Math.max;var i,x0=numeric.clone(x),f1,f2,J=Array(n);var div=numeric.div,sub=numeric.sub,errest,roundoff,max=Math.max,eps=.001,abs=Math.abs,min=Math.min;var t0,t1,t2,it=0,d1,d2,N;for(i=0;i<n;i++){var h=max(1E-6*f0,1E-8);while(1){++it;if(it>20)throw new Error("Numerical gradient fails");x0[i]=x[i]+h;f1=f(x0);x0[i]=x[i]-h;f2=f(x0);x0[i]=x[i];if(isNaN(f1)||isNaN(f2)){h/=
16;continue}J[i]=(f1-f2)/(2*h);t0=x[i]-h;t1=x[i];t2=x[i]+h;d1=(f1-f0)/h;d2=(f0-f2)/h;N=max(abs(J[i]),abs(f0),abs(f1),abs(f2),abs(t0),abs(t1),abs(t2),1E-8);errest=min(max(abs(d1-J[i]),abs(d2-J[i]),abs(d1-d2))/N,h/N);if(errest>eps)h/=16;else break}}return J};
numeric.uncmin=function uncmin(f,x0,tol,gradient,maxit,callback,options){var grad=numeric.gradient;if(typeof options==="undefined")options={};if(typeof tol==="undefined")tol=1E-8;if(typeof gradient==="undefined")gradient=function(x){return grad(f,x)};if(typeof maxit==="undefined")maxit=1E3;x0=numeric.clone(x0);var n=x0.length;var f0=f(x0),f1,df0;if(isNaN(f0))throw new Error("uncmin: f(x0) is a NaN!");var max=Math.max,norm2=numeric.norm2;tol=max(tol,numeric.epsilon);var step,g0,g1,H1=options.Hinv||
numeric.identity(n);var dot=numeric.dot,inv=numeric.inv,sub=numeric.sub,add=numeric.add,ten=numeric.tensor,div=numeric.div,mul=numeric.mul;var all=numeric.all,isfinite=numeric.isFinite,neg=numeric.neg;var it=0,i,s,x1,y,Hy,Hs,ys,i0,t,nstep,t1,t2;var msg="";g0=gradient(x0);while(it<maxit){if(typeof callback==="function")if(callback(it,x0,f0,g0,H1)){msg="Callback returned true";break}if(!all(isfinite(g0))){msg="Gradient has Infinity or NaN";break}step=neg(dot(H1,g0));if(!all(isfinite(step))){msg="Search direction has Infinity or NaN";
break}nstep=norm2(step);if(nstep<tol){msg="Newton step smaller than tol";break}t=1;df0=dot(g0,step);x1=x0;while(it<maxit){if(t*nstep<tol)break;s=mul(step,t);x1=add(x0,s);f1=f(x1);if(f1-f0>=.1*t*df0||isNaN(f1)){t*=.5;++it;continue}break}if(t*nstep<tol){msg="Line search step size smaller than tol";break}if(it===maxit){msg="maxit reached during line search";break}g1=gradient(x1);y=sub(g1,g0);ys=dot(y,s);Hy=dot(H1,y);H1=sub(add(H1,mul((ys+dot(y,Hy))/(ys*ys),ten(s,s))),div(add(ten(Hy,s),ten(s,Hy)),ys));
x0=x1;f0=f1;g0=g1;++it}return{solution:x0,f:f0,gradient:g0,invHessian:H1,iterations:it,message:msg}};numeric.Dopri=function Dopri(x,y,f,ymid,iterations,msg,events){this.x=x;this.y=y;this.f=f;this.ymid=ymid;this.iterations=iterations;this.events=events;this.message=msg};
numeric.Dopri.prototype._at=function _at(xi,j){function sqr(x){return x*x}var sol=this;var xs=sol.x;var ys=sol.y;var k1=sol.f;var ymid=sol.ymid;var n=xs.length;var x0,x1,xh,y0,y1,yh,xi;var floor=Math.floor,h;var c=.5;var add=numeric.add,mul=numeric.mul,sub=numeric.sub,p,q,w;x0=xs[j];x1=xs[j+1];y0=ys[j];y1=ys[j+1];h=x1-x0;xh=x0+c*h;yh=ymid[j];p=sub(k1[j],mul(y0,1/(x0-xh)+2/(x0-x1)));q=sub(k1[j+1],mul(y1,1/(x1-xh)+2/(x1-x0)));w=[sqr(xi-x1)*(xi-xh)/sqr(x0-x1)/(x0-xh),sqr(xi-x0)*sqr(xi-x1)/sqr(x0-xh)/
sqr(x1-xh),sqr(xi-x0)*(xi-xh)/sqr(x1-x0)/(x1-xh),(xi-x0)*sqr(xi-x1)*(xi-xh)/sqr(x0-x1)/(x0-xh),(xi-x1)*sqr(xi-x0)*(xi-xh)/sqr(x0-x1)/(x1-xh)];return add(add(add(add(mul(y0,w[0]),mul(yh,w[1])),mul(y1,w[2])),mul(p,w[3])),mul(q,w[4]))};
numeric.Dopri.prototype.at=function at(x){var i,j,k,floor=Math.floor;if(typeof x!=="number"){var n=x.length,ret=Array(n);for(i=n-1;i!==-1;--i)ret[i]=this.at(x[i]);return ret}var x0=this.x;i=0;j=x0.length-1;while(j-i>1){k=floor(.5*(i+j));if(x0[k]<=x)i=k;else j=k}return this._at(x,i)};
numeric.dopri=function dopri(x0,x1,y0,f,tol,maxit,event){if(typeof tol==="undefined")tol=1E-6;if(typeof maxit==="undefined")maxit=1E3;var xs=[x0],ys=[y0],k1=[f(x0,y0)],k2,k3,k4,k5,k6,k7,ymid=[];var A2=1/5;var A3=[3/40,9/40];var A4=[44/45,-56/15,32/9];var A5=[19372/6561,-25360/2187,64448/6561,-212/729];var A6=[9017/3168,-355/33,46732/5247,49/176,-5103/18656];var b=[35/384,0,500/1113,125/192,-2187/6784,11/84];var bm=[.5*6025192743/30085553152,0,.5*51252292925/65400821598,.5*-2691868925/45128329728,
.5*187940372067/1594534317056,.5*-1776094331/19743644256,.5*11237099/235043384];var c=[1/5,3/10,4/5,8/9,1,1];var e=[-71/57600,0,71/16695,-71/1920,17253/339200,-22/525,1/40];var i=0,er,j;var h=(x1-x0)/10;var it=0;var add=numeric.add,mul=numeric.mul,y1,erinf;var max=Math.max,min=Math.min,abs=Math.abs,norminf=numeric.norminf,pow=Math.pow;var any=numeric.any,lt=numeric.lt,and=numeric.and,sub=numeric.sub;var e0,e1,ev;var ret=new numeric.Dopri(xs,ys,k1,ymid,-1,"");if(typeof event==="function")e0=event(x0,
y0);while(x0<x1&&it<maxit){++it;if(x0+h>x1)h=x1-x0;k2=f(x0+c[0]*h,add(y0,mul(A2*h,k1[i])));k3=f(x0+c[1]*h,add(add(y0,mul(A3[0]*h,k1[i])),mul(A3[1]*h,k2)));k4=f(x0+c[2]*h,add(add(add(y0,mul(A4[0]*h,k1[i])),mul(A4[1]*h,k2)),mul(A4[2]*h,k3)));k5=f(x0+c[3]*h,add(add(add(add(y0,mul(A5[0]*h,k1[i])),mul(A5[1]*h,k2)),mul(A5[2]*h,k3)),mul(A5[3]*h,k4)));k6=f(x0+c[4]*h,add(add(add(add(add(y0,mul(A6[0]*h,k1[i])),mul(A6[1]*h,k2)),mul(A6[2]*h,k3)),mul(A6[3]*h,k4)),mul(A6[4]*h,k5)));y1=add(add(add(add(add(y0,mul(k1[i],
h*b[0])),mul(k3,h*b[2])),mul(k4,h*b[3])),mul(k5,h*b[4])),mul(k6,h*b[5]));k7=f(x0+h,y1);er=add(add(add(add(add(mul(k1[i],h*e[0]),mul(k3,h*e[2])),mul(k4,h*e[3])),mul(k5,h*e[4])),mul(k6,h*e[5])),mul(k7,h*e[6]));if(typeof er==="number")erinf=abs(er);else erinf=norminf(er);if(erinf>tol){h=.2*h*pow(tol/erinf,.25);if(x0+h===x0){ret.msg="Step size became too small";break}continue}ymid[i]=add(add(add(add(add(add(y0,mul(k1[i],h*bm[0])),mul(k3,h*bm[2])),mul(k4,h*bm[3])),mul(k5,h*bm[4])),mul(k6,h*bm[5])),mul(k7,
h*bm[6]));++i;xs[i]=x0+h;ys[i]=y1;k1[i]=k7;if(typeof event==="function"){var yi,xl=x0,xr=x0+.5*h,xi;e1=event(xr,ymid[i-1]);ev=and(lt(e0,0),lt(0,e1));if(!any(ev)){xl=xr;xr=x0+h;e0=e1;e1=event(xr,y1);ev=and(lt(e0,0),lt(0,e1))}if(any(ev)){var xc,yc,en,ei;var side=0,sl=1,sr=1;while(1){if(typeof e0==="number")xi=(sr*e1*xl-sl*e0*xr)/(sr*e1-sl*e0);else{xi=xr;for(j=e0.length-1;j!==-1;--j)if(e0[j]<0&&e1[j]>0)xi=min(xi,(sr*e1[j]*xl-sl*e0[j]*xr)/(sr*e1[j]-sl*e0[j]))}if(xi<=xl||xi>=xr)break;yi=ret._at(xi,i-1);
ei=event(xi,yi);en=and(lt(e0,0),lt(0,ei));if(any(en)){xr=xi;e1=ei;ev=en;sr=1;if(side===-1)sl*=.5;else sl=1;side=-1}else{xl=xi;e0=ei;sl=1;if(side===1)sr*=.5;else sr=1;side=1}}y1=ret._at(.5*(x0+xi),i-1);ret.f[i]=f(xi,yi);ret.x[i]=xi;ret.y[i]=yi;ret.ymid[i-1]=y1;ret.events=ev;ret.iterations=it;return ret}}x0+=h;y0=y1;e0=e1;h=min(.8*h*pow(tol/erinf,.25),4*h)}ret.iterations=it;return ret};
numeric.LU=function(A,fast){fast=fast||false;var abs=Math.abs;var i,j,k,absAjk,Akk,Ak,Pk,Ai;var max;var n=A.length,n1=n-1;var P=new Array(n);if(!fast)A=numeric.clone(A);for(k=0;k<n;++k){Pk=k;Ak=A[k];max=abs(Ak[k]);for(j=k+1;j<n;++j){absAjk=abs(A[j][k]);if(max<absAjk){max=absAjk;Pk=j}}P[k]=Pk;if(Pk!=k){A[k]=A[Pk];A[Pk]=Ak;Ak=A[k]}Akk=Ak[k];for(i=k+1;i<n;++i)A[i][k]/=Akk;for(i=k+1;i<n;++i){Ai=A[i];for(j=k+1;j<n1;++j){Ai[j]-=Ai[k]*Ak[j];++j;Ai[j]-=Ai[k]*Ak[j]}if(j===n1)Ai[j]-=Ai[k]*Ak[j]}}return{LU:A,
P:P}};numeric.LUsolve=function LUsolve(LUP,b){var i,j;var LU=LUP.LU;var n=LU.length;var x=numeric.clone(b);var P=LUP.P;var Pi,LUi,LUii,tmp;for(i=n-1;i!==-1;--i)x[i]=b[i];for(i=0;i<n;++i){Pi=P[i];if(P[i]!==i){tmp=x[i];x[i]=x[Pi];x[Pi]=tmp}LUi=LU[i];for(j=0;j<i;++j)x[i]-=x[j]*LUi[j]}for(i=n-1;i>=0;--i){LUi=LU[i];for(j=i+1;j<n;++j)x[i]-=x[j]*LUi[j];x[i]/=LUi[i]}return x};numeric.solve=function solve(A,b,fast){return numeric.LUsolve(numeric.LU(A,fast),b)};
numeric.echelonize=function echelonize(A){var s=numeric.dim(A),m=s[0],n=s[1];var I=numeric.identity(m);var P=Array(m);var i,j,k,l,Ai,Ii,Z,a;var abs=Math.abs;var diveq=numeric.diveq;A=numeric.clone(A);for(i=0;i<m;++i){k=0;Ai=A[i];Ii=I[i];for(j=1;j<n;++j)if(abs(Ai[k])<abs(Ai[j]))k=j;P[i]=k;diveq(Ii,Ai[k]);diveq(Ai,Ai[k]);for(j=0;j<m;++j)if(j!==i){Z=A[j];a=Z[k];for(l=n-1;l!==-1;--l)Z[l]-=Ai[l]*a;Z=I[j];for(l=m-1;l!==-1;--l)Z[l]-=Ii[l]*a}}return{I:I,A:A,P:P}};
numeric.__solveLP=function __solveLP(c,A,b,tol,maxit,x,flag){var sum=numeric.sum,log=numeric.log,mul=numeric.mul,sub=numeric.sub,dot=numeric.dot,div=numeric.div,add=numeric.add;var m=c.length,n=b.length,y;var unbounded=false,cb,i0=0;var alpha=1;var f0,df0,AT=numeric.transpose(A),svd=numeric.svd,transpose=numeric.transpose,leq=numeric.leq,sqrt=Math.sqrt,abs=Math.abs;var muleq=numeric.muleq;var norm=numeric.norminf,any=numeric.any,min=Math.min;var all=numeric.all,gt=numeric.gt;var p=Array(m),A0=Array(n),
e=numeric.rep([n],1),H;var solve=numeric.solve,z=sub(b,dot(A,x)),count;var dotcc=dot(c,c);var g;for(count=i0;count<maxit;++count){var i,j,d;for(i=n-1;i!==-1;--i)A0[i]=div(A[i],z[i]);var A1=transpose(A0);for(i=m-1;i!==-1;--i)p[i]=sum(A1[i]);alpha=.25*abs(dotcc/dot(c,p));var a1=100*sqrt(dotcc/dot(p,p));if(!isFinite(alpha)||alpha>a1)alpha=a1;g=add(c,mul(alpha,p));H=dot(A1,A0);for(i=m-1;i!==-1;--i)H[i][i]+=1;d=solve(H,div(g,alpha),true);var t0=div(z,dot(A,d));var t=1;for(i=n-1;i!==-1;--i)if(t0[i]<0)t=
min(t,-.999*t0[i]);y=sub(x,mul(d,t));z=sub(b,dot(A,y));if(!all(gt(z,0)))return{solution:x,message:"",iterations:count};x=y;if(alpha<tol)return{solution:y,message:"",iterations:count};if(flag){var s=dot(c,g),Ag=dot(A,g);unbounded=true;for(i=n-1;i!==-1;--i)if(s*Ag[i]<0){unbounded=false;break}}else if(x[m-1]>=0)unbounded=false;else unbounded=true;if(unbounded)return{solution:y,message:"Unbounded",iterations:count}}return{solution:x,message:"maximum iteration count exceeded",iterations:count}};
numeric._solveLP=function _solveLP(c,A,b,tol,maxit){var m=c.length,n=b.length,y;var sum=numeric.sum,log=numeric.log,mul=numeric.mul,sub=numeric.sub,dot=numeric.dot,div=numeric.div,add=numeric.add;var c0=numeric.rep([m],0).concat([1]);var J=numeric.rep([n,1],-1);var A0=numeric.blockMatrix([[A,J]]);var b0=b;var y=numeric.rep([m],0).concat(Math.max(0,numeric.sup(numeric.neg(b)))+1);var x0=numeric.__solveLP(c0,A0,b0,tol,maxit,y,false);var x=numeric.clone(x0.solution);x.length=m;var foo=numeric.inf(sub(b,
dot(A,x)));if(foo<0)return{solution:NaN,message:"Infeasible",iterations:x0.iterations};var ret=numeric.__solveLP(c,A,b,tol,maxit-x0.iterations,x,true);ret.iterations+=x0.iterations;return ret};
numeric.solveLP=function solveLP(c,A,b,Aeq,beq,tol,maxit){if(typeof maxit==="undefined")maxit=1E3;if(typeof tol==="undefined")tol=numeric.epsilon;if(typeof Aeq==="undefined")return numeric._solveLP(c,A,b,tol,maxit);var m=Aeq.length,n=Aeq[0].length,o=A.length;var B=numeric.echelonize(Aeq);var flags=numeric.rep([n],0);var P=B.P;var Q=[];var i;for(i=P.length-1;i!==-1;--i)flags[P[i]]=1;for(i=n-1;i!==-1;--i)if(flags[i]===0)Q.push(i);var g=numeric.getRange;var I=numeric.linspace(0,m-1),J=numeric.linspace(0,
o-1);var Aeq2=g(Aeq,I,Q),A1=g(A,J,P),A2=g(A,J,Q),dot=numeric.dot,sub=numeric.sub;var A3=dot(A1,B.I);var A4=sub(A2,dot(A3,Aeq2)),b4=sub(b,dot(A3,beq));var c1=Array(P.length),c2=Array(Q.length);for(i=P.length-1;i!==-1;--i)c1[i]=c[P[i]];for(i=Q.length-1;i!==-1;--i)c2[i]=c[Q[i]];var c4=sub(c2,dot(c1,dot(B.I,Aeq2)));var S=numeric._solveLP(c4,A4,b4,tol,maxit);var x2=S.solution;if(x2!==x2)return S;var x1=dot(B.I,sub(beq,dot(Aeq2,x2)));var x=Array(c.length);for(i=P.length-1;i!==-1;--i)x[P[i]]=x1[i];for(i=
Q.length-1;i!==-1;--i)x[Q[i]]=x2[i];return{solution:x,message:S.message,iterations:S.iterations}};
numeric.MPStoLP=function MPStoLP(MPS){if(MPS instanceof String)MPS.split("\n");var state=0;var states=["Initial state","NAME","ROWS","COLUMNS","RHS","BOUNDS","ENDATA"];var n=MPS.length;var i,j,z,N=0,rows={},sign=[],rl=0,vars={},nv=0;var name;var c=[],A=[],b=[];function err(e){throw new Error("MPStoLP: "+e+"\nLine "+i+": "+MPS[i]+"\nCurrent state: "+states[state]+"\n");}for(i=0;i<n;++i){z=MPS[i];var w0=z.match(/\S*/g);var w=[];for(j=0;j<w0.length;++j)if(w0[j]!=="")w.push(w0[j]);if(w.length===0)continue;
for(j=0;j<states.length;++j)if(z.substr(0,states[j].length)===states[j])break;if(j<states.length){state=j;if(j===1)name=w[1];if(j===6)return{name:name,c:c,A:numeric.transpose(A),b:b,rows:rows,vars:vars};continue}switch(state){case 0:case 1:err("Unexpected line");case 2:switch(w[0]){case "N":if(N===0)N=w[1];else err("Two or more N rows");break;case "L":rows[w[1]]=rl;sign[rl]=1;b[rl]=0;++rl;break;case "G":rows[w[1]]=rl;sign[rl]=-1;b[rl]=0;++rl;break;case "E":rows[w[1]]=rl;sign[rl]=0;b[rl]=0;++rl;break;
default:err("Parse error "+numeric.prettyPrint(w))}break;case 3:if(!vars.hasOwnProperty(w[0])){vars[w[0]]=nv;c[nv]=0;A[nv]=numeric.rep([rl],0);++nv}var p=vars[w[0]];for(j=1;j<w.length;j+=2){if(w[j]===N){c[p]=parseFloat(w[j+1]);continue}var q=rows[w[j]];A[p][q]=(sign[q]<0?-1:1)*parseFloat(w[j+1])}break;case 4:for(j=1;j<w.length;j+=2)b[rows[w[j]]]=(sign[rows[w[j]]]<0?-1:1)*parseFloat(w[j+1]);break;case 5:break;case 6:err("Internal error")}}err("Reached end of file without ENDATA")};
numeric.seedrandom={pow:Math.pow,random:Math.random};
(function(pool,math,width,chunks,significance,overflow,startdenom){math["seedrandom"]=function seedrandom(seed,use_entropy){var key=[];var arc4;seed=mixkey(flatten(use_entropy?[seed,pool]:arguments.length?seed:[(new Date).getTime(),pool,window],3),key);arc4=new ARC4(key);mixkey(arc4.S,pool);math["random"]=function random(){var n=arc4.g(chunks);var d=startdenom;var x=0;while(n<significance){n=(n+x)*width;d*=width;x=arc4.g(1)}while(n>=overflow){n/=2;d/=2;x>>>=1}return(n+x)/d};return seed};function ARC4(key){var t,
u,me=this,keylen=key.length;var i=0,j=me.i=me.j=me.m=0;me.S=[];me.c=[];if(!keylen)key=[keylen++];while(i<width)me.S[i]=i++;for(i=0;i<width;i++){t=me.S[i];j=lowbits(j+t+key[i%keylen]);u=me.S[j];me.S[i]=u;me.S[j]=t}me.g=function getnext(count){var s=me.S;var i=lowbits(me.i+1);var t=s[i];var j=lowbits(me.j+t);var u=s[j];s[i]=u;s[j]=t;var r=s[lowbits(t+u)];while(--count){i=lowbits(i+1);t=s[i];j=lowbits(j+t);u=s[j];s[i]=u;s[j]=t;r=r*width+s[lowbits(t+u)]}me.i=i;me.j=j;return r};me.g(width)}function flatten(obj,
depth,result,prop,typ){result=[];typ=typeof obj;if(depth&&typ=="object")for(prop in obj)if(prop.indexOf("S")<5)try{result.push(flatten(obj[prop],depth-1))}catch(e){}return result.length?result:obj+(typ!="string"?"\x00":"")}function mixkey(seed,key,smear,j){seed+="";smear=0;for(j=0;j<seed.length;j++)key[lowbits(j)]=lowbits((smear^=key[lowbits(j)]*19)+seed.charCodeAt(j));seed="";for(j in key)seed+=String.fromCharCode(key[j]);return seed}function lowbits(n){return n&width-1}startdenom=math.pow(width,
chunks);significance=math.pow(2,significance);overflow=significance*2;mixkey(math.random(),pool)})([],numeric.seedrandom,256,6,52);
(function(exports){function base0to1(A){if(typeof A!=="object")return A;var ret=[],i,n=A.length;for(i=0;i<n;i++)ret[i+1]=base0to1(A[i]);return ret}function base1to0(A){if(typeof A!=="object")return A;var ret=[],i,n=A.length;for(i=1;i<n;i++)ret[i-1]=base1to0(A[i]);return ret}function dpori(a,lda,n){var i,j,k,kp1,t;for(k=1;k<=n;k=k+1){a[k][k]=1/a[k][k];t=-a[k][k];for(i=1;i<k;i=i+1)a[i][k]=t*a[i][k];kp1=k+1;if(n<kp1)break;for(j=kp1;j<=n;j=j+1){t=a[k][j];a[k][j]=0;for(i=1;i<=k;i=i+1)a[i][j]=a[i][j]+t*
a[i][k]}}}function dposl(a,lda,n,b){var i,k,kb,t;for(k=1;k<=n;k=k+1){t=0;for(i=1;i<k;i=i+1)t=t+a[i][k]*b[i];b[k]=(b[k]-t)/a[k][k]}for(kb=1;kb<=n;kb=kb+1){k=n+1-kb;b[k]=b[k]/a[k][k];t=-b[k];for(i=1;i<k;i=i+1)b[i]=b[i]+t*a[i][k]}}function dpofa(a,lda,n,info){var i,j,jm1,k,t,s;for(j=1;j<=n;j=j+1){info[1]=j;s=0;jm1=j-1;if(jm1<1){s=a[j][j]-s;if(s<=0)break;a[j][j]=Math.sqrt(s)}else{for(k=1;k<=jm1;k=k+1){t=a[k][j];for(i=1;i<k;i=i+1)t=t-a[i][j]*a[i][k];t=t/a[k][k];a[k][j]=t;s=s+t*t}s=a[j][j]-s;if(s<=0)break;
a[j][j]=Math.sqrt(s)}info[1]=0}}function qpgen2(dmat,dvec,fddmat,n,sol,crval,amat,bvec,fdamat,q,meq,iact,nact,iter,work,ierr){var i,j,l,l1,info,it1,iwzv,iwrv,iwrm,iwsv,iwuv,nvl,r,iwnbv,temp,sum,t1,tt,gc,gs,nu,t1inf,t2min,vsmall,tmpa,tmpb,go;r=Math.min(n,q);l=2*n+r*(r+5)/2+2*q+1;vsmall=1E-60;do{vsmall=vsmall+vsmall;tmpa=1+.1*vsmall;tmpb=1+.2*vsmall}while(tmpa<=1||tmpb<=1);for(i=1;i<=n;i=i+1)work[i]=dvec[i];for(i=n+1;i<=l;i=i+1)work[i]=0;for(i=1;i<=q;i=i+1)iact[i]=0;info=[];if(ierr[1]===0){dpofa(dmat,
fddmat,n,info);if(info[1]!==0){ierr[1]=2;return}dposl(dmat,fddmat,n,dvec);dpori(dmat,fddmat,n)}else{for(j=1;j<=n;j=j+1){sol[j]=0;for(i=1;i<=j;i=i+1)sol[j]=sol[j]+dmat[i][j]*dvec[i]}for(j=1;j<=n;j=j+1){dvec[j]=0;for(i=j;i<=n;i=i+1)dvec[j]=dvec[j]+dmat[j][i]*sol[i]}}crval[1]=0;for(j=1;j<=n;j=j+1){sol[j]=dvec[j];crval[1]=crval[1]+work[j]*sol[j];work[j]=0;for(i=j+1;i<=n;i=i+1)dmat[i][j]=0}crval[1]=-crval[1]/2;ierr[1]=0;iwzv=n;iwrv=iwzv+n;iwuv=iwrv+r;iwrm=iwuv+r+1;iwsv=iwrm+r*(r+1)/2;iwnbv=iwsv+q;for(i=
1;i<=q;i=i+1){sum=0;for(j=1;j<=n;j=j+1)sum=sum+amat[j][i]*amat[j][i];work[iwnbv+i]=Math.sqrt(sum)}nact=0;iter[1]=0;iter[2]=0;function fn_goto_50(){iter[1]=iter[1]+1;l=iwsv;for(i=1;i<=q;i=i+1){l=l+1;sum=-bvec[i];for(j=1;j<=n;j=j+1)sum=sum+amat[j][i]*sol[j];if(Math.abs(sum)<vsmall)sum=0;if(i>meq)work[l]=sum;else{work[l]=-Math.abs(sum);if(sum>0){for(j=1;j<=n;j=j+1)amat[j][i]=-amat[j][i];bvec[i]=-bvec[i]}}}for(i=1;i<=nact;i=i+1)work[iwsv+iact[i]]=0;nvl=0;temp=0;for(i=1;i<=q;i=i+1)if(work[iwsv+i]<temp*
work[iwnbv+i]){nvl=i;temp=work[iwsv+i]/work[iwnbv+i]}if(nvl===0)return 999;return 0}function fn_goto_55(){for(i=1;i<=n;i=i+1){sum=0;for(j=1;j<=n;j=j+1)sum=sum+dmat[j][i]*amat[j][nvl];work[i]=sum}l1=iwzv;for(i=1;i<=n;i=i+1)work[l1+i]=0;for(j=nact+1;j<=n;j=j+1)for(i=1;i<=n;i=i+1)work[l1+i]=work[l1+i]+dmat[i][j]*work[j];t1inf=true;for(i=nact;i>=1;i=i-1){sum=work[i];l=iwrm+i*(i+3)/2;l1=l-i;for(j=i+1;j<=nact;j=j+1){sum=sum-work[l]*work[iwrv+j];l=l+j}sum=sum/work[l1];work[iwrv+i]=sum;if(iact[i]<meq)break;
if(sum<0)break;t1inf=false;it1=i}if(!t1inf){t1=work[iwuv+it1]/work[iwrv+it1];for(i=1;i<=nact;i=i+1){if(iact[i]<meq)break;if(work[iwrv+i]<0)break;temp=work[iwuv+i]/work[iwrv+i];if(temp<t1){t1=temp;it1=i}}}sum=0;for(i=iwzv+1;i<=iwzv+n;i=i+1)sum=sum+work[i]*work[i];if(Math.abs(sum)<=vsmall)if(t1inf){ierr[1]=1;return 999}else{for(i=1;i<=nact;i=i+1)work[iwuv+i]=work[iwuv+i]-t1*work[iwrv+i];work[iwuv+nact+1]=work[iwuv+nact+1]+t1;return 700}else{sum=0;for(i=1;i<=n;i=i+1)sum=sum+work[iwzv+i]*amat[i][nvl];
tt=-work[iwsv+nvl]/sum;t2min=true;if(!t1inf)if(t1<tt){tt=t1;t2min=false}for(i=1;i<=n;i=i+1){sol[i]=sol[i]+tt*work[iwzv+i];if(Math.abs(sol[i])<vsmall)sol[i]=0}crval[1]=crval[1]+tt*sum*(tt/2+work[iwuv+nact+1]);for(i=1;i<=nact;i=i+1)work[iwuv+i]=work[iwuv+i]-tt*work[iwrv+i];work[iwuv+nact+1]=work[iwuv+nact+1]+tt;if(t2min){nact=nact+1;iact[nact]=nvl;l=iwrm+(nact-1)*nact/2+1;for(i=1;i<=nact-1;i=i+1){work[l]=work[i];l=l+1}if(nact===n)work[l]=work[n];else{for(i=n;i>=nact+1;i=i-1){if(work[i]===0)break;gc=
Math.max(Math.abs(work[i-1]),Math.abs(work[i]));gs=Math.min(Math.abs(work[i-1]),Math.abs(work[i]));if(work[i-1]>=0)temp=Math.abs(gc*Math.sqrt(1+gs*gs/(gc*gc)));else temp=-Math.abs(gc*Math.sqrt(1+gs*gs/(gc*gc)));gc=work[i-1]/temp;gs=work[i]/temp;if(gc===1)break;if(gc===0){work[i-1]=gs*temp;for(j=1;j<=n;j=j+1){temp=dmat[j][i-1];dmat[j][i-1]=dmat[j][i];dmat[j][i]=temp}}else{work[i-1]=temp;nu=gs/(1+gc);for(j=1;j<=n;j=j+1){temp=gc*dmat[j][i-1]+gs*dmat[j][i];dmat[j][i]=nu*(dmat[j][i-1]+temp)-dmat[j][i];
dmat[j][i-1]=temp}}}work[l]=work[nact]}}else{sum=-bvec[nvl];for(j=1;j<=n;j=j+1)sum=sum+sol[j]*amat[j][nvl];if(nvl>meq)work[iwsv+nvl]=sum;else{work[iwsv+nvl]=-Math.abs(sum);if(sum>0){for(j=1;j<=n;j=j+1)amat[j][nvl]=-amat[j][nvl];bvec[nvl]=-bvec[nvl]}}return 700}}return 0}function fn_goto_797(){l=iwrm+it1*(it1+1)/2+1;l1=l+it1;if(work[l1]===0)return 798;gc=Math.max(Math.abs(work[l1-1]),Math.abs(work[l1]));gs=Math.min(Math.abs(work[l1-1]),Math.abs(work[l1]));if(work[l1-1]>=0)temp=Math.abs(gc*Math.sqrt(1+
gs*gs/(gc*gc)));else temp=-Math.abs(gc*Math.sqrt(1+gs*gs/(gc*gc)));gc=work[l1-1]/temp;gs=work[l1]/temp;if(gc===1)return 798;if(gc===0){for(i=it1+1;i<=nact;i=i+1){temp=work[l1-1];work[l1-1]=work[l1];work[l1]=temp;l1=l1+i}for(i=1;i<=n;i=i+1){temp=dmat[i][it1];dmat[i][it1]=dmat[i][it1+1];dmat[i][it1+1]=temp}}else{nu=gs/(1+gc);for(i=it1+1;i<=nact;i=i+1){temp=gc*work[l1-1]+gs*work[l1];work[l1]=nu*(work[l1-1]+temp)-work[l1];work[l1-1]=temp;l1=l1+i}for(i=1;i<=n;i=i+1){temp=gc*dmat[i][it1]+gs*dmat[i][it1+
1];dmat[i][it1+1]=nu*(dmat[i][it1]+temp)-dmat[i][it1+1];dmat[i][it1]=temp}}return 0}function fn_goto_798(){l1=l-it1;for(i=1;i<=it1;i=i+1){work[l1]=work[l];l=l+1;l1=l1+1}work[iwuv+it1]=work[iwuv+it1+1];iact[it1]=iact[it1+1];it1=it1+1;if(it1<nact)return 797;return 0}function fn_goto_799(){work[iwuv+nact]=work[iwuv+nact+1];work[iwuv+nact+1]=0;iact[nact]=0;nact=nact-1;iter[2]=iter[2]+1;return 0}go=0;while(true){go=fn_goto_50();if(go===999)return;while(true){go=fn_goto_55();if(go===0)break;if(go===999)return;
if(go===700)if(it1===nact)fn_goto_799();else{while(true){fn_goto_797();go=fn_goto_798();if(go!==797)break}fn_goto_799()}}}}function solveQP(Dmat,dvec,Amat,bvec,meq,factorized){Dmat=base0to1(Dmat);dvec=base0to1(dvec);Amat=base0to1(Amat);var i,n,q,nact,r,crval=[],iact=[],sol=[],work=[],iter=[],message;meq=meq||0;factorized=factorized?base0to1(factorized):[undefined,0];bvec=bvec?base0to1(bvec):[];n=Dmat.length-1;q=Amat[1].length-1;if(!bvec)for(i=1;i<=q;i=i+1)bvec[i]=0;for(i=1;i<=q;i=i+1)iact[i]=0;nact=
0;r=Math.min(n,q);for(i=1;i<=n;i=i+1)sol[i]=0;crval[1]=0;for(i=1;i<=2*n+r*(r+5)/2+2*q+1;i=i+1)work[i]=0;for(i=1;i<=2;i=i+1)iter[i]=0;qpgen2(Dmat,dvec,n,n,sol,crval,Amat,bvec,n,q,meq,iact,nact,iter,work,factorized);message="";if(factorized[1]===1)message="constraints are inconsistent, no solution!";if(factorized[1]===2)message="matrix D in quadratic function is not positive definite!";return{solution:base1to0(sol),value:base1to0(crval),unconstrained_solution:base1to0(dvec),iterations:base1to0(iter),
iact:base1to0(iact),message:message}}exports.solveQP=solveQP})(numeric);
numeric.svd=function svd(A){var temp;var prec=numeric.epsilon;var tolerance=1E-64/prec;var itmax=50;var c=0;var i=0;var j=0;var k=0;var l=0;var u=numeric.clone(A);var m=u.length;var n=u[0].length;if(m<n)throw"Need more rows than columns";var e=new Array(n);var q=new Array(n);for(i=0;i<n;i++)e[i]=q[i]=0;var v=numeric.rep([n,n],0);function pythag(a,b){a=Math.abs(a);b=Math.abs(b);if(a>b)return a*Math.sqrt(1+b*b/a/a);else if(b==0)return a;return b*Math.sqrt(1+a*a/b/b)}var f=0;var g=0;var h=0;var x=0;
var y=0;var z=0;var s=0;for(i=0;i<n;i++){e[i]=g;s=0;l=i+1;for(j=i;j<m;j++)s+=u[j][i]*u[j][i];if(s<=tolerance)g=0;else{f=u[i][i];g=Math.sqrt(s);if(f>=0)g=-g;h=f*g-s;u[i][i]=f-g;for(j=l;j<n;j++){s=0;for(k=i;k<m;k++)s+=u[k][i]*u[k][j];f=s/h;for(k=i;k<m;k++)u[k][j]+=f*u[k][i]}}q[i]=g;s=0;for(j=l;j<n;j++)s=s+u[i][j]*u[i][j];if(s<=tolerance)g=0;else{f=u[i][i+1];g=Math.sqrt(s);if(f>=0)g=-g;h=f*g-s;u[i][i+1]=f-g;for(j=l;j<n;j++)e[j]=u[i][j]/h;for(j=l;j<m;j++){s=0;for(k=l;k<n;k++)s+=u[j][k]*u[i][k];for(k=
l;k<n;k++)u[j][k]+=s*e[k]}}y=Math.abs(q[i])+Math.abs(e[i]);if(y>x)x=y}for(i=n-1;i!=-1;i+=-1){if(g!=0){h=g*u[i][i+1];for(j=l;j<n;j++)v[j][i]=u[i][j]/h;for(j=l;j<n;j++){s=0;for(k=l;k<n;k++)s+=u[i][k]*v[k][j];for(k=l;k<n;k++)v[k][j]+=s*v[k][i]}}for(j=l;j<n;j++){v[i][j]=0;v[j][i]=0}v[i][i]=1;g=e[i];l=i}for(i=n-1;i!=-1;i+=-1){l=i+1;g=q[i];for(j=l;j<n;j++)u[i][j]=0;if(g!=0){h=u[i][i]*g;for(j=l;j<n;j++){s=0;for(k=l;k<m;k++)s+=u[k][i]*u[k][j];f=s/h;for(k=i;k<m;k++)u[k][j]+=f*u[k][i]}for(j=i;j<m;j++)u[j][i]=
u[j][i]/g}else for(j=i;j<m;j++)u[j][i]=0;u[i][i]+=1}prec=prec*x;for(k=n-1;k!=-1;k+=-1)for(var iteration=0;iteration<itmax;iteration++){var test_convergence=false;for(l=k;l!=-1;l+=-1){if(Math.abs(e[l])<=prec){test_convergence=true;break}if(Math.abs(q[l-1])<=prec)break}if(!test_convergence){c=0;s=1;var l1=l-1;for(i=l;i<k+1;i++){f=s*e[i];e[i]=c*e[i];if(Math.abs(f)<=prec)break;g=q[i];h=pythag(f,g);q[i]=h;c=g/h;s=-f/h;for(j=0;j<m;j++){y=u[j][l1];z=u[j][i];u[j][l1]=y*c+z*s;u[j][i]=-y*s+z*c}}}z=q[k];if(l==
k){if(z<0){q[k]=-z;for(j=0;j<n;j++)v[j][k]=-v[j][k]}break}if(iteration>=itmax-1)throw"Error: no convergence.";x=q[l];y=q[k-1];g=e[k-1];h=e[k];f=((y-z)*(y+z)+(g-h)*(g+h))/(2*h*y);g=pythag(f,1);if(f<0)f=((x-z)*(x+z)+h*(y/(f-g)-h))/x;else f=((x-z)*(x+z)+h*(y/(f+g)-h))/x;c=1;s=1;for(i=l+1;i<k+1;i++){g=e[i];y=q[i];h=s*g;g=c*g;z=pythag(f,h);e[i-1]=z;c=f/z;s=h/z;f=x*c+g*s;g=-x*s+g*c;h=y*s;y=y*c;for(j=0;j<n;j++){x=v[j][i-1];z=v[j][i];v[j][i-1]=x*c+z*s;v[j][i]=-x*s+z*c}z=pythag(f,h);q[i-1]=z;c=f/z;s=h/z;f=
c*g+s*y;x=-s*g+c*y;for(j=0;j<m;j++){y=u[j][i-1];z=u[j][i];u[j][i-1]=y*c+z*s;u[j][i]=-y*s+z*c}}e[l]=0;e[k]=f;q[k]=x}for(i=0;i<q.length;i++)if(q[i]<prec)q[i]=0;for(i=0;i<n;i++)for(j=i-1;j>=0;j--)if(q[j]<q[i]){c=q[j];q[j]=q[i];q[i]=c;for(k=0;k<u.length;k++){temp=u[k][i];u[k][i]=u[k][j];u[k][j]=temp}for(k=0;k<v.length;k++){temp=v[k][i];v[k][i]=v[k][j];v[k][j]=temp}i=j}return{U:u,S:q,V:v}};</script><script>/**
 * @license
 * The MIT License (MIT)
 * Copyright (c) 2015 Waylon Flinn
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */

(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.weblas = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
var globals = require('./lib/globals'),
	pipeline = require("./lib/pipeline"),
	SGEMMCalculator = require("./lib/sgemmcalculator"),
	SAXPYCalculator = require("./lib/saxpycalculator"),
	SSCALCalculator = require("./lib/sscalcalculator"),
	SDWNSCalculator = require("./lib/sdwnscalculator"),
	SCLMPCalculator = require("./lib/sclmpcalculator"),
	test = require("./lib/test");

var gl = globals.gl,
	sgemmcalculator = new SGEMMCalculator(gl),
	saxpycalculator = new SAXPYCalculator(gl),
	sscalcalculator = new SSCALCalculator(gl),
	sdwnscalculator = new SDWNSCalculator(gl),
	sclmpcalculator = new SCLMPCalculator(gl);

module.exports = {
	// level one
	"saxpy" : saxpy,
	"sscal" : sscal,   // single precision matrix scale
	// level two
	// level three
	"sgemm" : sgemm,   // single precision generalized matrix multiply
	// extra
	"sstd" : sstd,     // single precision Standard Score normalization
	"sdwns": sdwns,
	"sclmp": sclmp,
	// pipeline
	"pipeline" : pipeline,
	// internals
	"gpu" : {	"gl": gl,
	 			"sgemm": pipeline.sgemmcalculator.calculate.bind(pipeline.sgemmcalculator),
				"sscal" : pipeline.sscalcalculator.calculate.bind(pipeline.sscalcalculator),
				"sclmp" : pipeline.sclmpcalculator.calculate.bind(pipeline.sclmpcalculator),
				"sdwns" : pipeline.sdwnscalculator.calculate.bind(pipeline.sdwnscalculator),
				"encode" : gl.encode.bind(gl)
			},
	"util" : { "fromArray" : fromArray, "transpose" : transpose},
	"test" : test
};


/* Wrap the GL calculation object in a (relatively) user friendly function that
	accepts TypedArrays

	* convert the data to (padded) textures in GPU memory
	* execute calculation
	* read result into an array, and return
 */
function sgemm(M, N, K, alpha, A, B, beta, C){

	if(C != null && C.length != N){
		throw new Error("Only vector C with length matching rows in A is currently supported.");
	}

	// pack each matrix into a single RGBA texel array, with the second transposed
	var texels0 = A,
		texels1,
		texels2 = C;


	texels1 = transpose(K, N, B);

	// create input textures from data
	var texture0 = gl.createDataTexture(M, K, texels0);
	var texture1 = gl.createDataTexture(N, K, texels1);
	var texture2 = null;
	if(texels2 != null){
		texture2 = gl.createDataTexture(1, N, texels2);
	}

	var texture3 = gl.createOutputTexture(M, N);

	sgemmcalculator.calculate(M, N, K, alpha, texture0, texture1, beta, texture2, texture3);

	// retrieve data
	rawBuffer = gl.readData(M, N);

	// clean up
	gl.context.deleteTexture(texture0);
	gl.context.deleteTexture(texture1);
	if(texture2 != null){
		gl.context.deleteTexture(texture2);
	}
	gl.context.deleteTexture(texture3);

	// return result
	return new Float32Array(rawBuffer);

}

function saxpy(N, a, X, Y){

	var rawBuffer;


	var texels0 = X,
		texels1;

	// TODO: special shader for constant Y
	if(isFloat32Array(Y)){
		texels1 = Y;
	} else {
		texels1 = new Float32Array(N);
		texels1.fill(Y);
	}

	// create input textures from data
	var texture0 = gl.createDataTexture(1, N, texels0);
	var texture1 = gl.createDataTexture(1, N, texels1);

	var texture3 = gl.createOutputTexture(1, N);

	saxpycalculator.calculate(N, a, texture0, texture1, texture3);

	// retrieve data
	rawBuffer = gl.readData(1, N);

	// clean up
	gl.context.deleteTexture(texture0);
	gl.context.deleteTexture(texture1);
	gl.context.deleteTexture(texture3);

	// return result
	return new Float32Array(rawBuffer);

}

function isFloat32Array(obj){
	return Object.prototype.toString.call(obj) === "[object Float32Array]";
}
/* a more general version of the BLAS Level 1 scale, that works on matrices
   and includes an elementwise scalar addition

   a * X + b

   a - multiplicative scalar
   b - additive scalar
   X - matrix (M x N)

   to get the standard BLAS scal set M = 1 and b = 0

   this function is generally only cost effective to use in a pipeline
*/
function sscal(M, N, a, b, X){

	var rawBuffer;

	var texels0 = X;
	var texture0 = gl.createDataTexture(M, N, texels0);

	var texture3 = gl.createOutputTexture(M, N);

	sscalcalculator.calculate(M, N, a, b, texture0, texture3);

	// retrieve data
	rawBuffer = gl.readData(M, N);

	// clean up
	gl.context.deleteTexture(texture0);
	gl.context.deleteTexture(texture3);

	// return result
	return new Float32Array(rawBuffer);
}

/* Calculate the Standard Score normalization (subtract mean
   ,divide by standard deviation).
 */
function sstd(M, N, mu, sigma, X){

	var rawBuffer;

	var texels0 = X;
	var texture0 = gl.createDataTexture(M, N, texels0);

	var texture3 = gl.createOutputTexture(M, N);

	// adjust the parameters (for inverse) and call the standard score normalization
	sscalcalculator.calculate(M, N, 1.0/sigma, -1.0 * mu/sigma, texture0, texture3);

	// retrieve data
	rawBuffer = gl.readData(M, N);

	// clean up
	gl.context.deleteTexture(texture0);
	gl.context.deleteTexture(texture3);

	// return result
	return new Float32Array(rawBuffer);
}

/* downsample an image (taking the max) for Pooling

	M - rows in input
	N - columns in input
	c - channels in input
	factor - the downsample factor (width of patch to sample)
	stride - width between pooling regions
	X - input image
 */
function sdwns(M, N, channels, factor, stride, X){


	var texels0 = X;

	var texture0 = gl.createDataTexture(M, N * channels, X);

	var N_out = Math.floor((N - factor) / stride) + 1;
	var M_out = Math.floor((M - factor) / stride) + 1;

	var texture3 = gl.createOutputTexture(M_out, N_out * channels);

	sdwnscalculator.calculate(M, N, channels, factor, stride, texture0, texture3);

	// retrieve data
	rawBuffer = gl.readData(M_out, N_out * channels);

	// clean up
	gl.context.deleteTexture(texture0);
	gl.context.deleteTexture(texture3);

	// return result
	return new Float32Array(rawBuffer);
}
/*  Elementwise clamp function for matrices on the interval [a, b]. Can also be
	used for min or max, by passing Number.MIN_VALUE for the first parameter and
	Number.MAX_VALUE for the second parameter, respectively.

	Passing `null` for either of these parameters will default to it's
	respective min or max value.

	M - number of rows in X
	N - number of columns in X
	a - lower bound (inclusize)
	b - upper bound (inclusive)
	X - matrix

   to get the standard BLAS scal set M = 1 and b = 0

   this function is generally only cost effective to use in a pipeline
*/
function sclmp(M, N, a, b, X){

	a = (a != null) ? a : Number.MIN_VALUE;
	b = (b != null) ? b : Number.MAX_VALUE;

	var rawBuffer;

	var texels0 = X;
	var texture0 = gl.createDataTexture(M, N, texels0);

	var texture3 = gl.createOutputTexture(M, N);

	sclmpcalculator.calculate(M, N, a, b, texture0, texture3);

	// retrieve data
	rawBuffer = gl.readData(M, N);

	// clean up
	gl.context.deleteTexture(texture0);
	gl.context.deleteTexture(texture3);

	// return result
	return new Float32Array(rawBuffer);
}
/*
function saxpy(n, a, x, y){
	var i = 0,
		result = new Float32Array(n);

	// assert n = x.length
	// assert a is scalar
	// assert x is Float32Array

	if(isNumeric(y)){
		// shortcut for scalar y
		for(; i < n; i++){
			result[i] = a * x[i] + y;
		}
	} else {

		for(; i < n; i++){
			result[i] = a * x[i] + y[i];
		}
	}

	return result;

}*/

// add a String.format method, if none exists
if (!String.prototype.format) {
  String.prototype.format = function() {
	var args = arguments;
	return this.replace(/{(\d+)}/g, function(match, number) {
	  return typeof args[number] != 'undefined'
		? args[number]
		: match
	  ;
	});
  };
}

function isNumeric( obj ) { return (obj - parseFloat( obj ) + 1) >= 0; }

/* create a typed array from a 2D javascript array */
function fromArray(array, type, tranpose) {
	var shape = [],
			data,
			c;   // number of columns

	if(!tranpose){
		shape[0] = array.length;
		shape[1] = array[0].length;
	} else {
		shape[1] = array.length;
		shape[0] = array[0].length;
	}
	c = shape[1];

	type = type || Float32Array;

	data = new type(shape[0]*shape[1]);

	for (var ii = 0; ii < shape[0]; ++ii)
		for (var jj = 0; jj < shape[1]; ++jj)
		if(!tranpose)
			data[ii*c + jj] = array[ii][jj];
		else
			data[ii*c + jj] = array[jj][ii];

	return data;
};

// tranpose a typed array in row major order, with the given row and column
// numers
function transpose(r, c, typedArray){
	var result = new typedArray.constructor(r*c);

	for(var i = 0; i < r; i++){
		for(var j = 0; j < c; j++){
			result[j * r + i] = typedArray[i * c + j];
		}
	}

	return result;
}

},{"./lib/globals":2,"./lib/pipeline":3,"./lib/saxpycalculator":4,"./lib/sclmpcalculator":5,"./lib/sdwnscalculator":6,"./lib/sgemmcalculator":7,"./lib/sscalcalculator":9,"./lib/test":11}],2:[function(require,module,exports){
var WebGL = require("./webgl");

var gl = new WebGL();

module.exports = {
	"gl" : gl
}

},{"./webgl":12}],3:[function(require,module,exports){
var globals = require('./globals'),
	SGEMMCalculator = require("./sgemmcalculator"),
	SAXPYCalculator = require("./saxpycalculator"),
	SSCALCalculator = require("./sscalcalculator"),
	SDWNSCalculator = require("./sdwnscalculator"),
	SCLMPCalculator = require("./sclmpcalculator"),
	SLOKNCalculator = require("./slokncalculator"),
	Tensor = require('./tensor');


var gl = globals.gl,
	sgemmcalculator = new SGEMMCalculator(gl, false),
	saxpycalculator = new SAXPYCalculator(gl, false),
	sscalcalculator = new SSCALCalculator(gl, false),
	sdwnscalculator = new SDWNSCalculator(gl, false),
	sclmpcalculator = new SCLMPCalculator(gl, false),
	slokncalculator = new SLOKNCalculator(gl, false);

module.exports = {
	"Tensor" : Tensor,
	"sscal" : sscal,
	"sgemm" : sgemm,
	"sdwns" : sdwns,
	"sclmp" : sclmp,
	"slokn" : slokn,

	"sgemmcalculator" : sgemmcalculator,
	"saxpycalculator" : saxpycalculator,
	"sscalcalculator" : sscalcalculator,
	"sdwnscalculator" : sdwnscalculator,
	"sclmpcalculator" : sclmpcalculator,
	"slokncalculator" : slokncalculator
}

/* scale (and optionally offset) a Tensor, elementwise
 */
function sscal(a, b, t0){

	var M = t0.shape[0],
		N = t0.shape[1];

	// create an empty output Tensor
	var tOut = new Tensor([M, N], null);

	sscalcalculator.calculate(M, N, a, b, t0.texture, tOut.texture);

	return tOut;
}

/* matrix multiply on t0 and t1 with additive t2. t1 must be transposed
 */
function sgemm(alpha, t0, t1, beta, t2){

	if(t1.shape[1] !== t0.shape[1])
		throw new Error("Second dimension must be of same size for input Tensors (second Tensor is transposed).");

	var M = t0.shape[0],
		N = t1.shape[0],
		K = t0.shape[1];

	var texture2;

	if(t2){
		texture2 = t2.texture;
	} else {
		texture2 = null;
	}

	// create an empty output Tensor
	var tOut = new Tensor([M, N], null);

	sgemmcalculator.calculate(M, N, K, alpha, t0.texture, t1.texture, beta, texture2, tOut.texture);

	return tOut;
}

function sdwns(channels, factor, stride, t0){

	if(t0.shape[1] % channels !== 0)
		throw new Error("Second dimension of tensor must be a multiple of channels");

	var M = t0.shape[0],
		N = t0.shape[1] / channels;

	var M_out = Math.floor((M - factor) / stride) + 1;
	var N_out = Math.floor((N - factor) / stride) + 1;

	// create an empty output Tensor
	var tOut = new Tensor([M_out, N_out * channels], null);

	sdwnscalculator.calculate(M, N, channels, factor, stride, t0.texture, tOut.texture);

	return tOut;
}

function sclmp(a, b, t0){

	a = (a != null) ? a : Number.MIN_VALUE;
	b = (b != null) ? b : Number.MAX_VALUE;

	var M = t0.shape[0],
		N = t0.shape[1];

	// create an empty output Tensor
	var tOut = new Tensor([M, N], null);

	sclmpcalculator.calculate(M, N, a, b, t0.texture, tOut.texture);

	return tOut;
}

/* Linearize onto Kernels, Transform input into one row per patch, for use in
	convolution.

	channels - number of channels in the input
	factor - width (and height) of kernels (and patches)
	stride - number of elements between patches
	t0 - the input Tensor
 */
function slokn(channels, factor, stride, margin, t0){

	if(t0.shape[1] % channels !== 0)
		throw new Error("Second dimension of tensor must be a multiple of channels");

	var M = t0.shape[0],
		N = t0.shape[1] / channels;

	var N_p, M_p;

	// number of patches (columns and rows)
	if(!margin){
		margin = 0;
		N_p = Math.ceil((N - factor) / stride) + 1;
		M_p = Math.ceil((M - factor) / stride) + 1;
	} else {
		N_p = Math.ceil((N + (2 * margin) - factor) / stride) + 1;
		M_p = Math.ceil((M + (2 * margin) - factor) / stride) + 1;
	}

	var P_p = factor * factor * channels; // elements per kernel
	var M_out = (M_p * N_p),
	 	N_out = P_p;

	// create an empty output Tensor
	var tOut = new Tensor([M_out, N_out], null);

	slokncalculator.calculate(M, N, channels, M_out, N_out, N_p, factor, stride, margin, t0.texture, tOut.texture);

	return tOut;
}

},{"./globals":2,"./saxpycalculator":4,"./sclmpcalculator":5,"./sdwnscalculator":6,"./sgemmcalculator":7,"./slokncalculator":8,"./sscalcalculator":9,"./tensor":10}],4:[function(require,module,exports){
var WebGL = require('./webgl');

/* A calculator object for the Float texture based AXPY

	a times X plus Y (AXPY):

	Y = a * X + Y

	where X + Y is elementwise matrix addition


	webgl - a weblas.WebGL object
	standalone - whether or not to automatically run the floating point encode
		step for rendering to an UNSIGNED_BYTE texture (this is required for
		mobile, circa 2015) but can't be used as part of a pipeline.

	* uploads and downloads data
	* executes calculation
 */
function SAXPYCalculator(webgl, standalone){
	this.webgl = webgl,
	this.standalone = standalone || true; // default to standalone mode


	var s = "precision highp float;\n#define GLSLIFY 1\n\nvarying vec2      outTex;\t// texture coords of row/column to calculate\nuniform sampler2D X;\t\t// texture with data from padded A\nuniform sampler2D Y;\t\t// texture with data from padded transpose of B\nuniform int       N;\nuniform float     a; \t\t// coefficient to multiplication\n\n// Render float to bytes according to IEEE 754 Floating Point\nvec4 encode_float_1540259130(float val) {\n\n\t// TODO: correctly handle denormal numbers\n\t// http://www.2ality.com/2012/04/number-encoding.html\n\tfloat a = abs(val);                           // encode absolute value + sign\n\tfloat exp = floor(log2(a));                 // number of powers of 2\n\tfloat mant = pow(2.,log2(a)-exp) * pow(2.,23.);  // multiply to fill 24 bits (implied leading 1)\n\tfloat mant1 = floor(mant / 256. / 256.);    // first 8 bits of mantissa\n\tfloat mant2 = mod(floor(mant / 256.),256.); // second 8 bits\n\tfloat mant3 = mod(mant,256.);               // third 8 bits\n\n\thighp float sign = 128.-128.*(a/val);\t\t\t// sign bit is 256 or 0\n\thighp float e = (sign+exp+127.)/510.;\t\t// exponent and sign\n\thighp float m1 = (mant1-(128.*(1.-mod(exp+127.,2.))))/255.; // handle leading bit\n\thighp float m2 = (mant2)/255.;\t\t\t\t// middle part\n\thighp float m3 = (mant3+.5)/255.;\t\t\t// scale to 0 - 255\n\n\treturn vec4(m3,m2,m1,e);\n}\n\n// select an element from a vector based on index\nfloat select_index_1604150559(vec4 v, int index){\n\tfloat val;\n\tif (index == 0) {\n\t\tval = v.r;\n\t} else if(index == 1) {\n\t\tval = v.g;\n\t} else if(index == 2) {\n\t\tval = v.b;\n\t} else if(index == 3){\n\t\tval = v.a;\n\t} else {\n\t\t// should never be here\n\t\tval = 0.0;\n\t}\n\n\treturn val;\n}\n\nvoid main(void) {\n\n\t// get the implied row and column from .y and .x of passed (output)\n\t// texture coordinate. These map directly to input texture space when\n\t// the relevant dimensions are the same.\n \tfloat row = outTex.y;\n\tfloat col = outTex.x;\n\n\t// direct usage of col requires output be padded exactly like input\n\tvec4 x = texture2D( X, vec2(col, row));\n\tvec4 y = texture2D( Y, vec2(col, row));\n\tvec4 sum_v = (a * x) + y;\n\tint channel = int(mod(col * float(N), 4.0 ));\n\tfloat sum = select_index_1604150559(sum_v, channel);\n\n\tif (sum == 0.) {\n\t\tgl_FragColor = vec4(0.,0.,0.,0.);\n\t\treturn;\n\t}\n\n \t// output vec4 with bytes for an IEEE754 32-bit floating point number\n\tgl_FragColor = encode_float_1540259130(sum);\n}\n";
	//	p = glslify('./glsl/saxpy/pipeline.glsl');

	// create the webgl shader program for this calculation
	// based on the specific fragment shader for this calculation
	// and the generic pass through shader
	if(this.standalone){
		this.program = this.webgl.createProgram(s);
	} else {
		this.program = this.webgl.createProgram(p);
	}
}

module.exports = SAXPYCalculator;

/* Names of the uniforms (variables) used in the shader program passed in on
   each calculation.
 */
SAXPYCalculator.TEXTURE_UNIFORM_NAME_0 = "X";
SAXPYCalculator.TEXTURE_UNIFORM_NAME_1 = "Y";
SAXPYCalculator.LENGTH_UNIFORM_NAME = "N";
SAXPYCalculator.COEFFICIENT_UNIFORM_NAME = "a";


/* Calculate the AXPY, with the given data.

	N - number of elements in X and Y
	a - scalar coefficient to X
	X - left hand vector (texture)
	Y - right hand vector (texture)
	out - output (texture)

  How this works:

  1. Activate our shader program
  2. Bind input textures
  3. Set shader program parameters
  4. Bind output texture
  5. Activate calculation with `drawElements`

 */
SAXPYCalculator.prototype.calculate = function(N, a, X, Y, out){

	var gl = this.webgl.context;

	/*
	var h1 = M, w1 = K,
		h2 = K, w2 = N;
	*/

	this.webgl.selectProgram(this.program);

	// create and bind our input texture using matrix data
	this.bindInputTexture(X, gl.TEXTURE0, SAXPYCalculator.TEXTURE_UNIFORM_NAME_0);
	this.bindInputTexture(Y, gl.TEXTURE1, SAXPYCalculator.TEXTURE_UNIFORM_NAME_1);


	var pad = this.webgl.getPad(N);
	// set the data specific variables in our shader program
	this.bindUniforms(N + pad, a);

	// create our destination texture
	this.webgl.bindOutputTexture(1, N + pad, out);


	// initiate calculation
	gl.drawElements(gl.TRIANGLES, /*num items*/6, gl.UNSIGNED_SHORT, 0);

	this.webgl.unbindInputTexture(gl.TEXTURE0);
	this.webgl.unbindInputTexture(gl.TEXTURE1);

};

/* Create a texture from the given texel data and bind it to our shader program.

	h - number of rows in input matrix
	w - number of cols in input matrix
	texels - packed data
	textureUnit - the texture unit to bind to (gl.TEXTURE0, gl.TEXTURE1, etc)
	name - the uniform name to associate with (must match shader program)

	must compile program (with createProgram) first
*/
SAXPYCalculator.prototype.bindInputTexture = function(texture, textureUnit, name){
	var gl = this.webgl.context,
		program = this.program;

	gl.activeTexture(textureUnit); // gl.TEXTURE0, gl.TEXTURE1, etc
	gl.bindTexture(	  gl.TEXTURE_2D, texture);

	var sampler = gl.getUniformLocation(program, name);
	gl.uniform1i(sampler, textureUnit - gl.TEXTURE0);

};

/* Set up inputs for the texture shader

 */
SAXPYCalculator.prototype.bindUniforms = function(N, a) {
	var gl = this.webgl.context;

	// get var locations
	var N_gl = gl.getUniformLocation(this.program, SAXPYCalculator.LENGTH_UNIFORM_NAME),
		a_gl = gl.getUniformLocation(this.program, SAXPYCalculator.COEFFICIENT_UNIFORM_NAME);

	// bind length of shared dimension
	gl.uniform1i(N_gl, N);
	gl.uniform1f(a_gl, a);

};

},{"./webgl":12}],5:[function(require,module,exports){
var WebGL = require('./webgl');

/*  Elementwise clamp function for matrices on the interval [a, b]. Can also be
	used for min or max, by passing Number.MIN_VALUE for the first parameter and
	Number.MAX_VALUE for the second parameter, respectively.

	Passing `null` for either of these parameters will default to it's
	respective min or max value.

	max(a, min(b, x)) for each x in X

	where X is a matrix, a and b are scalars


	webgl - a weblas.WebGL object
	standalone - whether or not to automatically run the floating point encode
		step for rendering to an UNSIGNED_BYTE texture (this is required for
		mobile, circa 2015) but can't be used as part of a pipeline.

	* uploads and downloads data
	* executes calculation
 */
function SCLMPCalculator(webgl, standalone){
	this.webgl = webgl,
	this.standalone = (standalone != null) ? standalone : true; // default to standalone mode

	var s = "precision highp float;\n#define GLSLIFY 1\n\nvarying vec2      outTex;\t// texture coords of row/column to calculate\nuniform sampler2D X;\t\t// texture with data from padded A\nuniform int       N;\t\t// number of columns\nuniform int       pad;\t\t// additional columns to nearest multiple of four\nuniform float     a; \t\t// lower bound\nuniform float     b; \t\t// upper bound\n\n// Render float to bytes according to IEEE 754 Floating Point\nvec4 encode_float_1604150559(float val) {\n\n\t// TODO: correctly handle denormal numbers\n\t// http://www.2ality.com/2012/04/number-encoding.html\n\tfloat a = abs(val);                           // encode absolute value + sign\n\tfloat exp = floor(log2(a));                 // number of powers of 2\n\tfloat mant = pow(2.,log2(a)-exp) * pow(2.,23.);  // multiply to fill 24 bits (implied leading 1)\n\tfloat mant1 = floor(mant / 256. / 256.);    // first 8 bits of mantissa\n\tfloat mant2 = mod(floor(mant / 256.),256.); // second 8 bits\n\tfloat mant3 = mod(mant,256.);               // third 8 bits\n\n\thighp float sign = 128.-128.*(a/val);\t\t\t// sign bit is 256 or 0\n\thighp float e = (sign+exp+127.)/510.;\t\t// exponent and sign\n\thighp float m1 = (mant1-(128.*(1.-mod(exp+127.,2.))))/255.; // handle leading bit\n\thighp float m2 = (mant2)/255.;\t\t\t\t// middle part\n\thighp float m3 = (mant3+.5)/255.;\t\t\t// scale to 0 - 255\n\n\treturn vec4(m3,m2,m1,e);\n}\n\n// select an element from a vector based on index\nfloat select_index_1540259130(vec4 v, int index){\n\tfloat val;\n\tif (index == 0) {\n\t\tval = v.r;\n\t} else if(index == 1) {\n\t\tval = v.g;\n\t} else if(index == 2) {\n\t\tval = v.b;\n\t} else if(index == 3){\n\t\tval = v.a;\n\t} else {\n\t\t// should never be here\n\t\tval = 0.0;\n\t}\n\n\treturn val;\n}\n\nvoid main(void) {\n\n\t// get the implied row and column from .y and .x of passed (output)\n\t// texture coordinate. These map directly to input texture space when\n\t// the relevant dimensions are the same.\n\tfloat row = outTex.y;\n\tfloat col = outTex.x;\n\n\t// return 0.0 if in padded region of output texture\n\tif(col * float(N + pad) > float(N) ) {\n\t\tgl_FragColor = vec4(0.,0.,0.,0.);\n\t\treturn;\n\t}\n\n\t// direct usage of col requires output be padded exactly like input\n\tvec4 x = texture2D( X, vec2(col, row));\n\tvec4 val = clamp(x, a, b);\n\n\t// select and output channel (standalone version only)\n\tint channel = int(mod(col * float(N + pad), 4.0));\n\tfloat sum = select_index_1540259130(val, channel);\n\n\tif (sum == 0.) {\n\t\tgl_FragColor = vec4(0.,0.,0.,0.);\n\t\treturn;\n\t}\n\n\t// output vec4 with bytes for an IEEE754 32-bit floating point number\n\tgl_FragColor = encode_float_1604150559(sum);\n}\n",
		p = "precision highp float;\n#define GLSLIFY 1\n\nvarying vec2      outTex;\t// texture coords of row/column to calculate\nuniform sampler2D X;\t\t// texture with data from padded A\nuniform int       N;\t\t// number of columns\nuniform int       pad;\t\t// additional columns to nearest multiple of four\nuniform float     a; \t\t// lower bound\nuniform float     b; \t\t// upper bound\n\n// set pad values to 0.0, if in padded region of output texture\nvoid fix_pad_1540259130(inout vec4 v, int pad){\n\tv.a = 0.0;\n\tif(pad == 2){\n\t\tv.b = 0.0;\n\t} else if(pad == 3){\n\t\tv.b = 0.0;\n\t\tv.g = 0.0;\n\t}\n}\n\nvoid main(void) {\n\n\t// get the implied row and column from .y and .x of passed (output)\n\t// texture coordinate. These map directly to input texture space when\n\t// the relevant dimensions are the same.\n\tfloat row_t = outTex.y;\n\tfloat col_t = outTex.x;\n\tfloat col = (col_t * float(N + pad) - 2.0); // index of first element in pixel (matrix space)\n\n\t// direct usage of col requires output be padded exactly like input\n\tvec4 x = texture2D( X, vec2(col_t, row_t));\n\tvec4 val_v = clamp(x, a, b);\n\n\t// is last element in pixel past row length?\n\tif(pad > 0 && (col + 4.0) > float(N) ) {\n\t\t// fix elements in padded region\n\t\tfix_pad_1540259130(val_v, pad);\n\t}\n\n\tgl_FragColor = val_v;\n}\n";

	// create the webgl shader program for this calculation
	// based on the specific fragment shader for this calculation
	// and the generic pass through shader
	if(this.standalone){
		this.program = this.webgl.createProgram(s);
	} else {
		this.program = this.webgl.createProgram(p);
	}
}

module.exports = SCLMPCalculator;

/* Names of the uniforms (variables) used in the shader program passed in on
   each calculation.
 */
SCLMPCalculator.TEXTURE_UNIFORM_NAME_0 = "X";
SCLMPCalculator.LENGTH_UNIFORM_NAME = "N";
SCLMPCalculator.LOWER_UNIFORM_NAME = "a";
SCLMPCalculator.UPPER_UNIFORM_NAME = "b";


/* Elementwise clamp a matrix to the interval [a, b]

	M - number of rows in X
	N - number of columns in X
	a - lower bound (inclusize)
	b - upper bound (inclusive)
	X - matrix (texture)
	out - output (texture)

  How this works:

  1. Activate our shader program
  2. Bind input textures
  3. Set shader program parameters
  4. Bind output texture
  5. Activate calculation with `drawElements`

 */
SCLMPCalculator.prototype.calculate = function(M, N, a, b, X, out){

	a = (a != null) ? a : Number.MIN_VALUE;
	b = (b != null) ? b : Number.MAX_VALUE;

	var gl = this.webgl.context;

	this.webgl.selectProgram(this.program);

	// create and bind our input texture using matrix data
	this.bindInputTexture(X, gl.TEXTURE0, SCLMPCalculator.TEXTURE_UNIFORM_NAME_0);

	var nPad = this.webgl.getPad(N);
	// set the data specific variables in our shader program
	this.bindUniforms(N, nPad, a, b);

	// create our destination texture
	if(this.standalone){
		this.webgl.bindOutputTexture(M, N + nPad, out);
	} else {
		this.webgl.bindOutputTexture(M, (N + nPad)/ 4, out);
	}

	// initiate calculation
	gl.drawElements(gl.TRIANGLES, /*num items*/6, gl.UNSIGNED_SHORT, 0);

	this.webgl.unbindInputTexture(gl.TEXTURE0);

};

/* Create a texture from the given texel data and bind it to our shader program.

	h - number of rows in input matrix
	w - number of cols in input matrix
	texels - packed data
	textureUnit - the texture unit to bind to (gl.TEXTURE0, gl.TEXTURE1, etc)
	name - the uniform name to associate with (must match shader program)

	must compile program (with createProgram) first
*/
SCLMPCalculator.prototype.bindInputTexture = function(texture, textureUnit, name){
	var gl = this.webgl.context,
		program = this.program;

	gl.activeTexture(textureUnit); // gl.TEXTURE0, gl.TEXTURE1, etc
	gl.bindTexture(	  gl.TEXTURE_2D, texture);

	var sampler = gl.getUniformLocation(program, name);
	gl.uniform1i(sampler, textureUnit - gl.TEXTURE0);

};

/* Set up inputs for the texture shader

 */
SCLMPCalculator.prototype.bindUniforms = function(N, pad, a, b) {
	var gl = this.webgl.context;

	// get var locations
	var N_gl = gl.getUniformLocation(this.program, SCLMPCalculator.LENGTH_UNIFORM_NAME),
		b_gl = gl.getUniformLocation(this.program, SCLMPCalculator.UPPER_UNIFORM_NAME),
		a_gl = gl.getUniformLocation(this.program, SCLMPCalculator.LOWER_UNIFORM_NAME),
		pad_gl = gl.getUniformLocation(this.program, "pad");

	// bind length of shared dimension
	gl.uniform1i(N_gl, N);
	gl.uniform1i(pad_gl, pad);
	gl.uniform1f(a_gl, a);
	gl.uniform1f(b_gl, b);

};

},{"./webgl":12}],6:[function(require,module,exports){
var WebGL = require('./webgl');

/*  Downsample an image (useful in pooling layers).



	webgl - a weblas.WebGL object
	standalone - whether or not to automatically run the floating point encode
		step for rendering to an UNSIGNED_BYTE texture (this is required for
		mobile, circa 2015) but can't be used as part of a pipeline.

	* uploads and downloads data
	* executes calculation
 */
function DownsampleCalculator(webgl, standalone){
	this.webgl = webgl,
	this.standalone = (standalone != null) ? standalone : true; // default to standalone mode

	var s = "// TODO: unroll loop for stride == factor and small values (2, 3)\nprecision highp float;\n#define GLSLIFY 1\n\nvarying vec2      outTex;  // texture coords of row/column to calculate\nuniform sampler2D X;       // texture with data from padded A\nuniform int       factor;  // width of image patch\nuniform float     stride;  // width between image patches\nuniform float     C;       // number of channels\nuniform float     M;\nuniform float     N;\nuniform float     N_out;\nuniform float     M_out;\n\n// Render float to bytes according to IEEE 754 Floating Point\nvec4 encode_float_1540259130(float val) {\n\n\t// TODO: correctly handle denormal numbers\n\t// http://www.2ality.com/2012/04/number-encoding.html\n\tfloat a = abs(val);                           // encode absolute value + sign\n\tfloat exp = floor(log2(a));                 // number of powers of 2\n\tfloat mant = pow(2.,log2(a)-exp) * pow(2.,23.);  // multiply to fill 24 bits (implied leading 1)\n\tfloat mant1 = floor(mant / 256. / 256.);    // first 8 bits of mantissa\n\tfloat mant2 = mod(floor(mant / 256.),256.); // second 8 bits\n\tfloat mant3 = mod(mant,256.);               // third 8 bits\n\n\thighp float sign = 128.-128.*(a/val);\t\t\t// sign bit is 256 or 0\n\thighp float e = (sign+exp+127.)/510.;\t\t// exponent and sign\n\thighp float m1 = (mant1-(128.*(1.-mod(exp+127.,2.))))/255.; // handle leading bit\n\thighp float m2 = (mant2)/255.;\t\t\t\t// middle part\n\thighp float m3 = (mant3+.5)/255.;\t\t\t// scale to 0 - 255\n\n\treturn vec4(m3,m2,m1,e);\n}\n\n// select an element from a vector based on index\nfloat select_index_1604150559(vec4 v, int index){\n\tfloat val;\n\tif (index == 0) {\n\t\tval = v.r;\n\t} else if(index == 1) {\n\t\tval = v.g;\n\t} else if(index == 2) {\n\t\tval = v.b;\n\t} else if(index == 3){\n\t\tval = v.a;\n\t} else {\n\t\t// should never be here\n\t\tval = 0.0;\n\t}\n\n\treturn val;\n}\n\nvoid main(void) {\n\n\t// get the implied row and column from .y and .x of passed (output)\n\t// texture coordinate and translate to output pixel space.\n\tfloat row = floor(outTex.y * M_out);   // row on output texture (matrix space)\n\tfloat col = floor(outTex.x * N_out); // column on output texture (matrix space)\n\tfloat vcol = floor(col / C);   // virtual column on output texture (matrix space)\n\tfloat vchannel = floor(mod(col, C)); // virtual channel on output texture\n\n\tconst float min = -1.0e+08;\n\tvec4 currentMax = vec4(min, min, min, min);\n\n\tfloat deltaY = 1.0/M;\n\tfloat deltaX = 1.0/N;\n\tfloat y = ((row * stride) + 0.5)*deltaY; // texture position of input row\n\tfloat x;\n\tfloat z = vchannel * deltaX;\n\tfor (int i = 0; i < 100; i += 1) {\n\t\tif (i >= factor) {\n\t\t\tbreak;\n\t\t}\n\t\tx = ((vcol * stride * C) + 0.5) * deltaX; // texture position of input column\n\n\t\tfor (int j = 0; j < 100; j += 1) {\n\t\t\tif (j >= factor) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tvec2 coords = vec2(x + z, y);\n\t\t\tvec4 x_v = texture2D(X, coords);\n\t\t\tcurrentMax = max(currentMax, x_v);\n\n\t\t\tx += (deltaX * C);\n\t\t}\n\t\ty += deltaY;\n\t}\n\tint chan = int(mod(outTex.x * N_out, 4.0 ));\n\tfloat val = select_index_1604150559(currentMax, int(chan));\n\tif (val == 0.) {\n\t\tgl_FragColor = vec4(0.,0.,0.,0.);\n\t\treturn;\n\t}\n\n\tgl_FragColor = encode_float_1540259130(val);\n}\n";
		p = "// TODO: unroll loop for stride == factor and small values (2, 3)\nprecision highp float;\n#define GLSLIFY 1\n\nvarying vec2      outTex;  // texture coords of row/column to calculate\nuniform sampler2D X;       // texture with data from padded A\nuniform int       factor;  // width of image patch\nuniform float     stride;  // width between image patches\nuniform float     C;       // number of channels\nuniform float     M;\nuniform float     N;\nuniform float     N_out;\nuniform float     M_out;\n\nvoid main(void) {\n\n\t// get the implied row and column from .y and .x of passed (output)\n\t// texture coordinate and translate to output pixel space.\n\tfloat row = floor(outTex.y * M_out);   // row on output texture (pixel space)\n\tfloat col = floor(outTex.x * N_out); // column on output texture (matrix space)\n\tfloat vcol = floor(col / C);   // virtual column on output texture (matrix space)\n\tfloat vchannel = floor(mod(col, C)); // virtual channel on output texture\n\n\tconst float min = -1.0e+08;\n\tvec4 currentMax = vec4(min, min, min, min);\n\n\tfloat deltaY = 1.0/M;\n\tfloat deltaX = 1.0/N;\n\tfloat y = ((row * stride) + 0.5)*deltaY; // texture position of input row\n\tfloat x;\n\tfloat z = vchannel * deltaX;\n\tfor (int i = 0; i < 100; i += 1) {\n\t\tif (i >= factor) {\n\t\t\tbreak;\n\t\t}\n\t\tx = ((vcol * stride * C) + 0.5) * deltaX; // texture position of input column\n\n\t\tfor (int j = 0; j < 100; j += 1) {\n\t\t\tif (j >= factor) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tvec2 coords = vec2(x + z, y);\n\t\t\tvec4 x_v = texture2D(X, coords);\n\t\t\tcurrentMax = max(currentMax, x_v);\n\n\t\t\tx += (deltaX * C);\n\t\t}\n\t\ty += deltaY;\n\t}\n\n\tgl_FragColor = currentMax;\n}\n";

	// create the webgl shader program for this calculation
	// based on the specific fragment shader for this calculation
	// and the generic pass through shader
	if(this.standalone){
		this.program = this.webgl.createProgram(s);
	} else {
		this.program = this.webgl.createProgram(p);
	}
}

module.exports = DownsampleCalculator;

/* Names of the uniforms (variables) used in the shader program passed in on
   each calculation.
 */
DownsampleCalculator.TEXTURE_UNIFORM_NAME_0 = "X";
DownsampleCalculator.INPUT_ROW_COUNT_UNIFORM_NAME = "M";
DownsampleCalculator.INPUT_COLUMN_COUNT_UNIFORM_NAME = "N";
DownsampleCalculator.OUTPUT_ROW_COUNT_UNIFORM_NAME = "M_out";
DownsampleCalculator.OUTPUT_COLUMN_COUNT_UNIFORM_NAME = "N_out";
DownsampleCalculator.FACTOR_UNIFORM_NAME = "factor";
DownsampleCalculator.STRIDE_UNIFORM_NAME = "stride";
DownsampleCalculator.CHANNEL_COUNT_UNIFORM_NAME = "C";


/* Downsample (pool) the input using the maximum for each channel.

	M - rows in X
	N - columns in X
	c - (channels / 4) in X
	factor - the number of pixels (width and height) to combine
	stride - amount between groups of pixels
	X - input matrix (texture)
	out - output (texture)

  How this works:

  1. Activate our shader program
  2. Bind input textures
  3. Set shader program parameters
  4. Bind output texture
  5. Activate calculation with `drawElements`

 */
DownsampleCalculator.prototype.calculate = function(M, N, channels, factor, stride, X, out){

	if(channels % WebGL.COMPONENTS_PER_TEXEL != 0){
		throw new Error("Channel count must be a multiple of " + WebGL.COMPONENTS_PER_TEXEL);
	}
	var gl = this.webgl.context;

    var N_out = (Math.floor((N - factor) / stride) + 1) * channels;
    var M_out = Math.floor((M - factor) / stride) + 1;

	this.webgl.selectProgram(this.program);

	// create and bind our input texture using matrix data
	this.bindInputTexture(X, gl.TEXTURE0, DownsampleCalculator.TEXTURE_UNIFORM_NAME_0);


	// set the data specific variables in our shader program
	this.bindUniforms(M, N * channels, M_out, N_out, factor, stride, channels);

	// create our destination texture
	if(this.standalone){
		this.webgl.bindOutputTexture(M_out, N_out, out);
	} else {
		this.webgl.bindOutputTexture(M_out, N_out/WebGL.COMPONENTS_PER_TEXEL, out);
	}


	// initiate calculation
	gl.drawElements(gl.TRIANGLES, /*num items*/6, gl.UNSIGNED_SHORT, 0);

	this.webgl.unbindInputTexture(gl.TEXTURE0);

};

/* Create a texture from the given texel data and bind it to our shader program.

	texture - texture containing input values to bind
	textureUnit - the texture unit to bind to (gl.TEXTURE0, gl.TEXTURE1, etc)
	name - the uniform name to associate with (must match shader program)

	must compile program (with createProgram) first
*/
DownsampleCalculator.prototype.bindInputTexture = function(texture, textureUnit, name){
	var gl = this.webgl.context,
		program = this.program;

	gl.activeTexture(textureUnit); // gl.TEXTURE0, gl.TEXTURE1, etc
	gl.bindTexture(	  gl.TEXTURE_2D, texture);

	var sampler = gl.getUniformLocation(program, name);
	gl.uniform1i(sampler, textureUnit - gl.TEXTURE0);

};

/* Set up inputs for the texture shader

 */
DownsampleCalculator.prototype.bindUniforms = function(M, N, M_out, N_out, factor, stride, c) {
	var gl = this.webgl.context;

	// get var locations
	var M_gl = gl.getUniformLocation(this.program, DownsampleCalculator.INPUT_ROW_COUNT_UNIFORM_NAME),
		N_gl = gl.getUniformLocation(this.program, DownsampleCalculator.INPUT_COLUMN_COUNT_UNIFORM_NAME),
		M_out_gl = gl.getUniformLocation(this.program, DownsampleCalculator.OUTPUT_ROW_COUNT_UNIFORM_NAME),
		N_out_gl = gl.getUniformLocation(this.program, DownsampleCalculator.OUTPUT_COLUMN_COUNT_UNIFORM_NAME),
		factor_gl = gl.getUniformLocation(this.program, DownsampleCalculator.FACTOR_UNIFORM_NAME),
		stride_gl = gl.getUniformLocation(this.program, DownsampleCalculator.STRIDE_UNIFORM_NAME),
		channel_count_gl = gl.getUniformLocation(this.program, DownsampleCalculator.CHANNEL_COUNT_UNIFORM_NAME);

	// bind length of shared dimension
	gl.uniform1f(M_gl, M);
	gl.uniform1f(N_gl, N);
	gl.uniform1f(M_out_gl, M_out);
	gl.uniform1f(N_out_gl, N_out);
	gl.uniform1i(factor_gl, factor);
	gl.uniform1f(stride_gl, stride);
	gl.uniform1f(channel_count_gl, c);

};

},{"./webgl":12}],7:[function(require,module,exports){
var WebGL = require('./webgl');

/* A calculator object for the Float texture based GEMM

	Generalized Matrix Multiply (GEMM):

	C = alpha * A * B + beta * C

	where A * B is matrix multiplication


	webgl - a weblas.WebGL object
	standalone - whether or not to automatically run the floating point encode
		step for rendering to an UNSIGNED_BYTE texture (this is required for
		mobile, circa 2015) but can't be used as part of a pipeline.

	* uploads and downloads data
	* executes calculation
 */
function SGEMMCalculator(webgl, standalone){
	this.webgl = webgl,
	this.standalone = (standalone != null) ? standalone : true; // default to standalone mode

	// read GLSL files
	var s = "// fragment shader that calculates the matrix product and renders each\n// element to the bytes representing a 32-bit IEEE754 floating point in\n// the output RGBA canvas.\n// readPixel is used to read the bytes.\n\nprecision highp float;\n#define GLSLIFY 1\n\nvarying vec2      outTex;\t// texture coords of row/column to calculate\nuniform sampler2D A;\t\t// texture with data from padded A\nuniform sampler2D B_t;\t\t// texture with data from padded transpose of B\nuniform int       K;\t\t// number of elements in shared dimension\nuniform int       N;\t\t// number of columns in output\nuniform int       pad;\t\t//\nuniform float     alpha; \t// coefficient to multiplication\n\n// sum of products between elements in row i (from A) x col j (from B)\n\n// Calculate the dot product between the row (from A) and column (from B)\n// identified by the passed indeces (output texture coordinate space).\n// We loop over elements in the row and column and sum the product\n// using the glsl `dot` function to process four elements at a time.\n// This four element optimization requires that the matrix B be\n// transposed before texel packing and that both matrices be padded\n// (with zeros) to a multiple of four (4) in their shared dimension.\nfloat dot_rowcol_1540259130(float y, float x, sampler2D A, sampler2D B_t, int K) {\n\tfloat delta_t = 1./float(K);// space (on texture) between elements\n\tfloat sum = 0.;\t\t\t// sum for this row/column pair\n\tfloat z = 0.5 * (4.0 * delta_t);// position for shared dimension on source textures\n\n\tfor (int l=0 ; l<4096 ; ++l) {\n\t\tif(l >= K / 4) break;    // stop when we finish the row/column\n\t\t// l is in pixel space, so we divide by four\n\n\t\t// retrieve next four elements from each texture\n\t\tvec4 a_ik = texture2D(  A, vec2(z, y));\n\t\tvec4 b_kj = texture2D(B_t, vec2(z, x));\n\n\t// use `dot` to process four elements at a time\n\t\tsum +=  dot(a_ik, b_kj);\n\t\tz += (4.0 * delta_t);      // (z + 0.5)*delta\n\t}\n\treturn sum;\n}\n\n// Render float to bytes according to IEEE 754 Floating Point\nvec4 encode_float_1604150559(float val) {\n\n\t// TODO: correctly handle denormal numbers\n\t// http://www.2ality.com/2012/04/number-encoding.html\n\tfloat a = abs(val);                           // encode absolute value + sign\n\tfloat exp = floor(log2(a));                 // number of powers of 2\n\tfloat mant = pow(2.,log2(a)-exp) * pow(2.,23.);  // multiply to fill 24 bits (implied leading 1)\n\tfloat mant1 = floor(mant / 256. / 256.);    // first 8 bits of mantissa\n\tfloat mant2 = mod(floor(mant / 256.),256.); // second 8 bits\n\tfloat mant3 = mod(mant,256.);               // third 8 bits\n\n\thighp float sign = 128.-128.*(a/val);\t\t\t// sign bit is 256 or 0\n\thighp float e = (sign+exp+127.)/510.;\t\t// exponent and sign\n\thighp float m1 = (mant1-(128.*(1.-mod(exp+127.,2.))))/255.; // handle leading bit\n\thighp float m2 = (mant2)/255.;\t\t\t\t// middle part\n\thighp float m3 = (mant3+.5)/255.;\t\t\t// scale to 0 - 255\n\n\treturn vec4(m3,m2,m1,e);\n}\n\nvoid main(void) {\n\n\t// get the implied row and column from .y and .x of passed (output)\n\t// texture coordinate. These map directly to input texture space when\n\t// the relevant dimensions are the same.\n\tfloat row_t = outTex.y;\n\tfloat col_t = outTex.x;\n\n\t// sum row x col for the passed pixel\n\tfloat sum = alpha * dot_rowcol_1540259130(row_t, col_t * float(N + pad)/float(N), A, B_t, K);\n\n\tif (sum == 0.) {\n\t\tgl_FragColor = vec4(0.,0.,0.,0.);\n\t\treturn;\n\t}\n\n\t// output vec4 with bytes for an IEEE754 32-bit floating point number\n\tgl_FragColor = encode_float_1604150559(sum);\n}\n",
		s_c = "// fragment shader that calculates the matrix product (with additive 'C' term)\n// and renders each element to the bytes representing a 32-bit IEEE754 floating\n// point in the output RGBA canvas.\n// readPixel is used to read the bytes.\n\nprecision highp float;\n#define GLSLIFY 1\n\nvarying vec2      outTex;\t// texture coords of row/column to calculate\nuniform sampler2D A;\t\t// texture with data from padded A\nuniform sampler2D B_t;\t\t// texture with data from padded transpose of B\nuniform sampler2D C;\t\t// texture with data from C\nuniform int       K;\t\t// number of elements in shared dimension\nuniform int       N;\t\t// number of columns in output\nuniform int       pad;\t\t//\nuniform float     alpha; \t// coefficient to multiplication\nuniform float     beta; \t// coefficient to additive term\n\n// sum of products between elements in row i (from A) x col j (from B)\n\n// Calculate the dot product between the row (from A) and column (from B)\n// identified by the passed indeces (output texture coordinate space).\n// We loop over elements in the row and column and sum the product\n// using the glsl `dot` function to process four elements at a time.\n// This four element optimization requires that the matrix B be\n// transposed before texel packing and that both matrices be padded\n// (with zeros) to a multiple of four (4) in their shared dimension.\nfloat dot_rowcol_1540259130(float y, float x, sampler2D A, sampler2D B_t, int K) {\n\tfloat delta_t = 1./float(K);// space (on texture) between elements\n\tfloat sum = 0.;\t\t\t// sum for this row/column pair\n\tfloat z = 0.5 * (4.0 * delta_t);// position for shared dimension on source textures\n\n\tfor (int l=0 ; l<4096 ; ++l) {\n\t\tif(l >= K / 4) break;    // stop when we finish the row/column\n\t\t// l is in pixel space, so we divide by four\n\n\t\t// retrieve next four elements from each texture\n\t\tvec4 a_ik = texture2D(  A, vec2(z, y));\n\t\tvec4 b_kj = texture2D(B_t, vec2(z, x));\n\n\t// use `dot` to process four elements at a time\n\t\tsum +=  dot(a_ik, b_kj);\n\t\tz += (4.0 * delta_t);      // (z + 0.5)*delta\n\t}\n\treturn sum;\n}\n\n// Render float to bytes according to IEEE 754 Floating Point\nvec4 encode_float_1604150559(float val) {\n\n\t// TODO: correctly handle denormal numbers\n\t// http://www.2ality.com/2012/04/number-encoding.html\n\tfloat a = abs(val);                           // encode absolute value + sign\n\tfloat exp = floor(log2(a));                 // number of powers of 2\n\tfloat mant = pow(2.,log2(a)-exp) * pow(2.,23.);  // multiply to fill 24 bits (implied leading 1)\n\tfloat mant1 = floor(mant / 256. / 256.);    // first 8 bits of mantissa\n\tfloat mant2 = mod(floor(mant / 256.),256.); // second 8 bits\n\tfloat mant3 = mod(mant,256.);               // third 8 bits\n\n\thighp float sign = 128.-128.*(a/val);\t\t\t// sign bit is 256 or 0\n\thighp float e = (sign+exp+127.)/510.;\t\t// exponent and sign\n\thighp float m1 = (mant1-(128.*(1.-mod(exp+127.,2.))))/255.; // handle leading bit\n\thighp float m2 = (mant2)/255.;\t\t\t\t// middle part\n\thighp float m3 = (mant3+.5)/255.;\t\t\t// scale to 0 - 255\n\n\treturn vec4(m3,m2,m1,e);\n}\n\n// select an element from a vector based on index\nfloat select_index_1117569599(vec4 v, int index){\n\tfloat val;\n\tif (index == 0) {\n\t\tval = v.r;\n\t} else if(index == 1) {\n\t\tval = v.g;\n\t} else if(index == 2) {\n\t\tval = v.b;\n\t} else if(index == 3){\n\t\tval = v.a;\n\t} else {\n\t\t// should never be here\n\t\tval = 0.0;\n\t}\n\n\treturn val;\n}\n\nvoid main(void) {\n\n\t// get the implied row and column from .y and .x of passed (output)\n\t// texture coordinate. These map directly to input texture space when\n\t// the relevant dimensions are the same.\n\tfloat row_t = outTex.y;\n\tfloat col_t = outTex.x;\n\tvec4 c_vec = texture2D(C, vec2(col_t, 0.5));\n\n\t// should be -0.5, but that subtly breaks at zero\n\tfloat col = col_t * float(N + pad); // index of first element in pixel (matrix space)\n\tint channel = int(mod(col, 4.0 ));\n\tfloat c = select_index_1117569599(c_vec, channel);\n\n\t// sum row x col for the passed pixel\n\tfloat sum = alpha * dot_rowcol_1540259130(row_t, col_t * float(N + pad)/float(N), A, B_t, K);\n\tsum += beta * c;\n\n\tif (sum == 0.) {\n\t\tgl_FragColor = vec4(0.,0.,0.,0.);\n\t\treturn;\n\t}\n\n\t// output vec4 with bytes for an IEEE754 32-bit floating point number\n\tgl_FragColor = encode_float_1604150559(sum);\n}\n",
		p = "// fragment shader that calculates the matrix product and writes each\n// element to a pixel component in a floating point texture.\n// the output RGBA canvas.\n// readPixel is used to read the bytes.\n\nprecision highp float;\n#define GLSLIFY 1\n\nvarying vec2      outTex;\t// texture coords of row/column to calculate\nuniform sampler2D A;\t\t// texture with data from padded A\nuniform sampler2D B_t;\t\t// texture with data from padded transpose of B\nuniform int       K;\t\t// number of elements in shared dimension\nuniform int       N;\t\t// number of columns in output\nuniform int       pad;\t\t//\nuniform float     alpha; \t// coefficient to multiplication\n\n// sum of products between elements in row i (from A) x col j (from B)\n\n// Calculate the dot product between the row (from A) and column (from B)\n// identified by the passed indeces (output texture coordinate space).\n// We loop over elements in the row and column and sum the product\n// using the glsl `dot` function to process four elements at a time.\n// This four element optimization requires that the matrix B be\n// transposed before texel packing and that both matrices be padded\n// (with zeros) to a multiple of four (4) in their shared dimension.\nfloat dot_rowcol_1540259130(float y, float x, sampler2D A, sampler2D B_t, int K) {\n\tfloat delta_t = 1./float(K);// space (on texture) between elements\n\tfloat sum = 0.;\t\t\t// sum for this row/column pair\n\tfloat z = 0.5 * (4.0 * delta_t);// position for shared dimension on source textures\n\n\tfor (int l=0 ; l<4096 ; ++l) {\n\t\tif(l >= K / 4) break;    // stop when we finish the row/column\n\t\t// l is in pixel space, so we divide by four\n\n\t\t// retrieve next four elements from each texture\n\t\tvec4 a_ik = texture2D(  A, vec2(z, y));\n\t\tvec4 b_kj = texture2D(B_t, vec2(z, x));\n\n\t// use `dot` to process four elements at a time\n\t\tsum +=  dot(a_ik, b_kj);\n\t\tz += (4.0 * delta_t);      // (z + 0.5)*delta\n\t}\n\treturn sum;\n}\n\nvoid main(void) {\n\n\t// get the implied row and column from .y and .x of passed (output)\n\t// texture coordinate. These map directly to input texture space when\n\t// the relevant dimensions are the same.\n\tfloat row_t = outTex.y;\n\tfloat col_t = outTex.x;\n\n\tvec4 sum_v = vec4(0.0, 0.0, 0.0, 0.0);\n\tfloat col = (col_t * float(N + pad) - 2.0); // index of first element in pixel (matrix space)\n\tsum_v.r = alpha * dot_rowcol_1540259130(row_t, (col + 0.5)/float(N), A, B_t, K);\n\t// is last element in pixel past row length?\n\tif(pad > 0 && (col + 4.0) > float(N) ) {\n\t\t// compute elements in padded region\n\t\tif(pad < 3){\n\t\t\tsum_v.g = alpha * dot_rowcol_1540259130(row_t, (col + 1.5)/float(N), A, B_t, K);\n\t\t}\n\t\tif(pad < 2){\n\t\t\tsum_v.b = alpha * dot_rowcol_1540259130(row_t, (col + 2.5)/float(N), A, B_t, K);\n\t\t}\n\t} else {\n\t\tsum_v.g = alpha * dot_rowcol_1540259130(row_t, (col + 1.5)/float(N), A, B_t, K);\n\t\tsum_v.b = alpha * dot_rowcol_1540259130(row_t, (col + 2.5)/float(N), A, B_t, K);\n\t\tsum_v.a = alpha * dot_rowcol_1540259130(row_t, (col + 3.5)/float(N), A, B_t, K);\n\t}\n\n\tgl_FragColor = sum_v;\n}\n",
		p_c = "// fragment shader that calculates the matrix product and writes each\n// element to a pixel component in a floating point texture.\n// the output RGBA canvas.\n// readPixel is used to read the bytes.\n\nprecision highp float;\n#define GLSLIFY 1\n\nvarying vec2      outTex;\t// texture coords of row/column to calculate\nuniform sampler2D A;\t\t// texture with data from padded A\nuniform sampler2D B_t;\t\t// texture with data from padded transpose of B\nuniform sampler2D C;\t\t// texture with data from C\nuniform int       K;\t\t// number of elements in shared dimension\nuniform int       N;\t\t// number of columns in output\nuniform int       pad;\t\t//\nuniform float     alpha; \t// coefficient to multiplication\nuniform float     beta; \t// coefficient to addition\n\n// sum of products between elements in row i (from A) x col j (from B)\n\n// Calculate the dot product between the row (from A) and column (from B)\n// identified by the passed indeces (output texture coordinate space).\n// We loop over elements in the row and column and sum the product\n// using the glsl `dot` function to process four elements at a time.\n// This four element optimization requires that the matrix B be\n// transposed before texel packing and that both matrices be padded\n// (with zeros) to a multiple of four (4) in their shared dimension.\nfloat dot_rowcol_1540259130(float y, float x, sampler2D A, sampler2D B_t, int K) {\n\tfloat delta_t = 1./float(K);// space (on texture) between elements\n\tfloat sum = 0.;\t\t\t// sum for this row/column pair\n\tfloat z = 0.5 * (4.0 * delta_t);// position for shared dimension on source textures\n\n\tfor (int l=0 ; l<4096 ; ++l) {\n\t\tif(l >= K / 4) break;    // stop when we finish the row/column\n\t\t// l is in pixel space, so we divide by four\n\n\t\t// retrieve next four elements from each texture\n\t\tvec4 a_ik = texture2D(  A, vec2(z, y));\n\t\tvec4 b_kj = texture2D(B_t, vec2(z, x));\n\n\t// use `dot` to process four elements at a time\n\t\tsum +=  dot(a_ik, b_kj);\n\t\tz += (4.0 * delta_t);      // (z + 0.5)*delta\n\t}\n\treturn sum;\n}\n\nvoid main(void) {\n\n\t// get the implied row and column from .y and .x of passed (output)\n\t// texture coordinate. These map directly to input texture space when\n\t// the relevant dimensions are the same.\n\tfloat row_t = outTex.y;\n\tfloat col_t = outTex.x;\n\tvec4 c_v = texture2D(C, vec2(col_t, 0.5));\n\n\tvec4 sum_v = vec4(0.0, 0.0, 0.0, 0.0);\n\tfloat col = (col_t * float(N + pad) - 2.0); // index of first element in pixel (matrix space)\n\tsum_v.r = alpha * dot_rowcol_1540259130(row_t, (col + 0.5)/float(N), A, B_t, K);\n\t// in the padding region?\n\tif(pad > 0 && (col + 4.0) > float(N) ) {\n\t\t// pad\n\t\tif(pad < 3){\n\t\t\tsum_v.g = alpha * dot_rowcol_1540259130(row_t, (col + 1.5)/float(N), A, B_t, K);\n\t\t}\n\t\tif(pad < 2){\n\t\t\tsum_v.b = alpha * dot_rowcol_1540259130(row_t, (col + 2.5)/float(N), A, B_t, K);\n\t\t}\n\t} else {\n\t\tsum_v.g = alpha * dot_rowcol_1540259130(row_t, (col + 1.5)/float(N), A, B_t, K);\n\t\tsum_v.b = alpha * dot_rowcol_1540259130(row_t, (col + 2.5)/float(N), A, B_t, K);\n\t\tsum_v.a = alpha * dot_rowcol_1540259130(row_t, (col + 3.5)/float(N), A, B_t, K);\n\t}\n\n\tgl_FragColor = sum_v + beta*c_v;\n}\n";

	// create the webgl shader program for this calculation
	// based on the specific fragment shader for this calculation
	// and the generic pass through shader
	if(this.standalone){
		this.program_ = this.webgl.createProgram(s);
		this.program_c = this.webgl.createProgram(s_c);
	} else {
		this.program_ = this.webgl.createProgram(p);
		this.program_c = this.webgl.createProgram(p_c);
	}

}

module.exports = SGEMMCalculator;

/* Names of the uniforms (variables) used in the shader program passed in on
   each calculation.
 */
SGEMMCalculator.TEXTURE_UNIFORM_NAME_0 = "A";
SGEMMCalculator.TEXTURE_UNIFORM_NAME_1 = "B_t";
SGEMMCalculator.TEXTURE_UNIFORM_NAME_2 = "C";
SGEMMCalculator.SHARED_LENGTH_UNIFORM_NAME = "K";
SGEMMCalculator.COLUMN_COUNT_UNIFORM_NAME = "N";
SGEMMCalculator.PAD_UNIFORM_NAME = "pad";
SGEMMCalculator.ALPHA_UNIFORM_NAME = "alpha";
SGEMMCalculator.BETA_UNIFORM_NAME = "beta";

/* Calculate the GEMM, with the given data.

	M - number of rows in A
	N - number of columns in B
	K - number of elements in shared dimension (including padding)
	alpha - scalar for A
	A - left hand matrix (as padded texture)
	B - transpose of right hand matrix (as padded texture)
	beta - scalar for C
	C - additive matrix (texture)
	out - output (texture)

  How this works:

  1. Activate our shader program
  2. Bind input textures
  3. Set shader program parameters
  4. Bind output texture
  5. Activate calculation with `drawElements`

 TODO: signature should look like this:
 ( TRANSA, TRANSB, M, N, K, ALPHA, A, LDA, B, LDB, BETA, C, LDC )
 http://www.math.utah.edu/software/lapack/lapack-blas/dgemm.html
 */
SGEMMCalculator.prototype.calculate = function(M, N, K, alpha, A, B, beta, C, out){

	var gl = this.webgl.context;

	/*
	var h1 = M, w1 = K,
		h2 = K, w2 = N;
	*/

	// set this calculator program as the active program
	if(C != null){
		this.program = this.program_c;
	} else {
		beta = null;
		this.program = this.program_;
		//console.log("no C");
	}
	this.webgl.selectProgram(this.program);

	//  bind our input textures containing matrix data
	this.bindInputTexture(A, gl.TEXTURE0, SGEMMCalculator.TEXTURE_UNIFORM_NAME_0);
	this.bindInputTexture(B, gl.TEXTURE1, SGEMMCalculator.TEXTURE_UNIFORM_NAME_1);
	if(C != null){
		this.bindInputTexture(C, gl.TEXTURE2, SGEMMCalculator.TEXTURE_UNIFORM_NAME_2);
	}

	var kPad = this.webgl.getPad(K),
		nPad = this.webgl.getPad(N);

	// set the data specific variables in our shader program
	this.bindUniforms(N, K + kPad, nPad, alpha, beta);

	// create our destination texture
	if(this.standalone){
		this.webgl.bindOutputTexture(M, N + nPad, out);
	} else {
		this.webgl.bindOutputTexture(M, (N + nPad)/ 4, out);
	}

	// initiate calculation
	gl.drawElements(gl.TRIANGLES, /*num items*/6, gl.UNSIGNED_SHORT, 0);

	this.webgl.unbindInputTexture(gl.TEXTURE0);
	this.webgl.unbindInputTexture(gl.TEXTURE1);
	this.webgl.unbindInputTexture(gl.TEXTURE2);

	// result can now be read with gl.readResult, or more operations can be
	// performed on destination texture (in pipeline mode)
};


/* Create a texture from the given texel data and bind it to our shader program.

	h - number of rows in input matrix
	w - number of cols in input matrix
	texels - packed data
	textureUnit - the texture unit to bind to (gl.TEXTURE0, gl.TEXTURE1, etc)
	name - the uniform name to associate with (must match shader program)

	must compile program (with createProgram) first
*/
SGEMMCalculator.prototype.bindInputTexture = function(texture, textureUnit, name){
	var gl = this.webgl.context,
		program = this.program;

	gl.activeTexture(textureUnit); // gl.TEXTURE0, gl.TEXTURE1, etc
	gl.bindTexture(	  gl.TEXTURE_2D, texture);

	var sampler = gl.getUniformLocation(program, name);
	gl.uniform1i(sampler, textureUnit - gl.TEXTURE0);

};


/* Set up inputs for the texture shader

	K - size of shared dimension for multiplied matrices
 */
SGEMMCalculator.prototype.bindUniforms = function(N, K, pad, alpha, beta) {
	var gl = this.webgl.context;

	// get var locations
	var K_gl	 = gl.getUniformLocation(this.program, SGEMMCalculator.SHARED_LENGTH_UNIFORM_NAME),
		alpha_gl = gl.getUniformLocation(this.program, SGEMMCalculator.ALPHA_UNIFORM_NAME),
		beta_gl = gl.getUniformLocation(this.program, SGEMMCalculator.BETA_UNIFORM_NAME),
		N_gl = gl.getUniformLocation(this.program, SGEMMCalculator.COLUMN_COUNT_UNIFORM_NAME),
		pad_gl = pad_gl = gl.getUniformLocation(this.program, SGEMMCalculator.PAD_UNIFORM_NAME);

	gl.uniform1f(beta_gl, beta);
	gl.uniform1i(N_gl, N);
	gl.uniform1i(pad_gl, pad);

	// bind length of shared dimension
	gl.uniform1i(K_gl, K);
	// bind alpha
	gl.uniform1f(alpha_gl, alpha);

};

},{"./webgl":12}],8:[function(require,module,exports){
var WebGL = require('./webgl');

/*  Linearize onto Kernels, a transformation similar to im2col, which
	transforms the input to a convolution kernel into a row.

	X - input data
	k - kernal width
	stride - number of elements between beginnings of patches


	webgl - a weblas.WebGL object
	standalone - whether or not to automatically run the floating point encode
		step for rendering to an UNSIGNED_BYTE texture (this is required for
		mobile, circa 2015) but can't be used as part of a pipeline.

	* uploads and downloads data
	* executes calculation
 */
function SLOKNCalculator(webgl, standalone){
	this.webgl = webgl,
	this.standalone = (standalone != null) ? standalone : true; // default to standalone mode

	var p = "precision highp float;\n#define GLSLIFY 1\n\nvarying vec2      outTex;  // texture coords of row/column to calculate\nuniform sampler2D X;       // texture with data from padded A\nuniform float     factor;  // width of image patch\nuniform float     stride;  // width between image patches\nuniform float     margin;\nuniform float     N_p;     // patches across\nuniform float     M;\nuniform float     N;\nuniform float     pad;\nuniform float     M_in;\nuniform float     N_in;\nuniform float     C;       // number of channels in input\nuniform float     pad_in;\n\n// select an element from a vector based on index\nfloat select_index_1540259130(vec4 v, int index){\n\tfloat val;\n\tif (index == 0) {\n\t\tval = v.r;\n\t} else if(index == 1) {\n\t\tval = v.g;\n\t} else if(index == 2) {\n\t\tval = v.b;\n\t} else if(index == 3){\n\t\tval = v.a;\n\t} else {\n\t\t// should never be here\n\t\tval = 0.0;\n\t}\n\n\treturn val;\n}\n\n// translate a linear index into x, y coordinates for a matrix\nvec2 linear_index_coords_1604150559(float linear_index, float row_length){\n\tvec2 coords;\n\n\tcoords.x = floor(mod(linear_index + 0.5, row_length)); // column\n\tcoords.y = floor((linear_index + 0.5) / row_length); // row\n\n\treturn coords;\n}\n\n// set pad values to 0.0, if in padded region of output texture\nvoid fix_pad_1117569599(inout vec4 v, int pad){\n\tv.a = 0.0;\n\tif(pad == 2){\n\t\tv.b = 0.0;\n\t} else if(pad == 3){\n\t\tv.b = 0.0;\n\t\tv.g = 0.0;\n\t}\n}\n\nvoid main(void) {\n\n\t// get the implied row and column from .y and .x of passed (output)\n\t// texture coordinate\n\tfloat row_t = outTex.y;\n\tfloat col_t = outTex.x;\n\n\t// row corresponds to patch\n\tfloat row = floor(row_t * M) + 0.5;\n\t// column corresponds to placement in patch\n\tfloat col_0 = floor(col_t * (N + pad) - 1.5); // index of first element in output pixel (matrix space)\n\n\t// N_p = patches across\n\tfloat col_patch = floor(mod(row, N_p)); // column index in grid of patches\n\tfloat row_patch = floor(row / N_p); // row index in grid of patches\n\tfloat col_in_0 = (col_patch * stride - margin) * C; // input column index of left element in patch\n\tfloat row_in_0 = row_patch * stride - margin; // input row index of top element in patch\n\n\tvec4 pixel_in;\n\tvec4 result = vec4(0.0, 0.0, 0.0, 0.0);\n\tvec2 coords = linear_index_coords_1604150559(col_0, factor * C); // coords inside patch\n\tvec2 ncoords;\n\tint channel_in = int(mod(col_in_0 + coords.x, 4.0));\n\tvec2 scale_in = vec2(1.0/(N_in + pad_in), 1.0/M_in); // scale from matrix to input texture coords\n\tvec2 offset_in = vec2(col_in_0 + 2.0 - float(channel_in), row_in_0 + 0.5); // offset into patch (and pixel)\n\n\tconst vec2 pixel_scale = vec2(1.0/4.0, 1.0); // scale from matrix to pixel coords\n\n\tpixel_in = texture2D(X, (coords + offset_in) * scale_in);\n\n\t// go through channels for current output pixel\n\tfor(int channel = 0; channel < 4; channel++){\n\n\t\t// are we on a new input pixel?\n\t\tncoords = linear_index_coords_1604150559(col_0 + float(channel), factor * C);\n\n\t\t// are we in the margin or outside the input texture?\n\t\tif((col_in_0 + ncoords.x + 0.5 < 0.0) || (row_in_0 + ncoords.y + 0.5 < 0.0) ||\n\t\t   (col_in_0 + ncoords.x + 0.5) > (N_in) || row_in_0 + ncoords.y + 0.5 > M_in){\n\t\t\t// yes, create a virtual pixel\n\t\t\tpixel_in = vec4(0.0, 0.0, 0.0, 0.0);\n\t\t} else if(floor(ncoords * pixel_scale) != floor(coords * pixel_scale)){\n\t\t\t// no, get the get the next real pixel\n\t\t\tcoords = ncoords;\n\t\t\toffset_in.x += float(channel_in);\n\t\t\tchannel_in = 0;\n\t\t\tpixel_in = texture2D(X, (coords + offset_in) * scale_in);\n\t\t}\n\n\t\tif(channel == 0){\n\t\t\tresult.r = select_index_1540259130(pixel_in, channel_in);\n\t\t} else if(channel == 1){\n\t\t\tresult.g = select_index_1540259130(pixel_in, channel_in);\n\t\t} else if(channel == 2){\n\t\t\tresult.b = select_index_1540259130(pixel_in, channel_in);\n\t\t} else {\n\t\t\tresult.a = select_index_1540259130(pixel_in, channel_in);\n\t\t}\n\n\t\tchannel_in++;\n\t\toffset_in.x -= 1.0;\n\t}\n\n\t// fix padded region\n\tif(pad > 0.0 && col_0 + 4.0 > N ) {\n\t\tfix_pad_1117569599(result, int(pad));\n\t}\n\n\t//gl_FragColor = vec4(row_in_0, col_in_0, channel_in, N_p);\n\tgl_FragColor = result;\n}\n";

	// create the webgl shader program for this calculation
	// based on the specific fragment shader for this calculation
	// and the generic pass through shader
	if(this.standalone){
		this.program = this.webgl.createProgram(s);
	} else {
		this.program = this.webgl.createProgram(p);
	}
}

module.exports = SLOKNCalculator;

/* Names of the uniforms (variables) used in the shader program passed in on
   each calculation.
 */
SLOKNCalculator.TEXTURE_UNIFORM_NAME_0 = "X";
SLOKNCalculator.STRIDE_UNIFORM_NAME = "stride";
SLOKNCalculator.KERNEL_WIDTH_UNIFORM_NAME = "factor";

/* Elementwise scale and offset a matrix

	M - number of rows in X
	N - number of columns in X
	a - scalar coefficient to X
	b - scalar offset of X
	X - matrix (texture)
	out - output (texture)

  How this works:

  1. Activate our shader program
  2. Bind input textures
  3. Set shader program parameters
  4. Bind output texture
  5. Activate calculation with `drawElements`

 */
SLOKNCalculator.prototype.calculate = function(M, N, channels, M_out, N_out, N_p, factor, stride, margin, X, out){

	var gl = this.webgl.context;

	var pad = this.webgl.getPad(N * channels),
		pad_out = this.webgl.getPad(N_out);

	this.webgl.selectProgram(this.program);

	// create and bind our input texture using matrix data
	this.bindInputTexture(X, gl.TEXTURE0, SLOKNCalculator.TEXTURE_UNIFORM_NAME_0);

	// set the data specific variables in our shader program
	this.bindUniforms(M_out, N_out, pad_out, M, N * channels, channels, pad, N_p, factor, stride, margin);

	// create our destination texture
	if(this.standalone){
		this.webgl.bindOutputTexture(M_out, N_out + pad_out, out);
	} else {
		this.webgl.bindOutputTexture(M_out, (N_out + pad_out)/ 4, out);
	}


	// initiate calculation
	gl.drawElements(gl.TRIANGLES, /*num items*/6, gl.UNSIGNED_SHORT, 0);

	this.webgl.unbindInputTexture(gl.TEXTURE0);

};

/* Create a texture from the given texel data and bind it to our shader program.

	texture - texture containing the data
	textureUnit - the texture unit to bind to (gl.TEXTURE0, gl.TEXTURE1, etc)
	name - the uniform name to associate with (must match shader program)

	must compile program (with createProgram) first
*/
SLOKNCalculator.prototype.bindInputTexture = function(texture, textureUnit, name){
	var gl = this.webgl.context,
		program = this.program;

	gl.activeTexture(textureUnit); // gl.TEXTURE0, gl.TEXTURE1, etc
	gl.bindTexture(	  gl.TEXTURE_2D, texture);

	var sampler = gl.getUniformLocation(program, name);
	gl.uniform1i(sampler, textureUnit - gl.TEXTURE0);

};

/* Set up inputs for the texture shader

 */
SLOKNCalculator.prototype.bindUniforms = function(M, N, pad, M_in, N_in, channels, pad_in, N_p, factor, stride, margin) {
	var gl = this.webgl.context;

	// get var locations
	var M_gl = gl.getUniformLocation(this.program, "M"),
		N_gl = gl.getUniformLocation(this.program, "N"),
		c_gl = gl.getUniformLocation(this.program, "C"),
		M_in_gl = gl.getUniformLocation(this.program, "M_in"),
		N_in_gl = gl.getUniformLocation(this.program, "N_in"),
		stride_gl = gl.getUniformLocation(this.program, SLOKNCalculator.STRIDE_UNIFORM_NAME),
		factor_gl = gl.getUniformLocation(this.program, SLOKNCalculator.KERNEL_WIDTH_UNIFORM_NAME),
		pad_gl = gl.getUniformLocation(this.program, "pad"),
		pad_in_gl = gl.getUniformLocation(this.program, "pad_in"),
		N_p_gl = gl.getUniformLocation(this.program, "N_p");
		margin_gl = gl.getUniformLocation(this.program, "margin");

	// bind length of shared dimension
	gl.uniform1f(M_gl, M);
	gl.uniform1f(N_gl, N);
	gl.uniform1f(pad_gl, pad);
	gl.uniform1f(M_in_gl, M_in);
	gl.uniform1f(N_in_gl, N_in);
	gl.uniform1f(c_gl, channels);
	gl.uniform1f(pad_in_gl, pad_in);
	gl.uniform1f(N_p_gl, N_p);
	gl.uniform1f(factor_gl, factor);
	gl.uniform1f(stride_gl, stride);
	gl.uniform1f(margin_gl, margin);

};

},{"./webgl":12}],9:[function(require,module,exports){
var WebGL = require('./webgl');

/*  a more general version of the BLAS Level 1 scale that works on matrices
    and includes an elementwise scalar addition

    a * X + b

	where X is a matrix, a and b are scalars and operations are elementwise

    to get the standard BLAS scal set M = 1 and b = 0


	webgl - a weblas.WebGL object
	standalone - whether or not to automatically run the floating point encode
		step for rendering to an UNSIGNED_BYTE texture (this is required for
		mobile, circa 2015) but can't be used as part of a pipeline.

	* uploads and downloads data
	* executes calculation
 */
function SSCALCalculator(webgl, standalone){
	this.webgl = webgl,
	this.standalone = (standalone != null) ? standalone : true; // default to standalone mode

	var s = "precision highp float;\n#define GLSLIFY 1\n\nvarying vec2      outTex;\t// texture coords of row/column to calculate\nuniform sampler2D X;\t\t// texture with data from padded X\nuniform int       N;\t\t// number of columns\nuniform int       pad;\t\t// additional columns to nearest multiple of four\nuniform float     b; \t\t// additive term\nuniform float     a; \t\t// multiplicative term\n\n// Render float to bytes according to IEEE 754 Floating Point\nvec4 encode_float_1540259130(float val) {\n\n\t// TODO: correctly handle denormal numbers\n\t// http://www.2ality.com/2012/04/number-encoding.html\n\tfloat a = abs(val);                           // encode absolute value + sign\n\tfloat exp = floor(log2(a));                 // number of powers of 2\n\tfloat mant = pow(2.,log2(a)-exp) * pow(2.,23.);  // multiply to fill 24 bits (implied leading 1)\n\tfloat mant1 = floor(mant / 256. / 256.);    // first 8 bits of mantissa\n\tfloat mant2 = mod(floor(mant / 256.),256.); // second 8 bits\n\tfloat mant3 = mod(mant,256.);               // third 8 bits\n\n\thighp float sign = 128.-128.*(a/val);\t\t\t// sign bit is 256 or 0\n\thighp float e = (sign+exp+127.)/510.;\t\t// exponent and sign\n\thighp float m1 = (mant1-(128.*(1.-mod(exp+127.,2.))))/255.; // handle leading bit\n\thighp float m2 = (mant2)/255.;\t\t\t\t// middle part\n\thighp float m3 = (mant3+.5)/255.;\t\t\t// scale to 0 - 255\n\n\treturn vec4(m3,m2,m1,e);\n}\n\n// select an element from a vector based on index\nfloat select_index_1604150559(vec4 v, int index){\n\tfloat val;\n\tif (index == 0) {\n\t\tval = v.r;\n\t} else if(index == 1) {\n\t\tval = v.g;\n\t} else if(index == 2) {\n\t\tval = v.b;\n\t} else if(index == 3){\n\t\tval = v.a;\n\t} else {\n\t\t// should never be here\n\t\tval = 0.0;\n\t}\n\n\treturn val;\n}\n\nvoid main(void) {\n\n\t// get the implied row and column from .y and .x of passed (output)\n\t// texture coordinate. These map directly to input texture space when\n\t// the relevant dimensions are the same.\n \tfloat row = outTex.y;\n\tfloat col = outTex.x;\n\n\t// direct usage of col requires output be padded exactly like input\n\tvec4 x = texture2D( X, vec2(col, row));\n\tvec4 sum_v = (a * x) + b;\n\tint channel = int(mod(col * float(N + pad), 4.0 ));\n\tfloat sum = select_index_1604150559(sum_v, channel);\n\n\tif (sum == 0.) {\n\t\tgl_FragColor = vec4(0.,0.,0.,0.);\n\t\treturn;\n\t}\n\n \t// output vec4 with bytes for an IEEE754 32-bit floating point number\n\tgl_FragColor = encode_float_1540259130(sum);\n}\n",
		p = "precision highp float;\n#define GLSLIFY 1\n\nvarying vec2      outTex;\t// texture coords of row/column to calculate\nuniform sampler2D X;\t\t// texture with data from padded X\nuniform int       N;\t\t// number of columns\nuniform int       pad;\t\t// additional columns to nearest multiple of four\nuniform float     b; \t\t// additive term\nuniform float     a; \t\t// multiplicative term\n\n// set pad values to 0.0, if in padded region of output texture\nvoid fix_pad_1540259130(inout vec4 v, int pad){\n\tv.a = 0.0;\n\tif(pad == 2){\n\t\tv.b = 0.0;\n\t} else if(pad == 3){\n\t\tv.b = 0.0;\n\t\tv.g = 0.0;\n\t}\n}\n\nvoid main(void) {\n\n\t// get the implied row and column from .y and .x of passed (output)\n\t// texture coordinate. These map directly to input texture space when\n\t// the relevant dimensions are the same.\n\tfloat row_t = outTex.y;\n\tfloat col_t = outTex.x;\n\tfloat col = (col_t * float(N + pad) - 2.0); // index of first element in pixel (matrix space)\n\n\t// direct usage of col requires output be padded exactly like input\n\tvec4 x = texture2D( X, vec2(col_t, row_t));\n\tvec4 sum_v = (a * x) + b;\n\n\t// fix padded region\n\tif(pad > 0 && col + 4.0 > float(N) ) {\n\t\tfix_pad_1540259130(sum_v, pad);\n\t}\n\n\tgl_FragColor = sum_v;\n}\n";

	// create the webgl shader program for this calculation
	// based on the specific fragment shader for this calculation
	// and the generic pass through shader
	if(this.standalone){
		this.program = this.webgl.createProgram(s);
	} else {
		this.program = this.webgl.createProgram(p);
	}
}

module.exports = SSCALCalculator;

/* Names of the uniforms (variables) used in the shader program passed in on
   each calculation.
 */
SSCALCalculator.TEXTURE_UNIFORM_NAME_0 = "X";
SSCALCalculator.LENGTH_UNIFORM_NAME = "N";
SSCALCalculator.ADD_UNIFORM_NAME = "b";
SSCALCalculator.MUL_UNIFORM_NAME = "a";

/* Elementwise scale and offset a matrix

	M - number of rows in X
	N - number of columns in X
	a - scalar coefficient to X
	b - scalar offset of X
	X - matrix (texture)
	out - output (texture)

  How this works:

  1. Activate our shader program
  2. Bind input textures
  3. Set shader program parameters
  4. Bind output texture
  5. Activate calculation with `drawElements`

 */
SSCALCalculator.prototype.calculate = function(M, N, a, b, X, out){

	var gl = this.webgl.context;

	var pad = this.webgl.getPad(N);

	this.webgl.selectProgram(this.program);

	// create and bind our input texture using matrix data
	this.bindInputTexture(X, gl.TEXTURE0, SSCALCalculator.TEXTURE_UNIFORM_NAME_0);

	// set the data specific variables in our shader program
	this.bindUniforms(N, pad, a, b);

	// create our destination texture
	if(this.standalone){
		this.webgl.bindOutputTexture(M, N + pad, out);
	} else {
		this.webgl.bindOutputTexture(M, (N + pad)/ 4, out);
	}


	// initiate calculation
	gl.drawElements(gl.TRIANGLES, /*num items*/6, gl.UNSIGNED_SHORT, 0);

	this.webgl.unbindInputTexture(gl.TEXTURE0);

};

/* Create a texture from the given texel data and bind it to our shader program.

	texture - texture containing the data
	textureUnit - the texture unit to bind to (gl.TEXTURE0, gl.TEXTURE1, etc)
	name - the uniform name to associate with (must match shader program)

	must compile program (with createProgram) first
*/
SSCALCalculator.prototype.bindInputTexture = function(texture, textureUnit, name){
	var gl = this.webgl.context,
		program = this.program;

	gl.activeTexture(textureUnit); // gl.TEXTURE0, gl.TEXTURE1, etc
	gl.bindTexture(	  gl.TEXTURE_2D, texture);

	var sampler = gl.getUniformLocation(program, name);
	gl.uniform1i(sampler, textureUnit - gl.TEXTURE0);

};

/* Set up inputs for the texture shader

 */
SSCALCalculator.prototype.bindUniforms = function(N, pad, a, b) {
	var gl = this.webgl.context;

	// get var locations
	var N_gl = gl.getUniformLocation(this.program, SSCALCalculator.LENGTH_UNIFORM_NAME),
		b_gl = gl.getUniformLocation(this.program, SSCALCalculator.ADD_UNIFORM_NAME),
		a_gl = gl.getUniformLocation(this.program, SSCALCalculator.MUL_UNIFORM_NAME),
		pad_gl = gl.getUniformLocation(this.program, "pad");

	// bind length of shared dimension
	gl.uniform1i(N_gl, N);
	gl.uniform1i(pad_gl, pad);
	gl.uniform1f(a_gl, a);
	gl.uniform1f(b_gl, b);

};

},{"./webgl":12}],10:[function(require,module,exports){
var globals = require("./globals");

var gl = globals.gl;

function Tensor(shape, data){
	if(shape.length != 2)
		throw new Error("Only Tensor of order two (matrix) is supported right now.");

	var M = shape[0],
		N = shape[1];

	this.texture = gl.createDataTexture(M, N, data);

	this.shape = [M, N];
}

module.exports = Tensor;

Tensor.prototype.delete = function(){
	gl.context.deleteTexture(this.texture);
	this.texture = null;
	this.shape = null;
};

Tensor.prototype.transfer = function(keep){

	var M = this.shape[0],
		N = this.shape[1],
		out,
		result;

	// create output texture
	out = gl.createOutputTexture(M, N);

	// float extraction
	gl.encode(M, N, this.texture, out);

	result = new Float32Array(gl.readData(M, N));

	// clean up
	gl.context.deleteTexture(out);

	if(!keep){
		this.delete();
	}

	return result;
};

Tensor.prototype.reshape = function(shape, keep){

	var M = this.shape[0],
		N = this.shape[1],
		M_out = shape[0],
		N_out = shape[1];

	// create new texture to hold tranpose
	var t0 = new Tensor(shape, null);

	// invoke shader
	gl.reshape(M, N, M_out, N_out, this.texture, t0.texture);

	if(!keep){
		this.delete();
	}

	return t0;
};

Tensor.prototype.transpose = function(keep){

	var M = this.shape[0],
		N = this.shape[1];

	// create new texture to hold tranpose
	var tT = new Tensor([N, M], null);

	// invoke shader
	gl.transpose(M, N, this.texture, tT.texture);

	if(!keep){
		this.delete();
	}

	return tT;
};

Tensor.prototype.split = function(stride, keep){

	var M = this.shape[0],
		N = this.shape[1];

	if(N % 2 !== 0)
		throw new Error("row count must be multiple of two.");


	// create new texture to hold tranpose
	var t0 = new Tensor([M, N/2], null),
		t1 = new Tensor([M, N/2], null);

	gl.submatrix(N, M, N/2, stride, 0, this.texture, t0.texture);
	gl.submatrix(N, M, N/2, stride, 1, this.texture, t1.texture);

	if(!keep){
		this.delete();
	}

	return [t0, t1];
}

Tensor.combine = function(t0, t1, stride, keep){

	var M = t0.shape[0],
		N = t0.shape[1];

	if(t0.shape[1] !== t1.shape[1] || t0.shape[0] !== t1.shape[0])
		throw new Error("row and column counts must be equal.");

	if(stride % 4 !== 0)
		throw new Error("stride must be a multiple of four");

	// create new texture to hold tranpose
	var t2 = new Tensor([M, N * 2], null);

	gl.combine(M, N, stride, t0.texture, t1.texture, t2.texture);

	if(!keep){
		t0.delete();
		t1.delete();
	}

	return t2;
}

},{"./globals":2}],11:[function(require,module,exports){
var async = require('async'),
	loader = require('arrayloader'); // browserify aware file loader (xhr in browser)

/* Collection of helper methods for testing numerical computation
 */
test = {};

/* Check all entries in two TypedArrays of identical length for approximate
	equality.
	If the following equation is element-wise true, returns true

	absolute(a - b) <= (atol + rtol * absolute(b))

	from numpy.allclose
 */
test.allclose = function(a, b, RTOL, ATOL){
	RTOL= RTOL || 1e-05;  // for 32 bit precision: 1e-06
	ATOL= ATOL || 1e-08;

	if(a.length != b.length){
		console.log("lengths not equal: " + a.length + ", " + b.length);
		return {"result" : false, "index": null};
	}

	var result;
	for(var i = 0; i < a.length; i++){

		result = Math.abs(a[i] - b[i]) <= ATOL + RTOL * Math.abs(b[i]);

		if(!result) {
			return {"result": false, "index": i};
		}
	}

	return {"result": true, "index": i};
};

test.randomArray = function(N, M){

	var data = [];

	for(var i = 0; i < N; i++){
		var row = [];
		for(var j = 0; j < M; j++){
			row[j] = Math.random() / Math.sqrt(N);
		}
		data.push(row);
	}

	return data;
};
// pad rows with zeros
test.padData = function(M, N, pad, data){

	var padded = new Float32Array(M * (N + pad)); // new array of specified length filled with zeros
	for(var i = 0; i < M; i++){
		padded.set(data.subarray(i * N, (i + 1) * N), i * (N + pad));
	}
	return padded;
};

test.submatrix = function(N, M, N_out, offset, data){
	var result = new data.constructor(M * N_out);

	for(var i = 0; i < M; i++){
		for(var j = 0; j < N_out; j++){
			result[i * N_out + j] = data[i * N + j + offset];
		}
	}

	return result;
};


function loadFloat32Array(path, cb){
	return loader.load(path, Float32Array, cb);
}

/* Load test matrices from JSON data, works in a browser (with XHR)
	assumes three files 'a.json', 'b.json' and 'c.json' in nested Array format.

 callback = function(err, a, b, c)
 */
test.load = function(testDirectory, matrixFiles, callback){

	// array of paths to matrix data files for current test
	var testFiles = matrixFiles.map(function(item){ return testDirectory + item;});

	//console.log(testFiles);
	async.map(testFiles, loadFloat32Array,
		function(err, results){

			if(err) return callback(err);

			callback(err, results);
		}
	);
};

test.assert = {};

/* create a tape compatible assert */
test.assert.allclose = function(t, a, b, msg, RTOL, ATOL) {

	var ok = test.allclose(a, b, RTOL, ATOL),
		actual = "[",
		expected = "[";

	if(!ok.result){

		if(ok.index > 1){
			actual += "..., ";
			expected += "..., ";
		}
		if(ok.index > 0){
			actual += a[ok.index - 1] + ", ";
			expected += b[ok.index - 1] + ", ";
		}
		actual += "-->";
		expected += "-->";

		for(var i = ok.index; i < ok.index + 4 && i < a.length; i++ ){
			actual += a[i] + ", ";
			expected += b[i] + ", ";
		}
		if(i < a.length){
			actual += "...]";
			expected += "...]";
		} else {
			actual += "]";
			expected += "]";
		}
		msg = msg || 'should be allclose at ' + ok.index;
	}

    t._assert(ok.result, {
        message : msg || 'should be allclose',
        operator : 'allclose',
        actual : actual,
        expected : expected,
        extra : null
    });
}

module.exports = test;

},{"arrayloader":13,"async":14}],12:[function(require,module,exports){

/**
 * @license
 * Copyright (c) 2015 Waylon Flinn
 *
 * webgl.js
 *
 * multiply matrices up to 4096 x 4096 on GPUs that support OES_texture_float
 * extension. input is encoded into the red and green channels of an input texture and
 * calculations are done using a custom fragment shader.
 */


/*
	A WebGL context associated with a specific canvas element.

	* creates a canvas
	* sets up webgl context
	* translates numbers into textures
	* compiles shader programs for executing math (when supplied with an
		operation specific fragment shader)
 */
function WebGL(options) {

	var glOptions,
		ext;

	options = options || {};

	// canvas
	if(typeof options.canvas === 'undefined')
		this.canvas = document.createElement('canvas');
	else
		this.canvas = options.canvas;

	// context
	glOptions = { premultipliedAlpha: false, preserveDrawingBuffer: false };
	this.context = this.canvas.getContext("experimental-webgl", glOptions);

	if (this.context == null) {
		// No support for Webgl.
		return;
	}

	// float texture extension
	try {
		ext = this.context.getExtension('OES_texture_float');
	} catch(e) {

	}
	if ( !ext ) {
		console.log("No support for OES_texture_float extension.");
		this.hasFloat = false;
	} else {
		this.hasFloat = true;
	}

	var highp = this.context.getShaderPrecisionFormat(this.context.FRAGMENT_SHADER, this.context.HIGH_FLOAT);
	this.hasHighPrecision = highp.precision != 0;
	if(this.hasHighPrecision) this.highp = highp;

	// create pass through vertex shader
	var passThrough = "// vertex shader for a single quad\n// work is performed in the operation specific texture shader\n\nprecision highp float;\n#define GLSLIFY 1\n\nattribute vec3 pos;\nattribute vec2 tex;\nvarying vec2   outTex;\nvoid main(void)\n{\n\t// just pass the position and texture coords\n\tgl_Position = vec4(pos, 1.0);\n\toutTex = tex;\n}\n";
	this.vertexShader = this.context.createShader(this.context.VERTEX_SHADER);
	this.context.shaderSource(this.vertexShader, passThrough);
	this.context.compileShader(this.vertexShader);

	var encode = "\nprecision highp float;\n#define GLSLIFY 1\n\nvarying vec2      outTex;\t// texture coords of row/column to calculate\nuniform sampler2D A;\t\t// texture with data from padded A\nuniform int       N;\t\t// number of columns in output\nuniform int       pad;\t\t//\n\n// Render float to bytes according to IEEE 754 Floating Point\nvec4 encode_float_1540259130(float val) {\n\n\t// TODO: correctly handle denormal numbers\n\t// http://www.2ality.com/2012/04/number-encoding.html\n\tfloat a = abs(val);                           // encode absolute value + sign\n\tfloat exp = floor(log2(a));                 // number of powers of 2\n\tfloat mant = pow(2.,log2(a)-exp) * pow(2.,23.);  // multiply to fill 24 bits (implied leading 1)\n\tfloat mant1 = floor(mant / 256. / 256.);    // first 8 bits of mantissa\n\tfloat mant2 = mod(floor(mant / 256.),256.); // second 8 bits\n\tfloat mant3 = mod(mant,256.);               // third 8 bits\n\n\thighp float sign = 128.-128.*(a/val);\t\t\t// sign bit is 256 or 0\n\thighp float e = (sign+exp+127.)/510.;\t\t// exponent and sign\n\thighp float m1 = (mant1-(128.*(1.-mod(exp+127.,2.))))/255.; // handle leading bit\n\thighp float m2 = (mant2)/255.;\t\t\t\t// middle part\n\thighp float m3 = (mant3+.5)/255.;\t\t\t// scale to 0 - 255\n\n\treturn vec4(m3,m2,m1,e);\n}\n\n// select an element from a vector based on index\nfloat select_index_1604150559(vec4 v, int index){\n\tfloat val;\n\tif (index == 0) {\n\t\tval = v.r;\n\t} else if(index == 1) {\n\t\tval = v.g;\n\t} else if(index == 2) {\n\t\tval = v.b;\n\t} else if(index == 3){\n\t\tval = v.a;\n\t} else {\n\t\t// should never be here\n\t\tval = 0.0;\n\t}\n\n\treturn val;\n}\n\nvoid main(void) {\n\n\t// get the implied row and column from .y and .x of passed (output)\n\t// texture coordinate. These map directly to input texture space when\n\t// the relevant dimensions are the same.\n\tfloat row_t = outTex.y;\n\tfloat col_t = outTex.x;\n\n\tvec4 val_v = texture2D(A, vec2(col_t * float(N)/float(N + pad), row_t));\n\tint channel = int(mod(col_t * float(N), 4.0 ));\n\tfloat val = select_index_1604150559(val_v, channel);\n\n\tif (val == 0.) {\n\t\tgl_FragColor = vec4(0.,0.,0.,0.);\n\t\treturn;\n\t}\n\n \t// output vec4 with bytes for an IEEE754 32-bit floating point number\n\tgl_FragColor = encode_float_1540259130(val);\n}\n",
		transpose = "\nprecision highp float;\n#define GLSLIFY 1\n\nvarying vec2      outTex;\t// texture coords of row/column to calculate\nuniform sampler2D A;\t\t// texture with data from padded A\nuniform int       M;\t\t// number of rows in output\nuniform int       N;\t\t// number of columns in output\nuniform int       mpad;\t\t//\nuniform int       npad;\t\t//\n\n// select an element from a vector based on index\nfloat select_index_1540259130(vec4 v, int index){\n\tfloat val;\n\tif (index == 0) {\n\t\tval = v.r;\n\t} else if(index == 1) {\n\t\tval = v.g;\n\t} else if(index == 2) {\n\t\tval = v.b;\n\t} else if(index == 3){\n\t\tval = v.a;\n\t} else {\n\t\t// should never be here\n\t\tval = 0.0;\n\t}\n\n\treturn val;\n}\n\nvoid main(void) {\n\n\t// get the implied row and column from .y and .x of passed (output)\n\t// texture coordinate. These map directly to input texture space when\n\t// the relevant dimensions are the same.\n\tfloat row_t = outTex.y;\n\tfloat col_t = outTex.x;\n\tfloat col = (col_t * float(N + npad) - 2.0); // index of first element in pixel (matrix space)\n\n\t// get rows in the input, each containing one element in the output\n\tvec4 row_1 = texture2D(A, vec2((row_t * float(M))/float(M + mpad), (col + 0.5)/float(N)));\n\tvec4 row_2 = texture2D(A, vec2((row_t * float(M))/float(M + mpad), (col + 1.5)/float(N)));\n\tvec4 row_3 = texture2D(A, vec2((row_t * float(M))/float(M + mpad), (col + 2.5)/float(N)));\n\tvec4 row_4 = texture2D(A, vec2((row_t * float(M))/float(M + mpad), (col + 3.5)/float(N)));\n\n\t// package into output vector\n\tint channel = int(mod(row_t * float(M), 4.0 ));\n\n\tvec4 col_v = vec4(0.0, 0.0, 0.0, 0.0); // vec4 representing four elements in a column in the input\n\n\t// extract relevent element from each input row\n\tcol_v.r = select_index_1540259130(row_1, channel);\n\tif(npad > 0 && (col + 4.0) > float(N) ) {\n\t\t// compute elements in padded region\n\t\tif(npad < 3){\n\t\t\tcol_v.g = select_index_1540259130(row_2, channel);\n\t\t}\n\t\tif(npad < 2){\n\t\t\tcol_v.b = select_index_1540259130(row_3, channel);\n\t\t}\n\t} else {\n\t\tcol_v.g = select_index_1540259130(row_2, channel);\n\t\tcol_v.b = select_index_1540259130(row_3, channel);\n\t\tcol_v.a = select_index_1540259130(row_4, channel);\n\t}\n\n\tgl_FragColor = col_v;\n}\n",
		reshape = "\nprecision highp float;\n#define GLSLIFY 1\n\nvarying vec2      outTex;\t// texture coords of row/column to calculate\nuniform sampler2D A;\t\t// texture with data from padded A\nuniform float     M;\t\t// number of rows in output\nuniform float     N;\t\t// number of columns in output\nuniform float     pad;\t\t// column padding in output\nuniform float     M_in;\t\t// number of rows in input\nuniform float     N_in;\t\t// number of columns in input\nuniform float     pad_in;\t// column padding in input\n\n/* number of input pixels\n   origin index (channel) for each\n   termination index (channel) for each\n   destination origin index (channel) for each\n */\n// select an element from a vector based on index\nfloat select_index_1540259130(vec4 v, int index){\n\tfloat val;\n\tif (index == 0) {\n\t\tval = v.r;\n\t} else if(index == 1) {\n\t\tval = v.g;\n\t} else if(index == 2) {\n\t\tval = v.b;\n\t} else if(index == 3){\n\t\tval = v.a;\n\t} else {\n\t\t// should never be here\n\t\tval = 0.0;\n\t}\n\n\treturn val;\n}\n\n// set pad values to 0.0, if in padded region of output texture\nvoid fix_pad_1604150559(inout vec4 v, int pad){\n\tv.a = 0.0;\n\tif(pad == 2){\n\t\tv.b = 0.0;\n\t} else if(pad == 3){\n\t\tv.b = 0.0;\n\t\tv.g = 0.0;\n\t}\n}\n\n// translate a linear index into x, y coordinates for a matrix\nvec2 linear_index_coords_1117569599(float linear_index, float row_length){\n\tvec2 coords;\n\n\tcoords.x = floor(mod(linear_index + 0.5, row_length)); // column\n\tcoords.y = floor((linear_index + 0.5) / row_length); // row\n\n\treturn coords;\n}\n\nvoid main(void) {\n\n\t// get the implied row and column from .y and .x of passed (output)\n\t// texture coordinate. These map directly to input texture space when\n\t// the relevant dimensions are the same.\n\tfloat row_t = outTex.y;\n\tfloat col_t = outTex.x;\n\n\tfloat row = floor(row_t * M);\n\tfloat col_0 = (col_t * (N + pad) - 2.0); // index of first element in pixel (matrix space)\n\t//float col_0 = floor(col_t * (N + pad)/4.0)*4.0; // index of first element in pixel (matrix space)\n\tfloat lin_index_0 = row * N + col_0; // linearized index of first element in pixel in output\n\n\tvec4 pixel_in = vec4(0.0, 0.0, 0.0, 0.0);\n\tvec4 result = vec4(0.0, 0.0, 0.0, 0.0);\n\tvec2 coords = linear_index_coords_1117569599(lin_index_0, N_in);\n\tvec2 ncoords;\n\tint channel_in = int(mod(coords.x, 4.0));\n\n\tvec2 scale_in = vec2(1.0/(N_in + pad_in), 1.0/M_in); // scale from matrix to input texture coords\n\tvec2 offset_in = vec2(0.5, 0.5); // move away from edge of pixel\n\tconst vec2 pixel_scale = vec2(1.0/4.0, 1.0); // scale from matrix to pixel coords\n\n\tpixel_in = texture2D(A, (coords + offset_in) * scale_in);\n\n\t// go through channels for current output pixel\n\tfor(int channel = 0; channel < 4; channel++){\n\n\t\t// are we on a new input pixel?\n\t\tncoords = linear_index_coords_1117569599(lin_index_0 + float(channel), N_in);\n\t\tif(floor(ncoords * pixel_scale) != floor(coords * pixel_scale)){\n\t\t\tcoords = ncoords;\n\t\t\tpixel_in = texture2D(A, (coords + offset_in) * scale_in);\n\t\t\tchannel_in = 0;\n\t\t}\n\n\t\tif(channel == 0){\n\t\t\tresult.r = select_index_1540259130(pixel_in, channel_in);\n\t\t} else if(channel == 1){\n\t\t\tresult.g = select_index_1540259130(pixel_in, channel_in);\n\t\t} else if(channel == 2){\n\t\t\tresult.b = select_index_1540259130(pixel_in, channel_in);\n\t\t} else {\n\t\t\tresult.a = select_index_1540259130(pixel_in, channel_in);\n\t\t}\n\n\t\tchannel_in++;\n\t}\n\n\t// are we in the padded (output) region?\n\tif(pad > 0.0 && col_0 + 3.5 > N ) {\n\t\tfix_pad_1604150559(result, int(pad));\n\t}\n\n\tgl_FragColor = result;\n}\n",
		reshape_simple = "\nprecision highp float;\n#define GLSLIFY 1\n\nvarying vec2      outTex;\t// texture coords of row/column to calculate\nuniform sampler2D A;\t\t// texture with data from padded A\nuniform float     M;\t\t// number of rows in output\nuniform float     N;\t\t// number of columns in output\nuniform float     M_in;\t\t// number of rows in input\nuniform float     N_in;\t\t// number of columns in input\n\n// translate a linear index into x, y coordinates for a matrix\nvec2 linear_index_coords_1540259130(float linear_index, float row_length){\n\tvec2 coords;\n\n\tcoords.x = floor(mod(linear_index + 0.5, row_length)); // column\n\tcoords.y = floor((linear_index + 0.5) / row_length); // row\n\n\treturn coords;\n}\n\nvoid main(void) {\n\n\t// get the implied row and column from .y and .x of passed (output)\n\t// texture coordinate. These map directly to input texture space when\n\t// the relevant dimensions are the same.\n\tfloat row_t = outTex.y;\n\tfloat col_t = outTex.x;\n\n\tfloat row = floor(row_t * M);\n\tfloat col_0 = floor(col_t * N - 1.5); // index of first element in pixel (matrix space)\n\tfloat lin_index_0 = row * N + col_0; // linearized index of first element in pixel in output\n\n\tvec4 result;\n\tvec2 coords = linear_index_coords_1540259130(lin_index_0, N_in);\n\n\tvec2 scale_in = vec2(1.0/N_in, 1.0/M_in); // scale from matrix to input texture coords\n\tvec2 offset_in = vec2(0.5, 0.5); // move away from edge of pixel\n\n\tresult = texture2D(A, (coords + offset_in) * scale_in);\n\n\tgl_FragColor = result;\n}\n",
		submatrix = "precision highp float;\n#define GLSLIFY 1\n\nvarying vec2      outTex;\t// texture coords of row/column to calculate\nuniform sampler2D X;\t\t// texture with data from padded X\nuniform float     N;\t\t// number of columns\nuniform float     pad;\t\t// additional columns to nearest multiple of four\nuniform float     N_in;\t\t// number of columns (input)\nuniform float     pad_in;\t// additional columns to nearest multiple of four (input)\nuniform float     stride;\nuniform float     offset;   // zero or one\n\n// set pad values to 0.0, if in padded region of output texture\nvoid fix_pad_1540259130(inout vec4 v, int pad){\n\tv.a = 0.0;\n\tif(pad == 2){\n\t\tv.b = 0.0;\n\t} else if(pad == 3){\n\t\tv.b = 0.0;\n\t\tv.g = 0.0;\n\t}\n}\n\n/* join parts of two pixels into one, selecting four continguous elements\n  starting at channel.\n*/\nvoid join_pixels_1604150559(inout vec4 x, vec4 x0, vec4 x1, float channel){\n\tif(channel == 1.0){\n\t\tx.rgb = x0.gba;\n\t\tx.a = x1.r;\n\t} else if(channel == 2.0){\n\t\tx.rg = x0.ba;\n\t\tx.ba = x1.rg;\n\t} else if(channel == 3.0){\n\t\tx.r = x0.a;\n\t\tx.gba = x1.rgb;\n\t}\n}\n\nvoid main(void) {\n\n\t// get the implied row and column from .y and .x of passed (output)\n\t// texture coordinate. These map directly to input texture space when\n\t// the relevant dimensions are the same.\n\tfloat row_t = outTex.y;\n\tfloat col_t = outTex.x;\n\tfloat col = floor(col_t * (N + pad) - 1.5); // index of first element in pixel (output matrix space)\n\n\tfloat stripe = floor(col / stride);\n\tfloat sub_col = floor(mod(col, stride));\n\n\tfloat col_in = (offset + (2.0 * stripe)) * stride + sub_col;\n\n\tvec4 x;\n\tfloat channel = mod(col_in, 4.0); // channel in the input of first element in output\n\n\t// are we at the beggining of an input pixel?\n\tif(channel == 0.0){\n\t\t// yes, select the whole thing\n\t\tx = texture2D( X, vec2((col_in + 2.0 - channel) / (N_in + pad_in) , row_t));\n\t} else {\n\t\t// no, select parts from two pixels\n\t\tvec4 x0, x1;\n\t\tx0 = texture2D( X, vec2((col_in + 2.0 - channel) / (N_in + pad_in) , row_t));\n\t\tx1 = texture2D( X, vec2((col_in + 6.0 - channel) / (N_in + pad_in) , row_t));\n\n\t\tjoin_pixels_1604150559(x, x0, x1, channel);\n\n\t}\n\n\t// fix padded region\n\tif(pad > 0.0 && col + 4.0 > N ) {\n\t\tfix_pad_1540259130(x, int(pad));\n\t}\n\n\tgl_FragColor = x;\n}\n",
		combine = "precision highp float;\n#define GLSLIFY 1\n\nvarying vec2      outTex;\t// texture coords of row/column to calculate\nuniform sampler2D A;\t\t// texture with data from padded A\nuniform sampler2D B;\t\t// texture with data from padded B\nuniform float     N_in;\t\t// number of columns\nuniform float     pad_in;\t// additional columns to nearest multiple of four\nuniform float     stride;\n\n// set pad values to 0.0, if in padded region of output texture\nvoid fix_pad_1540259130(inout vec4 v, int pad){\n\tv.a = 0.0;\n\tif(pad == 2){\n\t\tv.b = 0.0;\n\t} else if(pad == 3){\n\t\tv.b = 0.0;\n\t\tv.g = 0.0;\n\t}\n}\n\nvoid main(void) {\n\n\t// get the implied row and column from .y and .x of passed (output)\n\t// texture coordinate. These map directly to input texture space when\n\t// the relevant dimensions are the same.\n\tfloat row_t = outTex.y;\n\tfloat col_t = outTex.x;\n\tfloat N = N_in * 2.0;\n\tfloat pad = mod(N, 4.0);\n\tfloat col = floor(col_t * (N + pad) - 1.5); // index of first element in pixel (output matrix space)\n\n\tfloat stripe = floor(col / stride);\n\tfloat sub_col = floor(mod(col, stride));\n\n\tfloat tex_select = mod(stripe, 2.0);\n\tfloat col_in = floor(stripe / 2.0) * stride + sub_col;\n\n\tvec4 x;\n\tfloat channel = mod(col_in, 4.0); // channel in the input of first element in output\n\n\t// which input texture are we getting this pixel from?\n\tif(tex_select == 0.0){\n\t\tx = texture2D( A, vec2((col_in + 2.0) / (N_in + pad_in) , row_t));\n\t} else {\n\t\tx = texture2D( B, vec2((col_in + 2.0) / (N_in + pad_in) , row_t));\n\t}\n\n\t// fix padded region\n\tif(pad > 0.0 && col + 4.0 > N ) {\n\t\tfix_pad_1540259130(x, int(pad));\n\t}\n\n\tgl_FragColor = x;\n}\n";

	this.encode_program = this.createProgram(encode);
	this.transpose_program = this.createProgram(transpose);
	this.reshape_program = this.createProgram(reshape);
	this.reshape_simple_program = this.createProgram(reshape_simple);
	this.submatrix_program = this.createProgram(submatrix);
	this.combine_program = this.createProgram(combine);
};

module.exports = WebGL;

// RGBA is the standard input/ouput texture
WebGL.COMPONENTS_PER_TEXEL = 4;

WebGL.POSITION_UNIFORM_NAME = "pos";
WebGL.TEXTURE_UNIFORM_NAME = "tex";


WebGL.prototype.encode = function(M, N, texture0, out){

	this.program = this.encode_program;
	this.selectProgram(this.program);

	var pad = this.getPad(N);

	var N_gl = this.context.getUniformLocation(this.program, "N"),
		pad_gl = this.context.getUniformLocation(this.program, "pad");

	this.context.uniform1i(N_gl, N);
	this.context.uniform1i(pad_gl, pad);

	this.bindInputTexture(texture0, this.context.TEXTURE0, "A");

	this.bindOutputTexture(M, N, out);

	this.context.drawElements(this.context.TRIANGLES, /*num items*/6, this.context.UNSIGNED_SHORT, 0);

	this.unbindInputTexture(this.context.TEXTURE0);
}

/* tranpose a texture where input has M rows and N columns
 */
WebGL.prototype.transpose = function(M, N, texture0, out){

	this.program = this.transpose_program;
	this.selectProgram(this.program);

	var npad = this.getPad(N),
		mpad = this.getPad(M);

	// in the shader M and N describe rows and columns in the *output*, respectively
	var N_gl = this.context.getUniformLocation(this.program, "N"),
		npad_gl = this.context.getUniformLocation(this.program, "npad"),
		M_gl = this.context.getUniformLocation(this.program, "M"),
		mpad_gl = this.context.getUniformLocation(this.program, "mpad");

	this.context.uniform1i(N_gl, M);
	this.context.uniform1i(npad_gl, mpad);
	this.context.uniform1i(M_gl, N);
	this.context.uniform1i(mpad_gl, npad);

	this.bindInputTexture(texture0, this.context.TEXTURE0, "A");

	this.bindOutputTexture(N, (M + mpad)/4, out);

	this.context.drawElements(this.context.TRIANGLES, /*num items*/6, this.context.UNSIGNED_SHORT, 0);

	this.unbindInputTexture(this.context.TEXTURE0);
};

/* tranpose a texture where input has M rows and N columns
 */
WebGL.prototype.reshape = function(M, N, M_out, N_out, texture0, out){

	var pad = this.getPad(N),
		pad_out = this.getPad(N_out);

	if(pad == 0 && pad_out == 0){
		this.program = this.reshape_simple_program;
	} else {
		this.program = this.reshape_program;
		console.log("# WARNING: using slow reshape shader.");
	}

	this.selectProgram(this.program);


	// in the shader M and N describe rows and columns in the *output*, respectively
	var M_gl = this.context.getUniformLocation(this.program, "M"),
		N_gl = this.context.getUniformLocation(this.program, "N"),
		pad_gl = this.context.getUniformLocation(this.program, "pad"),
		M_in_gl = this.context.getUniformLocation(this.program, "M_in"),
		N_in_gl = this.context.getUniformLocation(this.program, "N_in"),
		pad_in_gl = this.context.getUniformLocation(this.program, "pad_in");

	this.context.uniform1f(M_gl, M_out);
	this.context.uniform1f(N_gl, N_out);
	this.context.uniform1f(pad_gl, pad_out);
	this.context.uniform1f(M_in_gl, M);
	this.context.uniform1f(N_in_gl, N);
	this.context.uniform1f(pad_in_gl, pad);

	this.bindInputTexture(texture0, this.context.TEXTURE0, "A");

	this.bindOutputTexture(M_out, (N_out + pad_out)/4, out);

	this.context.drawElements(this.context.TRIANGLES, /*num items*/6, this.context.UNSIGNED_SHORT, 0);

	this.unbindInputTexture(this.context.TEXTURE0);
};

/* extract a portion of a texture into another texture
 */
WebGL.prototype.submatrix = function(N, M_out, N_out, stride, offset, texture0, out){

	this.program = this.submatrix_program;
	this.selectProgram(this.program);

	var pad = this.getPad(N),
		pad_out = this.getPad(N_out);

	// in the shader M and N describe rows and columns in the *output*, respectively
	var N_gl = this.context.getUniformLocation(this.program, "N"),
		pad_gl = this.context.getUniformLocation(this.program, "pad"),
		N_in_gl = this.context.getUniformLocation(this.program, "N_in"),
		pad_in_gl = this.context.getUniformLocation(this.program, "pad_in"),
		offset_gl = this.context.getUniformLocation(this.program, "offset");
		stride_gl = this.context.getUniformLocation(this.program, "stride");

	this.context.uniform1f(N_gl, N_out);
	this.context.uniform1f(pad_gl, pad_out);
	this.context.uniform1f(N_in_gl, N);
	this.context.uniform1f(pad_in_gl, pad);
	this.context.uniform1f(stride_gl, stride);
	this.context.uniform1f(offset_gl, offset);

	this.bindInputTexture(texture0, this.context.TEXTURE0, "X");

	this.bindOutputTexture(M_out, (N_out + pad_out)/4, out);

	this.context.drawElements(this.context.TRIANGLES, /*num items*/6, this.context.UNSIGNED_SHORT, 0);

	this.unbindInputTexture(this.context.TEXTURE0);
};

/* combine two smaller textures into a larger texture
   M - input rows
   N - input columns
 */
WebGL.prototype.combine = function(M, N, stride, texture0, texture1, out){

	this.program = this.combine_program;
	this.selectProgram(this.program);

	var N_out = N * 2,
		pad = this.getPad(N),
		pad_out = this.getPad(N_out); // = (pad * 2) % 4

	// in the shader M and N describe rows and columns in the *output*, respectively
	var N_in_gl = this.context.getUniformLocation(this.program, "N_in"),
		pad_in_gl = this.context.getUniformLocation(this.program, "pad_in"),
		stride_gl = this.context.getUniformLocation(this.program, "stride");

	this.context.uniform1f(N_in_gl, N);
	this.context.uniform1f(pad_in_gl, pad);
	this.context.uniform1f(stride_gl, stride);

	this.bindInputTexture(texture0, this.context.TEXTURE0, "A");
	this.bindInputTexture(texture1, this.context.TEXTURE1, "B");

	this.bindOutputTexture(M, (N_out + pad_out)/4, out);

	this.context.drawElements(this.context.TRIANGLES, /*num items*/6, this.context.UNSIGNED_SHORT, 0);

	this.unbindInputTexture(this.context.TEXTURE0);
};

WebGL.prototype.bindInputTexture = function(texture, textureUnit, name){
	var gl = this.context,
		program = this.program;

	gl.activeTexture(textureUnit); // gl.TEXTURE0, gl.TEXTURE1, etc
	gl.bindTexture(	  gl.TEXTURE_2D, texture);

	var sampler = gl.getUniformLocation(program, name);
	gl.uniform1i(sampler, textureUnit - gl.TEXTURE0);

};

/*  Create a shader program based on a pass through vertex shader and
	the supplied operation specific fragment shader.

	fragmentShaderSource - string containing the fragment shader source code.
	shader will recieve `vec2 outTex` with texture coordinates from the pass
	through vertex shader.
 */
WebGL.prototype.createProgram = function(fragmentShaderSource){
	var gl = this.context,
		fragmentShader;

	if (gl == null) {
	  // No webgl support.
	  return;
	}
	// compile the provided fragment/texture shader
	fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);
	gl.shaderSource(fragmentShader, fragmentShaderSource);
	gl.compileShader(fragmentShader);

	// did it compile correctly?
	if (gl.getShaderParameter(fragmentShader, gl.COMPILE_STATUS) == 0)
		throw new Error(gl.getShaderInfoLog(fragmentShader));

	// link the program specific fragment shader and the generic pass through
	// shader into a program
	var program = gl.createProgram();
	gl.attachShader(program, this.vertexShader);
	gl.attachShader(program, fragmentShader);
	gl.linkProgram(program);

	return program;
};

WebGL.prototype.selectProgram = function(program){

	var gl = this.context;

	// set calculator program to current shader program
	gl.useProgram(program);

	this.bindVertices(program);
};

/* setup required to draw a square to our vertex shader and have
   fragment shader called for each pixel
 */
WebGL.prototype.bindVertices = function(program) {
	var gl = this.context,
		renderer = program;

	// bind vertices
	var position = gl.getAttribLocation(renderer, WebGL.POSITION_UNIFORM_NAME);
	var vertexBuffer = gl.createBuffer();
	gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);

	// define a square that covers the screen
	var vertices = [-1.0, -1.0, 0.0,	// bottom left
					 1.0, -1.0, 0.0,	// bottom right
					 1.0,  1.0, 0.0,	// top right
					-1.0,  1.0, 0.0];	// top left
	gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STATIC_DRAW);
	gl.vertexAttribPointer(position, /*item size*/3, gl.FLOAT, false, 0, 0);
	gl.enableVertexAttribArray(position);

	// bind texture cords
	var texture = gl.getAttribLocation(renderer, WebGL.TEXTURE_UNIFORM_NAME);
	var texCoords = gl.createBuffer();
	gl.bindBuffer(gl.ARRAY_BUFFER, texCoords);
	var textureCoords = [0.0, 0.0,
						 1.0, 0.0,
						 1.0, 1.0,
						 0.0, 1.0];
	gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(textureCoords), gl.STATIC_DRAW);
	gl.vertexAttribPointer(texture, /*item size*/2, gl.FLOAT, false, 0, 0);
	gl.enableVertexAttribArray(texture);

	// index to vertices
	var indices = gl.createBuffer();
	gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, indices);
	// tesselate square into triangles
	// indeces into vertex array creating triangles, with counter-clockwise winding
	var vertexIndices = [0, 1, 2,	// bottom right triangle
						 0, 2, 3];	// top left triangle
	gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(vertexIndices), gl.STATIC_DRAW);
};

/* create RGBA texture of width w/4 from given texels
   padding the width of each row to a multiple of 4, where necessary.

   if texels is null, an empty texture is created.

   alternative to textures?
   http://stackoverflow.com/questions/17203508/webgl-hardware-skinning-with-a-bone-texture
 */
WebGL.prototype.createDataTexture = function(h, w, texels){

	var gl = this.context;

	var PAD_TEMPLATE = [0.0, 0.0, 0.0, 0.0]; // value to pad remainder with

	var rem = (w % WebGL.COMPONENTS_PER_TEXEL),
		pad = rem == 0 ? 0 : WebGL.COMPONENTS_PER_TEXEL - rem;

	// create the texture from our floats
	var texture = gl.createTexture();

	gl.bindTexture(	  gl.TEXTURE_2D, texture);
	/*
	// https://www.opengl.org/wiki/GLAPI/glPixelStore
    gl.pixelStorei(gl.UNPACK_ROW_LENGTH, w/4);
    gl.pixelStorei(gl.UNPACK_ALIGNMENT, 1);

	see also: https://www.opengl.org/wiki/Common_Mistakes#Creating_a_complete_texture
	*/
	if(pad == 0 || texels == null || typeof texels === 'undefined'){
		// no padding required, write directly from input array
		gl.texImage2D(	  gl.TEXTURE_2D, 0, gl.RGBA, (w + pad) / WebGL.COMPONENTS_PER_TEXEL, h, 0,
						  gl.RGBA, gl.FLOAT, texels);

	} else {
		// must pad each row

		// create empty texture
		gl.texImage2D(	  gl.TEXTURE_2D, 0, gl.RGBA, (w + pad) / WebGL.COMPONENTS_PER_TEXEL, h, 0,
						  gl.RGBA, gl.FLOAT, null);

		var full_texel_row_len = w - rem,
			full_row_texture_width = full_texel_row_len / WebGL.COMPONENTS_PER_TEXEL;

		var row_start = 0;
		var last_texel = new Float32Array(PAD_TEMPLATE);
		var row, remainder;

		// set texture data, one row at a time, padding each row to a multiple
		// of the texel length
		for(var i = 0; i < h; i++){
			row_start = i * w;
			full_texel_row_end = row_start + full_texel_row_len;
			row = new Float32Array(texels.buffer, row_start * texels.BYTES_PER_ELEMENT, full_texel_row_len);
			if(full_texel_row_len > 0){
				// https://www.khronos.org/registry/webgl/specs/latest/1.0/index.html#TEXSUBIMAGE2D
				gl.texSubImage2D(gl.TEXTURE_2D,
					 0,					// mip-map level
					 0,					// x-offset
					 i,					// y-offset
					 full_row_texture_width,	// width
					 1,					// height
					 gl.RGBA,			// format
					 gl.FLOAT,			// type
					 row			// data
				 );
			}

			remainder = new Float32Array(texels.buffer, full_texel_row_end * texels.BYTES_PER_ELEMENT, rem);
			last_texel.set(remainder); // copy remaining data

			gl.texSubImage2D(gl.TEXTURE_2D,
				 0,				// mip-map level
				 full_row_texture_width, // x-offset
				 i,				// y-offset
				 1,				// width
				 1,				// height
				 gl.RGBA,		// format
				 gl.FLOAT,		// type
				 last_texel		// data
			 );
		}
	}

	// clamp to edge to support non-power of two textures
	gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
	gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);

	// don't interpolate when getting data from texture
	gl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);
	gl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);

	// we're done with setup, so unbind current texture
	gl.bindTexture(gl.TEXTURE_2D, null);

	return texture;
};

/* Create a (padded) texture suitable for reading into an array with readPixels.
	UNSIGNED_BYTE
   Can be passed to bindDestinationTexture.

   Returns an unsigned byte RGBA texture (other formats are not yet supported
	on most platforms, see WEBGL_color_buffer_float extension)
 */
WebGL.prototype.createOutputTexture = function(h, w) {
	var gl = this.context;

	var pad = this.getPad(w);

	// create and bind texture to render to
	var destTexture = gl.createTexture();
	//gl.activeTexture(gl.TEXTURE2);
	gl.bindTexture(gl.TEXTURE_2D, destTexture);
	gl.texImage2D(gl.TEXTURE_2D,/*level*/0, gl.RGBA, w + pad, h, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);

	// clamp to edge to support non-power of two textures
	gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
	gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);
	// don't interpolate when getting data from texture
	gl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);
	gl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);

	// we're done with setup, so unbind current texture
	gl.bindTexture(gl.TEXTURE_2D, null);

	return destTexture;
};

/* Set up output

	M - number of rows in output
	N - number of columns in output
	dstTex - texture for holding the output
 */
WebGL.prototype.bindOutputTexture = function(M, N, texture) {
	var gl = this.context;

	// set canvas and viewport size
	this.canvas.height = M;
	this.canvas.width = N;
	gl.viewport(0, 0, N, M);

	// create and bind framebuffer
	this.framebuffer = this.framebuffer || gl.createFramebuffer();

	gl.bindFramebuffer(gl.FRAMEBUFFER, this.framebuffer);

	gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, texture, /*level*/0);


	if( gl.checkFramebufferStatus(gl.FRAMEBUFFER) != gl.FRAMEBUFFER_COMPLETE)
		throw new Error("Bound framebuffer is not complete.");

	return this.framebuffer;
};

WebGL.prototype.unbindInputTexture = function(textureUnit){
	var gl = this.context;

	gl.activeTexture(textureUnit);
	gl.bindTexture(gl.TEXTURE_2D, null);
};

/* Read data out as unsigned bytes */
WebGL.prototype.readData = function(M, N){
	var gl = this.context;

	// create destination buffer
	rawbuffer = new ArrayBuffer(M*N*Float32Array.BYTES_PER_ELEMENT);

	// read the result into our buffer, as bytes
	prod = new Uint8Array(rawbuffer);
	gl.readPixels(0, 0, N, M, gl.RGBA, gl.UNSIGNED_BYTE, prod);

	// return raw result bytes
	return rawbuffer; // M x N
};

// how many extra elements do we need to fill up a pixel?
WebGL.prototype.getPad = function(N){

	var rem = (N % WebGL.COMPONENTS_PER_TEXEL),
		pad = rem == 0 ? 0 : WebGL.COMPONENTS_PER_TEXEL - rem;

	return pad;
};

},{}],13:[function(require,module,exports){
exports.load = function(url, type, callback) {
	var xhr = new XMLHttpRequest();

	xhr.onreadystatechange = function() {
		if (xhr.readyState !== 4) {
			return;
		}

		if (xhr.status >= 200 && xhr.status < 300) {
			var arrayBuffer = xhr.response;
			if (arrayBuffer) {
				try{

					// parse according to type
					var data = new type(arrayBuffer);

					// return result
					return callback(null, data);
				} catch (e){
					return callback(e);
				}
			} else {
				return callback("empty response");
			}

		} else {
			var err = new Error("failed to request file '" + url + "'");
			// follow Node.js error signature
			err.errno = 34;
			callback(err);
		}
	};

	try {
		xhr.open('GET', url, true);
		xhr.responseType = "arraybuffer";
		xhr.send(null);
	} catch (err) {
		callback(err);
	}
};

},{}],14:[function(require,module,exports){
(function (process,global){
/**
 * @license
 * async
 * https://github.com/caolan/async
 *
 * Copyright 2010-2014 Caolan McMahon
 * Released under the MIT license
 */
(function () {

    var async = {};
    function noop() {}
    function identity(v) {
        return v;
    }
    function toBool(v) {
        return !!v;
    }
    function notId(v) {
        return !v;
    }

    // global on the server, window in the browser
    var previous_async;

    // Establish the root object, `window` (`self`) in the browser, `global`
    // on the server, or `this` in some virtual machines. We use `self`
    // instead of `window` for `WebWorker` support.
    var root = typeof self === 'object' && self.self === self && self ||
            typeof global === 'object' && global.global === global && global ||
            this;

    if (root != null) {
        previous_async = root.async;
    }

    async.noConflict = function () {
        root.async = previous_async;
        return async;
    };

    function only_once(fn) {
        return function() {
            if (fn === null) throw new Error("Callback was already called.");
            fn.apply(this, arguments);
            fn = null;
        };
    }

    function _once(fn) {
        return function() {
            if (fn === null) return;
            fn.apply(this, arguments);
            fn = null;
        };
    }

    //// cross-browser compatiblity functions ////

    var _toString = Object.prototype.toString;

    var _isArray = Array.isArray || function (obj) {
        return _toString.call(obj) === '[object Array]';
    };

    // Ported from underscore.js isObject
    var _isObject = function(obj) {
        var type = typeof obj;
        return type === 'function' || type === 'object' && !!obj;
    };

    function _isArrayLike(arr) {
        return _isArray(arr) || (
            // has a positive integer length property
            typeof arr.length === "number" &&
            arr.length >= 0 &&
            arr.length % 1 === 0
        );
    }

    function _arrayEach(arr, iterator) {
        var index = -1,
            length = arr.length;

        while (++index < length) {
            iterator(arr[index], index, arr);
        }
    }

    function _map(arr, iterator) {
        var index = -1,
            length = arr.length,
            result = Array(length);

        while (++index < length) {
            result[index] = iterator(arr[index], index, arr);
        }
        return result;
    }

    function _range(count) {
        return _map(Array(count), function (v, i) { return i; });
    }

    function _reduce(arr, iterator, memo) {
        _arrayEach(arr, function (x, i, a) {
            memo = iterator(memo, x, i, a);
        });
        return memo;
    }

    function _forEachOf(object, iterator) {
        _arrayEach(_keys(object), function (key) {
            iterator(object[key], key);
        });
    }

    function _indexOf(arr, item) {
        for (var i = 0; i < arr.length; i++) {
            if (arr[i] === item) return i;
        }
        return -1;
    }

    var _keys = Object.keys || function (obj) {
        var keys = [];
        for (var k in obj) {
            if (obj.hasOwnProperty(k)) {
                keys.push(k);
            }
        }
        return keys;
    };

    function _keyIterator(coll) {
        var i = -1;
        var len;
        var keys;
        if (_isArrayLike(coll)) {
            len = coll.length;
            return function next() {
                i++;
                return i < len ? i : null;
            };
        } else {
            keys = _keys(coll);
            len = keys.length;
            return function next() {
                i++;
                return i < len ? keys[i] : null;
            };
        }
    }

    // Similar to ES6's rest param (http://ariya.ofilabs.com/2013/03/es6-and-rest-parameter.html)
    // This accumulates the arguments passed into an array, after a given index.
    // From underscore.js (https://github.com/jashkenas/underscore/pull/2140).
    function _restParam(func, startIndex) {
        startIndex = startIndex == null ? func.length - 1 : +startIndex;
        return function() {
            var length = Math.max(arguments.length - startIndex, 0);
            var rest = Array(length);
            for (var index = 0; index < length; index++) {
                rest[index] = arguments[index + startIndex];
            }
            switch (startIndex) {
                case 0: return func.call(this, rest);
                case 1: return func.call(this, arguments[0], rest);
            }
            // Currently unused but handle cases outside of the switch statement:
            // var args = Array(startIndex + 1);
            // for (index = 0; index < startIndex; index++) {
            //     args[index] = arguments[index];
            // }
            // args[startIndex] = rest;
            // return func.apply(this, args);
        };
    }

    function _withoutIndex(iterator) {
        return function (value, index, callback) {
            return iterator(value, callback);
        };
    }

    //// exported async module functions ////

    //// nextTick implementation with browser-compatible fallback ////

    // capture the global reference to guard against fakeTimer mocks
    var _setImmediate = typeof setImmediate === 'function' && setImmediate;

    var _delay = _setImmediate ? function(fn) {
        // not a direct alias for IE10 compatibility
        _setImmediate(fn);
    } : function(fn) {
        setTimeout(fn, 0);
    };

    if (typeof process === 'object' && typeof process.nextTick === 'function') {
        async.nextTick = process.nextTick;
    } else {
        async.nextTick = _delay;
    }
    async.setImmediate = _setImmediate ? _delay : async.nextTick;


    async.forEach =
    async.each = function (arr, iterator, callback) {
        return async.eachOf(arr, _withoutIndex(iterator), callback);
    };

    async.forEachSeries =
    async.eachSeries = function (arr, iterator, callback) {
        return async.eachOfSeries(arr, _withoutIndex(iterator), callback);
    };


    async.forEachLimit =
    async.eachLimit = function (arr, limit, iterator, callback) {
        return _eachOfLimit(limit)(arr, _withoutIndex(iterator), callback);
    };

    async.forEachOf =
    async.eachOf = function (object, iterator, callback) {
        callback = _once(callback || noop);
        object = object || [];

        var iter = _keyIterator(object);
        var key, completed = 0;

        while ((key = iter()) != null) {
            completed += 1;
            iterator(object[key], key, only_once(done));
        }

        if (completed === 0) callback(null);

        function done(err) {
            completed--;
            if (err) {
                callback(err);
            }
            // Check key is null in case iterator isn't exhausted
            // and done resolved synchronously.
            else if (key === null && completed <= 0) {
                callback(null);
            }
        }
    };

    async.forEachOfSeries =
    async.eachOfSeries = function (obj, iterator, callback) {
        callback = _once(callback || noop);
        obj = obj || [];
        var nextKey = _keyIterator(obj);
        var key = nextKey();
        function iterate() {
            var sync = true;
            if (key === null) {
                return callback(null);
            }
            iterator(obj[key], key, only_once(function (err) {
                if (err) {
                    callback(err);
                }
                else {
                    key = nextKey();
                    if (key === null) {
                        return callback(null);
                    } else {
                        if (sync) {
                            async.setImmediate(iterate);
                        } else {
                            iterate();
                        }
                    }
                }
            }));
            sync = false;
        }
        iterate();
    };



    async.forEachOfLimit =
    async.eachOfLimit = function (obj, limit, iterator, callback) {
        _eachOfLimit(limit)(obj, iterator, callback);
    };

    function _eachOfLimit(limit) {

        return function (obj, iterator, callback) {
            callback = _once(callback || noop);
            obj = obj || [];
            var nextKey = _keyIterator(obj);
            if (limit <= 0) {
                return callback(null);
            }
            var done = false;
            var running = 0;
            var errored = false;

            (function replenish () {
                if (done && running <= 0) {
                    return callback(null);
                }

                while (running < limit && !errored) {
                    var key = nextKey();
                    if (key === null) {
                        done = true;
                        if (running <= 0) {
                            callback(null);
                        }
                        return;
                    }
                    running += 1;
                    iterator(obj[key], key, only_once(function (err) {
                        running -= 1;
                        if (err) {
                            callback(err);
                            errored = true;
                        }
                        else {
                            replenish();
                        }
                    }));
                }
            })();
        };
    }


    function doParallel(fn) {
        return function (obj, iterator, callback) {
            return fn(async.eachOf, obj, iterator, callback);
        };
    }
    function doParallelLimit(fn) {
        return function (obj, limit, iterator, callback) {
            return fn(_eachOfLimit(limit), obj, iterator, callback);
        };
    }
    function doSeries(fn) {
        return function (obj, iterator, callback) {
            return fn(async.eachOfSeries, obj, iterator, callback);
        };
    }

    function _asyncMap(eachfn, arr, iterator, callback) {
        callback = _once(callback || noop);
        arr = arr || [];
        var results = _isArrayLike(arr) ? [] : {};
        eachfn(arr, function (value, index, callback) {
            iterator(value, function (err, v) {
                results[index] = v;
                callback(err);
            });
        }, function (err) {
            callback(err, results);
        });
    }

    async.map = doParallel(_asyncMap);
    async.mapSeries = doSeries(_asyncMap);
    async.mapLimit = doParallelLimit(_asyncMap);

    // reduce only has a series version, as doing reduce in parallel won't
    // work in many situations.
    async.inject =
    async.foldl =
    async.reduce = function (arr, memo, iterator, callback) {
        async.eachOfSeries(arr, function (x, i, callback) {
            iterator(memo, x, function (err, v) {
                memo = v;
                callback(err);
            });
        }, function (err) {
            callback(err, memo);
        });
    };

    async.foldr =
    async.reduceRight = function (arr, memo, iterator, callback) {
        var reversed = _map(arr, identity).reverse();
        async.reduce(reversed, memo, iterator, callback);
    };

    async.transform = function (arr, memo, iterator, callback) {
        if (arguments.length === 3) {
            callback = iterator;
            iterator = memo;
            memo = _isArray(arr) ? [] : {};
        }

        async.eachOf(arr, function(v, k, cb) {
            iterator(memo, v, k, cb);
        }, function(err) {
            callback(err, memo);
        });
    };

    function _filter(eachfn, arr, iterator, callback) {
        var results = [];
        eachfn(arr, function (x, index, callback) {
            iterator(x, function (v) {
                if (v) {
                    results.push({index: index, value: x});
                }
                callback();
            });
        }, function () {
            callback(_map(results.sort(function (a, b) {
                return a.index - b.index;
            }), function (x) {
                return x.value;
            }));
        });
    }

    async.select =
    async.filter = doParallel(_filter);

    async.selectLimit =
    async.filterLimit = doParallelLimit(_filter);

    async.selectSeries =
    async.filterSeries = doSeries(_filter);

    function _reject(eachfn, arr, iterator, callback) {
        _filter(eachfn, arr, function(value, cb) {
            iterator(value, function(v) {
                cb(!v);
            });
        }, callback);
    }
    async.reject = doParallel(_reject);
    async.rejectLimit = doParallelLimit(_reject);
    async.rejectSeries = doSeries(_reject);

    function _createTester(eachfn, check, getResult) {
        return function(arr, limit, iterator, cb) {
            function done() {
                if (cb) cb(getResult(false, void 0));
            }
            function iteratee(x, _, callback) {
                if (!cb) return callback();
                iterator(x, function (v) {
                    if (cb && check(v)) {
                        cb(getResult(true, x));
                        cb = iterator = false;
                    }
                    callback();
                });
            }
            if (arguments.length > 3) {
                eachfn(arr, limit, iteratee, done);
            } else {
                cb = iterator;
                iterator = limit;
                eachfn(arr, iteratee, done);
            }
        };
    }

    async.any =
    async.some = _createTester(async.eachOf, toBool, identity);

    async.someLimit = _createTester(async.eachOfLimit, toBool, identity);

    async.all =
    async.every = _createTester(async.eachOf, notId, notId);

    async.everyLimit = _createTester(async.eachOfLimit, notId, notId);

    function _findGetResult(v, x) {
        return x;
    }
    async.detect = _createTester(async.eachOf, identity, _findGetResult);
    async.detectSeries = _createTester(async.eachOfSeries, identity, _findGetResult);
    async.detectLimit = _createTester(async.eachOfLimit, identity, _findGetResult);

    async.sortBy = function (arr, iterator, callback) {
        async.map(arr, function (x, callback) {
            iterator(x, function (err, criteria) {
                if (err) {
                    callback(err);
                }
                else {
                    callback(null, {value: x, criteria: criteria});
                }
            });
        }, function (err, results) {
            if (err) {
                return callback(err);
            }
            else {
                callback(null, _map(results.sort(comparator), function (x) {
                    return x.value;
                }));
            }

        });

        function comparator(left, right) {
            var a = left.criteria, b = right.criteria;
            return a < b ? -1 : a > b ? 1 : 0;
        }
    };

    async.auto = function (tasks, concurrency, callback) {
        if (typeof arguments[1] === 'function') {
            // concurrency is optional, shift the args.
            callback = concurrency;
            concurrency = null;
        }
        callback = _once(callback || noop);
        var keys = _keys(tasks);
        var remainingTasks = keys.length;
        if (!remainingTasks) {
            return callback(null);
        }
        if (!concurrency) {
            concurrency = remainingTasks;
        }

        var results = {};
        var runningTasks = 0;

        var hasError = false;

        var listeners = [];
        function addListener(fn) {
            listeners.unshift(fn);
        }
        function removeListener(fn) {
            var idx = _indexOf(listeners, fn);
            if (idx >= 0) listeners.splice(idx, 1);
        }
        function taskComplete() {
            remainingTasks--;
            _arrayEach(listeners.slice(0), function (fn) {
                fn();
            });
        }

        addListener(function () {
            if (!remainingTasks) {
                callback(null, results);
            }
        });

        _arrayEach(keys, function (k) {
            if (hasError) return;
            var task = _isArray(tasks[k]) ? tasks[k]: [tasks[k]];
            var taskCallback = _restParam(function(err, args) {
                runningTasks--;
                if (args.length <= 1) {
                    args = args[0];
                }
                if (err) {
                    var safeResults = {};
                    _forEachOf(results, function(val, rkey) {
                        safeResults[rkey] = val;
                    });
                    safeResults[k] = args;
                    hasError = true;

                    callback(err, safeResults);
                }
                else {
                    results[k] = args;
                    async.setImmediate(taskComplete);
                }
            });
            var requires = task.slice(0, task.length - 1);
            // prevent dead-locks
            var len = requires.length;
            var dep;
            while (len--) {
                if (!(dep = tasks[requires[len]])) {
                    throw new Error('Has nonexistent dependency in ' + requires.join(', '));
                }
                if (_isArray(dep) && _indexOf(dep, k) >= 0) {
                    throw new Error('Has cyclic dependencies');
                }
            }
            function ready() {
                return runningTasks < concurrency && _reduce(requires, function (a, x) {
                    return (a && results.hasOwnProperty(x));
                }, true) && !results.hasOwnProperty(k);
            }
            if (ready()) {
                runningTasks++;
                task[task.length - 1](taskCallback, results);
            }
            else {
                addListener(listener);
            }
            function listener() {
                if (ready()) {
                    runningTasks++;
                    removeListener(listener);
                    task[task.length - 1](taskCallback, results);
                }
            }
        });
    };



    async.retry = function(times, task, callback) {
        var DEFAULT_TIMES = 5;
        var DEFAULT_INTERVAL = 0;

        var attempts = [];

        var opts = {
            times: DEFAULT_TIMES,
            interval: DEFAULT_INTERVAL
        };

        function parseTimes(acc, t){
            if(typeof t === 'number'){
                acc.times = parseInt(t, 10) || DEFAULT_TIMES;
            } else if(typeof t === 'object'){
                acc.times = parseInt(t.times, 10) || DEFAULT_TIMES;
                acc.interval = parseInt(t.interval, 10) || DEFAULT_INTERVAL;
            } else {
                throw new Error('Unsupported argument type for \'times\': ' + typeof t);
            }
        }

        var length = arguments.length;
        if (length < 1 || length > 3) {
            throw new Error('Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)');
        } else if (length <= 2 && typeof times === 'function') {
            callback = task;
            task = times;
        }
        if (typeof times !== 'function') {
            parseTimes(opts, times);
        }
        opts.callback = callback;
        opts.task = task;

        function wrappedTask(wrappedCallback, wrappedResults) {
            function retryAttempt(task, finalAttempt) {
                return function(seriesCallback) {
                    task(function(err, result){
                        seriesCallback(!err || finalAttempt, {err: err, result: result});
                    }, wrappedResults);
                };
            }

            function retryInterval(interval){
                return function(seriesCallback){
                    setTimeout(function(){
                        seriesCallback(null);
                    }, interval);
                };
            }

            while (opts.times) {

                var finalAttempt = !(opts.times-=1);
                attempts.push(retryAttempt(opts.task, finalAttempt));
                if(!finalAttempt && opts.interval > 0){
                    attempts.push(retryInterval(opts.interval));
                }
            }

            async.series(attempts, function(done, data){
                data = data[data.length - 1];
                (wrappedCallback || opts.callback)(data.err, data.result);
            });
        }

        // If a callback is passed, run this as a controll flow
        return opts.callback ? wrappedTask() : wrappedTask;
    };

    async.waterfall = function (tasks, callback) {
        callback = _once(callback || noop);
        if (!_isArray(tasks)) {
            var err = new Error('First argument to waterfall must be an array of functions');
            return callback(err);
        }
        if (!tasks.length) {
            return callback();
        }
        function wrapIterator(iterator) {
            return _restParam(function (err, args) {
                if (err) {
                    callback.apply(null, [err].concat(args));
                }
                else {
                    var next = iterator.next();
                    if (next) {
                        args.push(wrapIterator(next));
                    }
                    else {
                        args.push(callback);
                    }
                    ensureAsync(iterator).apply(null, args);
                }
            });
        }
        wrapIterator(async.iterator(tasks))();
    };

    function _parallel(eachfn, tasks, callback) {
        callback = callback || noop;
        var results = _isArrayLike(tasks) ? [] : {};

        eachfn(tasks, function (task, key, callback) {
            task(_restParam(function (err, args) {
                if (args.length <= 1) {
                    args = args[0];
                }
                results[key] = args;
                callback(err);
            }));
        }, function (err) {
            callback(err, results);
        });
    }

    async.parallel = function (tasks, callback) {
        _parallel(async.eachOf, tasks, callback);
    };

    async.parallelLimit = function(tasks, limit, callback) {
        _parallel(_eachOfLimit(limit), tasks, callback);
    };

    async.series = function(tasks, callback) {
        _parallel(async.eachOfSeries, tasks, callback);
    };

    async.iterator = function (tasks) {
        function makeCallback(index) {
            function fn() {
                if (tasks.length) {
                    tasks[index].apply(null, arguments);
                }
                return fn.next();
            }
            fn.next = function () {
                return (index < tasks.length - 1) ? makeCallback(index + 1): null;
            };
            return fn;
        }
        return makeCallback(0);
    };

    async.apply = _restParam(function (fn, args) {
        return _restParam(function (callArgs) {
            return fn.apply(
                null, args.concat(callArgs)
            );
        });
    });

    function _concat(eachfn, arr, fn, callback) {
        var result = [];
        eachfn(arr, function (x, index, cb) {
            fn(x, function (err, y) {
                result = result.concat(y || []);
                cb(err);
            });
        }, function (err) {
            callback(err, result);
        });
    }
    async.concat = doParallel(_concat);
    async.concatSeries = doSeries(_concat);

    async.whilst = function (test, iterator, callback) {
        callback = callback || noop;
        if (test()) {
            var next = _restParam(function(err, args) {
                if (err) {
                    callback(err);
                } else if (test.apply(this, args)) {
                    iterator(next);
                } else {
                    callback.apply(null, [null].concat(args));
                }
            });
            iterator(next);
        } else {
            callback(null);
        }
    };

    async.doWhilst = function (iterator, test, callback) {
        var calls = 0;
        return async.whilst(function() {
            return ++calls <= 1 || test.apply(this, arguments);
        }, iterator, callback);
    };

    async.until = function (test, iterator, callback) {
        return async.whilst(function() {
            return !test.apply(this, arguments);
        }, iterator, callback);
    };

    async.doUntil = function (iterator, test, callback) {
        return async.doWhilst(iterator, function() {
            return !test.apply(this, arguments);
        }, callback);
    };

    async.during = function (test, iterator, callback) {
        callback = callback || noop;

        var next = _restParam(function(err, args) {
            if (err) {
                callback(err);
            } else {
                args.push(check);
                test.apply(this, args);
            }
        });

        var check = function(err, truth) {
            if (err) {
                callback(err);
            } else if (truth) {
                iterator(next);
            } else {
                callback(null);
            }
        };

        test(check);
    };

    async.doDuring = function (iterator, test, callback) {
        var calls = 0;
        async.during(function(next) {
            if (calls++ < 1) {
                next(null, true);
            } else {
                test.apply(this, arguments);
            }
        }, iterator, callback);
    };

    function _queue(worker, concurrency, payload) {
        if (concurrency == null) {
            concurrency = 1;
        }
        else if(concurrency === 0) {
            throw new Error('Concurrency must not be zero');
        }
        function _insert(q, data, pos, callback) {
            if (callback != null && typeof callback !== "function") {
                throw new Error("task callback must be a function");
            }
            q.started = true;
            if (!_isArray(data)) {
                data = [data];
            }
            if(data.length === 0 && q.idle()) {
                // call drain immediately if there are no tasks
                return async.setImmediate(function() {
                    q.drain();
                });
            }
            _arrayEach(data, function(task) {
                var item = {
                    data: task,
                    callback: callback || noop
                };

                if (pos) {
                    q.tasks.unshift(item);
                } else {
                    q.tasks.push(item);
                }

                if (q.tasks.length === q.concurrency) {
                    q.saturated();
                }
            });
            async.setImmediate(q.process);
        }
        function _next(q, tasks) {
            return function(){
                workers -= 1;

                var removed = false;
                var args = arguments;
                _arrayEach(tasks, function (task) {
                    _arrayEach(workersList, function (worker, index) {
                        if (worker === task && !removed) {
                            workersList.splice(index, 1);
                            removed = true;
                        }
                    });

                    task.callback.apply(task, args);
                });
                if (q.tasks.length + workers === 0) {
                    q.drain();
                }
                q.process();
            };
        }

        var workers = 0;
        var workersList = [];
        var q = {
            tasks: [],
            concurrency: concurrency,
            payload: payload,
            saturated: noop,
            empty: noop,
            drain: noop,
            started: false,
            paused: false,
            push: function (data, callback) {
                _insert(q, data, false, callback);
            },
            kill: function () {
                q.drain = noop;
                q.tasks = [];
            },
            unshift: function (data, callback) {
                _insert(q, data, true, callback);
            },
            process: function () {
                while(!q.paused && workers < q.concurrency && q.tasks.length){

                    var tasks = q.payload ?
                        q.tasks.splice(0, q.payload) :
                        q.tasks.splice(0, q.tasks.length);

                    var data = _map(tasks, function (task) {
                        return task.data;
                    });

                    if (q.tasks.length === 0) {
                        q.empty();
                    }
                    workers += 1;
                    workersList.push(tasks[0]);
                    var cb = only_once(_next(q, tasks));
                    worker(data, cb);
                }
            },
            length: function () {
                return q.tasks.length;
            },
            running: function () {
                return workers;
            },
            workersList: function () {
                return workersList;
            },
            idle: function() {
                return q.tasks.length + workers === 0;
            },
            pause: function () {
                q.paused = true;
            },
            resume: function () {
                if (q.paused === false) { return; }
                q.paused = false;
                var resumeCount = Math.min(q.concurrency, q.tasks.length);
                // Need to call q.process once per concurrent
                // worker to preserve full concurrency after pause
                for (var w = 1; w <= resumeCount; w++) {
                    async.setImmediate(q.process);
                }
            }
        };
        return q;
    }

    async.queue = function (worker, concurrency) {
        var q = _queue(function (items, cb) {
            worker(items[0], cb);
        }, concurrency, 1);

        return q;
    };

    async.priorityQueue = function (worker, concurrency) {

        function _compareTasks(a, b){
            return a.priority - b.priority;
        }

        function _binarySearch(sequence, item, compare) {
            var beg = -1,
                end = sequence.length - 1;
            while (beg < end) {
                var mid = beg + ((end - beg + 1) >>> 1);
                if (compare(item, sequence[mid]) >= 0) {
                    beg = mid;
                } else {
                    end = mid - 1;
                }
            }
            return beg;
        }

        function _insert(q, data, priority, callback) {
            if (callback != null && typeof callback !== "function") {
                throw new Error("task callback must be a function");
            }
            q.started = true;
            if (!_isArray(data)) {
                data = [data];
            }
            if(data.length === 0) {
                // call drain immediately if there are no tasks
                return async.setImmediate(function() {
                    q.drain();
                });
            }
            _arrayEach(data, function(task) {
                var item = {
                    data: task,
                    priority: priority,
                    callback: typeof callback === 'function' ? callback : noop
                };

                q.tasks.splice(_binarySearch(q.tasks, item, _compareTasks) + 1, 0, item);

                if (q.tasks.length === q.concurrency) {
                    q.saturated();
                }
                async.setImmediate(q.process);
            });
        }

        // Start with a normal queue
        var q = async.queue(worker, concurrency);

        // Override push to accept second parameter representing priority
        q.push = function (data, priority, callback) {
            _insert(q, data, priority, callback);
        };

        // Remove unshift function
        delete q.unshift;

        return q;
    };

    async.cargo = function (worker, payload) {
        return _queue(worker, 1, payload);
    };

    function _console_fn(name) {
        return _restParam(function (fn, args) {
            fn.apply(null, args.concat([_restParam(function (err, args) {
                if (typeof console === 'object') {
                    if (err) {
                        if (console.error) {
                            console.error(err);
                        }
                    }
                    else if (console[name]) {
                        _arrayEach(args, function (x) {
                            console[name](x);
                        });
                    }
                }
            })]));
        });
    }
    async.log = _console_fn('log');
    async.dir = _console_fn('dir');
    /*async.info = _console_fn('info');
    async.warn = _console_fn('warn');
    async.error = _console_fn('error');*/

    async.memoize = function (fn, hasher) {
        var memo = {};
        var queues = {};
        var has = Object.prototype.hasOwnProperty;
        hasher = hasher || identity;
        var memoized = _restParam(function memoized(args) {
            var callback = args.pop();
            var key = hasher.apply(null, args);
            if (has.call(memo, key)) {
                async.setImmediate(function () {
                    callback.apply(null, memo[key]);
                });
            }
            else if (has.call(queues, key)) {
                queues[key].push(callback);
            }
            else {
                queues[key] = [callback];
                fn.apply(null, args.concat([_restParam(function (args) {
                    memo[key] = args;
                    var q = queues[key];
                    delete queues[key];
                    for (var i = 0, l = q.length; i < l; i++) {
                        q[i].apply(null, args);
                    }
                })]));
            }
        });
        memoized.memo = memo;
        memoized.unmemoized = fn;
        return memoized;
    };

    async.unmemoize = function (fn) {
        return function () {
            return (fn.unmemoized || fn).apply(null, arguments);
        };
    };

    function _times(mapper) {
        return function (count, iterator, callback) {
            mapper(_range(count), iterator, callback);
        };
    }

    async.times = _times(async.map);
    async.timesSeries = _times(async.mapSeries);
    async.timesLimit = function (count, limit, iterator, callback) {
        return async.mapLimit(_range(count), limit, iterator, callback);
    };

    async.seq = function (/* functions... */) {
        var fns = arguments;
        return _restParam(function (args) {
            var that = this;

            var callback = args[args.length - 1];
            if (typeof callback == 'function') {
                args.pop();
            } else {
                callback = noop;
            }

            async.reduce(fns, args, function (newargs, fn, cb) {
                fn.apply(that, newargs.concat([_restParam(function (err, nextargs) {
                    cb(err, nextargs);
                })]));
            },
            function (err, results) {
                callback.apply(that, [err].concat(results));
            });
        });
    };

    async.compose = function (/* functions... */) {
        return async.seq.apply(null, Array.prototype.reverse.call(arguments));
    };


    function _applyEach(eachfn) {
        return _restParam(function(fns, args) {
            var go = _restParam(function(args) {
                var that = this;
                var callback = args.pop();
                return eachfn(fns, function (fn, _, cb) {
                    fn.apply(that, args.concat([cb]));
                },
                callback);
            });
            if (args.length) {
                return go.apply(this, args);
            }
            else {
                return go;
            }
        });
    }

    async.applyEach = _applyEach(async.eachOf);
    async.applyEachSeries = _applyEach(async.eachOfSeries);


    async.forever = function (fn, callback) {
        var done = only_once(callback || noop);
        var task = ensureAsync(fn);
        function next(err) {
            if (err) {
                return done(err);
            }
            task(next);
        }
        next();
    };

    function ensureAsync(fn) {
        return _restParam(function (args) {
            var callback = args.pop();
            args.push(function () {
                var innerArgs = arguments;
                if (sync) {
                    async.setImmediate(function () {
                        callback.apply(null, innerArgs);
                    });
                } else {
                    callback.apply(null, innerArgs);
                }
            });
            var sync = true;
            fn.apply(this, args);
            sync = false;
        });
    }

    async.ensureAsync = ensureAsync;

    async.constant = _restParam(function(values) {
        var args = [null].concat(values);
        return function (callback) {
            return callback.apply(this, args);
        };
    });

    async.wrapSync =
    async.asyncify = function asyncify(func) {
        return _restParam(function (args) {
            var callback = args.pop();
            var result;
            try {
                result = func.apply(this, args);
            } catch (e) {
                return callback(e);
            }
            // if result is Promise object
            if (_isObject(result) && typeof result.then === "function") {
                result.then(function(value) {
                    callback(null, value);
                })["catch"](function(err) {
                    callback(err.message ? err : new Error(err));
                });
            } else {
                callback(null, result);
            }
        });
    };

    // Node.js
    if (typeof module === 'object' && module.exports) {
        module.exports = async;
    }
    // AMD / RequireJS
    else if (typeof define === 'function' && define.amd) {
        define([], function () {
            return async;
        });
    }
    // included directly via <script> tag
    else {
        root.async = async;
    }

}());

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"_process":15}],15:[function(require,module,exports){
// shim for using process in browser

var process = module.exports = {};
var queue = [];
var draining = false;
var currentQueue;
var queueIndex = -1;

function cleanUpNextTick() {
    draining = false;
    if (currentQueue.length) {
        queue = currentQueue.concat(queue);
    } else {
        queueIndex = -1;
    }
    if (queue.length) {
        drainQueue();
    }
}

function drainQueue() {
    if (draining) {
        return;
    }
    var timeout = setTimeout(cleanUpNextTick);
    draining = true;

    var len = queue.length;
    while(len) {
        currentQueue = queue;
        queue = [];
        while (++queueIndex < len) {
            if (currentQueue) {
                currentQueue[queueIndex].run();
            }
        }
        queueIndex = -1;
        len = queue.length;
    }
    currentQueue = null;
    draining = false;
    clearTimeout(timeout);
}

process.nextTick = function (fun) {
    var args = new Array(arguments.length - 1);
    if (arguments.length > 1) {
        for (var i = 1; i < arguments.length; i++) {
            args[i - 1] = arguments[i];
        }
    }
    queue.push(new Item(fun, args));
    if (queue.length === 1 && !draining) {
        setTimeout(drainQueue, 0);
    }
};

// v8 likes predictible objects
function Item(fun, array) {
    this.fun = fun;
    this.array = array;
}
Item.prototype.run = function () {
    this.fun.apply(null, this.array);
};
process.title = 'browser';
process.browser = true;
process.env = {};
process.argv = [];
process.version = ''; // empty string to avoid regexp issues
process.versions = {};

function noop() {}

process.on = noop;
process.addListener = noop;
process.once = noop;
process.off = noop;
process.removeListener = noop;
process.removeAllListeners = noop;
process.emit = noop;

process.binding = function (name) {
    throw new Error('process.binding is not supported');
};

process.cwd = function () { return '/' };
process.chdir = function (dir) {
    throw new Error('process.chdir is not supported');
};
process.umask = function() { return 0; };

},{}]},{},[1])(1)
});
</script><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-46457317-5', 'auto');
</script><script>//~~WEBPATH~~javascript/closure/base.js
var f;
//~~WEBPATH~~javascript/closure/deps.js
//~~WEBPATH~~/polymer/polymer-micro.html.js
(function(){function a(){document.body.removeAttribute("unresolved")}window.WebComponents?addEventListener("WebComponentsReady",a):"interactive"===document.readyState||"complete"===document.readyState?a():addEventListener("DOMContentLoaded",a)})();var da=window,T=window.Polymer||{};if(!T.noUrlSettings)for(var ea=location.search.slice(1).split("\x26"),ha=0,ja;ha<ea.length&&(ja=ea[ha]);ha++)ja=ja.split("\x3d"),ja[0]&&(T[ja[0]]=ja[1]||!0);T.wantShadow="shadow"===T.dom;T.hasShadow=!!Element.prototype.createShadowRoot;
T.nativeShadow=T.hasShadow&&!window.ShadowDOMPolyfill;T.useShadow=T.wantShadow&&T.hasShadow;T.hasNativeImports="import"in document.createElement("link");T.useNativeImports=T.hasNativeImports;T.useNativeCustomElements=!window.CustomElements||window.CustomElements.useNative;T.useNativeShadow=T.useShadow&&T.nativeShadow;T.usePolyfillProto=!T.useNativeCustomElements&&!Object.__proto__;
T.hasNativeCSSProperties=!navigator.userAgent.match("AppleWebKit/601")&&window.CSS&&CSS.supports&&CSS.supports("box-shadow","0 0 0 var(--foo)");T.useNativeCSSProperties=T.hasNativeCSSProperties&&T.lazyRegister&&T.useNativeCSSProperties;T.isIE=navigator.userAgent.match("Trident");da.Polymer={Settings:T};
(function(){function a(a){var b=Polymer.Base;a.extends&&(b=Polymer.Base._getExtendedPrototype(a.extends));a=Polymer.Base.chainObject(a,b);a.registerCallback();return a}var b=window.Polymer;window.Polymer=function(b){"function"===typeof b&&(b=b.prototype);b||(b={});b=a(b);var c=b===b.constructor.prototype?b.constructor:null,d={prototype:b};b.extends&&(d.extends=b.extends);Polymer.telemetry._registrate(b);b=document.registerElement(b.is,d);return c||b};if(b)for(var c in b)Polymer[c]=b[c];Polymer.Class=
function(b){b.factoryImpl||(b.factoryImpl=function(){});return a(b).constructor}})();Polymer.telemetry={registrations:[],_regLog:function(a){console.log("["+a.is+"]: registered")},_registrate:function(a){this.registrations.push(a);Polymer.log&&this._regLog(a)},dumpRegistrations:function(){this.registrations.forEach(this._regLog)}};Object.defineProperty(window,"currentImport",{enumerable:!0,configurable:!0,get:function(){return(document._currentScript||document.currentScript||{}).ownerDocument}});
Polymer.RenderStatus={_ready:!1,_callbacks:[],whenReady:function(a){this._ready?a():this._callbacks.push(a)},_makeReady:function(){this._ready=!0;for(var a=0;a<this._callbacks.length;a++)this._callbacks[a]();this._callbacks=[]},_catchFirstRender:function(){requestAnimationFrame(function(){Polymer.RenderStatus._makeReady()})},_afterNextRenderQueue:[],_waitingNextRender:!1,afterNextRender:function(a,b,c){this._watchNextRender();this._afterNextRenderQueue.push([a,b,c])},hasRendered:function(){return this._ready},
_watchNextRender:function(){if(!this._waitingNextRender){this._waitingNextRender=!0;var a=function(){Polymer.RenderStatus._flushNextRender()};this._ready?requestAnimationFrame(a):this.whenReady(a)}},_flushNextRender:function(){var a=this;setTimeout(function(){a._flushRenderCallbacks(a._afterNextRenderQueue);a._afterNextRenderQueue=[];a._waitingNextRender=!1})},_flushRenderCallbacks:function(a){for(var b=0,c;b<a.length;b++)c=a[b],c[1].apply(c[0],c[2]||Polymer.nar)}};
window.HTMLImports?HTMLImports.whenReady(function(){Polymer.RenderStatus._catchFirstRender()}):Polymer.RenderStatus._catchFirstRender();Polymer.ImportStatus=Polymer.RenderStatus;Polymer.ImportStatus.whenLoaded=Polymer.ImportStatus.whenReady;
(function(){var a=Polymer.Settings;Polymer.Base={__isPolymerInstance__:!0,_addFeature:function(a){this.mixin(this,a)},registerCallback:function(){if("max"!==a.lazyRegister){this._desugarBehaviors();for(var b=0,c;b<this.behaviors.length;b++)c=this.behaviors[b],c.beforeRegister&&c.beforeRegister.call(this)}this.beforeRegister&&this.beforeRegister();this._registerFeatures();a.lazyRegister||this.ensureRegisterFinished()},createdCallback:function(){if(a.disableUpgradeEnabled){if(this.hasAttribute("disable-upgrade")){this._propertySetter=
b;this._configValue=null;this.__data__={};return}this.__hasInitialized=!0}this.__initialize()},__initialize:function(){this.__hasRegisterFinished||this._ensureRegisterFinished(this.__proto__);Polymer.telemetry.instanceCount++;this.root=this;for(var a=0,b;a<this.behaviors.length;a++)b=this.behaviors[a],b.created&&b.created.call(this);this.created&&this.created();this._initFeatures()},ensureRegisterFinished:function(){this._ensureRegisterFinished(this)},_ensureRegisterFinished:function(b){if(b.__hasRegisterFinished!==
b.is||!b.is){if("max"===a.lazyRegister){b._desugarBehaviors();for(var c=0,d;c<b.behaviors.length;c++)d=b.behaviors[c],d.beforeRegister&&d.beforeRegister.call(b)}b.__hasRegisterFinished=b.is;b._finishRegisterFeatures&&b._finishRegisterFeatures();for(c=0;c<b.behaviors.length;c++)d=b.behaviors[c],d.registered&&d.registered.call(b);b.registered&&b.registered();a.usePolyfillProto&&b!==this&&b.extend(this,b)}},attachedCallback:function(){var a=this;Polymer.RenderStatus.whenReady(function(){a.isAttached=
!0;for(var b=0,c;b<a.behaviors.length;b++)c=a.behaviors[b],c.attached&&c.attached.call(a);a.attached&&a.attached()})},detachedCallback:function(){var a=this;Polymer.RenderStatus.whenReady(function(){a.isAttached=!1;for(var b=0,c;b<a.behaviors.length;b++)c=a.behaviors[b],c.detached&&c.detached.call(a);a.detached&&a.detached()})},attributeChangedCallback:function(a,b,c){this._attributeChangedImpl(a);for(var d=0,e;d<this.behaviors.length;d++)e=this.behaviors[d],e.attributeChanged&&e.attributeChanged.call(this,
a,b,c);this.attributeChanged&&this.attributeChanged(a,b,c)},_attributeChangedImpl:function(a){this._setAttributeToProperty(this,a)},extend:function(a,b){if(a&&b)for(var c=Object.getOwnPropertyNames(b),d=0,e;d<c.length&&(e=c[d]);d++)this.copyOwnProperty(e,b,a);return a||b},mixin:function(a,b){for(var c in b)a[c]=b[c];return a},copyOwnProperty:function(a,b,c){(b=Object.getOwnPropertyDescriptor(b,a))&&Object.defineProperty(c,a,b)},_logger:function(a,b){1===b.length&&Array.isArray(b[0])&&(b=b[0]);switch(a){case "log":case "warn":case "error":console[a].apply(console,
b)}},_log:function(){this._logger("log",Array.prototype.slice.call(arguments,0))},_warn:function(){this._logger("warn",Array.prototype.slice.call(arguments,0))},_error:function(){this._logger("error",Array.prototype.slice.call(arguments,0))},_logf:function(){return this._logPrefix.concat(this.is).concat(Array.prototype.slice.call(arguments,0))}};Polymer.Base._logPrefix=window.chrome&&!/edge/i.test(navigator.userAgent)||/firefox/i.test(navigator.userAgent)?["%c[%s::%s]:","font-weight: bold; background-color:#EEEE00;"]:
["[%s::%s]:"];Polymer.Base.chainObject=function(a,b){a&&b&&a!==b&&(Object.__proto__||(a=Polymer.Base.extend(Object.create(b),a)),a.__proto__=b);return a};Polymer.Base=Polymer.Base.chainObject(Polymer.Base,HTMLElement.prototype);Polymer.BaseDescriptors={};if(a.disableUpgradeEnabled){var b=function(a,b){this.__data__[a]=b};var c=Polymer.Base.attributeChangedCallback;Polymer.Base.attributeChangedCallback=function(a,b,g){this.__hasInitialized||"disable-upgrade"!==a||(this.__hasInitialized=!0,this._propertySetter=
Polymer.Bind._modelApi._propertySetter,this._configValue=Polymer.Base._configValue,this.__initialize());c.call(this,a,b,g)}}Polymer.instanceof=window.CustomElements?CustomElements.instanceof:function(a,b){return a instanceof b};Polymer.isInstance=function(a){return!(!a||!a.__isPolymerInstance__)};Polymer.telemetry.instanceCount=0})();
(function(){function a(){return document.createElement("dom-module")}var b={},c={};a.prototype=Object.create(HTMLElement.prototype);Polymer.Base.mixin(a.prototype,{createdCallback:function(){this.register()},register:function(a){if(a=a||this.id||this.getAttribute("name")||this.getAttribute("is"))this.id=a,b[a]=this,c[a.toLowerCase()]=this},import:function(a,g){if(a){var e=b[a]||c[a.toLowerCase()];if(!e){if(d)for(var e=document._currentScript||document.currentScript,e=(e&&e.ownerDocument||document).querySelectorAll("dom-module"),
k=e.length-1,l;0<=k&&(l=e[k])&&!l.__upgraded__;k--)CustomElements.upgrade(l);e=b[a]||c[a.toLowerCase()]}e&&g&&(e=e.querySelector(g));return e}}});Object.defineProperty(a.prototype,"constructor",{value:a,configurable:!0,writable:!0});var d=window.CustomElements&&!CustomElements.useNative;document.registerElement("dom-module",a)})();
Polymer.Base._addFeature({_prepIs:function(){if(!this.is){var a=(document._currentScript||document.currentScript).parentNode;"dom-module"===a.localName&&(this.is=a.id||a.getAttribute("name")||a.getAttribute("is"))}this.is&&(this.is=this.is.toLowerCase())}});
Polymer.Base._addFeature({behaviors:[],_desugarBehaviors:function(){this.behaviors.length&&(this.behaviors=this._desugarSomeBehaviors(this.behaviors))},_desugarSomeBehaviors:function(a){var b=[];a=this._flattenBehaviorsList(a);for(var c=a.length-1;0<=c;c--){var d=a[c];-1===b.indexOf(d)&&(this._mixinBehavior(d),b.unshift(d))}return b},_flattenBehaviorsList:function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c];d instanceof Array?b=b.concat(this._flattenBehaviorsList(d)):d?b.push(d):this._warn(this._logf("_flattenBehaviorsList",
"behavior is null, check for missing or 404 import"))}return b},_mixinBehavior:function(a){for(var b=Object.getOwnPropertyNames(a),c=a._noAccessors,d=0,e;d<b.length&&(e=b[d]);d++)Polymer.Base._behaviorProperties[e]||this.hasOwnProperty(e)||(c?this[e]=a[e]:this.copyOwnProperty(e,a,this))},_prepBehaviors:function(){this._prepFlattenedBehaviors(this.behaviors)},_prepFlattenedBehaviors:function(a){for(var b=0,c=a.length;b<c;b++)this._prepBehavior(a[b]);this._prepBehavior(this)},_marshalBehaviors:function(){for(var a=
0;a<this.behaviors.length;a++)this._marshalBehavior(this.behaviors[a]);this._marshalBehavior(this)}});Polymer.Base._behaviorProperties={hostAttributes:!0,beforeRegister:!0,registered:!0,properties:!0,observers:!0,listeners:!0,created:!0,attached:!0,detached:!0,attributeChanged:!0,ready:!0,_noAccessors:!0};
Polymer.Base._addFeature({_getExtendedPrototype:function(a){return this._getExtendedNativePrototype(a)},_nativePrototypes:{},_getExtendedNativePrototype:function(a){var b=this._nativePrototypes[a];if(!b){for(var b=Object.create(this.getNativePrototype(a)),c=Object.getOwnPropertyNames(Polymer.Base),d=0,e;d<c.length&&(e=c[d]);d++)Polymer.BaseDescriptors[e]||(b[e]=Polymer.Base[e]);Object.defineProperties(b,Polymer.BaseDescriptors);this._nativePrototypes[a]=b}return b},getNativePrototype:function(a){return Object.getPrototypeOf(document.createElement(a))}});
Polymer.Base._addFeature({_prepConstructor:function(){function a(){return this._factory(arguments)}this._factoryArgs=this.extends?[this.extends,this.is]:[this.is];this.hasOwnProperty("extends")&&(a.extends=this.extends);Object.defineProperty(this,"constructor",{value:a,writable:!0,configurable:!0});a.prototype=this},_factory:function(a){var b=document.createElement.apply(document,this._factoryArgs);this.factoryImpl&&this.factoryImpl.apply(b,a);return b}});Polymer.nob=Object.create(null);
Polymer.Base._addFeature({getPropertyInfo:function(a){var b=this._getPropertyInfo(a,this.properties);if(!b)for(var c=0;c<this.behaviors.length;c++)if(b=this._getPropertyInfo(a,this.behaviors[c].properties))return b;return b||Polymer.nob},_getPropertyInfo:function(a,b){var c=b&&b[a];"function"===typeof c&&(c=b[a]={type:c});c&&(c.defined=!0);return c},_prepPropertyInfo:function(){this._propertyInfo={};for(var a=0;a<this.behaviors.length;a++)this._addPropertyInfo(this._propertyInfo,this.behaviors[a].properties);
this._addPropertyInfo(this._propertyInfo,this.properties);this._addPropertyInfo(this._propertyInfo,this._propertyEffects)},_addPropertyInfo:function(a,b){if(b){var c;for(c in b){var d=a[c];var e=b[c];if("_"!==c[0]||e.readOnly)a[c]?(d.type||(d.type=e.type),d.readOnly||(d.readOnly=e.readOnly)):a[c]={type:"function"===typeof e?e:e.type,readOnly:e.readOnly,attribute:Polymer.CaseMap.camelToDashCase(c)}}}}});var ka={configurable:!0,writable:!0,enumerable:!0,value:{}};
Polymer.BaseDescriptors.properties=ka;Object.defineProperty(Polymer.Base,"properties",ka);Polymer.CaseMap={_caseMap:{},_rx:{dashToCamel:/-[a-z]/g,camelToDash:/([A-Z])/g},dashToCamelCase:function(a){return this._caseMap[a]||(this._caseMap[a]=0>a.indexOf("-")?a:a.replace(this._rx.dashToCamel,function(a){return a[1].toUpperCase()}))},camelToDashCase:function(a){return this._caseMap[a]||(this._caseMap[a]=a.replace(this._rx.camelToDash,"-$1").toLowerCase())}};
Polymer.Base._addFeature({_addHostAttributes:function(a){this._aggregatedAttributes||(this._aggregatedAttributes={});a&&this.mixin(this._aggregatedAttributes,a)},_marshalHostAttributes:function(){this._aggregatedAttributes&&this._applyAttributes(this,this._aggregatedAttributes)},_applyAttributes:function(a,b){for(var c in b)this.hasAttribute(c)||"class"===c||this.serializeValueToAttribute(b[c],c,this)},_marshalAttributes:function(){this._takeAttributesToModel(this)},_takeAttributesToModel:function(a){if(this.hasAttributes())for(var b in this._propertyInfo){var c=
this._propertyInfo[b];this.hasAttribute(c.attribute)&&this._setAttributeToProperty(a,c.attribute,b,c)}},_setAttributeToProperty:function(a,b,c,d){this._serializing||(c=c||Polymer.CaseMap.dashToCamelCase(b),(d=d||this._propertyInfo&&this._propertyInfo[c])&&!d.readOnly&&(b=this.getAttribute(b),a[c]=this.deserialize(b,d.type)))},_serializing:!1,reflectPropertyToAttribute:function(a,b,c){this._serializing=!0;c=void 0===c?this[a]:c;this.serializeValueToAttribute(c,b||Polymer.CaseMap.camelToDashCase(a));
this._serializing=!1},serializeValueToAttribute:function(a,b,c){a=this.serialize(a);c=c||this;void 0===a?c.removeAttribute(b):c.setAttribute(b,a)},deserialize:function(a,b){switch(b){case Number:a=Number(a);break;case Boolean:a=null!=a;break;case Object:try{a=JSON.parse(a)}catch(c){}break;case Array:try{a=JSON.parse(a)}catch(c){a=null,console.warn("Polymer::Attributes: couldn`t decode Array as JSON")}break;case Date:a=new Date(a)}return a},serialize:function(a){switch(typeof a){case "boolean":return a?
"":void 0;case "object":if(a instanceof Date)return a.toString();if(a)try{return JSON.stringify(a)}catch(b){return""}default:return null!=a?a:void 0}}});Polymer.version="1.9.2";Polymer.Base._addFeature({_registerFeatures:function(){this._prepIs();this._prepBehaviors();this._prepConstructor();this._prepPropertyInfo()},_prepBehavior:function(a){this._addHostAttributes(a.hostAttributes)},_marshalBehavior:function(){},_initFeatures:function(){this._marshalHostAttributes();this._marshalBehaviors()}});
</script>











<script>//~~WEBPATH~~/polymer/polymer-mini.html.js
(function(){function a(a,c){return a.replace(g,function(a,d,e,g){return d+"'"+b(e.replace(/["']/g,""),c)+"'"+g})}function b(a,b){if(a&&k.test(a))return a;b=b.body.__urlResolver||(b.body.__urlResolver=b.createElement("a"));b.href=a;return b.href||a}function c(a){return a.substring(0,a.lastIndexOf("/")+1)}var d,e,g=/(url\()([^)]*)(\))/g,h={"*":["href","src","style","url"],form:["action"]},k=/(^\/)|(^#)|(^[\w-\d]*:)/,l=/\{\{|\[\[/;Polymer.ResolveUrl={resolveCss:a,resolveAttrs:function(c,d){for(var e in h)for(var g=
h[e],k=0,m=g.length,p,v,y;k<m&&(p=g[k]);k++)("*"===e||c.localName===e)&&(y=(v=c.attributes[p])&&v.value)&&0>y.search(l)&&(v.value="style"===p?a(y,d):b(y,d))},resolveUrl:function(a,c){d||(d=document.implementation.createHTMLDocument("temp"),e=d.createElement("base"),d.head.appendChild(e));e.href=c;return b(a,d)},pathFromUrl:c};Polymer.rootPath=Polymer.Settings.rootPath||c(document.baseURI||window.location.href)})();
Polymer.Base._addFeature({_prepTemplate:function(){var a;void 0===this._template&&(this._template=(a=Polymer.DomModule.import(this.is))&&a.querySelector("template"));if(a){var b=a.getAttribute("assetpath")||"";a=Polymer.ResolveUrl.resolveUrl(b,a.ownerDocument.baseURI);this._importPath=Polymer.ResolveUrl.pathFromUrl(a)}else this._importPath="";this._template&&this._template.hasAttribute("is")&&this._warn(this._logf("_prepTemplate","top-level Polymer template must not be a type-extension, found",this._template,
"Move inside simple \x3ctemplate\x3e."));this._template&&!this._template.content&&window.HTMLTemplateElement&&HTMLTemplateElement.decorate&&HTMLTemplateElement.decorate(this._template)},_stampTemplate:function(){this._template&&(this.root=this.instanceTemplate(this._template))},instanceTemplate:function(a){return document.importNode(a._content||a.content,!0)}});
(function(){var a=Polymer.Base.attachedCallback,b=Polymer.Base.detachedCallback;Polymer.Base._addFeature({_hostStack:[],ready:function(){},_registerHost:function(a){(this.dataHost=a=a||Polymer.Base._hostStack[Polymer.Base._hostStack.length-1])&&a._clients&&a._clients.push(this);this._clients=null;this._clientsReadied=!1},_beginHosting:function(){Polymer.Base._hostStack.push(this);this._clients||(this._clients=[])},_endHosting:function(){Polymer.Base._hostStack.pop()},_tryReady:function(){this._readied=
!1;this._canReady()&&this._ready()},_canReady:function(){return!this.dataHost||this.dataHost._clientsReadied},_ready:function(){this._beforeClientsReady();this._template&&(this._setupRoot(),this._readyClients());this._clientsReadied=!0;this._clients=null;this._afterClientsReady();this._readySelf()},_readyClients:function(){this._beginDistribute();var a=this._clients;if(a)for(var b=0,e=a.length,g;b<e&&(g=a[b]);b++)g._ready();this._finishDistribute()},_readySelf:function(){for(var a=0,b;a<this.behaviors.length;a++)b=
this.behaviors[a],b.ready&&b.ready.call(this);this.ready&&this.ready();this._readied=!0;this._attachedPending&&(this._attachedPending=!1,this.attachedCallback())},_beforeClientsReady:function(){},_afterClientsReady:function(){},_beforeAttached:function(){},attachedCallback:function(){this._readied?(this._beforeAttached(),a.call(this)):this._attachedPending=!0},detachedCallback:function(){this._readied?b.call(this):this._attachedPending=!1}})})();
Polymer.ArraySplice=function(){function a(a,b){return{index:a,removed:[],addedCount:b}}function b(){}b.prototype={calcEditDistances:function(a,b,e,g,h,k){k=k-h+1;e=e-b+1;for(var c=Array(k),d=0;d<k;d++)c[d]=Array(e),c[d][0]=d;for(var p=0;p<e;p++)c[0][p]=p;for(d=1;d<k;d++)for(p=1;p<e;p++)if(this.equals(a[b+p-1],g[h+d-1]))c[d][p]=c[d-1][p-1];else{var r=c[d-1][p]+1,n=c[d][p-1]+1;c[d][p]=r<n?r:n}return c},spliceOperationsFromEditDistances:function(a){for(var b=a.length-1,c=a[0].length-1,g=a[b][c],h=[];0<
b||0<c;)if(0==b)h.push(2),c--;else if(0==c)h.push(3),b--;else{var k=a[b-1][c-1],l=a[b-1][c],m=a[b][c-1];var p=l<m?l<k?l:k:m<k?m:k;p==k?(k==g?h.push(0):(h.push(1),g=k),b--,c--):p==l?(h.push(3),b--,g=l):(h.push(2),c--,g=m)}h.reverse();return h},calcSplices:function(b,d,e,g,h,k){var c=0,m=0,p=Math.min(e-d,k-h);0==d&&0==h&&(c=this.sharedPrefix(b,g,p));e==b.length&&k==g.length&&(m=this.sharedSuffix(b,g,p-c));d+=c;h+=c;e-=m;k-=m;if(0==e-d&&0==k-h)return[];if(d==e){for(b=a(d,0);h<k;)b.removed.push(g[h++]);
return[b]}if(h==k)return[a(d,e-d)];k=this.spliceOperationsFromEditDistances(this.calcEditDistances(b,d,e,g,h,k));b=void 0;e=[];for(c=0;c<k.length;c++)switch(k[c]){case 0:b&&(e.push(b),b=void 0);d++;h++;break;case 1:b||(b=a(d,0));b.addedCount++;d++;b.removed.push(g[h]);h++;break;case 2:b||(b=a(d,0));b.addedCount++;d++;break;case 3:b||(b=a(d,0)),b.removed.push(g[h]),h++}b&&e.push(b);return e},sharedPrefix:function(a,b,e){for(var c=0;c<e;c++)if(!this.equals(a[c],b[c]))return c;return e},sharedSuffix:function(a,
b,e){for(var c=a.length,d=b.length,k=0;k<e&&this.equals(a[--c],b[--d]);)k++;return k},calculateSplices:function(a,b){return this.calcSplices(a,0,a.length,b,0,b.length)},equals:function(a,b){return a===b}};return new b}();
Polymer.domInnerHTML=function(){function a(a){switch(a){case "\x26":return"\x26amp;";case "\x3c":return"\x26lt;";case "\x3e":return"\x26gt;";case '"':return"\x26quot;";case "\u00a0":return"\x26nbsp;"}}function b(a){for(var b={},c=0;c<a.length;c++)b[a[c]]=!0;return b}function c(b,l){b instanceof HTMLTemplateElement&&(b=b.content);for(var k="",p=Polymer.dom(b).childNodes,r=0,n=p.length,t;r<n&&(t=p[r]);r++){a:{var q=t;var u=b;var v=l;switch(q.nodeType){case Node.ELEMENT_NODE:for(var y=q.localName,z=
"\x3c"+y,A=q.attributes,x=0;u=A[x];x++)z+=" "+u.name+'\x3d"'+u.value.replace(d,a)+'"';z+="\x3e";q=g[y]?z:z+c(q,v)+"\x3c/"+y+"\x3e";break a;case Node.TEXT_NODE:q=q.data;q=u&&h[u.localName]?q:q.replace(e,a);break a;case Node.COMMENT_NODE:q="\x3c!--"+q.data+"--\x3e";break a;default:throw console.error(q),Error("not implemented");}}k+=q}return k}var d=/[&\u00A0"]/g,e=/[&\u00A0<>]/g,g=b("area base br col command embed hr img input keygen link meta param source track wbr".split(" ")),h=b("style script xmp iframe noembed noframes plaintext noscript".split(" "));
return{getInnerHTML:c}}();
(function(){var a=Element.prototype.insertBefore,b=Element.prototype.appendChild,c=Element.prototype.removeChild;Polymer.TreeApi={arrayCopyChildNodes:function(a){var b=[],c=0;for(a=a.firstChild;a;a=a.nextSibling)b[c++]=a;return b},arrayCopyChildren:function(a){var b=[],c=0;for(a=a.firstElementChild;a;a=a.nextElementSibling)b[c++]=a;return b},arrayCopy:function(a){for(var b=a.length,c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}};Polymer.TreeApi.Logical={hasParentNode:function(a){return!(!a.__dom||!a.__dom.parentNode)},
hasChildNodes:function(a){return!(!a.__dom||void 0===a.__dom.childNodes)},getChildNodes:function(a){return this.hasChildNodes(a)?this._getChildNodes(a):a.childNodes},_getChildNodes:function(a){if(!a.__dom.childNodes){a.__dom.childNodes=[];for(var b=a.__dom.firstChild;b;b=b.__dom.nextSibling)a.__dom.childNodes.push(b)}return a.__dom.childNodes},getParentNode:function(a){return a.__dom&&void 0!==a.__dom.parentNode?a.__dom.parentNode:a.parentNode},getFirstChild:function(a){return a.__dom&&void 0!==a.__dom.firstChild?
a.__dom.firstChild:a.firstChild},getLastChild:function(a){return a.__dom&&void 0!==a.__dom.lastChild?a.__dom.lastChild:a.lastChild},getNextSibling:function(a){return a.__dom&&void 0!==a.__dom.nextSibling?a.__dom.nextSibling:a.nextSibling},getPreviousSibling:function(a){return a.__dom&&void 0!==a.__dom.previousSibling?a.__dom.previousSibling:a.previousSibling},getFirstElementChild:function(a){return a.__dom&&void 0!==a.__dom.firstChild?this._getFirstElementChild(a):a.firstElementChild},_getFirstElementChild:function(a){for(a=
a.__dom.firstChild;a&&a.nodeType!==Node.ELEMENT_NODE;)a=a.__dom.nextSibling;return a},getLastElementChild:function(a){return a.__dom&&void 0!==a.__dom.lastChild?this._getLastElementChild(a):a.lastElementChild},_getLastElementChild:function(a){for(a=a.__dom.lastChild;a&&a.nodeType!==Node.ELEMENT_NODE;)a=a.__dom.previousSibling;return a},getNextElementSibling:function(a){return a.__dom&&void 0!==a.__dom.nextSibling?this._getNextElementSibling(a):a.nextElementSibling},_getNextElementSibling:function(a){for(a=
a.__dom.nextSibling;a&&a.nodeType!==Node.ELEMENT_NODE;)a=a.__dom.nextSibling;return a},getPreviousElementSibling:function(a){return a.__dom&&void 0!==a.__dom.previousSibling?this._getPreviousElementSibling(a):a.previousElementSibling},_getPreviousElementSibling:function(a){for(a=a.__dom.previousSibling;a&&a.nodeType!==Node.ELEMENT_NODE;)a=a.__dom.previousSibling;return a},saveChildNodes:function(a){if(!this.hasChildNodes(a)){a.__dom=a.__dom||{};a.__dom.firstChild=a.firstChild;a.__dom.lastChild=a.lastChild;
a.__dom.childNodes=[];for(var b=a.firstChild;b;b=b.nextSibling)b.__dom=b.__dom||{},b.__dom.parentNode=a,a.__dom.childNodes.push(b),b.__dom.nextSibling=b.nextSibling,b.__dom.previousSibling=b.previousSibling}},recordInsertBefore:function(a,b,c){b.__dom.childNodes=null;if(a.nodeType===Node.DOCUMENT_FRAGMENT_NODE)for(a=a.firstChild;a;a=a.nextSibling)this._linkNode(a,b,c);else this._linkNode(a,b,c)},_linkNode:function(a,b,c){a.__dom=a.__dom||{};b.__dom=b.__dom||{};c&&(c.__dom=c.__dom||{});a.__dom.previousSibling=
c?c.__dom.previousSibling:b.__dom.lastChild;a.__dom.previousSibling&&(a.__dom.previousSibling.__dom.nextSibling=a);a.__dom.nextSibling=c||null;a.__dom.nextSibling&&(a.__dom.nextSibling.__dom.previousSibling=a);a.__dom.parentNode=b;c?c===b.__dom.firstChild&&(b.__dom.firstChild=a):(b.__dom.lastChild=a,b.__dom.firstChild||(b.__dom.firstChild=a));b.__dom.childNodes=null},recordRemoveChild:function(a,b){a.__dom=a.__dom||{};b.__dom=b.__dom||{};a===b.__dom.firstChild&&(b.__dom.firstChild=a.__dom.nextSibling);
a===b.__dom.lastChild&&(b.__dom.lastChild=a.__dom.previousSibling);var c=a.__dom.previousSibling,d=a.__dom.nextSibling;c&&(c.__dom.nextSibling=d);d&&(d.__dom.previousSibling=c);a.__dom.parentNode=a.__dom.previousSibling=a.__dom.nextSibling=void 0;b.__dom.childNodes=null}};Polymer.TreeApi.Composed={getChildNodes:function(a){return Polymer.TreeApi.arrayCopyChildNodes(a)},getParentNode:function(a){return a.parentNode},clearChildNodes:function(a){a.textContent=""},insertBefore:function(b,c,g){return a.call(b,
c,g||null)},appendChild:function(a,c){return b.call(a,c)},removeChild:function(a,b){return c.call(a,b)}}})();
Polymer.DomApi=function(){function a(b){this.node=d?a.wrap(b):b}var b=Polymer.Settings,c=Polymer.TreeApi,d=b.hasShadow&&!b.nativeShadow;a.wrap=window.wrap?window.wrap:function(a){return a};a.prototype={flush:function(){Polymer.dom.flush()},deepContains:function(a){if(this.node.contains(a))return!0;var b=a;for(a=a.ownerDocument;b&&b!==a&&b!==this.node;)b=Polymer.dom(b).parentNode||b.host;return b===this.node},queryDistributedElements:function(b){for(var c=this.getEffectiveChildNodes(),d=[],e=0,g=c.length,
h;e<g&&(h=c[e]);e++)h.nodeType===Node.ELEMENT_NODE&&a.matchesSelector.call(h,b)&&d.push(h);return d},getEffectiveChildNodes:function(){for(var a=[],b=this.childNodes,c=0,d=b.length,p;c<d&&(p=b[c]);c++)if(p.localName===e)for(var r=g(p).getDistributedNodes(),n=0;n<r.length;n++)a.push(r[n]);else a.push(p);return a},observeNodes:function(b){if(b)return this.observer||(this.observer=this.node.localName===e?new a.DistributedNodesObserver(this):new a.EffectiveNodesObserver(this)),this.observer.addListener(b)},
unobserveNodes:function(a){this.observer&&this.observer.removeListener(a)},notifyObserver:function(){this.observer&&this.observer.notify()},_query:function(a,b,d){b=b||this.node;var e=[];this._queryElements(c.Logical.getChildNodes(b),a,d,e);return e},_queryElements:function(a,b,c,d){for(var e=0,g=a.length,h;e<g&&(h=a[e]);e++)if(h.nodeType===Node.ELEMENT_NODE&&this._queryElement(h,b,c,d))return!0},_queryElement:function(a,b,d,e){var g=b(a);g&&e.push(a);if(d&&d(g))return g;this._queryElements(c.Logical.getChildNodes(a),
b,d,e)}};var e=a.CONTENT="content",g=a.factory=function(b){b=b||document;b.__domApi||(b.__domApi=new a.ctor(b));return b.__domApi};a.hasApi=function(a){return!!a.__domApi};a.ctor=a;Polymer.dom=function(b,c){return b instanceof Event?Polymer.EventApi.factory(b):a.factory(b,c)};b=Element.prototype;a.matchesSelector=b.matches||b.matchesSelector||b.mozMatchesSelector||b.msMatchesSelector||b.oMatchesSelector||b.webkitMatchesSelector;return a}();
(function(){var a=Polymer.DomApi,b=a.factory,c=Polymer.TreeApi,d=Polymer.domInnerHTML.getInnerHTML,e=a.CONTENT;if(!Polymer.Settings.useShadow){var g=Element.prototype.cloneNode,h=Document.prototype.importNode;Polymer.Base.mixin(a.prototype,{_lazyDistribute:function(a){a.shadyRoot&&a.shadyRoot._distributionClean&&(a.shadyRoot._distributionClean=!1,Polymer.dom.addDebouncer(a.debounce("_distribute",a._distributeContent)))},appendChild:function(a){return this.insertBefore(a)},insertBefore:function(d,
g){if(g&&c.Logical.getParentNode(g)!==this.node)throw Error("The ref_node to be inserted before is not a child of this node");if(d.nodeType!==Node.DOCUMENT_FRAGMENT_NODE){var h=c.Logical.getParentNode(d);h?(a.hasApi(h)&&b(h).notifyObserver(),this._removeNode(d)):this._removeOwnerShadyRoot(d)}this._addNode(d,g)||(g&&(g=g.localName===e?this._firstComposedNode(g):g),h=this.node._isShadyRoot?this.node.host:this.node,g?c.Composed.insertBefore(h,d,g):c.Composed.appendChild(h,d));this.notifyObserver();return d},
_addNode:function(a,b){var d=this.getOwnerRoot();if(d){var e=this._maybeAddInsertionPoint(a,this.node);d._invalidInsertionPoints||(d._invalidInsertionPoints=e);this._addNodeToHost(d.host,a)}c.Logical.hasChildNodes(this.node)&&c.Logical.recordInsertBefore(a,this.node,b);if(b=this._maybeDistribute(a)||this.node.shadyRoot)if(a.nodeType===Node.DOCUMENT_FRAGMENT_NODE)for(;a.firstChild;)c.Composed.removeChild(a,a.firstChild);else(d=c.Composed.getParentNode(a))&&c.Composed.removeChild(d,a);return b},removeChild:function(a){if(c.Logical.getParentNode(a)!==
this.node)throw Error("The node to be removed is not a child of this node: "+a);if(!this._removeNode(a)){var b=this.node._isShadyRoot?this.node.host:this.node;b===c.Composed.getParentNode(a)&&c.Composed.removeChild(b,a)}this.notifyObserver();return a},_removeNode:function(a){var d=c.Logical.hasParentNode(a)&&c.Logical.getParentNode(a),e=this._ownerShadyRootForNode(a);if(d){var g=b(a)._maybeDistributeParent();c.Logical.recordRemoveChild(a,d);e&&this._removeDistributedChildren(e,a)&&(e._invalidInsertionPoints=
!0,this._lazyDistribute(e.host))}this._removeOwnerShadyRoot(a);e&&this._removeNodeFromHost(e.host,a);return g},replaceChild:function(a,b){this.insertBefore(a,b);this.removeChild(b);return a},_hasCachedOwnerRoot:function(a){return void 0!==a._ownerShadyRoot},getOwnerRoot:function(){return this._ownerShadyRootForNode(this.node)},_ownerShadyRootForNode:function(a){if(a){var b=a._ownerShadyRoot;void 0===b&&(b=a._isShadyRoot?a:(b=c.Logical.getParentNode(a))?b._isShadyRoot?b:this._ownerShadyRootForNode(b):
null,b||document.documentElement.contains(a))&&(a._ownerShadyRoot=b);return b}},_maybeDistribute:function(a){var d=a.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&!a.__noContent&&b(a).querySelector(e),g=d&&c.Logical.getParentNode(d).nodeType!==Node.DOCUMENT_FRAGMENT_NODE;(a=d||a.localName===e)&&(d=this.getOwnerRoot())&&this._lazyDistribute(d.host);(d=this._nodeNeedsDistribution(this.node))&&this._lazyDistribute(this.node);return d||a&&!g},_maybeAddInsertionPoint:function(a,d){if(a.nodeType!==Node.DOCUMENT_FRAGMENT_NODE||
a.__noContent)a.localName===e&&(c.Logical.saveChildNodes(d),c.Logical.saveChildNodes(a),t=!0);else for(var g=b(a).querySelectorAll(e),h=0,k,l;h<g.length&&(k=g[h]);h++){l=c.Logical.getParentNode(k);l===a&&(l=d);l=this._maybeAddInsertionPoint(k,l);var t=t||l}return t},_updateInsertionPoints:function(a){a=a.shadyRoot._insertionPoints=b(a.shadyRoot).querySelectorAll(e);for(var d=0,g;d<a.length;d++)g=a[d],c.Logical.saveChildNodes(g),c.Logical.saveChildNodes(c.Logical.getParentNode(g))},_nodeNeedsDistribution:function(b){return b&&
b.shadyRoot&&a.hasInsertionPoint(b.shadyRoot)},_addNodeToHost:function(a,b){a._elementAdd&&a._elementAdd(b)},_removeNodeFromHost:function(a,b){a._elementRemove&&a._elementRemove(b)},_removeDistributedChildren:function(a,d){a=a._insertionPoints;for(var e=0;e<a.length;e++){var g=a[e];if(this._contains(d,g))for(var g=b(g).getDistributedNodes(),h=0;h<g.length;h++){var k=!0;var l=g[h],q=c.Composed.getParentNode(l);q&&c.Composed.removeChild(q,l)}}return k},_contains:function(a,b){for(;b;){if(b==a)return!0;
b=c.Logical.getParentNode(b)}},_removeOwnerShadyRoot:function(a){if(this._hasCachedOwnerRoot(a))for(var b=c.Logical.getChildNodes(a),d=0,e=b.length,g;d<e&&(g=b[d]);d++)this._removeOwnerShadyRoot(g);a._ownerShadyRoot=void 0},_firstComposedNode:function(a){for(var c=b(a).getDistributedNodes(),d=0,e=c.length,g,h;d<e&&(g=c[d]);d++)if(h=b(g).getDestinationInsertionPoints(),h[h.length-1]===a)return g},querySelector:function(b){return this._query(function(c){return a.matchesSelector.call(c,b)},this.node,
function(a){return!!a})[0]||null},querySelectorAll:function(b){return this._query(function(c){return a.matchesSelector.call(c,b)},this.node)},getDestinationInsertionPoints:function(){return this.node._destinationInsertionPoints||[]},getDistributedNodes:function(){return this.node._distributedNodes||[]},_clear:function(){for(;this.childNodes.length;)this.removeChild(this.childNodes[0])},setAttribute:function(a,b){this.node.setAttribute(a,b);this._maybeDistributeParent()},removeAttribute:function(a){this.node.removeAttribute(a);
this._maybeDistributeParent()},_maybeDistributeParent:function(){if(this._nodeNeedsDistribution(this.parentNode))return this._lazyDistribute(this.parentNode),!0},cloneNode:function(a){var c=g.call(this.node,!1);if(a){a=this.childNodes;for(var d=b(c),e=0,h;e<a.length;e++)h=b(a[e]).cloneNode(!0),d.appendChild(h)}return c},importNode:function(a,d){var e=this.node instanceof Document?this.node:this.node.ownerDocument,g=h.call(e,a,!1);if(d){a=c.Logical.getChildNodes(a);d=b(g);for(var k=0,l;k<a.length;k++)l=
b(e).importNode(a[k],!0),d.appendChild(l)}return g},_getComposedInnerHTML:function(){return d(this.node,!0)}});Object.defineProperties(a.prototype,{activeElement:{get:function(){var a=document.activeElement;if(!a)return null;var c=!!this.node._isShadyRoot;if(!(this.node===document||c&&this.node.host!==a&&this.node.host.contains(a)))return null;for(c=b(a).getOwnerRoot();c&&c!==this.node;)a=c.host,c=b(a).getOwnerRoot();return this.node===document?c?null:a:c===this.node?a:null},configurable:!0},childNodes:{get:function(){var a=
c.Logical.getChildNodes(this.node);return Array.isArray(a)?a:c.arrayCopyChildNodes(this.node)},configurable:!0},children:{get:function(){return c.Logical.hasChildNodes(this.node)?Array.prototype.filter.call(this.childNodes,function(a){return a.nodeType===Node.ELEMENT_NODE}):c.arrayCopyChildren(this.node)},configurable:!0},parentNode:{get:function(){return c.Logical.getParentNode(this.node)},configurable:!0},firstChild:{get:function(){return c.Logical.getFirstChild(this.node)},configurable:!0},lastChild:{get:function(){return c.Logical.getLastChild(this.node)},
configurable:!0},nextSibling:{get:function(){return c.Logical.getNextSibling(this.node)},configurable:!0},previousSibling:{get:function(){return c.Logical.getPreviousSibling(this.node)},configurable:!0},firstElementChild:{get:function(){return c.Logical.getFirstElementChild(this.node)},configurable:!0},lastElementChild:{get:function(){return c.Logical.getLastElementChild(this.node)},configurable:!0},nextElementSibling:{get:function(){return c.Logical.getNextElementSibling(this.node)},configurable:!0},
previousElementSibling:{get:function(){return c.Logical.getPreviousElementSibling(this.node)},configurable:!0},textContent:{get:function(){var a=this.node.nodeType;if(a===Node.TEXT_NODE||a===Node.COMMENT_NODE)return this.node.textContent;for(var a=[],b=0,c=this.childNodes,d;d=c[b];b++)d.nodeType!==Node.COMMENT_NODE&&a.push(d.textContent);return a.join("")},set:function(a){var b=this.node.nodeType;b===Node.TEXT_NODE||b===Node.COMMENT_NODE?this.node.textContent=a:(this._clear(),a&&this.appendChild(document.createTextNode(a)))},
configurable:!0},innerHTML:{get:function(){var a=this.node.nodeType;return a===Node.TEXT_NODE||a===Node.COMMENT_NODE?null:d(this.node)},set:function(a){var b=this.node.nodeType;if(b!==Node.TEXT_NODE||b!==Node.COMMENT_NODE)for(this._clear(),b=document.createElement("div"),b.innerHTML=a,a=c.arrayCopyChildNodes(b),b=0;b<a.length;b++)this.appendChild(a[b])},configurable:!0}});a.hasInsertionPoint=function(a){return!(!a||!a._insertionPoints.length)}}})();
(function(){var a=Polymer.TreeApi,b=Polymer.DomApi;if(Polymer.Settings.useShadow){Polymer.Base.mixin(b.prototype,{querySelectorAll:function(b){return a.arrayCopy(this.node.querySelectorAll(b))},getOwnerRoot:function(){for(var a=this.node;a;){if(a.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&a.host)return a;a=a.parentNode}},importNode:function(a,b){return(this.node instanceof Document?this.node:this.node.ownerDocument).importNode(a,b)},getDestinationInsertionPoints:function(){var b=this.node.getDestinationInsertionPoints&&
this.node.getDestinationInsertionPoints();return b?a.arrayCopy(b):[]},getDistributedNodes:function(){var b=this.node.getDistributedNodes&&this.node.getDistributedNodes();return b?a.arrayCopy(b):[]}});Object.defineProperties(b.prototype,{activeElement:{get:function(){var a=b.wrap(this.node),c=a.activeElement;return a.contains(c)?c:null},configurable:!0},childNodes:{get:function(){return a.arrayCopyChildNodes(this.node)},configurable:!0},children:{get:function(){return a.arrayCopyChildren(this.node)},
configurable:!0},textContent:{get:function(){return this.node.textContent},set:function(a){return this.node.textContent=a},configurable:!0},innerHTML:{get:function(){return this.node.innerHTML},set:function(a){return this.node.innerHTML=a},configurable:!0}});var c=function(a){b.prototype[a]=function(){return this.node[a].apply(this.node,arguments)}};(function(a){for(var b=0;b<a.length;b++)c(a[b])})("cloneNode appendChild insertBefore removeChild replaceChild setAttribute removeAttribute querySelector".split(" "));
var d=function(a){Object.defineProperty(b.prototype,a,{get:function(){return this.node[a]},configurable:!0})};(function(a){for(var b=0;b<a.length;b++)d(a[b])})("parentNode firstChild lastChild nextSibling previousSibling firstElementChild lastElementChild nextElementSibling previousElementSibling".split(" "))}})();
Polymer.Base.mixin(Polymer.dom,{_flushGuard:0,_FLUSH_MAX:100,_needsTakeRecords:!Polymer.Settings.useNativeCustomElements,_debouncers:[],_staticFlushList:[],_finishDebouncer:null,flush:function(){this._flushGuard=0;for(this._prepareFlush();this._debouncers.length&&this._flushGuard<this._FLUSH_MAX;){for(;this._debouncers.length;)this._debouncers.shift().complete();this._finishDebouncer&&this._finishDebouncer.complete();this._prepareFlush();this._flushGuard++}this._flushGuard>=this._FLUSH_MAX&&console.warn("Polymer.dom.flush aborted. Flush may not be complete.")},
_prepareFlush:function(){this._needsTakeRecords&&CustomElements.takeRecords();for(var a=0;a<this._staticFlushList.length;a++)this._staticFlushList[a]()},addStaticFlush:function(a){this._staticFlushList.push(a)},removeStaticFlush:function(a){a=this._staticFlushList.indexOf(a);0<=a&&this._staticFlushList.splice(a,1)},addDebouncer:function(a){this._debouncers.push(a);this._finishDebouncer=Polymer.Debounce(this._finishDebouncer,this._finishFlush)},_finishFlush:function(){Polymer.dom._debouncers=[]}});
Polymer.EventApi=function(){var a=Polymer.DomApi.ctor,b=Polymer.Settings;a.Event=function(a){this.event=a};a.Event.prototype=b.useShadow?{get rootTarget(){return this.event.path[0]},get localTarget(){return this.event.target},get path(){var a=this.event.path;Array.isArray(a)||(a=Array.prototype.slice.call(a));return a}}:{get rootTarget(){return this.event.target},get localTarget(){for(var a=this.event.currentTarget,a=a&&Polymer.dom(a).getOwnerRoot(),b=this.path,e=0;e<b.length;e++)if(Polymer.dom(b[e]).getOwnerRoot()===
a)return b[e]},get path(){if(!this.event._path){for(var a=[],b=this.rootTarget;b;){a.push(b);var e=Polymer.dom(b).getDestinationInsertionPoints();if(e.length){for(b=0;b<e.length-1;b++)a.push(e[b]);b=e[e.length-1]}else b=Polymer.dom(b).parentNode||b.host}a.push(window);this.event._path=a}return this.event._path}};return{factory:function(b){b.__eventApi||(b.__eventApi=new a.Event(b));return b.__eventApi}}}();
(function(){var a=Polymer.DomApi.ctor,b=Polymer.Settings.useShadow;Object.defineProperty(a.prototype,"classList",{get:function(){this._classList||(this._classList=new a.ClassList(this));return this._classList},configurable:!0});a.ClassList=function(a){this.domApi=a;this.node=a.node};a.ClassList.prototype={add:function(){this.node.classList.add.apply(this.node.classList,arguments);this._distributeParent()},remove:function(){this.node.classList.remove.apply(this.node.classList,arguments);this._distributeParent()},
toggle:function(){this.node.classList.toggle.apply(this.node.classList,arguments);this._distributeParent()},_distributeParent:function(){b||this.domApi._maybeDistributeParent()},contains:function(){return this.node.classList.contains.apply(this.node.classList,arguments)}}})();
(function(){var a=Polymer.DomApi.ctor,b=Polymer.Settings;a.EffectiveNodesObserver=function(a){this.domApi=a;this.node=this.domApi.node;this._listeners=[]};a.EffectiveNodesObserver.prototype={addListener:function(a){this._isSetup||(this._setup(),this._isSetup=!0);a={fn:a,_nodes:[]};this._listeners.push(a);this._scheduleNotify();return a},removeListener:function(a){var b=this._listeners.indexOf(a);0<=b&&(this._listeners.splice(b,1),a._nodes=[]);this._hasListeners()||(this._cleanup(),this._isSetup=!1)},
_setup:function(){this._observeContentElements(this.domApi.childNodes)},_cleanup:function(){this._unobserveContentElements(this.domApi.childNodes)},_hasListeners:function(){return!!this._listeners.length},_scheduleNotify:function(){this._debouncer&&this._debouncer.stop();this._debouncer=Polymer.Debounce(this._debouncer,this._notify);this._debouncer.context=this;Polymer.dom.addDebouncer(this._debouncer)},notify:function(){this._hasListeners()&&this._scheduleNotify()},_notify:function(){this._beforeCallListeners();
this._callListeners()},_beforeCallListeners:function(){this._updateContentElements()},_updateContentElements:function(){this._observeContentElements(this.domApi.childNodes)},_observeContentElements:function(a){for(var b=0,c;b<a.length&&(c=a[b]);b++)this._isContent(c)&&(c.__observeNodesMap=c.__observeNodesMap||new WeakMap,c.__observeNodesMap.has(this)||c.__observeNodesMap.set(this,this._observeContent(c)))},_observeContent:function(a){var b=this;a=Polymer.dom(a).observeNodes(function(){b._scheduleNotify()});
a._avoidChangeCalculation=!0;return a},_unobserveContentElements:function(a){for(var b=0,c,d;b<a.length&&(c=a[b]);b++)this._isContent(c)&&(d=c.__observeNodesMap.get(this))&&(Polymer.dom(c).unobserveNodes(d),c.__observeNodesMap.delete(this))},_isContent:function(a){return"content"===a.localName},_callListeners:function(){for(var a=this._listeners,b=this._getEffectiveNodes(),c=0,d;c<a.length&&(d=a[c]);c++){var l=this._generateListenerInfo(d,b);(l||d._alwaysNotify)&&this._callListener(d,l)}},_getEffectiveNodes:function(){return this.domApi.getEffectiveChildNodes()},
_generateListenerInfo:function(a,b){if(a._avoidChangeCalculation)return!0;for(var c={target:this.node,addedNodes:[],removedNodes:[]},d=Polymer.ArraySplice.calculateSplices(b,a._nodes),e=0,g;e<d.length&&(g=d[e]);e++)for(var p=0,r;p<g.removed.length&&(r=g.removed[p]);p++)c.removedNodes.push(r);e=0;for(g;e<d.length&&(g=d[e]);e++)for(p=g.index;p<g.index+g.addedCount;p++)c.addedNodes.push(b[p]);a._nodes=b;if(c.addedNodes.length||c.removedNodes.length)return c},_callListener:function(a,b){return a.fn.call(this.node,
b)},enableShadowAttributeTracking:function(){}};if(b.useShadow){var c=a.EffectiveNodesObserver.prototype._setup,d=a.EffectiveNodesObserver.prototype._cleanup;Polymer.Base.mixin(a.EffectiveNodesObserver.prototype,{_setup:function(){if(!this._observer){var a=this;this._mutationHandler=function(b){b&&b.length&&a._scheduleNotify()};this._observer=new MutationObserver(this._mutationHandler);this._boundFlush=function(){a._flush()};Polymer.dom.addStaticFlush(this._boundFlush);this._observer.observe(this.node,
{childList:!0})}c.call(this)},_cleanup:function(){this._observer.disconnect();this._mutationHandler=this._observer=null;Polymer.dom.removeStaticFlush(this._boundFlush);d.call(this)},_flush:function(){this._observer&&this._mutationHandler(this._observer.takeRecords())},enableShadowAttributeTracking:function(){if(this._observer){this._makeContentListenersAlwaysNotify();this._observer.disconnect();this._observer.observe(this.node,{childList:!0,attributes:!0,subtree:!0});var a=this.domApi.getOwnerRoot();
(a=a&&a.host)&&Polymer.dom(a).observer&&Polymer.dom(a).observer.enableShadowAttributeTracking()}},_makeContentListenersAlwaysNotify:function(){for(var a=0,b;a<this._listeners.length;a++)b=this._listeners[a],b._alwaysNotify=b._isContentListener}})}})();
(function(){var a=Polymer.DomApi.ctor,b=Polymer.Settings;a.DistributedNodesObserver=function(b){a.EffectiveNodesObserver.call(this,b)};a.DistributedNodesObserver.prototype=Object.create(a.EffectiveNodesObserver.prototype);Polymer.Base.mixin(a.DistributedNodesObserver.prototype,{_setup:function(){},_cleanup:function(){},_beforeCallListeners:function(){},_getEffectiveNodes:function(){return this.domApi.getDistributedNodes()}});b.useShadow&&Polymer.Base.mixin(a.DistributedNodesObserver.prototype,{_setup:function(){if(!this._observer){var a=
this.domApi.getOwnerRoot();if(a=a&&a.host){var b=this;this._observer=Polymer.dom(a).observeNodes(function(){b._scheduleNotify()});this._observer._isContentListener=!0;this._hasAttrSelect()&&Polymer.dom(a).observer.enableShadowAttributeTracking()}}},_hasAttrSelect:function(){var a=this.node.getAttribute("select");return a&&a.match(/[[.]+/)},_cleanup:function(){var a=this.domApi.getOwnerRoot();(a=a&&a.host)&&Polymer.dom(a).unobserveNodes(this._observer);this._observer=null}})})();
(function(){function a(a,b){b._distributedNodes.push(a);var c=a._destinationInsertionPoints;c?c.push(b):a._destinationInsertionPoints=[b]}function b(a){for(var b=d.Logical.getChildNodes(a),c=0,e;c<b.length;c++)if(e=b[c],e.localName&&"content"===e.localName)return a.domHost}var c=Polymer.DomApi,d=Polymer.TreeApi;Polymer.Base._addFeature({_prepShady:function(){this._useContent=this._useContent||!!this._template},_setupShady:function(){this.shadyRoot=null;this.__domApi||(this.__domApi=null);this.__dom||
(this.__dom=null);this._ownerShadyRoot||(this._ownerShadyRoot=void 0)},_poolContent:function(){this._useContent&&d.Logical.saveChildNodes(this)},_setupRoot:function(){if(this._useContent&&(this._createLocalRoot(),!this.dataHost)){var a=d.Logical.getChildNodes(this);if(g&&a)for(var b=0;b<a.length;b++)CustomElements.upgrade(a[b])}},_createLocalRoot:function(){this.shadyRoot=this.root;this.shadyRoot._distributionClean=!1;this.shadyRoot._hasDistributed=!1;this.shadyRoot._isShadyRoot=!0;this.shadyRoot._dirtyRoots=
[];var a=this.shadyRoot._insertionPoints=!this._notes||this._notes._hasContent?this.shadyRoot.querySelectorAll("content"):[];d.Logical.saveChildNodes(this.shadyRoot);for(var b=0,c;b<a.length;b++)c=a[b],d.Logical.saveChildNodes(c),d.Logical.saveChildNodes(c.parentNode);this.shadyRoot.host=this},distributeContent:function(a){if(this.shadyRoot){this.shadyRoot._invalidInsertionPoints=this.shadyRoot._invalidInsertionPoints||a;for(a=this;a&&b(a);)a=a.domHost;Polymer.dom(this)._lazyDistribute(a)}},_distributeContent:function(){this._useContent&&
!this.shadyRoot._distributionClean&&(this.shadyRoot._invalidInsertionPoints&&(Polymer.dom(this)._updateInsertionPoints(this),this.shadyRoot._invalidInsertionPoints=!1),this._beginDistribute(),this._distributeDirtyRoots(),this._finishDistribute())},_beginDistribute:function(){this._useContent&&c.hasInsertionPoint(this.shadyRoot)&&(this._resetDistribution(),this._distributePool(this.shadyRoot,this._collectPool()))},_distributeDirtyRoots:function(){for(var a=this.shadyRoot._dirtyRoots,b=0,c=a.length,
d;b<c&&(d=a[b]);b++)d._distributeContent();this.shadyRoot._dirtyRoots=[]},_finishDistribute:function(){if(this._useContent){this.shadyRoot._distributionClean=!0;if(c.hasInsertionPoint(this.shadyRoot)){this._composeTree();for(var a=this.shadyRoot,b=0,e;b<a._insertionPoints.length;b++)e=a._insertionPoints[b],c.hasApi(e)&&Polymer.dom(e).notifyObserver()}else this.shadyRoot._hasDistributed?(a=this._composeNode(this),this._updateChildNodes(this,a)):(d.Composed.clearChildNodes(this),this.appendChild(this.shadyRoot));
this.shadyRoot._hasDistributed||c.hasApi(this)&&Polymer.dom(this).notifyObserver();this.shadyRoot._hasDistributed=!0}},elementMatches:function(a,b){return c.matchesSelector.call(b||this,a)},_resetDistribution:function(){for(var a=d.Logical.getChildNodes(this),b=0;b<a.length;b++){var c=a[b];c._destinationInsertionPoints&&(c._destinationInsertionPoints=void 0);if("content"==c.localName){var e=c._distributedNodes;if(e)for(var g=0;g<e.length;g++){var r=e[g]._destinationInsertionPoints;r&&r.splice(r.indexOf(c)+
1,r.length)}}}a=this.shadyRoot._insertionPoints;for(b=0;b<a.length;b++)a[b]._distributedNodes=[]},_collectPool:function(){for(var a=[],b=d.Logical.getChildNodes(this),c=0;c<b.length;c++){var e=b[c];"content"==e.localName?a.push.apply(a,e._distributedNodes):a.push(e)}return a},_distributePool:function(a,b){a=a._insertionPoints;for(var e=0,g=a.length,h;e<g&&(h=a[e]);e++){this._distributeInsertionPoint(h,b);var k=d.Logical.getParentNode(h);k&&k.shadyRoot&&c.hasInsertionPoint(k.shadyRoot)&&k.shadyRoot._distributionClean&&
(k.shadyRoot._distributionClean=!1,this.shadyRoot._dirtyRoots.push(k))}},_distributeInsertionPoint:function(b,c){for(var e=!1,g=0,h=c.length,k;g<h;g++)(k=c[g])&&this._matchesContentSelect(k,b)&&(a(k,b),c[g]=void 0,e=!0);if(!e)for(c=d.Logical.getChildNodes(b),e=0;e<c.length;e++)a(c[e],b)},_composeTree:function(){this._updateChildNodes(this,this._composeNode(this));for(var a=this.shadyRoot._insertionPoints,b=0,c=a.length,e,g;b<c&&(e=a[b]);b++)g=d.Logical.getParentNode(e),g._useContent||g===this||g===
this.shadyRoot||this._updateChildNodes(g,this._composeNode(g))},_composeNode:function(a){var b=[];a=d.Logical.getChildNodes(a.shadyRoot||a);for(var c=0;c<a.length;c++){var e=a[c];if("content"==e.localName)for(var g=e._distributedNodes,h=0;h<g.length;h++){var n=g[h],t=n._destinationInsertionPoints;t&&t[t.length-1]===e&&b.push(n)}else b.push(e)}return b},_updateChildNodes:function(a,b){for(var c=d.Composed.getChildNodes(a),e=Polymer.ArraySplice.calculateSplices(b,c),g=0,h=0,k;g<e.length&&(k=e[g]);g++){for(var t=
0,q;t<k.removed.length&&(q=k.removed[t]);t++)d.Composed.getParentNode(q)===a&&d.Composed.removeChild(a,q),c.splice(k.index+h,1);h-=k.addedCount}for(g=0;g<e.length&&(k=e[g]);g++)for(h=c[k.index],t=k.index,q;t<k.index+k.addedCount;t++)q=b[t],d.Composed.insertBefore(a,q,h),c.splice(t,0,q)},_matchesContentSelect:function(a,b){b=b.getAttribute("select");return b?(b=b.trim())?a instanceof Element&&/^(:not\()?[*.#[a-zA-Z_|]/.test(b)?this.elementMatches(b,a):!1:!0:!0},_elementAdd:function(){},_elementRemove:function(){}});
var e={get:function(){var a=Polymer.dom(this).getOwnerRoot();return a&&a.host},configurable:!0};Object.defineProperty(Polymer.Base,"domHost",e);Polymer.BaseDescriptors.domHost=e;var g=window.CustomElements&&!CustomElements.useNative})();
Polymer.Settings.useShadow&&Polymer.Base._addFeature({_poolContent:function(){},_beginDistribute:function(){},distributeContent:function(){},_distributeContent:function(){},_finishDistribute:function(){},_createLocalRoot:function(){this.createShadowRoot();this.shadowRoot.appendChild(this.root);this.root=this.shadowRoot}});
Polymer.Async={_currVal:0,_lastVal:0,_callbacks:[],_twiddleContent:0,_twiddle:document.createTextNode(""),run:function(a,b){if(0<b)return~setTimeout(a,b);this._twiddle.textContent=this._twiddleContent++;this._callbacks.push(a);return this._currVal++},cancel:function(a){if(0>a)clearTimeout(~a);else{var b=a-this._lastVal;if(0<=b){if(!this._callbacks[b])throw"invalid async handle: "+a;this._callbacks[b]=null}}},_atEndOfMicrotask:function(){for(var a=this._callbacks.length,b=0;b<a;b++){var c=this._callbacks[b];
if(c)try{c()}catch(d){throw b++,this._callbacks.splice(0,b),this._lastVal+=b,this._twiddle.textContent=this._twiddleContent++,d;}}this._callbacks.splice(0,a);this._lastVal+=a}};(new window.MutationObserver(function(){Polymer.Async._atEndOfMicrotask()})).observe(Polymer.Async._twiddle,{characterData:!0});
Polymer.Debounce=function(){function a(a){this.context=a;var b=this;this.boundComplete=function(){b.complete()}}var b=Polymer.Async;a.prototype={go:function(a,d){this.finish=function(){b.cancel(c)};var c=b.run(this.boundComplete,d);this.callback=a},stop:function(){this.finish&&(this.finish(),this.callback=this.finish=null)},complete:function(){if(this.finish){var a=this.callback;this.stop();a.call(this.context)}}};return function(b,d,e){b?b.stop():b=new a(this);b.go(d,e);return b}}();
Polymer.Base._addFeature({_setupDebouncers:function(){this._debouncers={}},debounce:function(a,b,c){return this._debouncers[a]=Polymer.Debounce.call(this,this._debouncers[a],b,c)},isDebouncerActive:function(a){a=this._debouncers[a];return!(!a||!a.finish)},flushDebouncer:function(a){(a=this._debouncers[a])&&a.complete()},cancelDebouncer:function(a){(a=this._debouncers[a])&&a.stop()}});Polymer.DomModule=document.createElement("dom-module");
Polymer.Base._addFeature({_registerFeatures:function(){this._prepIs();this._prepBehaviors();this._prepConstructor();this._prepTemplate();this._prepShady();this._prepPropertyInfo()},_prepBehavior:function(a){this._addHostAttributes(a.hostAttributes)},_initFeatures:function(){this._registerHost();this._template&&(this._poolContent(),this._beginHosting(),this._stampTemplate(),this._endHosting());this._marshalHostAttributes();this._setupDebouncers();this._marshalBehaviors();this._tryReady()},_marshalBehavior:function(){}});
</script>






<script>//~~WEBPATH~~/polymer/polymer.html.js
(function(){Polymer.nar=[];var a=Polymer.Settings.disableUpgradeEnabled;Polymer.Annotations={parseAnnotations:function(a,c){var b=[];this._parseNodeAnnotations(a._content||a.content,b,c||a.hasAttribute("strip-whitespace"));return b},_parseNodeAnnotations:function(a,c,d){return a.nodeType===Node.TEXT_NODE?this._parseTextNodeAnnotation(a,c):this._parseElementAnnotations(a,c,d)},_bindingRegex:/(\[\[|{{)\s*(?:(!)\s*)?((?:[a-zA-Z_$][\w.:$\-*]*)\s*(?:\(\s*(?:(?:(?:(?:[a-zA-Z_$][\w.:$\-*]*)|(?:[-+]?[0-9]*\.?[0-9]+(?:[eE][-+]?[0-9]+)?)|(?:(?:'(?:[^'\\]|\\.)*')|(?:"(?:[^"\\]|\\.)*"))\s*)(?:,\s*(?:(?:[a-zA-Z_$][\w.:$\-*]*)|(?:[-+]?[0-9]*\.?[0-9]+(?:[eE][-+]?[0-9]+)?)|(?:(?:'(?:[^'\\]|\\.)*')|(?:"(?:[^"\\]|\\.)*"))\s*))*)?)\)\s*)?)(?:]]|}})/g,
_parseBindings:function(a){for(var b=this._bindingRegex,d=[],e=0,g;null!==(g=b.exec(a));){g.index>e&&d.push({literal:a.slice(e,g.index)});var e=g[1][0],h=!!g[2];g=g[3].trim();var k;if("{"==e&&0<(k=g.indexOf("::"))){var l=g.substring(k+2);g=g.substring(0,k);var m=!0}d.push({compoundIndex:d.length,value:g,mode:e,negate:h,event:l,customEvent:m});e=b.lastIndex}e&&e<a.length&&(a=a.substring(e))&&d.push({literal:a});if(d.length)return d},_literalFromParts:function(a){for(var b="",d=0;d<a.length;d++)b+=
a[d].literal||"";return b},_parseTextNodeAnnotation:function(a,c){var b=this._parseBindings(a.textContent);if(b)return a.textContent=this._literalFromParts(b)||" ",a={bindings:[{kind:"text",name:"textContent",parts:b,isCompound:1!==b.length}]},c.push(a),a},_parseElementAnnotations:function(a,c,d){var b={bindings:[],events:[]};"content"===a.localName&&(c._hasContent=!0);this._parseChildNodesAnnotations(a,b,c,d);a.attributes&&(this._parseNodeAttributeAnnotations(a,b,c),this.prepElement&&this.prepElement(a));
(b.bindings.length||b.events.length||b.id)&&c.push(b);return b},_parseChildNodesAnnotations:function(a,c,d,e){if(a.firstChild)for(var b=a.firstChild,h=0;b;){var k=b.nextSibling;"template"!==b.localName||b.hasAttribute("preserve-content")||this._parseTemplate(b,h,d,c,e);"slot"==b.localName&&(b=this._replaceSlotWithContent(b));if(b.nodeType===Node.TEXT_NODE){for(var l=k;l&&l.nodeType===Node.TEXT_NODE;)b.textContent+=l.textContent,k=l.nextSibling,a.removeChild(l),l=k;e&&!b.textContent.trim()&&(a.removeChild(b),
h--)}b.parentNode&&(b=this._parseNodeAnnotations(b,d,e))&&(b.parent=c,b.index=h);b=k;h++}},_replaceSlotWithContent:function(a){for(var b=a.ownerDocument.createElement("content");a.firstChild;)b.appendChild(a.firstChild);for(var d=a.attributes,e=0;e<d.length;e++){var g=d[e];b.setAttribute(g.name,g.value)}(d=a.getAttribute("name"))&&b.setAttribute("select","[slot\x3d'"+d+"']");a.parentNode.replaceChild(b,a);return b},_parseTemplate:function(a,c,d,e,g){var b=document.createDocumentFragment();b._notes=
this.parseAnnotations(a,g);b.appendChild(a.content);d.push({bindings:Polymer.nar,events:Polymer.nar,templateContent:b,parent:e,index:c})},_parseNodeAttributeAnnotations:function(a,c){for(var b=Array.prototype.slice.call(a.attributes),e=b.length-1,g;g=b[e];e--){var h=g.name;g=g.value;var k;"on-"===h.slice(0,3)?(a.removeAttribute(h),c.events.push({name:h.slice(3),value:g})):(k=this._parseNodeAttributeAnnotation(a,h,g))?c.bindings.push(k):"id"===h&&(c.id=g)}},_parseNodeAttributeAnnotation:function(b,
c,d){if(d=this._parseBindings(d)){var e=c,g="property";"$"==c[c.length-1]&&(c=c.slice(0,-1),g="attribute");var h=this._literalFromParts(d);h&&"attribute"==g&&b.setAttribute(c,h);"input"===b.localName&&"value"===e&&b.setAttribute(e,"");a&&"disable-upgrade$"===e&&b.setAttribute(c,"");b.removeAttribute(e);b=Polymer.CaseMap.dashToCamelCase(c);"property"===g&&(c=b);return{kind:g,name:c,propertyName:b,parts:d,literal:h,isCompound:1!==d.length}}},findAnnotatedNode:function(a,c){var b=c.parent&&Polymer.Annotations.findAnnotatedNode(a,
c.parent);if(b)for(a=b.firstChild,b=0;a;a=a.nextSibling){if(c.index===b++)return a}else return a}}})();Polymer.Path={root:function(a){var b=a.indexOf(".");return-1===b?a:a.slice(0,b)},isDeep:function(a){return-1!==a.indexOf(".")},isAncestor:function(a,b){return 0===a.indexOf(b+".")},isDescendant:function(a,b){return 0===b.indexOf(a+".")},translate:function(a,b,c){return b+c.slice(a.length)},matches:function(a,b,c){return a===c||this.isAncestor(a,c)||!!b&&this.isDescendant(a,c)}};
Polymer.Base._addFeature({_prepAnnotations:function(){if(this._template){var a=this;Polymer.Annotations.prepElement=function(b){a._prepElement(b)};this._template._content&&this._template._content._notes?this._notes=this._template._content._notes:(this._notes=Polymer.Annotations.parseAnnotations(this._template),this._processAnnotations(this._notes));Polymer.Annotations.prepElement=null}else this._notes=[]},_processAnnotations:function(a){for(var b=0;b<a.length;b++){for(var c=a[b],d=0;d<c.bindings.length;d++)for(var e=
c.bindings[d],g=0;g<e.parts.length;g++){var h=e.parts[g];if(!h.literal){var k=this._parseMethod(h.value);k?h.signature=k:h.model=Polymer.Path.root(h.value)}}if(c.templateContent){this._processAnnotations(c.templateContent._notes);var e=c.templateContent._parentProps=this._discoverTemplateParentProps(c.templateContent._notes),d=[],l;for(l in e)e="_parent_"+l,d.push({index:c.index,kind:"property",name:e,propertyName:e,parts:[{mode:"{",model:l,value:l}]});c.bindings=c.bindings.concat(d)}}},_discoverTemplateParentProps:function(a){for(var b=
{},c=0,d;c<a.length&&(d=a[c]);c++){for(var e=0,g=d.bindings,h;e<g.length&&(h=g[e]);e++)for(var k=0,l=h.parts,m;k<l.length&&(m=l[k]);k++)if(m.signature){for(var p=m.signature.args,r=0;r<p.length;r++){var n=p[r].model;n&&(b[n]=!0)}m.signature.dynamicFn&&(b[m.signature.method]=!0)}else m.model&&(b[m.model]=!0);d.templateContent&&Polymer.Base.mixin(b,d.templateContent._parentProps)}return b},_prepElement:function(a){Polymer.ResolveUrl.resolveAttrs(a,this._template.ownerDocument)},_findAnnotatedNode:Polymer.Annotations.findAnnotatedNode,
_marshalAnnotationReferences:function(){this._template&&(this._marshalIdNodes(),this._marshalAnnotatedNodes(),this._marshalAnnotatedListeners())},_configureAnnotationReferences:function(){for(var a=this._notes,b=this._nodes,c=0;c<a.length;c++){var d=a[c],e=b[c];this._configureTemplateContent(d,e);this._configureCompoundBindings(d,e)}},_configureTemplateContent:function(a,b){a.templateContent&&(b._content=a.templateContent)},_configureCompoundBindings:function(a,b){a=a.bindings;for(var c=0;c<a.length;c++){var d=
a[c];if(d.isCompound){for(var e=b.__compoundStorage__||(b.__compoundStorage__={}),g=d.parts,h=Array(g.length),k=0;k<g.length;k++)h[k]=g[k].literal;g=d.name;e[g]=h;d.literal&&"property"==d.kind&&(b._configValue?b._configValue(g,d.literal):b[g]=d.literal)}}},_marshalIdNodes:function(){this.$={};for(var a=0,b=this._notes.length,c;a<b&&(c=this._notes[a]);a++)c.id&&(this.$[c.id]=this._findAnnotatedNode(this.root,c))},_marshalAnnotatedNodes:function(){if(this._notes&&this._notes.length){for(var a=Array(this._notes.length),
b=0;b<this._notes.length;b++)a[b]=this._findAnnotatedNode(this.root,this._notes[b]);this._nodes=a}},_marshalAnnotatedListeners:function(){for(var a=0,b=this._notes.length,c;a<b&&(c=this._notes[a]);a++)if(c.events&&c.events.length)for(var d=this._findAnnotatedNode(this.root,c),e=0,g=c.events,h;e<g.length&&(h=g[e]);e++)this.listen(d,h.name,h.value)}});
Polymer.Base._addFeature({listeners:{},_listenListeners:function(a){var b;for(b in a){if(0>b.indexOf(".")){var c=this;var d=b}else d=b.split("."),c=this.$[d[0]],d=d[1];this.listen(c,d,a[b])}},listen:function(a,b,c){var d=this._recallEventHandler(this,b,a,c);d||(d=this._createEventHandler(a,b,c));d._listening||(this._listen(a,b,d),d._listening=!0)},_boundListenerKey:function(a,b){return a+":"+b},_recordEventHandler:function(a,b,c,d,e){var g=a.__boundListeners;g||(g=a.__boundListeners=new WeakMap);
a=g.get(c);a||(a={},Polymer.Settings.isIE&&c==window||g.set(c,a));a[this._boundListenerKey(b,d)]=e},_recallEventHandler:function(a,b,c,d){if(a=a.__boundListeners)if(c=a.get(c))return c[this._boundListenerKey(b,d)]},_createEventHandler:function(a,b,c){function d(a){if(e[c])e[c](a,a.detail);else e._warn(e._logf("_createEventHandler","listener method `"+c+"` not defined"))}var e=this;d._listening=!1;this._recordEventHandler(e,b,a,c,d);return d},unlisten:function(a,b,c){if(c=this._recallEventHandler(this,
b,a,c))this._unlisten(a,b,c),c._listening=!1},_listen:function(a,b,c){a.addEventListener(b,c)},_unlisten:function(a,b,c){a.removeEventListener(b,c)}});
(function(){function a(a){var b=a.sourceCapabilities;if(!b||b.firesTouchEvents)if(a.__polymerGesturesHandled={skip:!0},"click"===a.type){for(var b=Polymer.dom(a).path,c=0;c<b.length;c++)if(b[c]===n.mouse.target)return;a.preventDefault();a.stopPropagation()}}function b(b){for(var c=r?["click"]:k,d=0,e;d<c.length;d++)e=c[d],b?document.addEventListener(e,a,!0):document.removeEventListener(e,a,!0)}function c(a){var b=a.type;return-1===k.indexOf(b)?!1:"mousemove"===b?(b=void 0===a.buttons?1:a.buttons,
a instanceof window.MouseEvent&&!m&&(b=l[a.which]||0),!!(b&1)):0===(void 0===a.button?0:a.button)}function d(a,b,c){a.movefn=b;a.upfn=c;document.addEventListener("mousemove",b);document.addEventListener("mouseup",c)}function e(a){document.removeEventListener("mousemove",a.movefn);document.removeEventListener("mouseup",a.upfn);a.movefn=null;a.upfn=null}var g=Polymer.DomApi.wrap,h="string"===typeof document.head.style.touchAction,k=["mousedown","mousemove","mouseup","click"],l=[0,1,4,2];try{var m=1===
(new MouseEvent("test",{buttons:1})).buttons}catch(u){m=!1}var p=!1;(function(){try{var a=Object.defineProperty({},"passive",{get:function(){p=!0}});window.addEventListener("test",null,a);window.removeEventListener("test",null,a)}catch(v){}})();var r=navigator.userAgent.match(/iP(?:[oa]d|hone)|Android/),n={mouse:{target:null,mouseIgnoreJob:null},touch:{x:0,y:0,id:-1,scrollDecided:!1}};document.addEventListener("touchend",function(a){n.mouse.mouseIgnoreJob||b(!0);n.mouse.target=Polymer.dom(a).rootTarget;
n.mouse.mouseIgnoreJob=Polymer.Debounce(n.mouse.mouseIgnoreJob,function(){b();n.mouse.target=null;n.mouse.mouseIgnoreJob=null},2500)},p?{passive:!0}:!1);var t={gestures:{},recognizers:[],deepTargetFind:function(a,b){for(var c=document.elementFromPoint(a,b),d=c;d&&d.shadowRoot;)(d=d.shadowRoot.elementFromPoint(a,b))&&(c=d);return c},findOriginalTarget:function(a){return a.path?a.path[0]:a.target},handleNative:function(a){var b=a.type,c=g(a.currentTarget).__polymerGestures;if(c&&(c=c[b])){if(!a.__polymerGesturesHandled&&
(a.__polymerGesturesHandled={},"touch"===b.slice(0,5))){var d=a.changedTouches[0];"touchstart"===b&&1===a.touches.length&&(n.touch.id=d.identifier);if(n.touch.id!==d.identifier)return;h||"touchstart"!==b&&"touchmove"!==b||t.handleTouchAction(a)}d=a.__polymerGesturesHandled;if(!d.skip){for(var e=t.recognizers,k=0,l;k<e.length;k++)l=e[k],c[l.name]&&!d[l.name]&&l.flow&&-1<l.flow.start.indexOf(a.type)&&l.reset&&l.reset();k=0;for(l;k<e.length;k++)l=e[k],c[l.name]&&!d[l.name]&&(d[l.name]=!0,l[b](a))}}},
handleTouchAction:function(a){var b=a.changedTouches[0],c=a.type;if("touchstart"===c)n.touch.x=b.clientX,n.touch.y=b.clientY,n.touch.scrollDecided=!1;else if("touchmove"===c&&!n.touch.scrollDecided){n.touch.scrollDecided=!0;for(var c=Polymer.dom(a).path,d="auto",e=0,g;e<c.length;e++)if(g=c[e],g.__polymerGesturesTouchAction){d=g.__polymerGesturesTouchAction;break}c=d;d=!1;e=Math.abs(n.touch.x-b.clientX);b=Math.abs(n.touch.y-b.clientY);a.cancelable&&("none"===c?d=!0:"pan-x"===c?d=b>e:"pan-y"===c&&(d=
e>b));d?a.preventDefault():t.prevent("track")}},add:function(a,b,c){a=g(a);var d=this.gestures[b],e=d.deps,h=d.name,l=a.__polymerGestures;l||(a.__polymerGestures=l={});for(var m=0,n,p;m<e.length;m++)n=e[m],r&&-1<k.indexOf(n)&&"click"!==n||((p=l[n])||(l[n]=p={_count:0}),0===p._count&&a.addEventListener(n,this.handleNative),p[h]=(p[h]||0)+1,p._count=(p._count||0)+1);a.addEventListener(b,c);d.touchAction&&this.setTouchAction(a,d.touchAction)},remove:function(a,b,c){a=g(a);var d=this.gestures[b],e=d.deps,
d=d.name,h=a.__polymerGestures;if(h)for(var k=0,l,m;k<e.length;k++)l=e[k],(m=h[l])&&m[d]&&(m[d]=(m[d]||1)-1,m._count=(m._count||1)-1,0===m._count&&a.removeEventListener(l,this.handleNative));a.removeEventListener(b,c)},register:function(a){this.recognizers.push(a);for(var b=0;b<a.emits.length;b++)this.gestures[a.emits[b]]=a},findRecognizerByEvent:function(a){for(var b=0,c;b<this.recognizers.length;b++){c=this.recognizers[b];for(var d=0,e;d<c.emits.length;d++)if(e=c.emits[d],e===a)return c}return null},
setTouchAction:function(a,b){h&&(a.style.touchAction=b);a.__polymerGesturesTouchAction=b},fire:function(a,b,c){Polymer.Base.fire(b,c,{node:a,bubbles:!0,cancelable:!0}).defaultPrevented&&(a=c.preventer||c.sourceEvent)&&a.preventDefault&&a.preventDefault()},prevent:function(a){a=this.findRecognizerByEvent(a);a.info&&(a.info.prevent=!0)},resetMouseCanceller:function(){n.mouse.mouseIgnoreJob&&n.mouse.mouseIgnoreJob.complete()}};t.register({name:"downup",deps:["mousedown","touchstart","touchend"],flow:{start:["mousedown",
"touchstart"],end:["mouseup","touchend"]},emits:["down","up"],info:{movefn:null,upfn:null},reset:function(){e(this.info)},mousedown:function(a){if(c(a)){var b=t.findOriginalTarget(a),g=this;d(this.info,function(a){c(a)||(g.fire("up",b,a),e(g.info))},function(a){c(a)&&g.fire("up",b,a);e(g.info)});this.fire("down",b,a)}},touchstart:function(a){this.fire("down",t.findOriginalTarget(a),a.changedTouches[0],a)},touchend:function(a){this.fire("up",t.findOriginalTarget(a),a.changedTouches[0],a)},fire:function(a,
b,c,d){t.fire(b,a,{x:c.clientX,y:c.clientY,sourceEvent:c,preventer:d,prevent:function(a){return t.prevent(a)}})}});t.register({name:"track",touchAction:"none",deps:["mousedown","touchstart","touchmove","touchend"],flow:{start:["mousedown","touchstart"],end:["mouseup","touchend"]},emits:["track"],info:{x:0,y:0,state:"start",started:!1,moves:[],addMove:function(a){2<this.moves.length&&this.moves.shift();this.moves.push(a)},movefn:null,upfn:null,prevent:!1},reset:function(){this.info.state="start";this.info.started=
!1;this.info.moves=[];this.info.x=0;this.info.y=0;this.info.prevent=!1;e(this.info)},hasMovedEnough:function(a,b){if(this.info.prevent)return!1;if(this.info.started)return!0;b=Math.abs(this.info.y-b);return 5<=Math.abs(this.info.x-a)||5<=b},mousedown:function(a){if(c(a)){var b=t.findOriginalTarget(a),g=this,h=function(a){var d=a.clientX,h=a.clientY;g.hasMovedEnough(d,h)&&(g.info.state=g.info.started?"mouseup"===a.type?"end":"track":"start","start"===g.info.state&&t.prevent("tap"),g.info.addMove({x:d,
y:h}),c(a)||(g.info.state="end",e(g.info)),g.fire(b,a),g.info.started=!0)};d(this.info,h,function(a){g.info.started&&h(a);e(g.info)});this.info.x=a.clientX;this.info.y=a.clientY}},touchstart:function(a){a=a.changedTouches[0];this.info.x=a.clientX;this.info.y=a.clientY},touchmove:function(a){var b=t.findOriginalTarget(a);a=a.changedTouches[0];var c=a.clientX,d=a.clientY;this.hasMovedEnough(c,d)&&("start"===this.info.state&&t.prevent("tap"),this.info.addMove({x:c,y:d}),this.fire(b,a),this.info.state=
"track",this.info.started=!0)},touchend:function(a){var b=t.findOriginalTarget(a),c=a.changedTouches[0];this.info.started&&(this.info.state="end",this.info.addMove({x:c.clientX,y:c.clientY}),this.fire(b,c,a))},fire:function(a,b,c){var d=this.info.moves[this.info.moves.length-2],e=this.info.moves[this.info.moves.length-1],g=e.x-this.info.x,h=e.y-this.info.y,k=0;if(d){var l=e.x-d.x;k=e.y-d.y}return t.fire(a,"track",{state:this.info.state,x:b.clientX,y:b.clientY,dx:g,dy:h,ddx:l,ddy:k,sourceEvent:b,preventer:c,
hover:function(){return t.deepTargetFind(b.clientX,b.clientY)}})}});t.register({name:"tap",deps:["mousedown","click","touchstart","touchend"],flow:{start:["mousedown","touchstart"],end:["click","touchend"]},emits:["tap"],info:{x:NaN,y:NaN,prevent:!1},reset:function(){this.info.x=NaN;this.info.y=NaN;this.info.prevent=!1},save:function(a){this.info.x=a.clientX;this.info.y=a.clientY},mousedown:function(a){c(a)&&this.save(a)},click:function(a){c(a)&&this.forward(a)},touchstart:function(a){this.save(a.changedTouches[0],
a)},touchend:function(a){this.forward(a.changedTouches[0],a)},forward:function(a,b){var c=Math.abs(a.clientX-this.info.x),d=Math.abs(a.clientY-this.info.y),e=t.findOriginalTarget(a);if(!(c=isNaN(c)||isNaN(d)||25>=c&&25>=d))if("click"===a.type)if(0===a.detail)c=!0;else var c=t.findOriginalTarget(a).getBoundingClientRect(),d=a.pageX,g=a.pageY,c=!(d>=c.left&&d<=c.right&&g>=c.top&&g<=c.bottom);else c=!1;c&&(this.info.prevent||t.fire(e,"tap",{x:a.clientX,y:a.clientY,sourceEvent:a,preventer:b}))}});var q=
{x:"pan-x",y:"pan-y",none:"none",all:"auto"};Polymer.Base._addFeature({_setupGestures:function(){this.__polymerGestures=null},_listen:function(a,b,c){t.gestures[b]?t.add(a,b,c):a.addEventListener(b,c)},_unlisten:function(a,b,c){t.gestures[b]?t.remove(a,b,c):a.removeEventListener(b,c)},setScrollDirection:function(a,b){t.setTouchAction(b||this,q[a]||"auto")}});Polymer.Gestures=t})();
(function(){Polymer.Base._addFeature({$$:function(a){return Polymer.dom(this.root).querySelector(a)},toggleClass:function(a,c,d){d=d||this;1==arguments.length&&(c=!d.classList.contains(a));c?Polymer.dom(d).classList.add(a):Polymer.dom(d).classList.remove(a)},toggleAttribute:function(a,c,d){d=d||this;1==arguments.length&&(c=!d.hasAttribute(a));c?Polymer.dom(d).setAttribute(a,""):Polymer.dom(d).removeAttribute(a)},classFollows:function(a,c,d){d&&Polymer.dom(d).classList.remove(a);c&&Polymer.dom(c).classList.add(a)},
attributeFollows:function(a,c,d){d&&Polymer.dom(d).removeAttribute(a);c&&Polymer.dom(c).setAttribute(a,"")},getEffectiveChildNodes:function(){return Polymer.dom(this).getEffectiveChildNodes()},getEffectiveChildren:function(){return Polymer.dom(this).getEffectiveChildNodes().filter(function(a){return a.nodeType===Node.ELEMENT_NODE})},getEffectiveTextContent:function(){for(var a=this.getEffectiveChildNodes(),c=[],d=0,e;e=a[d];d++)e.nodeType!==Node.COMMENT_NODE&&c.push(Polymer.dom(e).textContent);return c.join("")},
queryEffectiveChildren:function(a){return(a=Polymer.dom(this).queryDistributedElements(a))&&a[0]},queryAllEffectiveChildren:function(a){return Polymer.dom(this).queryDistributedElements(a)},getContentChildNodes:function(a){return(a=Polymer.dom(this.root).querySelector(a||"content"))?Polymer.dom(a).getDistributedNodes():[]},getContentChildren:function(a){return this.getContentChildNodes(a).filter(function(a){return a.nodeType===Node.ELEMENT_NODE})},fire:function(a,c,d){d=d||Polymer.nob;var b=d.node||
this;c=null===c||void 0===c?{}:c;var g=d._useCache;d=this._getEvent(a,void 0===d.bubbles?!0:d.bubbles,!!d.cancelable,g);d.detail=c;g&&(this.__eventCache[a]=null);b.dispatchEvent(d);g&&(this.__eventCache[a]=d);return d},__eventCache:{},_getEvent:function(a,c,d,e){(e=e&&this.__eventCache[a])&&e.bubbles==c&&e.cancelable==d||(e=new Event(a,{bubbles:!!c,cancelable:d}));return e},async:function(a,c){var b=this;return Polymer.Async.run(function(){a.call(b)},c)},cancelAsync:function(a){Polymer.Async.cancel(a)},
arrayDelete:function(a,c){if(Array.isArray(a)){if(c=a.indexOf(c),0<=c)return a.splice(c,1)}else if(c=this._get(a).indexOf(c),0<=c)return this.splice(a,c,1)},transform:function(a,c){c=c||this;c.style.webkitTransform=a;c.style.transform=a},translate3d:function(a,c,d,e){this.transform("translate3d("+a+","+c+","+d+")",e||this)},importHref:function(a,c,d,e){function b(a){a.target.__firedError=!0;a.target.removeEventListener("load",h);a.target.removeEventListener("error",b);return d.call(p,a)}function h(a){a.target.__firedLoad=
!0;a.target.removeEventListener("load",h);a.target.removeEventListener("error",b);return c.call(p,a)}var k=document.createElement("link");k.rel="import";k.href=a;a=Polymer.Base.importHref.imported=Polymer.Base.importHref.imported||{};var l=a[k.href],m=l||k,p=this;c&&m.addEventListener("load",h);d&&m.addEventListener("error",b);l?(l.__firedLoad&&l.dispatchEvent(new Event("load")),l.__firedError&&l.dispatchEvent(new Event("error"))):(a[k.href]=k,e&&k.setAttribute("async",""),document.head.appendChild(k));
return m},create:function(a,c){a=document.createElement(a);if(c)for(var b in c)a[b]=c[b];return a},isLightDescendant:function(a){return this!==a&&this.contains(a)&&Polymer.dom(this).getOwnerRoot()===Polymer.dom(a).getOwnerRoot()},isLocalDescendant:function(a){return this.root===Polymer.dom(a).getOwnerRoot()}});if(!Polymer.Settings.useNativeCustomElements){var a=Polymer.Base.importHref;Polymer.Base.importHref=function(b,c,d,e){CustomElements.ready=!1;return a.call(this,b,function(a){CustomElements.upgradeDocumentTree(document);
CustomElements.ready=!0;if(c)return c.call(this,a)},d,e)}}})();
Polymer.Bind={prepareModel:function(a){Polymer.Base.mixin(a,this._modelApi)},_modelApi:{_notifyChange:function(a,b,c){c=void 0===c?this[a]:c;b=b||Polymer.CaseMap.camelToDashCase(a)+"-changed";this.fire(b,{value:c},{bubbles:!1,cancelable:!1,_useCache:Polymer.Settings.eventDataCache||!Polymer.Settings.isIE})},_propertySetter:function(a,b,c,d){var e=this.__data__[a];e===b||e!==e&&b!==b||(this.__data__[a]=b,"object"==typeof b&&this._clearPath(a),this._propertyChanged&&this._propertyChanged(a,b,e),c&&
this._effectEffects(a,b,c,e,d));return e},__setProperty:function(a,b,c,d){d=d||this;var e=d._propertyEffects&&d._propertyEffects[a];e?d._propertySetter(a,b,e,c):d[a]!==b&&(d[a]=b)},_effectEffects:function(a,b,c,d,e){b=0;for(var g=c.length,h;b<g&&(h=c[b]);b++)h.fn.call(this,a,this[a],h.effect,d,e)},_clearPath:function(a){for(var b in this.__data__)Polymer.Path.isDescendant(a,b)&&(this.__data__[b]=void 0)}},ensurePropertyEffects:function(a,b){a._propertyEffects||(a._propertyEffects={});var c=a._propertyEffects[b];
c||(c=a._propertyEffects[b]=[]);return c},addPropertyEffect:function(a,b,c,d){a=this.ensurePropertyEffects(a,b);c={kind:c,effect:d,fn:Polymer.Bind["_"+c+"Effect"]};a.push(c);return c},createBindings:function(a){var b=a._propertyEffects;if(b)for(var c in b){var d=b[c];d.sort(this._sortPropertyEffects);this._createAccessors(a,c,d)}},_sortPropertyEffects:function(){var a={compute:0,annotation:1,annotatedComputation:2,reflect:3,notify:4,observer:5,complexObserver:6,"function":7};return function(b,c){return a[b.kind]-
a[c.kind]}}(),_createAccessors:function(a,b,c){function d(a){this._propertySetter(b,a,c)}var e={get:function(){return this.__data__[b]}},g=a.getPropertyInfo&&a.getPropertyInfo(b);g&&g.readOnly?g.computed||(a["_set"+this.upper(b)]=d):e.set=d;Object.defineProperty(a,b,e)},upper:function(a){return a[0].toUpperCase()+a.substring(1)},_addAnnotatedListener:function(a,b,c,d,e,g){a._bindListeners||(a._bindListeners=[]);g=this._notedListenerFactory(c,d,Polymer.Path.isDeep(d),g);e=e||Polymer.CaseMap.camelToDashCase(c)+
"-changed";a._bindListeners.push({index:b,property:c,path:d,changedFn:g,event:e})},_isEventBogus:function(a,b){return a.path&&a.path[0]!==b},_notedListenerFactory:function(a,b,c,d){return function(e,g,h){h?(e=Polymer.Path.translate(a,b,h),this._notifyPath(e,g)):(g=e[a],d&&(g=!g),c?this.__data__[b]!=g&&this.set(b,g):this[b]=g)}},prepareInstance:function(a){a.__data__=Object.create(null)},setupBindListeners:function(a){for(var b=a._bindListeners,c=0,d=b.length,e;c<d&&(e=b[c]);c++)this._addNotifyListener(a._nodes[e.index],
a,e.event,e.changedFn)},_addNotifyListener:function(a,b,c,d){a.addEventListener(c,function(a){return b._notifyListener(d,a)})}};
Polymer.Base.mixin(Polymer.Bind,{_shouldAddListener:function(a){return a.name&&"attribute"!=a.kind&&"text"!=a.kind&&!a.isCompound&&"{"===a.parts[0].mode},_annotationEffect:function(a,b,c){a!=c.value&&(b=this._get(c.value),this.__data__[c.value]=b);this._applyEffectValue(c,b)},_reflectEffect:function(a,b,c){this.reflectPropertyToAttribute(a,c.attribute,b)},_notifyEffect:function(a,b,c,d,e){e||this._notifyChange(a,c.event,b)},_functionEffect:function(a,b,c,d,e){c.call(this,a,b,d,e)},_observerEffect:function(a,
b,c,d){(a=this[c.method])?a.call(this,b,d):this._warn(this._logf("_observerEffect","observer method `"+c.method+"` not defined"))},_complexObserverEffect:function(a,b,c){var d=this[c.method];d?(a=Polymer.Bind._marshalArgs(this.__data__,c,a,b))&&d.apply(this,a):c.dynamicFn||this._warn(this._logf("_complexObserverEffect","observer method `"+c.method+"` not defined"))},_computeEffect:function(a,b,c){var d=this[c.method];if(d){if(a=Polymer.Bind._marshalArgs(this.__data__,c,a,b))d=d.apply(this,a),this.__setProperty(c.name,
d)}else c.dynamicFn||this._warn(this._logf("_computeEffect","compute method `"+c.method+"` not defined"))},_annotatedComputationEffect:function(a,b,c){var d=this._rootDataHost||this,e=d[c.method];if(e){if(a=Polymer.Bind._marshalArgs(this.__data__,c,a,b))d=e.apply(d,a),this._applyEffectValue(c,d)}else c.dynamicFn||d._warn(d._logf("_annotatedComputationEffect","compute method `"+c.method+"` not defined"))},_marshalArgs:function(a,b,c,d){var e=[],g=b.args;b=1<g.length||b.dynamicFn;for(var h=0,k=g.length;h<
k;h++){var l=g[h],m=l.name;if(l.literal)var p=l.value;else c===m?p=d:(p=a[m],void 0===p&&l.structured&&(p=Polymer.Base._get(m,a)));if(b&&void 0===p)return;l.wildcard?(l=Polymer.Path.isAncestor(c,m),e[h]={path:l?c:m,value:l?d:p,base:p}):e[h]=p}return e}});
Polymer.Base._addFeature({_addPropertyEffect:function(a,b,c){a=Polymer.Bind.addPropertyEffect(this,a,b,c);a.pathFn=this["_"+a.kind+"PathEffect"]},_prepEffects:function(){Polymer.Bind.prepareModel(this);this._addAnnotationEffects(this._notes)},_prepBindings:function(){Polymer.Bind.createBindings(this)},_addPropertyEffects:function(a){if(a)for(var b in a){var c=a[b];c.observer&&this._addObserverEffect(b,c.observer);c.computed&&(c.readOnly=!0,this._addComputedEffect(b,c.computed));c.notify&&this._addPropertyEffect(b,
"notify",{event:Polymer.CaseMap.camelToDashCase(b)+"-changed"});if(c.reflectToAttribute){var d=Polymer.CaseMap.camelToDashCase(b);"-"===d[0]?this._warn(this._logf("_addPropertyEffects","Property "+b+" cannot be reflected to attribute "+d+' because "-" is not a valid starting attribute name. Use a lowercase first letter for the property instead.')):this._addPropertyEffect(b,"reflect",{attribute:d})}c.readOnly&&Polymer.Bind.ensurePropertyEffects(this,b)}},_addComputedEffect:function(a,b){b=this._parseMethod(b);
for(var c=b.dynamicFn,d=0,e;d<b.args.length&&(e=b.args[d]);d++)this._addPropertyEffect(e.model,"compute",{method:b.method,args:b.args,trigger:e,name:a,dynamicFn:c});c&&this._addPropertyEffect(b.method,"compute",{method:b.method,args:b.args,trigger:null,name:a,dynamicFn:c})},_addObserverEffect:function(a,b){this._addPropertyEffect(a,"observer",{method:b,property:a})},_addComplexObserverEffects:function(a){if(a)for(var b=0,c;b<a.length&&(c=a[b]);b++)this._addComplexObserverEffect(c)},_addComplexObserverEffect:function(a){var b=
this._parseMethod(a);if(!b)throw Error("Malformed observer expression '"+a+"'");a=b.dynamicFn;for(var c=0,d;c<b.args.length&&(d=b.args[c]);c++)this._addPropertyEffect(d.model,"complexObserver",{method:b.method,args:b.args,trigger:d,dynamicFn:a});a&&this._addPropertyEffect(b.method,"complexObserver",{method:b.method,args:b.args,trigger:null,dynamicFn:a})},_addAnnotationEffects:function(a){for(var b=0,c;b<a.length&&(c=a[b]);b++)for(var d=c.bindings,e=0,g;e<d.length&&(g=d[e]);e++)this._addAnnotationEffect(g,
b)},_addAnnotationEffect:function(a,b){Polymer.Bind._shouldAddListener(a)&&Polymer.Bind._addAnnotatedListener(this,b,a.name,a.parts[0].value,a.parts[0].event,a.parts[0].negate);for(var c=0;c<a.parts.length;c++){var d=a.parts[c];d.signature?this._addAnnotatedComputationEffect(a,d,b):d.literal||("attribute"===a.kind&&"-"===a.name[0]?this._warn(this._logf("_addAnnotationEffect","Cannot set attribute "+a.name+' because "-" is not a valid attribute starting character')):this._addPropertyEffect(d.model,
"annotation",{kind:a.kind,index:b,name:a.name,propertyName:a.propertyName,value:d.value,isCompound:a.isCompound,compoundIndex:d.compoundIndex,event:d.event,customEvent:d.customEvent,negate:d.negate}))}},_addAnnotatedComputationEffect:function(a,b,c){var d=b.signature;if(d.static)this.__addAnnotatedComputationEffect("__static__",c,a,b,null);else{for(var e=0,g;e<d.args.length&&(g=d.args[e]);e++)g.literal||this.__addAnnotatedComputationEffect(g.model,c,a,b,g);d.dynamicFn&&this.__addAnnotatedComputationEffect(d.method,
c,a,b,null)}},__addAnnotatedComputationEffect:function(a,b,c,d,e){this._addPropertyEffect(a,"annotatedComputation",{index:b,isCompound:c.isCompound,compoundIndex:d.compoundIndex,kind:c.kind,name:c.name,negate:d.negate,method:d.signature.method,args:d.signature.args,trigger:e,dynamicFn:d.signature.dynamicFn})},_parseMethod:function(a){var b=a.match(/([^\s]+?)\(([\s\S]*)\)/);if(b){a={method:b[1],static:!0};this.getPropertyInfo(a.method)!==Polymer.nob&&(a.static=!1,a.dynamicFn=!0);if(b[2].trim())return b=
b[2].replace(/\\,/g,"\x26comma;").split(","),this._parseArgs(b,a);a.args=Polymer.nar;return a}},_parseArgs:function(a,b){b.args=a.map(function(a){a=this._parseArg(a);a.literal||(b.static=!1);return a},this);return b},_parseArg:function(a){a=a.trim().replace(/&comma;/g,",").replace(/\\(.)/g,"$1");var b={name:a},c=a[0];"-"===c&&(c=a[1]);"0"<=c&&"9">=c&&(c="#");switch(c){case "'":case '"':b.value=a.slice(1,-1);b.literal=!0;break;case "#":b.value=Number(a),b.literal=!0}b.literal||(b.model=Polymer.Path.root(a),
b.structured=Polymer.Path.isDeep(a),b.structured&&(b.wildcard=".*"==a.slice(-2),b.wildcard&&(b.name=a.slice(0,-2))));return b},_marshalInstanceEffects:function(){Polymer.Bind.prepareInstance(this);this._bindListeners&&Polymer.Bind.setupBindListeners(this)},_applyEffectValue:function(a,b){var c=this._nodes[a.index],d=a.name;b=this._computeFinalAnnotationValue(c,d,b,a);"attribute"==a.kind?this.serializeValueToAttribute(b,d,c):(a=c._propertyInfo&&c._propertyInfo[d])&&a.readOnly||this.__setProperty(d,
b,Polymer.Settings.suppressBindingNotifications,c)},_computeFinalAnnotationValue:function(a,b,c,d){d.negate&&(c=!c);if(d.isCompound){var e=a.__compoundStorage__[b];e[d.compoundIndex]=c;c=e.join("")}"attribute"!==d.kind&&("className"===b&&(c=this._scopeElementClass(a,c)),"textContent"===b||"input"==a.localName&&"value"==b)&&(c=void 0==c?"":c);return c},_executeStaticEffects:function(){this._propertyEffects&&this._propertyEffects.__static__&&this._effectEffects("__static__",null,this._propertyEffects.__static__)}});
(function(){var a=Polymer.Settings.usePolyfillProto,b=!!Object.getOwnPropertyDescriptor(document.documentElement,"properties");Polymer.Base._addFeature({_setupConfigure:function(a){this._config={};this._handlers=[];this._aboveConfig=null;if(a)for(var b in a)void 0!==a[b]&&(this._config[b]=a[b])},_marshalAttributes:function(){this._takeAttributesToModel(this._config)},_attributeChangedImpl:function(a){this._setAttributeToProperty(this._clientsReadied?this:this._config,a)},_configValue:function(a,b){var c=
this._propertyInfo[a];c&&c.readOnly||(this._config[a]=b)},_beforeClientsReady:function(){this._configure()},_configure:function(){this._configureAnnotationReferences();this._configureInstanceProperties();this._aboveConfig=this.mixin({},this._config);for(var a={},d=0;d<this.behaviors.length;d++)this._configureProperties(this.behaviors[d].properties,a);this._configureProperties(b?this.__proto__.properties:this.properties,a);this.mixin(a,this._aboveConfig);this._config=a;this._clients&&this._clients.length&&
this._distributeConfig(this._config)},_configureInstanceProperties:function(){for(var b in this._propertyEffects)!a&&this.hasOwnProperty(b)&&(this._configValue(b,this[b]),delete this[b])},_configureProperties:function(a,b){for(var c in a){var d=a[c];void 0!==d.value&&(d=d.value,"function"==typeof d&&(d=d.call(this,this._config)),b[c]=d)}},_distributeConfig:function(a){var b=this._propertyEffects;if(b)for(var c in a){var g=b[c];if(g)for(var h=0,k=g.length,l;h<k&&(l=g[h]);h++)if("annotation"===l.kind){var m=
this._nodes[l.effect.index],p=l.effect.propertyName,r="attribute"==l.effect.kind,n=m._propertyEffects&&m._propertyEffects[p];!m._configValue||!n&&r||(n=c===l.effect.value?a[c]:this._get(l.effect.value,a),n=this._computeFinalAnnotationValue(m,p,n,l.effect),r&&(n=m.deserialize(this.serialize(n),m._propertyInfo[p].type)),m._configValue(p,n))}}},_afterClientsReady:function(){this.importPath=this._importPath;this.rootPath=Polymer.rootPath;this._executeStaticEffects();this._applyConfig(this._config,this._aboveConfig);
this._flushHandlers()},_applyConfig:function(a,b){for(var c in a)void 0===this[c]&&this.__setProperty(c,a[c],c in b)},_notifyListener:function(a,b){if(!Polymer.Bind._isEventBogus(b,b.target)){if(b.detail){var c=b.detail.value;var d=b.detail.path}if(this._clientsReadied)return a.call(this,b.target,c,d);this._queueHandler([a,b.target,c,d])}},_queueHandler:function(a){this._handlers.push(a)},_flushHandlers:function(){for(var a=this._handlers,b=0,e=a.length,g;b<e&&(g=a[b]);b++)g[0].call(this,g[1],g[2],
g[3]);this._handlers=[]}})})();
(function(){var a=Polymer.Path;Polymer.Base._addFeature({notifyPath:function(a,c,d){var b={},g=this._get(a,this,b);1===arguments.length&&(c=g);b.path&&this._notifyPath(b.path,c,d)},_notifyPath:function(a,c,d){var b=this._propertySetter(a,c);if(b!==c&&(b===b||c===c))return this._pathEffector(a,c),d||this._notifyPathUp(a,c),!0},_getPathParts:function(a){if(Array.isArray(a)){for(var b=[],d=0;d<a.length;d++)for(var e=a[d].toString().split("."),g=0;g<e.length;g++)b.push(e[g]);return b}return a.toString().split(".")},
set:function(a,c,d){var b=d||this,g=this._getPathParts(a),h=g[g.length-1];if(1<g.length){for(a=0;a<g.length-1;a++){var k=g[a];l&&"#"==k[0]?b=Polymer.Collection.get(l).getItem(k):(b=b[k],l&&parseInt(k,10)==k&&(g[a]=Polymer.Collection.get(l).getKey(b)));if(!b)return;var l=Array.isArray(b)?b:null}if(l){var k=Polymer.Collection.get(l);if("#"==h[0]){var m=h;var p=k.getItem(m);h=l.indexOf(p);k.setItem(m,c)}else parseInt(h,10)==h&&(p=b[h],m=k.getKey(p),g[a]=m,k.setItem(m,c))}b[h]=c;d||this._notifyPath(g.join("."),
c)}else b[a]=c},get:function(a,c){return this._get(a,c)},_get:function(a,c,d){c=c||this;a=this._getPathParts(a);for(var b,g=0;g<a.length;g++){if(!c)return;var h=a[g];b&&"#"==h[0]?c=Polymer.Collection.get(b).getItem(h):(c=c[h],d&&b&&parseInt(h,10)==h&&(a[g]=Polymer.Collection.get(b).getKey(c)));b=Array.isArray(c)?c:null}d&&(d.path=a.join("."));return c},_pathEffector:function(b,c){var d=a.root(b);if(d=this._propertyEffects&&this._propertyEffects[d])for(var e=0,g;e<d.length&&(g=d[e]);e++){var h=g.pathFn;
h&&h.call(this,b,c,g.effect)}this._boundPaths&&this._notifyBoundPaths(b,c)},_annotationPathEffect:function(b,c,d){if(a.matches(d.value,!1,b))Polymer.Bind._annotationEffect.call(this,b,c,d);else if(!d.negate&&a.isDescendant(d.value,b)){var e=this._nodes[d.index];e&&e._notifyPath&&(b=a.translate(d.value,d.name,b),e._notifyPath(b,c,!0))}},_complexObserverPathEffect:function(b,c,d){a.matches(d.trigger.name,d.trigger.wildcard,b)&&Polymer.Bind._complexObserverEffect.call(this,b,c,d)},_computePathEffect:function(b,
c,d){a.matches(d.trigger.name,d.trigger.wildcard,b)&&Polymer.Bind._computeEffect.call(this,b,c,d)},_annotatedComputationPathEffect:function(b,c,d){a.matches(d.trigger.name,d.trigger.wildcard,b)&&Polymer.Bind._annotatedComputationEffect.call(this,b,c,d)},linkPaths:function(a,c){this._boundPaths=this._boundPaths||{};c?this._boundPaths[a]=c:this.unlinkPaths(a)},unlinkPaths:function(a){this._boundPaths&&delete this._boundPaths[a]},_notifyBoundPaths:function(b,c){for(var d in this._boundPaths){var e=this._boundPaths[d];
a.isDescendant(d,b)?this._notifyPath(a.translate(d,e,b),c):a.isDescendant(e,b)&&this._notifyPath(a.translate(e,d,b),c)}},_notifyPathUp:function(b,c){var d=a.root(b),d=Polymer.CaseMap.camelToDashCase(d)+this._EVENT_CHANGED;this.fire(d,{path:b,value:c},{bubbles:!1,_useCache:Polymer.Settings.eventDataCache||!Polymer.Settings.isIE})},_EVENT_CHANGED:"-changed",notifySplices:function(a,c){var b={};a=this._get(a,this,b);this._notifySplices(a,b.path,c)},_notifySplices:function(a,c,d){d={keySplices:Polymer.Collection.applySplices(a,
d),indexSplices:d};var b=c+".splices";this._notifyPath(b,d);this._notifyPath(c+".length",a.length);this.__data__[b]={keySplices:null,indexSplices:null}},_notifySplice:function(a,c,d,e,g){this._notifySplices(a,c,[{index:d,addedCount:e,removed:g,object:a,type:"splice"}])},push:function(a){var b={},d=this._get(a,this,b),e=Array.prototype.slice.call(arguments,1),g=d.length,h=d.push.apply(d,e);e.length&&this._notifySplice(d,b.path,g,e.length,[]);return h},pop:function(a){var b={},d=this._get(a,this,b),
e=!!d.length,g=d.pop.apply(d,Array.prototype.slice.call(arguments,1));e&&this._notifySplice(d,b.path,d.length,0,[g]);return g},splice:function(a,c){var b={},e=this._get(a,this,b);(c=0>c?e.length-Math.floor(-c):Math.floor(c))||(c=0);var g=Array.prototype.slice.call(arguments,1),h=e.splice.apply(e,g);((g=Math.max(g.length-2,0))||h.length)&&this._notifySplice(e,b.path,c,g,h);return h},shift:function(a){var b={},d=this._get(a,this,b),e=!!d.length,g=d.shift.apply(d,Array.prototype.slice.call(arguments,
1));e&&this._notifySplice(d,b.path,0,0,[g]);return g},unshift:function(a){var b={},d=this._get(a,this,b),e=Array.prototype.slice.call(arguments,1),g=d.unshift.apply(d,e);e.length&&this._notifySplice(d,b.path,0,e.length,[]);return g},prepareModelNotifyPath:function(a){this.mixin(a,{fire:Polymer.Base.fire,_getEvent:Polymer.Base._getEvent,__eventCache:Polymer.Base.__eventCache,notifyPath:Polymer.Base.notifyPath,_get:Polymer.Base._get,_EVENT_CHANGED:Polymer.Base._EVENT_CHANGED,_notifyPath:Polymer.Base._notifyPath,
_notifyPathUp:Polymer.Base._notifyPathUp,_pathEffector:Polymer.Base._pathEffector,_annotationPathEffect:Polymer.Base._annotationPathEffect,_complexObserverPathEffect:Polymer.Base._complexObserverPathEffect,_annotatedComputationPathEffect:Polymer.Base._annotatedComputationPathEffect,_computePathEffect:Polymer.Base._computePathEffect,_notifyBoundPaths:Polymer.Base._notifyBoundPaths,_getPathParts:Polymer.Base._getPathParts})}})})();
Polymer.Base._addFeature({resolveUrl:function(a){return Polymer.ResolveUrl.resolveUrl(a,this._importPath)}});
Polymer.CssParse={parse:function(a){a=this._clean(a);return this._parseCss(this._lex(a),a)},_clean:function(a){return a.replace(this._rx.comments,"").replace(this._rx.port,"")},_lex:function(a){for(var b={start:0,end:a.length},c=b,d=0,e=a.length;d<e;d++)switch(a[d]){case this.OPEN_BRACE:c.rules||(c.rules=[]);var g=c,c={start:d+1,parent:g,previous:g.rules[g.rules.length-1]};g.rules.push(c);break;case this.CLOSE_BRACE:c.end=d+1,c=c.parent||b}return b},_parseCss:function(a,b){var c=b.substring(a.start,
a.end-1);a.parsedCssText=a.cssText=c.trim();a.parent&&(c=b.substring(a.previous?a.previous.end:a.parent.start,a.start-1),c=this._expandUnicodeEscapes(c),c=c.replace(this._rx.multipleSpaces," "),c=c.substring(c.lastIndexOf(";")+1),c=a.parsedSelector=a.selector=c.trim(),a.atRule=0===c.indexOf(this.AT_START),a.atRule?0===c.indexOf(this.MEDIA_START)?a.type=this.types.MEDIA_RULE:c.match(this._rx.keyframesRule)&&(a.type=this.types.KEYFRAMES_RULE,a.keyframesName=a.selector.split(this._rx.multipleSpaces).pop()):
a.type=0===c.indexOf(this.VAR_START)?this.types.MIXIN_RULE:this.types.STYLE_RULE);if(c=a.rules)for(var d=0,e=c.length,g;d<e&&(g=c[d]);d++)this._parseCss(g,b);return a},_expandUnicodeEscapes:function(a){return a.replace(/\\([0-9a-f]{1,6})\s/gi,function(a,c){a=c;for(c=6-a.length;c--;)a="0"+a;return"\\"+a})},stringify:function(a,b,c){c=c||"";var d="";if(a.cssText||a.rules){var e=a.rules;if(e&&!this._hasMixinRules(e))for(var g=0,h=e.length,k;g<h&&(k=e[g]);g++)d=this.stringify(k,b,d);else d=b?a.cssText:
this.removeCustomProps(a.cssText),(d=d.trim())&&(d="  "+d+"\n")}d&&(a.selector&&(c+=a.selector+" "+this.OPEN_BRACE+"\n"),c+=d,a.selector&&(c+=this.CLOSE_BRACE+"\n\n"));return c},_hasMixinRules:function(a){return 0===a[0].selector.indexOf(this.VAR_START)},removeCustomProps:function(a){a=this.removeCustomPropAssignment(a);return this.removeCustomPropApply(a)},removeCustomPropAssignment:function(a){return a.replace(this._rx.customProp,"").replace(this._rx.mixinProp,"")},removeCustomPropApply:function(a){return a.replace(this._rx.mixinApply,
"").replace(this._rx.varApply,"")},types:{STYLE_RULE:1,KEYFRAMES_RULE:7,MEDIA_RULE:4,MIXIN_RULE:1E3},OPEN_BRACE:"{",CLOSE_BRACE:"}",_rx:{comments:/\/\*[^*]*\*+([^\/*][^*]*\*+)*\//gim,port:/@import[^;]*;/gim,customProp:/(?:^[^;\-\s}]+)?--[^;{}]*?:[^{};]*?(?:[;\n]|$)/gim,mixinProp:/(?:^[^;\-\s}]+)?--[^;{}]*?:[^{};]*?{[^}]*?}(?:[;\n]|$)?/gim,mixinApply:/@apply\s*\(?[^);]*\)?\s*(?:[;\n]|$)?/gim,varApply:/[^;:]*?:[^;]*?var\([^;]*\)(?:[;\n]|$)?/gim,keyframesRule:/^@[^\s]*keyframes/,multipleSpaces:/\s+/g},
VAR_START:"--",MEDIA_START:"@media",AT_START:"@"};
Polymer.StyleUtil=function(){var a=Polymer.Settings;return{NATIVE_VARIABLES:Polymer.Settings.useNativeCSSProperties,MODULE_STYLES_SELECTOR:"style, link[rel\x3dimport][type~\x3dcss], template",INCLUDE_ATTR:"include",toCssText:function(a,c){"string"===typeof a&&(a=this.parser.parse(a));c&&this.forEachRule(a,c);return this.parser.stringify(a,this.NATIVE_VARIABLES)},forRulesInStyles:function(a,c,d){if(a)for(var b=0,g=a.length,h;b<g&&(h=a[b]);b++)this.forEachRuleInStyle(h,c,d)},forActiveRulesInStyles:function(a,
c,d){if(a)for(var b=0,g=a.length,h;b<g&&(h=a[b]);b++)this.forEachRuleInStyle(h,c,d,!0)},rulesForStyle:function(a){!a.__cssRules&&a.textContent&&(a.__cssRules=this.parser.parse(a.textContent));return a.__cssRules},isKeyframesSelector:function(a){return a.parent&&a.parent.type===this.ruleTypes.KEYFRAMES_RULE},forEachRuleInStyle:function(a,c,d,e){var b=this.rulesForStyle(a),h,k;c&&(h=function(b){c(b,a)});d&&(k=function(b){d(b,a)});this.forEachRule(b,h,k,e)},forEachRule:function(a,c,d,e){if(a){var b=
!1;if(e&&a.type===this.ruleTypes.MEDIA_RULE){var h=a.selector.match(this.rx.MEDIA_MATCH);h&&(window.matchMedia(h[1]).matches||(b=!0))}a.type===this.ruleTypes.STYLE_RULE?c(a):d&&a.type===this.ruleTypes.KEYFRAMES_RULE?d(a):a.type===this.ruleTypes.MIXIN_RULE&&(b=!0);if((a=a.rules)&&!b)for(var b=0,h=a.length,k;b<h&&(k=a[b]);b++)this.forEachRule(k,c,d,e)}},applyCss:function(a,c,d,e){a=this.createScopeStyle(a,c);return this.applyStyle(a,d,e)},applyStyle:function(a,c,d){c=c||document.head;d=d&&d.nextSibling||
c.firstChild;this.__lastHeadApplyNode=a;return c.insertBefore(a,d)},createScopeStyle:function(a,c){var b=document.createElement("style");c&&b.setAttribute("scope",c);b.textContent=a;return b},__lastHeadApplyNode:null,applyStylePlaceHolder:function(a){a=document.createComment(" Shady DOM styles for "+a+" ");var b=document.head;b.insertBefore(a,(this.__lastHeadApplyNode?this.__lastHeadApplyNode.nextSibling:null)||b.firstChild);return this.__lastHeadApplyNode=a},cssFromModules:function(a,c){a=a.trim().split(" ");
for(var b="",e=0;e<a.length;e++)b+=this.cssFromModule(a[e],c);return b},cssFromModule:function(a,c){var b=Polymer.DomModule.import(a);b&&!b._cssText&&(b._cssText=this.cssFromElement(b));!b&&c&&console.warn("Could not find style data in module named",a);return b&&b._cssText||""},cssFromElement:function(a){for(var b="",d=Polymer.TreeApi.arrayCopy((a.content||a).querySelectorAll(this.MODULE_STYLES_SELECTOR)),e=0,g;e<d.length;e++)if(g=d[e],"template"===g.localName)g.hasAttribute("preserve-content")||
(b+=this.cssFromElement(g));else if("style"===g.localName){var h=g.getAttribute(this.INCLUDE_ATTR);h&&(b+=this.cssFromModules(h,!0));g=g.__appliedElement||g;g.parentNode.removeChild(g);b+=this.resolveCss(g.textContent,a.ownerDocument)}else g.import&&g.import.body&&(b+=this.resolveCss(g.import.body.textContent,g.import));return b},styleIncludesToTemplate:function(a){a=a.content.querySelectorAll("style[include]");for(var b=0,d;b<a.length;b++)d=a[b],d.parentNode.insertBefore(this._includesToFragment(d.getAttribute("include")),
d)},_includesToFragment:function(a){a=a.trim().split(" ");for(var b=document.createDocumentFragment(),d=0;d<a.length;d++){var e=Polymer.DomModule.import(a[d],"template");e&&this._addStylesToFragment(b,e.content)}return b},_addStylesToFragment:function(a,c){c=c.querySelectorAll("style");for(var b=0,e;b<c.length;b++){e=c[b];var g=e.getAttribute("include");g&&a.appendChild(this._includesToFragment(g));e.textContent&&a.appendChild(e.cloneNode(!0))}},isTargetedBuild:function(b){return a.useNativeShadow?
"shadow"===b:"shady"===b},cssBuildTypeForModule:function(a){if(a=Polymer.DomModule.import(a))return this.getCssBuildType(a)},getCssBuildType:function(a){return a.getAttribute("css-build")},_findMatchingParen:function(a,c){for(var b=0,e=a.length;c<e;c++)switch(a[c]){case "(":b++;break;case ")":if(0===--b)return c}return-1},processVariableAndFallback:function(a,c){var b=a.indexOf("var(");if(-1===b)return c(a,"","","");var e=this._findMatchingParen(a,b+3),g=a.substring(b+4,e),b=a.substring(0,b);a=this.processVariableAndFallback(a.substring(e+
1),c);var h=g.indexOf(",");if(-1===h)return c(b,g.trim(),"",a);e=g.substring(0,h).trim();g=g.substring(h+1).trim();return c(b,e,g,a)},rx:{VAR_ASSIGN:/(?:^|[;\s{]\s*)(--[\w-]*?)\s*:\s*(?:([^;{]*)|{([^}]*)})(?:(?=[;\s}])|$)/gi,MIXIN_MATCH:/(?:^|\W+)@apply\s*\(?([^);\n]*)\)?/gi,VAR_CONSUMED:/(--[\w-]+)\s*([:,;)]|$)/gi,ANIMATION_MATCH:/(animation\s*:)|(animation-name\s*:)/,MEDIA_MATCH:/@media[^(]*(\([^)]*\))/,IS_VAR:/^--/,BRACKETED:/\{[^}]*\}/g,HOST_PREFIX:"(?:^|[^.#[:])",HOST_SUFFIX:"($|[.:[\\s\x3e+~])"},
resolveCss:Polymer.ResolveUrl.resolveCss,parser:Polymer.CssParse,ruleTypes:Polymer.CssParse.types}}();
Polymer.StyleTransformer=function(){var a=Polymer.StyleUtil,b=Polymer.Settings,c={dom:function(a,b,c,d){this._transformDom(a,b||"",c,d)},_transformDom:function(a,b,c,d){a.setAttribute&&this.element(a,b,c,d);a=Polymer.dom(a).childNodes;for(var e=0;e<a.length;e++)this._transformDom(a[e],b,c,d)},element:function(a,b,c,e){c?e?a.removeAttribute(d):a.setAttribute(d,b):b&&(a.classList?e?(a.classList.remove(d),a.classList.remove(b)):(a.classList.add(d),a.classList.add(b)):a.getAttribute&&(c=a.getAttribute(A),
e?c&&a.setAttribute(A,c.replace(d,"").replace(b,"")):a.setAttribute(A,(c?c+" ":"")+d+" "+b)))},elementStyles:function(c,d){var e=c._styles,g="",h=c.__cssBuild,h=b.useNativeShadow||"shady"===h;if(h){var k=this;var l=function(a){a.selector=k._slottedToContent(a.selector);a.selector=a.selector.replace(m,":host \x3e *");d&&d(a)}}for(var n=0,p=e.length,r;n<p&&(r=e[n]);n++)var q=a.rulesForStyle(r),g=g+(h?a.toCssText(q,l):this.css(q,c.is,c.extends,d,c._scopeCssViaAttr)+"\n\n");return g.trim()},css:function(b,
c,d,e,g){var h=this._calcHostScope(c,d);c=this._calcElementScope(c,g);var k=this;return a.toCssText(b,function(a){a.isScoped||(k.rule(a,c,h),a.isScoped=!0);e&&e(a,c,h)})},_calcElementScope:function(a,b){return a?b?v+a+y:u+a:""},_calcHostScope:function(a,b){return b?"[is\x3d"+a+"]":a},rule:function(a,b,c){this._transformRule(a,this._transformComplexSelector,b,c)},_transformRule:function(a,b,c,d){a.selector=a.transformedSelector=this._transformRuleCss(a,b,c,d)},_transformRuleCss:function(b,c,d,e){var h=
b.selector.split(g);if(!a.isKeyframesSelector(b)){b=0;for(var k=h.length,l;b<k&&(l=h[b]);b++)h[b]=c.call(this,l,d,e)}return h.join(g)},_transformComplexSelector:function(a,b,c){var d=!1,e=!1,k=this;a=a.trim();a=this._slottedToContent(a);a=a.replace(m,":host \x3e *");a=a.replace(x,l+" $1");a=a.replace(h,function(a,g,h){d?h=h.replace(q," "):(a=k._transformCompoundSelector(h,g,b,c),d=d||a.stop,e=e||a.hostContext,g=a.combinator,h=a.value);return g+h});e&&(a=a.replace(n,function(a,b,d,e){return b+d+" "+
c+e+g+" "+b+c+d+e}));return a},_transformCompoundSelector:function(a,b,c,d){var e=a.search(q),g=!1;0<=a.indexOf(r)?g=!0:0<=a.indexOf(l)?a=this._transformHostSelector(a,d):0!==e&&(a=c?this._transformSimpleSelector(a,c):a);0<=a.indexOf(t)&&(b="");if(0<=e){a=a.replace(q," ");var h=!0}return{value:a,combinator:b,stop:h,hostContext:g}},_transformSimpleSelector:function(a,b){a=a.split(z);a[0]+=b;return a.join(z)},_transformHostSelector:function(a,b){var c=a.match(p);return(c=c&&c[2].trim()||"")?c[0].match(k)?
a.replace(p,function(a,c,d){return b+d}):c.split(k)[0]===b?c:E:a.replace(l,b)},documentRule:function(a){a.selector=a.parsedSelector;this.normalizeRootSelector(a);b.useNativeShadow||this._transformRule(a,this._transformDocumentSelector)},normalizeRootSelector:function(a){a.selector=a.selector.replace(m,"html")},_transformDocumentSelector:function(a){return a.match(q)?this._transformComplexSelector(a,e):this._transformSimpleSelector(a.trim(),e)},_slottedToContent:function(a){return a.replace(C,t+"\x3e $1")},
SCOPE_NAME:"style-scope"},d=c.SCOPE_NAME,e=":not(["+d+"]):not(."+d+")",g=",",h=/(^|[\s>+~]+)((?:\[.+?\]|[^\s>+~=\[])+)/g,k=/[[.:#*]/,l=":host",m=":root",p=/(:host)(?:\(((?:\([^)(]*\)|[^)(]*)+?)\))/,r=":host-context",n=/(.*)(?::host-context)(?:\(((?:\([^)(]*\)|[^)(]*)+?)\))(.*)/,t="::content",q=/::content|::shadow|\/deep\//,u=".",v="["+d+"~\x3d",y="]",z=":",A="class",x=new RegExp("^("+t+")"),E="should_not_match",C=/(?:::slotted)(?:\(((?:\([^)(]*\)|[^)(]*)+?)\))/g;return c}();
Polymer.StyleExtends=function(){var a=Polymer.StyleUtil;return{hasExtends:function(a){return!!a.match(this.rx.EXTEND)},transform:function(b){b=a.rulesForStyle(b);var c=this;a.forEachRule(b,function(a){c._mapRuleOntoParent(a);if(a.parent)for(var b;b=c.rx.EXTEND.exec(a.cssText);)(b=c._findExtendor(b[1],a))&&c._extendRule(a,b);a.cssText=a.cssText.replace(c.rx.EXTEND,"")});return a.toCssText(b,function(a){a.selector.match(c.rx.STRIP)&&(a.cssText="")},!0)},_mapRuleOntoParent:function(a){if(a.parent){for(var b=
a.parent.map||(a.parent.map={}),d=a.selector.split(","),e=0,g;e<d.length;e++)g=d[e],b[g.trim()]=a;return b}},_findExtendor:function(a,c){return c.parent&&c.parent.map&&c.parent.map[a]||this._findExtendor(a,c.parent)},_extendRule:function(a,c){a.parent!==c.parent&&this._cloneAndAddRuleToParent(c,a.parent);a.extends=a.extends||[];a.extends.push(c);c.selector=c.selector.replace(this.rx.STRIP,"");c.selector=(c.selector&&c.selector+",\n")+a.selector;c.extends&&c.extends.forEach(function(b){this._extendRule(a,
b)},this)},_cloneAndAddRuleToParent:function(a,c){a=Object.create(a);a.parent=c;a.extends&&(a.extends=a.extends.slice());c.rules.push(a)},rx:{EXTEND:/@extends\(([^)]*)\)\s*?;/gim,STRIP:/%[^,]*$/}}}();
Polymer.ApplyShim=function(){function a(a,b){a=a.trim();t[a]={properties:b,dependants:{}}}function b(a){a=a.trim();return t[a]}function c(a){a=a.split(";");for(var b,c,d={},e=0,g;e<a.length;e++)if(b=a[e])if(g=b.split(":"),1<g.length){c=b=g[0].trim();g=g.slice(1).join(":");var h=n.exec(g);h&&(g=h[1]?q._getInitialValueForProperty(c):"apply-shim-inherit");c=g;d[b]=c}return d}function d(a){var b=q.__currentElementProto,b=b&&b.is,c;for(c in a.dependants)c!==b&&(a.dependants[c].__applyShimInvalid=!0)}function e(e,
g,l,m){l&&k.processVariableAndFallback(l,function(a,c){c&&b(c)&&(m="@apply "+c+";")});if(!m)return e;var n=h(m),p=e.slice(0,e.indexOf("--")),r=n=c(n),q=b(g),t=q&&q.properties;t?(r=Object.create(t),r=Polymer.Base.mixin(r,n)):a(g,r);var u=[],v,y=!1;for(v in r){var z=n[v];void 0===z&&(z="initial");!t||v in t||(y=!0);u.push(g+"_-_"+v+": "+z)}y&&d(q);q&&(q.properties=r);l&&(p=e+";"+p);return p+u.join("; ")+";"}function g(a,b,c){return"var("+b+",var("+c+"))"}function h(d){for(var e;e=l.exec(d);){var g=
e[0],h=e[1];e=e.index;var k=d.slice(0,e+g.indexOf("@apply"));d=d.slice(e+g.length);var m=c(k),n,g=void 0,h=h.replace(r,""),p=[];var t=b(h);t||(a(h,{}),t=b(h));if(t)for(g in(n=q.__currentElementProto)&&(t.dependants[n.is]=n),t.properties)t=m&&m[g],n=[g,": var(",h,"_-_",g],t&&n.push(",",t),n.push(")"),p.push(n.join(""));g=p.join("; ");d=[k,g,d].join("");l.lastIndex=e+g.length}return d}var k=Polymer.StyleUtil,l=k.rx.MIXIN_MATCH,m=k.rx.VAR_ASSIGN,p=/var\(\s*(--[^,]*),\s*(--[^)]*)\)/g,r=/;\s*/m,n=/^\s*(initial)|(inherit)\s*$/,
t={},q={_measureElement:null,_map:t,_separator:"_-_",transform:function(a,b){this.__currentElementProto=b;k.forRulesInStyles(a,this._boundFindDefinitions);k.forRulesInStyles(a,this._boundFindApplications);b&&(b.__applyShimInvalid=!1);this.__currentElementProto=null},_findDefinitions:function(a){var b=a.parsedCssText,b=b.replace(p,g),b=b.replace(m,e);a.cssText=b;":root"===a.selector&&(a.selector=":host \x3e *")},_findApplications:function(a){a.cssText=h(a.cssText)},transformRule:function(a){this._findDefinitions(a);
this._findApplications(a)},_getInitialValueForProperty:function(a){this._measureElement||(this._measureElement=document.createElement("meta"),this._measureElement.style.all="initial",document.head.appendChild(this._measureElement));return window.getComputedStyle(this._measureElement).getPropertyValue(a)}};q._boundTransformRule=q.transformRule.bind(q);q._boundFindDefinitions=q._findDefinitions.bind(q);q._boundFindApplications=q._findApplications.bind(q);return q}();
(function(){var a=Polymer.Base._prepElement,b=Polymer.Settings.useNativeShadow,c=Polymer.StyleUtil,d=Polymer.StyleTransformer,e=Polymer.StyleExtends,g=Polymer.ApplyShim,h=Polymer.Settings;Polymer.Base._addFeature({_prepElement:function(b){this._encapsulateStyle&&"shady"!==this.__cssBuild&&d.element(b,this.is,this._scopeCssViaAttr);a.call(this,b)},_prepStyles:function(){void 0===this._encapsulateStyle&&(this._encapsulateStyle=!b);b||(this._scopeStyle=c.applyStylePlaceHolder(this.is));this.__cssBuild=
c.cssBuildTypeForModule(this.is)},_prepShimStyles:function(){if(this._template){var a=c.isTargetedBuild(this.__cssBuild);h.useNativeCSSProperties&&"shadow"===this.__cssBuild&&a?h.preserveStyleIncludes&&c.styleIncludesToTemplate(this._template):(this._styles=this._styles||this._collectStyles(),h.useNativeCSSProperties&&!this.__cssBuild&&g.transform(this._styles,this),a=h.useNativeCSSProperties&&a?this._styles.length&&this._styles[0].textContent.trim():d.elementStyles(this),this._prepStyleProperties(),
!this._needsStyleProperties()&&a&&c.applyCss(a,this.is,b?this._template.content:null,this._scopeStyle))}else this._styles=[]},_collectStyles:function(){var a=[],b="",d=this.styleModules;if(d)for(var g=0,h=d.length,n;g<h&&(n=d[g]);g++)b+=c.cssFromModule(n);b+=c.cssFromModule(this.is);d=this._template&&this._template.parentNode;!this._template||d&&d.id.toLowerCase()===this.is||(b+=c.cssFromElement(this._template));b&&(d=document.createElement("style"),d.textContent=b,e.hasExtends(d.textContent)&&e.transform(d),
a.push(d));return a},_elementAdd:function(a){this._encapsulateStyle&&(a.__styleScoped?a.__styleScoped=!1:d.dom(a,this.is,this._scopeCssViaAttr))},_elementRemove:function(a){this._encapsulateStyle&&d.dom(a,this.is,this._scopeCssViaAttr,!0)},scopeSubtree:function(a,c){if(!b){var d=this,e=function(a){if(a.nodeType===Node.ELEMENT_NODE){var b=a.getAttribute("class");a.setAttribute("class",d._scopeElementClass(a,b));a=a.querySelectorAll("*");for(var c=0,e;c<a.length&&(e=a[c]);c++)b=e.getAttribute("class"),
e.setAttribute("class",d._scopeElementClass(e,b))}};e(a);if(c)return c=new MutationObserver(function(a){for(var b=0,c;b<a.length&&(c=a[b]);b++)if(c.addedNodes)for(var d=0;d<c.addedNodes.length;d++)e(c.addedNodes[d])}),c.observe(a,{childList:!0,subtree:!0}),c}}})})();
Polymer.StyleProperties=function(){var a=Polymer.DomApi.matchesSelector,b=Polymer.StyleUtil,c=Polymer.StyleTransformer,d=navigator.userAgent.match("Trident"),e=Polymer.Settings;return{decorateStyles:function(a,d){var e=this,g={},h=[],p=0,r=c._calcHostScope(d.is,d.extends);b.forRulesInStyles(a,function(a,c){e.decorateRule(a);a.index=p++;e.whenHostOrRootRule(d,a,c,function(c){a.parent.type===b.ruleTypes.MEDIA_RULE&&(d.__notStyleScopeCacheable=!0);c.isHost&&(c=c.selector.split(" ").some(function(a){return 0===
a.indexOf(r)&&a.length!==r.length}),d.__notStyleScopeCacheable=d.__notStyleScopeCacheable||c)});e.collectPropertiesInCssText(a.propertyInfo.cssText,g)},function(a){h.push(a)});a._keyframes=h;a=[];for(var n in g)a.push(n);return a},decorateRule:function(a){if(a.propertyInfo)return a.propertyInfo;var b={},c={};this.collectProperties(a,c)&&(b.properties=c,a.rules=null);b.cssText=this.collectCssText(a);return a.propertyInfo=b},collectProperties:function(a,b){var c=a.propertyInfo;if(c){if(c.properties)return Polymer.Base.mixin(b,
c.properties),!0}else{for(var c=this.rx.VAR_ASSIGN,d=a.parsedCssText,e;a=c.exec(d);)e=(a[2]||a[3]).trim(),"inherit"!==e&&(b[a[1].trim()]=e),e=!0;return e}},collectCssText:function(a){return this.collectConsumingCssText(a.parsedCssText)},collectConsumingCssText:function(a){return a.replace(this.rx.BRACKETED,"").replace(this.rx.VAR_ASSIGN,"")},collectPropertiesInCssText:function(a,b){for(var c;c=this.rx.VAR_CONSUMED.exec(a);){var d=c[1];":"!==c[2]&&(b[d]=!0)}},reify:function(a){for(var b=Object.getOwnPropertyNames(a),
c=0,d;c<b.length;c++)d=b[c],a[d]=this.valueForProperty(a[d],a)},valueForProperty:function(a,c){if(a)if(0<=a.indexOf(";"))a=this.valueForProperties(a,c);else{var d=this;a=b.processVariableAndFallback(a,function(a,b,e,g){(b=d.valueForProperty(c[b],c))&&"initial"!==b?"apply-shim-inherit"===b&&(b="inherit"):b=d.valueForProperty(c[e]||e,c)||e;return a+(b||"")+g})}return a&&a.trim()||""},valueForProperties:function(a,b){a=a.split(";");for(var c=0,d,e;c<a.length;c++)if(d=a[c]){this.rx.MIXIN_MATCH.lastIndex=
0;if(e=this.rx.MIXIN_MATCH.exec(d))d=this.valueForProperty(b[e[1]],b);else if(e=d.indexOf(":"),-1!==e){var g=d.substring(e),g=g.trim(),g=this.valueForProperty(g,b)||g;d=d.substring(0,e)+g}a[c]=d&&d.lastIndexOf(";")===d.length-1?d.slice(0,-1):d||""}return a.join(";")},applyProperties:function(a,b){var c="";a.propertyInfo||this.decorateRule(a);a.propertyInfo.cssText&&(c=this.valueForProperties(a.propertyInfo.cssText,b));a.cssText=c},applyKeyframeTransforms:function(a,b){var c=a.cssText,d=a.cssText;
null==a.hasAnimations&&(a.hasAnimations=this.rx.ANIMATION_MATCH.test(c));if(a.hasAnimations)if(null==a.keyframeNamesToTransform){a.keyframeNamesToTransform=[];for(var e in b)d=b[e],d=d(c),c!==d&&(c=d,a.keyframeNamesToTransform.push(e))}else{for(e=0;e<a.keyframeNamesToTransform.length;++e)d=b[a.keyframeNamesToTransform[e]],c=d(c);d=c}a.cssText=d},propertyDataFromStyles:function(c,d){var e={},g=this,h=[];b.forActiveRulesInStyles(c,function(b){b.propertyInfo||g.decorateRule(b);var c=b.transformedSelector||
b.parsedSelector;d&&b.propertyInfo.properties&&c&&a.call(d,c)&&(g.collectProperties(b,e),b=b.index,c=parseInt(b/32),h[c]=(h[c]||0)|1<<b%32)});return{properties:e,key:h}},_rootSelector:/:root|:host\s*>\s*\*/,_checkRoot:function(a,b){return!!b.match(this._rootSelector)||"html"===a&&-1<b.indexOf("html")},whenHostOrRootRule:function(a,b,d,l){b.propertyInfo||self.decorateRule(b);if(b.propertyInfo.properties){var g=a.is?c._calcHostScope(a.is,a.extends):"html",h=b.parsedSelector,k=this._checkRoot(g,h),n=
!k&&0===h.indexOf(":host");"shady"===(a.__cssBuild||d.__cssBuild)&&(k=h===g+" \x3e *."+g||-1<h.indexOf("html"),n=!k&&0===h.indexOf(g));if(k||n)d=g,n&&(e.useNativeShadow&&!b.transformedSelector&&(b.transformedSelector=c._transformRuleCss(b,c._transformComplexSelector,a.is,g)),d=b.transformedSelector||b.parsedSelector),k&&"html"===g&&(d=b.transformedSelector||b.parsedSelector),l({selector:d,isHost:n,isRoot:k})}},hostAndRootPropertiesForScope:function(c){var d={},e={},g=this;b.forActiveRulesInStyles(c._styles,
function(b,h){g.whenHostOrRootRule(c,b,h,function(h){a.call(c._element||c,h.selector)&&(h.isHost?g.collectProperties(b,d):g.collectProperties(b,e))})});return{rootProps:e,hostProps:d}},transformStyles:function(a,b,d){var g=this,h=c._calcHostScope(a.is,a.extends),k=new RegExp(this.rx.HOST_PREFIX+(a.extends?"\\"+h.slice(0,-1)+"\\]":h)+this.rx.HOST_SUFFIX),r=this._elementKeyframeTransforms(a,d);return c.elementStyles(a,function(c){g.applyProperties(c,b);e.useNativeShadow||Polymer.StyleUtil.isKeyframesSelector(c)||
!c.cssText||(g.applyKeyframeTransforms(c,r),g._scopeSelector(c,k,h,a._scopeCssViaAttr,d))})},_elementKeyframeTransforms:function(a,b){a=a._styles._keyframes;var c={};if(!e.useNativeShadow&&a)for(var d=0,g=a[d];d<a.length;g=a[++d])this._scopeKeyframes(g,b),c[g.keyframesName]=this._keyframesRuleTransformer(g);return c},_keyframesRuleTransformer:function(a){return function(b){return b.replace(a.keyframesNameRx,a.transformedKeyframesName)}},_scopeKeyframes:function(a,b){a.keyframesNameRx=new RegExp(a.keyframesName,
"g");a.transformedKeyframesName=a.keyframesName+"-"+b;a.transformedSelector=a.transformedSelector||a.selector;a.selector=a.transformedSelector.replace(a.keyframesName,a.transformedKeyframesName)},_scopeSelector:function(a,b,d,e,m){a.transformedSelector=a.transformedSelector||a.selector;e=e?"["+c.SCOPE_NAME+"~\x3d"+m+"]":"."+m;m=a.transformedSelector.split(",");for(var g=0,h=m.length,k;g<h&&(k=m[g]);g++)m[g]=k.match(b)?k.replace(d,e):e+" "+k;a.selector=m.join(",")},applyElementScopeSelector:function(a,
b,d,e){var g=e?a.getAttribute(c.SCOPE_NAME):a.getAttribute("class")||"";b=d?g.replace(d,b):(g?g+" ":"")+this.XSCOPE_NAME+" "+b;g!==b&&(e?a.setAttribute(c.SCOPE_NAME,b):a.setAttribute("class",b))},applyElementStyle:function(a,c,k,l){c=l?l.textContent||"":this.transformStyles(a,c,k);var g=a._customStyle;g&&!e.useNativeShadow&&g!==l&&(g._useCount--,0>=g._useCount&&g.parentNode&&g.parentNode.removeChild(g));e.useNativeShadow?a._customStyle?(a._customStyle.textContent=c,l=a._customStyle):c&&(l=b.applyCss(c,
k,a.root,a._scopeStyle)):l?l.parentNode||(d&&-1<c.indexOf("@media")&&(l.textContent=c),b.applyStyle(l,null,a._scopeStyle)):c&&(l=b.applyCss(c,k,null,a._scopeStyle));l&&(l._useCount=l._useCount||0,a._customStyle!=l&&l._useCount++,a._customStyle=l);return l},mixinCustomStyle:function(a,b){var c,d;for(d in b)if((c=b[d])||0===c)a[d]=c},updateNativeStyleProperties:function(a,b){var c=a.__customStyleProperties;if(c)for(var d=0;d<c.length;d++)a.style.removeProperty(c[d]);var c=[],e;for(e in b)null!==b[e]&&
(a.style.setProperty(e,b[e]),c.push(e));a.__customStyleProperties=c},rx:b.rx,XSCOPE_NAME:"x-scope"}}();Polymer.StyleCache=function(){this.cache={}};
Polymer.StyleCache.prototype={MAX:100,store:function(a,b,c,d){b.keyValues=c;b.styles=d;a=this.cache[a]=this.cache[a]||[];a.push(b);a.length>this.MAX&&a.shift()},retrieve:function(a,b,c){if(a=this.cache[a])for(var d=a.length-1,e;0<=d;d--)if(e=a[d],c===e.styles&&this._objectsEqual(b,e.keyValues))return e},clear:function(){this.cache={}},_objectsEqual:function(a,b){var c;for(c in a){var d=a[c];var e=b[c];if("object"===typeof d&&d?!this._objectsStrictlyEqual(d,e):d!==e)return!1}return Array.isArray(a)?
a.length===b.length:!0},_objectsStrictlyEqual:function(a,b){return this._objectsEqual(a,b)&&this._objectsEqual(b,a)}};
Polymer.StyleDefaults=function(){var a=Polymer.StyleProperties,b=Polymer.Settings.useNativeCSSProperties;return{_styles:[],_properties:null,customStyle:{},_styleCache:new Polymer.StyleCache,_element:Polymer.DomApi.wrap(document.documentElement),addStyle:function(a){this._styles.push(a);this._properties=null},get _styleProperties(){this._properties||(a.decorateStyles(this._styles,this),this._styles._scopeStyleProperties=null,this._properties=a.hostAndRootPropertiesForScope(this).rootProps,a.mixinCustomStyle(this._properties,
this.customStyle),a.reify(this._properties));return this._properties},hasStyleProperties:function(){return!!this._properties},_needsStyleProperties:function(){},_computeStyleProperties:function(){return this._styleProperties},updateStyles:function(c){this._properties=null;c&&Polymer.Base.mixin(this.customStyle,c);this._styleCache.clear();c=0;for(var d;c<this._styles.length;c++)d=this._styles[c],d=d.__importElement||d,d._apply();b&&a.updateNativeStyleProperties(document.documentElement,this.customStyle)}}}();
(function(){var a=Polymer.Base.serializeValueToAttribute,b=Polymer.StyleProperties,c=Polymer.StyleTransformer,d=Polymer.StyleDefaults,e=Polymer.Settings.useNativeShadow,g=Polymer.Settings.useNativeCSSProperties;Polymer.Base._addFeature({_prepStyleProperties:function(){g||(this._ownStylePropertyNames=this._styles&&this._styles.length?b.decorateStyles(this._styles,this):null)},customStyle:null,getComputedStyleValue:function(a){g||this._styleProperties||this._computeStyleProperties();return!g&&this._styleProperties&&
this._styleProperties[a]||getComputedStyle(this).getPropertyValue(a)},_setupStyleProperties:function(){this.customStyle={};this._customStyle=this._ownStyleProperties=this._scopeSelector=this._styleProperties=this._styleCache=null},_needsStyleProperties:function(){return!(g||!this._ownStylePropertyNames||!this._ownStylePropertyNames.length)},_validateApplyShim:function(){if(this.__applyShimInvalid){Polymer.ApplyShim.transform(this._styles,this.__proto__);var a=c.elementStyles(this),b=e?this._template.content.querySelector("style"):
this._scopeStyle&&this._scopeStyle.nextSibling;b&&(b.textContent=a)}},_beforeAttached:function(){this._scopeSelector&&!this.__stylePropertiesInvalid||!this._needsStyleProperties()||(this.__stylePropertiesInvalid=!1,this._updateStyleProperties())},_findStyleHost:function(){for(var a=this;a=Polymer.dom(a).getOwnerRoot();){if(Polymer.isInstance(a.host))return a.host;a=a.host}return d},_updateStyleProperties:function(){var a=this._findStyleHost();a._styleProperties||a._computeStyleProperties();a._styleCache||
(a._styleCache=new Polymer.StyleCache);var c=b.propertyDataFromStyles(a._styles,this),d=!this.__notStyleScopeCacheable;if(d){c.key.customStyle=this.customStyle;var g=a._styleCache.retrieve(this.is,c.key,this._styles)}var k=!!g;k?this._styleProperties=g._styleProperties:this._computeStyleProperties(c.properties);this._computeOwnStyleProperties();k||(g=h.retrieve(this.is,this._ownStyleProperties,this._styles));var l=!!g&&!k;g=this._applyStyleProperties(g);k||(g=g&&e?g.cloneNode(!0):g,g={style:g,_scopeSelector:this._scopeSelector,
_styleProperties:this._styleProperties},d&&(c.key.customStyle={},this.mixin(c.key.customStyle,this.customStyle),a._styleCache.store(this.is,g,c.key,this._styles)),l||h.store(this.is,Object.create(g),this._ownStyleProperties,this._styles))},_computeStyleProperties:function(a){var c=this._findStyleHost();c._styleProperties||c._computeStyleProperties();var d=Object.create(c._styleProperties),e=b.hostAndRootPropertiesForScope(this);this.mixin(d,e.hostProps);a=a||b.propertyDataFromStyles(c._styles,this).properties;
this.mixin(d,a);this.mixin(d,e.rootProps);b.mixinCustomStyle(d,this.customStyle);b.reify(d);this._styleProperties=d},_computeOwnStyleProperties:function(){for(var a={},b=0,c;b<this._ownStylePropertyNames.length;b++)c=this._ownStylePropertyNames[b],a[c]=this._styleProperties[c];this._ownStyleProperties=a},_scopeCount:0,_applyStyleProperties:function(a){var c=this._scopeSelector;this._scopeSelector=a?a._scopeSelector:this.is+"-"+this.__proto__._scopeCount++;a=b.applyElementStyle(this,this._styleProperties,
this._scopeSelector,a&&a.style);e||b.applyElementScopeSelector(this,this._scopeSelector,c,this._scopeCssViaAttr);return a},serializeValueToAttribute:function(b,c,d){d=d||this;if("class"===c&&!e){var g=d===this?this.domHost||this.dataHost:this;g&&(b=g._scopeElementClass(d,b))}d=this.shadyRoot&&this.shadyRoot._hasDistributed?Polymer.dom(d):d;a.call(this,b,c,d)},_scopeElementClass:function(a,b){e||this._scopeCssViaAttr||(b=(b?b+" ":"")+k+" "+this.is+(a._scopeSelector?" "+l+" "+a._scopeSelector:""));
return b},updateStyles:function(a){a&&this.mixin(this.customStyle,a);g?b.updateNativeStyleProperties(this,this.customStyle):(this.isAttached?this._needsStyleProperties()?this._updateStyleProperties():this._styleProperties=null:this.__stylePropertiesInvalid=!0,this._styleCache&&this._styleCache.clear(),this._updateRootStyles())},_updateRootStyles:function(a){a=a||this.root;a=Polymer.dom(a)._query(function(a){return a.shadyRoot||a.shadowRoot});for(var b=0,c=a.length,d;b<c&&(d=a[b]);b++)d.updateStyles&&
d.updateStyles()}});Polymer.updateStyles=function(a){d.updateStyles(a);Polymer.Base._updateRootStyles(document)};var h=new Polymer.StyleCache;Polymer.customStyleCache=h;var k=c.SCOPE_NAME,l=b.XSCOPE_NAME})();
Polymer.Base._addFeature({_registerFeatures:function(){this._prepIs();this.factoryImpl&&this._prepConstructor();this._prepStyles()},_finishRegisterFeatures:function(){this._prepTemplate();this._prepShimStyles();this._prepAnnotations();this._prepEffects();this._prepBehaviors();this._prepPropertyInfo();this._prepBindings();this._prepShady()},_prepBehavior:function(a){this._addPropertyEffects(a.properties);this._addComplexObserverEffects(a.observers);this._addHostAttributes(a.hostAttributes)},_initFeatures:function(){this._setupGestures();
this._setupConfigure(this.__data__);this._setupStyleProperties();this._setupDebouncers();this._setupShady();this._registerHost();this._template&&(this._validateApplyShim(),this._poolContent(),this._beginHosting(),this._stampTemplate(),this._endHosting(),this._marshalAnnotationReferences());this._marshalInstanceEffects();this._marshalBehaviors();this._marshalHostAttributes();this._marshalAttributes();this._tryReady()},_marshalBehavior:function(a){a.listeners&&this._listenListeners(a.listeners)}});
(function(){var a=Polymer.StyleProperties,b=Polymer.StyleUtil,c=Polymer.CssParse,d=Polymer.StyleDefaults,e=Polymer.StyleTransformer,g=Polymer.ApplyShim,h=Polymer.Debounce,k=Polymer.Settings,l;Polymer({is:"custom-style",extends:"style",_template:null,properties:{include:String},ready:function(){this.__appliedElement=this.__appliedElement||this;this.__cssBuild=b.getCssBuildType(this);this.__appliedElement!==this&&(this.__appliedElement.__cssBuild=this.__cssBuild);this._tryApply()},attached:function(){this._tryApply()},
_tryApply:function(){if(!this._appliesToDocument&&this.parentNode&&"dom-module"!==this.parentNode.localName){this._appliesToDocument=!0;var a=this.__appliedElement;k.useNativeCSSProperties||(this.__needsUpdateStyles=d.hasStyleProperties(),d.addStyle(a));if(a.textContent||this.include)this._apply(!0);else{var b=this,c=new MutationObserver(function(){c.disconnect();b._apply(!0)});c.observe(a,{childList:!0})}}},_updateStyles:function(){Polymer.updateStyles()},_apply:function(a){var c=this.__appliedElement;
this.include&&(c.textContent=b.cssFromModules(this.include,!0)+c.textContent);if(c.textContent){var d=this.__cssBuild,h=b.isTargetedBuild(d);if(!k.useNativeCSSProperties||!h){var l=b.rulesForStyle(c);h||(b.forEachRule(l,function(a){e.documentRule(a)}),k.useNativeCSSProperties&&!d&&g.transform([c]));if(k.useNativeCSSProperties)c.textContent=b.toCssText(l);else{var m=this,c=function(){m._flushCustomProperties()};a?Polymer.RenderStatus.whenReady(c):c()}}}},_flushCustomProperties:function(){this.__needsUpdateStyles?
(this.__needsUpdateStyles=!1,l=h(l,this._updateStyles)):this._applyCustomProperties()},_applyCustomProperties:function(){var d=this.__appliedElement;this._computeStyleProperties();var e=this._styleProperties,g=b.rulesForStyle(d);g&&(d.textContent=b.toCssText(g,function(b){var d=b.cssText=b.parsedCssText;b.propertyInfo&&b.propertyInfo.cssText&&(d=c.removeCustomPropAssignment(d),b.cssText=a.valueForProperties(d,e))}))}})})();
Polymer.Templatizer={properties:{__hideTemplateChildren__:{observer:"_showHideChildren"}},_instanceProps:Polymer.nob,_parentPropPrefix:"_parent_",templatize:function(a){this._templatized=a;a._content||(a._content=a.content);if(a._content._ctor)this.ctor=a._content._ctor,this._prepParentProperties(this.ctor.prototype,a);else{var b=Object.create(Polymer.Base);this._customPrepAnnotations(b,a);this._prepParentProperties(b,a);b._prepEffects();this._customPrepEffects(b);b._prepBehaviors();b._prepPropertyInfo();
b._prepBindings();b._notifyPathUp=this._notifyPathUpImpl;b._scopeElementClass=this._scopeElementClassImpl;b.listen=this._listenImpl;b._showHideChildren=this._showHideChildrenImpl;b.__setPropertyOrig=this.__setProperty;b.__setProperty=this.__setPropertyImpl;var c=this._constructorImpl,d=function(a,b){c.call(this,a,b)};d.prototype=b;b.constructor=d;this.ctor=a._content._ctor=d}},_getRootDataHost:function(){return this.dataHost&&this.dataHost._rootDataHost||this.dataHost},_showHideChildrenImpl:function(a){for(var b=
this._children,c=0;c<b.length;c++){var d=b[c];!!a!=!!d.__hideTemplateChildren__&&(d.nodeType===Node.TEXT_NODE?a?(d.__polymerTextContent__=d.textContent,d.textContent=""):d.textContent=d.__polymerTextContent__:d.style&&(a?(d.__polymerDisplay__=d.style.display,d.style.display="none"):d.style.display=d.__polymerDisplay__));d.__hideTemplateChildren__=a}},__setPropertyImpl:function(a,b,c,d){d&&d.__hideTemplateChildren__&&"textContent"==a&&(a="__polymerTextContent__");this.__setPropertyOrig(a,b,c,d)},_debounceTemplate:function(a){Polymer.dom.addDebouncer(this.debounce("_debounceTemplate",
a))},_flushTemplates:function(){Polymer.dom.flush()},_customPrepEffects:function(a){var b=a._parentProps,c;for(c in b)a._addPropertyEffect(c,"function",this._createHostPropEffector(c));for(c in this._instanceProps)a._addPropertyEffect(c,"function",this._createInstancePropEffector(c))},_customPrepAnnotations:function(a,b){a._template=b;var c=b._content;if(!c._notes){var d=a._rootDataHost;d&&(Polymer.Annotations.prepElement=function(){d._prepElement()});c._notes=Polymer.Annotations.parseAnnotations(b);
Polymer.Annotations.prepElement=null;this._processAnnotations(c._notes)}a._notes=c._notes;a._parentProps=c._parentProps},_prepParentProperties:function(a,b){var c=this._parentProps=a._parentProps;if(this._forwardParentProp&&c){var d=a._parentPropProto,e;if(!d){for(e in this._instanceProps)delete c[e];d=a._parentPropProto=Object.create(null);b!=this&&(Polymer.Bind.prepareModel(d),Polymer.Base.prepareModelNotifyPath(d));for(e in c)a=this._parentPropPrefix+e,c=[{kind:"function",effect:this._createForwardPropEffector(e),
fn:Polymer.Bind._functionEffect},{kind:"notify",fn:Polymer.Bind._notifyEffect,effect:{event:Polymer.CaseMap.camelToDashCase(a)+"-changed"}}],d._propertyEffects=d._propertyEffects||{},d._propertyEffects[a]=c,Polymer.Bind._createAccessors(d,a,c)}var g=this;b!=this&&(Polymer.Bind.prepareInstance(b),b._forwardParentProp=function(a,b){g._forwardParentProp(a,b)});this._extendTemplate(b,d);b._pathEffector=function(a,b,c){return g._pathEffectorImpl(a,b,c)}}},_createForwardPropEffector:function(a){return function(b,
c){this._forwardParentProp(a,c)}},_createHostPropEffector:function(a){var b=this._parentPropPrefix;return function(c,d){this.dataHost._templatized[b+a]=d}},_createInstancePropEffector:function(a){return function(b,c,d,e){e||this.dataHost._forwardInstanceProp(this,a,c)}},_extendTemplate:function(a,b){var c=Object.getOwnPropertyNames(b);b._propertySetter&&(a._propertySetter=b._propertySetter);for(var d=0,e;d<c.length&&(e=c[d]);d++){var g=a[e];g&&"_propertyEffects"==e?(g=Polymer.Base.mixin({},g),a._propertyEffects=
Polymer.Base.mixin(g,b._propertyEffects)):(Object.defineProperty(a,e,Object.getOwnPropertyDescriptor(b,e)),void 0!==g&&a._propertySetter(e,g))}},_showHideChildren:function(){},_forwardInstancePath:function(){},_forwardInstanceProp:function(){},_notifyPathUpImpl:function(a,b){var c=this.dataHost,d=Polymer.Path.root(a);c._forwardInstancePath.call(c,this,a,b);d in c._parentProps&&c._templatized._notifyPath(c._parentPropPrefix+a,b)},_pathEffectorImpl:function(a,b,c){if(this._forwardParentPath&&0===a.indexOf(this._parentPropPrefix)){var d=
a.substring(this._parentPropPrefix.length);Polymer.Path.root(d)in this._parentProps&&this._forwardParentPath(d,b)}Polymer.Base._pathEffector.call(this._templatized,a,b,c)},_constructorImpl:function(a,b){this._rootDataHost=b._getRootDataHost();this._setupConfigure(a);this._registerHost(b);this._beginHosting();this.root=this.instanceTemplate(this._template);this.root.__noContent=!this._notes._hasContent;this.root.__styleScoped=!0;this._endHosting();this._marshalAnnotatedNodes();this._marshalInstanceEffects();
this._marshalAnnotatedListeners();a=[];for(var c=this.root.firstChild;c;c=c.nextSibling)a.push(c),c._templateInstance=this;this._children=a;b.__hideTemplateChildren__&&this._showHideChildren(!0);this._tryReady()},_listenImpl:function(a,b,c){var d=this,e=this._rootDataHost,g=e._createEventHandler(a,b,c);e._listen(a,b,function(a){a.model=d;g(a)})},_scopeElementClassImpl:function(a,b){var c=this._rootDataHost;return c?c._scopeElementClass(a,b):b},stamp:function(a){a=a||{};if(this._parentProps){var b=
this._templatized,c;for(c in this._parentProps)void 0===a[c]&&(a[c]=b[this._parentPropPrefix+c])}return new this.ctor(a,this)},modelForElement:function(a){for(var b;a;)if(b=a._templateInstance)if(b.dataHost!=this)a=b.dataHost;else return b;else a=a.parentNode}};Polymer({is:"dom-template",extends:"template",_template:null,behaviors:[Polymer.Templatizer],ready:function(){this.templatize(this)}});Polymer._collections=new WeakMap;
Polymer.Collection=function(a){Polymer._collections.set(a,this);this.userArray=a;this.store=a.slice();this.initMap()};
Polymer.Collection.prototype={constructor:Polymer.Collection,initMap:function(){for(var a=this.omap=new WeakMap,b=this.pmap={},c=this.store,d=0;d<c.length;d++){var e=c[d];e&&"object"==typeof e?a.set(e,d):b[e]=d}},add:function(a){var b=this.store.push(a)-1;a&&"object"==typeof a?this.omap.set(a,b):this.pmap[a]=b;return"#"+b},removeKey:function(a){if(a=la(a))na(this,this.store[a]),delete this.store[a]},remove:function(a){a=this.getKey(a);this.removeKey(a);return a},getKey:function(a){a=a&&"object"==
typeof a?this.omap.get(a):this.pmap[a];if(void 0!=a)return"#"+a},getKeys:function(){return Object.keys(this.store).map(function(a){return"#"+a})},setItem:function(a,b){if(a=la(a)){var c=this.store[a];c&&na(this,c);b&&"object"==typeof b?this.omap.set(b,a):this.pmap[b]=a;this.store[a]=b}},getItem:function(a){if(a=la(a))return this.store[a]},getItems:function(){var a=[],b=this.store,c;for(c in b)a.push(b[c]);return a}};function la(a){if(a&&"#"==a[0])return a.slice(1)}
function na(a,b){b&&"object"==typeof b?a.omap.delete(b):delete a.pmap[b]}Polymer.Collection.get=function(a){return Polymer._collections.get(a)||new Polymer.Collection(a)};
Polymer.Collection.applySplices=function(a,b){a=Polymer._collections.get(a);if(a){for(var c={},d=0,e;d<b.length&&(e=b[d]);d++){e.addedKeys=[];for(var g=0;g<e.removed.length;g++){var h=a.getKey(e.removed[g]);c[h]=c[h]?null:-1}for(g=0;g<e.addedCount;g++){var k=a.userArray[e.index+g];h=a.getKey(k);h=void 0===h?a.add(k):h;c[h]=c[h]?null:1;e.addedKeys.push(h)}}b=[];e=[];for(h in c)0>c[h]&&(a.removeKey(h),b.push(h)),0<c[h]&&e.push(h);h=[{removed:b,added:e}]}else h=null;return h};
Polymer({is:"dom-repeat",extends:"template",_template:null,properties:{items:{type:Array},as:{type:String,value:"item"},indexAs:{type:String,value:"index"},sort:{type:Function,observer:"_sortChanged"},filter:{type:Function,observer:"_filterChanged"},observe:{type:String,observer:"_observeChanged"},delay:Number,renderedItemCount:{type:Number,notify:!Polymer.Settings.suppressTemplateNotifications,readOnly:!0},initialCount:{type:Number,observer:"_initializeChunking"},targetFramerate:{type:Number,value:20},
notifyDomChange:{type:Boolean},_targetFrameTime:{type:Number,computed:"_computeFrameTime(targetFramerate)"}},behaviors:[Polymer.Templatizer],observers:["_itemsChanged(items.*)"],created:function(){this._instances=[];this._pool=[];this._limit=Infinity;var a=this;this._boundRenderChunk=function(){a._renderChunk()}},detached:function(){this.__isDetached=!0;for(var a=0;a<this._instances.length;a++)this._detachInstance(a)},attached:function(){if(this.__isDetached){this.__isDetached=!1;var a=Polymer.dom(this).parentNode;
if(a.localName==this.is){var b=a;a=Polymer.dom(a).parentNode}else b=this;for(var a=Polymer.dom(a),c=0;c<this._instances.length;c++)this._attachInstance(c,a,b)}},ready:function(){this._instanceProps={__key__:!0};this._instanceProps[this.as]=!0;this._instanceProps[this.indexAs]=!0;this.ctor||this.templatize(this)},_sortChanged:function(a){var b=this._getRootDataHost();this._sortFn=a&&("function"==typeof a?a:function(){return b[a].apply(b,arguments)});this._needFullRefresh=!0;this.items&&this._debounceTemplate(this._render)},
_filterChanged:function(a){var b=this._getRootDataHost();this._filterFn=a&&("function"==typeof a?a:function(){return b[a].apply(b,arguments)});this._needFullRefresh=!0;this.items&&this._debounceTemplate(this._render)},_computeFrameTime:function(a){return Math.ceil(1E3/a)},_initializeChunking:function(){this.initialCount&&(this._chunkCount=this._limit=this.initialCount,this._lastChunkTime=performance.now())},_tryRenderChunk:function(){this.items&&this._limit<this.items.length&&this.debounce("renderChunk",
this._requestRenderChunk)},_requestRenderChunk:function(){requestAnimationFrame(this._boundRenderChunk)},_renderChunk:function(){var a=performance.now();this._chunkCount=Math.round(this._targetFrameTime/(a-this._lastChunkTime)*this._chunkCount)||1;this._limit+=this._chunkCount;this._lastChunkTime=a;this._debounceTemplate(this._render)},_observeChanged:function(){this._observePaths=this.observe&&this.observe.replace(".*",".").split(" ")},_itemsChanged:function(a){if("items"==a.path)Array.isArray(this.items)?
this.collection=Polymer.Collection.get(this.items):this.items?this._error(this._logf("dom-repeat","expected array for `items`, found",this.items)):this.collection=null,this._keySplices=[],this._indexSplices=[],this._needFullRefresh=!0,this._initializeChunking(),this._debounceTemplate(this._render);else if("items.splices"==a.path)this._keySplices=this._keySplices.concat(a.value.keySplices),this._indexSplices=this._indexSplices.concat(a.value.indexSplices),this._debounceTemplate(this._render);else{var b=
a.path.slice(6);this._forwardItemPath(b,a.value);this._checkObservedPaths(b)}},_checkObservedPaths:function(a){if(this._observePaths){a=a.substring(a.indexOf(".")+1);for(var b=this._observePaths,c=0;c<b.length;c++)if(0===a.indexOf(b[c])){this._needFullRefresh=!0;this.delay?this.debounce("render",this._render,this.delay):this._debounceTemplate(this._render);break}}},render:function(){this._needFullRefresh=!0;this._debounceTemplate(this._render);this._flushTemplates()},_render:function(){this._needFullRefresh?
(this._applyFullRefresh(),this._needFullRefresh=!1):this._keySplices.length&&(this._sortFn?this._applySplicesUserSort(this._keySplices):this._filterFn?this._applyFullRefresh():this._applySplicesArrayOrder(this._indexSplices));this._keySplices=[];this._indexSplices=[];for(var a=this._keyToInstIdx={},b=this._instances.length-1;0<=b;b--){var c=this._instances[b];c.isPlaceholder&&b<this._limit?c=this._insertInstance(b,c.__key__):!c.isPlaceholder&&b>=this._limit&&(c=this._downgradeInstance(b,c.__key__));
a[c.__key__]=b;c.isPlaceholder||c.__setProperty(this.indexAs,b,!0)}this._pool.length=0;this._setRenderedItemCount(this._instances.length);Polymer.Settings.suppressTemplateNotifications&&!this.notifyDomChange||this.fire("dom-change");this._tryRenderChunk()},_applyFullRefresh:function(){var a=this.collection;if(this._sortFn)var b=a?a.getKeys():[];else{b=[];var c=this.items;if(c)for(var d=0;d<c.length;d++)b.push(a.getKey(c[d]))}var e=this;this._filterFn&&(b=b.filter(function(b){return e._filterFn(a.getItem(b))}));
this._sortFn&&b.sort(function(b,c){return e._sortFn(a.getItem(b),a.getItem(c))});for(d=0;d<b.length;d++){var c=b[d],g=this._instances[d];g?(g.__key__=c,!g.isPlaceholder&&d<this._limit&&g.__setProperty(this.as,a.getItem(c),!0)):d<this._limit?this._insertInstance(d,c):this._insertPlaceholder(d,c)}for(b=this._instances.length-1;b>=d;b--)this._detachAndRemoveInstance(b)},_numericSort:function(a,b){return a-b},_applySplicesUserSort:function(a){for(var b=this.collection,c={},d,e=0,g;e<a.length&&(g=a[e]);e++){for(var h=
0;h<g.removed.length;h++)d=g.removed[h],c[d]=c[d]?null:-1;for(h=0;h<g.added.length;h++)d=g.added[h],c[d]=c[d]?null:1}g=[];a=[];for(d in c)-1===c[d]&&g.push(this._keyToInstIdx[d]),1===c[d]&&a.push(d);if(g.length)for(g.sort(this._numericSort),e=g.length-1;0<=e;e--)c=g[e],void 0!==c&&this._detachAndRemoveInstance(c);var k=this;if(a.length)for(this._filterFn&&(a=a.filter(function(a){return k._filterFn(b.getItem(a))})),a.sort(function(a,c){return k._sortFn(b.getItem(a),b.getItem(c))}),e=c=0;e<a.length;e++)c=
this._insertRowUserSort(c,a[e])},_insertRowUserSort:function(a,b){for(var c=this.collection,d=c.getItem(b),e=this._instances.length-1,g=-1;a<=e;){var h=a+e>>1,k=this._sortFn(c.getItem(this._instances[h].__key__),d);if(0>k)a=h+1;else if(0<k)e=h-1;else{g=h;break}}0>g&&(g=e+1);this._insertPlaceholder(g,b);return g},_applySplicesArrayOrder:function(a){for(var b=0,c;b<a.length&&(c=a[b]);b++){for(var d=0;d<c.removed.length;d++)this._detachAndRemoveInstance(c.index);for(d=0;d<c.addedKeys.length;d++)this._insertPlaceholder(c.index+
d,c.addedKeys[d])}},_detachInstance:function(a){a=this._instances[a];if(!a.isPlaceholder){for(var b=0;b<a._children.length;b++){var c=a._children[b];Polymer.dom(a.root).appendChild(c)}return a}},_attachInstance:function(a,b,c){a=this._instances[a];a.isPlaceholder||b.insertBefore(a.root,c)},_detachAndRemoveInstance:function(a){var b=this._detachInstance(a);b&&this._pool.push(b);this._instances.splice(a,1)},_insertPlaceholder:function(a,b){this._instances.splice(a,0,{isPlaceholder:!0,__key__:b})},_stampInstance:function(a,
b){var c={__key__:b};c[this.as]=this.collection.getItem(b);c[this.indexAs]=a;return this.stamp(c)},_insertInstance:function(a,b){var c=this._pool.pop();c?(c.__setProperty(this.as,this.collection.getItem(b),!0),c.__setProperty("__key__",b,!0)):c=this._stampInstance(a,b);b=(b=this._instances[a+1])&&!b.isPlaceholder?b._children[0]:this;var d=Polymer.dom(this).parentNode;d.localName==this.is&&(b==this&&(b=d),d=Polymer.dom(d).parentNode);Polymer.dom(d).insertBefore(c.root,b);return this._instances[a]=
c},_downgradeInstance:function(a,b){var c=this._detachInstance(a);c&&this._pool.push(c);c={isPlaceholder:!0,__key__:b};return this._instances[a]=c},_showHideChildren:function(a){for(var b=0;b<this._instances.length;b++)this._instances[b].isPlaceholder||this._instances[b]._showHideChildren(a)},_forwardInstanceProp:function(a,b,c){b==this.as&&(a=this._sortFn||this._filterFn?this.items.indexOf(this.collection.getItem(a.__key__)):a[this.indexAs],this.set("items."+a,c))},_forwardInstancePath:function(a,
b,c){0===b.indexOf(this.as+".")&&this._notifyPath("items."+a.__key__+"."+b.slice(this.as.length+1),c)},_forwardParentProp:function(a,b){for(var c=this._instances,d=0,e;d<c.length&&(e=c[d]);d++)e.isPlaceholder||e.__setProperty(a,b,!0)},_forwardParentPath:function(a,b){for(var c=this._instances,d=0,e;d<c.length&&(e=c[d]);d++)e.isPlaceholder||e._notifyPath(a,b,!0)},_forwardItemPath:function(a,b){if(this._keyToInstIdx){var c=a.indexOf("."),d=this._instances[this._keyToInstIdx[a.substring(0,0>c?a.length:
c)]];d&&!d.isPlaceholder&&(0<=c?(a=this.as+"."+a.substring(c+1),d._notifyPath(a,b,!0)):d.__setProperty(this.as,b,!0))}},itemForElement:function(a){return(a=this.modelForElement(a))&&a[this.as]},keyForElement:function(a){return(a=this.modelForElement(a))&&a.__key__},indexForElement:function(a){return(a=this.modelForElement(a))&&a[this.indexAs]}});
Polymer({is:"array-selector",_template:null,properties:{items:{type:Array,observer:"clearSelection"},multi:{type:Boolean,value:!1,observer:"clearSelection"},selected:{type:Object,notify:!0},selectedItem:{type:Object,notify:!0},toggle:{type:Boolean,value:!1}},clearSelection:function(){if(Array.isArray(this.selected))for(var a=0;a<this.selected.length;a++)this.unlinkPaths("selected."+a);else this.unlinkPaths("selected"),this.unlinkPaths("selectedItem");if(this.multi){if(!this.selected||this.selected.length)this.selected=
[],this._selectedColl=Polymer.Collection.get(this.selected)}else this._selectedColl=this.selected=null;this.selectedItem=null},isSelected:function(a){return this.multi?void 0!==this._selectedColl.getKey(a):this.selected==a},deselect:function(a){if(this.multi){if(this.isSelected(a)){var b=this._selectedColl.getKey(a);this.arrayDelete("selected",a);this.unlinkPaths("selected."+b)}}else this.selectedItem=this.selected=null,this.unlinkPaths("selected"),this.unlinkPaths("selectedItem")},select:function(a){var b=
Polymer.Collection.get(this.items).getKey(a);this.multi?this.isSelected(a)?this.toggle&&this.deselect(a):(this.push("selected",a),a=this._selectedColl.getKey(a),this.linkPaths("selected."+a,"items."+b)):this.toggle&&a==this.selected?this.deselect():(this.selectedItem=this.selected=a,this.linkPaths("selected","items."+b),this.linkPaths("selectedItem","items."+b))}});
Polymer({is:"dom-if",extends:"template",_template:null,properties:{"if":{type:Boolean,value:!1,observer:"_queueRender"},restamp:{type:Boolean,value:!1,observer:"_queueRender"},notifyDomChange:{type:Boolean}},behaviors:[Polymer.Templatizer],_queueRender:function(){this._debounceTemplate(this._render)},detached:function(){var a=this.parentNode;a&&a.localName==this.is&&(a=Polymer.dom(a).parentNode);a&&(a.nodeType!=Node.DOCUMENT_FRAGMENT_NODE||Polymer.Settings.hasShadow&&a instanceof ShadowRoot)||this._teardownInstance()},
attached:function(){this.if&&this.ctor&&this.async(this._ensureInstance)},render:function(){this._flushTemplates()},_render:function(){this.if?(this.ctor||this.templatize(this),this._ensureInstance(),this._showHideChildren()):this.restamp&&this._teardownInstance();!this.restamp&&this._instance&&this._showHideChildren();this.if!=this._lastIf&&(Polymer.Settings.suppressTemplateNotifications&&!this.notifyDomChange||this.fire("dom-change"),this._lastIf=this.if)},_ensureInstance:function(){var a=Polymer.dom(this).parentNode;
if(a&&a.localName==this.is){var b=a;a=Polymer.dom(a).parentNode}else b=this;if(a)if(this._instance){var c=this._instance._children;if(c&&c.length&&Polymer.dom(b).previousSibling!==c[c.length-1])for(var d=0,e;d<c.length&&(e=c[d]);d++)Polymer.dom(a).insertBefore(e,b)}else this._instance=this.stamp(),c=this._instance.root,Polymer.dom(a).insertBefore(c,b)},_teardownInstance:function(){if(this._instance){var a=this._instance._children;if(a&&a.length)for(var b=Polymer.dom(Polymer.dom(a[0]).parentNode),
c=0,d;c<a.length&&(d=a[c]);c++)b.removeChild(d);this._instance=null}},_showHideChildren:function(){var a=this.__hideTemplateChildren__||!this.if;this._instance&&this._instance._showHideChildren(a)},_forwardParentProp:function(a,b){this._instance&&this._instance.__setProperty(a,b,!0)},_forwardParentPath:function(a,b){this._instance&&this._instance._notifyPath(a,b,!0)}});
Polymer({is:"dom-bind",properties:{notifyDomChange:{type:Boolean}},extends:"template",_template:null,created:function(){var a=this;Polymer.RenderStatus.whenReady(function(){"loading"==document.readyState?document.addEventListener("DOMContentLoaded",function(){a._markImportsReady()}):a._markImportsReady()})},_ensureReady:function(){this._readied||this._readySelf()},_markImportsReady:function(){this._importsReady=!0;this._ensureReady()},_registerFeatures:function(){this._prepConstructor()},_insertChildren:function(){var a=
Polymer.dom(this).parentNode;if(a.localName==this.is){var b=a;a=Polymer.dom(a).parentNode}else b=this;Polymer.dom(a).insertBefore(this.root,b)},_removeChildren:function(){if(this._children)for(var a=0;a<this._children.length;a++)this.root.appendChild(this._children[a])},_initFeatures:function(){},_scopeElementClass:function(a,b){return this.dataHost?this.dataHost._scopeElementClass(a,b):b},_configureInstanceProperties:function(){},_prepConfigure:function(){var a={},b;for(b in this._propertyEffects)a[b]=
this[b];var c=this._setupConfigure;this._setupConfigure=function(){c.call(this,a)}},attached:function(){this._importsReady&&this.render()},detached:function(){this._removeChildren()},render:function(){this._ensureReady();this._children||(this._template=this,this._prepAnnotations(),this._prepEffects(),this._prepBehaviors(),this._prepConfigure(),this._prepBindings(),this._prepPropertyInfo(),Polymer.Base._initFeatures.call(this),this._children=Polymer.TreeApi.arrayCopyChildNodes(this.root));this._insertChildren();
Polymer.Settings.suppressTemplateNotifications&&!this.notifyDomChange||this.fire("dom-change")}});
</script>
















<script>//~~WEBPATH~~/iron-meta/iron-meta.html.js
(function(){var a={},b={},c=null;Polymer.IronMeta=function(a){if(a)for(var b in a)switch(b){case "type":case "key":case "value":this[b]=a[b]}};Polymer.IronMeta=Polymer({is:"iron-meta",properties:{type:{type:String,value:"default",observer:"_typeChanged"},key:{type:String,observer:"_keyChanged"},value:{type:Object,notify:!0,observer:"_valueChanged"},self:{type:Boolean,observer:"_selfChanged"},list:{type:Array,notify:!0}},hostAttributes:{hidden:!0},factoryImpl:function(a){if(a)for(var b in a)switch(b){case "type":case "key":case "value":this[b]=
a[b]}},created:function(){this._metaDatas=a;this._metaArrays=b},_keyChanged:function(a,b){this._resetRegistration(b)},_valueChanged:function(){this._resetRegistration(this.key)},_selfChanged:function(a){a&&(this.value=this)},_typeChanged:function(c){this._unregisterKey(this.key);a[c]||(a[c]={});this._metaData=a[c];b[c]||(b[c]=[]);this.list=b[c];this._registerKeyValue(this.key,this.value)},byKey:function(a){return this._metaData&&this._metaData[a]},_resetRegistration:function(a){this._unregisterKey(a);
this._registerKeyValue(this.key,this.value)},_unregisterKey:function(a){this._unregister(a,this._metaData,this.list)},_registerKeyValue:function(a,b){this._register(a,b,this._metaData,this.list)},_register:function(a,b,c,h){a&&c&&void 0!==b&&(c[a]=b,h.push(b))},_unregister:function(a,b,c){if(a&&b&&a in b){var d=b[a];delete b[a];this.arrayDelete(c,d)}}});Polymer.IronMeta.getIronMeta=function(){null===c&&(c=new Polymer.IronMeta);return c};Polymer.IronMetaQuery=function(a){if(a)for(var b in a)switch(b){case "type":case "key":this[b]=
a[b]}};Polymer.IronMetaQuery.prototype._setValue=function(){};Polymer.IronMetaQuery=Polymer({is:"iron-meta-query",properties:{type:{type:String,value:"default",observer:"_typeChanged"},key:{type:String,observer:"_keyChanged"},value:{type:Object,notify:!0,readOnly:!0},list:{type:Array,notify:!0}},factoryImpl:function(a){if(a)for(var b in a)switch(b){case "type":case "key":this[b]=a[b]}},created:function(){this._metaDatas=a;this._metaArrays=b},_keyChanged:function(a){this._setValue(this._metaData&&
this._metaData[a])},_typeChanged:function(c){this._metaData=a[c];this.list=b[c];this.key&&this._keyChanged(this.key)},byKey:function(a){return this._metaData&&this._metaData[a]}})})();
</script>





<style>
  /* IE 10 support for HTML5 hidden attr */
  [hidden] {
    display: none !important;
  }
</style>

<style is="custom-style">
  :root {

    --layout: {
      display: -ms-flexbox;
      display: -webkit-flex;
      display: flex;
    };

    --layout-inline: {
      display: -ms-inline-flexbox;
      display: -webkit-inline-flex;
      display: inline-flex;
    };

    --layout-horizontal: {
      @apply(--layout);

      -ms-flex-direction: row;
      -webkit-flex-direction: row;
      flex-direction: row;
    };

    --layout-horizontal-reverse: {
      @apply(--layout);

      -ms-flex-direction: row-reverse;
      -webkit-flex-direction: row-reverse;
      flex-direction: row-reverse;
    };

    --layout-vertical: {
      @apply(--layout);

      -ms-flex-direction: column;
      -webkit-flex-direction: column;
      flex-direction: column;
    };

    --layout-vertical-reverse: {
      @apply(--layout);

      -ms-flex-direction: column-reverse;
      -webkit-flex-direction: column-reverse;
      flex-direction: column-reverse;
    };

    --layout-wrap: {
      -ms-flex-wrap: wrap;
      -webkit-flex-wrap: wrap;
      flex-wrap: wrap;
    };

    --layout-wrap-reverse: {
      -ms-flex-wrap: wrap-reverse;
      -webkit-flex-wrap: wrap-reverse;
      flex-wrap: wrap-reverse;
    };

    --layout-flex-auto: {
      -ms-flex: 1 1 auto;
      -webkit-flex: 1 1 auto;
      flex: 1 1 auto;
    };

    --layout-flex-none: {
      -ms-flex: none;
      -webkit-flex: none;
      flex: none;
    };

    --layout-flex: {
      -ms-flex: 1 1 0.000000001px;
      -webkit-flex: 1;
      flex: 1;
      -webkit-flex-basis: 0.000000001px;
      flex-basis: 0.000000001px;
    };

    --layout-flex-2: {
      -ms-flex: 2;
      -webkit-flex: 2;
      flex: 2;
    };

    --layout-flex-3: {
      -ms-flex: 3;
      -webkit-flex: 3;
      flex: 3;
    };

    --layout-flex-4: {
      -ms-flex: 4;
      -webkit-flex: 4;
      flex: 4;
    };

    --layout-flex-5: {
      -ms-flex: 5;
      -webkit-flex: 5;
      flex: 5;
    };

    --layout-flex-6: {
      -ms-flex: 6;
      -webkit-flex: 6;
      flex: 6;
    };

    --layout-flex-7: {
      -ms-flex: 7;
      -webkit-flex: 7;
      flex: 7;
    };

    --layout-flex-8: {
      -ms-flex: 8;
      -webkit-flex: 8;
      flex: 8;
    };

    --layout-flex-9: {
      -ms-flex: 9;
      -webkit-flex: 9;
      flex: 9;
    };

    --layout-flex-10: {
      -ms-flex: 10;
      -webkit-flex: 10;
      flex: 10;
    };

    --layout-flex-11: {
      -ms-flex: 11;
      -webkit-flex: 11;
      flex: 11;
    };

    --layout-flex-12: {
      -ms-flex: 12;
      -webkit-flex: 12;
      flex: 12;
    };

    /* alignment in cross axis */

    --layout-start: {
      -ms-flex-align: start;
      -webkit-align-items: flex-start;
      align-items: flex-start;
    };

    --layout-center: {
      -ms-flex-align: center;
      -webkit-align-items: center;
      align-items: center;
    };

    --layout-end: {
      -ms-flex-align: end;
      -webkit-align-items: flex-end;
      align-items: flex-end;
    };

    /* alignment in main axis */

    --layout-start-justified: {
      -ms-flex-pack: start;
      -webkit-justify-content: flex-start;
      justify-content: flex-start;
    };

    --layout-center-justified: {
      -ms-flex-pack: center;
      -webkit-justify-content: center;
      justify-content: center;
    };

    --layout-end-justified: {
      -ms-flex-pack: end;
      -webkit-justify-content: flex-end;
      justify-content: flex-end;
    };

    --layout-around-justified: {
      -ms-flex-pack: distribute;
      -webkit-justify-content: space-around;
      justify-content: space-around;
    };

    --layout-justified: {
      -ms-flex-pack: justify;
      -webkit-justify-content: space-between;
      justify-content: space-between;
    };

    --layout-center-center: {
      @apply(--layout-center);
      @apply(--layout-center-justified);
    };

    /* self alignment */

    --layout-self-start: {
      -ms-align-self: flex-start;
      -webkit-align-self: flex-start;
      align-self: flex-start;
    };

    --layout-self-center: {
      -ms-align-self: center;
      -webkit-align-self: center;
      align-self: center;
    };

    --layout-self-end: {
      -ms-align-self: flex-end;
      -webkit-align-self: flex-end;
      align-self: flex-end;
    };

    --layout-self-stretch: {
      -ms-align-self: stretch;
      -webkit-align-self: stretch;
      align-self: stretch;
    };

    /*******************************
              Other Layout
    *******************************/

    --layout-block: {
      display: block;
    };

    --layout-invisible: {
      visibility: hidden !important;
    };

    --layout-relative: {
      position: relative;
    };

    --layout-fit: {
      position: absolute;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
    };

    --layout-scroll: {
      -webkit-overflow-scrolling: touch;
      overflow: auto;
    };

    --layout-fullbleed: {
      margin: 0;
      height: 100vh;
    };

    /* fixed position */

    --layout-fixed-top: {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
    };

    --layout-fixed-right: {
      position: fixed;
      top: 0;
      right: 0;
      bottom: 0;
    };

    --layout-fixed-bottom: {
      position: fixed;
      right: 0;
      bottom: 0;
      left: 0;
    };

    --layout-fixed-left: {
      position: fixed;
      top: 0;
      bottom: 0;
      left: 0;
    };

  }

</style>




<dom-module id="iron-icon">
  <template>
    <style>
      :host {
        @apply(--layout-inline);
        @apply(--layout-center-center);
        position: relative;

        vertical-align: middle;

        fill: var(--iron-icon-fill-color, currentcolor);
        stroke: var(--iron-icon-stroke-color, none);

        width: var(--iron-icon-width, 24px);
        height: var(--iron-icon-height, 24px);
        @apply(--iron-icon);
      }
    </style>
  </template>

  <script>//~~WEBPATH~~/iron-icon/iron-icon.html.js
Polymer({is:"iron-icon",properties:{icon:{type:String},theme:{type:String},src:{type:String},_meta:{value:Polymer.Base.create("iron-meta",{type:"iconset"})}},observers:["_updateIcon(_meta, isAttached)","_updateIcon(theme, isAttached)","_srcChanged(src, isAttached)","_iconChanged(icon, isAttached)"],_DEFAULT_ICONSET:"icons",_iconChanged:function(a){a=(a||"").split(":");this._iconName=a.pop();this._iconsetName=a.pop()||this._DEFAULT_ICONSET;this._updateIcon()},_srcChanged:function(){this._updateIcon()},
_usesIconset:function(){return this.icon||!this.src},_updateIcon:function(){this._usesIconset()?(this._img&&this._img.parentNode&&Polymer.dom(this.root).removeChild(this._img),""===this._iconName?this._iconset&&this._iconset.removeIcon(this):this._iconsetName&&this._meta&&((this._iconset=this._meta.byKey(this._iconsetName))?(this._iconset.applyIcon(this,this._iconName,this.theme),this.unlisten(window,"iron-iconset-added","_updateIcon")):this.listen(window,"iron-iconset-added","_updateIcon"))):(this._iconset&&
this._iconset.removeIcon(this),this._img||(this._img=document.createElement("img"),this._img.style.width="100%",this._img.style.height="100%",this._img.draggable=!1),this._img.src=this.src,Polymer.dom(this.root).appendChild(this._img))}});
</script>

</dom-module>





<script>//~~WEBPATH~~/iron-a11y-keys-behavior/iron-a11y-keys-behavior.html.js
(function(){function a(a,b){var c="";if(a)if(a=a.toLowerCase()," "===a||p.test(a))c="space";else if(r.test(a))c="esc";else if(1==a.length){if(!b||k.test(a))c=a}else c=m.test(a)?a.replace("arrow",""):"multiply"==a?"*":a;return c}function b(b,c){var d=b.hasModifiers;if(c.key)d=a(c.key,d);else if(c.detail&&c.detail.key)d=a(c.detail.key,d);else{var d=c.keyIdentifier,h="";d&&(d in e?h=e[d]:l.test(d)?(d=parseInt(d.replace("U+","0x"),16),h=String.fromCharCode(d).toLowerCase()):h=d.toLowerCase());(d=h)||
(d=c.keyCode,h="",Number(d)&&(h=65<=d&&90>=d?String.fromCharCode(32+d):112<=d&&123>=d?"f"+(d-112):48<=d&&57>=d?String(d-48):96<=d&&105>=d?String(d-96):g[d]),d=h);d=d||""}return d===b.key&&(!b.hasModifiers||!!c.shiftKey===!!b.shiftKey&&!!c.ctrlKey===!!b.ctrlKey&&!!c.altKey===!!b.altKey&&!!c.metaKey===!!b.metaKey)}function c(a){return 1===a.length?{combo:a,key:a,event:"keydown"}:a.split("+").reduce(function(a,b){var c=b.split(":");b=c[0];c=c[1];b in h?(a[h[b]]=!0,a.hasModifiers=!0):(a.key=b,a.event=
c||"keydown");return a},{combo:a.split(":").shift()})}function d(a){return a.trim().split(" ").map(function(a){return c(a)})}var e={"U+0008":"backspace","U+0009":"tab","U+001B":"esc","U+0020":"space","U+007F":"del"},g={8:"backspace",9:"tab",13:"enter",27:"esc",33:"pageup",34:"pagedown",35:"end",36:"home",32:"space",37:"left",38:"up",39:"right",40:"down",46:"del",106:"*"},h={shift:"shiftKey",ctrl:"ctrlKey",alt:"altKey",meta:"metaKey"},k=/[a-z0-9*]/,l=/U\+/,m=/^arrow/,p=/^space(bar)?/,r=/^escape$/;
Polymer.IronA11yKeysBehavior={properties:{keyEventTarget:{type:Object,value:function(){return this}},stopKeyboardEventPropagation:{type:Boolean,value:!1},_boundKeyHandlers:{type:Array,value:function(){return[]}},_imperativeKeyBindings:{type:Object,value:function(){return{}}}},observers:["_resetKeyEventListeners(keyEventTarget, _boundKeyHandlers)"],keyBindings:{},registered:function(){this._prepKeyBindings()},attached:function(){this._listenKeyEventListeners()},detached:function(){this._unlistenKeyEventListeners()},
addOwnKeyBinding:function(a,b){this._imperativeKeyBindings[a]=b;this._prepKeyBindings();this._resetKeyEventListeners()},removeOwnKeyBindings:function(){this._imperativeKeyBindings={};this._prepKeyBindings();this._resetKeyEventListeners()},keyboardEventMatchesKeys:function(a,c){c=d(c);for(var e=0;e<c.length;++e)if(b(c[e],a))return!0;return!1},_collectKeyBindings:function(){var a=this.behaviors.map(function(a){return a.keyBindings});-1===a.indexOf(this.keyBindings)&&a.push(this.keyBindings);return a},
_prepKeyBindings:function(){this._keyBindings={};this._collectKeyBindings().forEach(function(a){for(var b in a)this._addKeyBinding(b,a[b])},this);for(var a in this._imperativeKeyBindings)this._addKeyBinding(a,this._imperativeKeyBindings[a]);for(var b in this._keyBindings)this._keyBindings[b].sort(function(a,b){a=a[0].hasModifiers;return a===b[0].hasModifiers?0:a?-1:1})},_addKeyBinding:function(a,b){d(a).forEach(function(a){this._keyBindings[a.event]=this._keyBindings[a.event]||[];this._keyBindings[a.event].push([a,
b])},this)},_resetKeyEventListeners:function(){this._unlistenKeyEventListeners();this.isAttached&&this._listenKeyEventListeners()},_listenKeyEventListeners:function(){this.keyEventTarget&&Object.keys(this._keyBindings).forEach(function(a){var b=this._onKeyBindingEvent.bind(this,this._keyBindings[a]);this._boundKeyHandlers.push([this.keyEventTarget,a,b]);this.keyEventTarget.addEventListener(a,b)},this)},_unlistenKeyEventListeners:function(){for(var a,b,c;this._boundKeyHandlers.length;)a=this._boundKeyHandlers.pop(),
b=a[0],c=a[1],a=a[2],b.removeEventListener(c,a)},_onKeyBindingEvent:function(a,c){this.stopKeyboardEventPropagation&&c.stopPropagation();if(!c.defaultPrevented)for(var d=0;d<a.length;d++){var e=a[d][0],g=a[d][1];if(b(e,c)&&(this._triggerKeyHandler(e,g,c),c.defaultPrevented))break}},_triggerKeyHandler:function(a,b,c){var d=Object.create(a);d.keyboardEvent=c;a=new CustomEvent(a.event,{detail:d,cancelable:!0});this[b].call(this,a);a.defaultPrevented&&c.preventDefault()}}})();
</script>



<script>//~~WEBPATH~~/iron-behaviors/iron-control-state.html.js
Polymer.IronControlState={properties:{focused:{type:Boolean,value:!1,notify:!0,readOnly:!0,reflectToAttribute:!0},disabled:{type:Boolean,value:!1,notify:!0,observer:"_disabledChanged",reflectToAttribute:!0},_oldTabIndex:{type:Number},_boundFocusBlurHandler:{type:Function,value:function(){return this._focusBlurHandler.bind(this)}}},observers:["_changedControlState(focused, disabled)"],ready:function(){this.addEventListener("focus",this._boundFocusBlurHandler,!0);this.addEventListener("blur",this._boundFocusBlurHandler,
!0)},_focusBlurHandler:function(a){if(a.target===this)this._setFocused("focus"===a.type);else if(!this.shadowRoot){var b=Polymer.dom(a).localTarget;this.isLightDescendant(b)||this.fire(a.type,{sourceEvent:a},{node:this,bubbles:a.bubbles,cancelable:a.cancelable})}},_disabledChanged:function(a){this.setAttribute("aria-disabled",a?"true":"false");this.style.pointerEvents=a?"none":"";a?(this._oldTabIndex=this.tabIndex,this._setFocused(!1),this.tabIndex=-1,this.blur()):void 0!==this._oldTabIndex&&(this.tabIndex=
this._oldTabIndex)},_changedControlState:function(){this._controlStateChanged&&this._controlStateChanged()}};
</script>


<script>//~~WEBPATH~~/iron-behaviors/iron-button-state.html.js
Polymer.IronButtonStateImpl={properties:{pressed:{type:Boolean,readOnly:!0,value:!1,reflectToAttribute:!0,observer:"_pressedChanged"},toggles:{type:Boolean,value:!1,reflectToAttribute:!0},active:{type:Boolean,value:!1,notify:!0,reflectToAttribute:!0},pointerDown:{type:Boolean,readOnly:!0,value:!1},receivedFocusFromKeyboard:{type:Boolean,readOnly:!0},ariaActiveAttribute:{type:String,value:"aria-pressed",observer:"_ariaActiveAttributeChanged"}},listeners:{down:"_downHandler",up:"_upHandler",tap:"_tapHandler"},
observers:["_detectKeyboardFocus(focused)","_activeChanged(active, ariaActiveAttribute)"],keyBindings:{"enter:keydown":"_asyncClick","space:keydown":"_spaceKeyDownHandler","space:keyup":"_spaceKeyUpHandler"},_mouseEventRe:/^mouse/,_tapHandler:function(){this.toggles?this._userActivate(!this.active):this.active=!1},_detectKeyboardFocus:function(a){this._setReceivedFocusFromKeyboard(!this.pointerDown&&a)},_userActivate:function(a){this.active!==a&&(this.active=a,this.fire("change"))},_downHandler:function(){this._setPointerDown(!0);
this._setPressed(!0);this._setReceivedFocusFromKeyboard(!1)},_upHandler:function(){this._setPointerDown(!1);this._setPressed(!1)},_spaceKeyDownHandler:function(a){a=a.detail.keyboardEvent;var b=Polymer.dom(a).localTarget;this.isLightDescendant(b)||(a.preventDefault(),a.stopImmediatePropagation(),this._setPressed(!0))},_spaceKeyUpHandler:function(a){a=Polymer.dom(a.detail.keyboardEvent).localTarget;this.isLightDescendant(a)||(this.pressed&&this._asyncClick(),this._setPressed(!1))},_asyncClick:function(){this.async(function(){this.click()},
1)},_pressedChanged:function(){this._changedButtonState()},_ariaActiveAttributeChanged:function(a,b){b&&b!=a&&this.hasAttribute(b)&&this.removeAttribute(b)},_activeChanged:function(a){this.toggles?this.setAttribute(this.ariaActiveAttribute,a?"true":"false"):this.removeAttribute(this.ariaActiveAttribute);this._changedButtonState()},_controlStateChanged:function(){this.disabled?this._setPressed(!1):this._changedButtonState()},_changedButtonState:function(){this._buttonStateChanged&&this._buttonStateChanged()}};
Polymer.IronButtonState=[Polymer.IronA11yKeysBehavior,Polymer.IronButtonStateImpl];
</script>







<dom-module id="paper-ripple">

  <template>
    <style>
      :host {
        display: block;
        position: absolute;
        border-radius: inherit;
        overflow: hidden;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;

        /* See PolymerElements/paper-behaviors/issues/34. On non-Chrome browsers,
         * creating a node (with a position:absolute) in the middle of an event
         * handler "interrupts" that event handler (which happens when the
         * ripple is created on demand) */
        pointer-events: none;
      }

      :host([animating]) {
        /* This resolves a rendering issue in Chrome (as of 40) where the
           ripple is not properly clipped by its parent (which may have
           rounded corners). See: http://jsbin.com/temexa/4

           Note: We only apply this style conditionally. Otherwise, the browser
           will create a new compositing layer for every ripple element on the
           page, and that would be bad. */
        -webkit-transform: translate(0, 0);
        transform: translate3d(0, 0, 0);
      }

      #background,
      #waves,
      .wave-container,
      .wave {
        pointer-events: none;
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
      }

      #background,
      .wave {
        opacity: 0;
      }

      #waves,
      .wave {
        overflow: hidden;
      }

      .wave-container,
      .wave {
        border-radius: 50%;
      }

      :host(.circle) #background,
      :host(.circle) #waves {
        border-radius: 50%;
      }

      :host(.circle) .wave-container {
        overflow: hidden;
      }
    </style>

    <div id="background"></div>
    <div id="waves"></div>
  </template>
</dom-module>
<script>//~~WEBPATH~~/paper-ripple/paper-ripple.html.js
(function(){function a(a){this.element=a;this.width=this.boundingRect.width;this.height=this.boundingRect.height;this.size=Math.max(this.width,this.height)}function b(a){this.element=a;this.color=window.getComputedStyle(a).color;this.wave=document.createElement("div");this.waveContainer=document.createElement("div");this.wave.style.backgroundColor=this.color;this.wave.classList.add("wave");this.waveContainer.classList.add("wave-container");Polymer.dom(this.waveContainer).appendChild(this.wave);this.resetInteractionState()}
var c={distance:function(a,b,c,h){a-=c;b-=h;return Math.sqrt(a*a+b*b)},now:window.performance&&window.performance.now?window.performance.now.bind(window.performance):Date.now};a.prototype={get boundingRect(){return this.element.getBoundingClientRect()},furthestCornerDistanceFrom:function(a,b){var d=c.distance(a,b,0,0),e=c.distance(a,b,this.width,0),k=c.distance(a,b,0,this.height);a=c.distance(a,b,this.width,this.height);return Math.max(d,e,k,a)}};b.MAX_RADIUS=300;b.prototype={get recenters(){return this.element.recenters},
get center(){return this.element.center},get mouseDownElapsed(){if(!this.mouseDownStart)return 0;var a=c.now()-this.mouseDownStart;this.mouseUpStart&&(a-=this.mouseUpElapsed);return a},get mouseUpElapsed(){return this.mouseUpStart?c.now()-this.mouseUpStart:0},get mouseDownElapsedSeconds(){return this.mouseDownElapsed/1E3},get mouseUpElapsedSeconds(){return this.mouseUpElapsed/1E3},get mouseInteractionSeconds(){return this.mouseDownElapsedSeconds+this.mouseUpElapsedSeconds},get initialOpacity(){return this.element.initialOpacity},
get opacityDecayVelocity(){return this.element.opacityDecayVelocity},get radius(){var a=1.1*Math.min(Math.sqrt(this.containerMetrics.width*this.containerMetrics.width+this.containerMetrics.height*this.containerMetrics.height),b.MAX_RADIUS)+5;return Math.abs(a*(1-Math.pow(80,-(this.mouseInteractionSeconds/(1.1-a/b.MAX_RADIUS*.2)))))},get opacity(){return this.mouseUpStart?Math.max(0,this.initialOpacity-this.mouseUpElapsedSeconds*this.opacityDecayVelocity):this.initialOpacity},get outerOpacity(){return Math.max(0,
Math.min(.3*this.mouseUpElapsedSeconds,this.opacity))},get isOpacityFullyDecayed(){return.01>this.opacity&&this.radius>=Math.min(this.maxRadius,b.MAX_RADIUS)},get isRestingAtMaxRadius(){return this.opacity>=this.initialOpacity&&this.radius>=Math.min(this.maxRadius,b.MAX_RADIUS)},get isAnimationComplete(){return this.mouseUpStart?this.isOpacityFullyDecayed:this.isRestingAtMaxRadius},get translationFraction(){return Math.min(1,this.radius/this.containerMetrics.size*2/Math.sqrt(2))},get xNow(){return this.xEnd?
this.xStart+this.translationFraction*(this.xEnd-this.xStart):this.xStart},get yNow(){return this.yEnd?this.yStart+this.translationFraction*(this.yEnd-this.yStart):this.yStart},get isMouseDown(){return this.mouseDownStart&&!this.mouseUpStart},resetInteractionState:function(){this.slideDistance=this.yEnd=this.xEnd=this.yStart=this.xStart=this.mouseUpStart=this.mouseDownStart=this.maxRadius=0;this.containerMetrics=new a(this.element)},draw:function(){this.wave.style.opacity=this.opacity;var a=this.radius/
(this.containerMetrics.size/2);var b=this.xNow-this.containerMetrics.width/2;var c=this.yNow-this.containerMetrics.height/2;this.waveContainer.style.webkitTransform="translate("+b+"px, "+c+"px)";this.waveContainer.style.transform="translate3d("+b+"px, "+c+"px, 0)";this.wave.style.webkitTransform="scale("+a+","+a+")";this.wave.style.transform="scale3d("+a+","+a+",1)"},downAction:function(a){var b=this.containerMetrics.width/2,d=this.containerMetrics.height/2;this.resetInteractionState();this.mouseDownStart=
c.now();this.center?(this.xStart=b,this.yStart=d,this.slideDistance=c.distance(this.xStart,this.yStart,this.xEnd,this.yEnd)):(this.xStart=a?a.detail.x-this.containerMetrics.boundingRect.left:this.containerMetrics.width/2,this.yStart=a?a.detail.y-this.containerMetrics.boundingRect.top:this.containerMetrics.height/2);this.recenters&&(this.xEnd=b,this.yEnd=d,this.slideDistance=c.distance(this.xStart,this.yStart,this.xEnd,this.yEnd));this.maxRadius=this.containerMetrics.furthestCornerDistanceFrom(this.xStart,
this.yStart);this.waveContainer.style.top=(this.containerMetrics.height-this.containerMetrics.size)/2+"px";this.waveContainer.style.left=(this.containerMetrics.width-this.containerMetrics.size)/2+"px";this.waveContainer.style.width=this.containerMetrics.size+"px";this.waveContainer.style.height=this.containerMetrics.size+"px"},upAction:function(){this.isMouseDown&&(this.mouseUpStart=c.now())},remove:function(){Polymer.dom(this.waveContainer.parentNode).removeChild(this.waveContainer)}};Polymer({is:"paper-ripple",
behaviors:[Polymer.IronA11yKeysBehavior],properties:{initialOpacity:{type:Number,value:.25},opacityDecayVelocity:{type:Number,value:.8},recenters:{type:Boolean,value:!1},center:{type:Boolean,value:!1},ripples:{type:Array,value:function(){return[]}},animating:{type:Boolean,readOnly:!0,reflectToAttribute:!0,value:!1},holdDown:{type:Boolean,value:!1,observer:"_holdDownChanged"},noink:{type:Boolean,value:!1},_animating:{type:Boolean},_boundAnimate:{type:Function,value:function(){return this.animate.bind(this)}}},
get target(){return this.keyEventTarget},keyBindings:{"enter:keydown":"_onEnterKeydown","space:keydown":"_onSpaceKeydown","space:keyup":"_onSpaceKeyup"},attached:function(){var a=this.keyEventTarget=11==this.parentNode.nodeType?Polymer.dom(this).getOwnerRoot().host:this.parentNode;this.listen(a,"up","uiUpAction");this.listen(a,"down","uiDownAction")},detached:function(){this.unlisten(this.keyEventTarget,"up","uiUpAction");this.unlisten(this.keyEventTarget,"down","uiDownAction");this.keyEventTarget=
null},get shouldKeepAnimating(){for(var a=0;a<this.ripples.length;++a)if(!this.ripples[a].isAnimationComplete)return!0;return!1},simulatedRipple:function(){this.downAction(null);this.async(function(){this.upAction()},1)},uiDownAction:function(a){this.noink||this.downAction(a)},downAction:function(a){this.holdDown&&0<this.ripples.length||(this.addRipple().downAction(a),this._animating||(this._animating=!0,this.animate()))},uiUpAction:function(a){this.noink||this.upAction(a)},upAction:function(a){this.holdDown||
(this.ripples.forEach(function(b){b.upAction(a)}),this._animating=!0,this.animate())},onAnimationComplete:function(){this._animating=!1;this.$.background.style.backgroundColor=null;this.fire("transitionend")},addRipple:function(){var a=new b(this);Polymer.dom(this.$.waves).appendChild(a.waveContainer);this.$.background.style.backgroundColor=a.color;this.ripples.push(a);this._setAnimating(!0);return a},removeRipple:function(a){var b=this.ripples.indexOf(a);0>b||(this.ripples.splice(b,1),a.remove(),
this.ripples.length||this._setAnimating(!1))},animate:function(){if(this._animating){var a;for(a=0;a<this.ripples.length;++a){var b=this.ripples[a];b.draw();this.$.background.style.opacity=b.outerOpacity;b.isOpacityFullyDecayed&&!b.isRestingAtMaxRadius&&this.removeRipple(b)}if(this.shouldKeepAnimating||0!==this.ripples.length)window.requestAnimationFrame(this._boundAnimate);else this.onAnimationComplete()}},_onEnterKeydown:function(){this.uiDownAction();this.async(this.uiUpAction,1)},_onSpaceKeydown:function(){this.uiDownAction()},
_onSpaceKeyup:function(){this.uiUpAction()},_holdDownChanged:function(a,b){void 0!==b&&(a?this.downAction():this.upAction())}})})();
</script>


<script>//~~WEBPATH~~/paper-behaviors/paper-ripple-behavior.html.js
Polymer.PaperRippleBehavior={properties:{noink:{type:Boolean,observer:"_noinkChanged"},_rippleContainer:{type:Object}},_buttonStateChanged:function(){this.focused&&this.ensureRipple()},_downHandler:function(a){Polymer.IronButtonStateImpl._downHandler.call(this,a);this.pressed&&this.ensureRipple(a)},ensureRipple:function(a){if(!this.hasRipple()){this._ripple=this._createRipple();this._ripple.noink=this.noink;var b=this._rippleContainer||this.root;b&&Polymer.dom(b).appendChild(this._ripple);if(a){var b=
Polymer.dom(this._rippleContainer||this),c=Polymer.dom(a).rootTarget;b.deepContains(c)&&this._ripple.uiDownAction(a)}}},getRipple:function(){this.ensureRipple();return this._ripple},hasRipple:function(){return!!this._ripple},_createRipple:function(){return document.createElement("paper-ripple")},_noinkChanged:function(a){this.hasRipple()&&(this._ripple.noink=a)}};
</script>


<script>//~~WEBPATH~~/paper-behaviors/paper-inky-focus-behavior.html.js
Polymer.PaperInkyFocusBehaviorImpl={observers:["_focusedChanged(receivedFocusFromKeyboard)"],_focusedChanged:function(a){a&&this.ensureRipple();this.hasRipple()&&(this._ripple.holdDown=a)},_createRipple:function(){var a=Polymer.PaperRippleBehavior._createRipple();a.id="ink";a.setAttribute("center","");a.classList.add("circle");return a}};Polymer.PaperInkyFocusBehavior=[Polymer.IronButtonState,Polymer.IronControlState,Polymer.PaperRippleBehavior,Polymer.PaperInkyFocusBehaviorImpl];
</script>




<style is="custom-style">

  :root {

    /* Material Design color palette for Google products */

    --google-red-100: #f4c7c3;
    --google-red-300: #e67c73;
    --google-red-500: #db4437;
    --google-red-700: #c53929;

    --google-blue-100: #c6dafc;
    --google-blue-300: #7baaf7;
    --google-blue-500: #4285f4;
    --google-blue-700: #3367d6;

    --google-green-100: #b7e1cd;
    --google-green-300: #57bb8a;
    --google-green-500: #0f9d58;
    --google-green-700: #0b8043;

    --google-yellow-100: #fce8b2;
    --google-yellow-300: #f7cb4d;
    --google-yellow-500: #f4b400;
    --google-yellow-700: #f09300;

    --google-grey-100: #f5f5f5;
    --google-grey-300: #e0e0e0;
    --google-grey-500: #9e9e9e;
    --google-grey-700: #616161;
    
    /* Material Design color palette from online spec document */

    --paper-red-50: #ffebee;
    --paper-red-100: #ffcdd2;
    --paper-red-200: #ef9a9a;
    --paper-red-300: #e57373;
    --paper-red-400: #ef5350;
    --paper-red-500: #f44336;
    --paper-red-600: #e53935;
    --paper-red-700: #d32f2f;
    --paper-red-800: #c62828;
    --paper-red-900: #b71c1c;
    --paper-red-a100: #ff8a80;
    --paper-red-a200: #ff5252;
    --paper-red-a400: #ff1744;
    --paper-red-a700: #d50000;
 
    --paper-pink-50: #fce4ec;
    --paper-pink-100: #f8bbd0;
    --paper-pink-200: #f48fb1;
    --paper-pink-300: #f06292;
    --paper-pink-400: #ec407a;
    --paper-pink-500: #e91e63;
    --paper-pink-600: #d81b60;
    --paper-pink-700: #c2185b;
    --paper-pink-800: #ad1457;
    --paper-pink-900: #880e4f;
    --paper-pink-a100: #ff80ab;
    --paper-pink-a200: #ff4081;
    --paper-pink-a400: #f50057;
    --paper-pink-a700: #c51162;
 
    --paper-purple-50: #f3e5f5;
    --paper-purple-100: #e1bee7;
    --paper-purple-200: #ce93d8;
    --paper-purple-300: #ba68c8;
    --paper-purple-400: #ab47bc;
    --paper-purple-500: #9c27b0;
    --paper-purple-600: #8e24aa;
    --paper-purple-700: #7b1fa2;
    --paper-purple-800: #6a1b9a;
    --paper-purple-900: #4a148c;
    --paper-purple-a100: #ea80fc;
    --paper-purple-a200: #e040fb;
    --paper-purple-a400: #d500f9;
    --paper-purple-a700: #aa00ff;
 
    --paper-deep-purple-50: #ede7f6;
    --paper-deep-purple-100: #d1c4e9;
    --paper-deep-purple-200: #b39ddb;
    --paper-deep-purple-300: #9575cd;
    --paper-deep-purple-400: #7e57c2;
    --paper-deep-purple-500: #673ab7;
    --paper-deep-purple-600: #5e35b1;
    --paper-deep-purple-700: #512da8;
    --paper-deep-purple-800: #4527a0;
    --paper-deep-purple-900: #311b92;
    --paper-deep-purple-a100: #b388ff;
    --paper-deep-purple-a200: #7c4dff;
    --paper-deep-purple-a400: #651fff;
    --paper-deep-purple-a700: #6200ea;
 
    --paper-indigo-50: #e8eaf6;
    --paper-indigo-100: #c5cae9;
    --paper-indigo-200: #9fa8da;
    --paper-indigo-300: #7986cb;
    --paper-indigo-400: #5c6bc0;
    --paper-indigo-500: #3f51b5;
    --paper-indigo-600: #3949ab;
    --paper-indigo-700: #303f9f;
    --paper-indigo-800: #283593;
    --paper-indigo-900: #1a237e;
    --paper-indigo-a100: #8c9eff;
    --paper-indigo-a200: #536dfe;
    --paper-indigo-a400: #3d5afe;
    --paper-indigo-a700: #304ffe;
 
    --paper-blue-50: #e3f2fd;
    --paper-blue-100: #bbdefb;
    --paper-blue-200: #90caf9;
    --paper-blue-300: #64b5f6;
    --paper-blue-400: #42a5f5;
    --paper-blue-500: #2196f3;
    --paper-blue-600: #1e88e5;
    --paper-blue-700: #1976d2;
    --paper-blue-800: #1565c0;
    --paper-blue-900: #0d47a1;
    --paper-blue-a100: #82b1ff;
    --paper-blue-a200: #448aff;
    --paper-blue-a400: #2979ff;
    --paper-blue-a700: #2962ff;
 
    --paper-light-blue-50: #e1f5fe;
    --paper-light-blue-100: #b3e5fc;
    --paper-light-blue-200: #81d4fa;
    --paper-light-blue-300: #4fc3f7;
    --paper-light-blue-400: #29b6f6;
    --paper-light-blue-500: #03a9f4;
    --paper-light-blue-600: #039be5;
    --paper-light-blue-700: #0288d1;
    --paper-light-blue-800: #0277bd;
    --paper-light-blue-900: #01579b;
    --paper-light-blue-a100: #80d8ff;
    --paper-light-blue-a200: #40c4ff;
    --paper-light-blue-a400: #00b0ff;
    --paper-light-blue-a700: #0091ea;
 
    --paper-cyan-50: #e0f7fa;
    --paper-cyan-100: #b2ebf2;
    --paper-cyan-200: #80deea;
    --paper-cyan-300: #4dd0e1;
    --paper-cyan-400: #26c6da;
    --paper-cyan-500: #00bcd4;
    --paper-cyan-600: #00acc1;
    --paper-cyan-700: #0097a7;
    --paper-cyan-800: #00838f;
    --paper-cyan-900: #006064;
    --paper-cyan-a100: #84ffff;
    --paper-cyan-a200: #18ffff;
    --paper-cyan-a400: #00e5ff;
    --paper-cyan-a700: #00b8d4;
 
    --paper-teal-50: #e0f2f1;
    --paper-teal-100: #b2dfdb;
    --paper-teal-200: #80cbc4;
    --paper-teal-300: #4db6ac;
    --paper-teal-400: #26a69a;
    --paper-teal-500: #009688;
    --paper-teal-600: #00897b;
    --paper-teal-700: #00796b;
    --paper-teal-800: #00695c;
    --paper-teal-900: #004d40;
    --paper-teal-a100: #a7ffeb;
    --paper-teal-a200: #64ffda;
    --paper-teal-a400: #1de9b6;
    --paper-teal-a700: #00bfa5;
 
    --paper-green-50: #e8f5e9;
    --paper-green-100: #c8e6c9;
    --paper-green-200: #a5d6a7;
    --paper-green-300: #81c784;
    --paper-green-400: #66bb6a;
    --paper-green-500: #4caf50;
    --paper-green-600: #43a047;
    --paper-green-700: #388e3c;
    --paper-green-800: #2e7d32;
    --paper-green-900: #1b5e20;
    --paper-green-a100: #b9f6ca;
    --paper-green-a200: #69f0ae;
    --paper-green-a400: #00e676;
    --paper-green-a700: #00c853;
 
    --paper-light-green-50: #f1f8e9;
    --paper-light-green-100: #dcedc8;
    --paper-light-green-200: #c5e1a5;
    --paper-light-green-300: #aed581;
    --paper-light-green-400: #9ccc65;
    --paper-light-green-500: #8bc34a;
    --paper-light-green-600: #7cb342;
    --paper-light-green-700: #689f38;
    --paper-light-green-800: #558b2f;
    --paper-light-green-900: #33691e;
    --paper-light-green-a100: #ccff90;
    --paper-light-green-a200: #b2ff59;
    --paper-light-green-a400: #76ff03;
    --paper-light-green-a700: #64dd17;
 
    --paper-lime-50: #f9fbe7;
    --paper-lime-100: #f0f4c3;
    --paper-lime-200: #e6ee9c;
    --paper-lime-300: #dce775;
    --paper-lime-400: #d4e157;
    --paper-lime-500: #cddc39;
    --paper-lime-600: #c0ca33;
    --paper-lime-700: #afb42b;
    --paper-lime-800: #9e9d24;
    --paper-lime-900: #827717;
    --paper-lime-a100: #f4ff81;
    --paper-lime-a200: #eeff41;
    --paper-lime-a400: #c6ff00;
    --paper-lime-a700: #aeea00;
 
    --paper-yellow-50: #fffde7;
    --paper-yellow-100: #fff9c4;
    --paper-yellow-200: #fff59d;
    --paper-yellow-300: #fff176;
    --paper-yellow-400: #ffee58;
    --paper-yellow-500: #ffeb3b;
    --paper-yellow-600: #fdd835;
    --paper-yellow-700: #fbc02d;
    --paper-yellow-800: #f9a825;
    --paper-yellow-900: #f57f17;
    --paper-yellow-a100: #ffff8d;
    --paper-yellow-a200: #ffff00;
    --paper-yellow-a400: #ffea00;
    --paper-yellow-a700: #ffd600;
 
    --paper-amber-50: #fff8e1;
    --paper-amber-100: #ffecb3;
    --paper-amber-200: #ffe082;
    --paper-amber-300: #ffd54f;
    --paper-amber-400: #ffca28;
    --paper-amber-500: #ffc107;
    --paper-amber-600: #ffb300;
    --paper-amber-700: #ffa000;
    --paper-amber-800: #ff8f00;
    --paper-amber-900: #ff6f00;
    --paper-amber-a100: #ffe57f;
    --paper-amber-a200: #ffd740;
    --paper-amber-a400: #ffc400;
    --paper-amber-a700: #ffab00;
 
    --paper-orange-50: #fff3e0;
    --paper-orange-100: #ffe0b2;
    --paper-orange-200: #ffcc80;
    --paper-orange-300: #ffb74d;
    --paper-orange-400: #ffa726;
    --paper-orange-500: #ff9800;
    --paper-orange-600: #fb8c00;
    --paper-orange-700: #f57c00;
    --paper-orange-800: #ef6c00;
    --paper-orange-900: #e65100;
    --paper-orange-a100: #ffd180;
    --paper-orange-a200: #ffab40;
    --paper-orange-a400: #ff9100;
    --paper-orange-a700: #ff6500;
 
    --paper-deep-orange-50: #fbe9e7;
    --paper-deep-orange-100: #ffccbc;
    --paper-deep-orange-200: #ffab91;
    --paper-deep-orange-300: #ff8a65;
    --paper-deep-orange-400: #ff7043;
    --paper-deep-orange-500: #ff5722;
    --paper-deep-orange-600: #f4511e;
    --paper-deep-orange-700: #e64a19;
    --paper-deep-orange-800: #d84315;
    --paper-deep-orange-900: #bf360c;
    --paper-deep-orange-a100: #ff9e80;
    --paper-deep-orange-a200: #ff6e40;
    --paper-deep-orange-a400: #ff3d00;
    --paper-deep-orange-a700: #dd2c00;
 
    --paper-brown-50: #efebe9;
    --paper-brown-100: #d7ccc8;
    --paper-brown-200: #bcaaa4;
    --paper-brown-300: #a1887f;
    --paper-brown-400: #8d6e63;
    --paper-brown-500: #795548;
    --paper-brown-600: #6d4c41;
    --paper-brown-700: #5d4037;
    --paper-brown-800: #4e342e;
    --paper-brown-900: #3e2723;
 
    --paper-grey-50: #fafafa;
    --paper-grey-100: #f5f5f5;
    --paper-grey-200: #eeeeee;
    --paper-grey-300: #e0e0e0;
    --paper-grey-400: #bdbdbd;
    --paper-grey-500: #9e9e9e;
    --paper-grey-600: #757575;
    --paper-grey-700: #616161;
    --paper-grey-800: #424242;
    --paper-grey-900: #212121;
 
    --paper-blue-grey-50: #eceff1;
    --paper-blue-grey-100: #cfd8dc;
    --paper-blue-grey-200: #b0bec5;
    --paper-blue-grey-300: #90a4ae;
    --paper-blue-grey-400: #78909c;
    --paper-blue-grey-500: #607d8b;
    --paper-blue-grey-600: #546e7a;
    --paper-blue-grey-700: #455a64;
    --paper-blue-grey-800: #37474f;
    --paper-blue-grey-900: #263238;

    /* opacity for dark text on a light background */
    --dark-divider-opacity: 0.12;
    --dark-disabled-opacity: 0.38; /* or hint text or icon */
    --dark-secondary-opacity: 0.54;
    --dark-primary-opacity: 0.87;

    /* opacity for light text on a dark background */
    --light-divider-opacity: 0.12;
    --light-disabled-opacity: 0.3; /* or hint text or icon */
    --light-secondary-opacity: 0.7;
    --light-primary-opacity: 1.0;

  }

</style>




<style is="custom-style">

  :root {
    /*
     * You can use these generic variables in your elements for easy theming.
     * For example, if all your elements use `--primary-text-color` as its main
     * color, then switching from a light to a dark theme is just a matter of
     * changing the value of `--primary-text-color` in your application.
     */
    --primary-text-color: var(--light-theme-text-color);
    --primary-background-color: var(--light-theme-background-color);
    --secondary-text-color: var(--light-theme-secondary-color);
    --disabled-text-color: var(--light-theme-disabled-color);
    --divider-color: var(--light-theme-divider-color);
    --error-color: var(--paper-deep-orange-a700);

    /*
     * Primary and accent colors. Also see color.html for more colors.
     */
    --primary-color: var(--paper-indigo-500);
    --light-primary-color: var(--paper-indigo-100);
    --dark-primary-color: var(--paper-indigo-700);

    --accent-color: var(--paper-pink-a200);
    --light-accent-color: var(--paper-pink-a100);
    --dark-accent-color: var(--paper-pink-a400);


    /*
     * Material Design Light background theme
     */
    --light-theme-background-color: #ffffff;
    --light-theme-base-color: #000000;
    --light-theme-text-color: var(--paper-grey-900);
    --light-theme-secondary-color: #737373;  /* for secondary text and icons */
    --light-theme-disabled-color: #9b9b9b;  /* disabled/hint text */
    --light-theme-divider-color: #dbdbdb;

    /*
     * Material Design Dark background theme
     */
    --dark-theme-background-color: var(--paper-grey-900);
    --dark-theme-base-color: #ffffff;
    --dark-theme-text-color: #ffffff;
    --dark-theme-secondary-color: #bcbcbc;  /* for secondary text and icons */
    --dark-theme-disabled-color: #646464;  /* disabled/hint text */
    --dark-theme-divider-color: #3c3c3c;

    /*
     * Deprecated values because of their confusing names.
     */
    --text-primary-color: var(--dark-theme-text-color);
    --default-primary-color: var(--primary-color);

  }

</style>




<dom-module id="paper-icon-button">
  <template strip-whitespace>
    <style>
      :host {
        display: inline-block;
        position: relative;
        padding: 8px;
        outline: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        cursor: pointer;
        z-index: 0;
        line-height: 1;

        width: 40px;
        height: 40px;

        /* NOTE: Both values are needed, since some phones require the value to be `transparent`. */
        -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
        -webkit-tap-highlight-color: transparent;

        /* Because of polymer/2558, this style has lower specificity than * */
        box-sizing: border-box !important;

        @apply(--paper-icon-button);
      }

      :host #ink {
        color: var(--paper-icon-button-ink-color, --primary-text-color);
        opacity: 0.6;
      }

      :host([disabled]) {
        color: var(--paper-icon-button-disabled-text, --disabled-text-color);
        pointer-events: none;
        cursor: auto;

        @apply(--paper-icon-button-disabled);
      }

      :host(:hover) {
        @apply(--paper-icon-button-hover);
      }

      iron-icon {
        --iron-icon-width: 100%;
        --iron-icon-height: 100%;
      }
    </style>

    <iron-icon id="icon" src="[[src]]" icon="[[icon]]" alt$="[[alt]]"></iron-icon>
  </template>

  <script>//~~WEBPATH~~/paper-icon-button/paper-icon-button.html.js
Polymer({is:"paper-icon-button",hostAttributes:{role:"button",tabindex:"0"},behaviors:[Polymer.PaperInkyFocusBehavior],properties:{src:{type:String},icon:{type:String},alt:{type:String,observer:"_altChanged"}},_altChanged:function(a,b){var c=this.getAttribute("aria-label");c&&b!=c||this.setAttribute("aria-label",a)}});
</script>
</dom-module>









<script>//~~WEBPATH~~/neon-animation/neon-animation-behavior.html.js
Polymer.NeonAnimationBehavior={properties:{animationTiming:{type:Object,value:function(){return{duration:500,easing:"cubic-bezier(0.4, 0, 0.2, 1)",fill:"both"}}}},isNeonAnimation:!0,timingFromConfig:function(a){if(a.timing)for(var b in a.timing)this.animationTiming[b]=a.timing[b];return this.animationTiming},setPrefixedProperty:function(a,b,c){for(var d={transform:["webkitTransform"],transformOrigin:["mozTransformOrigin","webkitTransformOrigin"]}[b],e,g=0;e=d[g];g++)a.style[e]=c;a.style[b]=c},complete:function(){}};
</script>






<script>//~~WEBPATH~~/neon-animation/animations/opaque-animation.html.js
Polymer({is:"opaque-animation",behaviors:[Polymer.NeonAnimationBehavior],configure:function(a){var b=a.node;b.style.opacity="0";return this._effect=new KeyframeEffect(b,[{opacity:"1"},{opacity:"1"}],this.timingFromConfig(a))},complete:function(a){a.node.style.opacity=""}});
</script>


<script>//~~WEBPATH~~/neon-animation/neon-animatable-behavior.html.js
Polymer.NeonAnimatableBehavior={properties:{animationConfig:{type:Object},entryAnimation:{observer:"_entryAnimationChanged",type:String},exitAnimation:{observer:"_exitAnimationChanged",type:String}},_entryAnimationChanged:function(){this.animationConfig=this.animationConfig||{};this.animationConfig.entry="fade-in-animation"!==this.entryAnimation?[{name:"opaque-animation",node:this},{name:this.entryAnimation,node:this}]:[{name:this.entryAnimation,node:this}]},_exitAnimationChanged:function(){this.animationConfig=
this.animationConfig||{};this.animationConfig.exit=[{name:this.exitAnimation,node:this}]},_copyProperties:function(a,b){for(var c in b)a[c]=b[c]},_cloneConfig:function(a){var b={isClone:!0};this._copyProperties(b,a);return b},_getAnimationConfigRecursive:function(a,b,c){if(this.animationConfig)if(this.animationConfig.value&&"function"===typeof this.animationConfig.value)this._warn(this._logf("playAnimation","Please put 'animationConfig' inside of your components 'properties' object instead of outside of it."));
else{var d=a?this.animationConfig[a]:this.animationConfig;Array.isArray(d)||(d=[d]);if(d)for(var e,g=0;e=d[g];g++)if(e.animatable)e.animatable._getAnimationConfigRecursive(e.type||a,b,c);else if(e.id){var h=b[e.id];h?(h.isClone||(b[e.id]=this._cloneConfig(h),h=b[e.id]),this._copyProperties(h,e)):b[e.id]=e}else c.push(e)}},getAnimationConfig:function(a){var b={},c=[];this._getAnimationConfigRecursive(a,b,c);for(var d in b)c.push(b[d]);return c}};
</script>


<script>//~~WEBPATH~~/neon-animation/neon-animation-runner-behavior.html.js
Polymer.NeonAnimationRunnerBehaviorImpl={properties:{_player:{type:Object}},_configureAnimationEffects:function(a){var b=[];if(0<a.length)for(var c,d=0;c=a[d];d++){var e=document.createElement(c.name);if(e.isNeonAnimation){var g=e.configure(c);g&&b.push({animation:e,config:c,effect:g})}else Polymer.Base._warn(this.is+":",c.name,"not found!")}return b},_runAnimationEffects:function(a){return document.timeline.play(new GroupEffect(a))},_completeAnimations:function(a){for(var b,c=0;b=a[c];c++)b.animation.complete(b.config)},
playAnimation:function(a,b){if(a=this.getAnimationConfig(a)){var c=this._configureAnimationEffects(a);a=c.map(function(a){return a.effect});0<a.length?(this._player=this._runAnimationEffects(a),this._player.onfinish=function(){this._completeAnimations(c);this._player&&(this._player.cancel(),this._player=null);this.fire("neon-animation-finish",b,{bubbles:!1})}.bind(this)):this.fire("neon-animation-finish",b,{bubbles:!1})}},cancelAnimation:function(){this._player&&this._player.cancel()}};
Polymer.NeonAnimationRunnerBehavior=[Polymer.NeonAnimatableBehavior,Polymer.NeonAnimationRunnerBehaviorImpl];
</script>







<script>//~~WEBPATH~~/neon-animation/animations/fade-in-animation.html.js
Polymer({is:"fade-in-animation",behaviors:[Polymer.NeonAnimationBehavior],configure:function(a){return this._effect=new KeyframeEffect(a.node,[{opacity:"0"},{opacity:"1"}],this.timingFromConfig(a))}});
</script>







<script>//~~WEBPATH~~/neon-animation/animations/fade-out-animation.html.js
Polymer({is:"fade-out-animation",behaviors:[Polymer.NeonAnimationBehavior],configure:function(a){return this._effect=new KeyframeEffect(a.node,[{opacity:"1"},{opacity:"0"}],this.timingFromConfig(a))}});
</script>




<dom-module id="paper-tooltip">
  <template>
    <style>
      :host {
        display: block;
        position: absolute;
        outline: none;
        z-index: 1002;
        -moz-user-select: none;
        -ms-user-select: none;
        -webkit-user-select: none;
        user-select: none;
        cursor: default;
      }

      #tooltip {
        display: block;
        outline: none;
        @apply(--paper-font-common-base);
        font-size: 10px;
        line-height: 1;

        background-color: var(--paper-tooltip-background, #616161);
        opacity: var(--paper-tooltip-opacity, 0.9);
        color: var(--paper-tooltip-text-color, white);

        padding: 8px;
        border-radius: 2px;

        @apply(--paper-tooltip);
      }

      /* Thanks IE 10. */
      .hidden {
        display: none !important;
      }
    </style>

    <div id="tooltip" class="hidden">
      <content></content>
    </div>
  </template>

  <script>//~~WEBPATH~~/paper-tooltip/paper-tooltip.html.js
Polymer({is:"paper-tooltip",hostAttributes:{role:"tooltip",tabindex:-1},behaviors:[Polymer.NeonAnimationRunnerBehavior],properties:{for:{type:String,observer:"_findTarget"},manualMode:{type:Boolean,value:!1,observer:"_manualModeChanged"},position:{type:String,value:"bottom"},fitToVisibleBounds:{type:Boolean,value:!1},offset:{type:Number,value:14},marginTop:{type:Number,value:14},animationDelay:{type:Number,value:500},animationConfig:{type:Object,value:function(){return{entry:[{name:"fade-in-animation",
node:this,timing:{delay:0}}],exit:[{name:"fade-out-animation",node:this}]}}},_showing:{type:Boolean,value:!1}},listeners:{"neon-animation-finish":"_onAnimationFinish"},get target(){var a=Polymer.dom(this).parentNode,b=Polymer.dom(this).getOwnerRoot();return this.for?Polymer.dom(b).querySelector("#"+this.for):a.nodeType==Node.DOCUMENT_FRAGMENT_NODE?b.host:a},attached:function(){this._findTarget()},detached:function(){this.manualMode||this._removeListeners()},show:function(){this._showing||""===Polymer.dom(this).textContent.trim()||
(this.cancelAnimation(),this._showing=!0,this.toggleClass("hidden",!1,this.$.tooltip),this.updatePosition(),this.animationConfig.entry[0].timing=this.animationConfig.entry[0].timing||{},this.animationConfig.entry[0].timing.delay=this.animationDelay,this._animationPlaying=!0,this.playAnimation("entry"))},hide:function(){this._showing&&(this._animationPlaying?(this.cancelAnimation(),this._showing=!1,this._onAnimationFinish()):(this._showing=!1,this._animationPlaying=!0,this.playAnimation("exit")))},
updatePosition:function(){if(this._target&&this.offsetParent){var a=this.offset;14!=this.marginTop&&14==this.offset&&(a=this.marginTop);var b=this.offsetParent.getBoundingClientRect(),c=this._target.getBoundingClientRect(),d=this.getBoundingClientRect(),e=(c.width-d.width)/2,g=(c.height-d.height)/2,h=c.left-b.left,b=c.top-b.top;switch(this.position){case "top":var k=h+e;var l=b-d.height-a;break;case "bottom":k=h+e;l=b+c.height+a;break;case "left":k=h-d.width-a;l=b+g;break;case "right":k=h+c.width+
a,l=b+g}this.fitToVisibleBounds?(k+d.width>window.innerWidth?(this.style.right="0px",this.style.left="auto"):(this.style.left=Math.max(0,k)+"px",this.style.right="auto"),l+d.height>window.innerHeight?(this.style.bottom="0px",this.style.top="auto"):(this.style.top=Math.max(0,l)+"px",this.style.bottom="auto")):(this.style.left=k+"px",this.style.top=l+"px")}},_addListeners:function(){this._target&&(this.listen(this._target,"mouseenter","show"),this.listen(this._target,"focus","show"),this.listen(this._target,
"mouseleave","hide"),this.listen(this._target,"blur","hide"),this.listen(this._target,"tap","hide"));this.listen(this,"mouseenter","hide")},_findTarget:function(){this.manualMode||this._removeListeners();this._target=this.target;this.manualMode||this._addListeners()},_manualModeChanged:function(){this.manualMode?this._removeListeners():this._addListeners()},_onAnimationFinish:function(){this._animationPlaying=!1;this._showing||this.toggleClass("hidden",!0,this.$.tooltip)},_removeListeners:function(){this._target&&
(this.unlisten(this._target,"mouseenter","show"),this.unlisten(this._target,"focus","show"),this.unlisten(this._target,"mouseleave","hide"),this.unlisten(this._target,"blur","hide"),this.unlisten(this._target,"tap","hide"));this.unlisten(this,"mouseenter","hide")}});
</script>
</dom-module>






<script>//~~WEBPATH~~/iron-resizable-behavior/iron-resizable-behavior.html.js
Polymer.IronResizableBehavior={properties:{_parentResizable:{type:Object,observer:"_parentResizableChanged"},_notifyingDescendant:{type:Boolean,value:!1}},listeners:{"iron-request-resize-notifications":"_onIronRequestResizeNotifications"},created:function(){this._interestedResizables=[];this._boundNotifyResize=this.notifyResize.bind(this)},attached:function(){this._requestResizeNotifications()},detached:function(){this._parentResizable?this._parentResizable.stopResizeNotificationsFor(this):window.removeEventListener("resize",
this._boundNotifyResize);this._parentResizable=null},notifyResize:function(){this.isAttached&&(this._interestedResizables.forEach(function(a){this.resizerShouldNotify(a)&&this._notifyDescendant(a)},this),this._fireResize())},assignParentResizable:function(a){this._parentResizable=a},stopResizeNotificationsFor:function(a){var b=this._interestedResizables.indexOf(a);-1<b&&(this._interestedResizables.splice(b,1),this.unlisten(a,"iron-resize","_onDescendantIronResize"))},resizerShouldNotify:function(){return!0},
_onDescendantIronResize:function(a){this._notifyingDescendant?a.stopPropagation():Polymer.Settings.useShadow||this._fireResize()},_fireResize:function(){this.fire("iron-resize",null,{node:this,bubbles:!1})},_onIronRequestResizeNotifications:function(a){var b=Polymer.dom(a).rootTarget;b!==this&&(-1===this._interestedResizables.indexOf(b)&&(this._interestedResizables.push(b),this.listen(b,"iron-resize","_onDescendantIronResize")),b.assignParentResizable(this),this._notifyDescendant(b),a.stopPropagation())},
_parentResizableChanged:function(a){a&&window.removeEventListener("resize",this._boundNotifyResize)},_notifyDescendant:function(a){this.isAttached&&(this._notifyingDescendant=!0,a.notifyResize(),this._notifyingDescendant=!1)},_requestResizeNotifications:function(){if(this.isAttached)if("loading"===document.readyState){var a=this._requestResizeNotifications.bind(this);document.addEventListener("readystatechange",function c(){document.removeEventListener("readystatechange",c);a()})}else this.fire("iron-request-resize-notifications",
null,{node:this,bubbles:!0,cancelable:!0}),this._parentResizable||(window.addEventListener("resize",this._boundNotifyResize),this.notifyResize())}};
</script>




<dom-module id="iron-collapse">

  <template>

    <style>
      :host {
        display: block;
        transition-duration: var(--iron-collapse-transition-duration, 300ms);
        /* Safari 10 needs this property prefixed to correctly apply the custom property */
        -webkit-transition-duration: var(--iron-collapse-transition-duration, 300ms);
        overflow: visible;
      }

      :host(.iron-collapse-closed) {
        display: none;
      }

      :host(:not(.iron-collapse-opened)) {
        overflow: hidden;
      }
    </style>

    <slot></slot>

  </template>

</dom-module>

<script>//~~WEBPATH~~/iron-collapse/iron-collapse.html.js
Polymer({is:"iron-collapse",behaviors:[Polymer.IronResizableBehavior],properties:{horizontal:{type:Boolean,value:!1,observer:"_horizontalChanged"},opened:{type:Boolean,value:!1,notify:!0,observer:"_openedChanged"},transitioning:{type:Boolean,notify:!0,readOnly:!0},noAnimation:{type:Boolean},_desiredSize:{type:String,value:""}},get dimension(){return this.horizontal?"width":"height"},get _dimensionMax(){return this.horizontal?"maxWidth":"maxHeight"},get _dimensionMaxCss(){return this.horizontal?"max-width":
"max-height"},hostAttributes:{role:"group","aria-hidden":"true","aria-expanded":"false"},listeners:{transitionend:"_onTransitionEnd"},toggle:function(){this.opened=!this.opened},show:function(){this.opened=!0},hide:function(){this.opened=!1},updateSize:function(a,b){a="auto"===a?"":a;b=b&&!this.noAnimation&&this.isAttached&&this._desiredSize!==a;this._desiredSize=a;this._updateTransition(!1);b&&(b=this._calcSize(),""===a&&(this.style[this._dimensionMax]="",a=this._calcSize()),this.style[this._dimensionMax]=
b,this.scrollTop=this.scrollTop,this._updateTransition(!0),b=a!==b);this.style[this._dimensionMax]=a;b||this._transitionEnd()},enableTransition:function(a){Polymer.Base._warn("`enableTransition()` is deprecated, use `noAnimation` instead.");this.noAnimation=!a},_updateTransition:function(a){this.style.transitionDuration=a&&!this.noAnimation?"":"0s"},_horizontalChanged:function(){this.style.transitionProperty=this._dimensionMaxCss;this.style["maxWidth"===this._dimensionMax?"maxHeight":"maxWidth"]=
"";this.updateSize(this.opened?"auto":"0px",!1)},_openedChanged:function(){this.setAttribute("aria-expanded",this.opened);this.setAttribute("aria-hidden",!this.opened);this._setTransitioning(!0);this.toggleClass("iron-collapse-closed",!1);this.toggleClass("iron-collapse-opened",!1);this.updateSize(this.opened?"auto":"0px",!0);this.opened&&this.focus()},_transitionEnd:function(){this.style[this._dimensionMax]=this._desiredSize;this.toggleClass("iron-collapse-closed",!this.opened);this.toggleClass("iron-collapse-opened",
this.opened);this._updateTransition(!1);this.notifyResize();this._setTransitioning(!1)},_onTransitionEnd:function(a){Polymer.dom(a).rootTarget===this&&this._transitionEnd()},_calcSize:function(){return this.getBoundingClientRect()[this.dimension]+"px"}});
</script>










<script>//~~WEBPATH~~/iron-validatable-behavior/iron-validatable-behavior.html.js
Polymer.IronValidatableBehaviorMeta=null;
Polymer.IronValidatableBehavior={properties:{validator:{type:String},invalid:{notify:!0,reflectToAttribute:!0,type:Boolean,value:!1},_validatorMeta:{type:Object},validatorType:{type:String,value:"validator"},_validator:{type:Object,computed:"__computeValidator(validator)"}},observers:["_invalidChanged(invalid)"],registered:function(){Polymer.IronValidatableBehaviorMeta=new Polymer.IronMeta({type:"validator"})},_invalidChanged:function(){this.invalid?this.setAttribute("aria-invalid","true"):this.removeAttribute("aria-invalid")},
hasValidator:function(){return null!=this._validator},validate:function(a){this.invalid=!this._getValidity(a);return!this.invalid},_getValidity:function(a){return this.hasValidator()?this._validator.validate(a):!0},__computeValidator:function(){return Polymer.IronValidatableBehaviorMeta&&Polymer.IronValidatableBehaviorMeta.byKey(this.validator)}};
</script>



<script>//~~WEBPATH~~/iron-form-element-behavior/iron-form-element-behavior.html.js
Polymer.IronFormElementBehavior={properties:{name:{type:String},value:{notify:!0,type:String},required:{type:Boolean,value:!1},_parentForm:{type:Object}},attached:function(){this.fire("iron-form-element-register")},detached:function(){this._parentForm&&this._parentForm.fire("iron-form-element-unregister",{target:this})}};
</script>


<script>//~~WEBPATH~~/iron-checked-element-behavior/iron-checked-element-behavior.html.js
Polymer.IronCheckedElementBehaviorImpl={properties:{checked:{type:Boolean,value:!1,reflectToAttribute:!0,notify:!0,observer:"_checkedChanged"},toggles:{type:Boolean,value:!0,reflectToAttribute:!0},value:{type:String,value:"on",observer:"_valueChanged"}},observers:["_requiredChanged(required)"],created:function(){this._hasIronCheckedElementBehavior=!0},_getValidity:function(){return this.disabled||!this.required||this.required&&this.checked},_requiredChanged:function(){this.required?this.setAttribute("aria-required",
"true"):this.removeAttribute("aria-required")},_checkedChanged:function(){this.active=this.checked;this.fire("iron-change")},_valueChanged:function(){if(void 0===this.value||null===this.value)this.value="on"}};Polymer.IronCheckedElementBehavior=[Polymer.IronFormElementBehavior,Polymer.IronValidatableBehavior,Polymer.IronCheckedElementBehaviorImpl];
</script>



<script>//~~WEBPATH~~/paper-behaviors/paper-checked-element-behavior.html.js
Polymer.PaperCheckedElementBehaviorImpl={_checkedChanged:function(){Polymer.IronCheckedElementBehaviorImpl._checkedChanged.call(this);this.hasRipple()&&(this.checked?this._ripple.setAttribute("checked",""):this._ripple.removeAttribute("checked"))},_buttonStateChanged:function(){Polymer.PaperRippleBehavior._buttonStateChanged.call(this);!this.disabled&&this.isAttached&&(this.checked=this.active)}};
Polymer.PaperCheckedElementBehavior=[Polymer.PaperInkyFocusBehavior,Polymer.IronCheckedElementBehavior,Polymer.PaperCheckedElementBehaviorImpl];
</script>




<dom-module id="paper-toggle-button">
  <template strip-whitespace>

    <style>
      :host {
        display: inline-block;
        @apply(--layout-horizontal);
        @apply(--layout-center);
        @apply(--paper-font-common-base);
      }

      :host([disabled]) {
        pointer-events: none;
      }

      :host(:focus) {
        outline:none;
      }

      .toggle-bar {
        position: absolute;
        height: 100%;
        width: 100%;
        border-radius: 8px;
        pointer-events: none;
        opacity: 0.4;
        transition: background-color linear .08s;
        background-color: var(--paper-toggle-button-unchecked-bar-color, #000000);

        @apply(--paper-toggle-button-unchecked-bar);
      }

      .toggle-button {
        position: absolute;
        top: -3px;
        left: 0;
        height: 20px;
        width: 20px;
        border-radius: 50%;
        box-shadow: 0 1px 5px 0 rgba(0, 0, 0, 0.6);
        transition: -webkit-transform linear .08s, background-color linear .08s;
        transition: transform linear .08s, background-color linear .08s;
        will-change: transform;
        background-color: var(--paper-toggle-button-unchecked-button-color, --paper-grey-50);

        @apply(--paper-toggle-button-unchecked-button);
      }

      .toggle-button.dragging {
        -webkit-transition: none;
        transition: none;
      }

      :host([checked]:not([disabled])) .toggle-bar {
        opacity: 0.5;
        background-color: var(--paper-toggle-button-checked-bar-color, --primary-color);

        @apply(--paper-toggle-button-checked-bar);
      }

      :host([disabled]) .toggle-bar {
        background-color: #000;
        opacity: 0.12;
      }

      :host([checked]) .toggle-button {
        -webkit-transform: translate(16px, 0);
        transform: translate(16px, 0);
      }

      :host([checked]:not([disabled])) .toggle-button {
        background-color: var(--paper-toggle-button-checked-button-color, --primary-color);

        @apply(--paper-toggle-button-checked-button);
      }

      :host([disabled]) .toggle-button {
        background-color: #bdbdbd;
        opacity: 1;
      }

      .toggle-ink {
        position: absolute;
        top: -14px;
        left: -14px;
        right: auto;
        bottom: auto;
        width: 48px;
        height: 48px;
        opacity: 0.5;
        pointer-events: none;
        color: var(--paper-toggle-button-unchecked-ink-color, --primary-text-color);
      }

      :host([checked]) .toggle-ink {
        color: var(--paper-toggle-button-checked-ink-color, --primary-color);
      }

      .toggle-container {
        display: inline-block;
        position: relative;
        width: 36px;
        height: 14px;
        /* The toggle button has an absolute position of -3px; The extra 1px
        /* accounts for the toggle button shadow box. */
        margin: 4px 1px;
      }

      .toggle-label {
        position: relative;
        display: inline-block;
        vertical-align: middle;
        padding-left: var(--paper-toggle-button-label-spacing, 8px);
        pointer-events: none;
        color: var(--paper-toggle-button-label-color, --primary-text-color);
      }

      /* invalid state */
      :host([invalid]) .toggle-bar {
        background-color: var(--paper-toggle-button-invalid-bar-color, --error-color);
      }

      :host([invalid]) .toggle-button {
        background-color: var(--paper-toggle-button-invalid-button-color, --error-color);
      }

      :host([invalid]) .toggle-ink {
        color: var(--paper-toggle-button-invalid-ink-color, --error-color);
      }
    </style>

    <div class="toggle-container">
      <div id="toggleBar" class="toggle-bar"></div>
      <div id="toggleButton" class="toggle-button"></div>
    </div>

    <div class="toggle-label"><content></content></div>

  </template>

  <script>//~~WEBPATH~~/paper-toggle-button/paper-toggle-button.html.js
Polymer({is:"paper-toggle-button",behaviors:[Polymer.PaperCheckedElementBehavior],hostAttributes:{role:"button","aria-pressed":"false",tabindex:0},properties:{},listeners:{track:"_ontrack"},attached:function(){Polymer.RenderStatus.afterNextRender(this,function(){this.setScrollDirection("y")})},_ontrack:function(a){a=a.detail;"start"===a.state?this._trackStart(a):"track"===a.state?this._trackMove(a):"end"===a.state&&this._trackEnd(a)},_trackStart:function(){this._width=this.$.toggleBar.offsetWidth/
2;this._trackChecked=this.checked;this.$.toggleButton.classList.add("dragging")},_trackMove:function(a){a=a.dx;this._x=Math.min(this._width,Math.max(0,this._trackChecked?this._width+a:a));this.translate3d(this._x+"px",0,0,this.$.toggleButton);this._userActivate(this._x>this._width/2)},_trackEnd:function(){this.$.toggleButton.classList.remove("dragging");this.transform("",this.$.toggleButton)},_createRipple:function(){this._rippleContainer=this.$.toggleButton;var a=Polymer.PaperRippleBehavior._createRipple();
a.id="ink";a.setAttribute("recenters","");a.classList.add("circle","toggle-ink");return a}});
</script>
</dom-module>







<script>//~~WEBPATH~~/iron-selector/iron-selection.html.js
Polymer.IronSelection=function(a){this.selection=[];this.selectCallback=a};Polymer.IronSelection.prototype={get:function(){return this.multi?this.selection.slice():this.selection[0]},clear:function(a){this.selection.slice().forEach(function(b){(!a||0>a.indexOf(b))&&oa(this,b,!1)},this)},isSelected:function(a){return 0<=this.selection.indexOf(a)},select:function(a){this.multi?this.toggle(a):this.get()!==a&&(oa(this,this.get(),!1),oa(this,a,!0))},toggle:function(a){oa(this,a,!this.isSelected(a))}};
function oa(a,b,c){if(null!=b&&c!==a.isSelected(b)){if(c)a.selection.push(b);else{var d=a.selection.indexOf(b);0<=d&&a.selection.splice(d,1)}a.selectCallback&&a.selectCallback(b,c)}};
</script>


<script>//~~WEBPATH~~/iron-selector/iron-selectable.html.js
Polymer.IronSelectableBehavior={properties:{attrForSelected:{type:String,value:null},selected:{type:String,notify:!0},selectedItem:{type:Object,readOnly:!0,notify:!0},activateEvent:{type:String,value:"tap",observer:"_activateEventChanged"},selectable:String,selectedClass:{type:String,value:"iron-selected"},selectedAttribute:{type:String,value:null},fallbackSelection:{type:String,value:null},items:{type:Array,readOnly:!0,notify:!0,value:function(){return[]}},_excludedLocalNames:{type:Object,value:function(){return{template:1}}}},
observers:["_updateAttrForSelected(attrForSelected)","_updateSelected(selected)","_checkFallback(fallbackSelection)"],created:function(){this._bindFilterItem=this._filterItem.bind(this);this._selection=new Polymer.IronSelection(this._applySelection.bind(this))},attached:function(){this._observer=this._observeItems(this);this._updateItems();this._shouldUpdateSelection||this._updateSelected();this._addListener(this.activateEvent)},detached:function(){this._observer&&Polymer.dom(this).unobserveNodes(this._observer);
this._removeListener(this.activateEvent)},indexOf:function(a){return this.items.indexOf(a)},select:function(a){this.selected=a},selectPrevious:function(){var a=this.items.length,a=(Number(this._valueToIndex(this.selected))-1+a)%a;this.selected=this._indexToValue(a)},selectNext:function(){var a=(Number(this._valueToIndex(this.selected))+1)%this.items.length;this.selected=this._indexToValue(a)},selectIndex:function(a){this.select(this._indexToValue(a))},forceSynchronousItemUpdate:function(){this._updateItems()},
get _shouldUpdateSelection(){return null!=this.selected},_checkFallback:function(){this._shouldUpdateSelection&&this._updateSelected()},_addListener:function(a){this.listen(this,a,"_activateHandler")},_removeListener:function(a){this.unlisten(this,a,"_activateHandler")},_activateEventChanged:function(a,b){this._removeListener(b);this._addListener(a)},_updateItems:function(){var a=Polymer.dom(this).queryDistributedElements(this.selectable||"*"),a=Array.prototype.filter.call(a,this._bindFilterItem);
this._setItems(a)},_updateAttrForSelected:function(){this._shouldUpdateSelection&&(this.selected=this._indexToValue(this.indexOf(this.selectedItem)))},_updateSelected:function(){this._selectSelected(this.selected)},_selectSelected:function(){this._selection.select(this._valueToItem(this.selected));this.fallbackSelection&&this.items.length&&void 0===this._selection.get()&&(this.selected=this.fallbackSelection)},_filterItem:function(a){return!this._excludedLocalNames[a.localName]},_valueToItem:function(a){return null==
a?null:this.items[this._valueToIndex(a)]},_valueToIndex:function(a){if(this.attrForSelected)for(var b=0,c;c=this.items[b];b++){if(this._valueForItem(c)==a)return b}else return Number(a)},_indexToValue:function(a){if(this.attrForSelected){if(a=this.items[a])return this._valueForItem(a)}else return a},_valueForItem:function(a){var b=a[Polymer.CaseMap.dashToCamelCase(this.attrForSelected)];return void 0!=b?b:a.getAttribute(this.attrForSelected)},_applySelection:function(a,b){this.selectedClass&&this.toggleClass(this.selectedClass,
b,a);this.selectedAttribute&&this.toggleAttribute(this.selectedAttribute,b,a);this._selectionChange();this.fire("iron-"+(b?"select":"deselect"),{item:a})},_selectionChange:function(){this._setSelectedItem(this._selection.get())},_observeItems:function(a){return Polymer.dom(a).observeNodes(function(a){this._updateItems();this._shouldUpdateSelection&&this._updateSelected();this.fire("iron-items-changed",a,{bubbles:!1,cancelable:!1})})},_activateHandler:function(a){a=a.target;for(var b=this.items;a&&
a!=this;){var c=b.indexOf(a);if(0<=c){b=this._indexToValue(c);this._itemActivate(b,a);break}a=a.parentNode}},_itemActivate:function(a,b){this.fire("iron-activate",{selected:a,item:b},{cancelable:!0}).defaultPrevented||this.select(a)}};
</script>


<script>//~~WEBPATH~~/iron-selector/iron-multi-selectable.html.js
Polymer.IronMultiSelectableBehaviorImpl={properties:{multi:{type:Boolean,value:!1,observer:"multiChanged"},selectedValues:{type:Array,notify:!0},selectedItems:{type:Array,readOnly:!0,notify:!0}},observers:["_updateSelected(selectedValues.splices)"],select:function(a){this.multi?this.selectedValues?this._toggleSelected(a):this.selectedValues=[a]:this.selected=a},multiChanged:function(a){this._selection.multi=a},get _shouldUpdateSelection(){return null!=this.selected||null!=this.selectedValues&&this.selectedValues.length},
_updateAttrForSelected:function(){this.multi?this._shouldUpdateSelection&&(this.selectedValues=this.selectedItems.map(function(a){return this._indexToValue(this.indexOf(a))},this).filter(function(a){return null!=a},this)):Polymer.IronSelectableBehavior._updateAttrForSelected.apply(this)},_updateSelected:function(){this.multi?this._selectMulti(this.selectedValues):this._selectSelected(this.selected)},_selectMulti:function(a){if(a){a=this._valuesToItems(a);this._selection.clear(a);for(var b=0;b<a.length;b++)oa(this._selection,
a[b],!0);this.fallbackSelection&&this.items.length&&!this._selection.get().length&&this._valueToItem(this.fallbackSelection)&&(this.selectedValues=[this.fallbackSelection])}else this._selection.clear()},_selectionChange:function(){var a=this._selection.get();this.multi?this._setSelectedItems(a):(this._setSelectedItems([a]),this._setSelectedItem(a))},_toggleSelected:function(a){var b=this.selectedValues.indexOf(a);0>b?this.push("selectedValues",a):this.splice("selectedValues",b,1)},_valuesToItems:function(a){return null==
a?null:a.map(function(a){return this._valueToItem(a)},this)}};Polymer.IronMultiSelectableBehavior=[Polymer.IronSelectableBehavior,Polymer.IronMultiSelectableBehaviorImpl];
</script>



<script>//~~WEBPATH~~/iron-menu-behavior/iron-menu-behavior.html.js
Polymer.IronMenuBehaviorImpl={properties:{focusedItem:{observer:"_focusedItemChanged",readOnly:!0,type:Object},attrForItemTitle:{type:String},disabled:{type:Boolean,value:!1,observer:"_disabledChanged"}},_SEARCH_RESET_TIMEOUT_MS:1E3,_previousTabIndex:0,hostAttributes:{role:"menu"},observers:["_updateMultiselectable(multi)"],listeners:{focus:"_onFocus",keydown:"_onKeydown","iron-items-changed":"_onIronItemsChanged"},keyBindings:{up:"_onUpKey",down:"_onDownKey",esc:"_onEscKey","shift+tab:keydown":"_onShiftTabDown"},
attached:function(){this._resetTabindices()},select:function(a){this._defaultFocusAsync&&(this.cancelAsync(this._defaultFocusAsync),this._defaultFocusAsync=null);var b=this._valueToItem(a);b&&b.hasAttribute("disabled")||(this._setFocusedItem(b),Polymer.IronMultiSelectableBehaviorImpl.select.apply(this,arguments))},_resetTabindices:function(){var a=this.multi?this.selectedItems&&this.selectedItems[0]:this.selectedItem;this.items.forEach(function(b){b.setAttribute("tabindex",b===a?"0":"-1")},this)},
_updateMultiselectable:function(a){a?this.setAttribute("aria-multiselectable","true"):this.removeAttribute("aria-multiselectable")},_focusWithKeyboardEvent:function(a){this.cancelDebouncer("_clearSearchText");var b=this._searchText||"",b=b+(a.key&&1==a.key.length?a.key:String.fromCharCode(a.keyCode)).toLocaleLowerCase();a=b.length;for(var c=0,d;d=this.items[c];c++)if(!d.hasAttribute("disabled")){var e=this.attrForItemTitle||"textContent",e=(d[e]||d.getAttribute(e)||"").trim();if(!(e.length<a)&&e.slice(0,
a).toLocaleLowerCase()==b){this._setFocusedItem(d);break}}this._searchText=b;this.debounce("_clearSearchText",this._clearSearchText,this._SEARCH_RESET_TIMEOUT_MS)},_clearSearchText:function(){this._searchText=""},_focusPrevious:function(){for(var a=this.items.length,b=Number(this.indexOf(this.focusedItem)),c=1;c<a+1;c++){var d=this.items[(b-c+a)%a];if(!d.hasAttribute("disabled")){var e=Polymer.dom(d).getOwnerRoot()||document;this._setFocusedItem(d);if(Polymer.dom(e).activeElement==d)break}}},_focusNext:function(){for(var a=
this.items.length,b=Number(this.indexOf(this.focusedItem)),c=1;c<a+1;c++){var d=this.items[(b+c)%a];if(!d.hasAttribute("disabled")){var e=Polymer.dom(d).getOwnerRoot()||document;this._setFocusedItem(d);if(Polymer.dom(e).activeElement==d)break}}},_applySelection:function(a,b){b?a.setAttribute("aria-selected","true"):a.removeAttribute("aria-selected");Polymer.IronSelectableBehavior._applySelection.apply(this,arguments)},_focusedItemChanged:function(a,b){b&&b.setAttribute("tabindex","-1");!a||a.hasAttribute("disabled")||
this.disabled||(a.setAttribute("tabindex","0"),a.focus())},_onIronItemsChanged:function(a){a.detail.addedNodes.length&&this._resetTabindices()},_onShiftTabDown:function(){var a=this.getAttribute("tabindex");Polymer.IronMenuBehaviorImpl._shiftTabPressed=!0;this._setFocusedItem(null);this.setAttribute("tabindex","-1");this.async(function(){this.setAttribute("tabindex",a);Polymer.IronMenuBehaviorImpl._shiftTabPressed=!1},1)},_onFocus:function(a){!Polymer.IronMenuBehaviorImpl._shiftTabPressed&&(a=Polymer.dom(a).rootTarget,
a===this||"undefined"===typeof a.tabIndex||this.isLightDescendant(a))&&(this._defaultFocusAsync=this.async(function(){var a=this.multi?this.selectedItems&&this.selectedItems[0]:this.selectedItem;this._setFocusedItem(null);a?this._setFocusedItem(a):this.items[0]&&this._focusNext()}))},_onUpKey:function(a){this._focusPrevious();a.detail.keyboardEvent.preventDefault()},_onDownKey:function(a){this._focusNext();a.detail.keyboardEvent.preventDefault()},_onEscKey:function(){var a=this.focusedItem;a&&a.blur()},
_onKeydown:function(a){this.keyboardEventMatchesKeys(a,"up down esc")||this._focusWithKeyboardEvent(a);a.stopPropagation()},_activateHandler:function(a){Polymer.IronSelectableBehavior._activateHandler.call(this,a);a.stopPropagation()},_disabledChanged:function(a){a?(this._previousTabIndex=this.hasAttribute("tabindex")?this.tabIndex:0,this.removeAttribute("tabindex")):this.hasAttribute("tabindex")||this.setAttribute("tabindex",this._previousTabIndex)}};
Polymer.IronMenuBehaviorImpl._shiftTabPressed=!1;Polymer.IronMenuBehavior=[Polymer.IronMultiSelectableBehavior,Polymer.IronA11yKeysBehavior,Polymer.IronMenuBehaviorImpl];
</script>





<dom-module id="paper-listbox">
  <template>
    <style>
      :host {
        display: block;
        padding: 8px 0;

        background: var(--paper-listbox-background-color, var(--primary-background-color));
        color: var(--paper-listbox-color, var(--primary-text-color));

        @apply --paper-listbox;
      }
    </style>

    <slot></slot>
  </template>

  <script>//~~WEBPATH~~/paper-listbox/paper-listbox.html.js
Polymer({is:"paper-listbox",behaviors:[Polymer.IronMenuBehavior],hostAttributes:{role:"listbox"}});
</script>
</dom-module>









<script>//~~WEBPATH~~/paper-item/paper-item-behavior.html.js
Polymer.PaperItemBehaviorImpl={hostAttributes:{role:"option",tabindex:"0"}};Polymer.PaperItemBehavior=[Polymer.IronButtonState,Polymer.IronControlState,Polymer.PaperItemBehaviorImpl];
</script>





<dom-module id="paper-item-shared-styles">
  <template>
    <style>
      :host {
        display: block;
        position: relative;
        min-height: var(--paper-item-min-height, 48px);
        padding: 0px 16px;
      }

      :host([hidden]) {
        display: none !important;
      }

      :host(.iron-selected) {
        font-weight: var(--paper-item-selected-weight, bold);

        @apply(--paper-item-selected);
      }

      :host([disabled]) {
        color: var(--paper-item-disabled-color, --disabled-text-color);

        @apply(--paper-item-disabled);
      }

      :host(:focus) {
        position: relative;
        outline: 0;

        @apply(--paper-item-focused);
      }

      :host(:focus):before {
        @apply(--layout-fit);

        background: currentColor;
        content: '';
        opacity: var(--dark-divider-opacity);
        pointer-events: none;

        @apply(--paper-item-focused-before);
      }
    </style>
  </template>
</dom-module>




<dom-module id="paper-item">
  <template>
    <style include="paper-item-shared-styles"></style>
    <style>
      :host {
        @apply(--layout-horizontal);
        @apply(--layout-center);
        @apply(--paper-font-subhead);

        @apply(--paper-item);
      }
    </style>

    <content></content>
  </template>

  <script>//~~WEBPATH~~/paper-item/paper-item.html.js
Polymer({is:"paper-item",behaviors:[Polymer.PaperItemBehavior]});
</script>
</dom-module>







<dom-module id="paper-checkbox">
  <template strip-whitespace>
    <style>
      :host {
        display: inline-block;
        white-space: nowrap;
        cursor: pointer;
        --calculated-paper-checkbox-size: var(--paper-checkbox-size, 18px);
        /* -1px is a sentinel for the default and is replaced in `attached`. */
        --calculated-paper-checkbox-ink-size: var(--paper-checkbox-ink-size, -1px);
        @apply --paper-font-common-base;
        line-height: 0;
        -webkit-tap-highlight-color: transparent;
      }

      :host([hidden]) {
        display: none !important;
      }

      :host(:focus) {
        outline: none;
      }

      .hidden {
        display: none;
      }

      #checkboxContainer {
        display: inline-block;
        position: relative;
        width: var(--calculated-paper-checkbox-size);
        height: var(--calculated-paper-checkbox-size);
        min-width: var(--calculated-paper-checkbox-size);
        margin: var(--paper-checkbox-margin, initial);
        vertical-align: var(--paper-checkbox-vertical-align, middle);
        background-color: var(--paper-checkbox-unchecked-background-color, transparent);
      }

      #ink {
        position: absolute;

        /* Center the ripple in the checkbox by negative offsetting it by
         * (inkWidth - rippleWidth) / 2 */
        top: calc(0px - (var(--calculated-paper-checkbox-ink-size) - var(--calculated-paper-checkbox-size)) / 2);
        left: calc(0px - (var(--calculated-paper-checkbox-ink-size) - var(--calculated-paper-checkbox-size)) / 2);
        width: var(--calculated-paper-checkbox-ink-size);
        height: var(--calculated-paper-checkbox-ink-size);
        color: var(--paper-checkbox-unchecked-ink-color, var(--primary-text-color));
        opacity: 0.6;
        pointer-events: none;
      }

      :host-context([dir="rtl"]) #ink {
        right: calc(0px - (var(--calculated-paper-checkbox-ink-size) - var(--calculated-paper-checkbox-size)) / 2);
        left: auto;
      }

      #ink[checked] {
        color: var(--paper-checkbox-checked-ink-color, var(--primary-color));
      }

      #checkbox {
        position: relative;
        box-sizing: border-box;
        height: 100%;
        border: solid 2px;
        border-color: var(--paper-checkbox-unchecked-color, var(--primary-text-color));
        border-radius: 2px;
        pointer-events: none;
        -webkit-transition: background-color 140ms, border-color 140ms;
        transition: background-color 140ms, border-color 140ms;
      }

      /* checkbox checked animations */
      #checkbox.checked #checkmark {
        -webkit-animation: checkmark-expand 140ms ease-out forwards;
        animation: checkmark-expand 140ms ease-out forwards;
      }

      @-webkit-keyframes checkmark-expand {
        0% {
          -webkit-transform: scale(0, 0) rotate(45deg);
        }
        100% {
          -webkit-transform: scale(1, 1) rotate(45deg);
        }
      }

      @keyframes checkmark-expand {
        0% {
          transform: scale(0, 0) rotate(45deg);
        }
        100% {
          transform: scale(1, 1) rotate(45deg);
        }
      }

      #checkbox.checked {
        background-color: var(--paper-checkbox-checked-color, var(--primary-color));
        border-color: var(--paper-checkbox-checked-color, var(--primary-color));
      }

      #checkmark {
        position: absolute;
        width: 36%;
        height: 70%;
        border-style: solid;
        border-top: none;
        border-left: none;
        border-right-width: calc(2/15 * var(--calculated-paper-checkbox-size));
        border-bottom-width: calc(2/15 * var(--calculated-paper-checkbox-size));
        border-color: var(--paper-checkbox-checkmark-color, white);
        -webkit-transform-origin: 97% 86%;
        transform-origin: 97% 86%;
        box-sizing: content-box; /* protect against page-level box-sizing */
      }

      :host-context([dir="rtl"]) #checkmark {
        -webkit-transform-origin: 50% 14%;
        transform-origin: 50% 14%;
      }

      /* label */
      #checkboxLabel {
        position: relative;
        display: inline-block;
        vertical-align: middle;
        padding-left: var(--paper-checkbox-label-spacing, 8px);
        white-space: normal;
        line-height: normal;
        color: var(--paper-checkbox-label-color, var(--primary-text-color));
        @apply --paper-checkbox-label;
      }

      :host([checked]) #checkboxLabel {
        color: var(--paper-checkbox-label-checked-color, var(--paper-checkbox-label-color, var(--primary-text-color)));
        @apply --paper-checkbox-label-checked;
      }

      :host-context([dir="rtl"]) #checkboxLabel {
        padding-right: var(--paper-checkbox-label-spacing, 8px);
        padding-left: 0;
      }

      #checkboxLabel[hidden] {
        display: none;
      }

      /* disabled state */

      :host([disabled]) #checkbox {
        opacity: 0.5;
        border-color: var(--paper-checkbox-unchecked-color, var(--primary-text-color));
      }

      :host([disabled][checked]) #checkbox {
        background-color: var(--paper-checkbox-unchecked-color, var(--primary-text-color));
        opacity: 0.5;
      }

      :host([disabled]) #checkboxLabel  {
        opacity: 0.65;
      }

      /* invalid state */
      #checkbox.invalid:not(.checked) {
        border-color: var(--paper-checkbox-error-color, var(--error-color));
      }
    </style>

    <div id="checkboxContainer">
      <div id="checkbox" class$="[[_computeCheckboxClass(checked, invalid)]]">
        <div id="checkmark" class$="[[_computeCheckmarkClass(checked)]]"></div>
      </div>
    </div>

    <div id="checkboxLabel"><slot></slot></div>
  </template>

  <script>//~~WEBPATH~~/paper-checkbox/paper-checkbox.html.js
Polymer({is:"paper-checkbox",behaviors:[Polymer.PaperCheckedElementBehavior],hostAttributes:{role:"checkbox","aria-checked":!1,tabindex:0},properties:{ariaActiveAttribute:{type:String,value:"aria-checked"}},attached:function(){Polymer.RenderStatus.afterNextRender(this,function(){if("-1px"===this.getComputedStyleValue("--calculated-paper-checkbox-ink-size").trim()){var a=parseFloat(this.getComputedStyleValue("--calculated-paper-checkbox-size").trim()),b=Math.floor(8/3*a);b%2!==a%2&&b++;this.updateStyles({"--paper-checkbox-ink-size":b+
"px"})}})},_computeCheckboxClass:function(a,b){var c="";a&&(c+="checked ");b&&(c+="invalid");return c},_computeCheckmarkClass:function(a){return a?"":"hidden"},_createRipple:function(){this._rippleContainer=this.$.checkboxContainer;return Polymer.PaperInkyFocusBehaviorImpl._createRipple.call(this)}});
</script>
</dom-module>





<script>//~~WEBPATH~~/iron-iconset-svg/iron-iconset-svg.html.js
Polymer({is:"iron-iconset-svg",properties:{name:{type:String,observer:"_nameChanged"},size:{type:Number,value:24},rtlMirroring:{type:Boolean,value:!1}},created:function(){this._meta=new Polymer.IronMeta({type:"iconset",key:null,value:null})},attached:function(){this.style.display="none"},getIconNames:function(){this._icons=this._createIconMap();return Object.keys(this._icons).map(function(a){return this.name+":"+a},this)},applyIcon:function(a,b){this.removeIcon(a);if(b=this._cloneIcon(b,this.rtlMirroring&&
this._targetIsRTL(a))){var c=Polymer.dom(a.root||a);c.insertBefore(b,c.childNodes[0]);return a._svgIcon=b}return null},removeIcon:function(a){a._svgIcon&&(Polymer.dom(a.root||a).removeChild(a._svgIcon),a._svgIcon=null)},_targetIsRTL:function(a){null==this.__targetIsRTL&&(a&&a.nodeType!==Node.ELEMENT_NODE&&(a=a.host),this.__targetIsRTL=a&&"rtl"===window.getComputedStyle(a).direction);return this.__targetIsRTL},_nameChanged:function(){this._meta.value=null;this._meta.key=this.name;this._meta.value=
this;this.async(function(){this.fire("iron-iconset-added",this,{node:window})})},_createIconMap:function(){var a=Object.create(null);Polymer.dom(this).querySelectorAll("[id]").forEach(function(b){a[b.id]=b});return a},_cloneIcon:function(a,b){this._icons=this._icons||this._createIconMap();return this._prepareSvgClone(this._icons[a],this.size,b)},_prepareSvgClone:function(a,b,c){if(a){a=a.cloneNode(!0);var d=document.createElementNS("http://www.w3.org/2000/svg","svg");b=a.getAttribute("viewBox")||
"0 0 "+b+" "+b;var e="pointer-events: none; display: block; width: 100%; height: 100%;";c&&a.hasAttribute("mirror-in-rtl")&&(e+="-webkit-transform:scale(-1,1);transform:scale(-1,1);");d.setAttribute("viewBox",b);d.setAttribute("preserveAspectRatio","xMidYMid meet");d.style.cssText=e;d.appendChild(a).removeAttribute("id");return d}return null}});
</script>

<iron-iconset-svg name="icons" size="24">
<svg><defs>
<g id="3d-rotation"><path d="M7.52 21.48C4.25 19.94 1.91 16.76 1.55 13H.05C.56 19.16 5.71 24 12 24l.66-.03-3.81-3.81-1.33 1.32zm.89-6.52c-.19 0-.37-.03-.52-.08-.16-.06-.29-.13-.4-.24-.11-.1-.2-.22-.26-.37-.06-.14-.09-.3-.09-.47h-1.3c0 .36.07.68.21.95.14.27.33.5.56.69.24.18.51.32.82.41.3.1.62.15.96.15.37 0 .72-.05 1.03-.15.32-.1.6-.25.83-.44s.42-.43.55-.72c.13-.29.2-.61.2-.97 0-.19-.02-.38-.07-.56-.05-.18-.12-.35-.23-.51-.1-.16-.24-.3-.4-.43-.17-.13-.37-.23-.61-.31.2-.09.37-.2.52-.33.15-.13.27-.27.37-.42.1-.15.17-.3.22-.46.05-.16.07-.32.07-.48 0-.36-.06-.68-.18-.96-.12-.28-.29-.51-.51-.69-.2-.19-.47-.33-.77-.43C9.1 8.05 8.76 8 8.39 8c-.36 0-.69.05-1 .16-.3.11-.57.26-.79.45-.21.19-.38.41-.51.67-.12.26-.18.54-.18.85h1.3c0-.17.03-.32.09-.45s.14-.25.25-.34c.11-.09.23-.17.38-.22.15-.05.3-.08.48-.08.4 0 .7.1.89.31.19.2.29.49.29.86 0 .18-.03.34-.08.49-.05.15-.14.27-.25.37-.11.1-.25.18-.41.24-.16.06-.36.09-.58.09H7.5v1.03h.77c.22 0 .42.02.6.07s.33.13.45.23c.12.11.22.24.29.4.07.16.1.35.1.57 0 .41-.12.72-.35.93-.23.23-.55.33-.95.33zm8.55-5.92c-.32-.33-.7-.59-1.14-.77-.43-.18-.92-.27-1.46-.27H12v8h2.3c.55 0 1.06-.09 1.51-.27.45-.18.84-.43 1.16-.76.32-.33.57-.73.74-1.19.17-.47.26-.99.26-1.57v-.4c0-.58-.09-1.1-.26-1.57-.18-.47-.43-.87-.75-1.2zm-.39 3.16c0 .42-.05.79-.14 1.13-.1.33-.24.62-.43.85-.19.23-.43.41-.71.53-.29.12-.62.18-.99.18h-.91V9.12h.97c.72 0 1.27.23 1.64.69.38.46.57 1.12.57 1.99v.4zM12 0l-.66.03 3.81 3.81 1.33-1.33c3.27 1.55 5.61 4.72 5.96 8.48h1.5C23.44 4.84 18.29 0 12 0z" /></g>
<g id="accessibility"><path d="M12 2c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zm9 7h-6v13h-2v-6h-2v6H9V9H3V7h18v2z" /></g>
<g id="accessible"><circle cx="12" cy="4" r="2" /><path d="M19 13v-2c-1.54.02-3.09-.75-4.07-1.83l-1.29-1.43c-.17-.19-.38-.34-.61-.45-.01 0-.01-.01-.02-.01H13c-.35-.2-.75-.3-1.19-.26C10.76 7.11 10 8.04 10 9.09V15c0 1.1.9 2 2 2h5v5h2v-5.5c0-1.1-.9-2-2-2h-3v-3.45c1.29 1.07 3.25 1.94 5 1.95zm-6.17 5c-.41 1.16-1.52 2-2.83 2-1.66 0-3-1.34-3-3 0-1.31.84-2.41 2-2.83V12.1c-2.28.46-4 2.48-4 4.9 0 2.76 2.24 5 5 5 2.42 0 4.44-1.72 4.9-4h-2.07z" /></g>
<g id="account-balance"><path d="M4 10v7h3v-7H4zm6 0v7h3v-7h-3zM2 22h19v-3H2v3zm14-12v7h3v-7h-3zm-4.5-9L2 6v2h19V6l-9.5-5z" /></g>
<g id="account-balance-wallet"><path d="M21 18v1c0 1.1-.9 2-2 2H5c-1.11 0-2-.9-2-2V5c0-1.1.89-2 2-2h14c1.1 0 2 .9 2 2v1h-9c-1.11 0-2 .9-2 2v8c0 1.1.89 2 2 2h9zm-9-2h10V8H12v8zm4-2.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z" /></g>
<g id="account-box"><path d="M3 5v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2H5c-1.11 0-2 .9-2 2zm12 4c0 1.66-1.34 3-3 3s-3-1.34-3-3 1.34-3 3-3 3 1.34 3 3zm-9 8c0-2 4-3.1 6-3.1s6 1.1 6 3.1v1H6v-1z" /></g>
<g id="account-circle"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z" /></g>
<g id="add"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" /></g>
<g id="add-alert"><path d="M10.01 21.01c0 1.1.89 1.99 1.99 1.99s1.99-.89 1.99-1.99h-3.98zm8.87-4.19V11c0-3.25-2.25-5.97-5.29-6.69v-.72C13.59 2.71 12.88 2 12 2s-1.59.71-1.59 1.59v.72C7.37 5.03 5.12 7.75 5.12 11v5.82L3 18.94V20h18v-1.06l-2.12-2.12zM16 13.01h-3v3h-2v-3H8V11h3V8h2v3h3v2.01z" /></g>
<g id="add-box"><path d="M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10h-4v4h-2v-4H7v-2h4V7h2v4h4v2z" /></g>
<g id="add-circle"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z" /></g>
<g id="add-circle-outline"><path d="M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z" /></g>
<g id="add-shopping-cart"><path d="M11 9h2V6h3V4h-3V1h-2v3H8v2h3v3zm-4 9c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zm10 0c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2zm-9.83-3.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.86-7.01L19.42 4h-.01l-1.1 2-2.76 5H8.53l-.13-.27L6.16 6l-.95-2-.94-2H1v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.13 0-.25-.11-.25-.25z" /></g>
<g id="alarm"><path d="M22 5.72l-4.6-3.86-1.29 1.53 4.6 3.86L22 5.72zM7.88 3.39L6.6 1.86 2 5.71l1.29 1.53 4.59-3.85zM12.5 8H11v6l4.75 2.85.75-1.23-4-2.37V8zM12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9c4.97 0 9-4.03 9-9s-4.03-9-9-9zm0 16c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z" /></g>
<g id="alarm-add"><path d="M7.88 3.39L6.6 1.86 2 5.71l1.29 1.53 4.59-3.85zM22 5.72l-4.6-3.86-1.29 1.53 4.6 3.86L22 5.72zM12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9c4.97 0 9-4.03 9-9s-4.03-9-9-9zm0 16c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7zm1-11h-2v3H8v2h3v3h2v-3h3v-2h-3V9z" /></g>
<g id="alarm-off"><path d="M12 6c3.87 0 7 3.13 7 7 0 .84-.16 1.65-.43 2.4l1.52 1.52c.58-1.19.91-2.51.91-3.92 0-4.97-4.03-9-9-9-1.41 0-2.73.33-3.92.91L9.6 6.43C10.35 6.16 11.16 6 12 6zm10-.28l-4.6-3.86-1.29 1.53 4.6 3.86L22 5.72zM2.92 2.29L1.65 3.57 2.98 4.9l-1.11.93 1.42 1.42 1.11-.94.8.8C3.83 8.69 3 10.75 3 13c0 4.97 4.02 9 9 9 2.25 0 4.31-.83 5.89-2.2l2.2 2.2 1.27-1.27L3.89 3.27l-.97-.98zm13.55 16.1C15.26 19.39 13.7 20 12 20c-3.87 0-7-3.13-7-7 0-1.7.61-3.26 1.61-4.47l9.86 9.86zM8.02 3.28L6.6 1.86l-.86.71 1.42 1.42.86-.71z" /></g>
<g id="alarm-on"><path d="M22 5.72l-4.6-3.86-1.29 1.53 4.6 3.86L22 5.72zM7.88 3.39L6.6 1.86 2 5.71l1.29 1.53 4.59-3.85zM12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9c4.97 0 9-4.03 9-9s-4.03-9-9-9zm0 16c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7zm-1.46-5.47L8.41 12.4l-1.06 1.06 3.18 3.18 6-6-1.06-1.06-4.93 4.95z" /></g>
<g id="all-out"><path d="M16.21 4.16l4 4v-4zm4 12l-4 4h4zm-12 4l-4-4v4zm-4-12l4-4h-4zm12.95-.95c-2.73-2.73-7.17-2.73-9.9 0s-2.73 7.17 0 9.9 7.17 2.73 9.9 0 2.73-7.16 0-9.9zm-1.1 8.8c-2.13 2.13-5.57 2.13-7.7 0s-2.13-5.57 0-7.7 5.57-2.13 7.7 0 2.13 5.57 0 7.7z" /></g>
<g id="android"><path d="M6 18c0 .55.45 1 1 1h1v3.5c0 .83.67 1.5 1.5 1.5s1.5-.67 1.5-1.5V19h2v3.5c0 .83.67 1.5 1.5 1.5s1.5-.67 1.5-1.5V19h1c.55 0 1-.45 1-1V8H6v10zM3.5 8C2.67 8 2 8.67 2 9.5v7c0 .83.67 1.5 1.5 1.5S5 17.33 5 16.5v-7C5 8.67 4.33 8 3.5 8zm17 0c-.83 0-1.5.67-1.5 1.5v7c0 .83.67 1.5 1.5 1.5s1.5-.67 1.5-1.5v-7c0-.83-.67-1.5-1.5-1.5zm-4.97-5.84l1.3-1.3c.2-.2.2-.51 0-.71-.2-.2-.51-.2-.71 0l-1.48 1.48C13.85 1.23 12.95 1 12 1c-.96 0-1.86.23-2.66.63L7.85.15c-.2-.2-.51-.2-.71 0-.2.2-.2.51 0 .71l1.31 1.31C6.97 3.26 6 5.01 6 7h12c0-1.99-.97-3.75-2.47-4.84zM10 5H9V4h1v1zm5 0h-1V4h1v1z" /></g>
<g id="announcement"><path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-7 9h-2V5h2v6zm0 4h-2v-2h2v2z" /></g>
<g id="apps"><path d="M4 8h4V4H4v4zm6 12h4v-4h-4v4zm-6 0h4v-4H4v4zm0-6h4v-4H4v4zm6 0h4v-4h-4v4zm6-10v4h4V4h-4zm-6 4h4V4h-4v4zm6 6h4v-4h-4v4zm0 6h4v-4h-4v4z" /></g>
<g id="archive"><path d="M20.54 5.23l-1.39-1.68C18.88 3.21 18.47 3 18 3H6c-.47 0-.88.21-1.16.55L3.46 5.23C3.17 5.57 3 6.02 3 6.5V19c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V6.5c0-.48-.17-.93-.46-1.27zM12 17.5L6.5 12H10v-2h4v2h3.5L12 17.5zM5.12 5l.81-1h12l.94 1H5.12z" /></g>
<g id="arrow-back"><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z" /></g>
<g id="arrow-downward"><path d="M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z" /></g>
<g id="arrow-drop-down"><path d="M7 10l5 5 5-5z" /></g>
<g id="arrow-drop-down-circle"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 12l-4-4h8l-4 4z" /></g>
<g id="arrow-drop-up"><path d="M7 14l5-5 5 5z" /></g>
<g id="arrow-forward"><path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z" /></g>
<g id="arrow-upward"><path d="M4 12l1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z" /></g>
<g id="aspect-ratio"><path d="M19 12h-2v3h-3v2h5v-5zM7 9h3V7H5v5h2V9zm14-6H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16.01H3V4.99h18v14.02z" /></g>
<g id="assessment"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z" /></g>
<g id="assignment"><path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm2 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z" /></g>
<g id="assignment-ind"><path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm0 4c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm6 12H6v-1.4c0-2 4-3.1 6-3.1s6 1.1 6 3.1V19z" /></g>
<g id="assignment-late"><path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-6 15h-2v-2h2v2zm0-4h-2V8h2v6zm-1-9c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1z" /></g>
<g id="assignment-return"><path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm4 12h-4v3l-5-5 5-5v3h4v4z" /></g>
<g id="assignment-returned"><path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm0 15l-5-5h3V9h4v4h3l-5 5z" /></g>
<g id="assignment-turned-in"><path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm-2 14l-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9l-8 8z" /></g>
<g id="attachment"><path d="M2 12.5C2 9.46 4.46 7 7.5 7H18c2.21 0 4 1.79 4 4s-1.79 4-4 4H9.5C8.12 15 7 13.88 7 12.5S8.12 10 9.5 10H17v2H9.41c-.55 0-.55 1 0 1H18c1.1 0 2-.9 2-2s-.9-2-2-2H7.5C5.57 9 4 10.57 4 12.5S5.57 16 7.5 16H17v2H7.5C4.46 18 2 15.54 2 12.5z" /></g>
<g id="autorenew"><path d="M12 6v3l4-4-4-4v3c-4.42 0-8 3.58-8 8 0 1.57.46 3.03 1.24 4.26L6.7 14.8c-.45-.83-.7-1.79-.7-2.8 0-3.31 2.69-6 6-6zm6.76 1.74L17.3 9.2c.44.84.7 1.79.7 2.8 0 3.31-2.69 6-6 6v-3l-4 4 4 4v-3c4.42 0 8-3.58 8-8 0-1.57-.46-3.03-1.24-4.26z" /></g>
<g id="backspace"><path d="M22 3H7c-.69 0-1.23.35-1.59.88L0 12l5.41 8.11c.36.53.9.89 1.59.89h15c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-3 12.59L17.59 17 14 13.41 10.41 17 9 15.59 12.59 12 9 8.41 10.41 7 14 10.59 17.59 7 19 8.41 15.41 12 19 15.59z" /></g>
<g id="backup"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z" /></g>
<g id="block"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM4 12c0-4.42 3.58-8 8-8 1.85 0 3.55.63 4.9 1.69L5.69 16.9C4.63 15.55 4 13.85 4 12zm8 8c-1.85 0-3.55-.63-4.9-1.69L18.31 7.1C19.37 8.45 20 10.15 20 12c0 4.42-3.58 8-8 8z" /></g>
<g id="book"><path d="M18 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 4h5v8l-2.5-1.5L6 12V4z" /></g>
<g id="bookmark"><path d="M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2z" /></g>
<g id="bookmark-border"><path d="M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2zm0 15l-5-2.18L7 18V5h10v13z" /></g>
<g id="bug-report"><path d="M20 8h-2.81c-.45-.78-1.07-1.45-1.82-1.96L17 4.41 15.59 3l-2.17 2.17C12.96 5.06 12.49 5 12 5c-.49 0-.96.06-1.41.17L8.41 3 7 4.41l1.62 1.63C7.88 6.55 7.26 7.22 6.81 8H4v2h2.09c-.05.33-.09.66-.09 1v1H4v2h2v1c0 .34.04.67.09 1H4v2h2.81c1.04 1.79 2.97 3 5.19 3s4.15-1.21 5.19-3H20v-2h-2.09c.05-.33.09-.66.09-1v-1h2v-2h-2v-1c0-.34-.04-.67-.09-1H20V8zm-6 8h-4v-2h4v2zm0-4h-4v-2h4v2z" /></g>
<g id="build"><path d="M22.7 19l-9.1-9.1c.9-2.3.4-5-1.5-6.9-2-2-5-2.4-7.4-1.3L9 6 6 9 1.6 4.7C.4 7.1.9 10.1 2.9 12.1c1.9 1.9 4.6 2.4 6.9 1.5l9.1 9.1c.4.4 1 .4 1.4 0l2.3-2.3c.5-.4.5-1.1.1-1.4z" /></g>
<g id="cached"><path d="M19 8l-4 4h3c0 3.31-2.69 6-6 6-1.01 0-1.97-.25-2.8-.7l-1.46 1.46C8.97 19.54 10.43 20 12 20c4.42 0 8-3.58 8-8h3l-4-4zM6 12c0-3.31 2.69-6 6-6 1.01 0 1.97.25 2.8.7l1.46-1.46C15.03 4.46 13.57 4 12 4c-4.42 0-8 3.58-8 8H1l4 4 4-4H6z" /></g>
<g id="camera-enhance"><path d="M9 3L7.17 5H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2h-3.17L15 3H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-1l1.25-2.75L16 13l-2.75-1.25L12 9l-1.25 2.75L8 13l2.75 1.25z" /></g>
<g id="cancel"><path d="M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z" /></g>
<g id="card-giftcard"><path d="M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 11 8.76l1-1.36 1 1.36L15.38 12 17 10.83 14.92 8H20v6z" /></g>
<g id="card-membership"><path d="M20 2H4c-1.11 0-2 .89-2 2v11c0 1.11.89 2 2 2h4v5l4-2 4 2v-5h4c1.11 0 2-.89 2-2V4c0-1.11-.89-2-2-2zm0 13H4v-2h16v2zm0-5H4V4h16v6z" /></g>
<g id="card-travel"><path d="M20 6h-3V4c0-1.11-.89-2-2-2H9c-1.11 0-2 .89-2 2v2H4c-1.11 0-2 .89-2 2v11c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zM9 4h6v2H9V4zm11 15H4v-2h16v2zm0-5H4V8h3v2h2V8h6v2h2V8h3v6z" /></g>
<g id="change-history"><path d="M12 7.77L18.39 18H5.61L12 7.77M12 4L2 20h20L12 4z" /></g>
<g id="check"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z" /></g>
<g id="check-box"><path d="M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z" /></g>
<g id="check-box-outline-blank"><path d="M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z" /></g>
<g id="check-circle"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z" /></g>
<g id="chevron-left"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z" /></g>
<g id="chevron-right"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z" /></g>
<g id="chrome-reader-mode"><path d="M13 12h7v1.5h-7zm0-2.5h7V11h-7zm0 5h7V16h-7zM21 4H3c-1.1 0-2 .9-2 2v13c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 15h-9V6h9v13z" /></g>
<g id="class"><path d="M18 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 4h5v8l-2.5-1.5L6 12V4z" /></g>
<g id="clear"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" /></g>
<g id="close"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" /></g>
<g id="cloud"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96z" /></g>
<g id="cloud-circle"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm4.5 14H8c-1.66 0-3-1.34-3-3s1.34-3 3-3l.14.01C8.58 8.28 10.13 7 12 7c2.21 0 4 1.79 4 4h.5c1.38 0 2.5 1.12 2.5 2.5S17.88 16 16.5 16z" /></g>
<g id="cloud-done"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM10 17l-3.5-3.5 1.41-1.41L10 14.17 15.18 9l1.41 1.41L10 17z" /></g>
<g id="cloud-download"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM17 13l-5 5-5-5h3V9h4v4h3z" /></g>
<g id="cloud-off"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4c-1.48 0-2.85.43-4.01 1.17l1.46 1.46C10.21 6.23 11.08 6 12 6c3.04 0 5.5 2.46 5.5 5.5v.5H19c1.66 0 3 1.34 3 3 0 1.13-.64 2.11-1.56 2.62l1.45 1.45C23.16 18.16 24 16.68 24 15c0-2.64-2.05-4.78-4.65-4.96zM3 5.27l2.75 2.74C2.56 8.15 0 10.77 0 14c0 3.31 2.69 6 6 6h11.73l2 2L21 20.73 4.27 4 3 5.27zM7.73 10l8 8H6c-2.21 0-4-1.79-4-4s1.79-4 4-4h1.73z" /></g>
<g id="cloud-queue"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM19 18H6c-2.21 0-4-1.79-4-4s1.79-4 4-4h.71C7.37 7.69 9.48 6 12 6c3.04 0 5.5 2.46 5.5 5.5v.5H19c1.66 0 3 1.34 3 3s-1.34 3-3 3z" /></g>
<g id="cloud-upload"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z" /></g>
<g id="code"><path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z" /></g>
<g id="compare-arrows"><path d="M9.01 14H2v2h7.01v3L13 15l-3.99-4v3zm5.98-1v-3H22V8h-7.01V5L11 9l3.99 4z" /></g>
<g id="content-copy"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z" /></g>
<g id="content-cut"><path d="M9.64 7.64c.23-.5.36-1.05.36-1.64 0-2.21-1.79-4-4-4S2 3.79 2 6s1.79 4 4 4c.59 0 1.14-.13 1.64-.36L10 12l-2.36 2.36C7.14 14.13 6.59 14 6 14c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4c0-.59-.13-1.14-.36-1.64L12 14l7 7h3v-1L9.64 7.64zM6 8c-1.1 0-2-.89-2-2s.9-2 2-2 2 .89 2 2-.9 2-2 2zm0 12c-1.1 0-2-.89-2-2s.9-2 2-2 2 .89 2 2-.9 2-2 2zm6-7.5c-.28 0-.5-.22-.5-.5s.22-.5.5-.5.5.22.5.5-.22.5-.5.5zM19 3l-6 6 2 2 7-7V3z" /></g>
<g id="content-paste"><path d="M19 2h-4.18C14.4.84 13.3 0 12 0c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm7 18H5V4h2v3h10V4h2v16z" /></g>
<g id="copyright"><path d="M10.08 10.86c.05-.33.16-.62.3-.87s.34-.46.59-.62c.24-.15.54-.22.91-.23.23.01.44.05.63.13.2.09.38.21.52.36s.25.33.34.53.13.42.14.64h1.79c-.02-.47-.11-.9-.28-1.29s-.4-.73-.7-1.01-.66-.5-1.08-.66-.88-.23-1.39-.23c-.65 0-1.22.11-1.7.34s-.88.53-1.2.92-.56.84-.71 1.36S8 11.29 8 11.87v.27c0 .58.08 1.12.23 1.64s.39.97.71 1.35.72.69 1.2.91 1.05.34 1.7.34c.47 0 .91-.08 1.32-.23s.77-.36 1.08-.63.56-.58.74-.94.29-.74.3-1.15h-1.79c-.01.21-.06.4-.15.58s-.21.33-.36.46-.32.23-.52.3c-.19.07-.39.09-.6.1-.36-.01-.66-.08-.89-.23-.25-.16-.45-.37-.59-.62s-.25-.55-.3-.88-.08-.67-.08-1v-.27c0-.35.03-.68.08-1.01zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z" /></g>
<g id="create"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z" /></g>
<g id="create-new-folder"><path d="M20 6h-8l-2-2H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-1 8h-3v3h-2v-3h-3v-2h3V9h2v3h3v2z" /></g>
<g id="credit-card"><path d="M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2zm0 14H4v-6h16v6zm0-10H4V6h16v2z" /></g>
<g id="dashboard"><path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z" /></g>
<g id="date-range"><path d="M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z" /></g>
<g id="delete"><path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z" /></g>
<g id="description"><path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z" /></g>
<g id="dns"><path d="M20 13H4c-.55 0-1 .45-1 1v6c0 .55.45 1 1 1h16c.55 0 1-.45 1-1v-6c0-.55-.45-1-1-1zM7 19c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zM20 3H4c-.55 0-1 .45-1 1v6c0 .55.45 1 1 1h16c.55 0 1-.45 1-1V4c0-.55-.45-1-1-1zM7 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z" /></g>
<g id="done"><path d="M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z" /></g>
<g id="done-all"><path d="M18 7l-1.41-1.41-6.34 6.34 1.41 1.41L18 7zm4.24-1.41L11.66 16.17 7.48 12l-1.41 1.41L11.66 19l12-12-1.42-1.41zM.41 13.41L6 19l1.41-1.41L1.83 12 .41 13.41z" /></g>
<g id="donut-large"><path d="M11 5.08V2c-5 .5-9 4.81-9 10s4 9.5 9 10v-3.08c-3-.48-6-3.4-6-6.92s3-6.44 6-6.92zM18.97 11H22c-.47-5-4-8.53-9-9v3.08C16 5.51 18.54 8 18.97 11zM13 18.92V22c5-.47 8.53-4 9-9h-3.03c-.43 3-2.97 5.49-5.97 5.92z" /></g>
<g id="donut-small"><path d="M11 9.16V2c-5 .5-9 4.79-9 10s4 9.5 9 10v-7.16c-1-.41-2-1.52-2-2.84s1-2.43 2-2.84zM14.86 11H22c-.48-4.75-4-8.53-9-9v7.16c1 .3 1.52.98 1.86 1.84zM13 14.84V22c5-.47 8.52-4.25 9-9h-7.14c-.34.86-.86 1.54-1.86 1.84z" /></g>
<g id="drafts"><path d="M21.99 8c0-.72-.37-1.35-.94-1.7L12 1 2.95 6.3C2.38 6.65 2 7.28 2 8v10c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2l-.01-10zM12 13L3.74 7.84 12 3l8.26 4.84L12 13z" /></g>
<g id="eject"><path d="M5 17h14v2H5zm7-12L5.33 15h13.34z" /></g>
<g id="error"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z" /></g>
<g id="error-outline"><path d="M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z" /></g>
<g id="event"><path d="M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z" /></g>
<g id="event-seat"><path d="M4 18v3h3v-3h10v3h3v-6H4zm15-8h3v3h-3zM2 10h3v3H2zm15 3H7V5c0-1.1.9-2 2-2h6c1.1 0 2 .9 2 2v8z" /></g>
<g id="exit-to-app"><path d="M10.09 15.59L11.5 17l5-5-5-5-1.41 1.41L12.67 11H3v2h9.67l-2.58 2.59zM19 3H5c-1.11 0-2 .9-2 2v4h2V5h14v14H5v-4H3v4c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z" /></g>
<g id="expand-less"><path d="M12 8l-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z" /></g>
<g id="expand-more"><path d="M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z" /></g>
<g id="explore"><path d="M12 10.9c-.61 0-1.1.49-1.1 1.1s.49 1.1 1.1 1.1c.61 0 1.1-.49 1.1-1.1s-.49-1.1-1.1-1.1zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm2.19 12.19L6 18l3.81-8.19L18 6l-3.81 8.19z" /></g>
<g id="extension"><path d="M20.5 11H19V7c0-1.1-.9-2-2-2h-4V3.5C13 2.12 11.88 1 10.5 1S8 2.12 8 3.5V5H4c-1.1 0-1.99.9-1.99 2v3.8H3.5c1.49 0 2.7 1.21 2.7 2.7s-1.21 2.7-2.7 2.7H2V20c0 1.1.9 2 2 2h3.8v-1.5c0-1.49 1.21-2.7 2.7-2.7 1.49 0 2.7 1.21 2.7 2.7V22H17c1.1 0 2-.9 2-2v-4h1.5c1.38 0 2.5-1.12 2.5-2.5S21.88 11 20.5 11z" /></g>
<g id="face"><path d="M9 11.75c-.69 0-1.25.56-1.25 1.25s.56 1.25 1.25 1.25 1.25-.56 1.25-1.25-.56-1.25-1.25-1.25zm6 0c-.69 0-1.25.56-1.25 1.25s.56 1.25 1.25 1.25 1.25-.56 1.25-1.25-.56-1.25-1.25-1.25zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8 0-.29.02-.58.05-.86 2.36-1.05 4.23-2.98 5.21-5.37C11.07 8.33 14.05 10 17.42 10c.78 0 1.53-.09 2.25-.26.21.71.33 1.47.33 2.26 0 4.41-3.59 8-8 8z" /></g>
<g id="favorite"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" /></g>
<g id="favorite-border"><path d="M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3zm-4.4 15.55l-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05z" /></g>
<g id="feedback"><path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-7 12h-2v-2h2v2zm0-4h-2V6h2v4z" /></g>
<g id="file-download"><path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z" /></g>
<g id="file-upload"><path d="M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z" /></g>
<g id="filter-list"><path d="M10 18h4v-2h-4v2zM3 6v2h18V6H3zm3 7h12v-2H6v2z" /></g>
<g id="find-in-page"><path d="M20 19.59V8l-6-6H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c.45 0 .85-.15 1.19-.4l-4.43-4.43c-.8.52-1.74.83-2.76.83-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5c0 1.02-.31 1.96-.83 2.75L20 19.59zM9 13c0 1.66 1.34 3 3 3s3-1.34 3-3-1.34-3-3-3-3 1.34-3 3z" /></g>
<g id="find-replace"><path d="M11 6c1.38 0 2.63.56 3.54 1.46L12 10h6V4l-2.05 2.05C14.68 4.78 12.93 4 11 4c-3.53 0-6.43 2.61-6.92 6H6.1c.46-2.28 2.48-4 4.9-4zm5.64 9.14c.66-.9 1.12-1.97 1.28-3.14H15.9c-.46 2.28-2.48 4-4.9 4-1.38 0-2.63-.56-3.54-1.46L10 12H4v6l2.05-2.05C7.32 17.22 9.07 18 11 18c1.55 0 2.98-.51 4.14-1.36L20 21.49 21.49 20l-4.85-4.86z" /></g>
<g id="fingerprint"><path d="M17.81 4.47c-.08 0-.16-.02-.23-.06C15.66 3.42 14 3 12.01 3c-1.98 0-3.86.47-5.57 1.41-.24.13-.54.04-.68-.2-.13-.24-.04-.55.2-.68C7.82 2.52 9.86 2 12.01 2c2.13 0 3.99.47 6.03 1.52.25.13.34.43.21.67-.09.18-.26.28-.44.28zM3.5 9.72c-.1 0-.2-.03-.29-.09-.23-.16-.28-.47-.12-.7.99-1.4 2.25-2.5 3.75-3.27C9.98 4.04 14 4.03 17.15 5.65c1.5.77 2.76 1.86 3.75 3.25.16.22.11.54-.12.7-.23.16-.54.11-.7-.12-.9-1.26-2.04-2.25-3.39-2.94-2.87-1.47-6.54-1.47-9.4.01-1.36.7-2.5 1.7-3.4 2.96-.08.14-.23.21-.39.21zm6.25 12.07c-.13 0-.26-.05-.35-.15-.87-.87-1.34-1.43-2.01-2.64-.69-1.23-1.05-2.73-1.05-4.34 0-2.97 2.54-5.39 5.66-5.39s5.66 2.42 5.66 5.39c0 .28-.22.5-.5.5s-.5-.22-.5-.5c0-2.42-2.09-4.39-4.66-4.39-2.57 0-4.66 1.97-4.66 4.39 0 1.44.32 2.77.93 3.85.64 1.15 1.08 1.64 1.85 2.42.19.2.19.51 0 .71-.11.1-.24.15-.37.15zm7.17-1.85c-1.19 0-2.24-.3-3.1-.89-1.49-1.01-2.38-2.65-2.38-4.39 0-.28.22-.5.5-.5s.5.22.5.5c0 1.41.72 2.74 1.94 3.56.71.48 1.54.71 2.54.71.24 0 .64-.03 1.04-.1.27-.05.53.13.58.41.05.27-.13.53-.41.58-.57.11-1.07.12-1.21.12zM14.91 22c-.04 0-.09-.01-.13-.02-1.59-.44-2.63-1.03-3.72-2.1-1.4-1.39-2.17-3.24-2.17-5.22 0-1.62 1.38-2.94 3.08-2.94 1.7 0 3.08 1.32 3.08 2.94 0 1.07.93 1.94 2.08 1.94s2.08-.87 2.08-1.94c0-3.77-3.25-6.83-7.25-6.83-2.84 0-5.44 1.58-6.61 4.03-.39.81-.59 1.76-.59 2.8 0 .78.07 2.01.67 3.61.1.26-.03.55-.29.64-.26.1-.55-.04-.64-.29-.49-1.31-.73-2.61-.73-3.96 0-1.2.23-2.29.68-3.24 1.33-2.79 4.28-4.6 7.51-4.6 4.55 0 8.25 3.51 8.25 7.83 0 1.62-1.38 2.94-3.08 2.94s-3.08-1.32-3.08-2.94c0-1.07-.93-1.94-2.08-1.94s-2.08.87-2.08 1.94c0 1.71.66 3.31 1.87 4.51.95.94 1.86 1.46 3.27 1.85.27.07.42.35.35.61-.05.23-.26.38-.47.38z" /></g>
<g id="flag"><path d="M14.4 6L14 4H5v17h2v-7h5.6l.4 2h7V6z" /></g>
<g id="flight-land"><path d="M2.5 19h19v2h-19zm7.18-5.73l4.35 1.16 5.31 1.42c.8.21 1.62-.26 1.84-1.06.21-.8-.26-1.62-1.06-1.84l-5.31-1.42-2.76-9.02L10.12 2v8.28L5.15 8.95l-.93-2.32-1.45-.39v5.17l1.6.43 5.31 1.43z" /></g>
<g id="flight-takeoff"><path d="M2.5 19h19v2h-19zm19.57-9.36c-.21-.8-1.04-1.28-1.84-1.06L14.92 10l-6.9-6.43-1.93.51 4.14 7.17-4.97 1.33-1.97-1.54-1.45.39 1.82 3.16.77 1.33 1.6-.43 5.31-1.42 4.35-1.16L21 11.49c.81-.23 1.28-1.05 1.07-1.85z" /></g>
<g id="flip-to-back"><path d="M9 7H7v2h2V7zm0 4H7v2h2v-2zm0-8c-1.11 0-2 .9-2 2h2V3zm4 12h-2v2h2v-2zm6-12v2h2c0-1.1-.9-2-2-2zm-6 0h-2v2h2V3zM9 17v-2H7c0 1.1.89 2 2 2zm10-4h2v-2h-2v2zm0-4h2V7h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2zM5 7H3v12c0 1.1.89 2 2 2h12v-2H5V7zm10-2h2V3h-2v2zm0 12h2v-2h-2v2z" /></g>
<g id="flip-to-front"><path d="M3 13h2v-2H3v2zm0 4h2v-2H3v2zm2 4v-2H3c0 1.1.89 2 2 2zM3 9h2V7H3v2zm12 12h2v-2h-2v2zm4-18H9c-1.11 0-2 .9-2 2v10c0 1.1.89 2 2 2h10c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 12H9V5h10v10zm-8 6h2v-2h-2v2zm-4 0h2v-2H7v2z" /></g>
<g id="folder"><path d="M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z" /></g>
<g id="folder-open"><path d="M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm0 12H4V8h16v10z" /></g>
<g id="folder-shared"><path d="M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm-5 3c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zm4 8h-8v-1c0-1.33 2.67-2 4-2s4 .67 4 2v1z" /></g>
<g id="font-download"><path d="M9.93 13.5h4.14L12 7.98zM20 2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-4.05 16.5l-1.14-3H9.17l-1.12 3H5.96l5.11-13h1.86l5.11 13h-2.09z" /></g>
<g id="forward"><path d="M12 8V4l8 8-8 8v-4H4V8z" /></g>
<g id="fullscreen"><path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z" /></g>
<g id="fullscreen-exit"><path d="M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z" /></g>
<g id="gavel"><path d="M1 21h12v2H1zM5.245 8.07l2.83-2.827 14.14 14.142-2.828 2.828zM12.317 1l5.657 5.656-2.83 2.83-5.654-5.66zM3.825 9.485l5.657 5.657-2.828 2.828-5.657-5.657z" /></g>
<g id="gesture"><path d="M4.59 6.89c.7-.71 1.4-1.35 1.71-1.22.5.2 0 1.03-.3 1.52-.25.42-2.86 3.89-2.86 6.31 0 1.28.48 2.34 1.34 2.98.75.56 1.74.73 2.64.46 1.07-.31 1.95-1.4 3.06-2.77 1.21-1.49 2.83-3.44 4.08-3.44 1.63 0 1.65 1.01 1.76 1.79-3.78.64-5.38 3.67-5.38 5.37 0 1.7 1.44 3.09 3.21 3.09 1.63 0 4.29-1.33 4.69-6.1H21v-2.5h-2.47c-.15-1.65-1.09-4.2-4.03-4.2-2.25 0-4.18 1.91-4.94 2.84-.58.73-2.06 2.48-2.29 2.72-.25.3-.68.84-1.11.84-.45 0-.72-.83-.36-1.92.35-1.09 1.4-2.86 1.85-3.52.78-1.14 1.3-1.92 1.3-3.28C8.95 3.69 7.31 3 6.44 3 5.12 3 3.97 4 3.72 4.25c-.36.36-.66.66-.88.93l1.75 1.71zm9.29 11.66c-.31 0-.74-.26-.74-.72 0-.6.73-2.2 2.87-2.76-.3 2.69-1.43 3.48-2.13 3.48z" /></g>
<g id="get-app"><path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z" /></g>
<g id="gif"><path d="M11.5 9H13v6h-1.5zM9 9H6c-.6 0-1 .5-1 1v4c0 .5.4 1 1 1h3c.6 0 1-.5 1-1v-2H8.5v1.5h-2v-3H10V10c0-.5-.4-1-1-1zm10 1.5V9h-4.5v6H16v-2h2v-1.5h-2v-1z" /></g>
<g id="grade"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z" /></g>
<g id="group-work"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM8 17.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5zM9.5 8c0-1.38 1.12-2.5 2.5-2.5s2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5S9.5 9.38 9.5 8zm6.5 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z" /></g>
<g id="help"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z" /></g>
<g id="help-outline"><path d="M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z" /></g>
<g id="highlight-off"><path d="M14.59 8L12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41 14.59 8zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z" /></g>
<g id="history"><path d="M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z" /></g>
<g id="home"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z" /></g>
<g id="hourglass-empty"><path d="M6 2v6h.01L6 8.01 10 12l-4 4 .01.01H6V22h12v-5.99h-.01L18 16l-4-4 4-3.99-.01-.01H18V2H6zm10 14.5V20H8v-3.5l4-4 4 4zm-4-5l-4-4V4h8v3.5l-4 4z" /></g>
<g id="hourglass-full"><path d="M6 2v6h.01L6 8.01 10 12l-4 4 .01.01H6V22h12v-5.99h-.01L18 16l-4-4 4-3.99-.01-.01H18V2H6z" /></g>
<g id="http"><path d="M4.5 11h-2V9H1v6h1.5v-2.5h2V15H6V9H4.5v2zm2.5-.5h1.5V15H10v-4.5h1.5V9H7v1.5zm5.5 0H14V15h1.5v-4.5H17V9h-4.5v1.5zm9-1.5H18v6h1.5v-2h2c.8 0 1.5-.7 1.5-1.5v-1c0-.8-.7-1.5-1.5-1.5zm0 2.5h-2v-1h2v1z" /></g>
<g id="https"><path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z" /></g>
<g id="important-devices"><path d="M23 11.01L18 11c-.55 0-1 .45-1 1v9c0 .55.45 1 1 1h5c.55 0 1-.45 1-1v-9c0-.55-.45-.99-1-.99zM23 20h-5v-7h5v7zM20 2H2C.89 2 0 2.89 0 4v12c0 1.1.89 2 2 2h7v2H7v2h8v-2h-2v-2h2v-2H2V4h18v5h2V4c0-1.11-.9-2-2-2zm-8.03 7L11 6l-.97 3H7l2.47 1.76-.94 2.91 2.47-1.8 2.47 1.8-.94-2.91L15 9h-3.03z" /></g>
<g id="inbox"><path d="M19 3H4.99c-1.11 0-1.98.89-1.98 2L3 19c0 1.1.88 2 1.99 2H19c1.1 0 2-.9 2-2V5c0-1.11-.9-2-2-2zm0 12h-4c0 1.66-1.35 3-3 3s-3-1.34-3-3H4.99V5H19v10z" /></g>
<g id="indeterminate-check-box"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z" /></g>
<g id="info"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z" /></g>
<g id="info-outline"><path d="M11 17h2v-6h-2v6zm1-15C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zM11 9h2V7h-2v2z" /></g>
<g id="input"><path d="M21 3.01H3c-1.1 0-2 .9-2 2V9h2V4.99h18v14.03H3V15H1v4.01c0 1.1.9 1.98 2 1.98h18c1.1 0 2-.88 2-1.98v-14c0-1.11-.9-2-2-2zM11 16l4-4-4-4v3H1v2h10v3z" /></g>
<g id="invert-colors"><path d="M17.66 7.93L12 2.27 6.34 7.93c-3.12 3.12-3.12 8.19 0 11.31C7.9 20.8 9.95 21.58 12 21.58c2.05 0 4.1-.78 5.66-2.34 3.12-3.12 3.12-8.19 0-11.31zM12 19.59c-1.6 0-3.11-.62-4.24-1.76C6.62 16.69 6 15.19 6 13.59s.62-3.11 1.76-4.24L12 5.1v14.49z" /></g>
<g id="label"><path d="M17.63 5.84C17.27 5.33 16.67 5 16 5L5 5.01C3.9 5.01 3 5.9 3 7v10c0 1.1.9 1.99 2 1.99L16 19c.67 0 1.27-.33 1.63-.84L22 12l-4.37-6.16z" /></g>
<g id="label-outline"><path d="M17.63 5.84C17.27 5.33 16.67 5 16 5L5 5.01C3.9 5.01 3 5.9 3 7v10c0 1.1.9 1.99 2 1.99L16 19c.67 0 1.27-.33 1.63-.84L22 12l-4.37-6.16zM16 17H5V7h11l3.55 5L16 17z" /></g>
<g id="language"><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm6.93 6h-2.95c-.32-1.25-.78-2.45-1.38-3.56 1.84.63 3.37 1.91 4.33 3.56zM12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96zM4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2H4.26zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56-1.84-.63-3.37-1.9-4.33-3.56zm2.95-8H5.08c.96-1.66 2.49-2.93 4.33-3.56C8.81 5.55 8.35 6.75 8.03 8zM12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96zM14.34 14H9.66c-.09-.66-.16-1.32-.16-2 0-.68.07-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2zm.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95c-.96 1.65-2.49 2.93-4.33 3.56zM16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2h-3.38z" /></g>
<g id="launch"><path d="M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z" /></g>
<g id="lightbulb-outline"><path d="M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7zm2.85 11.1l-.85.6V16h-4v-2.3l-.85-.6C7.8 12.16 7 10.63 7 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 1.63-.8 3.16-2.15 4.1z" /></g>
<g id="line-style"><path d="M3 16h5v-2H3v2zm6.5 0h5v-2h-5v2zm6.5 0h5v-2h-5v2zM3 20h2v-2H3v2zm4 0h2v-2H7v2zm4 0h2v-2h-2v2zm4 0h2v-2h-2v2zm4 0h2v-2h-2v2zM3 12h8v-2H3v2zm10 0h8v-2h-8v2zM3 4v4h18V4H3z" /></g>
<g id="line-weight"><path d="M3 17h18v-2H3v2zm0 3h18v-1H3v1zm0-7h18v-3H3v3zm0-9v4h18V4H3z" /></g>
<g id="link"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z" /></g>
<g id="list"><path d="M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zM7 7v2h14V7H7z" /></g>
<g id="lock"><path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z" /></g>
<g id="lock-open"><path d="M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h1.9c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm0 12H6V10h12v10z" /></g>
<g id="lock-outline"><path d="M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM8.9 6c0-1.71 1.39-3.1 3.1-3.1s3.1 1.39 3.1 3.1v2H8.9V6zM18 20H6V10h12v10z" /></g>
<g id="loyalty"><path d="M21.41 11.58l-9-9C12.05 2.22 11.55 2 11 2H4c-1.1 0-2 .9-2 2v7c0 .55.22 1.05.59 1.42l9 9c.36.36.86.58 1.41.58.55 0 1.05-.22 1.41-.59l7-7c.37-.36.59-.86.59-1.41 0-.55-.23-1.06-.59-1.42zM5.5 7C4.67 7 4 6.33 4 5.5S4.67 4 5.5 4 7 4.67 7 5.5 6.33 7 5.5 7zm11.77 8.27L13 19.54l-4.27-4.27C8.28 14.81 8 14.19 8 13.5c0-1.38 1.12-2.5 2.5-2.5.69 0 1.32.28 1.77.74l.73.72.73-.73c.45-.45 1.08-.73 1.77-.73 1.38 0 2.5 1.12 2.5 2.5 0 .69-.28 1.32-.73 1.77z" /></g>
<g id="mail"><path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z" /></g>
<g id="markunread"><path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z" /></g>
<g id="markunread-mailbox"><path d="M20 6H10v6H8V4h6V0H6v6H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2z" /></g>
<g id="menu"><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z" /></g>
<g id="more-horiz"><path d="M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z" /></g>
<g id="more-vert"><path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z" /></g>
<g id="motorcycle"><path d="M19.44 9.03L15.41 5H11v2h3.59l2 2H5c-2.8 0-5 2.2-5 5s2.2 5 5 5c2.46 0 4.45-1.69 4.9-4h1.65l2.77-2.77c-.21.54-.32 1.14-.32 1.77 0 2.8 2.2 5 5 5s5-2.2 5-5c0-2.65-1.97-4.77-4.56-4.97zM7.82 15C7.4 16.15 6.28 17 5 17c-1.63 0-3-1.37-3-3s1.37-3 3-3c1.28 0 2.4.85 2.82 2H5v2h2.82zM19 17c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3z" /></g>
<g id="move-to-inbox"><path d="M19 3H4.99c-1.11 0-1.98.9-1.98 2L3 19c0 1.1.88 2 1.99 2H19c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 12h-4c0 1.66-1.35 3-3 3s-3-1.34-3-3H4.99V5H19v10zm-3-5h-2V7h-4v3H8l4 4 4-4z" /></g>
<g id="next-week"><path d="M20 7h-4V5c0-.55-.22-1.05-.59-1.41C15.05 3.22 14.55 3 14 3h-4c-1.1 0-2 .9-2 2v2H4c-1.1 0-2 .9-2 2v11c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V9c0-1.1-.9-2-2-2zM10 5h4v2h-4V5zm1 13.5l-1-1 3-3-3-3 1-1 4 4-4 4z" /></g>
<g id="note-add"><path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 14h-3v3h-2v-3H8v-2h3v-3h2v3h3v2zm-3-7V3.5L18.5 9H13z" /></g>
<g id="offline-pin"><path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2zm5 16H7v-2h10v2zm-6.7-4L7 10.7l1.4-1.4 1.9 1.9 5.3-5.3L17 7.3 10.3 14z" /></g>
<g id="opacity"><path d="M17.66 8L12 2.35 6.34 8C4.78 9.56 4 11.64 4 13.64s.78 4.11 2.34 5.67 3.61 2.35 5.66 2.35 4.1-.79 5.66-2.35S20 15.64 20 13.64 19.22 9.56 17.66 8zM6 14c.01-2 .62-3.27 1.76-4.4L12 5.27l4.24 4.38C17.38 10.77 17.99 12 18 14H6z" /></g>
<g id="open-in-browser"><path d="M19 4H5c-1.11 0-2 .9-2 2v12c0 1.1.89 2 2 2h4v-2H5V8h14v10h-4v2h4c1.1 0 2-.9 2-2V6c0-1.1-.89-2-2-2zm-7 6l-4 4h3v6h2v-6h3l-4-4z" /></g>
<g id="open-in-new"><path d="M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z" /></g>
<g id="open-with"><path d="M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z" /></g>
<g id="pageview"><path d="M11.5 9C10.12 9 9 10.12 9 11.5s1.12 2.5 2.5 2.5 2.5-1.12 2.5-2.5S12.88 9 11.5 9zM20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-3.21 14.21l-2.91-2.91c-.69.44-1.51.7-2.39.7C9.01 16 7 13.99 7 11.5S9.01 7 11.5 7 16 9.01 16 11.5c0 .88-.26 1.69-.7 2.39l2.91 2.9-1.42 1.42z" /></g>
<g id="pan-tool"><path d="M23 5.5V20c0 2.2-1.8 4-4 4h-7.3c-1.08 0-2.1-.43-2.85-1.19L1 14.83s1.26-1.23 1.3-1.25c.22-.19.49-.29.79-.29.22 0 .42.06.6.16.04.01 4.31 2.46 4.31 2.46V4c0-.83.67-1.5 1.5-1.5S11 3.17 11 4v7h1V1.5c0-.83.67-1.5 1.5-1.5S15 .67 15 1.5V11h1V2.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5V11h1V5.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5z" /></g>
<g id="payment"><path d="M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2zm0 14H4v-6h16v6zm0-10H4V6h16v2z" /></g>
<g id="perm-camera-mic"><path d="M20 5h-3.17L15 3H9L7.17 5H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h7v-2.09c-2.83-.48-5-2.94-5-5.91h2c0 2.21 1.79 4 4 4s4-1.79 4-4h2c0 2.97-2.17 5.43-5 5.91V21h7c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm-6 8c0 1.1-.9 2-2 2s-2-.9-2-2V9c0-1.1.9-2 2-2s2 .9 2 2v4z" /></g>
<g id="perm-contact-calendar"><path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm6 12H6v-1c0-2 4-3.1 6-3.1s6 1.1 6 3.1v1z" /></g>
<g id="perm-data-setting"><path d="M18.99 11.5c.34 0 .67.03 1 .07L20 0 0 20h11.56c-.04-.33-.07-.66-.07-1 0-4.14 3.36-7.5 7.5-7.5zm3.71 7.99c.02-.16.04-.32.04-.49 0-.17-.01-.33-.04-.49l1.06-.83c.09-.08.12-.21.06-.32l-1-1.73c-.06-.11-.19-.15-.31-.11l-1.24.5c-.26-.2-.54-.37-.85-.49l-.19-1.32c-.01-.12-.12-.21-.24-.21h-2c-.12 0-.23.09-.25.21l-.19 1.32c-.3.13-.59.29-.85.49l-1.24-.5c-.11-.04-.24 0-.31.11l-1 1.73c-.06.11-.04.24.06.32l1.06.83c-.02.16-.03.32-.03.49 0 .17.01.33.03.49l-1.06.83c-.09.08-.12.21-.06.32l1 1.73c.06.11.19.15.31.11l1.24-.5c.26.2.54.37.85.49l.19 1.32c.02.12.12.21.25.21h2c.12 0 .23-.09.25-.21l.19-1.32c.3-.13.59-.29.84-.49l1.25.5c.11.04.24 0 .31-.11l1-1.73c.06-.11.03-.24-.06-.32l-1.07-.83zm-3.71 1.01c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z" /></g>
<g id="perm-device-information"><path d="M13 7h-2v2h2V7zm0 4h-2v6h2v-6zm4-9.99L7 1c-1.1 0-2 .9-2 2v18c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V3c0-1.1-.9-1.99-2-1.99zM17 19H7V5h10v14z" /></g>
<g id="perm-identity"><path d="M12 5.9c1.16 0 2.1.94 2.1 2.1s-.94 2.1-2.1 2.1S9.9 9.16 9.9 8s.94-2.1 2.1-2.1m0 9c2.97 0 6.1 1.46 6.1 2.1v1.1H5.9V17c0-.64 3.13-2.1 6.1-2.1M12 4C9.79 4 8 5.79 8 8s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 9c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4z" /></g>
<g id="perm-media"><path d="M2 6H0v5h.01L0 20c0 1.1.9 2 2 2h18v-2H2V6zm20-2h-8l-2-2H6c-1.1 0-1.99.9-1.99 2L4 16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zM7 15l4.5-6 3.5 4.51 2.5-3.01L21 15H7z" /></g>
<g id="perm-phone-msg"><path d="M20 15.5c-1.25 0-2.45-.2-3.57-.57-.35-.11-.74-.03-1.02.24l-2.2 2.2c-2.83-1.44-5.15-3.75-6.59-6.58l2.2-2.21c.28-.27.36-.66.25-1.01C8.7 6.45 8.5 5.25 8.5 4c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1 0 9.39 7.61 17 17 17 .55 0 1-.45 1-1v-3.5c0-.55-.45-1-1-1zM12 3v10l3-3h6V3h-9z" /></g>
<g id="perm-scan-wifi"><path d="M12 3C6.95 3 3.15 4.85 0 7.23L12 22 24 7.25C20.85 4.87 17.05 3 12 3zm1 13h-2v-6h2v6zm-2-8V6h2v2h-2z" /></g>
<g id="pets"><circle cx="4.5" cy="9.5" r="2.5" /><circle cx="9" cy="5.5" r="2.5" /><circle cx="15" cy="5.5" r="2.5" /><circle cx="19.5" cy="9.5" r="2.5" /><path d="M17.34 14.86c-.87-1.02-1.6-1.89-2.48-2.91-.46-.54-1.05-1.08-1.75-1.32-.11-.04-.22-.07-.33-.09-.25-.04-.52-.04-.78-.04s-.53 0-.79.05c-.11.02-.22.05-.33.09-.7.24-1.28.78-1.75 1.32-.87 1.02-1.6 1.89-2.48 2.91-1.31 1.31-2.92 2.76-2.62 4.79.29 1.02 1.02 2.03 2.33 2.32.73.15 3.06-.44 5.54-.44h.18c2.48 0 4.81.58 5.54.44 1.31-.29 2.04-1.31 2.33-2.32.31-2.04-1.3-3.49-2.61-4.8z" /></g>
<g id="picture-in-picture"><path d="M19 7h-8v6h8V7zm2-4H3c-1.1 0-2 .9-2 2v14c0 1.1.9 1.98 2 1.98h18c1.1 0 2-.88 2-1.98V5c0-1.1-.9-2-2-2zm0 16.01H3V4.98h18v14.03z" /></g>
<g id="picture-in-picture-alt"><path d="M19 11h-8v6h8v-6zm4 8V4.98C23 3.88 22.1 3 21 3H3c-1.1 0-2 .88-2 1.98V19c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2zm-2 .02H3V4.97h18v14.05z" /></g>
<g id="play-for-work"><path d="M11 5v5.59H7.5l4.5 4.5 4.5-4.5H13V5h-2zm-5 9c0 3.31 2.69 6 6 6s6-2.69 6-6h-2c0 2.21-1.79 4-4 4s-4-1.79-4-4H6z" /></g>
<g id="polymer"><path d="M19 4h-4L7.11 16.63 4.5 12 9 4H5L.5 12 5 20h4l7.89-12.63L19.5 12 15 20h4l4.5-8z" /></g>
<g id="power-settings-new"><path d="M13 3h-2v10h2V3zm4.83 2.17l-1.42 1.42C17.99 7.86 19 9.81 19 12c0 3.87-3.13 7-7 7s-7-3.13-7-7c0-2.19 1.01-4.14 2.58-5.42L6.17 5.17C4.23 6.82 3 9.26 3 12c0 4.97 4.03 9 9 9s9-4.03 9-9c0-2.74-1.23-5.18-3.17-6.83z" /></g>
<g id="pregnant-woman"><path d="M9 4c0-1.11.89-2 2-2s2 .89 2 2-.89 2-2 2-2-.89-2-2zm7 9c-.01-1.34-.83-2.51-2-3 0-1.66-1.34-3-3-3s-3 1.34-3 3v7h2v5h3v-5h3v-4z" /></g>
<g id="print"><path d="M19 8H5c-1.66 0-3 1.34-3 3v6h4v4h12v-4h4v-6c0-1.66-1.34-3-3-3zm-3 11H8v-5h8v5zm3-7c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm-1-9H6v4h12V3z" /></g>
<g id="query-builder"><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z" /></g>
<g id="question-answer"><path d="M21 6h-2v9H6v2c0 .55.45 1 1 1h11l4 4V7c0-.55-.45-1-1-1zm-4 6V3c0-.55-.45-1-1-1H3c-.55 0-1 .45-1 1v14l4-4h10c.55 0 1-.45 1-1z" /></g>
<g id="radio-button-checked"><path d="M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm0-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z" /></g>
<g id="radio-button-unchecked"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z" /></g>
<g id="receipt"><path d="M18 17H6v-2h12v2zm0-4H6v-2h12v2zm0-4H6V7h12v2zM3 22l1.5-1.5L6 22l1.5-1.5L9 22l1.5-1.5L12 22l1.5-1.5L15 22l1.5-1.5L18 22l1.5-1.5L21 22V2l-1.5 1.5L18 2l-1.5 1.5L15 2l-1.5 1.5L12 2l-1.5 1.5L9 2 7.5 3.5 6 2 4.5 3.5 3 2v20z" /></g>
<g id="record-voice-over"><circle cx="9" cy="9" r="4" /><path d="M9 15c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4zm7.76-9.64l-1.68 1.69c.84 1.18.84 2.71 0 3.89l1.68 1.69c2.02-2.02 2.02-5.07 0-7.27zM20.07 2l-1.63 1.63c2.77 3.02 2.77 7.56 0 10.74L20.07 16c3.9-3.89 3.91-9.95 0-14z" /></g>
<g id="redeem"><path d="M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 11 8.76l1-1.36 1 1.36L15.38 12 17 10.83 14.92 8H20v6z" /></g>
<g id="redo"><path d="M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16c1.05-3.19 4.05-5.5 7.6-5.5 1.95 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6z" /></g>
<g id="refresh"><path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z" /></g>
<g id="remove"><path d="M19 13H5v-2h14v2z" /></g>
<g id="remove-circle"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11H7v-2h10v2z" /></g>
<g id="remove-circle-outline"><path d="M7 11v2h10v-2H7zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z" /></g>
<g id="reorder"><path d="M3 15h18v-2H3v2zm0 4h18v-2H3v2zm0-8h18V9H3v2zm0-6v2h18V5H3z" /></g>
<g id="reply"><path d="M10 9V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11z" /></g>
<g id="reply-all"><path d="M7 8V5l-7 7 7 7v-3l-4-4 4-4zm6 1V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11z" /></g>
<g id="report"><path d="M15.73 3H8.27L3 8.27v7.46L8.27 21h7.46L21 15.73V8.27L15.73 3zM12 17.3c-.72 0-1.3-.58-1.3-1.3 0-.72.58-1.3 1.3-1.3.72 0 1.3.58 1.3 1.3 0 .72-.58 1.3-1.3 1.3zm1-4.3h-2V7h2v6z" /></g>
<g id="report-problem"><path d="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z" /></g>
<g id="restore"><path d="M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z" /></g>
<g id="room"><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z" /></g>
<g id="rounded-corner"><path d="M19 19h2v2h-2v-2zm0-2h2v-2h-2v2zM3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm0-4h2V3H3v2zm4 0h2V3H7v2zm8 16h2v-2h-2v2zm-4 0h2v-2h-2v2zm4 0h2v-2h-2v2zm-8 0h2v-2H7v2zm-4 0h2v-2H3v2zM21 8c0-2.76-2.24-5-5-5h-5v2h5c1.65 0 3 1.35 3 3v5h2V8z" /></g>
<g id="rowing"><path d="M8.5 14.5L4 19l1.5 1.5L9 17h2l-2.5-2.5zM15 1c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 20.01L18 24l-2.99-3.01V19.5l-7.1-7.09c-.31.05-.61.07-.91.07v-2.16c1.66.03 3.61-.87 4.67-2.04l1.4-1.55c.19-.21.43-.38.69-.5.29-.14.62-.23.96-.23h.03C15.99 6.01 17 7.02 17 8.26v5.75c0 .84-.35 1.61-.92 2.16l-3.58-3.58v-2.27c-.63.52-1.43 1.02-2.29 1.39L16.5 18H18l3 3.01z" /></g>
<g id="save"><path d="M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z" /></g>
<g id="schedule"><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z" /></g>
<g id="search"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" /></g>
<g id="select-all"><path d="M3 5h2V3c-1.1 0-2 .9-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2c0-1.1-.9-2-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2zM7 17h10V7H7v10zm2-8h6v6H9V9z" /></g>
<g id="send"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z" /></g>
<g id="settings"><path d="M19.43 12.98c.04-.32.07-.64.07-.98s-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.3-.61-.22l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.23-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98s.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.23.09.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zM12 15.5c-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5 3.5 1.57 3.5 3.5-1.57 3.5-3.5 3.5z" /></g>
<g id="settings-applications"><path d="M12 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm7-7H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-1.75 9c0 .23-.02.46-.05.68l1.48 1.16c.13.11.17.3.08.45l-1.4 2.42c-.09.15-.27.21-.43.15l-1.74-.7c-.36.28-.76.51-1.18.69l-.26 1.85c-.03.17-.18.3-.35.3h-2.8c-.17 0-.32-.13-.35-.29l-.26-1.85c-.43-.18-.82-.41-1.18-.69l-1.74.7c-.16.06-.34 0-.43-.15l-1.4-2.42c-.09-.15-.05-.34.08-.45l1.48-1.16c-.03-.23-.05-.46-.05-.69 0-.23.02-.46.05-.68l-1.48-1.16c-.13-.11-.17-.3-.08-.45l1.4-2.42c.09-.15.27-.21.43-.15l1.74.7c.36-.28.76-.51 1.18-.69l.26-1.85c.03-.17.18-.3.35-.3h2.8c.17 0 .32.13.35.29l.26 1.85c.43.18.82.41 1.18.69l1.74-.7c.16-.06.34 0 .43.15l1.4 2.42c.09.15.05.34-.08.45l-1.48 1.16c.03.23.05.46.05.69z" /></g>
<g id="settings-backup-restore"><path d="M14 12c0-1.1-.9-2-2-2s-2 .9-2 2 .9 2 2 2 2-.9 2-2zm-2-9c-4.97 0-9 4.03-9 9H0l4 4 4-4H5c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.51 0-2.91-.49-4.06-1.3l-1.42 1.44C8.04 20.3 9.94 21 12 21c4.97 0 9-4.03 9-9s-4.03-9-9-9z" /></g>
<g id="settings-bluetooth"><path d="M11 24h2v-2h-2v2zm-4 0h2v-2H7v2zm8 0h2v-2h-2v2zm2.71-18.29L12 0h-1v7.59L6.41 3 5 4.41 10.59 10 5 15.59 6.41 17 11 12.41V20h1l5.71-5.71-4.3-4.29 4.3-4.29zM13 3.83l1.88 1.88L13 7.59V3.83zm1.88 10.46L13 16.17v-3.76l1.88 1.88z" /></g>
<g id="settings-brightness"><path d="M21 3H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16.01H3V4.99h18v14.02zM8 16h2.5l1.5 1.5 1.5-1.5H16v-2.5l1.5-1.5-1.5-1.5V8h-2.5L12 6.5 10.5 8H8v2.5L6.5 12 8 13.5V16zm4-7c1.66 0 3 1.34 3 3s-1.34 3-3 3V9z" /></g>
<g id="settings-cell"><path d="M7 24h2v-2H7v2zm4 0h2v-2h-2v2zm4 0h2v-2h-2v2zM16 .01L8 0C6.9 0 6 .9 6 2v16c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V2c0-1.1-.9-1.99-2-1.99zM16 16H8V4h8v12z" /></g>
<g id="settings-ethernet"><path d="M7.77 6.76L6.23 5.48.82 12l5.41 6.52 1.54-1.28L3.42 12l4.35-5.24zM7 13h2v-2H7v2zm10-2h-2v2h2v-2zm-6 2h2v-2h-2v2zm6.77-7.52l-1.54 1.28L20.58 12l-4.35 5.24 1.54 1.28L23.18 12l-5.41-6.52z" /></g>
<g id="settings-input-antenna"><path d="M12 5c-3.87 0-7 3.13-7 7h2c0-2.76 2.24-5 5-5s5 2.24 5 5h2c0-3.87-3.13-7-7-7zm1 9.29c.88-.39 1.5-1.26 1.5-2.29 0-1.38-1.12-2.5-2.5-2.5S9.5 10.62 9.5 12c0 1.02.62 1.9 1.5 2.29v3.3L7.59 21 9 22.41l3-3 3 3L16.41 21 13 17.59v-3.3zM12 1C5.93 1 1 5.93 1 12h2c0-4.97 4.03-9 9-9s9 4.03 9 9h2c0-6.07-4.93-11-11-11z" /></g>
<g id="settings-input-component"><path d="M5 2c0-.55-.45-1-1-1s-1 .45-1 1v4H1v6h6V6H5V2zm4 14c0 1.3.84 2.4 2 2.82V23h2v-4.18c1.16-.41 2-1.51 2-2.82v-2H9v2zm-8 0c0 1.3.84 2.4 2 2.82V23h2v-4.18C6.16 18.4 7 17.3 7 16v-2H1v2zM21 6V2c0-.55-.45-1-1-1s-1 .45-1 1v4h-2v6h6V6h-2zm-8-4c0-.55-.45-1-1-1s-1 .45-1 1v4H9v6h6V6h-2V2zm4 14c0 1.3.84 2.4 2 2.82V23h2v-4.18c1.16-.41 2-1.51 2-2.82v-2h-6v2z" /></g>
<g id="settings-input-composite"><path d="M5 2c0-.55-.45-1-1-1s-1 .45-1 1v4H1v6h6V6H5V2zm4 14c0 1.3.84 2.4 2 2.82V23h2v-4.18c1.16-.41 2-1.51 2-2.82v-2H9v2zm-8 0c0 1.3.84 2.4 2 2.82V23h2v-4.18C6.16 18.4 7 17.3 7 16v-2H1v2zM21 6V2c0-.55-.45-1-1-1s-1 .45-1 1v4h-2v6h6V6h-2zm-8-4c0-.55-.45-1-1-1s-1 .45-1 1v4H9v6h6V6h-2V2zm4 14c0 1.3.84 2.4 2 2.82V23h2v-4.18c1.16-.41 2-1.51 2-2.82v-2h-6v2z" /></g>
<g id="settings-input-hdmi"><path d="M18 7V4c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v3H5v6l3 6v3h8v-3l3-6V7h-1zM8 4h8v3h-2V5h-1v2h-2V5h-1v2H8V4z" /></g>
<g id="settings-input-svideo"><path d="M8 11.5c0-.83-.67-1.5-1.5-1.5S5 10.67 5 11.5 5.67 13 6.5 13 8 12.33 8 11.5zm7-5c0-.83-.67-1.5-1.5-1.5h-3C9.67 5 9 5.67 9 6.5S9.67 8 10.5 8h3c.83 0 1.5-.67 1.5-1.5zM8.5 15c-.83 0-1.5.67-1.5 1.5S7.67 18 8.5 18s1.5-.67 1.5-1.5S9.33 15 8.5 15zM12 1C5.93 1 1 5.93 1 12s4.93 11 11 11 11-4.93 11-11S18.07 1 12 1zm0 20c-4.96 0-9-4.04-9-9s4.04-9 9-9 9 4.04 9 9-4.04 9-9 9zm5.5-11c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm-2 5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5z" /></g>
<g id="settings-overscan"><path d="M12.01 5.5L10 8h4l-1.99-2.5zM18 10v4l2.5-1.99L18 10zM6 10l-2.5 2.01L6 14v-4zm8 6h-4l2.01 2.5L14 16zm7-13H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16.01H3V4.99h18v14.02z" /></g>
<g id="settings-phone"><path d="M13 9h-2v2h2V9zm4 0h-2v2h2V9zm3 6.5c-1.25 0-2.45-.2-3.57-.57-.35-.11-.74-.03-1.02.24l-2.2 2.2c-2.83-1.44-5.15-3.75-6.59-6.58l2.2-2.21c.28-.27.36-.66.25-1.01C8.7 6.45 8.5 5.25 8.5 4c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1 0 9.39 7.61 17 17 17 .55 0 1-.45 1-1v-3.5c0-.55-.45-1-1-1zM19 9v2h2V9h-2z" /></g>
<g id="settings-power"><path d="M7 24h2v-2H7v2zm4 0h2v-2h-2v2zm2-22h-2v10h2V2zm3.56 2.44l-1.45 1.45C16.84 6.94 18 8.83 18 11c0 3.31-2.69 6-6 6s-6-2.69-6-6c0-2.17 1.16-4.06 2.88-5.12L7.44 4.44C5.36 5.88 4 8.28 4 11c0 4.42 3.58 8 8 8s8-3.58 8-8c0-2.72-1.36-5.12-3.44-6.56zM15 24h2v-2h-2v2z" /></g>
<g id="settings-remote"><path d="M15 9H9c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h6c.55 0 1-.45 1-1V10c0-.55-.45-1-1-1zm-3 6c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zM7.05 6.05l1.41 1.41C9.37 6.56 10.62 6 12 6s2.63.56 3.54 1.46l1.41-1.41C15.68 4.78 13.93 4 12 4s-3.68.78-4.95 2.05zM12 0C8.96 0 6.21 1.23 4.22 3.22l1.41 1.41C7.26 3.01 9.51 2 12 2s4.74 1.01 6.36 2.64l1.41-1.41C17.79 1.23 15.04 0 12 0z" /></g>
<g id="settings-voice"><path d="M7 24h2v-2H7v2zm5-11c1.66 0 2.99-1.34 2.99-3L15 4c0-1.66-1.34-3-3-3S9 2.34 9 4v6c0 1.66 1.34 3 3 3zm-1 11h2v-2h-2v2zm4 0h2v-2h-2v2zm4-14h-1.7c0 3-2.54 5.1-5.3 5.1S6.7 13 6.7 10H5c0 3.41 2.72 6.23 6 6.72V20h2v-3.28c3.28-.49 6-3.31 6-6.72z" /></g>
<g id="shop"><path d="M16 6V4c0-1.11-.89-2-2-2h-4c-1.11 0-2 .89-2 2v2H2v13c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6h-6zm-6-2h4v2h-4V4zM9 18V9l7.5 4L9 18z" /></g>
<g id="shop-two"><path d="M3 9H1v11c0 1.11.89 2 2 2h14c1.11 0 2-.89 2-2H3V9zm15-4V3c0-1.11-.89-2-2-2h-4c-1.11 0-2 .89-2 2v2H5v11c0 1.11.89 2 2 2h14c1.11 0 2-.89 2-2V5h-5zm-6-2h4v2h-4V3zm0 12V8l5.5 3-5.5 4z" /></g>
<g id="shopping-basket"><path d="M17.21 9l-4.38-6.56c-.19-.28-.51-.42-.83-.42-.32 0-.64.14-.83.43L6.79 9H2c-.55 0-1 .45-1 1 0 .09.01.18.04.27l2.54 9.27c.23.84 1 1.46 1.92 1.46h13c.92 0 1.69-.62 1.93-1.46l2.54-9.27L23 10c0-.55-.45-1-1-1h-4.79zM9 9l3-4.4L15 9H9zm3 8c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z" /></g>
<g id="shopping-cart"><path d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z" /></g>
<g id="sort"><path d="M3 18h6v-2H3v2zM3 6v2h18V6H3zm0 7h12v-2H3v2z" /></g>
<g id="speaker-notes"><path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM8 14H6v-2h2v2zm0-3H6V9h2v2zm0-3H6V6h2v2zm7 6h-5v-2h5v2zm3-3h-8V9h8v2zm0-3h-8V6h8v2z" /></g>
<g id="spellcheck"><path d="M12.45 16h2.09L9.43 3H7.57L2.46 16h2.09l1.12-3h5.64l1.14 3zm-6.02-5L8.5 5.48 10.57 11H6.43zm15.16.59l-8.09 8.09L9.83 16l-1.41 1.41 5.09 5.09L23 13l-1.41-1.41z" /></g>
<g id="star"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z" /></g>
<g id="star-border"><path d="M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z" /></g>
<g id="star-half"><path d="M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4V6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z" /></g>
<g id="stars"><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm4.24 16L12 15.45 7.77 18l1.12-4.81-3.73-3.23 4.92-.42L12 5l1.92 4.53 4.92.42-3.73 3.23L16.23 18z" /></g>
<g id="store"><path d="M20 4H4v2h16V4zm1 10v-2l-1-5H4l-1 5v2h1v6h10v-6h4v6h2v-6h1zm-9 4H6v-4h6v4z" /></g>
<g id="subdirectory-arrow-left"><path d="M11 9l1.42 1.42L8.83 14H18V4h2v12H8.83l3.59 3.58L11 21l-6-6 6-6z" /></g>
<g id="subdirectory-arrow-right"><path d="M19 15l-6 6-1.42-1.42L15.17 16H4V4h2v10h9.17l-3.59-3.58L13 9l6 6z" /></g>
<g id="subject"><path d="M14 17H4v2h10v-2zm6-8H4v2h16V9zM4 15h16v-2H4v2zM4 5v2h16V5H4z" /></g>
<g id="supervisor-account"><path d="M16.5 12c1.38 0 2.49-1.12 2.49-2.5S17.88 7 16.5 7C15.12 7 14 8.12 14 9.5s1.12 2.5 2.5 2.5zM9 11c1.66 0 2.99-1.34 2.99-3S10.66 5 9 5C7.34 5 6 6.34 6 8s1.34 3 3 3zm7.5 3c-1.83 0-5.5.92-5.5 2.75V19h11v-2.25c0-1.83-3.67-2.75-5.5-2.75zM9 13c-2.33 0-7 1.17-7 3.5V19h7v-2.25c0-.85.33-2.34 2.37-3.47C10.5 13.1 9.66 13 9 13z" /></g>
<g id="swap-horiz"><path d="M6.99 11L3 15l3.99 4v-3H14v-2H6.99v-3zM21 9l-3.99-4v3H10v2h7.01v3L21 9z" /></g>
<g id="swap-vert"><path d="M16 17.01V10h-2v7.01h-3L15 21l4-3.99h-3zM9 3L5 6.99h3V14h2V6.99h3L9 3z" /></g>
<g id="swap-vertical-circle"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM6.5 9L10 5.5 13.5 9H11v4H9V9H6.5zm11 6L14 18.5 10.5 15H13v-4h2v4h2.5z" /></g>
<g id="system-update-alt"><path d="M12 16.5l4-4h-3v-9h-2v9H8l4 4zm9-13h-6v1.99h6v14.03H3V5.49h6V3.5H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2v-14c0-1.1-.9-2-2-2z" /></g>
<g id="tab"><path d="M21 3H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H3V5h10v4h8v10z" /></g>
<g id="tab-unselected"><path d="M1 9h2V7H1v2zm0 4h2v-2H1v2zm0-8h2V3c-1.1 0-2 .9-2 2zm8 16h2v-2H9v2zm-8-4h2v-2H1v2zm2 4v-2H1c0 1.1.9 2 2 2zM21 3h-8v6h10V5c0-1.1-.9-2-2-2zm0 14h2v-2h-2v2zM9 5h2V3H9v2zM5 21h2v-2H5v2zM5 5h2V3H5v2zm16 16c1.1 0 2-.9 2-2h-2v2zm0-8h2v-2h-2v2zm-8 8h2v-2h-2v2zm4 0h2v-2h-2v2z" /></g>
<g id="text-format"><path d="M5 17v2h14v-2H5zm4.5-4.2h5l.9 2.2h2.1L12.75 4h-1.5L6.5 15h2.1l.9-2.2zM12 5.98L13.87 11h-3.74L12 5.98z" /></g>
<g id="theaters"><path d="M18 3v2h-2V3H8v2H6V3H4v18h2v-2h2v2h8v-2h2v2h2V3h-2zM8 17H6v-2h2v2zm0-4H6v-2h2v2zm0-4H6V7h2v2zm10 8h-2v-2h2v2zm0-4h-2v-2h2v2zm0-4h-2V7h2v2z" /></g>
<g id="thumb-down"><path d="M15 3H6c-.83 0-1.54.5-1.84 1.22l-3.02 7.05c-.09.23-.14.47-.14.73v1.91l.01.01L1 14c0 1.1.9 2 2 2h6.31l-.95 4.57-.03.32c0 .41.17.79.44 1.06L9.83 23l6.59-6.59c.36-.36.58-.86.58-1.41V5c0-1.1-.9-2-2-2zm4 0v12h4V3h-4z" /></g>
<g id="thumb-up"><path d="M1 21h4V9H1v12zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-1.91l-.01-.01L23 10z" /></g>
<g id="thumbs-up-down"><path d="M12 6c0-.55-.45-1-1-1H5.82l.66-3.18.02-.23c0-.31-.13-.59-.33-.8L5.38 0 .44 4.94C.17 5.21 0 5.59 0 6v6.5c0 .83.67 1.5 1.5 1.5h6.75c.62 0 1.15-.38 1.38-.91l2.26-5.29c.07-.17.11-.36.11-.55V6zm10.5 4h-6.75c-.62 0-1.15.38-1.38.91l-2.26 5.29c-.07.17-.11.36-.11.55V18c0 .55.45 1 1 1h5.18l-.66 3.18-.02.24c0 .31.13.59.33.8l.79.78 4.94-4.94c.27-.27.44-.65.44-1.06v-6.5c0-.83-.67-1.5-1.5-1.5z" /></g>
<g id="timeline"><path d="M23 8c0 1.1-.9 2-2 2-.18 0-.35-.02-.51-.07l-3.56 3.55c.05.16.07.34.07.52 0 1.1-.9 2-2 2s-2-.9-2-2c0-.18.02-.36.07-.52l-2.55-2.55c-.16.05-.34.07-.52.07s-.36-.02-.52-.07l-4.55 4.56c.05.16.07.33.07.51 0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2c.18 0 .35.02.51.07l4.56-4.55C8.02 9.36 8 9.18 8 9c0-1.1.9-2 2-2s2 .9 2 2c0 .18-.02.36-.07.52l2.55 2.55c.16-.05.34-.07.52-.07s.36.02.52.07l3.55-3.56C19.02 8.35 19 8.18 19 8c0-1.1.9-2 2-2s2 .9 2 2z" /></g>
<g id="toc"><path d="M3 9h14V7H3v2zm0 4h14v-2H3v2zm0 4h14v-2H3v2zm16 0h2v-2h-2v2zm0-10v2h2V7h-2zm0 6h2v-2h-2v2z" /></g>
<g id="today"><path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z" /></g>
<g id="toll"><path d="M15 4c-4.42 0-8 3.58-8 8s3.58 8 8 8 8-3.58 8-8-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6zM3 12c0-2.61 1.67-4.83 4-5.65V4.26C3.55 5.15 1 8.27 1 12s2.55 6.85 6 7.74v-2.09c-2.33-.82-4-3.04-4-5.65z" /></g>
<g id="touch-app"><path d="M9 11.24V7.5C9 6.12 10.12 5 11.5 5S14 6.12 14 7.5v3.74c1.21-.81 2-2.18 2-3.74C16 5.01 13.99 3 11.5 3S7 5.01 7 7.5c0 1.56.79 2.93 2 3.74zm9.84 4.63l-4.54-2.26c-.17-.07-.35-.11-.54-.11H13v-6c0-.83-.67-1.5-1.5-1.5S10 6.67 10 7.5v10.74l-3.43-.72c-.08-.01-.15-.03-.24-.03-.31 0-.59.13-.79.33l-.79.8 4.94 4.94c.27.27.65.44 1.06.44h6.79c.75 0 1.33-.55 1.44-1.28l.75-5.27c.01-.07.02-.14.02-.2 0-.62-.38-1.16-.91-1.38z" /></g>
<g id="track-changes"><path d="M19.07 4.93l-1.41 1.41C19.1 7.79 20 9.79 20 12c0 4.42-3.58 8-8 8s-8-3.58-8-8c0-4.08 3.05-7.44 7-7.93v2.02C8.16 6.57 6 9.03 6 12c0 3.31 2.69 6 6 6s6-2.69 6-6c0-1.66-.67-3.16-1.76-4.24l-1.41 1.41C15.55 9.9 16 10.9 16 12c0 2.21-1.79 4-4 4s-4-1.79-4-4c0-1.86 1.28-3.41 3-3.86v2.14c-.6.35-1 .98-1 1.72 0 1.1.9 2 2 2s2-.9 2-2c0-.74-.4-1.38-1-1.72V2h-1C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10c0-2.76-1.12-5.26-2.93-7.07z" /></g>
<g id="translate"><path d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z" /></g>
<g id="trending-down"><path d="M16 18l2.29-2.29-4.88-4.88-4 4L2 7.41 3.41 6l6 6 4-4 6.3 6.29L22 12v6z" /></g>
<g id="trending-flat"><path d="M22 12l-4-4v3H3v2h15v3z" /></g>
<g id="trending-up"><path d="M16 6l2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z" /></g>
<g id="turned-in"><path d="M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2z" /></g>
<g id="turned-in-not"><path d="M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2zm0 15l-5-2.18L7 18V5h10v13z" /></g>
<g id="unarchive"><path d="M20.55 5.22l-1.39-1.68C18.88 3.21 18.47 3 18 3H6c-.47 0-.88.21-1.15.55L3.46 5.22C3.17 5.57 3 6.01 3 6.5V19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6.5c0-.49-.17-.93-.45-1.28zM12 9.5l5.5 5.5H14v2h-4v-2H6.5L12 9.5zM5.12 5l.82-1h12l.93 1H5.12z" /></g>
<g id="undo"><path d="M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z" /></g>
<g id="unfold-less"><path d="M7.41 18.59L8.83 20 12 16.83 15.17 20l1.41-1.41L12 14l-4.59 4.59zm9.18-13.18L15.17 4 12 7.17 8.83 4 7.41 5.41 12 10l4.59-4.59z" /></g>
<g id="unfold-more"><path d="M12 5.83L15.17 9l1.41-1.41L12 3 7.41 7.59 8.83 9 12 5.83zm0 12.34L8.83 15l-1.41 1.41L12 21l4.59-4.59L15.17 15 12 18.17z" /></g>
<g id="update"><path d="M21 10.12h-6.78l2.74-2.82c-2.73-2.7-7.15-2.8-9.88-.1-2.73 2.71-2.73 7.08 0 9.79 2.73 2.71 7.15 2.71 9.88 0C18.32 15.65 19 14.08 19 12.1h2c0 1.98-.88 4.55-2.64 6.29-3.51 3.48-9.21 3.48-12.72 0-3.5-3.47-3.53-9.11-.02-12.58 3.51-3.47 9.14-3.47 12.65 0L21 3v7.12zM12.5 8v4.25l3.5 2.08-.72 1.21L11 13V8h1.5z" /></g>
<g id="verified-user"><path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm-2 16l-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9l-8 8z" /></g>
<g id="view-agenda"><path d="M20 13H3c-.55 0-1 .45-1 1v6c0 .55.45 1 1 1h17c.55 0 1-.45 1-1v-6c0-.55-.45-1-1-1zm0-10H3c-.55 0-1 .45-1 1v6c0 .55.45 1 1 1h17c.55 0 1-.45 1-1V4c0-.55-.45-1-1-1z" /></g>
<g id="view-array"><path d="M4 18h3V5H4v13zM18 5v13h3V5h-3zM8 18h9V5H8v13z" /></g>
<g id="view-carousel"><path d="M7 19h10V4H7v15zm-5-2h4V6H2v11zM18 6v11h4V6h-4z" /></g>
<g id="view-column"><path d="M10 18h5V5h-5v13zm-6 0h5V5H4v13zM16 5v13h5V5h-5z" /></g>
<g id="view-day"><path d="M2 21h19v-3H2v3zM20 8H3c-.55 0-1 .45-1 1v6c0 .55.45 1 1 1h17c.55 0 1-.45 1-1V9c0-.55-.45-1-1-1zM2 3v3h19V3H2z" /></g>
<g id="view-headline"><path d="M4 15h16v-2H4v2zm0 4h16v-2H4v2zm0-8h16V9H4v2zm0-6v2h16V5H4z" /></g>
<g id="view-list"><path d="M4 14h4v-4H4v4zm0 5h4v-4H4v4zM4 9h4V5H4v4zm5 5h12v-4H9v4zm0 5h12v-4H9v4zM9 5v4h12V5H9z" /></g>
<g id="view-module"><path d="M4 11h5V5H4v6zm0 7h5v-6H4v6zm6 0h5v-6h-5v6zm6 0h5v-6h-5v6zm-6-7h5V5h-5v6zm6-6v6h5V5h-5z" /></g>
<g id="view-quilt"><path d="M10 18h5v-6h-5v6zm-6 0h5V5H4v13zm12 0h5v-6h-5v6zM10 5v6h11V5H10z" /></g>
<g id="view-stream"><path d="M4 18h17v-6H4v6zM4 5v6h17V5H4z" /></g>
<g id="view-week"><path d="M6 5H3c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h3c.55 0 1-.45 1-1V6c0-.55-.45-1-1-1zm14 0h-3c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h3c.55 0 1-.45 1-1V6c0-.55-.45-1-1-1zm-7 0h-3c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h3c.55 0 1-.45 1-1V6c0-.55-.45-1-1-1z" /></g>
<g id="visibility"><path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z" /></g>
<g id="visibility-off"><path d="M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z" /></g>
<g id="warning"><path d="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z" /></g>
<g id="watch-later"><path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2zm4.2 14.2L11 13V7h1.5v5.2l4.5 2.7-.8 1.3z" /></g>
<g id="weekend"><path d="M21 10c-1.1 0-2 .9-2 2v3H5v-3c0-1.1-.9-2-2-2s-2 .9-2 2v5c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2v-5c0-1.1-.9-2-2-2zm-3-5H6c-1.1 0-2 .9-2 2v2.15c1.16.41 2 1.51 2 2.82V14h12v-2.03c0-1.3.84-2.4 2-2.82V7c0-1.1-.9-2-2-2z" /></g>
<g id="work"><path d="M20 6h-4V4c0-1.11-.89-2-2-2h-4c-1.11 0-2 .89-2 2v2H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-6 0h-4V4h4v2z" /></g>
<g id="youtube-searched-for"><path d="M17.01 14h-.8l-.27-.27c.98-1.14 1.57-2.61 1.57-4.23 0-3.59-2.91-6.5-6.5-6.5s-6.5 3-6.5 6.5H2l3.84 4 4.16-4H6.51C6.51 7 8.53 5 11.01 5s4.5 2.01 4.5 4.5c0 2.48-2.02 4.5-4.5 4.5-.65 0-1.26-.14-1.82-.38L7.71 15.1c.97.57 2.09.9 3.3.9 1.61 0 3.08-.59 4.22-1.57l.27.27v.79l5.01 4.99L22 19l-4.99-5z" /></g>
<g id="zoom-in"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zm2.5-4h-2v2H9v-2H7V9h2V7h1v2h2v1z" /></g>
<g id="zoom-out"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zM7 9h5v1H7z" /></g>
</defs></svg>
</iron-iconset-svg>



<iron-iconset-svg name="image" size="24">
<svg><defs>
<g id="add-a-photo"><path d="M3 4V1h2v3h3v2H5v3H3V6H0V4h3zm3 6V7h3V4h7l1.83 2H21c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H5c-1.1 0-2-.9-2-2V10h3zm7 9c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-3.2-5c0 1.77 1.43 3.2 3.2 3.2s3.2-1.43 3.2-3.2-1.43-3.2-3.2-3.2-3.2 1.43-3.2 3.2z" /></g>
<g id="add-to-photos"><path d="M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-1 9h-4v4h-2v-4H9V9h4V5h2v4h4v2z" /></g>
<g id="adjust"><path d="M12 2C6.49 2 2 6.49 2 12s4.49 10 10 10 10-4.49 10-10S17.51 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm3-8c0 1.66-1.34 3-3 3s-3-1.34-3-3 1.34-3 3-3 3 1.34 3 3z" /></g>
<g id="assistant"><path d="M19 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h4l3 3 3-3h4c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-5.12 10.88L12 17l-1.88-4.12L6 11l4.12-1.88L12 5l1.88 4.12L18 11l-4.12 1.88z" /></g>
<g id="assistant-photo"><path d="M14.4 6L14 4H5v17h2v-7h5.6l.4 2h7V6z" /></g>
<g id="audiotrack"><path d="M12 3v9.28c-.47-.17-.97-.28-1.5-.28C8.01 12 6 14.01 6 16.5S8.01 21 10.5 21c2.31 0 4.2-1.75 4.45-4H15V6h4V3h-7z" /></g>
<g id="blur-circular"><path d="M10 9c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm0 4c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zM7 9.5c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zm3 7c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zm-3-3c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zm3-6c.28 0 .5-.22.5-.5s-.22-.5-.5-.5-.5.22-.5.5.22.5.5.5zM14 9c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm0-1.5c.28 0 .5-.22.5-.5s-.22-.5-.5-.5-.5.22-.5.5.22.5.5.5zm3 6c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zm0-4c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm2-3.5c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zm0-3.5c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z" /></g>
<g id="blur-linear"><path d="M5 17.5c.83 0 1.5-.67 1.5-1.5s-.67-1.5-1.5-1.5-1.5.67-1.5 1.5.67 1.5 1.5 1.5zM9 13c.55 0 1-.45 1-1s-.45-1-1-1-1 .45-1 1 .45 1 1 1zm0-4c.55 0 1-.45 1-1s-.45-1-1-1-1 .45-1 1 .45 1 1 1zM3 21h18v-2H3v2zM5 9.5c.83 0 1.5-.67 1.5-1.5S5.83 6.5 5 6.5 3.5 7.17 3.5 8 4.17 9.5 5 9.5zm0 4c.83 0 1.5-.67 1.5-1.5s-.67-1.5-1.5-1.5-1.5.67-1.5 1.5.67 1.5 1.5 1.5zM9 17c.55 0 1-.45 1-1s-.45-1-1-1-1 .45-1 1 .45 1 1 1zm8-.5c.28 0 .5-.22.5-.5s-.22-.5-.5-.5-.5.22-.5.5.22.5.5.5zM3 3v2h18V3H3zm14 5.5c.28 0 .5-.22.5-.5s-.22-.5-.5-.5-.5.22-.5.5.22.5.5.5zm0 4c.28 0 .5-.22.5-.5s-.22-.5-.5-.5-.5.22-.5.5.22.5.5.5zM13 9c.55 0 1-.45 1-1s-.45-1-1-1-1 .45-1 1 .45 1 1 1zm0 4c.55 0 1-.45 1-1s-.45-1-1-1-1 .45-1 1 .45 1 1 1zm0 4c.55 0 1-.45 1-1s-.45-1-1-1-1 .45-1 1 .45 1 1 1z" /></g>
<g id="blur-off"><path d="M14 7c.55 0 1-.45 1-1s-.45-1-1-1-1 .45-1 1 .45 1 1 1zm-.2 4.48l.2.02c.83 0 1.5-.67 1.5-1.5s-.67-1.5-1.5-1.5-1.5.67-1.5 1.5l.02.2c.09.67.61 1.19 1.28 1.28zM14 3.5c.28 0 .5-.22.5-.5s-.22-.5-.5-.5-.5.22-.5.5.22.5.5.5zm-4 0c.28 0 .5-.22.5-.5s-.22-.5-.5-.5-.5.22-.5.5.22.5.5.5zm11 7c.28 0 .5-.22.5-.5s-.22-.5-.5-.5-.5.22-.5.5.22.5.5.5zM10 7c.55 0 1-.45 1-1s-.45-1-1-1-1 .45-1 1 .45 1 1 1zm8 8c.55 0 1-.45 1-1s-.45-1-1-1-1 .45-1 1 .45 1 1 1zm0-4c.55 0 1-.45 1-1s-.45-1-1-1-1 .45-1 1 .45 1 1 1zm0-4c.55 0 1-.45 1-1s-.45-1-1-1-1 .45-1 1 .45 1 1 1zm-4 13.5c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zM2.5 5.27l3.78 3.78L6 9c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1c0-.1-.03-.19-.06-.28l2.81 2.81c-.71.11-1.25.73-1.25 1.47 0 .83.67 1.5 1.5 1.5.74 0 1.36-.54 1.47-1.25l2.81 2.81c-.09-.03-.18-.06-.28-.06-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1c0-.1-.03-.19-.06-.28l3.78 3.78L20 20.23 3.77 4 2.5 5.27zM10 17c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm11-3.5c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zM6 13c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zM3 9.5c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zm7 11c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zM6 17c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm-3-3.5c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5z" /></g>
<g id="blur-on"><path d="M6 13c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm0 4c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm0-8c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm-3 .5c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zM6 5c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm15 5.5c.28 0 .5-.22.5-.5s-.22-.5-.5-.5-.5.22-.5.5.22.5.5.5zM14 7c.55 0 1-.45 1-1s-.45-1-1-1-1 .45-1 1 .45 1 1 1zm0-3.5c.28 0 .5-.22.5-.5s-.22-.5-.5-.5-.5.22-.5.5.22.5.5.5zm-11 10c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zm7 7c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zm0-17c.28 0 .5-.22.5-.5s-.22-.5-.5-.5-.5.22-.5.5.22.5.5.5zM10 7c.55 0 1-.45 1-1s-.45-1-1-1-1 .45-1 1 .45 1 1 1zm0 5.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm8 .5c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm0 4c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm0-8c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm0-4c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm3 8.5c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zM14 17c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm0 3.5c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zm-4-12c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0 8.5c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm4-4.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-4c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5z" /></g>
<g id="brightness-1"><circle cx="12" cy="12" r="10" /></g>
<g id="brightness-2"><path d="M10 2c-1.82 0-3.53.5-5 1.35C7.99 5.08 10 8.3 10 12s-2.01 6.92-5 8.65C6.47 21.5 8.18 22 10 22c5.52 0 10-4.48 10-10S15.52 2 10 2z" /></g>
<g id="brightness-3"><path d="M9 2c-1.05 0-2.05.16-3 .46 4.06 1.27 7 5.06 7 9.54 0 4.48-2.94 8.27-7 9.54.95.3 1.95.46 3 .46 5.52 0 10-4.48 10-10S14.52 2 9 2z" /></g>
<g id="brightness-4"><path d="M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69zM12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6c3.31 0 6 2.69 6 6s-2.69 6-6 6z" /></g>
<g id="brightness-5"><path d="M20 15.31L23.31 12 20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69zM12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6z" /></g>
<g id="brightness-6"><path d="M20 15.31L23.31 12 20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69zM12 18V6c3.31 0 6 2.69 6 6s-2.69 6-6 6z" /></g>
<g id="brightness-7"><path d="M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69zM12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6zm0-10c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4z" /></g>
<g id="broken-image"><path d="M21 5v6.59l-3-3.01-4 4.01-4-4-4 4-3-3.01V5c0-1.1.9-2 2-2h14c1.1 0 2 .9 2 2zm-3 6.42l3 3.01V19c0 1.1-.9 2-2 2H5c-1.1 0-2-.9-2-2v-6.58l3 2.99 4-4 4 4 4-3.99z" /></g>
<g id="brush"><path d="M7 14c-1.66 0-3 1.34-3 3 0 1.31-1.16 2-2 2 .92 1.22 2.49 2 4 2 2.21 0 4-1.79 4-4 0-1.66-1.34-3-3-3zm13.71-9.37l-1.34-1.34c-.39-.39-1.02-.39-1.41 0L9 12.25 11.75 15l8.96-8.96c.39-.39.39-1.02 0-1.41z" /></g>
<g id="camera"><path d="M9.4 10.5l4.77-8.26C13.47 2.09 12.75 2 12 2c-2.4 0-4.6.85-6.32 2.25l3.66 6.35.06-.1zM21.54 9c-.92-2.92-3.15-5.26-6-6.34L11.88 9h9.66zm.26 1h-7.49l.29.5 4.76 8.25C21 16.97 22 14.61 22 12c0-.69-.07-1.35-.2-2zM8.54 12l-3.9-6.75C3.01 7.03 2 9.39 2 12c0 .69.07 1.35.2 2h7.49l-1.15-2zm-6.08 3c.92 2.92 3.15 5.26 6 6.34L12.12 15H2.46zm11.27 0l-3.9 6.76c.7.15 1.42.24 2.17.24 2.4 0 4.6-.85 6.32-2.25l-3.66-6.35-.93 1.6z" /></g>
<g id="camera-alt"><circle cx="12" cy="12" r="3.2" /><path d="M9 2L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z" /></g>
<g id="camera-front"><path d="M10 20H5v2h5v2l3-3-3-3v2zm4 0v2h5v-2h-5zM12 8c1.1 0 2-.9 2-2s-.9-2-2-2-1.99.9-1.99 2S10.9 8 12 8zm5-8H7C5.9 0 5 .9 5 2v14c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V2c0-1.1-.9-2-2-2zM7 2h10v10.5c0-1.67-3.33-2.5-5-2.5s-5 .83-5 2.5V2z" /></g>
<g id="camera-rear"><path d="M10 20H5v2h5v2l3-3-3-3v2zm4 0v2h5v-2h-5zm3-20H7C5.9 0 5 .9 5 2v14c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V2c0-1.1-.9-2-2-2zm-5 6c-1.11 0-2-.9-2-2s.89-2 1.99-2 2 .9 2 2C14 5.1 13.1 6 12 6z" /></g>
<g id="camera-roll"><path d="M14 5c0-1.1-.9-2-2-2h-1V2c0-.55-.45-1-1-1H6c-.55 0-1 .45-1 1v1H4c-1.1 0-2 .9-2 2v15c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2h8V5h-8zm-2 13h-2v-2h2v2zm0-9h-2V7h2v2zm4 9h-2v-2h2v2zm0-9h-2V7h2v2zm4 9h-2v-2h2v2zm0-9h-2V7h2v2z" /></g>
<g id="center-focus-strong"><path d="M12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm-7 7H3v4c0 1.1.9 2 2 2h4v-2H5v-4zM5 5h4V3H5c-1.1 0-2 .9-2 2v4h2V5zm14-2h-4v2h4v4h2V5c0-1.1-.9-2-2-2zm0 16h-4v2h4c1.1 0 2-.9 2-2v-4h-2v4z" /></g>
<g id="center-focus-weak"><path d="M5 15H3v4c0 1.1.9 2 2 2h4v-2H5v-4zM5 5h4V3H5c-1.1 0-2 .9-2 2v4h2V5zm14-2h-4v2h4v4h2V5c0-1.1-.9-2-2-2zm0 16h-4v2h4c1.1 0 2-.9 2-2v-4h-2v4zM12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 6c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z" /></g>
<g id="collections"><path d="M22 16V4c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2zm-11-4l2.03 2.71L16 11l4 5H8l3-4zM2 6v14c0 1.1.9 2 2 2h14v-2H4V6H2z" /></g>
<g id="collections-bookmark"><path d="M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 10l-2.5-1.5L15 12V4h5v8z" /></g>
<g id="color-lens"><path d="M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9c.83 0 1.5-.67 1.5-1.5 0-.39-.15-.74-.39-1.01-.23-.26-.38-.61-.38-.99 0-.83.67-1.5 1.5-1.5H16c2.76 0 5-2.24 5-5 0-4.42-4.03-8-9-8zm-5.5 9c-.83 0-1.5-.67-1.5-1.5S5.67 9 6.5 9 8 9.67 8 10.5 7.33 12 6.5 12zm3-4C8.67 8 8 7.33 8 6.5S8.67 5 9.5 5s1.5.67 1.5 1.5S10.33 8 9.5 8zm5 0c-.83 0-1.5-.67-1.5-1.5S13.67 5 14.5 5s1.5.67 1.5 1.5S15.33 8 14.5 8zm3 4c-.83 0-1.5-.67-1.5-1.5S16.67 9 17.5 9s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z" /></g>
<g id="colorize"><path d="M20.71 5.63l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-3.12 3.12-1.93-1.91-1.41 1.41 1.42 1.42L3 16.25V21h4.75l8.92-8.92 1.42 1.42 1.41-1.41-1.92-1.92 3.12-3.12c.4-.4.4-1.03.01-1.42zM6.92 19L5 17.08l8.06-8.06 1.92 1.92L6.92 19z" /></g>
<g id="compare"><path d="M10 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h5v2h2V1h-2v2zm0 15H5l5-6v6zm9-15h-5v2h5v13l-5-6v9h5c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z" /></g>
<g id="control-point"><path d="M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.49 2 2 6.49 2 12s4.49 10 10 10 10-4.49 10-10S17.51 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z" /></g>
<g id="control-point-duplicate"><path d="M16 8h-2v3h-3v2h3v3h2v-3h3v-2h-3zM2 12c0-2.79 1.64-5.2 4.01-6.32V3.52C2.52 4.76 0 8.09 0 12s2.52 7.24 6.01 8.48v-2.16C3.64 17.2 2 14.79 2 12zm13-9c-4.96 0-9 4.04-9 9s4.04 9 9 9 9-4.04 9-9-4.04-9-9-9zm0 16c-3.86 0-7-3.14-7-7s3.14-7 7-7 7 3.14 7 7-3.14 7-7 7z" /></g>
<g id="crop"><path d="M17 15h2V7c0-1.1-.9-2-2-2H9v2h8v8zM7 17V1H5v4H1v2h4v10c0 1.1.9 2 2 2h10v4h2v-4h4v-2H7z" /></g>
<g id="crop-16-9"><path d="M19 6H5c-1.1 0-2 .9-2 2v8c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm0 10H5V8h14v8z" /></g>
<g id="crop-3-2"><path d="M19 4H5c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 14H5V6h14v12z" /></g>
<g id="crop-5-4"><path d="M19 5H5c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 12H5V7h14v10z" /></g>
<g id="crop-7-5"><path d="M19 7H5c-1.1 0-2 .9-2 2v6c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V9c0-1.1-.9-2-2-2zm0 8H5V9h14v6z" /></g>
<g id="crop-din"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14z" /></g>
<g id="crop-free"><path d="M3 5v4h2V5h4V3H5c-1.1 0-2 .9-2 2zm2 10H3v4c0 1.1.9 2 2 2h4v-2H5v-4zm14 4h-4v2h4c1.1 0 2-.9 2-2v-4h-2v4zm0-16h-4v2h4v4h2V5c0-1.1-.9-2-2-2z" /></g>
<g id="crop-landscape"><path d="M19 5H5c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 12H5V7h14v10z" /></g>
<g id="crop-original"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14zm-5.04-6.71l-2.75 3.54-1.96-2.36L6.5 17h11l-3.54-4.71z" /></g>
<g id="crop-portrait"><path d="M17 3H7c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H7V5h10v14z" /></g>
<g id="crop-rotate"><path d="M7.47 21.49C4.2 19.93 1.86 16.76 1.5 13H0c.51 6.16 5.66 11 11.95 11 .23 0 .44-.02.66-.03L8.8 20.15l-1.33 1.34zM12.05 0c-.23 0-.44.02-.66.04l3.81 3.81 1.33-1.33C19.8 4.07 22.14 7.24 22.5 11H24c-.51-6.16-5.66-11-11.95-11zM16 14h2V8c0-1.11-.9-2-2-2h-6v2h6v6zm-8 2V4H6v2H4v2h2v8c0 1.1.89 2 2 2h8v2h2v-2h2v-2H8z" /></g>
<g id="crop-square"><path d="M18 4H6c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 14H6V6h12v12z" /></g>
<g id="dehaze"><path d="M2 15.5v2h20v-2H2zm0-5v2h20v-2H2zm0-5v2h20v-2H2z" /></g>
<g id="details"><path d="M3 4l9 16 9-16H3zm3.38 2h11.25L12 16 6.38 6z" /></g>
<g id="edit"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z" /></g>
<g id="exposure"><path d="M15 17v2h2v-2h2v-2h-2v-2h-2v2h-2v2h2zm5-15H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM5 5h6v2H5V5zm15 15H4L20 4v16z" /></g>
<g id="exposure-neg-1"><path d="M4 11v2h8v-2H4zm15 7h-2V7.38L14 8.4V6.7L18.7 5h.3v13z" /></g>
<g id="exposure-neg-2"><path d="M15.05 16.29l2.86-3.07c.38-.39.72-.79 1.04-1.18.32-.39.59-.78.82-1.17.23-.39.41-.78.54-1.17s.19-.79.19-1.18c0-.53-.09-1.02-.27-1.46-.18-.44-.44-.81-.78-1.11-.34-.31-.77-.54-1.26-.71-.51-.16-1.08-.24-1.72-.24-.69 0-1.31.11-1.85.32-.54.21-1 .51-1.36.88-.37.37-.65.8-.84 1.3-.18.47-.27.97-.28 1.5h2.14c.01-.31.05-.6.13-.87.09-.29.23-.54.4-.75.18-.21.41-.37.68-.49.27-.12.6-.18.96-.18.31 0 .58.05.81.15.23.1.43.25.59.43.16.18.28.4.37.65.08.25.13.52.13.81 0 .22-.03.43-.08.65-.06.22-.15.45-.29.7-.14.25-.32.53-.56.83-.23.3-.52.65-.88 1.03l-4.17 4.55V18H21v-1.71h-5.95zM2 11v2h8v-2H2z" /></g>
<g id="exposure-plus-1"><path d="M10 7H8v4H4v2h4v4h2v-4h4v-2h-4V7zm10 11h-2V7.38L15 8.4V6.7L19.7 5h.3v13z" /></g>
<g id="exposure-plus-2"><path d="M16.05 16.29l2.86-3.07c.38-.39.72-.79 1.04-1.18.32-.39.59-.78.82-1.17.23-.39.41-.78.54-1.17.13-.39.19-.79.19-1.18 0-.53-.09-1.02-.27-1.46-.18-.44-.44-.81-.78-1.11-.34-.31-.77-.54-1.26-.71-.51-.16-1.08-.24-1.72-.24-.69 0-1.31.11-1.85.32-.54.21-1 .51-1.36.88-.37.37-.65.8-.84 1.3-.18.47-.27.97-.28 1.5h2.14c.01-.31.05-.6.13-.87.09-.29.23-.54.4-.75.18-.21.41-.37.68-.49.27-.12.6-.18.96-.18.31 0 .58.05.81.15.23.1.43.25.59.43.16.18.28.4.37.65.08.25.13.52.13.81 0 .22-.03.43-.08.65-.06.22-.15.45-.29.7-.14.25-.32.53-.56.83-.23.3-.52.65-.88 1.03l-4.17 4.55V18H22v-1.71h-5.95zM8 7H6v4H2v2h4v4h2v-4h4v-2H8V7z" /></g>
<g id="exposure-zero"><path d="M16.14 12.5c0 1-.1 1.85-.3 2.55-.2.7-.48 1.27-.83 1.7-.36.44-.79.75-1.3.95-.51.2-1.07.3-1.7.3-.62 0-1.18-.1-1.69-.3-.51-.2-.95-.51-1.31-.95-.36-.44-.65-1.01-.85-1.7-.2-.7-.3-1.55-.3-2.55v-2.04c0-1 .1-1.85.3-2.55.2-.7.48-1.26.84-1.69.36-.43.8-.74 1.31-.93C10.81 5.1 11.38 5 12 5c.63 0 1.19.1 1.7.29.51.19.95.5 1.31.93.36.43.64.99.84 1.69.2.7.3 1.54.3 2.55v2.04zm-2.11-2.36c0-.64-.05-1.18-.13-1.62-.09-.44-.22-.79-.4-1.06-.17-.27-.39-.46-.64-.58-.25-.13-.54-.19-.86-.19-.32 0-.61.06-.86.18s-.47.31-.64.58c-.17.27-.31.62-.4 1.06s-.13.98-.13 1.62v2.67c0 .64.05 1.18.14 1.62.09.45.23.81.4 1.09s.39.48.64.61.54.19.87.19c.33 0 .62-.06.87-.19s.46-.33.63-.61c.17-.28.3-.64.39-1.09.09-.45.13-.99.13-1.62v-2.66z" /></g>
<g id="filter"><path d="M15.96 10.29l-2.75 3.54-1.96-2.36L8.5 15h11l-3.54-4.71zM3 5H1v16c0 1.1.9 2 2 2h16v-2H3V5zm18-4H7c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V3c0-1.1-.9-2-2-2zm0 16H7V3h14v14z" /></g>
<g id="filter-1"><path d="M3 5H1v16c0 1.1.9 2 2 2h16v-2H3V5zm11 10h2V5h-4v2h2v8zm7-14H7c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V3c0-1.1-.9-2-2-2zm0 16H7V3h14v14z" /></g>
<g id="filter-2"><path d="M3 5H1v16c0 1.1.9 2 2 2h16v-2H3V5zm18-4H7c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V3c0-1.1-.9-2-2-2zm0 16H7V3h14v14zm-4-4h-4v-2h2c1.1 0 2-.89 2-2V7c0-1.11-.9-2-2-2h-4v2h4v2h-2c-1.1 0-2 .89-2 2v4h6v-2z" /></g>
<g id="filter-3"><path d="M21 1H7c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V3c0-1.1-.9-2-2-2zm0 16H7V3h14v14zM3 5H1v16c0 1.1.9 2 2 2h16v-2H3V5zm14 8v-1.5c0-.83-.67-1.5-1.5-1.5.83 0 1.5-.67 1.5-1.5V7c0-1.11-.9-2-2-2h-4v2h4v2h-2v2h2v2h-4v2h4c1.1 0 2-.89 2-2z" /></g>
<g id="filter-4"><path d="M3 5H1v16c0 1.1.9 2 2 2h16v-2H3V5zm12 10h2V5h-2v4h-2V5h-2v6h4v4zm6-14H7c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V3c0-1.1-.9-2-2-2zm0 16H7V3h14v14z" /></g>
<g id="filter-5"><path d="M21 1H7c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V3c0-1.1-.9-2-2-2zm0 16H7V3h14v14zM3 5H1v16c0 1.1.9 2 2 2h16v-2H3V5zm14 8v-2c0-1.11-.9-2-2-2h-2V7h4V5h-6v6h4v2h-4v2h4c1.1 0 2-.89 2-2z" /></g>
<g id="filter-6"><path d="M3 5H1v16c0 1.1.9 2 2 2h16v-2H3V5zm18-4H7c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V3c0-1.1-.9-2-2-2zm0 16H7V3h14v14zm-8-2h2c1.1 0 2-.89 2-2v-2c0-1.11-.9-2-2-2h-2V7h4V5h-4c-1.1 0-2 .89-2 2v6c0 1.11.9 2 2 2zm0-4h2v2h-2v-2z" /></g>
<g id="filter-7"><path d="M3 5H1v16c0 1.1.9 2 2 2h16v-2H3V5zm18-4H7c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V3c0-1.1-.9-2-2-2zm0 16H7V3h14v14zm-8-2l4-8V5h-6v2h4l-4 8h2z" /></g>
<g id="filter-8"><path d="M3 5H1v16c0 1.1.9 2 2 2h16v-2H3V5zm18-4H7c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V3c0-1.1-.9-2-2-2zm0 16H7V3h14v14zm-8-2h2c1.1 0 2-.89 2-2v-1.5c0-.83-.67-1.5-1.5-1.5.83 0 1.5-.67 1.5-1.5V7c0-1.11-.9-2-2-2h-2c-1.1 0-2 .89-2 2v1.5c0 .83.67 1.5 1.5 1.5-.83 0-1.5.67-1.5 1.5V13c0 1.11.9 2 2 2zm0-8h2v2h-2V7zm0 4h2v2h-2v-2z" /></g>
<g id="filter-9"><path d="M3 5H1v16c0 1.1.9 2 2 2h16v-2H3V5zm18-4H7c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V3c0-1.1-.9-2-2-2zm0 16H7V3h14v14zM15 5h-2c-1.1 0-2 .89-2 2v2c0 1.11.9 2 2 2h2v2h-4v2h4c1.1 0 2-.89 2-2V7c0-1.11-.9-2-2-2zm0 4h-2V7h2v2z" /></g>
<g id="filter-9-plus"><path d="M3 5H1v16c0 1.1.9 2 2 2h16v-2H3V5zm11 7V8c0-1.11-.9-2-2-2h-1c-1.1 0-2 .89-2 2v1c0 1.11.9 2 2 2h1v1H9v2h3c1.1 0 2-.89 2-2zm-3-3V8h1v1h-1zm10-8H7c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V3c0-1.1-.9-2-2-2zm0 8h-2V7h-2v2h-2v2h2v2h2v-2h2v6H7V3h14v6z" /></g>
<g id="filter-b-and-w"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16l-7-8v8H5l7-8V5h7v14z" /></g>
<g id="filter-center-focus"><path d="M5 15H3v4c0 1.1.9 2 2 2h4v-2H5v-4zM5 5h4V3H5c-1.1 0-2 .9-2 2v4h2V5zm14-2h-4v2h4v4h2V5c0-1.1-.9-2-2-2zm0 16h-4v2h4c1.1 0 2-.9 2-2v-4h-2v4zM12 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z" /></g>
<g id="filter-drama"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.61 5.64 5.36 8.04 2.35 8.36 0 10.9 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM19 18H6c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4h2c0-2.76-1.86-5.08-4.4-5.78C8.61 6.88 10.2 6 12 6c3.03 0 5.5 2.47 5.5 5.5v.5H19c1.65 0 3 1.35 3 3s-1.35 3-3 3z" /></g>
<g id="filter-frames"><path d="M20 4h-4l-4-4-4 4H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H4V6h4.52l3.52-3.5L15.52 6H20v14zM18 8H6v10h12" /></g>
<g id="filter-hdr"><path d="M14 6l-3.75 5 2.85 3.8-1.6 1.2C9.81 13.75 7 10 7 10l-6 8h22L14 6z" /></g>
<g id="filter-none"><path d="M3 5H1v16c0 1.1.9 2 2 2h16v-2H3V5zm18-4H7c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V3c0-1.1-.9-2-2-2zm0 16H7V3h14v14z" /></g>
<g id="filter-tilt-shift"><path d="M11 4.07V2.05c-2.01.2-3.84 1-5.32 2.21L7.1 5.69c1.11-.86 2.44-1.44 3.9-1.62zm7.32.19C16.84 3.05 15.01 2.25 13 2.05v2.02c1.46.18 2.79.76 3.9 1.62l1.42-1.43zM19.93 11h2.02c-.2-2.01-1-3.84-2.21-5.32L18.31 7.1c.86 1.11 1.44 2.44 1.62 3.9zM5.69 7.1L4.26 5.68C3.05 7.16 2.25 8.99 2.05 11h2.02c.18-1.46.76-2.79 1.62-3.9zM4.07 13H2.05c.2 2.01 1 3.84 2.21 5.32l1.43-1.43c-.86-1.1-1.44-2.43-1.62-3.89zM15 12c0-1.66-1.34-3-3-3s-3 1.34-3 3 1.34 3 3 3 3-1.34 3-3zm3.31 4.9l1.43 1.43c1.21-1.48 2.01-3.32 2.21-5.32h-2.02c-.18 1.45-.76 2.78-1.62 3.89zM13 19.93v2.02c2.01-.2 3.84-1 5.32-2.21l-1.43-1.43c-1.1.86-2.43 1.44-3.89 1.62zm-7.32-.19C7.16 20.95 9 21.75 11 21.95v-2.02c-1.46-.18-2.79-.76-3.9-1.62l-1.42 1.43z" /></g>
<g id="filter-vintage"><path d="M18.7 12.4c-.28-.16-.57-.29-.86-.4.29-.11.58-.24.86-.4 1.92-1.11 2.99-3.12 3-5.19-1.79-1.03-4.07-1.11-6 0-.28.16-.54.35-.78.54.05-.31.08-.63.08-.95 0-2.22-1.21-4.15-3-5.19C10.21 1.85 9 3.78 9 6c0 .32.03.64.08.95-.24-.2-.5-.39-.78-.55-1.92-1.11-4.2-1.03-6 0 0 2.07 1.07 4.08 3 5.19.28.16.57.29.86.4-.29.11-.58.24-.86.4-1.92 1.11-2.99 3.12-3 5.19 1.79 1.03 4.07 1.11 6 0 .28-.16.54-.35.78-.54-.05.32-.08.64-.08.96 0 2.22 1.21 4.15 3 5.19 1.79-1.04 3-2.97 3-5.19 0-.32-.03-.64-.08-.95.24.2.5.38.78.54 1.92 1.11 4.2 1.03 6 0-.01-2.07-1.08-4.08-3-5.19zM12 16c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4z" /></g>
<g id="flare"><path d="M7 11H1v2h6v-2zm2.17-3.24L7.05 5.64 5.64 7.05l2.12 2.12 1.41-1.41zM13 1h-2v6h2V1zm5.36 6.05l-1.41-1.41-2.12 2.12 1.41 1.41 2.12-2.12zM17 11v2h6v-2h-6zm-5-2c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3zm2.83 7.24l2.12 2.12 1.41-1.41-2.12-2.12-1.41 1.41zm-9.19.71l1.41 1.41 2.12-2.12-1.41-1.41-2.12 2.12zM11 23h2v-6h-2v6z" /></g>
<g id="flash-auto"><path d="M3 2v12h3v9l7-12H9l4-9H3zm16 0h-2l-3.2 9h1.9l.7-2h3.2l.7 2h1.9L19 2zm-2.15 5.65L18 4l1.15 3.65h-2.3z" /></g>
<g id="flash-off"><path d="M3.27 3L2 4.27l5 5V13h3v9l3.58-6.14L17.73 20 19 18.73 3.27 3zM17 10h-4l4-8H7v2.18l8.46 8.46L17 10z" /></g>
<g id="flash-on"><path d="M7 2v11h3v9l7-12h-4l4-8z" /></g>
<g id="flip"><path d="M15 21h2v-2h-2v2zm4-12h2V7h-2v2zM3 5v14c0 1.1.9 2 2 2h4v-2H5V5h4V3H5c-1.1 0-2 .9-2 2zm16-2v2h2c0-1.1-.9-2-2-2zm-8 20h2V1h-2v22zm8-6h2v-2h-2v2zM15 5h2V3h-2v2zm4 8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2z" /></g>
<g id="gradient"><path d="M11 9h2v2h-2zm-2 2h2v2H9zm4 0h2v2h-2zm2-2h2v2h-2zM7 9h2v2H7zm12-6H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 18H7v-2h2v2zm4 0h-2v-2h2v2zm4 0h-2v-2h2v2zm2-7h-2v2h2v2h-2v-2h-2v2h-2v-2h-2v2H9v-2H7v2H5v-2h2v-2H5V5h14v6z" /></g>
<g id="grain"><path d="M10 12c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zM6 8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12-8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm-4 8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm4-4c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-4-4c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-4-4c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z" /></g>
<g id="grid-off"><path d="M8 4v1.45l2 2V4h4v4h-3.45l2 2H14v1.45l2 2V10h4v4h-3.45l2 2H20v1.45l2 2V4c0-1.1-.9-2-2-2H4.55l2 2H8zm8 0h4v4h-4V4zM1.27 1.27L0 2.55l2 2V20c0 1.1.9 2 2 2h15.46l2 2 1.27-1.27L1.27 1.27zM10 12.55L11.45 14H10v-1.45zm-6-6L5.45 8H4V6.55zM8 20H4v-4h4v4zm0-6H4v-4h3.45l.55.55V14zm6 6h-4v-4h3.45l.55.54V20zm2 0v-1.46L17.46 20H16z" /></g>
<g id="grid-on"><path d="M20 2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM8 20H4v-4h4v4zm0-6H4v-4h4v4zm0-6H4V4h4v4zm6 12h-4v-4h4v4zm0-6h-4v-4h4v4zm0-6h-4V4h4v4zm6 12h-4v-4h4v4zm0-6h-4v-4h4v4zm0-6h-4V4h4v4z" /></g>
<g id="hdr-off"><path d="M17.5 15v-2h1.1l.9 2H21l-.9-2.1c.5-.2.9-.8.9-1.4v-1c0-.8-.7-1.5-1.5-1.5H16v4.9l1.1 1.1h.4zm0-4.5h2v1h-2v-1zm-4.5 0v.4l1.5 1.5v-1.9c0-.8-.7-1.5-1.5-1.5h-1.9l1.5 1.5h.4zm-3.5-1l-7-7-1.1 1L6.9 9h-.4v2h-2V9H3v6h1.5v-2.5h2V15H8v-4.9l1.5 1.5V15h3.4l7.6 7.6 1.1-1.1-12.1-12z" /></g>
<g id="hdr-on"><path d="M21 11.5v-1c0-.8-.7-1.5-1.5-1.5H16v6h1.5v-2h1.1l.9 2H21l-.9-2.1c.5-.3.9-.8.9-1.4zm-1.5 0h-2v-1h2v1zm-13-.5h-2V9H3v6h1.5v-2.5h2V15H8V9H6.5v2zM13 9H9.5v6H13c.8 0 1.5-.7 1.5-1.5v-3c0-.8-.7-1.5-1.5-1.5zm0 4.5h-2v-3h2v3z" /></g>
<g id="hdr-strong"><path d="M17 6c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6-2.69-6-6-6zM5 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 6c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z" /></g>
<g id="hdr-weak"><path d="M5 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm12-2c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6-2.69-6-6-6zm0 10c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4z" /></g>
<g id="healing"><path d="M17.73 12.02l3.98-3.98c.39-.39.39-1.02 0-1.41l-4.34-4.34c-.39-.39-1.02-.39-1.41 0l-3.98 3.98L8 2.29C7.8 2.1 7.55 2 7.29 2c-.25 0-.51.1-.7.29L2.25 6.63c-.39.39-.39 1.02 0 1.41l3.98 3.98L2.25 16c-.39.39-.39 1.02 0 1.41l4.34 4.34c.39.39 1.02.39 1.41 0l3.98-3.98 3.98 3.98c.2.2.45.29.71.29.26 0 .51-.1.71-.29l4.34-4.34c.39-.39.39-1.02 0-1.41l-3.99-3.98zM12 9c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm-4.71 1.96L3.66 7.34l3.63-3.63 3.62 3.62-3.62 3.63zM10 13c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm2 2c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm2-4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm2.66 9.34l-3.63-3.62 3.63-3.63 3.62 3.62-3.62 3.63z" /></g>
<g id="image"><path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z" /></g>
<g id="image-aspect-ratio"><path d="M16 10h-2v2h2v-2zm0 4h-2v2h2v-2zm-8-4H6v2h2v-2zm4 0h-2v2h2v-2zm8-6H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 14H4V6h16v12z" /></g>
<g id="iso"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM5.5 7.5h2v-2H9v2h2V9H9v2H7.5V9h-2V7.5zM19 19H5L19 5v14zm-2-2v-1.5h-5V17h5z" /></g>
<g id="landscape"><path d="M14 6l-3.75 5 2.85 3.8-1.6 1.2C9.81 13.75 7 10 7 10l-6 8h22L14 6z" /></g>
<g id="leak-add"><path d="M6 3H3v3c1.66 0 3-1.34 3-3zm8 0h-2c0 4.97-4.03 9-9 9v2c6.08 0 11-4.93 11-11zm-4 0H8c0 2.76-2.24 5-5 5v2c3.87 0 7-3.13 7-7zm0 18h2c0-4.97 4.03-9 9-9v-2c-6.07 0-11 4.93-11 11zm8 0h3v-3c-1.66 0-3 1.34-3 3zm-4 0h2c0-2.76 2.24-5 5-5v-2c-3.87 0-7 3.13-7 7z" /></g>
<g id="leak-remove"><path d="M10 3H8c0 .37-.04.72-.12 1.06l1.59 1.59C9.81 4.84 10 3.94 10 3zM3 4.27l2.84 2.84C5.03 7.67 4.06 8 3 8v2c1.61 0 3.09-.55 4.27-1.46L8.7 9.97C7.14 11.24 5.16 12 3 12v2c2.71 0 5.19-.99 7.11-2.62l2.5 2.5C10.99 15.81 10 18.29 10 21h2c0-2.16.76-4.14 2.03-5.69l1.43 1.43C14.55 17.91 14 19.39 14 21h2c0-1.06.33-2.03.89-2.84L19.73 21 21 19.73 4.27 3 3 4.27zM14 3h-2c0 1.5-.37 2.91-1.02 4.16l1.46 1.46C13.42 6.98 14 5.06 14 3zm5.94 13.12c.34-.08.69-.12 1.06-.12v-2c-.94 0-1.84.19-2.66.52l1.6 1.6zm-4.56-4.56l1.46 1.46C18.09 12.37 19.5 12 21 12v-2c-2.06 0-3.98.58-5.62 1.56z" /></g>
<g id="lens"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z" /></g>
<g id="linked-camera"><circle cx="12" cy="14" r="3.2" /><path d="M16 3.33c2.58 0 4.67 2.09 4.67 4.67H22c0-3.31-2.69-6-6-6v1.33M16 6c1.11 0 2 .89 2 2h1.33c0-1.84-1.49-3.33-3.33-3.33V6" /><path d="M17 9c0-1.11-.89-2-2-2V4H9L7.17 6H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V9h-5zm-5 10c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z" /></g>
<g id="looks"><path d="M12 10c-3.86 0-7 3.14-7 7h2c0-2.76 2.24-5 5-5s5 2.24 5 5h2c0-3.86-3.14-7-7-7zm0-4C5.93 6 1 10.93 1 17h2c0-4.96 4.04-9 9-9s9 4.04 9 9h2c0-6.07-4.93-11-11-11z" /></g>
<g id="looks-3"><path d="M19.01 3h-14c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-4 7.5c0 .83-.67 1.5-1.5 1.5.83 0 1.5.67 1.5 1.5V15c0 1.11-.9 2-2 2h-4v-2h4v-2h-2v-2h2V9h-4V7h4c1.1 0 2 .89 2 2v1.5z" /></g>
<g id="looks-4"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-4 14h-2v-4H9V7h2v4h2V7h2v10z" /></g>
<g id="looks-5"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-4 6h-4v2h2c1.1 0 2 .89 2 2v2c0 1.11-.9 2-2 2H9v-2h4v-2H9V7h6v2z" /></g>
<g id="looks-6"><path d="M11 15h2v-2h-2v2zm8-12H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-4 6h-4v2h2c1.1 0 2 .89 2 2v2c0 1.11-.9 2-2 2h-2c-1.1 0-2-.89-2-2V9c0-1.11.9-2 2-2h4v2z" /></g>
<g id="looks-one"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14h-2V9h-2V7h4v10z" /></g>
<g id="looks-two"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-4 8c0 1.11-.9 2-2 2h-2v2h4v2H9v-4c0-1.11.9-2 2-2h2V9H9V7h4c1.1 0 2 .89 2 2v2z" /></g>
<g id="loupe"><path d="M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.49 2 2 6.49 2 12s4.49 10 10 10h8c1.1 0 2-.9 2-2v-8c0-5.51-4.49-10-10-10zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z" /></g>
<g id="monochrome-photos"><path d="M20 5h-3.2L15 3H9L7.2 5H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 14h-8v-1c-2.8 0-5-2.2-5-5s2.2-5 5-5V7h8v12zm-3-6c0-2.8-2.2-5-5-5v1.8c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2V18c2.8 0 5-2.2 5-5zm-8.2 0c0 1.8 1.4 3.2 3.2 3.2V9.8c-1.8 0-3.2 1.4-3.2 3.2z" /></g>
<g id="movie-creation"><path d="M18 4l2 4h-3l-2-4h-2l2 4h-3l-2-4H8l2 4H7L5 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4h-4z" /></g>
<g id="movie-filter"><path d="M18 4l2 4h-3l-2-4h-2l2 4h-3l-2-4H8l2 4H7L5 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4h-4zm-6.58 11.68L10.37 18l-1.05-2.32L7 14.63l2.32-1.05 1.05-2.32 1.05 2.32 2.32 1.05-2.32 1.05zm3.69-3.47l-.53 1.16-.53-1.16-1.16-.53 1.16-.53.53-1.15.53 1.16 1.16.53-1.16.52z" /></g>
<g id="music-note"><path d="M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z" /></g>
<g id="nature"><path d="M13 16.12c3.47-.41 6.17-3.36 6.17-6.95 0-3.87-3.13-7-7-7s-7 3.13-7 7c0 3.47 2.52 6.34 5.83 6.89V20H5v2h14v-2h-6v-3.88z" /></g>
<g id="nature-people"><path d="M22.17 9.17c0-3.87-3.13-7-7-7s-7 3.13-7 7c0 3.47 2.52 6.34 5.83 6.89V20H6v-3h1v-4c0-.55-.45-1-1-1H3c-.55 0-1 .45-1 1v4h1v5h16v-2h-3v-3.88c3.47-.41 6.17-3.36 6.17-6.95zM4.5 11c.83 0 1.5-.67 1.5-1.5S5.33 8 4.5 8 3 8.67 3 9.5 3.67 11 4.5 11z" /></g>
<g id="navigate-before"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z" /></g>
<g id="navigate-next"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z" /></g>
<g id="palette"><path d="M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9c.83 0 1.5-.67 1.5-1.5 0-.39-.15-.74-.39-1.01-.23-.26-.38-.61-.38-.99 0-.83.67-1.5 1.5-1.5H16c2.76 0 5-2.24 5-5 0-4.42-4.03-8-9-8zm-5.5 9c-.83 0-1.5-.67-1.5-1.5S5.67 9 6.5 9 8 9.67 8 10.5 7.33 12 6.5 12zm3-4C8.67 8 8 7.33 8 6.5S8.67 5 9.5 5s1.5.67 1.5 1.5S10.33 8 9.5 8zm5 0c-.83 0-1.5-.67-1.5-1.5S13.67 5 14.5 5s1.5.67 1.5 1.5S15.33 8 14.5 8zm3 4c-.83 0-1.5-.67-1.5-1.5S16.67 9 17.5 9s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z" /></g>
<g id="panorama"><path d="M23 18V6c0-1.1-.9-2-2-2H3c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2zM8.5 12.5l2.5 3.01L14.5 11l4.5 6H5l3.5-4.5z" /></g>
<g id="panorama-fish-eye"><path d="M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z" /></g>
<g id="panorama-horizontal"><path d="M20 6.54v10.91c-2.6-.77-5.28-1.16-8-1.16-2.72 0-5.4.39-8 1.16V6.54c2.6.77 5.28 1.16 8 1.16 2.72.01 5.4-.38 8-1.16M21.43 4c-.1 0-.2.02-.31.06C18.18 5.16 15.09 5.7 12 5.7c-3.09 0-6.18-.55-9.12-1.64-.11-.04-.22-.06-.31-.06-.34 0-.57.23-.57.63v14.75c0 .39.23.62.57.62.1 0 .2-.02.31-.06 2.94-1.1 6.03-1.64 9.12-1.64 3.09 0 6.18.55 9.12 1.64.11.04.21.06.31.06.33 0 .57-.23.57-.63V4.63c0-.4-.24-.63-.57-.63z" /></g>
<g id="panorama-vertical"><path d="M19.94 21.12c-1.1-2.94-1.64-6.03-1.64-9.12 0-3.09.55-6.18 1.64-9.12.04-.11.06-.22.06-.31 0-.34-.23-.57-.63-.57H4.63c-.4 0-.63.23-.63.57 0 .1.02.2.06.31C5.16 5.82 5.71 8.91 5.71 12c0 3.09-.55 6.18-1.64 9.12-.05.11-.07.22-.07.31 0 .33.23.57.63.57h14.75c.39 0 .63-.24.63-.57-.01-.1-.03-.2-.07-.31zM6.54 20c.77-2.6 1.16-5.28 1.16-8 0-2.72-.39-5.4-1.16-8h10.91c-.77 2.6-1.16 5.28-1.16 8 0 2.72.39 5.4 1.16 8H6.54z" /></g>
<g id="panorama-wide-angle"><path d="M12 6c2.45 0 4.71.2 7.29.64.47 1.78.71 3.58.71 5.36 0 1.78-.24 3.58-.71 5.36-2.58.44-4.84.64-7.29.64s-4.71-.2-7.29-.64C4.24 15.58 4 13.78 4 12c0-1.78.24-3.58.71-5.36C7.29 6.2 9.55 6 12 6m0-2c-2.73 0-5.22.24-7.95.72l-.93.16-.25.9C2.29 7.85 2 9.93 2 12s.29 4.15.87 6.22l.25.89.93.16c2.73.49 5.22.73 7.95.73s5.22-.24 7.95-.72l.93-.16.25-.89c.58-2.08.87-4.16.87-6.23s-.29-4.15-.87-6.22l-.25-.89-.93-.16C17.22 4.24 14.73 4 12 4z" /></g>
<g id="photo"><path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z" /></g>
<g id="photo-album"><path d="M18 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 4h5v8l-2.5-1.5L6 12V4zm0 15l3-3.86 2.14 2.58 3-3.86L18 19H6z" /></g>
<g id="photo-camera"><circle cx="12" cy="12" r="3.2" /><path d="M9 2L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z" /></g>
<g id="photo-filter"><path d="M17.13 8.9l.59-1.3 1.3-.6-1.3-.59-.59-1.3-.59 1.3-1.31.59 1.31.6zm-4.74-2.37l-1.18 2.61-2.61 1.18 2.61 1.18 1.18 2.61 1.19-2.61 2.6-1.18-2.6-1.18zM19.02 10v9H5V5h9V3H5.02c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-9h-2z" /></g>
<g id="photo-library"><path d="M22 16V4c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2zm-11-4l2.03 2.71L16 11l4 5H8l3-4zM2 6v14c0 1.1.9 2 2 2h14v-2H4V6H2z" /></g>
<g id="photo-size-select-actual"><path d="M21 3H3C2 3 1 4 1 5v14c0 1.1.9 2 2 2h18c1 0 2-1 2-2V5c0-1-1-2-2-2zM5 17l3.5-4.5 2.5 3.01L14.5 11l4.5 6H5z" /></g>
<g id="photo-size-select-large"><path d="M21 15h2v2h-2v-2zm0-4h2v2h-2v-2zm2 8h-2v2c1 0 2-1 2-2zM13 3h2v2h-2V3zm8 4h2v2h-2V7zm0-4v2h2c0-1-1-2-2-2zM1 7h2v2H1V7zm16-4h2v2h-2V3zm0 16h2v2h-2v-2zM3 3C2 3 1 4 1 5h2V3zm6 0h2v2H9V3zM5 3h2v2H5V3zm-4 8v8c0 1.1.9 2 2 2h12V11H1zm2 8l2.5-3.21 1.79 2.15 2.5-3.22L13 19H3z" /></g>
<g id="photo-size-select-small"><path d="M23 15h-2v2h2v-2zm0-4h-2v2h2v-2zm0 8h-2v2c1 0 2-1 2-2zM15 3h-2v2h2V3zm8 4h-2v2h2V7zm-2-4v2h2c0-1-1-2-2-2zM3 21h8v-6H1v4c0 1.1.9 2 2 2zM3 7H1v2h2V7zm12 12h-2v2h2v-2zm4-16h-2v2h2V3zm0 16h-2v2h2v-2zM3 3C2 3 1 4 1 5h2V3zm0 8H1v2h2v-2zm8-8H9v2h2V3zM7 3H5v2h2V3z" /></g>
<g id="picture-as-pdf"><path d="M20 2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-8.5 7.5c0 .83-.67 1.5-1.5 1.5H9v2H7.5V7H10c.83 0 1.5.67 1.5 1.5v1zm5 2c0 .83-.67 1.5-1.5 1.5h-2.5V7H15c.83 0 1.5.67 1.5 1.5v3zm4-3H19v1h1.5V11H19v2h-1.5V7h3v1.5zM9 9.5h1v-1H9v1zM4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm10 5.5h1v-3h-1v3z" /></g>
<g id="portrait"><path d="M12 12.25c1.24 0 2.25-1.01 2.25-2.25S13.24 7.75 12 7.75 9.75 8.76 9.75 10s1.01 2.25 2.25 2.25zm4.5 4c0-1.5-3-2.25-4.5-2.25s-4.5.75-4.5 2.25V17h9v-.75zM19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14z" /></g>
<g id="remove-red-eye"><path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z" /></g>
<g id="rotate-90-degrees-ccw"><path d="M7.34 6.41L.86 12.9l6.49 6.48 6.49-6.48-6.5-6.49zM3.69 12.9l3.66-3.66L11 12.9l-3.66 3.66-3.65-3.66zm15.67-6.26C17.61 4.88 15.3 4 13 4V.76L8.76 5 13 9.24V6c1.79 0 3.58.68 4.95 2.05 2.73 2.73 2.73 7.17 0 9.9C16.58 19.32 14.79 20 13 20c-.97 0-1.94-.21-2.84-.61l-1.49 1.49C10.02 21.62 11.51 22 13 22c2.3 0 4.61-.88 6.36-2.64 3.52-3.51 3.52-9.21 0-12.72z" /></g>
<g id="rotate-left"><path d="M7.11 8.53L5.7 7.11C4.8 8.27 4.24 9.61 4.07 11h2.02c.14-.87.49-1.72 1.02-2.47zM6.09 13H4.07c.17 1.39.72 2.73 1.62 3.89l1.41-1.42c-.52-.75-.87-1.59-1.01-2.47zm1.01 5.32c1.16.9 2.51 1.44 3.9 1.61V17.9c-.87-.15-1.71-.49-2.46-1.03L7.1 18.32zM13 4.07V1L8.45 5.55 13 10V6.09c2.84.48 5 2.94 5 5.91s-2.16 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93s-3.05-7.44-7-7.93z" /></g>
<g id="rotate-right"><path d="M15.55 5.55L11 1v3.07C7.06 4.56 4 7.92 4 12s3.05 7.44 7 7.93v-2.02c-2.84-.48-5-2.94-5-5.91s2.16-5.43 5-5.91V10l4.55-4.45zM19.93 11c-.17-1.39-.72-2.73-1.62-3.89l-1.42 1.42c.54.75.88 1.6 1.02 2.47h2.02zM13 17.9v2.02c1.39-.17 2.74-.71 3.9-1.61l-1.44-1.44c-.75.54-1.59.89-2.46 1.03zm3.89-2.42l1.42 1.41c.9-1.16 1.45-2.5 1.62-3.89h-2.02c-.14.87-.48 1.72-1.02 2.48z" /></g>
<g id="slideshow"><path d="M10 8v8l5-4-5-4zm9-5H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14z" /></g>
<g id="straighten"><path d="M21 6H3c-1.1 0-2 .9-2 2v8c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm0 10H3V8h2v4h2V8h2v4h2V8h2v4h2V8h2v4h2V8h2v8z" /></g>
<g id="style"><path d="M2.53 19.65l1.34.56v-9.03l-2.43 5.86c-.41 1.02.08 2.19 1.09 2.61zm19.5-3.7L17.07 3.98c-.31-.75-1.04-1.21-1.81-1.23-.26 0-.53.04-.79.15L7.1 5.95c-.75.31-1.21 1.03-1.23 1.8-.01.27.04.54.15.8l4.96 11.97c.31.76 1.05 1.22 1.83 1.23.26 0 .52-.05.77-.15l7.36-3.05c1.02-.42 1.51-1.59 1.09-2.6zM7.88 8.75c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm-2 11c0 1.1.9 2 2 2h1.45l-3.45-8.34v6.34z" /></g>
<g id="switch-camera"><path d="M20 4h-3.17L15 2H9L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-5 11.5V13H9v2.5L5.5 12 9 8.5V11h6V8.5l3.5 3.5-3.5 3.5z" /></g>
<g id="switch-video"><path d="M18 9.5V6c0-.55-.45-1-1-1H3c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h14c.55 0 1-.45 1-1v-3.5l4 4v-13l-4 4zm-5 6V13H7v2.5L3.5 12 7 8.5V11h6V8.5l3.5 3.5-3.5 3.5z" /></g>
<g id="tag-faces"><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z" /></g>
<g id="texture"><path d="M19.51 3.08L3.08 19.51c.09.34.27.65.51.9.25.24.56.42.9.51L20.93 4.49c-.19-.69-.73-1.23-1.42-1.41zM11.88 3L3 11.88v2.83L14.71 3h-2.83zM5 3c-1.1 0-2 .9-2 2v2l4-4H5zm14 18c.55 0 1.05-.22 1.41-.59.37-.36.59-.86.59-1.41v-2l-4 4h2zm-9.71 0h2.83L21 12.12V9.29L9.29 21z" /></g>
<g id="timelapse"><path d="M16.24 7.76C15.07 6.59 13.54 6 12 6v6l-4.24 4.24c2.34 2.34 6.14 2.34 8.49 0 2.34-2.34 2.34-6.14-.01-8.48zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z" /></g>
<g id="timer"><path d="M15 1H9v2h6V1zm-4 13h2V8h-2v6zm8.03-6.61l1.42-1.42c-.43-.51-.9-.99-1.41-1.41l-1.42 1.42C16.07 4.74 14.12 4 12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9 9-4.03 9-9c0-2.12-.74-4.07-1.97-5.61zM12 20c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z" /></g>
<g id="timer-10"><path d="M0 7.72V9.4l3-1V18h2V6h-.25L0 7.72zm23.78 6.65c-.14-.28-.35-.53-.63-.74-.28-.21-.61-.39-1.01-.53s-.85-.27-1.35-.38c-.35-.07-.64-.15-.87-.23-.23-.08-.41-.16-.55-.25-.14-.09-.23-.19-.28-.3-.05-.11-.08-.24-.08-.39 0-.14.03-.28.09-.41.06-.13.15-.25.27-.34.12-.1.27-.18.45-.24s.4-.09.64-.09c.25 0 .47.04.66.11.19.07.35.17.48.29.13.12.22.26.29.42.06.16.1.32.1.49h1.95c0-.39-.08-.75-.24-1.09-.16-.34-.39-.63-.69-.88-.3-.25-.66-.44-1.09-.59C21.49 9.07 21 9 20.46 9c-.51 0-.98.07-1.39.21-.41.14-.77.33-1.06.57-.29.24-.51.52-.67.84-.16.32-.23.65-.23 1.01s.08.69.23.96c.15.28.36.52.64.73.27.21.6.38.98.53.38.14.81.26 1.27.36.39.08.71.17.95.26s.43.19.57.29c.13.1.22.22.27.34.05.12.07.25.07.39 0 .32-.13.57-.4.77-.27.2-.66.29-1.17.29-.22 0-.43-.02-.64-.08-.21-.05-.4-.13-.56-.24-.17-.11-.3-.26-.41-.44-.11-.18-.17-.41-.18-.67h-1.89c0 .36.08.71.24 1.05.16.34.39.65.7.93.31.27.69.49 1.15.66.46.17.98.25 1.58.25.53 0 1.01-.06 1.44-.19.43-.13.8-.31 1.11-.54.31-.23.54-.51.71-.83.17-.32.25-.67.25-1.06-.02-.4-.09-.74-.24-1.02zm-9.96-7.32c-.34-.4-.75-.7-1.23-.88-.47-.18-1.01-.27-1.59-.27-.58 0-1.11.09-1.59.27-.48.18-.89.47-1.23.88-.34.41-.6.93-.79 1.59-.18.65-.28 1.45-.28 2.39v1.92c0 .94.09 1.74.28 2.39.19.66.45 1.19.8 1.6.34.41.75.71 1.23.89.48.18 1.01.28 1.59.28.59 0 1.12-.09 1.59-.28.48-.18.88-.48 1.22-.89.34-.41.6-.94.78-1.6.18-.65.28-1.45.28-2.39v-1.92c0-.94-.09-1.74-.28-2.39-.18-.66-.44-1.19-.78-1.59zm-.92 6.17c0 .6-.04 1.11-.12 1.53-.08.42-.2.76-.36 1.02-.16.26-.36.45-.59.57-.23.12-.51.18-.82.18-.3 0-.58-.06-.82-.18s-.44-.31-.6-.57c-.16-.26-.29-.6-.38-1.02-.09-.42-.13-.93-.13-1.53v-2.5c0-.6.04-1.11.13-1.52.09-.41.21-.74.38-1 .16-.25.36-.43.6-.55.24-.11.51-.17.81-.17.31 0 .58.06.81.17.24.11.44.29.6.55.16.25.29.58.37.99.08.41.13.92.13 1.52v2.51z" /></g>
<g id="timer-3"><path d="M11.61 12.97c-.16-.24-.36-.46-.62-.65-.25-.19-.56-.35-.93-.48.3-.14.57-.3.8-.5.23-.2.42-.41.57-.64.15-.23.27-.46.34-.71.08-.24.11-.49.11-.73 0-.55-.09-1.04-.28-1.46-.18-.42-.44-.77-.78-1.06-.33-.28-.73-.5-1.2-.64-.45-.13-.97-.2-1.53-.2-.55 0-1.06.08-1.52.24-.47.17-.87.4-1.2.69-.33.29-.6.63-.78 1.03-.2.39-.29.83-.29 1.29h1.98c0-.26.05-.49.14-.69.09-.2.22-.38.38-.52.17-.14.36-.25.58-.33.22-.08.46-.12.73-.12.61 0 1.06.16 1.36.47.3.31.44.75.44 1.32 0 .27-.04.52-.12.74-.08.22-.21.41-.38.57-.17.16-.38.28-.63.37-.25.09-.55.13-.89.13H6.72v1.57H7.9c.34 0 .64.04.91.11.27.08.5.19.69.35.19.16.34.36.44.61.1.24.16.54.16.87 0 .62-.18 1.09-.53 1.42-.35.33-.84.49-1.45.49-.29 0-.56-.04-.8-.13-.24-.08-.44-.2-.61-.36-.17-.16-.3-.34-.39-.56-.09-.22-.14-.46-.14-.72H4.19c0 .55.11 1.03.32 1.45.21.42.5.77.86 1.05s.77.49 1.24.63.96.21 1.48.21c.57 0 1.09-.08 1.58-.23.49-.15.91-.38 1.26-.68.36-.3.64-.66.84-1.1.2-.43.3-.93.3-1.48 0-.29-.04-.58-.11-.86-.08-.25-.19-.51-.35-.76zm9.26 1.4c-.14-.28-.35-.53-.63-.74-.28-.21-.61-.39-1.01-.53s-.85-.27-1.35-.38c-.35-.07-.64-.15-.87-.23-.23-.08-.41-.16-.55-.25-.14-.09-.23-.19-.28-.3-.05-.11-.08-.24-.08-.39s.03-.28.09-.41c.06-.13.15-.25.27-.34.12-.1.27-.18.45-.24s.4-.09.64-.09c.25 0 .47.04.66.11.19.07.35.17.48.29.13.12.22.26.29.42.06.16.1.32.1.49h1.95c0-.39-.08-.75-.24-1.09-.16-.34-.39-.63-.69-.88-.3-.25-.66-.44-1.09-.59-.43-.15-.92-.22-1.46-.22-.51 0-.98.07-1.39.21-.41.14-.77.33-1.06.57-.29.24-.51.52-.67.84-.16.32-.23.65-.23 1.01s.08.68.23.96c.15.28.37.52.64.73.27.21.6.38.98.53.38.14.81.26 1.27.36.39.08.71.17.95.26s.43.19.57.29c.13.1.22.22.27.34.05.12.07.25.07.39 0 .32-.13.57-.4.77-.27.2-.66.29-1.17.29-.22 0-.43-.02-.64-.08-.21-.05-.4-.13-.56-.24-.17-.11-.3-.26-.41-.44-.11-.18-.17-.41-.18-.67h-1.89c0 .36.08.71.24 1.05.16.34.39.65.7.93.31.27.69.49 1.15.66.46.17.98.25 1.58.25.53 0 1.01-.06 1.44-.19.43-.13.8-.31 1.11-.54.31-.23.54-.51.71-.83.17-.32.25-.67.25-1.06-.02-.4-.09-.74-.24-1.02z" /></g>
<g id="timer-off"><path d="M19.04 4.55l-1.42 1.42C16.07 4.74 14.12 4 12 4c-1.83 0-3.53.55-4.95 1.48l1.46 1.46C9.53 6.35 10.73 6 12 6c3.87 0 7 3.13 7 7 0 1.27-.35 2.47-.94 3.49l1.45 1.45C20.45 16.53 21 14.83 21 13c0-2.12-.74-4.07-1.97-5.61l1.42-1.42-1.41-1.42zM15 1H9v2h6V1zm-4 8.44l2 2V8h-2v1.44zM3.02 4L1.75 5.27 4.5 8.03C3.55 9.45 3 11.16 3 13c0 4.97 4.02 9 9 9 1.84 0 3.55-.55 4.98-1.5l2.5 2.5 1.27-1.27-7.71-7.71L3.02 4zM12 20c-3.87 0-7-3.13-7-7 0-1.28.35-2.48.95-3.52l9.56 9.56c-1.03.61-2.23.96-3.51.96z" /></g>
<g id="tonality"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.94-.49-7-3.85-7-7.93s3.05-7.44 7-7.93v15.86zm2-15.86c1.03.13 2 .45 2.87.93H13v-.93zM13 7h5.24c.25.31.48.65.68 1H13V7zm0 3h6.74c.08.33.15.66.19 1H13v-1zm0 9.93V19h2.87c-.87.48-1.84.8-2.87.93zM18.24 17H13v-1h5.92c-.2.35-.43.69-.68 1zm1.5-3H13v-1h6.93c-.04.34-.11.67-.19 1z" /></g>
<g id="transform"><path d="M22 18v-2H8V4h2L7 1 4 4h2v2H2v2h4v8c0 1.1.9 2 2 2h8v2h-2l3 3 3-3h-2v-2h4zM10 8h6v6h2V8c0-1.1-.9-2-2-2h-6v2z" /></g>
<g id="tune"><path d="M3 17v2h6v-2H3zM3 5v2h10V5H3zm10 16v-2h8v-2h-8v-2h-2v6h2zM7 9v2H3v2h4v2h2V9H7zm14 4v-2H11v2h10zm-6-4h2V7h4V5h-4V3h-2v6z" /></g>
<g id="view-comfy"><path d="M3 9h4V5H3v4zm0 5h4v-4H3v4zm5 0h4v-4H8v4zm5 0h4v-4h-4v4zM8 9h4V5H8v4zm5-4v4h4V5h-4zm5 9h4v-4h-4v4zM3 19h4v-4H3v4zm5 0h4v-4H8v4zm5 0h4v-4h-4v4zm5 0h4v-4h-4v4zm0-14v4h4V5h-4z" /></g>
<g id="view-compact"><path d="M3 19h6v-7H3v7zm7 0h12v-7H10v7zM3 5v6h19V5H3z" /></g>
<g id="vignette"><path d="M21 3H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-9 15c-4.42 0-8-2.69-8-6s3.58-6 8-6 8 2.69 8 6-3.58 6-8 6z" /></g>
<g id="wb-auto"><path d="M6.85 12.65h2.3L8 9l-1.15 3.65zM22 7l-1.2 6.29L19.3 7h-1.6l-1.49 6.29L15 7h-.76C12.77 5.17 10.53 4 8 4c-4.42 0-8 3.58-8 8s3.58 8 8 8c3.13 0 5.84-1.81 7.15-4.43l.1.43H17l1.5-6.1L20 16h1.75l2.05-9H22zm-11.7 9l-.7-2H6.4l-.7 2H3.8L7 7h2l3.2 9h-1.9z" /></g>
<g id="wb-cloudy"><path d="M19.36 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.64-4.96z" /></g>
<g id="wb-incandescent"><path d="M3.55 18.54l1.41 1.41 1.79-1.8-1.41-1.41-1.79 1.8zM11 22.45h2V19.5h-2v2.95zM4 10.5H1v2h3v-2zm11-4.19V1.5H9v4.81C7.21 7.35 6 9.28 6 11.5c0 3.31 2.69 6 6 6s6-2.69 6-6c0-2.22-1.21-4.15-3-5.19zm5 4.19v2h3v-2h-3zm-2.76 7.66l1.79 1.8 1.41-1.41-1.8-1.79-1.4 1.4z" /></g>
<g id="wb-iridescent"><path d="M5 14.5h14v-6H5v6zM11 .55V3.5h2V.55h-2zm8.04 2.5l-1.79 1.79 1.41 1.41 1.8-1.79-1.42-1.41zM13 22.45V19.5h-2v2.95h2zm7.45-3.91l-1.8-1.79-1.41 1.41 1.79 1.8 1.42-1.42zM3.55 4.46l1.79 1.79 1.41-1.41-1.79-1.79-1.41 1.41zm1.41 15.49l1.79-1.8-1.41-1.41-1.79 1.79 1.41 1.42z" /></g>
<g id="wb-sunny"><path d="M6.76 4.84l-1.8-1.79-1.41 1.41 1.79 1.79 1.42-1.41zM4 10.5H1v2h3v-2zm9-9.95h-2V3.5h2V.55zm7.45 3.91l-1.41-1.41-1.79 1.79 1.41 1.41 1.79-1.79zm-3.21 13.7l1.79 1.8 1.41-1.41-1.8-1.79-1.4 1.4zM20 10.5v2h3v-2h-3zm-8-5c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6-2.69-6-6-6zm-1 16.95h2V19.5h-2v2.95zm-7.45-3.91l1.41 1.41 1.79-1.8-1.41-1.41-1.79 1.8z" /></g>
</defs></svg>
</iron-iconset-svg>










<dom-module id="iron-a11y-announcer">
  <template>
    <style>
      :host {
        display: inline-block;
        position: fixed;
        clip: rect(0px,0px,0px,0px);
      }
    </style>
    <div aria-live$="[[mode]]">[[_text]]</div>
  </template>

  <script>//~~WEBPATH~~/iron-a11y-announcer/iron-a11y-announcer.html.js
Polymer.IronA11yAnnouncer=function(){};Polymer.IronA11yAnnouncer=Polymer({is:"iron-a11y-announcer",properties:{mode:{type:String,value:"polite"},_text:{type:String,value:""}},created:function(){Polymer.IronA11yAnnouncer.instance||(Polymer.IronA11yAnnouncer.instance=this);document.body.addEventListener("iron-announce",this._onIronAnnounce.bind(this))},announce:function(a){this._text="";this.async(function(){this._text=a},100)},_onIronAnnounce:function(a){a.detail&&a.detail.text&&this.announce(a.detail.text)}});
Polymer.IronA11yAnnouncer.instance=null;Polymer.IronA11yAnnouncer.requestAvailability=function(){Polymer.IronA11yAnnouncer.instance||(Polymer.IronA11yAnnouncer.instance=document.createElement("iron-a11y-announcer"));document.body.appendChild(Polymer.IronA11yAnnouncer.instance)};
</script>
</dom-module>



<script>//~~WEBPATH~~/iron-input/iron-input.html.js
Polymer({is:"iron-input",extends:"input",behaviors:[Polymer.IronValidatableBehavior],properties:{bindValue:{observer:"_bindValueChanged",type:String},preventInvalidInput:{type:Boolean},allowedPattern:{type:String,observer:"_allowedPatternChanged"},_previousValidInput:{type:String,value:""},_patternAlreadyChecked:{type:Boolean,value:!1}},listeners:{input:"_onInput",keypress:"_onKeypress"},registered:function(){this._canDispatchEventOnDisabled()||(this._origDispatchEvent=this.dispatchEvent,this.dispatchEvent=
this._dispatchEventFirefoxIE)},created:function(){Polymer.IronA11yAnnouncer.requestAvailability()},_canDispatchEventOnDisabled:function(){var a=document.createElement("input"),b=!1;a.disabled=!0;a.addEventListener("feature-check-dispatch-event",function(){b=!0});try{a.dispatchEvent(new Event("feature-check-dispatch-event"))}catch(c){}return b},_dispatchEventFirefoxIE:function(){var a=this.disabled;this.disabled=!1;this._origDispatchEvent.apply(this,arguments);this.disabled=a},get _patternRegExp(){if(this.allowedPattern)var a=
new RegExp(this.allowedPattern);else switch(this.type){case "number":a=/[0-9.,e-]/}return a},ready:function(){this.bindValue=this.value},_bindValueChanged:function(){this.value!==this.bindValue&&(this.value=this.bindValue||0===this.bindValue||!1===this.bindValue?this.bindValue:"");this.fire("bind-value-changed",{value:this.bindValue})},_allowedPatternChanged:function(){this.preventInvalidInput=this.allowedPattern?!0:!1},_onInput:function(){!this.preventInvalidInput||this._patternAlreadyChecked||this._checkPatternValidity()||
(this._announceInvalidCharacter("Invalid string of characters not entered."),this.value=this._previousValidInput);this._previousValidInput=this.bindValue=this.value;this._patternAlreadyChecked=!1},_isPrintable:function(a){var b=19==a.keyCode||20==a.keyCode||45==a.keyCode||46==a.keyCode||144==a.keyCode||145==a.keyCode||32<a.keyCode&&41>a.keyCode||111<a.keyCode&&124>a.keyCode;return!(8==a.keyCode||9==a.keyCode||13==a.keyCode||27==a.keyCode)&&!(0==a.charCode&&b)},_onKeypress:function(a){if(this.preventInvalidInput||
"number"===this.type){var b=this._patternRegExp;if(b&&!(a.metaKey||a.ctrlKey||a.altKey)){this._patternAlreadyChecked=!0;var c=String.fromCharCode(a.charCode);this._isPrintable(a)&&!b.test(c)&&(a.preventDefault(),this._announceInvalidCharacter("Invalid character "+c+" not entered."))}}},_checkPatternValidity:function(){var a=this._patternRegExp;if(!a)return!0;for(var b=0;b<this.value.length;b++)if(!a.test(this.value[b]))return!1;return!0},validate:function(){var a=this.checkValidity();a&&(this.required&&
""===this.value?a=!1:this.hasValidator()&&(a=Polymer.IronValidatableBehavior.validate.call(this,this.value)));this.invalid=!a;this.fire("iron-input-validate");return a},_announceInvalidCharacter:function(a){this.fire("iron-announce",{text:a})}});
</script>





<script>//~~WEBPATH~~/paper-input/paper-input-behavior.html.js
Polymer.PaperInputHelper={};Polymer.PaperInputHelper.NextLabelID=1;Polymer.PaperInputHelper.NextAddonID=1;
Polymer.PaperInputBehaviorImpl={properties:{label:{type:String},value:{notify:!0,type:String},disabled:{type:Boolean,value:!1},invalid:{type:Boolean,value:!1,notify:!0},preventInvalidInput:{type:Boolean},allowedPattern:{type:String},type:{type:String},list:{type:String},pattern:{type:String},required:{type:Boolean,value:!1},errorMessage:{type:String},charCounter:{type:Boolean,value:!1},noLabelFloat:{type:Boolean,value:!1},alwaysFloatLabel:{type:Boolean,value:!1},autoValidate:{type:Boolean,value:!1},
validator:{type:String},autocomplete:{type:String,value:"off"},autofocus:{type:Boolean,observer:"_autofocusChanged"},inputmode:{type:String},minlength:{type:Number},maxlength:{type:Number},min:{type:String},max:{type:String},step:{type:String},name:{type:String},placeholder:{type:String,value:""},readonly:{type:Boolean,value:!1},size:{type:Number},autocapitalize:{type:String,value:"none"},autocorrect:{type:String,value:"off"},autosave:{type:String},results:{type:Number},accept:{type:String},multiple:{type:Boolean},
_ariaDescribedBy:{type:String,value:""},_ariaLabelledBy:{type:String,value:""}},listeners:{"addon-attached":"_onAddonAttached"},keyBindings:{"shift+tab:keydown":"_onShiftTabDown"},hostAttributes:{tabindex:0},get inputElement(){return this.$.input},get _focusableElement(){return this.inputElement},registered:function(){this._typesThatHaveText="date datetime datetime-local month time week file".split(" ")},attached:function(){this._updateAriaLabelledBy();this.inputElement&&-1!==this._typesThatHaveText.indexOf(this.inputElement.type)&&
(this.alwaysFloatLabel=!0)},_appendStringWithSpace:function(a,b){return a?a+" "+b:b},_onAddonAttached:function(a){a=a.path?a.path[0]:a.target;if(a.id)this._ariaDescribedBy=this._appendStringWithSpace(this._ariaDescribedBy,a.id);else{var b="paper-input-add-on-"+Polymer.PaperInputHelper.NextAddonID++;a.id=b;this._ariaDescribedBy=this._appendStringWithSpace(this._ariaDescribedBy,b)}},validate:function(){return this.inputElement.validate()},_focusBlurHandler:function(a){Polymer.IronControlState._focusBlurHandler.call(this,
a);this.focused&&!this._shiftTabPressed&&this._focusableElement.focus()},_onShiftTabDown:function(){var a=this.getAttribute("tabindex");this._shiftTabPressed=!0;this.setAttribute("tabindex","-1");this.async(function(){this.setAttribute("tabindex",a);this._shiftTabPressed=!1},1)},_handleAutoValidate:function(){this.autoValidate&&this.validate()},updateValueAndPreserveCaret:function(a){try{var b=this.inputElement.selectionStart;this.value=a;this.inputElement.selectionStart=b;this.inputElement.selectionEnd=
b}catch(c){this.value=a}},_computeAlwaysFloatLabel:function(a,b){return b||a},_updateAriaLabelledBy:function(){var a=Polymer.dom(this.root).querySelector("label");if(a){if(a.id)var b=a.id;else b="paper-input-label-"+Polymer.PaperInputHelper.NextLabelID++,a.id=b;this._ariaLabelledBy=b}else this._ariaLabelledBy=""},_onChange:function(a){this.shadowRoot&&this.fire(a.type,{sourceEvent:a},{node:this,bubbles:a.bubbles,cancelable:a.cancelable})},_autofocusChanged:function(){if(this.autofocus&&this._focusableElement){var a=
document.activeElement;a instanceof HTMLElement&&a!==document.body&&a!==document.documentElement||this._focusableElement.focus()}}};Polymer.PaperInputBehavior=[Polymer.IronControlState,Polymer.IronA11yKeysBehavior,Polymer.PaperInputBehaviorImpl];
</script>



<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:400,300,300italic,400italic,500,500italic,700,700italic">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,700">


<style is="custom-style">

  :root {

    /* Shared Styles */
    --paper-font-common-base: {
      font-family: 'Roboto', 'Noto', sans-serif;
      -webkit-font-smoothing: antialiased;
    };

    --paper-font-common-code: {
      font-family: 'Roboto Mono', 'Consolas', 'Menlo', monospace;
      -webkit-font-smoothing: antialiased;
    };

    --paper-font-common-expensive-kerning: {
      text-rendering: optimizeLegibility;
    };

    --paper-font-common-nowrap: {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    };

    /* Material Font Styles */

    --paper-font-display4: {
      @apply(--paper-font-common-base);
      @apply(--paper-font-common-nowrap);

      font-size: 112px;
      font-weight: 300;
      letter-spacing: -.044em;
      line-height: 120px;
    };

    --paper-font-display3: {
      @apply(--paper-font-common-base);
      @apply(--paper-font-common-nowrap);

      font-size: 56px;
      font-weight: 400;
      letter-spacing: -.026em;
      line-height: 60px;
    };

    --paper-font-display2: {
      @apply(--paper-font-common-base);

      font-size: 45px;
      font-weight: 400;
      letter-spacing: -.018em;
      line-height: 48px;
    };

    --paper-font-display1: {
      @apply(--paper-font-common-base);

      font-size: 34px;
      font-weight: 400;
      letter-spacing: -.01em;
      line-height: 40px;
    };

    --paper-font-headline: {
      @apply(--paper-font-common-base);

      font-size: 24px;
      font-weight: 400;
      letter-spacing: -.012em;
      line-height: 32px;
    };

    --paper-font-title: {
      @apply(--paper-font-common-base);
      @apply(--paper-font-common-nowrap);

      font-size: 20px;
      font-weight: 500;
      line-height: 28px;
    };

    --paper-font-subhead: {
      @apply(--paper-font-common-base);

      font-size: 16px;
      font-weight: 400;
      line-height: 24px;
    };

    --paper-font-body2: {
      @apply(--paper-font-common-base);

      font-size: 14px;
      font-weight: 500;
      line-height: 24px;
    };

    --paper-font-body1: {
      @apply(--paper-font-common-base);

      font-size: 14px;
      font-weight: 400;
      line-height: 20px;
    };

    --paper-font-caption: {
      @apply(--paper-font-common-base);
      @apply(--paper-font-common-nowrap);

      font-size: 12px;
      font-weight: 400;
      letter-spacing: 0.011em;
      line-height: 20px;
    };

    --paper-font-menu: {
      @apply(--paper-font-common-base);
      @apply(--paper-font-common-nowrap);

      font-size: 13px;
      font-weight: 500;
      line-height: 24px;
    };

    --paper-font-button: {
      @apply(--paper-font-common-base);
      @apply(--paper-font-common-nowrap);

      font-size: 14px;
      font-weight: 500;
      letter-spacing: 0.018em;
      line-height: 24px;
      text-transform: uppercase;
    };

    --paper-font-code2: {
      @apply(--paper-font-common-code);

      font-size: 14px;
      font-weight: 700;
      line-height: 20px;
    };

    --paper-font-code1: {
      @apply(--paper-font-common-code);

      font-size: 14px;
      font-weight: 500;
      line-height: 20px;
    };

  }

</style>



<script>//~~WEBPATH~~/paper-input/paper-input-addon-behavior.html.js
Polymer.PaperInputAddonBehavior={hostAttributes:{"add-on":""},attached:function(){this.fire("addon-attached")},update:function(){}};
</script>




<dom-module id="paper-input-char-counter">
  <template>
    <style>
      :host {
        display: inline-block;
        float: right;

        @apply(--paper-font-caption);
        @apply(--paper-input-char-counter);
      }

      :host([hidden]) {
        display: none !important;
      }

      :host-context([dir="rtl"]) {
        float: left;
      }
    </style>

    <span>[[_charCounterStr]]</span>
  </template>
</dom-module>

<script>//~~WEBPATH~~/paper-input/paper-input-char-counter.html.js
Polymer({is:"paper-input-char-counter",behaviors:[Polymer.PaperInputAddonBehavior],properties:{_charCounterStr:{type:String,value:"0"}},update:function(a){if(a.inputElement){a.value=a.value||"";var b=a.value.toString().length.toString();a.inputElement.hasAttribute("maxlength")&&(b+="/"+a.inputElement.getAttribute("maxlength"));this._charCounterStr=b}}});
</script>








<dom-module id="paper-input-container">
  <template>
    <style>
      :host {
        display: block;
        padding: 8px 0;

        @apply(--paper-input-container);
      }

      :host([inline]) {
        display: inline-block;
      }

      :host([disabled]) {
        pointer-events: none;
        opacity: 0.33;

        @apply(--paper-input-container-disabled);
      }

      :host([hidden]) {
        display: none !important;
      }

      .floated-label-placeholder {
        @apply(--paper-font-caption);
      }

      .underline {
        position: relative;
      }

      .focused-line {
        @apply(--layout-fit);

        background: var(--paper-input-container-focus-color, --primary-color);
        height: 2px;

        -webkit-transform-origin: center center;
        transform-origin: center center;
        -webkit-transform: scale3d(0,1,1);
        transform: scale3d(0,1,1);

        @apply(--paper-input-container-underline-focus);
      }

      .underline.is-highlighted .focused-line {
        -webkit-transform: none;
        transform: none;
        -webkit-transition: -webkit-transform 0.25s;
        transition: transform 0.25s;

        @apply(--paper-transition-easing);
      }

      .underline.is-invalid .focused-line {
        background: var(--paper-input-container-invalid-color, --error-color);
        -webkit-transform: none;
        transform: none;
        -webkit-transition: -webkit-transform 0.25s;
        transition: transform 0.25s;

        @apply(--paper-transition-easing);
      }

      .unfocused-line {
        @apply(--layout-fit);

        background: var(--paper-input-container-color, --secondary-text-color);
        height: 1px;

        @apply(--paper-input-container-underline);
      }

      :host([disabled]) .unfocused-line {
        border-bottom: 1px dashed;
        border-color: var(--paper-input-container-color, --secondary-text-color);
        background: transparent;

        @apply(--paper-input-container-underline-disabled);
      }

      .label-and-input-container {
        @apply(--layout-flex-auto);
        @apply(--layout-relative);

        width: 100%;
        max-width: 100%;
      }

      .input-content {
        @apply(--layout-horizontal);
        @apply(--layout-center);

        position: relative;
      }

      .input-content ::content label,
      .input-content ::content .paper-input-label {
        position: absolute;
        top: 0;
        right: 0;
        left: 0;
        width: 100%;
        font: inherit;
        color: var(--paper-input-container-color, --secondary-text-color);
        -webkit-transition: -webkit-transform 0.25s, width 0.25s;
        transition: transform 0.25s, width 0.25s;
        -webkit-transform-origin: left top;
        transform-origin: left top;

        @apply(--paper-font-common-nowrap);
        @apply(--paper-font-subhead);
        @apply(--paper-input-container-label);
        @apply(--paper-transition-easing);
      }

      .input-content.label-is-floating ::content label,
      .input-content.label-is-floating ::content .paper-input-label {
        -webkit-transform: translateY(-75%) scale(0.75);
        transform: translateY(-75%) scale(0.75);

        /* Since we scale to 75/100 of the size, we actually have 100/75 of the
        original space now available */
        width: 133%;

        @apply(--paper-input-container-label-floating);
      }

      :host-context([dir="rtl"]) .input-content.label-is-floating ::content label,
      :host-context([dir="rtl"]) .input-content.label-is-floating ::content .paper-input-label {
        /* TODO(noms): Figure out why leaving the width at 133% before the animation
         * actually makes
         * it wider on the right side, not left side, as you would expect in RTL */
        width: 100%;
        -webkit-transform-origin: right top;
        transform-origin: right top;
      }

      .input-content.label-is-highlighted ::content label,
      .input-content.label-is-highlighted ::content .paper-input-label {
        color: var(--paper-input-container-focus-color, --primary-color);

        @apply(--paper-input-container-label-focus);
      }

      .input-content.is-invalid ::content label,
      .input-content.is-invalid ::content .paper-input-label {
        color: var(--paper-input-container-invalid-color, --error-color);
      }

      .input-content.label-is-hidden ::content label,
      .input-content.label-is-hidden ::content .paper-input-label {
        visibility: hidden;
      }

      .input-content ::content input,
      .input-content ::content textarea,
      .input-content ::content iron-autogrow-textarea,
      .input-content ::content .paper-input-input {
        position: relative; /* to make a stacking context */
        outline: none;
        box-shadow: none;
        padding: 0;
        width: 100%;
        max-width: 100%;
        background: transparent;
        border: none;
        color: var(--paper-input-container-input-color, --primary-text-color);
        -webkit-appearance: none;
        text-align: inherit;

        @apply(--paper-font-subhead);
        @apply(--paper-input-container-input);
      }

      ::content [prefix] {
        @apply(--paper-font-subhead);

        @apply(--paper-input-prefix);
        @apply(--layout-flex-none);
      }

      ::content [suffix] {
        @apply(--paper-font-subhead);

        @apply(--paper-input-suffix);
        @apply(--layout-flex-none);
      }

      /* Firefox sets a min-width on the input, which can cause layout issues */
      .input-content ::content input {
        min-width: 0;
      }

      .input-content ::content textarea {
        resize: none;
      }

      .add-on-content {
        position: relative;
      }

      .add-on-content.is-invalid ::content * {
        color: var(--paper-input-container-invalid-color, --error-color);
      }

      .add-on-content.is-highlighted ::content * {
        color: var(--paper-input-container-focus-color, --primary-color);
      }
    </style>

    <template is="dom-if" if="[[!noLabelFloat]]">
      <div class="floated-label-placeholder" aria-hidden="true">&nbsp;</div>
    </template>

    <div class$="[[_computeInputContentClass(noLabelFloat,alwaysFloatLabel,focused,invalid,_inputHasContent)]]">
      <content select="[prefix]" id="prefix"></content>

      <div class="label-and-input-container" id="labelAndInputContainer">
        <content select=":not([add-on]):not([prefix]):not([suffix])"></content>
      </div>

      <content select="[suffix]"></content>
    </div>

    <div class$="[[_computeUnderlineClass(focused,invalid)]]">
      <div class="unfocused-line"></div>
      <div class="focused-line"></div>
    </div>

    <div class$="[[_computeAddOnContentClass(focused,invalid)]]">
      <content id="addOnContent" select="[add-on]"></content>
    </div>
  </template>
</dom-module>

<script>//~~WEBPATH~~/paper-input/paper-input-container.html.js
Polymer({is:"paper-input-container",properties:{noLabelFloat:{type:Boolean,value:!1},alwaysFloatLabel:{type:Boolean,value:!1},attrForValue:{type:String,value:"bind-value"},autoValidate:{type:Boolean,value:!1},invalid:{observer:"_invalidChanged",type:Boolean,value:!1},focused:{readOnly:!0,type:Boolean,value:!1,notify:!0},_addons:{type:Array},_inputHasContent:{type:Boolean,value:!1},_inputSelector:{type:String,value:"input,textarea,.paper-input-input"},_boundOnFocus:{type:Function,value:function(){return this._onFocus.bind(this)}},
_boundOnBlur:{type:Function,value:function(){return this._onBlur.bind(this)}},_boundOnInput:{type:Function,value:function(){return this._onInput.bind(this)}},_boundValueChanged:{type:Function,value:function(){return this._onValueChanged.bind(this)}}},listeners:{"addon-attached":"_onAddonAttached","iron-input-validate":"_onIronInputValidate"},get _valueChangedEvent(){return this.attrForValue+"-changed"},get _propertyForValue(){return Polymer.CaseMap.dashToCamelCase(this.attrForValue)},get _inputElement(){return Polymer.dom(this).querySelector(this._inputSelector)},
get _inputElementValue(){return this._inputElement[this._propertyForValue]||this._inputElement.value},ready:function(){this._addons||(this._addons=[]);this.addEventListener("focus",this._boundOnFocus,!0);this.addEventListener("blur",this._boundOnBlur,!0)},attached:function(){this.attrForValue?this._inputElement.addEventListener(this._valueChangedEvent,this._boundValueChanged):this.addEventListener("input",this._onInput);""!=this._inputElementValue?this._handleValueAndAutoValidate(this._inputElement):
this._handleValue(this._inputElement)},_onAddonAttached:function(a){this._addons||(this._addons=[]);a=a.target;-1===this._addons.indexOf(a)&&(this._addons.push(a),this.isAttached&&this._handleValue(this._inputElement))},_onFocus:function(){this._setFocused(!0)},_onBlur:function(){this._setFocused(!1);this._handleValueAndAutoValidate(this._inputElement)},_onInput:function(a){this._handleValueAndAutoValidate(a.target)},_onValueChanged:function(a){this._handleValueAndAutoValidate(a.target)},_handleValue:function(a){var b=
this._inputElementValue;b||0===b||"number"===a.type&&!a.checkValidity()?this._inputHasContent=!0:this._inputHasContent=!1;this.updateAddons({inputElement:a,value:b,invalid:this.invalid})},_handleValueAndAutoValidate:function(a){this.autoValidate&&(this.invalid=!(a.validate?a.validate(this._inputElementValue):a.checkValidity()));this._handleValue(a)},_onIronInputValidate:function(){this.invalid=this._inputElement.invalid},_invalidChanged:function(){this._addons&&this.updateAddons({invalid:this.invalid})},
updateAddons:function(a){for(var b,c=0;b=this._addons[c];c++)b.update(a)},_computeInputContentClass:function(a,b,c,d,e){var g="input-content";a?e&&(g+=" label-is-hidden"):(a=this.querySelector("label"),b||e?(g+=" label-is-floating",this.$.labelAndInputContainer.style.position="static",d?g+=" is-invalid":c&&(g+=" label-is-highlighted")):a&&(this.$.labelAndInputContainer.style.position="relative"));return g},_computeUnderlineClass:function(a,b){var c="underline";b?c+=" is-invalid":a&&(c+=" is-highlighted");
return c},_computeAddOnContentClass:function(a,b){var c="add-on-content";b?c+=" is-invalid":a&&(c+=" is-highlighted");return c}});
</script>








<dom-module id="paper-input-error">
  <template>
    <style>
      :host {
        display: inline-block;
        visibility: hidden;

        color: var(--paper-input-container-invalid-color, --error-color);

        @apply(--paper-font-caption);
        @apply(--paper-input-error);
        position: absolute;
        left:0;
        right:0;
      }

      :host([invalid]) {
        visibility: visible;
      };
    </style>

    <content></content>
  </template>
</dom-module>

<script>//~~WEBPATH~~/paper-input/paper-input-error.html.js
Polymer({is:"paper-input-error",behaviors:[Polymer.PaperInputAddonBehavior],properties:{invalid:{readOnly:!0,reflectToAttribute:!0,type:Boolean}},update:function(a){this._setInvalid(a.invalid)}});
</script>




<dom-module id="paper-input">
  <template>
    <style>
      :host {
        display: block;
      }

      :host([focused]) {
        outline: none;
      }

      :host([hidden]) {
        display: none !important;
      }

      input::-webkit-input-placeholder {
        color: var(--paper-input-container-color, --secondary-text-color);
      }

      input:-moz-placeholder {
        color: var(--paper-input-container-color, --secondary-text-color);
      }

      input::-moz-placeholder {
        color: var(--paper-input-container-color, --secondary-text-color);
      }

      input:-ms-input-placeholder {
        color: var(--paper-input-container-color, --secondary-text-color);
      }

      label {
        pointer-events: none;
      }
    </style>

    <paper-input-container no-label-float="[[noLabelFloat]]" always-float-label="[[_computeAlwaysFloatLabel(alwaysFloatLabel,placeholder)]]" auto-validate$="[[autoValidate]]" disabled$="[[disabled]]" invalid="[[invalid]]">

      <content select="[prefix]"></content>

      <label hidden$="[[!label]]" aria-hidden="true" for="input">[[label]]</label>

      <input is="iron-input" id="input" aria-labelledby$="[[_ariaLabelledBy]]" aria-describedby$="[[_ariaDescribedBy]]" disabled$="[[disabled]]" title$="[[title]]" bind-value="{{value}}" invalid="{{invalid}}" prevent-invalid-input="[[preventInvalidInput]]" allowed-pattern="[[allowedPattern]]" validator="[[validator]]" type$="[[type]]" pattern$="[[pattern]]" required$="[[required]]" autocomplete$="[[autocomplete]]" autofocus$="[[autofocus]]" inputmode$="[[inputmode]]" minlength$="[[minlength]]" maxlength$="[[maxlength]]" min$="[[min]]" max$="[[max]]" step$="[[step]]" name$="[[name]]" placeholder$="[[placeholder]]" readonly$="[[readonly]]" list$="[[list]]" size$="[[size]]" autocapitalize$="[[autocapitalize]]" autocorrect$="[[autocorrect]]" on-change="_onChange" tabindex$="[[tabindex]]" autosave$="[[autosave]]" results$="[[results]]" accept$="[[accept]]" multiple$="[[multiple]]">

      <content select="[suffix]"></content>

      <template is="dom-if" if="[[errorMessage]]">
        <paper-input-error aria-live="assertive">[[errorMessage]]</paper-input-error>
      </template>

      <template is="dom-if" if="[[charCounter]]">
        <paper-input-char-counter></paper-input-char-counter>
      </template>

    </paper-input-container>
  </template>
</dom-module>

<script>//~~WEBPATH~~/paper-input/paper-input.html.js
Polymer({is:"paper-input",behaviors:[Polymer.IronFormElementBehavior,Polymer.PaperInputBehavior]});
</script>





<style is="custom-style">

  :root {

    --shadow-transition: {
      transition: box-shadow 0.28s cubic-bezier(0.4, 0, 0.2, 1);
    };

    --shadow-none: {
      box-shadow: none;
    };

    /* from http://codepen.io/shyndman/pen/c5394ddf2e8b2a5c9185904b57421cdb */

    --shadow-elevation-2dp: {
      box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14),
                  0 1px 5px 0 rgba(0, 0, 0, 0.12),
                  0 3px 1px -2px rgba(0, 0, 0, 0.2);
    };

    --shadow-elevation-3dp: {
      box-shadow: 0 3px 4px 0 rgba(0, 0, 0, 0.14),
                  0 1px 8px 0 rgba(0, 0, 0, 0.12),
                  0 3px 3px -2px rgba(0, 0, 0, 0.4);
    };

    --shadow-elevation-4dp: {
      box-shadow: 0 4px 5px 0 rgba(0, 0, 0, 0.14),
                  0 1px 10px 0 rgba(0, 0, 0, 0.12),
                  0 2px 4px -1px rgba(0, 0, 0, 0.4);
    };

    --shadow-elevation-6dp: {
      box-shadow: 0 6px 10px 0 rgba(0, 0, 0, 0.14),
                  0 1px 18px 0 rgba(0, 0, 0, 0.12),
                  0 3px 5px -1px rgba(0, 0, 0, 0.4);
    };

    --shadow-elevation-8dp: {
      box-shadow: 0 8px 10px 1px rgba(0, 0, 0, 0.14),
                  0 3px 14px 2px rgba(0, 0, 0, 0.12),
                  0 5px 5px -3px rgba(0, 0, 0, 0.4);
    };

    --shadow-elevation-12dp: {
      box-shadow: 0 12px 16px 1px rgba(0, 0, 0, 0.14),
                  0 4px 22px 3px rgba(0, 0, 0, 0.12),
                  0 6px 7px -4px rgba(0, 0, 0, 0.4);
    };

    --shadow-elevation-16dp: {
      box-shadow: 0 16px 24px 2px rgba(0, 0, 0, 0.14),
                  0  6px 30px 5px rgba(0, 0, 0, 0.12),
                  0  8px 10px -5px rgba(0, 0, 0, 0.4);
    };

  }

</style>



<dom-module id="paper-material-shared-styles">
  <template>
    <style>
      :host {
        display: block;
        position: relative;
      }

      :host([elevation="1"]) {
        @apply --shadow-elevation-2dp;
      }

      :host([elevation="2"]) {
        @apply --shadow-elevation-4dp;
      }

      :host([elevation="3"]) {
        @apply --shadow-elevation-6dp;
      }

      :host([elevation="4"]) {
        @apply --shadow-elevation-8dp;
      }

      :host([elevation="5"]) {
        @apply --shadow-elevation-16dp;
      }
    </style>
  </template>
</dom-module>




<dom-module id="paper-material">
  <template>
    <style include="paper-material-shared-styles"></style>
    <style>
      :host([animated]) {
        @apply --shadow-transition;
      }
      :host {
        @apply --paper-material;
      }
    </style>

    <slot></slot>
  </template>
</dom-module>
<script>//~~WEBPATH~~/paper-material/paper-material.html.js
Polymer({is:"paper-material",properties:{elevation:{type:Number,reflectToAttribute:!0,value:1},animated:{type:Boolean,reflectToAttribute:!0,value:!1}}});
</script>






<script>//~~WEBPATH~~/paper-behaviors/paper-button-behavior.html.js
Polymer.PaperButtonBehaviorImpl={properties:{elevation:{type:Number,reflectToAttribute:!0,readOnly:!0}},observers:["_calculateElevation(focused, disabled, active, pressed, receivedFocusFromKeyboard)","_computeKeyboardClass(receivedFocusFromKeyboard)"],hostAttributes:{role:"button",tabindex:"0",animated:!0},_calculateElevation:function(){var a=1;this.disabled?a=0:this.active||this.pressed?a=4:this.receivedFocusFromKeyboard&&(a=3);this._setElevation(a)},_computeKeyboardClass:function(a){this.toggleClass("keyboard-focus",
a)},_spaceKeyDownHandler:function(a){Polymer.IronButtonStateImpl._spaceKeyDownHandler.call(this,a);this.hasRipple()&&1>this.getRipple().ripples.length&&this._ripple.uiDownAction()},_spaceKeyUpHandler:function(a){Polymer.IronButtonStateImpl._spaceKeyUpHandler.call(this,a);this.hasRipple()&&this._ripple.uiUpAction()}};Polymer.PaperButtonBehavior=[Polymer.IronButtonState,Polymer.IronControlState,Polymer.PaperRippleBehavior,Polymer.PaperButtonBehaviorImpl];
</script>





<dom-module id="paper-button">
  <template strip-whitespace>

    <style include="paper-material">
      :host {
        display: inline-block;
        position: relative;
        box-sizing: border-box;
        min-width: 5.14em;
        margin: 0 0.29em;
        background: transparent;
        text-align: center;
        font: inherit;
        text-transform: uppercase;
        outline-width: 0;
        border-radius: 3px;
        -moz-user-select: none;
        -ms-user-select: none;
        -webkit-user-select: none;
        user-select: none;
        cursor: pointer;
        z-index: 0;
        padding: 0.7em 0.57em;

        @apply(--paper-button);
      }

      :host([raised].keyboard-focus) {
        font-weight: bold;
        @apply(--paper-button-raised-keyboard-focus);
      }

      :host(:not([raised]).keyboard-focus) {
        font-weight: bold;
        @apply(--paper-button-flat-keyboard-focus);
      }

      :host([disabled]) {
        background: #eaeaea;
        color: #a8a8a8;
        cursor: auto;
        pointer-events: none;

        @apply(--paper-button-disabled);
      }

      paper-ripple {
        color: var(--paper-button-ink-color);
      }

      :host > ::content * {
        text-transform: inherit;
      }
    </style>
    <content></content>
  </template>
</dom-module>

<script>//~~WEBPATH~~/paper-button/paper-button.html.js
Polymer({is:"paper-button",behaviors:[Polymer.PaperButtonBehavior],properties:{raised:{type:Boolean,reflectToAttribute:!0,value:!1,observer:"_calculateElevation"}},_calculateElevation:function(){this.raised?Polymer.PaperButtonBehaviorImpl._calculateElevation.apply(this):this._setElevation(0)}});
</script>







<script>//~~WEBPATH~~/iron-fit-behavior/iron-fit-behavior.html.js
Polymer.IronFitBehavior={properties:{sizingTarget:{type:Object,value:function(){return this}},fitInto:{type:Object,value:window},noOverlap:{type:Boolean},positionTarget:{type:Element},horizontalAlign:{type:String},verticalAlign:{type:String},dynamicAlign:{type:Boolean},horizontalOffset:{type:Number,value:0,notify:!0},verticalOffset:{type:Number,value:0,notify:!0},autoFitOnAttach:{type:Boolean,value:!1},_fitInfo:{type:Object}},get _fitWidth(){return this.fitInto===window?this.fitInto.innerWidth:this.fitInto.getBoundingClientRect().width},
get _fitHeight(){return this.fitInto===window?this.fitInto.innerHeight:this.fitInto.getBoundingClientRect().height},get _fitLeft(){return this.fitInto===window?0:this.fitInto.getBoundingClientRect().left},get _fitTop(){return this.fitInto===window?0:this.fitInto.getBoundingClientRect().top},get _defaultPositionTarget(){var a=Polymer.dom(this).parentNode;a&&a.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&(a=a.host);return a},get _localeHorizontalAlign(){if(this._isRTL){if("right"===this.horizontalAlign)return"left";
if("left"===this.horizontalAlign)return"right"}return this.horizontalAlign},attached:function(){this._isRTL="rtl"==window.getComputedStyle(this).direction;this.positionTarget=this.positionTarget||this._defaultPositionTarget;this.autoFitOnAttach&&("none"===window.getComputedStyle(this).display?setTimeout(function(){this.fit()}.bind(this)):this.fit())},fit:function(){this.position();this.constrain();this.center()},_discoverInfo:function(){if(!this._fitInfo){var a=window.getComputedStyle(this),b=window.getComputedStyle(this.sizingTarget);
this._fitInfo={inlineStyle:{top:this.style.top||"",left:this.style.left||"",position:this.style.position||""},sizerInlineStyle:{maxWidth:this.sizingTarget.style.maxWidth||"",maxHeight:this.sizingTarget.style.maxHeight||"",boxSizing:this.sizingTarget.style.boxSizing||""},positionedBy:{vertically:"auto"!==a.top?"top":"auto"!==a.bottom?"bottom":null,horizontally:"auto"!==a.left?"left":"auto"!==a.right?"right":null},sizedBy:{height:"none"!==b.maxHeight,width:"none"!==b.maxWidth,minWidth:parseInt(b.minWidth,
10)||0,minHeight:parseInt(b.minHeight,10)||0},margin:{top:parseInt(a.marginTop,10)||0,right:parseInt(a.marginRight,10)||0,bottom:parseInt(a.marginBottom,10)||0,left:parseInt(a.marginLeft,10)||0}};this.verticalOffset&&(this._fitInfo.margin.top=this._fitInfo.margin.bottom=this.verticalOffset,this._fitInfo.inlineStyle.marginTop=this.style.marginTop||"",this._fitInfo.inlineStyle.marginBottom=this.style.marginBottom||"",this.style.marginTop=this.style.marginBottom=this.verticalOffset+"px");this.horizontalOffset&&
(this._fitInfo.margin.left=this._fitInfo.margin.right=this.horizontalOffset,this._fitInfo.inlineStyle.marginLeft=this.style.marginLeft||"",this._fitInfo.inlineStyle.marginRight=this.style.marginRight||"",this.style.marginLeft=this.style.marginRight=this.horizontalOffset+"px")}},resetFit:function(){var a=this._fitInfo||{},b;for(b in a.sizerInlineStyle)this.sizingTarget.style[b]=a.sizerInlineStyle[b];for(b in a.inlineStyle)this.style[b]=a.inlineStyle[b];this._fitInfo=null},refit:function(){var a=this.sizingTarget.scrollLeft,
b=this.sizingTarget.scrollTop;this.resetFit();this.fit();this.sizingTarget.scrollLeft=a;this.sizingTarget.scrollTop=b},position:function(){if(this.horizontalAlign||this.verticalAlign){this._discoverInfo();this.style.position="fixed";this.sizingTarget.style.boxSizing="border-box";this.style.left="0px";this.style.top="0px";var a=this.getBoundingClientRect(),b=this.__getNormalizedRect(this.positionTarget),c=this.__getNormalizedRect(this.fitInto),d=this._fitInfo.margin,e=this.__getPosition(this._localeHorizontalAlign,
this.verticalAlign,{width:a.width+d.left+d.right,height:a.height+d.top+d.bottom},b,c),b=e.left+d.left,e=e.top+d.top,g=Math.min(c.right-d.right,b+a.width),c=Math.min(c.bottom-d.bottom,e+a.height),h=this._fitInfo.sizedBy.minWidth,k=this._fitInfo.sizedBy.minHeight;b<d.left&&(b=d.left,g-b<h&&(b=g-h));e<d.top&&(e=d.top,c-e<k&&(e=c-k));this.sizingTarget.style.maxWidth=g-b+"px";this.sizingTarget.style.maxHeight=c-e+"px";this.style.left=b-a.left+"px";this.style.top=e-a.top+"px"}},constrain:function(){if(!this.horizontalAlign&&
!this.verticalAlign){this._discoverInfo();var a=this._fitInfo;a.positionedBy.vertically||(this.style.position="fixed",this.style.top="0px");a.positionedBy.horizontally||(this.style.position="fixed",this.style.left="0px");this.sizingTarget.style.boxSizing="border-box";var b=this.getBoundingClientRect();a.sizedBy.height||this.__sizeDimension(b,a.positionedBy.vertically,"top","bottom","Height");a.sizedBy.width||this.__sizeDimension(b,a.positionedBy.horizontally,"left","right","Width")}},_sizeDimension:function(a,
b,c,d,e){this.__sizeDimension(a,b,c,d,e)},__sizeDimension:function(a,b,c,d,e){var g=this._fitInfo,h=this.__getNormalizedRect(this.fitInto),h="Width"===e?h.width:h.height;b=b===d;var k="offset"+e;this.sizingTarget.style["max"+e]=h-g.margin[b?c:d]-(b?h-a[d]:a[c])-(this[k]-this.sizingTarget[k])+"px"},center:function(){if(!this.horizontalAlign&&!this.verticalAlign){this._discoverInfo();var a=this._fitInfo.positionedBy;if(!a.vertically||!a.horizontally){this.style.position="fixed";a.vertically||(this.style.top=
"0px");a.horizontally||(this.style.left="0px");var b=this.getBoundingClientRect(),c=this.__getNormalizedRect(this.fitInto);a.vertically||(this.style.top=c.top-b.top+(c.height-b.height)/2+"px");a.horizontally||(this.style.left=c.left-b.left+(c.width-b.width)/2+"px")}}},__getNormalizedRect:function(a){return a===document.documentElement||a===window?{top:0,left:0,width:window.innerWidth,height:window.innerHeight,right:window.innerWidth,bottom:window.innerHeight}:a.getBoundingClientRect()},__getCroppedArea:function(a,
b,c){return Math.abs(Math.min(0,a.top)+Math.min(0,c.bottom-(a.top+b.height)))*b.width+Math.abs(Math.min(0,a.left)+Math.min(0,c.right-(a.left+b.width)))*b.height},__getPosition:function(a,b,c,d,e){var g=[{verticalAlign:"top",horizontalAlign:"left",top:d.top,left:d.left},{verticalAlign:"top",horizontalAlign:"right",top:d.top,left:d.right-c.width},{verticalAlign:"bottom",horizontalAlign:"left",top:d.bottom-c.height,left:d.left},{verticalAlign:"bottom",horizontalAlign:"right",top:d.bottom-c.height,left:d.right-
c.width}];if(this.noOverlap){for(var h=0,k=g.length;h<k;h++){var l={},m;for(m in g[h])l[m]=g[h][m];g.push(l)}g[0].top=g[1].top+=d.height;g[2].top=g[3].top-=d.height;g[4].left=g[6].left+=d.width;g[5].left=g[7].left-=d.width}b="auto"===b?null:b;a="auto"===a?null:a;for(var p,h=0;h<g.length;h++){d=g[h];if(!this.dynamicAlign&&!this.noOverlap&&d.verticalAlign===b&&d.horizontalAlign===a){p=d;break}k=(!b||d.verticalAlign===b)&&(!a||d.horizontalAlign===a);if(this.dynamicAlign||k){p=p||d;d.croppedArea=this.__getCroppedArea(d,
c,e);l=d.croppedArea-p.croppedArea;if(0>l||0===l&&k)p=d;if(0===p.croppedArea&&k)break}}return p}};
</script>








<dom-module id="iron-overlay-backdrop">

  <template>
    <style>
      :host {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: var(--iron-overlay-backdrop-background-color, #000);
        opacity: 0;
        transition: opacity 0.2s;
        pointer-events: none;
        @apply(--iron-overlay-backdrop);
      }

      :host(.opened) {
        opacity: var(--iron-overlay-backdrop-opacity, 0.6);
        pointer-events: auto;
        @apply(--iron-overlay-backdrop-opened);
      }
    </style>

    <content></content>
  </template>

</dom-module>

<script>//~~WEBPATH~~/iron-overlay-behavior/iron-overlay-backdrop.html.js
Polymer({is:"iron-overlay-backdrop",properties:{opened:{reflectToAttribute:!0,type:Boolean,value:!1,observer:"_openedChanged"}},listeners:{transitionend:"_onTransitionend"},created:function(){this.__openedRaf=null},attached:function(){this.opened&&this._openedChanged(this.opened)},prepare:function(){this.opened&&!this.parentNode&&Polymer.dom(document.body).appendChild(this)},open:function(){this.opened=!0},close:function(){this.opened=!1},complete:function(){this.opened||this.parentNode!==document.body||
Polymer.dom(this.parentNode).removeChild(this)},_onTransitionend:function(a){a&&a.target===this&&this.complete()},_openedChanged:function(a){a?this.prepare():(a=window.getComputedStyle(this),"0s"!==a.transitionDuration&&0!=a.opacity||this.complete());this.isAttached&&(this.__openedRaf&&(window.cancelAnimationFrame(this.__openedRaf),this.__openedRaf=null),this.scrollTop=this.scrollTop,this.__openedRaf=window.requestAnimationFrame(function(){this.__openedRaf=null;this.toggleClass("opened",this.opened)}.bind(this)))}});
</script>


<script>//~~WEBPATH~~/iron-overlay-behavior/iron-overlay-manager.html.js
Polymer.IronOverlayManagerClass=function(){this._overlays=[];this._minimumZ=101;this._backdropElement=null;Polymer.Gestures.add(document,"tap",this._onCaptureClick.bind(this));document.addEventListener("focus",this._onCaptureFocus.bind(this),!0);document.addEventListener("keydown",this._onCaptureKeyDown.bind(this),!0)};
Polymer.IronOverlayManagerClass.prototype={constructor:Polymer.IronOverlayManagerClass,get backdropElement(){this._backdropElement||(this._backdropElement=document.createElement("iron-overlay-backdrop"));return this._backdropElement},get deepActiveElement(){for(var a=document.activeElement||document.body;a.root&&Polymer.dom(a.root).activeElement;)a=Polymer.dom(a.root).activeElement;return a},addOrRemoveOverlay:function(a){a.opened?ra(this,a):ua(this,a)},ensureMinimumZ:function(a){this._minimumZ=Math.max(this._minimumZ,
a)},focusOverlay:function(){var a=va(this);a&&a._applyFocus()},getBackdrops:function(){for(var a=[],b=0;b<this._overlays.length;b++)this._overlays[b].withBackdrop&&a.push(this._overlays[b]);return a},backdropZ:function(){return wa(this,xa(this))-1},_onCaptureClick:function(a){var b=va(this),c;if(c=b){a:{c=(c=Polymer.dom(a).path)||[];for(var d=0;d<c.length;d++)if(c[d]._manager===this){c=c[d];break a}c=void 0}c=c!==b}c&&b._onCaptureClick(a)},_onCaptureFocus:function(a){var b=va(this);b&&b._onCaptureFocus(a)},
_onCaptureKeyDown:function(a){var b=va(this);b&&(Polymer.IronA11yKeysBehavior.keyboardEventMatchesKeys(a,"esc")?b._onCaptureEsc(a):Polymer.IronA11yKeysBehavior.keyboardEventMatchesKeys(a,"tab")&&b._onCaptureTab(a))}};function wa(a,b){a=a._minimumZ;b&&(b=Number(b.style.zIndex||window.getComputedStyle(b).zIndex),b===b&&(a=b));return a}function xa(a){for(var b=0;b<a._overlays.length;b++)if(a._overlays[b].withBackdrop)return a._overlays[b]}
function ya(a){var b=xa(a);if(b||a._backdropElement)a.backdropElement.style.zIndex=wa(a,b)-1,a.backdropElement.opened=!!b}function va(a){return a._overlays[a._overlays.length-1]}function ua(a,b){b=a._overlays.indexOf(b);-1!==b&&(a._overlays.splice(b,1),ya(a))}
function ra(a,b){var c=a._overlays.indexOf(b);if(0<=c){if(b=c,c=a._overlays[b]){var d=a._overlays.length-1,e=a._overlays[d];e&&!c.alwaysOnTop&&e.alwaysOnTop&&d--;if(!(b>=d)){e=Math.max(wa(a,va(a)),a._minimumZ);wa(a,c)<=e&&(c.style.zIndex=e+2);for(;b<d;)a._overlays[b]=a._overlays[b+1],b++;a._overlays[d]=c}}}else{var c=a._overlays.length,d=a._overlays[c-1],e=Math.max(wa(a,d),a._minimumZ),g=wa(a,b);d&&!b.alwaysOnTop&&d.alwaysOnTop&&(d.style.zIndex=e+2,c--,e=Math.max(wa(a,a._overlays[c-1]),a._minimumZ));
g<=e&&(b.style.zIndex=e+2);a._overlays.splice(c,0,b)}ya(a)}Polymer.IronOverlayManager=new Polymer.IronOverlayManagerClass;
</script>



<script>//~~WEBPATH~~/iron-overlay-behavior/iron-focusables-helper.html.js
(function(){var a=Element.prototype,b=a.matches||a.matchesSelector||a.mozMatchesSelector||a.msMatchesSelector||a.oMatchesSelector||a.webkitMatchesSelector;Polymer.IronFocusablesHelper={getTabbableNodes:function(a){var b=[];return this._collectTabbableNodes(a,b)?this._sortByTabIndex(b):b},isFocusable:function(a){return b.call(a,"input, select, textarea, button, object")?b.call(a,":not([disabled])"):b.call(a,"a[href], area[href], iframe, [tabindex], [contentEditable]")},isTabbable:function(a){return this.isFocusable(a)&&
b.call(a,':not([tabindex\x3d"-1"])')&&this._isVisible(a)},_normalizedTabIndex:function(a){return this.isFocusable(a)?(a=a.getAttribute("tabindex")||0,Number(a)):-1},_collectTabbableNodes:function(a,b){if(a.nodeType!==Node.ELEMENT_NODE||!this._isVisible(a))return!1;var c=this._normalizedTabIndex(a),d=0<c;0<=c&&b.push(a);a="content"===a.localName?Polymer.dom(a).getDistributedNodes():Polymer.dom(a.root||a).children;for(c=0;c<a.length;c++)var h=this._collectTabbableNodes(a[c],b),d=d||h;return d},_isVisible:function(a){var b=
a.style;return"hidden"!==b.visibility&&"none"!==b.display?(b=window.getComputedStyle(a),"hidden"!==b.visibility&&"none"!==b.display):!1},_sortByTabIndex:function(a){var b=a.length;if(2>b)return a;var c=Math.ceil(b/2),b=this._sortByTabIndex(a.slice(0,c));a=this._sortByTabIndex(a.slice(c));return this._mergeSortByTabIndex(b,a)},_mergeSortByTabIndex:function(a,b){for(var c=[];0<a.length&&0<b.length;)this._hasLowerTabOrder(a[0],b[0])?c.push(b.shift()):c.push(a.shift());return c.concat(a,b)},_hasLowerTabOrder:function(a,
b){a=Math.max(a.tabIndex,0);b=Math.max(b.tabIndex,0);return 0===a||0===b?b>a:a>b}}})();
</script>


<script>//~~WEBPATH~~/iron-overlay-behavior/iron-overlay-behavior.html.js
Polymer.IronOverlayBehaviorImpl={properties:{opened:{observer:"_openedChanged",type:Boolean,value:!1,notify:!0},canceled:{observer:"_canceledChanged",readOnly:!0,type:Boolean,value:!1},withBackdrop:{observer:"_withBackdropChanged",type:Boolean},noAutoFocus:{type:Boolean,value:!1},noCancelOnEscKey:{type:Boolean,value:!1},noCancelOnOutsideClick:{type:Boolean,value:!1},closingReason:{type:Object},restoreFocusOnClose:{type:Boolean,value:!1},alwaysOnTop:{type:Boolean},_manager:{type:Object,value:Polymer.IronOverlayManager},
_focusedChild:{type:Object}},listeners:{"iron-resize":"_onIronResize"},get backdropElement(){return this._manager.backdropElement},get _focusNode(){return this._focusedChild||Polymer.dom(this).querySelector("[autofocus]")||this},get _focusableNodes(){return Polymer.IronFocusablesHelper.getTabbableNodes(this)},ready:function(){this.__shouldRemoveTabIndex=this.__isAnimating=!1;this.__restoreFocusNode=this.__raf=this.__firstFocusableNode=this.__lastFocusableNode=null;this._ensureSetup()},attached:function(){this.opened&&
this._openedChanged(this.opened);this._observer=Polymer.dom(this).observeNodes(this._onNodesChange)},detached:function(){Polymer.dom(this).unobserveNodes(this._observer);this._observer=null;this.__raf&&(window.cancelAnimationFrame(this.__raf),this.__raf=null);ua(this._manager,this)},toggle:function(){this._setCanceled(!1);this.opened=!this.opened},open:function(){this._setCanceled(!1);this.opened=!0},close:function(){this._setCanceled(!1);this.opened=!1},cancel:function(a){this.fire("iron-overlay-canceled",
a,{cancelable:!0}).defaultPrevented||(this._setCanceled(!0),this.opened=!1)},invalidateTabbables:function(){this.__firstFocusableNode=this.__lastFocusableNode=null},_ensureSetup:function(){this._overlaySetup||(this._overlaySetup=!0,this.style.outline="none",this.style.display="none")},_openedChanged:function(a){a?this.removeAttribute("aria-hidden"):this.setAttribute("aria-hidden","true");this.isAttached&&(this.__isAnimating=!0,this.__onNextAnimationFrame(this.__openedChanged))},_canceledChanged:function(){this.closingReason=
this.closingReason||{};this.closingReason.canceled=this.canceled},_withBackdropChanged:function(){this.withBackdrop&&!this.hasAttribute("tabindex")?(this.setAttribute("tabindex","-1"),this.__shouldRemoveTabIndex=!0):this.__shouldRemoveTabIndex&&(this.removeAttribute("tabindex"),this.__shouldRemoveTabIndex=!1);this.opened&&this.isAttached&&ya(this._manager)},_prepareRenderOpened:function(){this.__restoreFocusNode=this._manager.deepActiveElement;this._preparePositioning();this.refit();this._finishPositioning();
this.noAutoFocus&&document.activeElement===this._focusNode&&(this._focusNode.blur(),this.__restoreFocusNode.focus())},_renderOpened:function(){this._finishRenderOpened()},_renderClosed:function(){this._finishRenderClosed()},_finishRenderOpened:function(){this.notifyResize();this.__isAnimating=!1;this.fire("iron-overlay-opened")},_finishRenderClosed:function(){this.style.display="none";this.style.zIndex="";this.notifyResize();this.__isAnimating=!1;this.fire("iron-overlay-closed",this.closingReason)},
_preparePositioning:function(){this.style.transition=this.style.webkitTransition="none";this.style.transform=this.style.webkitTransform="none";this.style.display=""},_finishPositioning:function(){this.style.display="none";this.scrollTop=this.scrollTop;this.style.transition=this.style.webkitTransition="";this.style.transform=this.style.webkitTransform="";this.style.display="";this.scrollTop=this.scrollTop},_applyFocus:function(){if(this.opened)this.noAutoFocus||this._focusNode.focus();else{this._focusNode.blur();
this._focusedChild=null;this.restoreFocusOnClose&&this.__restoreFocusNode&&this.__restoreFocusNode.focus();this.__restoreFocusNode=null;var a=va(this._manager);a&&this!==a&&a._applyFocus()}},_onCaptureClick:function(a){this.noCancelOnOutsideClick||this.cancel(a)},_onCaptureFocus:function(a){if(this.withBackdrop){var b=Polymer.dom(a).path;-1===b.indexOf(this)?(a.stopPropagation(),this._applyFocus()):this._focusedChild=b[0]}},_onCaptureEsc:function(a){this.noCancelOnEscKey||this.cancel(a)},_onCaptureTab:function(a){if(this.withBackdrop){this.__ensureFirstLastFocusables();
var b=a.shiftKey,c=b?this.__firstFocusableNode:this.__lastFocusableNode,b=b?this.__lastFocusableNode:this.__firstFocusableNode;if(c===b)c=!0;else var d=this._manager.deepActiveElement,c=d===c||d===this;c&&(a.preventDefault(),this._focusedChild=b,this._applyFocus())}},_onIronResize:function(){this.opened&&!this.__isAnimating&&this.__onNextAnimationFrame(this.refit)},_onNodesChange:function(){this.opened&&!this.__isAnimating&&(this.invalidateTabbables(),this.notifyResize())},__ensureFirstLastFocusables:function(){if(!this.__firstFocusableNode||
!this.__lastFocusableNode){var a=this._focusableNodes;this.__firstFocusableNode=a[0];this.__lastFocusableNode=a[a.length-1]}},__openedChanged:function(){this.opened?(this._prepareRenderOpened(),ra(this._manager,this),this._applyFocus(),this._renderOpened()):(ua(this._manager,this),this._applyFocus(),this._renderClosed())},__onNextAnimationFrame:function(a){this.__raf&&window.cancelAnimationFrame(this.__raf);var b=this;this.__raf=window.requestAnimationFrame(function(){b.__raf=null;a.call(b)})}};
Polymer.IronOverlayBehavior=[Polymer.IronFitBehavior,Polymer.IronResizableBehavior,Polymer.IronOverlayBehaviorImpl];
</script>


<script>//~~WEBPATH~~/paper-dialog-behavior/paper-dialog-behavior.html.js
Polymer.PaperDialogBehaviorImpl={hostAttributes:{role:"dialog",tabindex:"-1"},properties:{modal:{type:Boolean,value:!1}},observers:["_modalChanged(modal, _readied)"],listeners:{tap:"_onDialogClick"},ready:function(){this.__prevNoCancelOnOutsideClick=this.noCancelOnOutsideClick;this.__prevNoCancelOnEscKey=this.noCancelOnEscKey;this.__prevWithBackdrop=this.withBackdrop},_modalChanged:function(a,b){b&&(a?(this.__prevNoCancelOnOutsideClick=this.noCancelOnOutsideClick,this.__prevNoCancelOnEscKey=this.noCancelOnEscKey,
this.__prevWithBackdrop=this.withBackdrop,this.withBackdrop=this.noCancelOnEscKey=this.noCancelOnOutsideClick=!0):(this.noCancelOnOutsideClick=this.noCancelOnOutsideClick&&this.__prevNoCancelOnOutsideClick,this.noCancelOnEscKey=this.noCancelOnEscKey&&this.__prevNoCancelOnEscKey,this.withBackdrop=this.withBackdrop&&this.__prevWithBackdrop))},_updateClosingReasonConfirmed:function(a){this.closingReason=this.closingReason||{};this.closingReason.confirmed=a},_onDialogClick:function(a){for(var b=Polymer.dom(a).path,
c=0;c<b.indexOf(this);c++){var d=b[c];if(d.hasAttribute&&(d.hasAttribute("dialog-dismiss")||d.hasAttribute("dialog-confirm"))){this._updateClosingReasonConfirmed(d.hasAttribute("dialog-confirm"));this.close();a.stopPropagation();break}}}};Polymer.PaperDialogBehavior=[Polymer.IronOverlayBehavior,Polymer.PaperDialogBehaviorImpl];
</script>









<dom-module id="paper-dialog-shared-styles">
  <template>
    <style>
      :host {
        display: block;
        margin: 24px 40px;

        background: var(--paper-dialog-background-color, --primary-background-color);
        color: var(--paper-dialog-color, --primary-text-color);

        @apply(--paper-font-body1);
        @apply(--shadow-elevation-16dp);
        @apply(--paper-dialog);
      }

      :host > ::content > * {
        margin-top: 20px;
        padding: 0 24px;
      }

      :host > ::content > .no-padding {
        padding: 0;
      }

      :host > ::content > *:first-child {
        margin-top: 24px;
      }

      :host > ::content > *:last-child {
        margin-bottom: 24px;
      }

      :host > ::content h2 {
        position: relative;
        margin: 0;
        @apply(--paper-font-title);

        @apply(--paper-dialog-title);
      }

      :host > ::content .buttons {
        position: relative;
        padding: 8px 8px 8px 24px;
        margin: 0;

        color: var(--paper-dialog-button-color, --primary-color);

        @apply(--layout-horizontal);
        @apply(--layout-end-justified);
      }
    </style>
  </template>
</dom-module>



<dom-module id="paper-dialog">
  <template>
    <style include="paper-dialog-shared-styles"></style>
    <slot></slot>
  </template>
</dom-module>

<script>//~~WEBPATH~~/paper-dialog/paper-dialog.html.js
Polymer({is:"paper-dialog",behaviors:[Polymer.PaperDialogBehavior,Polymer.NeonAnimationRunnerBehavior],listeners:{"neon-animation-finish":"_onNeonAnimationFinish"},_renderOpened:function(){this.cancelAnimation();this.playAnimation("entry")},_renderClosed:function(){this.cancelAnimation();this.playAnimation("exit")},_onNeonAnimationFinish:function(){this.opened?this._finishRenderOpened():this._finishRenderClosed()}});
</script>







<dom-module id="paper-toast">
  <template>
    <style>
      :host {
        display: block;
        position: fixed;
        background-color: var(--paper-toast-background-color, #323232);
        color: var(--paper-toast-color, #f1f1f1);
        min-height: 48px;
        min-width: 288px;
        padding: 16px 24px;
        box-sizing: border-box;
        box-shadow: 0 2px 5px 0 rgba(0, 0, 0, 0.26);
        border-radius: 2px;
        margin: 12px;
        font-size: 14px;
        cursor: default;
        -webkit-transition: -webkit-transform 0.3s, opacity 0.3s;
        transition: transform 0.3s, opacity 0.3s;
        opacity: 0;
        -webkit-transform: translateY(100px);
        transform: translateY(100px);
        @apply --paper-font-common-base;
      }

      :host(.capsule) {
        border-radius: 24px;
      }

      :host(.fit-bottom) {
        width: 100%;
        min-width: 0;
        border-radius: 0;
        margin: 0;
      }

      :host(.paper-toast-open) {
        opacity: 1;
        -webkit-transform: translateY(0px);
        transform: translateY(0px);
      }
    </style>

    <span id="label">{{text}}</span>
    <slot></slot>
  </template>

  <script>//~~WEBPATH~~/paper-toast/paper-toast.html.js
(function(){var a=null;Polymer({is:"paper-toast",behaviors:[Polymer.IronOverlayBehavior],properties:{fitInto:{type:Object,value:window,observer:"_onFitIntoChanged"},horizontalAlign:{type:String,value:"left"},verticalAlign:{type:String,value:"bottom"},duration:{type:Number,value:3E3},text:{type:String,value:""},noCancelOnOutsideClick:{type:Boolean,value:!0},noAutoFocus:{type:Boolean,value:!0}},listeners:{transitionend:"__onTransitionEnd"},get visible(){Polymer.Base._warn("`visible` is deprecated, use `opened` instead");
return this.opened},get _canAutoClose(){return 0<this.duration&&Infinity!==this.duration},created:function(){this._autoClose=null;Polymer.IronA11yAnnouncer.requestAvailability()},show:function(a){"string"==typeof a&&(a={text:a});for(var b in a)0===b.indexOf("_")?Polymer.Base._warn('The property "'+b+'" is private and was not set.'):b in this?this[b]=a[b]:Polymer.Base._warn('The property "'+b+'" is not valid.');this.open()},hide:function(){this.close()},__onTransitionEnd:function(a){a&&a.target===
this&&"opacity"===a.propertyName&&(this.opened?this._finishRenderOpened():this._finishRenderClosed())},_openedChanged:function(){null!==this._autoClose&&(this.cancelAsync(this._autoClose),this._autoClose=null);this.opened?(a&&a!==this&&a.close(),a=this,this.fire("iron-announce",{text:this.text}),this._canAutoClose&&(this._autoClose=this.async(this.close,this.duration))):a===this&&(a=null);Polymer.IronOverlayBehaviorImpl._openedChanged.apply(this,arguments)},_renderOpened:function(){this.classList.add("paper-toast-open")},
_renderClosed:function(){this.classList.remove("paper-toast-open")},_onFitIntoChanged:function(a){this.positionTarget=a}})})();
</script>
</dom-module>







<script>//~~WEBPATH~~/paper-spinner/paper-spinner-behavior.html.js
Polymer.PaperSpinnerBehavior={listeners:{animationend:"__reset",webkitAnimationEnd:"__reset"},properties:{active:{type:Boolean,value:!1,reflectToAttribute:!0,observer:"__activeChanged"},alt:{type:String,value:"loading",observer:"__altChanged"},__coolingDown:{type:Boolean,value:!1}},__computeContainerClasses:function(a,b){return[a||b?"active":"",b?"cooldown":""].join(" ")},__activeChanged:function(a,b){this.__setAriaHidden(!a);this.__coolingDown=!a&&b},__altChanged:function(a){a===this.getPropertyInfo("alt").value?
this.alt=this.getAttribute("aria-label")||a:(this.__setAriaHidden(""===a),this.setAttribute("aria-label",a))},__setAriaHidden:function(a){a?this.setAttribute("aria-hidden","true"):this.removeAttribute("aria-hidden")},__reset:function(){this.__coolingDown=this.active=!1}};
</script>

<dom-module id="paper-spinner-styles">
  <template>
    <style>
      /*
      /**************************/
      /* STYLES FOR THE SPINNER */
      /**************************/

      /*
       * Constants:
       *      ARCSIZE     = 270 degrees (amount of circle the arc takes up)
       *      ARCTIME     = 1333ms (time it takes to expand and contract arc)
       *      ARCSTARTROT = 216 degrees (how much the start location of the arc
       *                                should rotate each time, 216 gives us a
       *                                5 pointed star shape (it's 360/5 * 3).
       *                                For a 7 pointed star, we might do
       *                                360/7 * 3 = 154.286)
       *      CONTAINERWIDTH = 28px
       *      SHRINK_TIME = 400ms
       */

      :host {
        display: inline-block;
        position: relative;
        width: 28px; /* CONTAINERWIDTH */
        height: 28px; /* CONTAINERWIDTH */
      }

      #spinnerContainer {
        width: 100%;
        height: 100%;

        /* The spinner does not have any contents that would have to be
         * flipped if the direction changes. Always use ltr so that the
         * style works out correctly in both cases. */
        direction: ltr;
      }

      #spinnerContainer.active {
        /* duration: 360 * ARCTIME / (ARCSTARTROT + (360-ARCSIZE)) */
        -webkit-animation: container-rotate 1568ms linear infinite;
        animation: container-rotate 1568ms linear infinite;
      }

      @-webkit-keyframes container-rotate {
        to { -webkit-transform: rotate(360deg) }
      }

      @keyframes container-rotate {
        to { transform: rotate(360deg) }
      }

      .spinner-layer {
        position: absolute;
        width: 100%;
        height: 100%;
        opacity: 0;
        white-space: nowrap;
        border-color: var(--paper-spinner-color, --google-blue-500);
      }

      .layer-1 {
        border-color: var(--paper-spinner-layer-1-color, --google-blue-500);
      }

      .layer-2 {
        border-color: var(--paper-spinner-layer-2-color, --google-red-500);
      }

      .layer-3 {
        border-color: var(--paper-spinner-layer-3-color, --google-yellow-500);
      }

      .layer-4 {
        border-color: var(--paper-spinner-layer-4-color, --google-green-500);
      }

      /**
       * IMPORTANT NOTE ABOUT CSS ANIMATION PROPERTIES (keanulee):
       *
       * iOS Safari (tested on iOS 8.1) does not handle animation-delay very well - it doesn't
       * guarantee that the animation will start _exactly_ after that value. So we avoid using
       * animation-delay and instead set custom keyframes for each color (as layer-2undant as it
       * seems).
       *
       * We write out each animation in full (instead of separating animation-name,
       * animation-duration, etc.) because under the polyfill, Safari does not recognize those
       * specific properties properly, treats them as -webkit-animation, and overrides the
       * other animation rules. See https://github.com/Polymer/platform/issues/53.
       */
      .active .spinner-layer {
        /* durations: 4 * ARCTIME */
        -webkit-animation: fill-unfill-rotate 5332ms cubic-bezier(0.4, 0.0, 0.2, 1) infinite both;
        animation: fill-unfill-rotate 5332ms cubic-bezier(0.4, 0.0, 0.2, 1) infinite both;
        opacity: 1;
      }

      .active .spinner-layer.layer-1 {
        /* durations: 4 * ARCTIME */
        -webkit-animation: fill-unfill-rotate 5332ms cubic-bezier(0.4, 0.0, 0.2, 1) infinite both, layer-1-fade-in-out 5332ms cubic-bezier(0.4, 0.0, 0.2, 1) infinite both;
        animation: fill-unfill-rotate 5332ms cubic-bezier(0.4, 0.0, 0.2, 1) infinite both, layer-1-fade-in-out 5332ms cubic-bezier(0.4, 0.0, 0.2, 1) infinite both;
      }

      .active .spinner-layer.layer-2 {
        /* durations: 4 * ARCTIME */
        -webkit-animation: fill-unfill-rotate 5332ms cubic-bezier(0.4, 0.0, 0.2, 1) infinite both, layer-2-fade-in-out 5332ms cubic-bezier(0.4, 0.0, 0.2, 1) infinite both;
        animation: fill-unfill-rotate 5332ms cubic-bezier(0.4, 0.0, 0.2, 1) infinite both, layer-2-fade-in-out 5332ms cubic-bezier(0.4, 0.0, 0.2, 1) infinite both;
      }

      .active .spinner-layer.layer-3 {
        /* durations: 4 * ARCTIME */
        -webkit-animation: fill-unfill-rotate 5332ms cubic-bezier(0.4, 0.0, 0.2, 1) infinite both, layer-3-fade-in-out 5332ms cubic-bezier(0.4, 0.0, 0.2, 1) infinite both;
        animation: fill-unfill-rotate 5332ms cubic-bezier(0.4, 0.0, 0.2, 1) infinite both, layer-3-fade-in-out 5332ms cubic-bezier(0.4, 0.0, 0.2, 1) infinite both;
      }

      .active .spinner-layer.layer-4 {
        /* durations: 4 * ARCTIME */
        -webkit-animation: fill-unfill-rotate 5332ms cubic-bezier(0.4, 0.0, 0.2, 1) infinite both, layer-4-fade-in-out 5332ms cubic-bezier(0.4, 0.0, 0.2, 1) infinite both;
        animation: fill-unfill-rotate 5332ms cubic-bezier(0.4, 0.0, 0.2, 1) infinite both, layer-4-fade-in-out 5332ms cubic-bezier(0.4, 0.0, 0.2, 1) infinite both;
      }

      @-webkit-keyframes fill-unfill-rotate {
        12.5% { -webkit-transform: rotate(135deg);  } /* 0.5 * ARCSIZE */
        25%   { -webkit-transform: rotate(270deg);  } /* 1   * ARCSIZE */
        37.5% { -webkit-transform: rotate(405deg);  } /* 1.5 * ARCSIZE */
        50%   { -webkit-transform: rotate(540deg);  } /* 2   * ARCSIZE */
        62.5% { -webkit-transform: rotate(675deg);  } /* 2.5 * ARCSIZE */
        75%   { -webkit-transform: rotate(810deg);  } /* 3   * ARCSIZE */
        87.5% { -webkit-transform: rotate(945deg);  } /* 3.5 * ARCSIZE */
        to    { -webkit-transform: rotate(1080deg); } /* 4   * ARCSIZE */
      }

      @keyframes fill-unfill-rotate {
        12.5% { transform: rotate(135deg);  } /* 0.5 * ARCSIZE */
        25%   { transform: rotate(270deg);  } /* 1   * ARCSIZE */
        37.5% { transform: rotate(405deg);  } /* 1.5 * ARCSIZE */
        50%   { transform: rotate(540deg);  } /* 2   * ARCSIZE */
        62.5% { transform: rotate(675deg);  } /* 2.5 * ARCSIZE */
        75%   { transform: rotate(810deg);  } /* 3   * ARCSIZE */
        87.5% { transform: rotate(945deg);  } /* 3.5 * ARCSIZE */
        to    { transform: rotate(1080deg); } /* 4   * ARCSIZE */
      }

      /**
       * HACK: Even though the intention is to have the current .spinner-layer at
       * `opacity: 1`, we set it to `opacity: 0.99` instead since this forces Chrome
       * to do proper subpixel rendering for the elements being animated. This is
       * especially visible in Chrome 39 on Ubuntu 14.04. See:
       *
       * - https://github.com/Polymer/paper-spinner/issues/9
       * - https://code.google.com/p/chromium/issues/detail?id=436255
       */
      @-webkit-keyframes layer-1-fade-in-out {
        from { opacity: 0.99; }
        25% { opacity: 0.99; }
        26% { opacity: 0; }
        89% { opacity: 0; }
        90% { opacity: 0.99; }
        100% { opacity: 0.99; }
      }

      @keyframes layer-1-fade-in-out {
        from { opacity: 0.99; }
        25% { opacity: 0.99; }
        26% { opacity: 0; }
        89% { opacity: 0; }
        90% { opacity: 0.99; }
        100% { opacity: 0.99; }
      }

      @-webkit-keyframes layer-2-fade-in-out {
        from { opacity: 0; }
        15% { opacity: 0; }
        25% { opacity: 0.99; }
        50% { opacity: 0.99; }
        51% { opacity: 0; }
      }

      @keyframes layer-2-fade-in-out {
        from { opacity: 0; }
        15% { opacity: 0; }
        25% { opacity: 0.99; }
        50% { opacity: 0.99; }
        51% { opacity: 0; }
      }

      @-webkit-keyframes layer-3-fade-in-out {
        from { opacity: 0; }
        40% { opacity: 0; }
        50% { opacity: 0.99; }
        75% { opacity: 0.99; }
        76% { opacity: 0; }
      }

      @keyframes layer-3-fade-in-out {
        from { opacity: 0; }
        40% { opacity: 0; }
        50% { opacity: 0.99; }
        75% { opacity: 0.99; }
        76% { opacity: 0; }
      }

      @-webkit-keyframes layer-4-fade-in-out {
        from { opacity: 0; }
        65% { opacity: 0; }
        75% { opacity: 0.99; }
        90% { opacity: 0.99; }
        100% { opacity: 0; }
      }

      @keyframes layer-4-fade-in-out {
        from { opacity: 0; }
        65% { opacity: 0; }
        75% { opacity: 0.99; }
        90% { opacity: 0.99; }
        100% { opacity: 0; }
      }

      /**
       * Patch the gap that appear between the two adjacent div.circle-clipper while the
       * spinner is rotating (appears on Chrome 38, Safari 7.1, and IE 11).
       *
       * Update: the gap no longer appears on Chrome when .spinner-layer's opacity is 0.99,
       * but still does on Safari and IE.
       */
      .gap-patch {
        position: absolute;
        box-sizing: border-box;
        top: 0;
        left: 45%;
        width: 10%;
        height: 100%;
        overflow: hidden;
        border-color: inherit;
      }

      .gap-patch .circle {
        width: 1000%;
        left: -450%;
      }

      .circle-clipper {
        display: inline-block;
        position: relative;
        width: 50%;
        height: 100%;
        overflow: hidden;
        border-color: inherit;
      }

      .circle-clipper .circle {
        width: 200%;
      }

      .circle {
        box-sizing: border-box;
        height: 100%;
        border-width: var(--paper-spinner-stroke-width, 3px); /* STROKEWIDTH */
        border-style: solid;
        border-color: inherit;
        border-bottom-color: transparent !important;
        border-radius: 50%;
        -webkit-animation: none;
        animation: none;

        @apply(--layout-fit);
      }

      .circle-clipper.left .circle {
        border-right-color: transparent !important;
        -webkit-transform: rotate(129deg);
        transform: rotate(129deg);
      }

      .circle-clipper.right .circle {
        left: -100%;
        border-left-color: transparent !important;
        -webkit-transform: rotate(-129deg);
        transform: rotate(-129deg);
      }

      .active .circle-clipper.left .circle {
        /* duration: ARCTIME */
        -webkit-animation: left-spin 1333ms cubic-bezier(0.4, 0.0, 0.2, 1) infinite both;
        animation: left-spin 1333ms cubic-bezier(0.4, 0.0, 0.2, 1) infinite both;
      }

      .active .circle-clipper.right .circle {
        /* duration: ARCTIME */
        -webkit-animation: right-spin 1333ms cubic-bezier(0.4, 0.0, 0.2, 1) infinite both;
        animation: right-spin 1333ms cubic-bezier(0.4, 0.0, 0.2, 1) infinite both;
      }

      @-webkit-keyframes left-spin {
        from { -webkit-transform: rotate(130deg); }
        50% { -webkit-transform: rotate(-5deg); }
        to { -webkit-transform: rotate(130deg); }
      }

      @keyframes left-spin {
        from { transform: rotate(130deg); }
        50% { transform: rotate(-5deg); }
        to { transform: rotate(130deg); }
      }

      @-webkit-keyframes right-spin {
        from { -webkit-transform: rotate(-130deg); }
        50% { -webkit-transform: rotate(5deg); }
        to { -webkit-transform: rotate(-130deg); }
      }

      @keyframes right-spin {
        from { transform: rotate(-130deg); }
        50% { transform: rotate(5deg); }
        to { transform: rotate(-130deg); }
      }

      #spinnerContainer.cooldown {
        /* duration: SHRINK_TIME */
        -webkit-animation: container-rotate 1568ms linear infinite, fade-out 400ms cubic-bezier(0.4, 0.0, 0.2, 1);
        animation: container-rotate 1568ms linear infinite, fade-out 400ms cubic-bezier(0.4, 0.0, 0.2, 1);
      }

      @-webkit-keyframes fade-out {
        from { opacity: 0.99; }
        to { opacity: 0; }
      }

      @keyframes fade-out {
        from { opacity: 0.99; }
        to { opacity: 0; }
      }
    </style>
  </template>
</dom-module>




<dom-module id="paper-spinner-lite">
  <template>
    <style include="paper-spinner-styles"></style>

    <div id="spinnerContainer" class-name="[[__computeContainerClasses(active, __coolingDown)]]">
      <div class="spinner-layer">
        <div class="circle-clipper left">
          <div class="circle"></div>
        </div><div class="gap-patch">
          <div class="circle"></div>
        </div><div class="circle-clipper right">
          <div class="circle"></div>
        </div>
      </div>
    </div>
  </template>

  <script>//~~WEBPATH~~/paper-spinner/paper-spinner-lite.html.js
Polymer({is:"paper-spinner-lite",behaviors:[Polymer.PaperSpinnerBehavior]});
</script>
</dom-module>








<dom-module id="paper-dialog-scrollable">

  <template>
    <style>

      :host {
        display: block;
        @apply(--layout-relative);
      }

      :host(.is-scrolled:not(:first-child))::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 1px;
        background: var(--divider-color);
      }

      :host(.can-scroll:not(.scrolled-to-bottom):not(:last-child))::after {
        content: '';
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        height: 1px;
        background: var(--divider-color);
      }

      .scrollable {
        padding: 0 24px;

        @apply(--layout-scroll);
        @apply(--paper-dialog-scrollable);
      }

      .fit {
        @apply(--layout-fit);
      }
    </style>

    <div id="scrollable" class="scrollable">
      <content></content>
    </div>
  </template>

</dom-module>

<script>//~~WEBPATH~~/paper-dialog-scrollable/paper-dialog-scrollable.html.js
Polymer({is:"paper-dialog-scrollable",properties:{dialogElement:{type:Object}},listeners:{"scrollable.scroll":"_scroll"},get scrollTarget(){return this.$.scrollable},ready:function(){this._ensureTarget()},attached:function(){this.classList.add("no-padding");this._ensureTarget();requestAnimationFrame(this._scroll.bind(this))},_scroll:function(){this.toggleClass("is-scrolled",0<this.scrollTarget.scrollTop);this.toggleClass("can-scroll",this.scrollTarget.offsetHeight<this.scrollTarget.scrollHeight);
this.toggleClass("scrolled-to-bottom",this.scrollTarget.scrollTop+this.scrollTarget.offsetHeight>=this.scrollTarget.scrollHeight)},_ensureTarget:function(){(this.dialogElement=this.dialogElement||Polymer.dom(this).parentNode)&&this.dialogElement.behaviors&&0<=this.dialogElement.behaviors.indexOf(Polymer.PaperDialogBehaviorImpl)?(this.dialogElement.sizingTarget=this.scrollTarget,this.scrollTarget.classList.remove("fit")):this.dialogElement&&this.scrollTarget.classList.add("fit")}});
</script>

<script>//~~WEBPATH~~/tf-imports/three.js
/*

 The MIT License

 Copyright (c) 2010-2013 three.js authors

 Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated documentation files (the "Software"), to deal
 in the Software without restriction, including without limitation the rights
 to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the Software is
 furnished to do so, subject to the following conditions:

 The above copyright notice and this permission notice shall be included in
 all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 THE SOFTWARE.
*/
var V={REVISION:"77"};"function"===typeof define&&define.amd?define("three",V):"undefined"!==typeof exports&&"undefined"!==typeof module&&(module.exports=V);void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52));void 0===Math.sign&&(Math.sign=function(a){return 0>a?-1:0<a?1:+a});void 0===Function.prototype.name&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*(\S*)\s*\(/)[1]}});
void 0===Object.assign&&(Object.assign=function(a){if(void 0===a||null===a)throw new TypeError("Cannot convert undefined or null to object");for(var b=Object(a),c=1;c<arguments.length;c++){var d=arguments[c];if(void 0!==d&&null!==d)for(var e in d)Object.prototype.hasOwnProperty.call(d,e)&&(b[e]=d[e])}return b});
Object.assign(V,{MOUSE:{LEFT:0,MIDDLE:1,RIGHT:2},CullFaceNone:0,CullFaceBack:1,CullFaceFront:2,CullFaceFrontBack:3,FrontFaceDirectionCW:0,FrontFaceDirectionCCW:1,BasicShadowMap:0,PCFShadowMap:1,PCFSoftShadowMap:2,FrontSide:0,BackSide:1,DoubleSide:2,FlatShading:1,SmoothShading:2,NoColors:0,FaceColors:1,VertexColors:2,NoBlending:0,NormalBlending:1,AdditiveBlending:2,SubtractiveBlending:3,MultiplyBlending:4,CustomBlending:5,AddEquation:100,SubtractEquation:101,ReverseSubtractEquation:102,MinEquation:103,
MaxEquation:104,ZeroFactor:200,OneFactor:201,SrcColorFactor:202,OneMinusSrcColorFactor:203,SrcAlphaFactor:204,OneMinusSrcAlphaFactor:205,DstAlphaFactor:206,OneMinusDstAlphaFactor:207,DstColorFactor:208,OneMinusDstColorFactor:209,SrcAlphaSaturateFactor:210,NeverDepth:0,AlwaysDepth:1,LessDepth:2,LessEqualDepth:3,EqualDepth:4,GreaterEqualDepth:5,GreaterDepth:6,NotEqualDepth:7,MultiplyOperation:0,MixOperation:1,AddOperation:2,NoToneMapping:0,LinearToneMapping:1,ReinhardToneMapping:2,Uncharted2ToneMapping:3,
CineonToneMapping:4,UVMapping:300,CubeReflectionMapping:301,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,SphericalReflectionMapping:305,CubeUVReflectionMapping:306,CubeUVRefractionMapping:307,RepeatWrapping:1E3,ClampToEdgeWrapping:1001,MirroredRepeatWrapping:1002,NearestFilter:1003,NearestMipMapNearestFilter:1004,NearestMipMapLinearFilter:1005,LinearFilter:1006,LinearMipMapNearestFilter:1007,LinearMipMapLinearFilter:1008,UnsignedByteType:1009,
ByteType:1010,ShortType:1011,UnsignedShortType:1012,IntType:1013,UnsignedIntType:1014,FloatType:1015,HalfFloatType:1025,UnsignedShort4444Type:1016,UnsignedShort5551Type:1017,UnsignedShort565Type:1018,AlphaFormat:1019,RGBFormat:1020,RGBAFormat:1021,LuminanceFormat:1022,LuminanceAlphaFormat:1023,RGBEFormat:V.RGBAFormat,DepthFormat:1026,RGB_S3TC_DXT1_Format:2001,RGBA_S3TC_DXT1_Format:2002,RGBA_S3TC_DXT3_Format:2003,RGBA_S3TC_DXT5_Format:2004,RGB_PVRTC_4BPPV1_Format:2100,RGB_PVRTC_2BPPV1_Format:2101,
RGBA_PVRTC_4BPPV1_Format:2102,RGBA_PVRTC_2BPPV1_Format:2103,RGB_ETC1_Format:2151,LoopOnce:2200,LoopRepeat:2201,LoopPingPong:2202,InterpolateDiscrete:2300,InterpolateLinear:2301,InterpolateSmooth:2302,ZeroCurvatureEnding:2400,ZeroSlopeEnding:2401,WrapAroundEnding:2402,TrianglesDrawMode:0,TriangleStripDrawMode:1,TriangleFanDrawMode:2,LinearEncoding:3E3,sRGBEncoding:3001,GammaEncoding:3007,RGBEEncoding:3002,LogLuvEncoding:3003,RGBM7Encoding:3004,RGBM16Encoding:3005,RGBDEncoding:3006,BasicDepthPacking:3200,
RGBADepthPacking:3201});V.Color=function(a,b,c){void 0===b&&void 0===c?a=this.set(a):(this.r=a,this.g=b,this.b=c,a=this);return a};
V.Color.prototype={constructor:V.Color,r:1,g:1,b:1,set:function(a){a instanceof V.Color?this.copy(a):"number"===typeof a?za(this,a):"string"===typeof a&&Ea(this,a);return this},setScalar:function(a){this.b=this.g=this.r=a},setHSL:function(){function a(a,c,d){0>d&&(d+=1);1<d&&--d;return d<1/6?a+6*(c-a)*d:.5>d?c:d<2/3?a+6*(c-a)*(2/3-d):a}return function(b,c,d){b=V.Math.euclideanModulo(b,1);c=V.Math.clamp(c,0,1);d=V.Math.clamp(d,0,1);0===c?this.r=this.g=this.b=d:(c=.5>=d?d*(1+c):d+c-d*c,d=2*d-c,this.r=
a(d,c,b+1/3),this.g=a(d,c,b),this.b=a(d,c,b-1/3));return this}}(),clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(a){this.r=a.r;this.g=a.g;this.b=a.b;return this},copyGammaToLinear:function(a,b){void 0===b&&(b=2);this.r=Math.pow(a.r,b);this.g=Math.pow(a.g,b);this.b=Math.pow(a.b,b);return this},copyLinearToGamma:function(a,b){void 0===b&&(b=2);b=0<b?1/b:1;this.r=Math.pow(a.r,b);this.g=Math.pow(a.g,b);this.b=Math.pow(a.b,b);return this},convertGammaToLinear:function(){var a=
this.r,b=this.g,c=this.b;this.r=a*a;this.g=b*b;this.b=c*c;return this},convertLinearToGamma:function(){this.r=Math.sqrt(this.r);this.g=Math.sqrt(this.g);this.b=Math.sqrt(this.b);return this},getHexString:function(){return("000000"+Fa(this).toString(16)).slice(-6)},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(a,b,c){var d=0,e=0,g=0,d=this.r,e=this.g,h=this.b,k=Math.max(d,e,h),l=Math.min(d,e,h),m,g=(l+k)/2;if(l===k)l=m=0;else{var p=k-
l,l=.5>=g?p/(k+l):p/(2-k-l);switch(k){case d:m=(e-h)/p+(e<h?6:0);break;case e:m=(h-d)/p+2;break;case h:m=(d-e)/p+4}m/=6}d=m+a;e=l+b;g+=c;this.setHSL(d,e,g);return this},add:function(a){this.r+=a.r;this.g+=a.g;this.b+=a.b;return this},addColors:function(a,b){this.r=a.r+b.r;this.g=a.g+b.g;this.b=a.b+b.b;return this},addScalar:function(a){this.r+=a;this.g+=a;this.b+=a;return this},multiply:function(a){this.r*=a.r;this.g*=a.g;this.b*=a.b;return this},multiplyScalar:function(a){this.r*=a;this.g*=a;this.b*=
a;return this},lerp:function(a,b){this.r+=(a.r-this.r)*b;this.g+=(a.g-this.g)*b;this.b+=(a.b-this.b)*b;return this},equals:function(a){return a.r===this.r&&a.g===this.g&&a.b===this.b},fromArray:function(a,b){void 0===b&&(b=0);this.r=a[b];this.g=a[b+1];this.b=a[b+2];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.r;a[b+1]=this.g;a[b+2]=this.b;return a}};function Fa(a){return 255*a.r<<16^255*a.g<<8^255*a.b<<0}
function Ea(a,b){function c(a){void 0!==a&&1>parseFloat(a)&&console.warn("THREE.Color: Alpha component of "+b+" will be ignored.")}var d;if(d=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(b)){var e=d[2];switch(d[1]){case "rgb":case "rgba":if(d=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(e)){a.r=Math.min(255,parseInt(d[1],10))/255;a.g=Math.min(255,parseInt(d[2],10))/255;a.b=Math.min(255,parseInt(d[3],10))/255;c(d[5]);return}if(d=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(e)){a.r=
Math.min(100,parseInt(d[1],10))/100;a.g=Math.min(100,parseInt(d[2],10))/100;a.b=Math.min(100,parseInt(d[3],10))/100;c(d[5]);return}break;case "hsl":case "hsla":if(d=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(e)){var e=parseFloat(d[1])/360,g=parseInt(d[2],10)/100,h=parseInt(d[3],10)/100;c(d[5]);a.setHSL(e,g,h);return}}}else if(d=/^\#([A-Fa-f0-9]+)$/.exec(b)){d=d[1];e=d.length;if(3===e){a.r=parseInt(d.charAt(0)+d.charAt(0),16)/255;a.g=parseInt(d.charAt(1)+d.charAt(1),
16)/255;a.b=parseInt(d.charAt(2)+d.charAt(2),16)/255;return}if(6===e){a.r=parseInt(d.charAt(0)+d.charAt(1),16)/255;a.g=parseInt(d.charAt(2)+d.charAt(3),16)/255;a.b=parseInt(d.charAt(4)+d.charAt(5),16)/255;return}}b&&0<b.length&&(d=V.ColorKeywords[b],void 0!==d?za(a,d):console.warn("THREE.Color: Unknown color "+b))}function za(a,b){b=Math.floor(b);a.r=(b>>16&255)/255;a.g=(b>>8&255)/255;a.b=(b&255)/255}
V.ColorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,
darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,
grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,
lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,
palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,
tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};V.Quaternion=function(a,b,c,d){this._x=a||0;this._y=b||0;this._z=c||0;this._w=void 0!==d?d:1};
V.Quaternion.prototype={constructor:V.Quaternion,get x(){return this._x},set x(a){this._x=a;this.onChangeCallback()},get y(){return this._y},set y(a){this._y=a;this.onChangeCallback()},get z(){return this._z},set z(a){this._z=a;this.onChangeCallback()},get w(){return this._w},set w(a){this._w=a;this.onChangeCallback()},set:function(a,b,c,d){this._x=a;this._y=b;this._z=c;this._w=d;this.onChangeCallback();return this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(a){this._x=
a.x;this._y=a.y;this._z=a.z;this._w=a.w;this.onChangeCallback();return this},setFromRotationMatrix:function(a){var b=a.elements,c=b[0];a=b[4];var d=b[8],e=b[1],g=b[5],h=b[9],k=b[2],l=b[6],b=b[10],m=c+g+b;0<m?(c=.5/Math.sqrt(m+1),this._w=.25/c,this._x=(l-h)*c,this._y=(d-k)*c,this._z=(e-a)*c):c>g&&c>b?(c=2*Math.sqrt(1+c-g-b),this._w=(l-h)/c,this._x=.25*c,this._y=(a+e)/c,this._z=(d+k)/c):g>b?(c=2*Math.sqrt(1+g-c-b),this._w=(d-k)/c,this._x=(a+e)/c,this._y=.25*c,this._z=(h+l)/c):(c=2*Math.sqrt(1+b-c-g),
this._w=(e-a)/c,this._x=(d+k)/c,this._y=(h+l)/c,this._z=.25*c);this.onChangeCallback();return this},setFromUnitVectors:function(){var a,b;return function(c,d){void 0===a&&(a=new V.Vector3);b=c.dot(d)+1;1E-6>b?(b=0,Math.abs(c.x)>Math.abs(c.z)?a.set(-c.y,c.x,0):a.set(0,-c.z,c.y)):Ga(a,c,d);this._x=a.x;this._y=a.y;this._z=a.z;this._w=b;return this.normalize()}}(),inverse:function(){this._x*=-1;this._y*=-1;this._z*=-1;this.onChangeCallback();return this.normalize()},dot:function(a){return this._x*a._x+
this._y*a._y+this._z*a._z+this._w*a._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var a=this.length();0===a?(this._z=this._y=this._x=0,this._w=1):(a=1/a,this._x*=a,this._y*=a,this._z*=a,this._w*=a);this.onChangeCallback();return this},multiply:function(a,b){return void 0!==b?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),
Ha(this,a,b)):Ha(this,this,a)},premultiply:function(a){return Ha(this,a,this)},slerp:function(a,b){if(0===b)return this;if(1===b)return this.copy(a);var c=this._x,d=this._y,e=this._z,g=this._w,h=g*a._w+c*a._x+d*a._y+e*a._z;0>h?(this._w=-a._w,this._x=-a._x,this._y=-a._y,this._z=-a._z,h=-h):this.copy(a);if(1<=h)return this._w=g,this._x=c,this._y=d,this._z=e,this;a=Math.sqrt(1-h*h);if(.001>Math.abs(a))return this._w=.5*(g+this._w),this._x=.5*(c+this._x),this._y=.5*(d+this._y),this._z=.5*(e+this._z),
this;var k=Math.atan2(a,h),h=Math.sin((1-b)*k)/a;b=Math.sin(b*k)/a;this._w=g*h+this._w*b;this._x=c*h+this._x*b;this._y=d*h+this._y*b;this._z=e*h+this._z*b;this.onChangeCallback();return this},equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._w===this._w},fromArray:function(a,b){void 0===b&&(b=0);this._x=a[b];this._y=a[b+1];this._z=a[b+2];this._w=a[b+3];this.onChangeCallback();return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this._x;a[b+1]=this._y;
a[b+2]=this._z;a[b+3]=this._w;return a},onChange:function(a){this.onChangeCallback=a;return this},onChangeCallback:function(){}};function Ha(a,b,c){var d=b._x,e=b._y,g=b._z;b=b._w;var h=c._x,k=c._y,l=c._z;c=c._w;a._x=d*c+b*h+e*l-g*k;a._y=e*c+b*k+g*h-d*l;a._z=g*c+b*l+d*k-e*h;a._w=b*c-d*h-e*k-g*l;a.onChangeCallback();return a}function Ia(a,b,c){c/=2;var d=Math.sin(c);a._x=b.x*d;a._y=b.y*d;a._z=b.z*d;a._w=Math.cos(c);a.onChangeCallback();return a}
function Na(a,b,c){if(!1===b instanceof V.Euler)throw Error("THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var d=Math.cos(b._x/2),e=Math.cos(b._y/2),g=Math.cos(b._z/2),h=Math.sin(b._x/2),k=Math.sin(b._y/2),l=Math.sin(b._z/2);b=b.order;"XYZ"===b?(a._x=h*e*g+d*k*l,a._y=d*k*g-h*e*l,a._z=d*e*l+h*k*g,a._w=d*e*g-h*k*l):"YXZ"===b?(a._x=h*e*g+d*k*l,a._y=d*k*g-h*e*l,a._z=d*e*l-h*k*g,a._w=d*e*g+h*k*l):"ZXY"===b?(a._x=h*e*g-d*k*l,a._y=d*k*g+h*e*l,a._z=d*e*
l+h*k*g,a._w=d*e*g-h*k*l):"ZYX"===b?(a._x=h*e*g-d*k*l,a._y=d*k*g+h*e*l,a._z=d*e*l-h*k*g,a._w=d*e*g+h*k*l):"YZX"===b?(a._x=h*e*g+d*k*l,a._y=d*k*g+h*e*l,a._z=d*e*l-h*k*g,a._w=d*e*g-h*k*l):"XZY"===b&&(a._x=h*e*g-d*k*l,a._y=d*k*g-h*e*l,a._z=d*e*l+h*k*g,a._w=d*e*g+h*k*l);if(!1!==c)a.onChangeCallback();return a}
Object.assign(V.Quaternion,{slerp:function(a,b,c,d){return c.copy(a).slerp(b,d)},slerpFlat:function(a,b,c,d,e,g,h){var k=c[d+0],l=c[d+1],m=c[d+2];c=c[d+3];d=e[g+0];var p=e[g+1],r=e[g+2];e=e[g+3];if(c!==e||k!==d||l!==p||m!==r){g=1-h;var n=k*d+l*p+m*r+c*e,t=0<=n?1:-1,q=1-n*n;q>Number.EPSILON&&(q=Math.sqrt(q),n=Math.atan2(q,n*t),g=Math.sin(g*n)/q,h=Math.sin(h*n)/q);t*=h;k=k*g+d*t;l=l*g+p*t;m=m*g+r*t;c=c*g+e*t;g===1-h&&(h=1/Math.sqrt(k*k+l*l+m*m+c*c),k*=h,l*=h,m*=h,c*=h)}a[b]=k;a[b+1]=l;a[b+2]=m;a[b+
3]=c}});V.Vector2=function(a,b){this.x=a||0;this.y=b||0};
V.Vector2.prototype={constructor:V.Vector2,get width(){return this.x},set width(a){this.x=a},get height(){return this.y},set height(a){this.y=a},set:function(a,b){this.x=a;this.y=b;return this},setScalar:function(a){this.y=this.x=a;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;default:throw Error("index is out of range: "+a);}},getComponent:function(a){switch(a){case 0:return this.x;
case 1:return this.y;default:throw Error("index is out of range: "+a);}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(a){this.x=a.x;this.y=a.y;return this},add:function(a,b){if(void 0!==b)return console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;return this},addScalar:function(a){this.x+=a;this.y+=a;return this},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;return this},
addScaledVector:function(a,b){this.x+=a.x*b;this.y+=a.y*b;return this},sub:function(a,b){if(void 0!==b)return console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b);this.x-=a.x;this.y-=a.y;return this},subScalar:function(a){this.x-=a;this.y-=a;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;return this},multiply:function(a){this.x*=a.x;this.y*=a.y;return this},multiplyScalar:function(a){isFinite(a)?(this.x*=a,
this.y*=a):this.y=this.x=0;return this},divide:function(a){this.x/=a.x;this.y/=a.y;return this},divideScalar:function(a){return this.multiplyScalar(1/a)},min:function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);return this},max:function(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);return this},clamp:function(a,b){this.x=Math.max(a.x,Math.min(b.x,this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));return this},clampScalar:function(){var a,b;return function(c,d){void 0===
a&&(a=new V.Vector2,b=new V.Vector2);a.set(c,c);b.set(d,d);return this.clamp(a,b)}}(),clampLength:function(a,b){var c=this.length();return this.multiplyScalar(Math.max(a,Math.min(b,c))/c)},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);
this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);return this},negate:function(){this.x=-this.x;this.y=-this.y;return this},dot:function(a){return this.x*a.x+this.y*a.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length())},angle:function(){var a=Math.atan2(this.y,this.x);0>a&&(a+=2*Math.PI);return a},
distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=this.x-a.x;a=this.y-a.y;return b*b+a*a},setLength:function(a){return this.multiplyScalar(a/this.length())},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;return this},lerpVectors:function(a,b,c){return this.subVectors(b,a).multiplyScalar(c).add(a)},equals:function(a){return a.x===this.x&&a.y===this.y},fromArray:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];return this},
toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;return a},fromAttribute:function(a,b,c){void 0===c&&(c=0);b=b*a.itemSize+c;this.x=a.array[b];this.y=a.array[b+1];return this},rotateAround:function(a,b){var c=Math.cos(b);b=Math.sin(b);var d=this.x-a.x,e=this.y-a.y;this.x=d*c-e*b+a.x;this.y=d*b+e*c+a.y;return this}};V.Vector3=function(a,b,c){this.x=a||0;this.y=b||0;this.z=c||0};
V.Vector3.prototype={constructor:V.Vector3,set:function(a,b,c){this.x=a;this.y=b;this.z=c;return this},setScalar:function(a){this.z=this.y=this.x=a;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setZ:function(a){this.z=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;default:throw Error("index is out of range: "+a);}},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;
case 2:return this.z;default:throw Error("index is out of range: "+a);}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;return this},add:function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;this.z+=a.z;return this},addScalar:function(a){this.x+=a;this.y+=a;this.z+=a;return this},addVectors:function(a,
b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;return this},addScaledVector:function(a,b){this.x+=a.x*b;this.y+=a.y*b;this.z+=a.z*b;return this},sub:function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b);this.x-=a.x;this.y-=a.y;this.z-=a.z;return this},subScalar:function(a){this.x-=a;this.y-=a;this.z-=a;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;return this},
multiply:function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.x=a.x*b.x,this.y=a.y*b.y,this.z=a.z*b.z,this;this.x*=a.x;this.y*=a.y;this.z*=a.z;return this},multiplyScalar:function(a){isFinite(a)?(this.x*=a,this.y*=a,this.z*=a):this.z=this.y=this.x=0;return this},applyEuler:function(){var a;return function(b){!1===b instanceof V.Euler&&console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.");
void 0===a&&(a=new V.Quaternion);return Oa(this,Na(a,b))}}(),applyAxisAngle:function(){var a;return function(b,c){void 0===a&&(a=new V.Quaternion);return Oa(this,Ia(a,b,c))}}(),applyMatrix4:function(a){var b=this.x,c=this.y,d=this.z;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*d+a[12];this.y=a[1]*b+a[5]*c+a[9]*d+a[13];this.z=a[2]*b+a[6]*c+a[10]*d+a[14];return this},project:function(){var a;return function(b){void 0===a&&(a=new V.Matrix4);Pa(a,b.projectionMatrix,a.getInverse(b.matrixWorld));return Qa(this,
a)}}(),unproject:function(){var a;return function(b){void 0===a&&(a=new V.Matrix4);Pa(a,b.matrixWorld,a.getInverse(b.projectionMatrix));return Qa(this,a)}}(),divide:function(a){this.x/=a.x;this.y/=a.y;this.z/=a.z;return this},divideScalar:function(a){return this.multiplyScalar(1/a)},min:function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);this.z=Math.min(this.z,a.z);return this},max:function(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);this.z=Math.max(this.z,a.z);return this},
clamp:function(a,b){this.x=Math.max(a.x,Math.min(b.x,this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));this.z=Math.max(a.z,Math.min(b.z,this.z));return this},clampScalar:function(){var a,b;return function(c,d){void 0===a&&(a=new V.Vector3,b=new V.Vector3);a.set(c,c,c);b.set(d,d,d);return this.clamp(a,b)}}(),clampLength:function(a,b){var c=this.length();return this.multiplyScalar(Math.max(a,Math.min(b,c))/c)},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);
return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this},dot:function(a){return this.x*
a.x+this.y*a.y+this.z*a.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(a){return this.multiplyScalar(a/this.length())},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;return this},lerpVectors:function(a,
b,c){return this.subVectors(b,a).multiplyScalar(c).add(a)},projectOnVector:function(){var a,b;return function(c){void 0===a&&(a=new V.Vector3);a.copy(c).normalize();b=this.dot(a);return this.copy(a).multiplyScalar(b)}}(),projectOnPlane:function(){var a;return function(b){void 0===a&&(a=new V.Vector3);a.copy(this).projectOnVector(b);return this.sub(a)}}(),reflect:function(){var a;return function(b){void 0===a&&(a=new V.Vector3);return this.sub(a.copy(b).multiplyScalar(2*this.dot(b)))}}(),angleTo:function(a){return Math.acos(V.Math.clamp(this.dot(a)/
Math.sqrt(this.lengthSq()*a.lengthSq()),-1,1))},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=this.x-a.x,c=this.y-a.y;a=this.z-a.z;return b*b+c*c+a*a},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z},fromArray:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];this.z=a[b+2];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;a[b+2]=this.z;return a},fromAttribute:function(a,
b,c){void 0===c&&(c=0);b=b*a.itemSize+c;this.x=a.array[b];this.y=a.array[b+1];this.z=a.array[b+2];return this}};function Ra(a,b,c){if("number"===typeof b){console.warn("THREE.Vector3: setFromMatrixColumn now expects ( matrix, index ).");var d=b;b=c;c=d}return a.fromArray(b.elements,4*c)}function W(a,b){return Ra(a,b,3)}function Ga(a,b,c){var d=b.x,e=b.y;b=b.z;var g=c.x,h=c.y;c=c.z;a.x=e*c-b*h;a.y=b*g-d*c;a.z=d*h-e*g;return a}
function Sa(a,b){var c=a.x,d=a.y,e=a.z;a.x=d*b.z-e*b.y;a.y=e*b.x-c*b.z;a.z=c*b.y-d*b.x;return a}function Ya(a,b){var c=a.x,d=a.y,e=a.z;b=b.elements;a.x=b[0]*c+b[4]*d+b[8]*e;a.y=b[1]*c+b[5]*d+b[9]*e;a.z=b[2]*c+b[6]*d+b[10]*e;a.normalize()}function Oa(a,b){var c=a.x,d=a.y,e=a.z,g=b.x,h=b.y,k=b.z;b=b.w;var l=b*c+h*e-k*d,m=b*d+k*c-g*e,p=b*e+g*d-h*c,c=-g*c-h*d-k*e;a.x=l*b+c*-g+m*-k-p*-h;a.y=m*b+c*-h+p*-g-l*-k;a.z=p*b+c*-k+l*-h-m*-g;return a}
function Qa(a,b){var c=a.x,d=a.y,e=a.z;b=b.elements;var g=1/(b[3]*c+b[7]*d+b[11]*e+b[15]);a.x=(b[0]*c+b[4]*d+b[8]*e+b[12])*g;a.y=(b[1]*c+b[5]*d+b[9]*e+b[13])*g;a.z=(b[2]*c+b[6]*d+b[10]*e+b[14])*g;return a}function Za(a,b){var c=a.x,d=a.y,e=a.z;b=b.elements;a.x=b[0]*c+b[3]*d+b[6]*e;a.y=b[1]*c+b[4]*d+b[7]*e;a.z=b[2]*c+b[5]*d+b[8]*e;return a}V.Vector4=function(a,b,c,d){this.x=a||0;this.y=b||0;this.z=c||0;this.w=void 0!==d?d:1};
V.Vector4.prototype={constructor:V.Vector4,set:function(a,b,c,d){this.x=a;this.y=b;this.z=c;this.w=d;return this},setScalar:function(a){this.w=this.z=this.y=this.x=a;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setZ:function(a){this.z=a;return this},setW:function(a){this.w=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;case 3:this.w=b;break;default:throw Error("index is out of range: "+
a);}},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+a);}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;this.w=void 0!==a.w?a.w:1;return this},add:function(a,b){if(void 0!==b)return console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);
this.x+=a.x;this.y+=a.y;this.z+=a.z;this.w+=a.w;return this},addScalar:function(a){this.x+=a;this.y+=a;this.z+=a;this.w+=a;return this},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;this.w=a.w+b.w;return this},addScaledVector:function(a,b){this.x+=a.x*b;this.y+=a.y*b;this.z+=a.z*b;this.w+=a.w*b;return this},sub:function(a,b){if(void 0!==b)return console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b);this.x-=
a.x;this.y-=a.y;this.z-=a.z;this.w-=a.w;return this},subScalar:function(a){this.x-=a;this.y-=a;this.z-=a;this.w-=a;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;this.w=a.w-b.w;return this},multiplyScalar:function(a){isFinite(a)?(this.x*=a,this.y*=a,this.z*=a,this.w*=a):this.w=this.z=this.y=this.x=0;return this},applyMatrix4:function(a){var b=this.x,c=this.y,d=this.z,e=this.w;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*d+a[12]*e;this.y=a[1]*b+a[5]*c+a[9]*d+a[13]*e;this.z=
a[2]*b+a[6]*c+a[10]*d+a[14]*e;this.w=a[3]*b+a[7]*c+a[11]*d+a[15]*e;return this},divideScalar:function(a){return this.multiplyScalar(1/a)},setAxisAngleFromQuaternion:function(a){this.w=2*Math.acos(a.w);var b=Math.sqrt(1-a.w*a.w);1E-4>b?(this.x=1,this.z=this.y=0):(this.x=a.x/b,this.y=a.y/b,this.z=a.z/b);return this},setAxisAngleFromRotationMatrix:function(a){a=a.elements;var b=a[0];var c=a[4];var d=a[8],e=a[1],g=a[5],h=a[9];var k=a[2];var l=a[6];var m=a[10];if(.01>Math.abs(c-e)&&.01>Math.abs(d-k)&&
.01>Math.abs(h-l)){if(.1>Math.abs(c+e)&&.1>Math.abs(d+k)&&.1>Math.abs(h+l)&&.1>Math.abs(b+g+m-3))return this.set(1,0,0,0),this;a=Math.PI;b=(b+1)/2;g=(g+1)/2;m=(m+1)/2;c=(c+e)/4;d=(d+k)/4;h=(h+l)/4;b>g&&b>m?.01>b?(l=0,c=k=.707106781):(l=Math.sqrt(b),k=c/l,c=d/l):g>m?.01>g?(l=.707106781,k=0,c=.707106781):(k=Math.sqrt(g),l=c/k,c=h/k):.01>m?(k=l=.707106781,c=0):(c=Math.sqrt(m),l=d/c,k=h/c);this.set(l,k,c,a);return this}a=Math.sqrt((l-h)*(l-h)+(d-k)*(d-k)+(e-c)*(e-c));.001>Math.abs(a)&&(a=1);this.x=(l-
h)/a;this.y=(d-k)/a;this.z=(e-c)/a;this.w=Math.acos((b+g+m-1)/2);return this},min:function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);this.z=Math.min(this.z,a.z);this.w=Math.min(this.w,a.w);return this},max:function(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);this.z=Math.max(this.z,a.z);this.w=Math.max(this.w,a.w);return this},clamp:function(a,b){this.x=Math.max(a.x,Math.min(b.x,this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));this.z=Math.max(a.z,Math.min(b.z,this.z));
this.w=Math.max(a.w,Math.min(b.w,this.w));return this},clampScalar:function(){var a,b;return function(c,d){void 0===a&&(a=new V.Vector4,b=new V.Vector4);a.set(c,c,c,c);b.set(d,d,d,d);return this.clamp(a,b)}}(),floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);this.w=Math.floor(this.w);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);this.w=Math.ceil(this.w);return this},round:function(){this.x=Math.round(this.x);
this.y=Math.round(this.y);this.z=Math.round(this.z);this.w=Math.round(this.w);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);this.w=0>this.w?Math.ceil(this.w):Math.floor(this.w);return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;this.w=-this.w;return this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w},lengthSq:function(){return this.x*
this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(a){return this.multiplyScalar(a/this.length())},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;this.w+=(a.w-this.w)*b;return this},lerpVectors:function(a,
b,c){return this.subVectors(b,a).multiplyScalar(c).add(a)},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z&&a.w===this.w},fromArray:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];this.z=a[b+2];this.w=a[b+3];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;a[b+2]=this.z;a[b+3]=this.w;return a},fromAttribute:function(a,b,c){void 0===c&&(c=0);b=b*a.itemSize+c;this.x=a.array[b];this.y=a.array[b+1];this.z=a.array[b+2];this.w=
a.array[b+3];return this}};V.Euler=function(a,b,c,d){this._x=a||0;this._y=b||0;this._z=c||0;this._order=d||V.Euler.DefaultOrder};V.Euler.RotationOrders="XYZ YZX ZXY XZY YXZ ZYX".split(" ");V.Euler.DefaultOrder="XYZ";
V.Euler.prototype={constructor:V.Euler,get x(){return this._x},set x(a){this._x=a;this.onChangeCallback()},get y(){return this._y},set y(a){this._y=a;this.onChangeCallback()},get z(){return this._z},set z(a){this._z=a;this.onChangeCallback()},get order(){return this._order},set order(a){this._order=a;this.onChangeCallback()},set:function(a,b,c,d){this._x=a;this._y=b;this._z=c;this._order=d||this._order;this.onChangeCallback();return this},clone:function(){return new this.constructor(this._x,this._y,
this._z,this._order)},copy:function(a){this._x=a._x;this._y=a._y;this._z=a._z;this._order=a._order;this.onChangeCallback();return this},setFromRotationMatrix:function(a,b,c){var d=V.Math.clamp,e=a.elements;a=e[0];var g=e[4],h=e[8],k=e[1],l=e[5],m=e[9],p=e[2],r=e[6],e=e[10];b=b||this._order;"XYZ"===b?(this._y=Math.asin(d(h,-1,1)),.99999>Math.abs(h)?(this._x=Math.atan2(-m,e),this._z=Math.atan2(-g,a)):(this._x=Math.atan2(r,l),this._z=0)):"YXZ"===b?(this._x=Math.asin(-d(m,-1,1)),.99999>Math.abs(m)?(this._y=
Math.atan2(h,e),this._z=Math.atan2(k,l)):(this._y=Math.atan2(-p,a),this._z=0)):"ZXY"===b?(this._x=Math.asin(d(r,-1,1)),.99999>Math.abs(r)?(this._y=Math.atan2(-p,e),this._z=Math.atan2(-g,l)):(this._y=0,this._z=Math.atan2(k,a))):"ZYX"===b?(this._y=Math.asin(-d(p,-1,1)),.99999>Math.abs(p)?(this._x=Math.atan2(r,e),this._z=Math.atan2(k,a)):(this._x=0,this._z=Math.atan2(-g,l))):"YZX"===b?(this._z=Math.asin(d(k,-1,1)),.99999>Math.abs(k)?(this._x=Math.atan2(-m,l),this._y=Math.atan2(-p,a)):(this._x=0,this._y=
Math.atan2(h,e))):"XZY"===b?(this._z=Math.asin(-d(g,-1,1)),.99999>Math.abs(g)?(this._x=Math.atan2(r,l),this._y=Math.atan2(h,a)):(this._x=Math.atan2(-m,e),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+b);this._order=b;if(!1!==c)this.onChangeCallback();return this},setFromQuaternion:function(){var a;return function(b,c,d){void 0===a&&(a=new V.Matrix4);$a(a,b);return this.setFromRotationMatrix(a,c,d)}}(),setFromVector3:function(a,b){return this.set(a.x,a.y,
a.z,b||this._order)},reorder:function(){var a=new V.Quaternion;return function(b){Na(a,this);return this.setFromQuaternion(a,b)}}(),equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._order===this._order},fromArray:function(a){this._x=a[0];this._y=a[1];this._z=a[2];void 0!==a[3]&&(this._order=a[3]);this.onChangeCallback();return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this._x;a[b+1]=this._y;a[b+2]=this._z;a[b+3]=this._order;return a},toVector3:function(a){return a?
a.set(this._x,this._y,this._z):new V.Vector3(this._x,this._y,this._z)},onChange:function(a){this.onChangeCallback=a;return this},onChangeCallback:function(){}};V.Line3=function(a,b){this.start=void 0!==a?a:new V.Vector3;this.end=void 0!==b?b:new V.Vector3};
V.Line3.prototype={constructor:V.Line3,set:function(a,b){this.start.copy(a);this.end.copy(b);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.start.copy(a.start);this.end.copy(a.end);return this},center:function(a){return(a||new V.Vector3).addVectors(this.start,this.end).multiplyScalar(.5)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(a,b){return ab(this,b||new V.Vector3).multiplyScalar(a).add(this.start)},
closestPointToPointParameter:function(){var a=new V.Vector3,b=new V.Vector3;return function(c,d){a.subVectors(c,this.start);b.subVectors(this.end,this.start);c=b.dot(a)/b.dot(b);d&&(c=V.Math.clamp(c,0,1));return c}}(),closestPointToPoint:function(a,b,c){a=this.closestPointToPointParameter(a,b);return ab(this,c||new V.Vector3).multiplyScalar(a).add(this.start)},applyMatrix4:function(a){this.start.applyMatrix4(a);this.end.applyMatrix4(a);return this},equals:function(a){return a.start.equals(this.start)&&
a.end.equals(this.end)}};function ab(a,b){return(b||new V.Vector3).subVectors(a.end,a.start)}V.Box2=function(a,b){this.min=void 0!==a?a:new V.Vector2(Infinity,Infinity);this.max=void 0!==b?b:new V.Vector2(-Infinity,-Infinity)};
V.Box2.prototype={constructor:V.Box2,set:function(a,b){this.min.copy(a);this.max.copy(b);return this},setFromPoints:function(a){this.makeEmpty();for(var b=0,c=a.length;b<c;b++)this.expandByPoint(a[b]);return this},setFromCenterAndSize:function(){var a=new V.Vector2;return function(b,c){c=a.copy(c).multiplyScalar(.5);this.min.copy(b).sub(c);this.max.copy(b).add(c);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.min.copy(a.min);this.max.copy(a.max);return this},
makeEmpty:function(){this.min.x=this.min.y=Infinity;this.max.x=this.max.y=-Infinity;return this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},center:function(a){return(a||new V.Vector2).addVectors(this.min,this.max).multiplyScalar(.5)},size:function(a){return(a||new V.Vector2).subVectors(this.max,this.min)},expandByPoint:function(a){this.min.min(a);this.max.max(a);return this},expandByVector:function(a){this.min.sub(a);this.max.add(a);return this},expandByScalar:function(a){this.min.addScalar(-a);
this.max.addScalar(a);return this},containsPoint:function(a){return a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y?!1:!0},containsBox:function(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y?!0:!1},getParameter:function(a,b){return(b||new V.Vector2).set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(a){return a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y?
!1:!0},clampPoint:function(a,b){return(b||new V.Vector2).copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new V.Vector2;return function(b){return a.copy(b).clamp(this.min,this.max).sub(b).length()}}(),intersect:function(a){this.min.max(a.min);this.max.min(a.max);return this},union:function(a){this.min.min(a.min);this.max.max(a.max);return this},translate:function(a){this.min.add(a);this.max.add(a);return this},equals:function(a){return a.min.equals(this.min)&&a.max.equals(this.max)}};
V.Box3=function(a,b){this.min=void 0!==a?a:new V.Vector3(Infinity,Infinity,Infinity);this.max=void 0!==b?b:new V.Vector3(-Infinity,-Infinity,-Infinity)};
V.Box3.prototype={constructor:V.Box3,set:function(a,b){this.min.copy(a);this.max.copy(b);return this},setFromPoints:function(a){this.makeEmpty();for(var b=0,c=a.length;b<c;b++)this.expandByPoint(a[b]);return this},setFromCenterAndSize:function(){var a=new V.Vector3;return function(b,c){c=a.copy(c).multiplyScalar(.5);this.min.copy(b).sub(c);this.max.copy(b).add(c);return this}}(),setFromObject:function(){var a=new V.Vector3;return function(b){var c=this;b.updateMatrixWorld(!0);this.makeEmpty();b.traverse(function(b){var d=
b.geometry;if(void 0!==d)if(d instanceof V.Geometry)for(var g=d.vertices,d=0,h=g.length;d<h;d++)a.copy(g[d]),a.applyMatrix4(b.matrixWorld),c.expandByPoint(a);else if(d instanceof V.BufferGeometry&&void 0!==d.attributes.position)for(g=d.attributes.position.array,d=0,h=g.length;d<h;d+=3)a.fromArray(g,d),a.applyMatrix4(b.matrixWorld),c.expandByPoint(a)});return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.min.copy(a.min);this.max.copy(a.max);return this},makeEmpty:function(){this.min.x=
this.min.y=this.min.z=Infinity;this.max.x=this.max.y=this.max.z=-Infinity;return this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},center:function(a){return(a||new V.Vector3).addVectors(this.min,this.max).multiplyScalar(.5)},size:function(a){return(a||new V.Vector3).subVectors(this.max,this.min)},expandByPoint:function(a){this.min.min(a);this.max.max(a);return this},expandByVector:function(a){this.min.sub(a);this.max.add(a);return this},expandByScalar:function(a){this.min.addScalar(-a);
this.max.addScalar(a);return this},containsPoint:function(a){return a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y||a.z<this.min.z||a.z>this.max.z?!1:!0},containsBox:function(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y&&this.min.z<=a.min.z&&a.max.z<=this.max.z?!0:!1},getParameter:function(a,b){return(b||new V.Vector3).set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y),(a.z-this.min.z)/(this.max.z-this.min.z))},
intersectsBox:function(a){return a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y||a.max.z<this.min.z||a.min.z>this.max.z?!1:!0},intersectsSphere:function(){var a;return function(b){void 0===a&&(a=new V.Vector3);this.clampPoint(b.center,a);return a.distanceToSquared(b.center)<=b.radius*b.radius}}(),intersectsPlane:function(a){if(0<a.normal.x){var b=a.normal.x*this.min.x;var c=a.normal.x*this.max.x}else b=a.normal.x*this.max.x,c=a.normal.x*this.min.x;0<a.normal.y?(b+=
a.normal.y*this.min.y,c+=a.normal.y*this.max.y):(b+=a.normal.y*this.max.y,c+=a.normal.y*this.min.y);0<a.normal.z?(b+=a.normal.z*this.min.z,c+=a.normal.z*this.max.z):(b+=a.normal.z*this.max.z,c+=a.normal.z*this.min.z);return b<=a.constant&&c>=a.constant},clampPoint:function(a,b){return(b||new V.Vector3).copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new V.Vector3;return function(b){return a.copy(b).clamp(this.min,this.max).sub(b).length()}}(),getBoundingSphere:function(){var a=
new V.Vector3;return function(b){b=b||new V.Sphere;b.center=this.center();b.radius=.5*this.size(a).length();return b}}(),intersect:function(a){this.min.max(a.min);this.max.min(a.max);this.isEmpty()&&this.makeEmpty();return this},union:function(a){this.min.min(a.min);this.max.max(a.max);return this},applyMatrix4:function(){var a=[new V.Vector3,new V.Vector3,new V.Vector3,new V.Vector3,new V.Vector3,new V.Vector3,new V.Vector3,new V.Vector3];return function(b){if(this.isEmpty())return this;a[0].set(this.min.x,
this.min.y,this.min.z).applyMatrix4(b);a[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(b);a[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(b);a[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(b);a[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(b);a[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(b);a[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(b);a[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(b);this.setFromPoints(a);return this}}(),translate:function(a){this.min.add(a);
this.max.add(a);return this},equals:function(a){return a.min.equals(this.min)&&a.max.equals(this.max)}};function bb(a,b){for(var c=Infinity,d=Infinity,e=Infinity,g=-Infinity,h=-Infinity,k=-Infinity,l=0,m=b.length;l<m;l+=3){var p=b[l],r=b[l+1],n=b[l+2];p<c&&(c=p);r<d&&(d=r);n<e&&(e=n);p>g&&(g=p);r>h&&(h=r);n>k&&(k=n)}a.min.set(c,d,e);a.max.set(g,h,k)}V.Matrix3=function(){this.elements=new Float32Array([1,0,0,0,1,0,0,0,1]);0<arguments.length&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")};
V.Matrix3.prototype={constructor:V.Matrix3,set:function(a,b,c,d,e,g,h,k,l){var m=this.elements;m[0]=a;m[1]=d;m[2]=h;m[3]=b;m[4]=e;m[5]=k;m[6]=c;m[7]=g;m[8]=l;return this},identity:function(){this.set(1,0,0,0,1,0,0,0,1);return this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(a){a=a.elements;this.set(a[0],a[3],a[6],a[1],a[4],a[7],a[2],a[5],a[8]);return this},applyToVector3Array:function(){var a;return function(b,c,d){void 0===a&&(a=new V.Vector3);void 0===
c&&(c=0);void 0===d&&(d=b.length);for(var e=0;e<d;e+=3,c+=3)a.fromArray(b,c),Za(a,this),a.toArray(b,c);return b}}(),applyToBuffer:function(){var a;return function(b,c,d){void 0===a&&(a=new V.Vector3);void 0===c&&(c=0);void 0===d&&(d=b.length/b.itemSize);for(var e=0;e<d;e++,c++)a.x=b.getX(c),a.y=b.getY(c),a.z=b.getZ(c),Za(a,this),b.setXYZ(a.x,a.y,a.z);return b}}(),multiplyScalar:function(a){var b=this.elements;b[0]*=a;b[3]*=a;b[6]*=a;b[1]*=a;b[4]*=a;b[7]*=a;b[2]*=a;b[5]*=a;b[8]*=a;return this},determinant:function(){var a=
this.elements,b=a[0],c=a[1],d=a[2],e=a[3],g=a[4],h=a[5],k=a[6],l=a[7],a=a[8];return b*g*a-b*h*l-c*e*a+c*h*k+d*e*l-d*g*k},getInverse:function(a,b){a instanceof V.Matrix4&&console.error("THREE.Matrix3.getInverse no longer takes a Matrix4 argument.");var c=a.elements;a=this.elements;var d=c[0],e=c[1],g=c[2],h=c[3],k=c[4],l=c[5],m=c[6],p=c[7],c=c[8],r=c*k-l*p,n=l*m-c*h,t=p*h-k*m,q=d*r+e*n+g*t;if(0===q){if(b)throw Error("THREE.Matrix3.getInverse(): can't invert matrix, determinant is 0");console.warn("THREE.Matrix3.getInverse(): can't invert matrix, determinant is 0");
return this.identity()}b=1/q;a[0]=r*b;a[1]=(g*p-c*e)*b;a[2]=(l*e-g*k)*b;a[3]=n*b;a[4]=(c*d-g*m)*b;a[5]=(g*h-l*d)*b;a[6]=t*b;a[7]=(e*m-p*d)*b;a[8]=(k*d-e*h)*b;return this},transpose:function(){var a=this.elements;var b=a[1];a[1]=a[3];a[3]=b;b=a[2];a[2]=a[6];a[6]=b;b=a[5];a[5]=a[7];a[7]=b;return this},flattenToArrayOffset:function(a,b){console.warn("THREE.Matrix3: .flattenToArrayOffset is deprecated - just use .toArray instead.");return this.toArray(a,b)},transposeIntoArray:function(a){var b=this.elements;
a[0]=b[0];a[1]=b[3];a[2]=b[6];a[3]=b[1];a[4]=b[4];a[5]=b[7];a[6]=b[2];a[7]=b[5];a[8]=b[8];return this},fromArray:function(a){this.elements.set(a);return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);var c=this.elements;a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3];a[b+4]=c[4];a[b+5]=c[5];a[b+6]=c[6];a[b+7]=c[7];a[b+8]=c[8];return a}};function cb(a,b){b=b.elements;a.set(b[0],b[4],b[8],b[1],b[5],b[9],b[2],b[6],b[10]);return a.getInverse(a).transpose()}
V.Matrix4=function(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);0<arguments.length&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")};
V.Matrix4.prototype={constructor:V.Matrix4,set:function(a,b,c,d,e,g,h,k,l,m,p,r,n,t,q,u){var v=this.elements;v[0]=a;v[4]=b;v[8]=c;v[12]=d;v[1]=e;v[5]=g;v[9]=h;v[13]=k;v[2]=l;v[6]=m;v[10]=p;v[14]=r;v[3]=n;v[7]=t;v[11]=q;v[15]=u;return this},identity:function(){this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return this},clone:function(){return(new V.Matrix4).fromArray(this.elements)},copy:function(a){this.elements.set(a.elements);return this},extractBasis:function(a,b,c){Ra(a,this,0);Ra(b,this,1);Ra(c,this,
2);return this},makeBasis:function(a,b,c){this.set(a.x,b.x,c.x,0,a.y,b.y,c.y,0,a.z,b.z,c.z,0,0,0,0,1);return this},extractRotation:function(){var a;return function(b){void 0===a&&(a=new V.Vector3);var c=this.elements,d=b.elements,e=1/Ra(a,b,0).length(),g=1/Ra(a,b,1).length();b=1/Ra(a,b,2).length();c[0]=d[0]*e;c[1]=d[1]*e;c[2]=d[2]*e;c[4]=d[4]*g;c[5]=d[5]*g;c[6]=d[6]*g;c[8]=d[8]*b;c[9]=d[9]*b;c[10]=d[10]*b;return this}}(),makeRotationFromEuler:function(a){!1===a instanceof V.Euler&&console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");
var b=this.elements,c=a.x,d=a.y,e=a.z,g=Math.cos(c),c=Math.sin(c),h=Math.cos(d),d=Math.sin(d),k=Math.cos(e),e=Math.sin(e);if("XYZ"===a.order){var l=g*k;var m=g*e;var p=c*k;a=c*e;b[0]=h*k;b[4]=-h*e;b[8]=d;b[1]=m+p*d;b[5]=l-a*d;b[9]=-c*h;b[2]=a-l*d;b[6]=p+m*d;b[10]=g*h}else"YXZ"===a.order?(l=h*k,m=h*e,p=d*k,a=d*e,b[0]=l+a*c,b[4]=p*c-m,b[8]=g*d,b[1]=g*e,b[5]=g*k,b[9]=-c,b[2]=m*c-p,b[6]=a+l*c,b[10]=g*h):"ZXY"===a.order?(l=h*k,m=h*e,p=d*k,a=d*e,b[0]=l-a*c,b[4]=-g*e,b[8]=p+m*c,b[1]=m+p*c,b[5]=g*k,b[9]=
a-l*c,b[2]=-g*d,b[6]=c,b[10]=g*h):"ZYX"===a.order?(l=g*k,m=g*e,p=c*k,a=c*e,b[0]=h*k,b[4]=p*d-m,b[8]=l*d+a,b[1]=h*e,b[5]=a*d+l,b[9]=m*d-p,b[2]=-d,b[6]=c*h,b[10]=g*h):"YZX"===a.order?(l=g*h,m=g*d,p=c*h,a=c*d,b[0]=h*k,b[4]=a-l*e,b[8]=p*e+m,b[1]=e,b[5]=g*k,b[9]=-c*k,b[2]=-d*k,b[6]=m*e+p,b[10]=l-a*e):"XZY"===a.order&&(l=g*h,m=g*d,p=c*h,a=c*d,b[0]=h*k,b[4]=-e,b[8]=d*k,b[1]=l*e+a,b[5]=g*k,b[9]=m*e-p,b[2]=p*e-m,b[6]=c*k,b[10]=a*e+l);b[3]=0;b[7]=0;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return this},lookAt:function(){var a,
b,c;return function(d,e,g){void 0===a&&(a=new V.Vector3,b=new V.Vector3,c=new V.Vector3);var h=this.elements;c.subVectors(d,e).normalize();0===c.lengthSq()&&(c.z=1);Ga(a,g,c).normalize();0===a.lengthSq()&&(c.z+=1E-4,Ga(a,g,c).normalize());Ga(b,c,a);h[0]=a.x;h[4]=b.x;h[8]=c.x;h[1]=a.y;h[5]=b.y;h[9]=c.y;h[2]=a.z;h[6]=b.z;h[10]=c.z;return this}}(),multiply:function(a,b){return void 0!==b?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),
Pa(this,a,b)):Pa(this,this,a)},premultiply:function(a){return Pa(this,a,this)},multiplyToArray:function(a,b,c){var d=this.elements;Pa(this,a,b);c[0]=d[0];c[1]=d[1];c[2]=d[2];c[3]=d[3];c[4]=d[4];c[5]=d[5];c[6]=d[6];c[7]=d[7];c[8]=d[8];c[9]=d[9];c[10]=d[10];c[11]=d[11];c[12]=d[12];c[13]=d[13];c[14]=d[14];c[15]=d[15];return this},multiplyScalar:function(a){var b=this.elements;b[0]*=a;b[4]*=a;b[8]*=a;b[12]*=a;b[1]*=a;b[5]*=a;b[9]*=a;b[13]*=a;b[2]*=a;b[6]*=a;b[10]*=a;b[14]*=a;b[3]*=a;b[7]*=a;b[11]*=a;
b[15]*=a;return this},applyToVector3Array:function(){var a;return function(b,c,d){void 0===a&&(a=new V.Vector3);void 0===c&&(c=0);void 0===d&&(d=b.length);for(var e=0;e<d;e+=3,c+=3)a.fromArray(b,c),a.applyMatrix4(this),a.toArray(b,c);return b}}(),applyToBuffer:function(){var a;return function(b,c,d){void 0===a&&(a=new V.Vector3);void 0===c&&(c=0);void 0===d&&(d=b.length/b.itemSize);for(var e=0;e<d;e++,c++)a.x=b.getX(c),a.y=b.getY(c),a.z=b.getZ(c),a.applyMatrix4(this),b.setXYZ(a.x,a.y,a.z);return b}}(),
determinant:function(){var a=this.elements,b=a[0],c=a[4],d=a[8],e=a[12],g=a[1],h=a[5],k=a[9],l=a[13],m=a[2],p=a[6],r=a[10],n=a[14];return a[3]*(+e*k*p-d*l*p-e*h*r+c*l*r+d*h*n-c*k*n)+a[7]*(+b*k*n-b*l*r+e*g*r-d*g*n+d*l*m-e*k*m)+a[11]*(+b*l*p-b*h*n-e*g*p+c*g*n+e*h*m-c*l*m)+a[15]*(-d*h*m-b*k*p+b*h*r+d*g*p-c*g*r+c*k*m)},transpose:function(){var a=this.elements;var b=a[1];a[1]=a[4];a[4]=b;b=a[2];a[2]=a[8];a[8]=b;b=a[6];a[6]=a[9];a[9]=b;b=a[3];a[3]=a[12];a[12]=b;b=a[7];a[7]=a[13];a[13]=b;b=a[11];a[11]=a[14];
a[14]=b;return this},flattenToArrayOffset:function(a,b){console.warn("THREE.Matrix3: .flattenToArrayOffset is deprecated - just use .toArray instead.");return this.toArray(a,b)},getPosition:function(){var a;return function(){void 0===a&&(a=new V.Vector3);console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");return Ra(a,this,3)}}(),setPosition:function(a){var b=this.elements;b[12]=a.x;b[13]=a.y;b[14]=a.z;return this},getInverse:function(a,
b){var c=this.elements,d=a.elements;a=d[0];var e=d[1],g=d[2],h=d[3],k=d[4],l=d[5],m=d[6],p=d[7],r=d[8],n=d[9],t=d[10],q=d[11],u=d[12],v=d[13],y=d[14],d=d[15],z=n*y*p-v*t*p+v*m*q-l*y*q-n*m*d+l*t*d,A=u*t*p-r*y*p-u*m*q+k*y*q+r*m*d-k*t*d,x=r*v*p-u*n*p+u*l*q-k*v*q-r*l*d+k*n*d,E=u*n*m-r*v*m-u*l*t+k*v*t+r*l*y-k*n*y,C=a*z+e*A+g*x+h*E;if(0===C){if(b)throw Error("THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0");console.warn("THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0");
return this.identity()}b=1/C;c[0]=z*b;c[1]=(v*t*h-n*y*h-v*g*q+e*y*q+n*g*d-e*t*d)*b;c[2]=(l*y*h-v*m*h+v*g*p-e*y*p-l*g*d+e*m*d)*b;c[3]=(n*m*h-l*t*h-n*g*p+e*t*p+l*g*q-e*m*q)*b;c[4]=A*b;c[5]=(r*y*h-u*t*h+u*g*q-a*y*q-r*g*d+a*t*d)*b;c[6]=(u*m*h-k*y*h-u*g*p+a*y*p+k*g*d-a*m*d)*b;c[7]=(k*t*h-r*m*h+r*g*p-a*t*p-k*g*q+a*m*q)*b;c[8]=x*b;c[9]=(u*n*h-r*v*h-u*e*q+a*v*q+r*e*d-a*n*d)*b;c[10]=(k*v*h-u*l*h+u*e*p-a*v*p-k*e*d+a*l*d)*b;c[11]=(r*l*h-k*n*h-r*e*p+a*n*p+k*e*q-a*l*q)*b;c[12]=E*b;c[13]=(r*v*g-u*n*g+u*e*t-a*v*
t-r*e*y+a*n*y)*b;c[14]=(u*l*g-k*v*g-u*e*m+a*v*m+k*e*y-a*l*y)*b;c[15]=(k*n*g-r*l*g+r*e*m-a*n*m-k*e*t+a*l*t)*b;return this},scale:function(a){var b=this.elements,c=a.x,d=a.y;a=a.z;b[0]*=c;b[4]*=d;b[8]*=a;b[1]*=c;b[5]*=d;b[9]*=a;b[2]*=c;b[6]*=d;b[10]*=a;b[3]*=c;b[7]*=d;b[11]*=a;return this},decompose:function(){var a,b;return function(c,d,e){void 0===a&&(a=new V.Vector3,b=new V.Matrix4);var g=this.elements,h=a.set(g[0],g[1],g[2]).length(),k=a.set(g[4],g[5],g[6]).length(),l=a.set(g[8],g[9],g[10]).length();
0>this.determinant()&&(h=-h);c.x=g[12];c.y=g[13];c.z=g[14];b.elements.set(this.elements);c=1/h;var g=1/k,m=1/l;b.elements[0]*=c;b.elements[1]*=c;b.elements[2]*=c;b.elements[4]*=g;b.elements[5]*=g;b.elements[6]*=g;b.elements[8]*=m;b.elements[9]*=m;b.elements[10]*=m;d.setFromRotationMatrix(b);e.x=h;e.y=k;e.z=l;return this}}(),makePerspective:function(a,b,c,d){a=c*Math.tan(V.Math.DEG2RAD*a*.5);var e=-a;return jb(this,e*b,a*b,e,a,c,d)},equals:function(a){var b=this.elements;a=a.elements;for(var c=0;16>
c;c++)if(b[c]!==a[c])return!1;return!0},fromArray:function(a){this.elements.set(a);return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);var c=this.elements;a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3];a[b+4]=c[4];a[b+5]=c[5];a[b+6]=c[6];a[b+7]=c[7];a[b+8]=c[8];a[b+9]=c[9];a[b+10]=c[10];a[b+11]=c[11];a[b+12]=c[12];a[b+13]=c[13];a[b+14]=c[14];a[b+15]=c[15];return a}};
function jb(a,b,c,d,e,g,h){var k=a.elements;k[0]=2*g/(c-b);k[4]=0;k[8]=(c+b)/(c-b);k[12]=0;k[1]=0;k[5]=2*g/(e-d);k[9]=(e+d)/(e-d);k[13]=0;k[2]=0;k[6]=0;k[10]=-(h+g)/(h-g);k[14]=-2*h*g/(h-g);k[3]=0;k[7]=0;k[11]=-1;k[15]=0;return a}function kb(a,b,c){var d=Math.cos(c);c=Math.sin(c);var e=1-d,g=b.x,h=b.y;b=b.z;var k=e*g,l=e*h;a.set(k*g+d,k*h-c*b,k*b+c*h,0,k*h+c*b,l*h+d,l*b-c*g,0,k*b-c*h,l*b+c*g,e*b*b+d,0,0,0,0,1);return a}
function lb(a,b){var c=Math.cos(b);b=Math.sin(b);a.set(c,-b,0,0,b,c,0,0,0,0,1,0,0,0,0,1)}function mb(a,b){var c=Math.cos(b);b=Math.sin(b);a.set(c,0,b,0,0,1,0,0,-b,0,c,0,0,0,0,1)}function nb(a,b){var c=Math.cos(b);b=Math.sin(b);a.set(1,0,0,0,0,c,-b,0,0,b,c,0,0,0,0,1)}
function Pa(a,b,c){var d=b.elements,e=c.elements;c=a.elements;b=d[0];var g=d[4],h=d[8],k=d[12],l=d[1],m=d[5],p=d[9],r=d[13],n=d[2],t=d[6],q=d[10],u=d[14],v=d[3],y=d[7],z=d[11],d=d[15],A=e[0],x=e[4],E=e[8],C=e[12],D=e[1],F=e[5],H=e[9],B=e[13],L=e[2],K=e[6],R=e[10],Q=e[14],I=e[3],P=e[7],O=e[11],e=e[15];c[0]=b*A+g*D+h*L+k*I;c[4]=b*x+g*F+h*K+k*P;c[8]=b*E+g*H+h*R+k*O;c[12]=b*C+g*B+h*Q+k*e;c[1]=l*A+m*D+p*L+r*I;c[5]=l*x+m*F+p*K+r*P;c[9]=l*E+m*H+p*R+r*O;c[13]=l*C+m*B+p*Q+r*e;c[2]=n*A+t*D+q*L+u*I;c[6]=n*x+
t*F+q*K+u*P;c[10]=n*E+t*H+q*R+u*O;c[14]=n*C+t*B+q*Q+u*e;c[3]=v*A+y*D+z*L+d*I;c[7]=v*x+y*F+z*K+d*P;c[11]=v*E+y*H+z*R+d*O;c[15]=v*C+y*B+z*Q+d*e;return a}function $a(a,b){var c=a.elements,d=b.x,e=b.y,g=b.z,h=b.w,k=d+d,l=e+e,m=g+g;b=d*k;var p=d*l,d=d*m,r=e*l,e=e*m,g=g*m,k=h*k,l=h*l,h=h*m;c[0]=1-(r+g);c[4]=p-h;c[8]=d+l;c[1]=p+h;c[5]=1-(b+g);c[9]=e-k;c[2]=d-l;c[6]=e+k;c[10]=1-(b+r);c[3]=0;c[7]=0;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return a}
V.Ray=function(a,b){this.origin=void 0!==a?a:new V.Vector3;this.direction=void 0!==b?b:new V.Vector3};
V.Ray.prototype={constructor:V.Ray,set:function(a,b){this.origin.copy(a);this.direction.copy(b);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.origin.copy(a.origin);this.direction.copy(a.direction);return this},at:function(a,b){return(b||new V.Vector3).copy(this.direction).multiplyScalar(a).add(this.origin)},lookAt:function(a){this.direction.copy(a).sub(this.origin).normalize();return this},recast:function(){var a=new V.Vector3;return function(b){this.origin.copy(this.at(b,
a));return this}}(),closestPointToPoint:function(a,b){b=b||new V.Vector3;b.subVectors(a,this.origin);a=b.dot(this.direction);return 0>a?b.copy(this.origin):b.copy(this.direction).multiplyScalar(a).add(this.origin)},distanceToPoint:function(a){return Math.sqrt(this.distanceSqToPoint(a))},distanceSqToPoint:function(){var a=new V.Vector3;return function(b){var c=a.subVectors(b,this.origin).dot(this.direction);if(0>c)return this.origin.distanceToSquared(b);a.copy(this.direction).multiplyScalar(c).add(this.origin);
return a.distanceToSquared(b)}}(),distanceSqToSegment:function(){var a=new V.Vector3,b=new V.Vector3,c=new V.Vector3;return function(d,e,g,h){a.copy(d).add(e).multiplyScalar(.5);b.copy(e).sub(d).normalize();c.copy(this.origin).sub(a);var k=.5*d.distanceTo(e),l=-this.direction.dot(b),m=c.dot(this.direction),p=-c.dot(b),r=c.lengthSq(),n=Math.abs(1-l*l);if(0<n){d=l*p-m;e=l*m-p;var t=k*n;0<=d?e>=-t?e<=t?(k=1/n,d*=k,e*=k,l=d*(d+l*e+2*m)+e*(l*d+e+2*p)+r):(e=k,d=Math.max(0,-(l*e+m)),l=-d*d+e*(e+2*p)+r):
(e=-k,d=Math.max(0,-(l*e+m)),l=-d*d+e*(e+2*p)+r):e<=-t?(d=Math.max(0,-(-l*k+m)),e=0<d?-k:Math.min(Math.max(-k,-p),k),l=-d*d+e*(e+2*p)+r):e<=t?(d=0,e=Math.min(Math.max(-k,-p),k),l=e*(e+2*p)+r):(d=Math.max(0,-(l*k+m)),e=0<d?k:Math.min(Math.max(-k,-p),k),l=-d*d+e*(e+2*p)+r)}else e=0<l?-k:k,d=Math.max(0,-(l*e+m)),l=-d*d+e*(e+2*p)+r;g&&g.copy(this.direction).multiplyScalar(d).add(this.origin);h&&h.copy(b).multiplyScalar(e).add(a);return l}}(),intersectSphere:function(){var a=new V.Vector3;return function(b,
c){a.subVectors(b.center,this.origin);var d=a.dot(this.direction),e=a.dot(a)-d*d;b=b.radius*b.radius;if(e>b)return null;b=Math.sqrt(b-e);e=d-b;d+=b;return 0>e&&0>d?null:0>e?this.at(d,c):this.at(e,c)}}(),intersectsSphere:function(a){return this.distanceToPoint(a.center)<=a.radius},intersectPlane:function(a,b){var c=a.normal.dot(this.direction);0===c?a=0===a.distanceToPoint(this.origin)?0:null:(a=-(this.origin.dot(a.normal)+a.constant)/c,a=0<=a?a:null);return null===a?null:this.at(a,b)},intersectsPlane:function(a){var b=
a.distanceToPoint(this.origin);return 0===b||0>a.normal.dot(this.direction)*b?!0:!1},intersectsBox:function(){var a=new V.Vector3;return function(b){var c=1/this.direction.x;var d=1/this.direction.y;var e=1/this.direction.z,g=this.origin;if(0<=c){var h=(b.min.x-g.x)*c;c*=b.max.x-g.x}else h=(b.max.x-g.x)*c,c*=b.min.x-g.x;if(0<=d){var k=(b.min.y-g.y)*d;d*=b.max.y-g.y}else k=(b.max.y-g.y)*d,d*=b.min.y-g.y;if(h>d||k>c)h=null;else{if(k>h||h!==h)h=k;if(d<c||c!==c)c=d;0<=e?(k=(b.min.z-g.z)*e,b=(b.max.z-
g.z)*e):(k=(b.max.z-g.z)*e,b=(b.min.z-g.z)*e);if(h>b||k>c)h=null;else{if(k>h||h!==h)h=k;if(b<c||c!==c)c=b;h=0>c?null:this.at(0<=h?h:c,a)}}return null!==h}}(),intersectTriangle:function(){var a=new V.Vector3,b=new V.Vector3,c=new V.Vector3,d=new V.Vector3;return function(e,g,h,k,l){b.subVectors(g,e);c.subVectors(h,e);Ga(d,b,c);g=this.direction.dot(d);if(0<g){if(k)return null;k=1}else if(0>g)k=-1,g=-g;else return null;a.subVectors(this.origin,e);e=k*this.direction.dot(Ga(c,a,c));if(0>e)return null;
h=k*this.direction.dot(Sa(b,a));if(0>h||e+h>g)return null;e=-k*a.dot(d);return 0>e?null:this.at(e/g,l)}}(),applyMatrix4:function(a){this.direction.add(this.origin).applyMatrix4(a);this.origin.applyMatrix4(a);this.direction.sub(this.origin);this.direction.normalize();return this},equals:function(a){return a.origin.equals(this.origin)&&a.direction.equals(this.direction)}};V.Sphere=function(a,b){this.center=void 0!==a?a:new V.Vector3;this.radius=void 0!==b?b:0};
V.Sphere.prototype={constructor:V.Sphere,set:function(a,b){this.center.copy(a);this.radius=b;return this},setFromPoints:function(){var a=new V.Box3;return function(b,c){var d=this.center;void 0!==c?d.copy(c):a.setFromPoints(b).center(d);for(var e=c=0,g=b.length;e<g;e++)c=Math.max(c,d.distanceToSquared(b[e]));this.radius=Math.sqrt(c);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.center.copy(a.center);this.radius=a.radius;return this},empty:function(){return 0>=
this.radius},containsPoint:function(a){return a.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(a){return a.distanceTo(this.center)-this.radius},intersectsSphere:function(a){var b=this.radius+a.radius;return a.center.distanceToSquared(this.center)<=b*b},intersectsBox:function(a){return a.intersectsSphere(this)},intersectsPlane:function(a){return Math.abs(this.center.dot(a.normal)-a.constant)<=this.radius},clampPoint:function(a,b){var c=this.center.distanceToSquared(a);
b=b||new V.Vector3;b.copy(a);c>this.radius*this.radius&&(b.sub(this.center).normalize(),b.multiplyScalar(this.radius).add(this.center));return b},getBoundingBox:function(a){a=a||new V.Box3;a.set(this.center,this.center);a.expandByScalar(this.radius);return a},applyMatrix4:function(a){this.center.applyMatrix4(a);a=a.elements;this.radius*=Math.sqrt(Math.max(a[0]*a[0]+a[1]*a[1]+a[2]*a[2],a[4]*a[4]+a[5]*a[5]+a[6]*a[6],a[8]*a[8]+a[9]*a[9]+a[10]*a[10]));return this},translate:function(a){this.center.add(a);
return this},equals:function(a){return a.center.equals(this.center)&&a.radius===this.radius}};V.Frustum=function(a,b,c,d,e,g){this.planes=[void 0!==a?a:new V.Plane,void 0!==b?b:new V.Plane,void 0!==c?c:new V.Plane,void 0!==d?d:new V.Plane,void 0!==e?e:new V.Plane,void 0!==g?g:new V.Plane]};
V.Frustum.prototype={constructor:V.Frustum,set:function(a,b,c,d,e,g){var h=this.planes;h[0].copy(a);h[1].copy(b);h[2].copy(c);h[3].copy(d);h[4].copy(e);h[5].copy(g);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){for(var b=this.planes,c=0;6>c;c++)b[c].copy(a.planes[c]);return this},intersectsObject:function(){var a=new V.Sphere;return function(b){var c=b.geometry;null===c.boundingSphere&&c.computeBoundingSphere();a.copy(c.boundingSphere).applyMatrix4(b.matrixWorld);
return this.intersectsSphere(a)}}(),intersectsSprite:function(){var a=new V.Sphere;return function(b){a.center.set(0,0,0);a.radius=.7071067811865476;a.applyMatrix4(b.matrixWorld);return this.intersectsSphere(a)}}(),intersectsSphere:function(a){var b=this.planes,c=a.center;a=-a.radius;for(var d=0;6>d;d++)if(b[d].distanceToPoint(c)<a)return!1;return!0},intersectsBox:function(){var a=new V.Vector3,b=new V.Vector3;return function(c){for(var d=this.planes,e=0;6>e;e++){var g=d[e];a.x=0<g.normal.x?c.min.x:
c.max.x;b.x=0<g.normal.x?c.max.x:c.min.x;a.y=0<g.normal.y?c.min.y:c.max.y;b.y=0<g.normal.y?c.max.y:c.min.y;a.z=0<g.normal.z?c.min.z:c.max.z;b.z=0<g.normal.z?c.max.z:c.min.z;var h=g.distanceToPoint(a),g=g.distanceToPoint(b);if(0>h&&0>g)return!1}return!0}}(),containsPoint:function(a){for(var b=this.planes,c=0;6>c;c++)if(0>b[c].distanceToPoint(a))return!1;return!0}};
function ob(a,b){a=a.planes;var c=b.elements;b=c[0];var d=c[1],e=c[2],g=c[3],h=c[4],k=c[5],l=c[6],m=c[7],p=c[8],r=c[9],n=c[10],t=c[11],q=c[12],u=c[13],v=c[14],c=c[15];pb(a[0],g-b,m-h,t-p,c-q).normalize();pb(a[1],g+b,m+h,t+p,c+q).normalize();pb(a[2],g+d,m+k,t+r,c+u).normalize();pb(a[3],g-d,m-k,t-r,c-u).normalize();pb(a[4],g-e,m-l,t-n,c-v).normalize();pb(a[5],g+e,m+l,t+n,c+v).normalize()}V.Plane=function(a,b){this.normal=void 0!==a?a:new V.Vector3(1,0,0);this.constant=void 0!==b?b:0};
V.Plane.prototype={constructor:V.Plane,set:function(a,b){this.normal.copy(a);this.constant=b;return this},setFromCoplanarPoints:function(){var a=new V.Vector3,b=new V.Vector3;return function(c,d,e){d=Sa(a.subVectors(e,d),b.subVectors(c,d)).normalize();this.normal.copy(d);this.constant=-c.dot(this.normal);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.normal.copy(a.normal);this.constant=a.constant;return this},normalize:function(){var a=1/this.normal.length();
this.normal.multiplyScalar(a);this.constant*=a;return this},negate:function(){this.constant*=-1;this.normal.negate();return this},distanceToPoint:function(a){return this.normal.dot(a)+this.constant},distanceToSphere:function(a){return this.distanceToPoint(a.center)-a.radius},intersectLine:function(){var a=new V.Vector3;return function(b,c){c=c||new V.Vector3;var d=ab(b,a),e=this.normal.dot(d);if(0===e){if(0===this.distanceToPoint(b.start))return c.copy(b.start)}else if(e=-(b.start.dot(this.normal)+
this.constant)/e,!(0>e||1<e))return c.copy(d).multiplyScalar(e).add(b.start)}}(),intersectsBox:function(a){return a.intersectsPlane(this)},intersectsSphere:function(a){return a.intersectsPlane(this)},applyMatrix4:function(){var a=new V.Vector3,b=new V.Matrix3;return function(c,d){var e=(a||new V.Vector3).copy(this.normal).multiplyScalar(-this.constant).applyMatrix4(c);c=d||cb(b,c);c=Za(this.normal,c).normalize();this.constant=-e.dot(c);return this}}(),translate:function(a){this.constant-=a.dot(this.normal);
return this},equals:function(a){return a.normal.equals(this.normal)&&a.constant===this.constant}};function pb(a,b,c,d,e){a.normal.set(b,c,d);a.constant=e;return a}V.Spherical=function(a,b,c){this.radius=void 0!==a?a:1;this.phi=void 0!==b?b:0;this.theta=void 0!==c?c:0;return this};
V.Spherical.prototype={constructor:V.Spherical,set:function(a,b,c){this.radius=a;this.phi=b;this.theta=c;return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.radius.copy(a.radius);this.phi.copy(a.phi);this.theta.copy(a.theta);return this},setFromVector3:function(a){this.radius=a.length();0===this.radius?this.phi=this.theta=0:(this.theta=Math.atan2(a.x,a.z),this.phi=Math.acos(V.Math.clamp(a.y/this.radius,-1,1)));return this}};
V.Math={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),b=Array(36),c=0,d;return function(){for(var e=0;36>e;e++)8===e||13===e||18===e||23===e?b[e]="-":14===e?b[e]="4":(2>=c&&(c=33554432+16777216*Math.random()|0),d=c&15,c>>=4,b[e]=a[19===e?d&3|8:d]);return b.join("")}}(),clamp:function(a,b,c){return Math.max(b,Math.min(c,a))},euclideanModulo:function(a,b){return(a%b+b)%b},mapLinear:function(a,b,c,d,e){return d+
(a-b)*(e-d)/(c-b)},smoothstep:function(a,b,c){if(a<=b)return 0;if(a>=c)return 1;a=(a-b)/(c-b);return a*a*(3-2*a)},smootherstep:function(a,b,c){if(a<=b)return 0;if(a>=c)return 1;a=(a-b)/(c-b);return a*a*a*(a*(6*a-15)+10)},random16:function(){console.warn("THREE.Math.random16() has been deprecated. Use Math.random() instead.");return Math.random()},randInt:function(a,b){return a+Math.floor(Math.random()*(b-a+1))},randFloat:function(a,b){return a+Math.random()*(b-a)},randFloatSpread:function(a){return a*
(.5-Math.random())},degToRad:function(a){return a*V.Math.DEG2RAD},radToDeg:function(a){return a*V.Math.RAD2DEG},isPowerOfTwo:function(a){return 0===(a&a-1)&&0!==a},nearestPowerOfTwo:function(a){return Math.pow(2,Math.round(Math.log(a)/Math.LN2))},nextPowerOfTwo:function(a){a--;a|=a>>1;a|=a>>2;a|=a>>4;a|=a>>8;a|=a>>16;a++;return a}};
V.Spline=function(a){function b(a,b,c,d,e,g,h){a=.5*(c-a);d=.5*(d-b);return(2*(b-c)+a+d)*h+(-3*(b-c)-2*a-d)*g+a*e+b}this.points=a;var c=[],d={x:0,y:0,z:0},e,g,h,k,l,m,p,r,n;this.initFromArray=function(a){this.points=[];for(var b=0;b<a.length;b++)this.points[b]={x:a[b][0],y:a[b][1],z:a[b][2]}};this.getPoint=function(a){e=(this.points.length-1)*a;g=Math.floor(e);h=e-g;c[0]=0===g?g:g-1;c[1]=g;c[2]=g>this.points.length-2?this.points.length-1:g+1;c[3]=g>this.points.length-3?this.points.length-1:g+2;m=
this.points[c[0]];p=this.points[c[1]];r=this.points[c[2]];n=this.points[c[3]];k=h*h;l=h*k;d.x=b(m.x,p.x,r.x,n.x,h,k,l);d.y=b(m.y,p.y,r.y,n.y,h,k,l);d.z=b(m.z,p.z,r.z,n.z,h,k,l);return d};this.getControlPointsArray=function(){var a,b=this.points.length,c=[];for(a=0;a<b;a++){var d=this.points[a];c[a]=[d.x,d.y,d.z]}return c};this.getLength=function(a){var b=0,c=new V.Vector3,d=new V.Vector3,e=[],g=0;e[0]=0;a||(a=100);var h=this.points.length*a;c.copy(this.points[0]);for(a=1;a<h;a++){var k=a/h;var l=
this.getPoint(k);d.copy(l);g+=d.distanceTo(c);c.copy(l);k*=this.points.length-1;k=Math.floor(k);k!==b&&(e[k]=g,b=k)}e[e.length]=g;return{chunks:e,total:g}};this.reparametrizeByArcLength=function(a){var b,c=[],d=new V.Vector3,e=this.getLength();c.push(d.copy(this.points[0]).clone());for(b=1;b<this.points.length;b++){var g=e.chunks[b]-e.chunks[b-1];var h=Math.ceil(a*g/e.total);var k=(b-1)/(this.points.length-1);var l=b/(this.points.length-1);for(g=1;g<h-1;g++){var m=k+1/h*g*(l-k);m=this.getPoint(m);
c.push(d.copy(m).clone())}c.push(d.copy(this.points[b]).clone())}this.points=c}};V.Triangle=function(a,b,c){this.a=void 0!==a?a:new V.Vector3;this.b=void 0!==b?b:new V.Vector3;this.c=void 0!==c?c:new V.Vector3};V.Triangle.normal=function(){var a=new V.Vector3;return function(b,c,d,e){e=e||new V.Vector3;e.subVectors(d,c);a.subVectors(b,c);Sa(e,a);b=e.lengthSq();return 0<b?e.multiplyScalar(1/Math.sqrt(b)):e.set(0,0,0)}}();
V.Triangle.barycoordFromPoint=function(){var a=new V.Vector3,b=new V.Vector3,c=new V.Vector3;return function(d,e,g,h,k){a.subVectors(h,e);b.subVectors(g,e);c.subVectors(d,e);d=a.dot(a);e=a.dot(b);g=a.dot(c);var l=b.dot(b);h=b.dot(c);var m=d*l-e*e;k=k||new V.Vector3;if(0===m)return k.set(-2,-1,-1);m=1/m;l=(l*g-e*h)*m;d=(d*h-e*g)*m;return k.set(1-l-d,d,l)}}();
V.Triangle.containsPoint=function(){var a=new V.Vector3;return function(b,c,d,e){b=V.Triangle.barycoordFromPoint(b,c,d,e,a);return 0<=b.x&&0<=b.y&&1>=b.x+b.y}}();
V.Triangle.prototype={constructor:V.Triangle,set:function(a,b,c){this.a.copy(a);this.b.copy(b);this.c.copy(c);return this},setFromPointsAndIndices:function(a,b,c,d){this.a.copy(a[b]);this.b.copy(a[c]);this.c.copy(a[d]);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.a.copy(a.a);this.b.copy(a.b);this.c.copy(a.c);return this},area:function(){var a=new V.Vector3,b=new V.Vector3;return function(){a.subVectors(this.c,this.b);b.subVectors(this.a,this.b);return.5*
Sa(a,b).length()}}(),midpoint:function(a){return(a||new V.Vector3).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(a){return V.Triangle.normal(this.a,this.b,this.c,a)},plane:function(a){return(a||new V.Plane).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(a,b){return V.Triangle.barycoordFromPoint(a,this.a,this.b,this.c,b)},containsPoint:function(a){return V.Triangle.containsPoint(a,this.a,this.b,this.c)},closestPointToPoint:function(){var a,b,c,
d;return function(e,g){void 0===a&&(a=new V.Plane,b=[new V.Line3,new V.Line3,new V.Line3],c=new V.Vector3,d=new V.Vector3);g=g||new V.Vector3;var h=Infinity;a.setFromCoplanarPoints(this.a,this.b,this.c);var k=a,l=c,m=k.distanceToPoint(e);(l||new V.Vector3).copy(k.normal).multiplyScalar(m).sub(e).negate();if(!0===this.containsPoint(c))g.copy(c);else for(b[0].set(this.a,this.b),b[1].set(this.b,this.c),b[2].set(this.c,this.a),e=0;e<b.length;e++)b[e].closestPointToPoint(c,!0,d),k=c.distanceToSquared(d),
k<h&&(h=k,g.copy(d));return g}}(),equals:function(a){return a.a.equals(this.a)&&a.b.equals(this.b)&&a.c.equals(this.c)}};V.Interpolant=function(a,b,c,d){this.parameterPositions=a;this._cachedIndex=0;this.resultBuffer=void 0!==d?d:new b.constructor(c);this.sampleValues=b;this.valueSize=c};
V.Interpolant.prototype={constructor:V.Interpolant,evaluate:function(a){var b=this.parameterPositions,c=this._cachedIndex,d=b[c],e=b[c-1];a:{b:{c:{d:if(!(a<d)){for(var g=c+2;;){if(void 0===d){if(a<e)break d;this._cachedIndex=c=b.length;return this.afterEnd_(c-1,a,e)}if(c===g)break;e=d;d=b[++c];if(a<d)break b}d=b.length;break c}if(a>=e)break a;else{g=b[1];a<g&&(c=2,e=g);for(g=c-2;;){if(void 0===e)return this._cachedIndex=0,this.beforeStart_(0,a,d);if(c===g)break;d=e;e=b[--c-1];if(a>=e)break b}d=c;
c=0}}for(;c<d;)e=c+d>>>1,a<b[e]?d=e:c=e+1;d=b[c];e=b[c-1];if(void 0===e)return this._cachedIndex=0,this.beforeStart_(0,a,d);if(void 0===d)return this._cachedIndex=c=b.length,this.afterEnd_(c-1,e,a)}this._cachedIndex=c;this.intervalChanged_(c,e,d)}return this.interpolate_(c,e,a,d)},settings:null,DefaultSettings_:{},copySampleValue_:function(a){var b=this.resultBuffer,c=this.sampleValues,d=this.valueSize;a*=d;for(var e=0;e!==d;++e)b[e]=c[a+e];return b},interpolate_:function(){throw Error("call to abstract method");
},intervalChanged_:function(){}};Object.assign(V.Interpolant.prototype,{beforeStart_:V.Interpolant.prototype.copySampleValue_,afterEnd_:V.Interpolant.prototype.copySampleValue_});V.CubicInterpolant=function(a,b,c,d){V.Interpolant.call(this,a,b,c,d);this._offsetNext=this._weightNext=this._offsetPrev=this._weightPrev=-0};
V.CubicInterpolant.prototype=Object.assign(Object.create(V.Interpolant.prototype),{constructor:V.CubicInterpolant,DefaultSettings_:{endingStart:V.ZeroCurvatureEnding,endingEnd:V.ZeroCurvatureEnding},intervalChanged_:function(a,b,c){var d=this.parameterPositions,e=a-2,g=a+1,h=d[e],k=d[g];if(void 0===h)switch((this.settings||this.DefaultSettings_).endingStart){case V.ZeroSlopeEnding:e=a;h=2*b-c;break;case V.WrapAroundEnding:e=d.length-2;h=b+d[e]-d[e+1];break;default:e=a,h=c}if(void 0===k)switch((this.settings||
this.DefaultSettings_).endingEnd){case V.ZeroSlopeEnding:g=a;k=2*c-b;break;case V.WrapAroundEnding:g=1;k=c+d[1]-d[0];break;default:g=a-1,k=b}a=.5*(c-b);d=this.valueSize;this._weightPrev=a/(b-h);this._weightNext=a/(k-c);this._offsetPrev=e*d;this._offsetNext=g*d},interpolate_:function(a,b,c,d){var e=this.resultBuffer,g=this.sampleValues,h=this.valueSize;a*=h;var k=a-h,l=this._offsetPrev,m=this._offsetNext,p=this._weightPrev,r=this._weightNext,n=(c-b)/(d-b);c=n*n;d=c*n;b=-p*d+2*p*c-p*n;p=(1+p)*d+(-1.5-
2*p)*c+(-.5+p)*n+1;n=(-1-r)*d+(1.5+r)*c+.5*n;r=r*d-r*c;for(c=0;c!==h;++c)e[c]=b*g[l+c]+p*g[k+c]+n*g[a+c]+r*g[m+c];return e}});V.DiscreteInterpolant=function(a,b,c,d){V.Interpolant.call(this,a,b,c,d)};V.DiscreteInterpolant.prototype=Object.assign(Object.create(V.Interpolant.prototype),{constructor:V.DiscreteInterpolant,interpolate_:function(a){return this.copySampleValue_(a-1)}});V.LinearInterpolant=function(a,b,c,d){V.Interpolant.call(this,a,b,c,d)};
V.LinearInterpolant.prototype=Object.assign(Object.create(V.Interpolant.prototype),{constructor:V.LinearInterpolant,interpolate_:function(a,b,c,d){var e=this.resultBuffer,g=this.sampleValues,h=this.valueSize;a*=h;var k=a-h;b=(c-b)/(d-b);c=1-b;for(d=0;d!==h;++d)e[d]=g[k+d]*c+g[a+d]*b;return e}});V.QuaternionLinearInterpolant=function(a,b,c,d){V.Interpolant.call(this,a,b,c,d)};
V.QuaternionLinearInterpolant.prototype=Object.assign(Object.create(V.Interpolant.prototype),{constructor:V.QuaternionLinearInterpolant,interpolate_:function(a,b,c,d){var e=this.resultBuffer,g=this.sampleValues,h=this.valueSize;a*=h;b=(c-b)/(d-b);for(c=a+h;a!==c;a+=4)V.Quaternion.slerpFlat(e,0,g,a-h,g,a,b);return e}});V.Clock=function(a){this.autoStart=void 0!==a?a:!0;this.elapsedTime=this.oldTime=this.startTime=0;this.running=!1};
V.Clock.prototype={constructor:V.Clock,start:function(){this.oldTime=this.startTime=(performance||Date).now();this.running=!0},stop:function(){this.autoStart&&!this.running&&this.start();if(this.running){var a=(performance||Date).now();var b=(a-this.oldTime)/1E3;this.oldTime=a;this.elapsedTime+=b}this.running=!1}};V.EventDispatcher=function(){};
Object.assign(V.EventDispatcher.prototype,{addEventListener:function(a,b){void 0===this._listeners&&(this._listeners={});var c=this._listeners;void 0===c[a]&&(c[a]=[]);-1===c[a].indexOf(b)&&c[a].push(b)},hasEventListener:function(a,b){if(void 0===this._listeners)return!1;var c=this._listeners;return void 0!==c[a]&&-1!==c[a].indexOf(b)?!0:!1},removeEventListener:function(a,b){void 0!==this._listeners&&(a=this._listeners[a],void 0!==a&&(b=a.indexOf(b),-1!==b&&a.splice(b,1)))},dispatchEvent:function(a){if(void 0!==
this._listeners){var b=this._listeners[a.type];if(void 0!==b){a.target=this;var c=[],d,e=b.length;for(d=0;d<e;d++)c[d]=b[d];for(d=0;d<e;d++)c[d].call(this,a)}}}});V.Layers=function(){this.mask=1};V.Layers.prototype={constructor:V.Layers,set:function(a){this.mask=1<<a},enable:function(a){this.mask|=1<<a},toggle:function(a){this.mask^=1<<a},disable:function(a){this.mask&=~(1<<a)},test:function(a){return 0!==(this.mask&a.mask)}};
(function(a){function b(a,b){return a.distance-b.distance}function c(a,b,g,h){if(!1!==a.visible&&(a.raycast(b,g),!0===h)){a=a.children;h=0;for(var d=a.length;h<d;h++)c(a[h],b,g,!0)}}a.Raycaster=function(b,c,g,h){this.ray=new a.Ray(b,c);this.near=g||0;this.far=h||Infinity;this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}};Object.defineProperties(this.params,{PointCloud:{get:function(){console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points.");return this.Points}}})};
a.Raycaster.prototype={constructor:a.Raycaster,linePrecision:1,set:function(a,b){this.ray.set(a,b)},setFromCamera:function(b,c){c instanceof a.PerspectiveCamera?(W(this.ray.origin,c.matrixWorld),this.ray.direction.set(b.x,b.y,.5).unproject(c).sub(this.ray.origin).normalize()):c instanceof a.OrthographicCamera?(this.ray.origin.set(b.x,b.y,-1).unproject(c),Ya(this.ray.direction.set(0,0,-1),c.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(a,e){var d=
[];c(a,this,d,e);d.sort(b);return d},intersectObjects:function(a,e){var d=[];if(!1===Array.isArray(a))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),d;for(var h=0,k=a.length;h<k;h++)c(a[h],this,d,e);d.sort(b);return d}}})(V);
V.Object3D=function(){Object.defineProperty(this,"id",{value:V.Object3DIdCount++});this.uuid=V.Math.generateUUID();this.name="";this.type="Object3D";this.parent=null;this.children=[];this.up=V.Object3D.DefaultUp.clone();var a=new V.Vector3,b=new V.Euler,c=new V.Quaternion,d=new V.Vector3(1,1,1);b.onChange(function(){Na(c,b,!1)});c.onChange(function(){b.setFromQuaternion(c,void 0,!1)});Object.defineProperties(this,{position:{enumerable:!0,value:a},rotation:{enumerable:!0,value:b},quaternion:{enumerable:!0,
value:c},scale:{enumerable:!0,value:d},modelViewMatrix:{value:new V.Matrix4},normalMatrix:{value:new V.Matrix3}});this.matrix=new V.Matrix4;this.matrixWorld=new V.Matrix4;this.matrixAutoUpdate=V.Object3D.DefaultMatrixAutoUpdate;this.matrixWorldNeedsUpdate=!1;this.layers=new V.Layers;this.visible=!0;this.receiveShadow=this.castShadow=!1;this.frustumCulled=!0;this.renderOrder=0;this.userData={}};V.Object3D.DefaultUp=new V.Vector3(0,1,0);V.Object3D.DefaultMatrixAutoUpdate=!0;
Object.assign(V.Object3D.prototype,V.EventDispatcher.prototype,{applyMatrix:function(a){Pa(this.matrix,a,this.matrix);this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(a,b){Ia(this.quaternion,a,b)},setRotationFromEuler:function(a){Na(this.quaternion,a,!0)},setRotationFromMatrix:function(a){this.quaternion.setFromRotationMatrix(a)},setRotationFromQuaternion:function(a){this.quaternion.copy(a)},rotateOnAxis:function(){var a=new V.Quaternion;return function(b,
c){Ia(a,b,c);this.quaternion.multiply(a);return this}}(),rotateX:function(){var a=new V.Vector3(1,0,0);return function(b){return this.rotateOnAxis(a,b)}}(),rotateY:function(){var a=new V.Vector3(0,1,0);return function(b){return this.rotateOnAxis(a,b)}}(),rotateZ:function(){var a=new V.Vector3(0,0,1);return function(b){return this.rotateOnAxis(a,b)}}(),translateOnAxis:function(){var a=new V.Vector3;return function(b,c){Oa(a.copy(b),this.quaternion);this.position.add(a.multiplyScalar(c));return this}}(),
translateX:function(){var a=new V.Vector3(1,0,0);return function(b){return this.translateOnAxis(a,b)}}(),translateY:function(){var a=new V.Vector3(0,1,0);return function(b){return this.translateOnAxis(a,b)}}(),translateZ:function(){var a=new V.Vector3(0,0,1);return function(b){return this.translateOnAxis(a,b)}}(),localToWorld:function(a){return a.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var a=new V.Matrix4;return function(b){return b.applyMatrix4(a.getInverse(this.matrixWorld))}}(),
lookAt:function(){var a=new V.Matrix4;return function(b){a.lookAt(b,this.position,this.up);this.quaternion.setFromRotationMatrix(a)}}(),add:function(a){if(1<arguments.length){for(var b=0;b<arguments.length;b++)this.add(arguments[b]);return this}if(a===this)return console.error("THREE.Object3D.add: object can't be added as a child of itself.",a),this;a instanceof V.Object3D?(null!==a.parent&&a.parent.remove(a),a.parent=this,a.dispatchEvent({type:"added"}),this.children.push(a)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",
a);return this},remove:function(a){if(1<arguments.length)for(var b=0;b<arguments.length;b++)this.remove(arguments[b]);b=this.children.indexOf(a);-1!==b&&(a.parent=null,a.dispatchEvent({type:"removed"}),this.children.splice(b,1))},getObjectById:function(a){return this.getObjectByProperty("id",a)},getObjectByName:function(a){return this.getObjectByProperty("name",a)},getObjectByProperty:function(a,b){if(this[a]===b)return this;for(var c=0,d=this.children.length;c<d;c++){var e=this.children[c].getObjectByProperty(a,
b);if(void 0!==e)return e}},getWorldPosition:function(a){a=a||new V.Vector3;this.updateMatrixWorld(!0);return W(a,this.matrixWorld)},getWorldQuaternion:function(){var a=new V.Vector3,b=new V.Vector3;return function(c){c=c||new V.Quaternion;this.updateMatrixWorld(!0);this.matrixWorld.decompose(a,c,b);return c}}(),getWorldRotation:function(){var a=new V.Quaternion;return function(b){b=b||new V.Euler;this.getWorldQuaternion(a);return b.setFromQuaternion(a,this.rotation.order,!1)}}(),getWorldScale:function(){var a=
new V.Vector3,b=new V.Quaternion;return function(c){c=c||new V.Vector3;this.updateMatrixWorld(!0);this.matrixWorld.decompose(a,b,c);return c}}(),getWorldDirection:function(){var a=new V.Quaternion;return function(b){b=b||new V.Vector3;this.getWorldQuaternion(a);return Oa(b.set(0,0,1),a)}}(),raycast:function(){},traverse:function(a){a(this);for(var b=this.children,c=0,d=b.length;c<d;c++)b[c].traverse(a)},traverseVisible:function(a){if(!1!==this.visible){a(this);for(var b=this.children,c=0,d=b.length;c<
d;c++)b[c].traverseVisible(a)}},traverseAncestors:function(a){var b=this.parent;null!==b&&(a(b),b.traverseAncestors(a))},updateMatrix:function(){var a=this.matrix,b=this.position,c=this.scale;$a(a,this.quaternion);a.scale(c);a.setPosition(b);this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(a){!0===this.matrixAutoUpdate&&this.updateMatrix();if(!0===this.matrixWorldNeedsUpdate||!0===a)null===this.parent?this.matrixWorld.copy(this.matrix):Pa(this.matrixWorld,this.parent.matrixWorld,this.matrix),
this.matrixWorldNeedsUpdate=!1,a=!0;for(var b=0,c=this.children.length;b<c;b++)this.children[b].updateMatrixWorld(a)},toJSON:function(a){function b(a){var b=[],c;for(c in a){var d=a[c];delete d.metadata;b.push(d)}return b}var c=void 0===a||""===a,d={};c&&(a={geometries:{},materials:{},textures:{},images:{}},d.metadata={version:4.4,type:"Object",generator:"Object3D.toJSON"});var e={};e.uuid=this.uuid;e.type=this.type;""!==this.name&&(e.name=this.name);"{}"!==JSON.stringify(this.userData)&&(e.userData=
this.userData);!0===this.castShadow&&(e.castShadow=!0);!0===this.receiveShadow&&(e.receiveShadow=!0);!1===this.visible&&(e.visible=!1);e.matrix=this.matrix.toArray();void 0!==this.geometry&&(void 0===a.geometries[this.geometry.uuid]&&(a.geometries[this.geometry.uuid]=this.geometry.toJSON(a)),e.geometry=this.geometry.uuid);void 0!==this.material&&(void 0===a.materials[this.material.uuid]&&(a.materials[this.material.uuid]=this.material.toJSON(a)),e.material=this.material.uuid);if(0<this.children.length){e.children=
[];for(var g=0;g<this.children.length;g++)e.children.push(this.children[g].toJSON(a).object)}if(c){var c=b(a.geometries),g=b(a.materials),h=b(a.textures);a=b(a.images);0<c.length&&(d.geometries=c);0<g.length&&(d.materials=g);0<h.length&&(d.textures=h);0<a.length&&(d.images=a)}d.object=e;return d},clone:function(a){return(new this.constructor).copy(this,a)},copy:function(a,b){void 0===b&&(b=!0);this.name=a.name;this.up.copy(a.up);this.position.copy(a.position);this.quaternion.copy(a.quaternion);this.scale.copy(a.scale);
this.matrix.copy(a.matrix);this.matrixWorld.copy(a.matrixWorld);this.matrixAutoUpdate=a.matrixAutoUpdate;this.matrixWorldNeedsUpdate=a.matrixWorldNeedsUpdate;this.visible=a.visible;this.castShadow=a.castShadow;this.receiveShadow=a.receiveShadow;this.frustumCulled=a.frustumCulled;this.renderOrder=a.renderOrder;this.userData=JSON.parse(JSON.stringify(a.userData));if(!0===b)for(b=0;b<a.children.length;b++)this.add(a.children[b].clone());return this}});V.Object3DIdCount=0;
V.Face3=function(a,b,c,d,e,g){this.a=a;this.b=b;this.c=c;this.normal=d instanceof V.Vector3?d:new V.Vector3;this.vertexNormals=Array.isArray(d)?d:[];this.color=e instanceof V.Color?e:new V.Color;this.vertexColors=Array.isArray(e)?e:[];this.materialIndex=void 0!==g?g:0};
V.Face3.prototype={constructor:V.Face3,clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.a=a.a;this.b=a.b;this.c=a.c;this.normal.copy(a.normal);this.color.copy(a.color);this.materialIndex=a.materialIndex;for(var b=0,c=a.vertexNormals.length;b<c;b++)this.vertexNormals[b]=a.vertexNormals[b].clone();b=0;for(c=a.vertexColors.length;b<c;b++)this.vertexColors[b]=a.vertexColors[b].clone();return this}};
V.BufferAttribute=function(a,b,c){this.uuid=V.Math.generateUUID();this.array=a;this.itemSize=b;this.dynamic=!1;this.updateRange={offset:0,count:-1};this.version=0;this.normalized=!0===c};
V.BufferAttribute.prototype={constructor:V.BufferAttribute,get count(){return this.array.length/this.itemSize},set needsUpdate(a){!0===a&&this.version++},setDynamic:function(a){this.dynamic=a;return this},copy:function(a){this.array=new a.array.constructor(a.array);this.itemSize=a.itemSize;this.dynamic=a.dynamic;return this},copyAt:function(a,b,c){a*=this.itemSize;c*=b.itemSize;for(var d=0,e=this.itemSize;d<e;d++)this.array[a+d]=b.array[c+d];return this},set:function(a,b){void 0===b&&(b=0);this.array.set(a,
b);return this},getX:function(a){return this.array[a*this.itemSize]},setX:function(a,b){this.array[a*this.itemSize]=b;return this},getY:function(a){return this.array[a*this.itemSize+1]},setY:function(a,b){this.array[a*this.itemSize+1]=b;return this},getZ:function(a){return this.array[a*this.itemSize+2]},setZ:function(a,b){this.array[a*this.itemSize+2]=b;return this},getW:function(a){return this.array[a*this.itemSize+3]},setW:function(a,b){this.array[a*this.itemSize+3]=b;return this},setXY:function(a,
b,c){a*=this.itemSize;this.array[a+0]=b;this.array[a+1]=c;return this},setXYZ:function(a,b,c,d){a*=this.itemSize;this.array[a+0]=b;this.array[a+1]=c;this.array[a+2]=d;return this},setXYZW:function(a,b,c,d,e){a*=this.itemSize;this.array[a+0]=b;this.array[a+1]=c;this.array[a+2]=d;this.array[a+3]=e;return this},clone:function(){return(new this.constructor).copy(this)}};
function qb(a,b){for(var c=a.array,d=0,e=0,g=b.length;e<g;e++){var h=b[e];void 0===h&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",e),h=new V.Vector4);c[d++]=h.x;c[d++]=h.y;c[d++]=h.z;c[d++]=h.w}return a}function rb(a,b){for(var c=a.array,d=0,e=0,g=b.length;e<g;e++){var h=b[e];void 0===h&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",e),h=new V.Vector3);c[d++]=h.x;c[d++]=h.y;c[d++]=h.z}return a}
function sb(a,b){for(var c=a.array,d=0,e=0,g=b.length;e<g;e++){var h=b[e];void 0===h&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",e),h=new V.Vector2);c[d++]=h.x;c[d++]=h.y}return a}function tb(a,b){for(var c=a.array,d=0,e=0,g=b.length;e<g;e++){var h=b[e];c[d++]=h.a;c[d++]=h.b;c[d++]=h.c}return a}
function ub(a,b){for(var c=a.array,d=0,e=0,g=b.length;e<g;e++){var h=b[e];void 0===h&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",e),h=new V.Color);c[d++]=h.r;c[d++]=h.g;c[d++]=h.b}return a}function vb(a,b){a.array.set(b);return a}V.Int8Attribute=function(a,b){return new V.BufferAttribute(new Int8Array(a),b)};V.Uint8Attribute=function(a,b){return new V.BufferAttribute(new Uint8Array(a),b)};
V.Uint8ClampedAttribute=function(a,b){return new V.BufferAttribute(new Uint8ClampedArray(a),b)};V.Int16Attribute=function(a,b){return new V.BufferAttribute(new Int16Array(a),b)};V.Uint16Attribute=function(a,b){return new V.BufferAttribute(new Uint16Array(a),b)};V.Int32Attribute=function(a,b){return new V.BufferAttribute(new Int32Array(a),b)};V.Uint32Attribute=function(a,b){return new V.BufferAttribute(new Uint32Array(a),b)};
V.Float32Attribute=function(a,b){return new V.BufferAttribute(new Float32Array(a),b)};V.Float64Attribute=function(a,b){return new V.BufferAttribute(new Float64Array(a),b)};V.DynamicBufferAttribute=function(a,b){console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead.");return(new V.BufferAttribute(a,b)).setDynamic(!0)};V.InstancedBufferAttribute=function(a,b,c){V.BufferAttribute.call(this,a,b);this.meshPerAttribute=c||1};
V.InstancedBufferAttribute.prototype=Object.create(V.BufferAttribute.prototype);V.InstancedBufferAttribute.prototype.constructor=V.InstancedBufferAttribute;V.InstancedBufferAttribute.prototype.copy=function(a){V.BufferAttribute.prototype.copy.call(this,a);this.meshPerAttribute=a.meshPerAttribute;return this};V.InterleavedBuffer=function(a,b){this.uuid=V.Math.generateUUID();this.array=a;this.stride=b;this.dynamic=!1;this.updateRange={offset:0,count:-1};this.version=0};
V.InterleavedBuffer.prototype={constructor:V.InterleavedBuffer,get length(){return this.array.length},get count(){return this.array.length/this.stride},set needsUpdate(a){!0===a&&this.version++},setDynamic:function(a){this.dynamic=a;return this},copy:function(a){this.array=new a.array.constructor(a.array);this.stride=a.stride;this.dynamic=a.dynamic;return this},copyAt:function(a,b,c){a*=this.stride;c*=b.stride;for(var d=0,e=this.stride;d<e;d++)this.array[a+d]=b.array[c+d];return this},set:function(a,
b){void 0===b&&(b=0);this.array.set(a,b);return this},clone:function(){return(new this.constructor).copy(this)}};V.InstancedInterleavedBuffer=function(a,b,c){V.InterleavedBuffer.call(this,a,b);this.meshPerAttribute=c||1};V.InstancedInterleavedBuffer.prototype=Object.create(V.InterleavedBuffer.prototype);V.InstancedInterleavedBuffer.prototype.constructor=V.InstancedInterleavedBuffer;
V.InstancedInterleavedBuffer.prototype.copy=function(a){V.InterleavedBuffer.prototype.copy.call(this,a);this.meshPerAttribute=a.meshPerAttribute;return this};V.InterleavedBufferAttribute=function(a,b,c){this.uuid=V.Math.generateUUID();this.data=a;this.itemSize=b;this.offset=c};
V.InterleavedBufferAttribute.prototype={constructor:V.InterleavedBufferAttribute,get length(){console.warn("THREE.BufferAttribute: .length has been deprecated. Please use .count.");return this.array.length},get count(){return this.data.count},setX:function(a,b){this.data.array[a*this.data.stride+this.offset]=b;return this},setY:function(a,b){this.data.array[a*this.data.stride+this.offset+1]=b;return this},setZ:function(a,b){this.data.array[a*this.data.stride+this.offset+2]=b;return this},setW:function(a,
b){this.data.array[a*this.data.stride+this.offset+3]=b;return this},getX:function(a){return this.data.array[a*this.data.stride+this.offset]},getY:function(a){return this.data.array[a*this.data.stride+this.offset+1]},getZ:function(a){return this.data.array[a*this.data.stride+this.offset+2]},getW:function(a){return this.data.array[a*this.data.stride+this.offset+3]},setXY:function(a,b,c){a=a*this.data.stride+this.offset;this.data.array[a+0]=b;this.data.array[a+1]=c;return this},setXYZ:function(a,b,c,
d){a=a*this.data.stride+this.offset;this.data.array[a+0]=b;this.data.array[a+1]=c;this.data.array[a+2]=d;return this},setXYZW:function(a,b,c,d,e){a=a*this.data.stride+this.offset;this.data.array[a+0]=b;this.data.array[a+1]=c;this.data.array[a+2]=d;this.data.array[a+3]=e;return this}};
V.Geometry=function(){Object.defineProperty(this,"id",{value:V.GeometryIdCount++});this.uuid=V.Math.generateUUID();this.name="";this.type="Geometry";this.vertices=[];this.colors=[];this.faces=[];this.faceVertexUvs=[[]];this.morphTargets=[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingSphere=this.boundingBox=null;this.groupsNeedUpdate=this.lineDistancesNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.uvsNeedUpdate=this.elementsNeedUpdate=
this.verticesNeedUpdate=!1};
Object.assign(V.Geometry.prototype,V.EventDispatcher.prototype,{applyMatrix:function(a){for(var b=cb(new V.Matrix3,a),c=0,d=this.vertices.length;c<d;c++)this.vertices[c].applyMatrix4(a);c=0;for(d=this.faces.length;c<d;c++){a=this.faces[c];Za(a.normal,b).normalize();for(var e=0,g=a.vertexNormals.length;e<g;e++)Za(a.vertexNormals[e],b).normalize()}null!==this.boundingBox&&this.computeBoundingBox();null!==this.boundingSphere&&this.computeBoundingSphere();this.normalsNeedUpdate=this.verticesNeedUpdate=
!0;return this},rotateX:function(){var a;return function(b){void 0===a&&(a=new V.Matrix4);nb(a,b);this.applyMatrix(a);return this}}(),rotateY:function(){var a;return function(b){void 0===a&&(a=new V.Matrix4);mb(a,b);this.applyMatrix(a);return this}}(),rotateZ:function(){var a;return function(b){void 0===a&&(a=new V.Matrix4);lb(a,b);this.applyMatrix(a);return this}}(),translate:function(){var a;return function(b,c,d){void 0===a&&(a=new V.Matrix4);a.set(1,0,0,b,0,1,0,c,0,0,1,d,0,0,0,1);this.applyMatrix(a);
return this}}(),scale:function(){var a;return function(b,c,d){void 0===a&&(a=new V.Matrix4);a.set(b,0,0,0,0,c,0,0,0,0,d,0,0,0,0,1);this.applyMatrix(a);return this}}(),lookAt:function(){var a;return function(b){void 0===a&&(a=new V.Object3D);a.lookAt(b);a.updateMatrix();this.applyMatrix(a.matrix)}}(),fromBufferGeometry:function(a){function b(a,b,d,e){var g=void 0!==h?[p[a].clone(),p[b].clone(),p[d].clone()]:[],q=void 0!==k?[c.colors[a].clone(),c.colors[b].clone(),c.colors[d].clone()]:[];e=new V.Face3(a,
b,d,g,q,e);c.faces.push(e);void 0!==l&&c.faceVertexUvs[0].push([r[a].clone(),r[b].clone(),r[d].clone()]);void 0!==m&&c.faceVertexUvs[1].push([n[a].clone(),n[b].clone(),n[d].clone()])}var c=this,d=null!==a.index?a.index.array:void 0,e=a.attributes,g=e.position.array,h=void 0!==e.normal?e.normal.array:void 0,k=void 0!==e.color?e.color.array:void 0,l=void 0!==e.uv?e.uv.array:void 0,m=void 0!==e.uv2?e.uv2.array:void 0;void 0!==m&&(this.faceVertexUvs[1]=[]);for(var p=[],r=[],n=[],t=e=0;e<g.length;e+=3,
t+=2)c.vertices.push(new V.Vector3(g[e],g[e+1],g[e+2])),void 0!==h&&p.push(new V.Vector3(h[e],h[e+1],h[e+2])),void 0!==k&&c.colors.push(new V.Color(k[e],k[e+1],k[e+2])),void 0!==l&&r.push(new V.Vector2(l[t],l[t+1])),void 0!==m&&n.push(new V.Vector2(m[t],m[t+1]));if(void 0!==d)if(g=a.groups,0<g.length)for(e=0;e<g.length;e++)for(var q=g[e],u=q.start,v=q.count,t=u,u=u+v;t<u;t+=3)b(d[t],d[t+1],d[t+2],q.materialIndex);else for(e=0;e<d.length;e+=3)b(d[e],d[e+1],d[e+2]);else for(e=0;e<g.length/3;e+=3)b(e,
e+1,e+2);this.computeFaceNormals();null!==a.boundingBox&&(this.boundingBox=a.boundingBox.clone());null!==a.boundingSphere&&(this.boundingSphere=a.boundingSphere.clone());return this},center:function(){this.computeBoundingBox();var a=this.boundingBox.center().negate();this.translate(a.x,a.y,a.z);return a},normalize:function(){this.computeBoundingSphere();var a=this.boundingSphere.center,b=this.boundingSphere.radius,b=0===b?1:1/b,c=new V.Matrix4;c.set(b,0,0,-b*a.x,0,b,0,-b*a.y,0,0,b,-b*a.z,0,0,0,1);
this.applyMatrix(c);return this},computeFaceNormals:function(){for(var a=new V.Vector3,b=new V.Vector3,c=0,d=this.faces.length;c<d;c++){var e=this.faces[c],g=this.vertices[e.a],h=this.vertices[e.b];a.subVectors(this.vertices[e.c],h);b.subVectors(g,h);Sa(a,b);a.normalize();e.normal.copy(a)}},computeVertexNormals:function(a){void 0===a&&(a=!0);var b;var c=Array(this.vertices.length);var d=0;for(b=this.vertices.length;d<b;d++)c[d]=new V.Vector3;if(a){var e=new V.Vector3,g=new V.Vector3;a=0;for(d=this.faces.length;a<
d;a++){b=this.faces[a];var h=this.vertices[b.a];var k=this.vertices[b.b];var l=this.vertices[b.c];e.subVectors(l,k);g.subVectors(h,k);Sa(e,g);c[b.a].add(e);c[b.b].add(e);c[b.c].add(e)}}else for(a=0,d=this.faces.length;a<d;a++)b=this.faces[a],c[b.a].add(b.normal),c[b.b].add(b.normal),c[b.c].add(b.normal);d=0;for(b=this.vertices.length;d<b;d++)c[d].normalize();a=0;for(d=this.faces.length;a<d;a++)b=this.faces[a],h=b.vertexNormals,3===h.length?(h[0].copy(c[b.a]),h[1].copy(c[b.b]),h[2].copy(c[b.c])):(h[0]=
c[b.a].clone(),h[1]=c[b.b].clone(),h[2]=c[b.c].clone());0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var a,b;var c=0;for(b=this.faces.length;c<b;c++){var d=this.faces[c];d.__originalFaceNormal?d.__originalFaceNormal.copy(d.normal):d.__originalFaceNormal=d.normal.clone();d.__originalVertexNormals||(d.__originalVertexNormals=[]);var e=0;for(a=d.vertexNormals.length;e<a;e++)d.__originalVertexNormals[e]?d.__originalVertexNormals[e].copy(d.vertexNormals[e]):d.__originalVertexNormals[e]=
d.vertexNormals[e].clone()}var g=new V.Geometry;g.faces=this.faces;e=0;for(a=this.morphTargets.length;e<a;e++){if(!this.morphNormals[e]){this.morphNormals[e]={};this.morphNormals[e].faceNormals=[];this.morphNormals[e].vertexNormals=[];d=this.morphNormals[e].faceNormals;var h=this.morphNormals[e].vertexNormals;c=0;for(b=this.faces.length;c<b;c++){var k=new V.Vector3;var l={a:new V.Vector3,b:new V.Vector3,c:new V.Vector3};d.push(k);h.push(l)}}h=this.morphNormals[e];g.vertices=this.morphTargets[e].vertices;
g.computeFaceNormals();g.computeVertexNormals();c=0;for(b=this.faces.length;c<b;c++)d=this.faces[c],k=h.faceNormals[c],l=h.vertexNormals[c],k.copy(d.normal),l.a.copy(d.vertexNormals[0]),l.b.copy(d.vertexNormals[1]),l.c.copy(d.vertexNormals[2])}c=0;for(b=this.faces.length;c<b;c++)d=this.faces[c],d.normal=d.__originalFaceNormal,d.vertexNormals=d.__originalVertexNormals},computeTangents:function(){console.warn("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){for(var a=
0,b=this.vertices,c=0,d=b.length;c<d;c++)0<c&&(a+=b[c].distanceTo(b[c-1])),this.lineDistances[c]=a},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new V.Box3);this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new V.Sphere);this.boundingSphere.setFromPoints(this.vertices)},merge:function(a,b,c){if(!1===a instanceof V.Geometry)console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",
a);else{var d,e=this.vertices.length,g=this.vertices,h=a.vertices,k=this.faces,l=a.faces,m=this.faceVertexUvs[0];a=a.faceVertexUvs[0];void 0===c&&(c=0);void 0!==b&&(d=cb(new V.Matrix3,b));for(var p=0,r=h.length;p<r;p++){var n=h[p].clone();void 0!==b&&n.applyMatrix4(b);g.push(n)}p=0;for(r=l.length;p<r;p++){var h=l[p],t=h.vertexNormals,q=h.vertexColors,n=new V.Face3(h.a+e,h.b+e,h.c+e);n.normal.copy(h.normal);void 0!==d&&Za(n.normal,d).normalize();b=0;for(g=t.length;b<g;b++){var u=t[b].clone();void 0!==
d&&Za(u,d).normalize();n.vertexNormals.push(u)}n.color.copy(h.color);b=0;for(g=q.length;b<g;b++)u=q[b],n.vertexColors.push(u.clone());n.materialIndex=h.materialIndex+c;k.push(n)}p=0;for(r=a.length;p<r;p++)if(c=a[p],d=[],void 0!==c){b=0;for(g=c.length;b<g;b++)d.push(c[b].clone());m.push(d)}}},mergeMesh:function(a){!1===a instanceof V.Mesh?console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",a):(a.matrixAutoUpdate&&a.updateMatrix(),this.merge(a.geometry,a.matrix))},mergeVertices:function(){var a=
{},b=[],c=[],d=Math.pow(10,4),e;var g=0;for(e=this.vertices.length;g<e;g++){var h=this.vertices[g];h=Math.round(h.x*d)+"_"+Math.round(h.y*d)+"_"+Math.round(h.z*d);void 0===a[h]?(a[h]=g,b.push(this.vertices[g]),c[g]=b.length-1):c[g]=c[a[h]]}a=[];g=0;for(e=this.faces.length;g<e;g++)for(d=this.faces[g],d.a=c[d.a],d.b=c[d.b],d.c=c[d.c],d=[d.a,d.b,d.c],h=0;3>h;h++)if(d[h]===d[(h+1)%3]){a.push(g);break}for(g=a.length-1;0<=g;g--)for(d=a[g],this.faces.splice(d,1),c=0,e=this.faceVertexUvs.length;c<e;c++)this.faceVertexUvs[c].splice(d,
1);g=this.vertices.length-b.length;this.vertices=b;return g},sortFacesByMaterialIndex:function(){for(var a=this.faces,b=a.length,c=0;c<b;c++)a[c]._id=c;a.sort(function(a,b){return a.materialIndex-b.materialIndex});var d=this.faceVertexUvs[0],e=this.faceVertexUvs[1],g,h;d&&d.length===b&&(g=[]);e&&e.length===b&&(h=[]);for(c=0;c<b;c++){var k=a[c]._id;g&&g.push(d[k]);h&&h.push(e[k])}g&&(this.faceVertexUvs[0]=g);h&&(this.faceVertexUvs[1]=h)},toJSON:function(){function a(a,b,c){return c?a|1<<b:a&~(1<<b)}
function b(a){var b=a.x.toString()+a.y.toString()+a.z.toString();if(void 0!==m[b])return m[b];m[b]=l.length/3;l.push(a.x,a.y,a.z);return m[b]}function c(a){var b=a.r.toString()+a.g.toString()+a.b.toString();if(void 0!==r[b])return r[b];r[b]=p.length;p.push(Fa(a));return r[b]}function d(a){var b=a.x.toString()+a.y.toString();if(void 0!==t[b])return t[b];t[b]=n.length/2;n.push(a.x,a.y);return t[b]}var e={metadata:{version:4.4,type:"Geometry",generator:"Geometry.toJSON"}};e.uuid=this.uuid;e.type=this.type;
""!==this.name&&(e.name=this.name);if(void 0!==this.parameters){var g=this.parameters,h;for(h in g)void 0!==g[h]&&(e[h]=g[h]);return e}g=[];for(h=0;h<this.vertices.length;h++){var k=this.vertices[h];g.push(k.x,k.y,k.z)}var k=[],l=[],m={},p=[],r={},n=[],t={};for(h=0;h<this.faces.length;h++){var q=this.faces[h],u=void 0!==this.faceVertexUvs[0][h],v=0<q.normal.length(),y=0<q.vertexNormals.length,z=1!==q.color.r||1!==q.color.g||1!==q.color.b,A=0<q.vertexColors.length,x=0,x=a(x,0,0),x=a(x,1,!0),x=a(x,
2,!1),x=a(x,3,u),x=a(x,4,v),x=a(x,5,y),x=a(x,6,z),x=a(x,7,A);k.push(x);k.push(q.a,q.b,q.c);k.push(q.materialIndex);u&&(u=this.faceVertexUvs[0][h],k.push(d(u[0]),d(u[1]),d(u[2])));v&&k.push(b(q.normal));y&&(v=q.vertexNormals,k.push(b(v[0]),b(v[1]),b(v[2])));z&&k.push(c(q.color));A&&(q=q.vertexColors,k.push(c(q[0]),c(q[1]),c(q[2])))}e.data={};e.data.vertices=g;e.data.normals=l;0<p.length&&(e.data.colors=p);0<n.length&&(e.data.uvs=[n]);e.data.faces=k;return e},clone:function(){return(new V.Geometry).copy(this)},
copy:function(a){this.vertices=[];this.faces=[];this.faceVertexUvs=[[]];for(var b=a.vertices,c=0,d=b.length;c<d;c++)this.vertices.push(b[c].clone());b=a.faces;c=0;for(d=b.length;c<d;c++)this.faces.push(b[c].clone());c=0;for(d=a.faceVertexUvs.length;c<d;c++){b=a.faceVertexUvs[c];void 0===this.faceVertexUvs[c]&&(this.faceVertexUvs[c]=[]);for(var e=0,g=b.length;e<g;e++){for(var h=b[e],k=[],l=0,m=h.length;l<m;l++)k.push(h[l].clone());this.faceVertexUvs[c].push(k)}}return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});
V.GeometryIdCount=0;V.DirectGeometry=function(){Object.defineProperty(this,"id",{value:V.GeometryIdCount++});this.uuid=V.Math.generateUUID();this.name="";this.type="DirectGeometry";this.indices=[];this.vertices=[];this.normals=[];this.colors=[];this.uvs=[];this.uvs2=[];this.groups=[];this.morphTargets={};this.skinWeights=[];this.skinIndices=[];this.boundingSphere=this.boundingBox=null;this.groupsNeedUpdate=this.uvsNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.verticesNeedUpdate=!1};
Object.assign(V.DirectGeometry.prototype,V.EventDispatcher.prototype,{computeBoundingBox:V.Geometry.prototype.computeBoundingBox,computeBoundingSphere:V.Geometry.prototype.computeBoundingSphere,computeFaceNormals:function(){console.warn("THREE.DirectGeometry: computeFaceNormals() is not a method of this type of geometry.")},computeVertexNormals:function(){console.warn("THREE.DirectGeometry: computeVertexNormals() is not a method of this type of geometry.")},computeGroups:function(a){var b=[];a=a.faces;
for(var c=0;c<a.length;c++){var d=a[c];if(d.materialIndex!==e){var e=d.materialIndex;void 0!==g&&(g.count=3*c-g.start,b.push(g));var g={start:3*c,materialIndex:e}}}void 0!==g&&(g.count=3*c-g.start,b.push(g));this.groups=b},fromGeometry:function(a){var b=a.faces,c=a.vertices,d=a.faceVertexUvs,e=d[0]&&0<d[0].length,g=d[1]&&0<d[1].length,h=a.morphTargets,k=h.length;if(0<k){var l=[];for(var m=0;m<k;m++)l[m]=[];this.morphTargets.position=l}var p=a.morphNormals,r=p.length;if(0<r){var n=[];for(m=0;m<r;m++)n[m]=
[];this.morphTargets.normal=n}for(var t=a.skinIndices,q=a.skinWeights,u=t.length===c.length,v=q.length===c.length,m=0;m<b.length;m++){var y=b[m];this.vertices.push(c[y.a],c[y.b],c[y.c]);var z=y.vertexNormals;3===z.length?this.normals.push(z[0],z[1],z[2]):(z=y.normal,this.normals.push(z,z,z));z=y.vertexColors;3===z.length?this.colors.push(z[0],z[1],z[2]):(z=y.color,this.colors.push(z,z,z));!0===e&&(z=d[0][m],void 0!==z?this.uvs.push(z[0],z[1],z[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",
m),this.uvs.push(new V.Vector2,new V.Vector2,new V.Vector2)));!0===g&&(z=d[1][m],void 0!==z?this.uvs2.push(z[0],z[1],z[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",m),this.uvs2.push(new V.Vector2,new V.Vector2,new V.Vector2)));for(z=0;z<k;z++){var A=h[z].vertices;l[z].push(A[y.a],A[y.b],A[y.c])}for(z=0;z<r;z++)A=p[z].vertexNormals[m],n[z].push(A.a,A.b,A.c);u&&this.skinIndices.push(t[y.a],t[y.b],t[y.c]);v&&this.skinWeights.push(q[y.a],q[y.b],q[y.c])}this.computeGroups(a);
this.verticesNeedUpdate=a.verticesNeedUpdate;this.normalsNeedUpdate=a.normalsNeedUpdate;this.colorsNeedUpdate=a.colorsNeedUpdate;this.uvsNeedUpdate=a.uvsNeedUpdate;this.groupsNeedUpdate=a.groupsNeedUpdate;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});
V.BufferGeometry=function(){Object.defineProperty(this,"id",{value:V.GeometryIdCount++});this.uuid=V.Math.generateUUID();this.name="";this.type="BufferGeometry";this.index=null;this.attributes={};this.morphAttributes={};this.groups=[];this.boundingSphere=this.boundingBox=null;this.drawRange={start:0,count:Infinity}};
Object.assign(V.BufferGeometry.prototype,V.EventDispatcher.prototype,{getIndex:function(){return this.index},setIndex:function(a){this.index=a},addAttribute:function(a,b,c){if(!1===b instanceof V.BufferAttribute&&!1===b instanceof V.InterleavedBufferAttribute)console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(a,new V.BufferAttribute(b,c));else if("index"===a)console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),
this.setIndex(b);else return this.attributes[a]=b,this},getAttribute:function(a){return this.attributes[a]},removeAttribute:function(a){delete this.attributes[a];return this},addGroup:function(a,b,c){this.groups.push({start:a,count:b,materialIndex:void 0!==c?c:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(a,b){this.drawRange.start=a;this.drawRange.count=b},applyMatrix:function(a){var b=this.attributes.position;void 0!==b&&(a.applyToVector3Array(b.array),b.needsUpdate=!0);b=this.attributes.normal;
void 0!==b&&(cb(new V.Matrix3,a).applyToVector3Array(b.array),b.needsUpdate=!0);null!==this.boundingBox&&this.computeBoundingBox();null!==this.boundingSphere&&this.computeBoundingSphere();return this},rotateX:function(){var a;return function(b){void 0===a&&(a=new V.Matrix4);nb(a,b);this.applyMatrix(a);return this}}(),rotateY:function(){var a;return function(b){void 0===a&&(a=new V.Matrix4);mb(a,b);this.applyMatrix(a);return this}}(),rotateZ:function(){var a;return function(b){void 0===a&&(a=new V.Matrix4);
lb(a,b);this.applyMatrix(a);return this}}(),translate:function(){var a;return function(b,c,d){void 0===a&&(a=new V.Matrix4);a.set(1,0,0,b,0,1,0,c,0,0,1,d,0,0,0,1);this.applyMatrix(a);return this}}(),scale:function(){var a;return function(b,c,d){void 0===a&&(a=new V.Matrix4);a.set(b,0,0,0,0,c,0,0,0,0,d,0,0,0,0,1);this.applyMatrix(a);return this}}(),lookAt:function(){var a;return function(b){void 0===a&&(a=new V.Object3D);a.lookAt(b);a.updateMatrix();this.applyMatrix(a.matrix)}}(),center:function(){this.computeBoundingBox();
var a=this.boundingBox.center().negate();this.translate(a.x,a.y,a.z);return a},setFromObject:function(a){var b=a.geometry;if(a instanceof V.Points||a instanceof V.Line){a=new V.Float32Attribute(3*b.vertices.length,3);var c=new V.Float32Attribute(3*b.colors.length,3);this.addAttribute("position",rb(a,b.vertices));this.addAttribute("color",ub(c,b.colors));b.lineDistances&&b.lineDistances.length===b.vertices.length&&(a=new V.Float32Attribute(b.lineDistances.length,1),this.addAttribute("lineDistance",
vb(a,b.lineDistances)));null!==b.boundingSphere&&(this.boundingSphere=b.boundingSphere.clone());null!==b.boundingBox&&(this.boundingBox=b.boundingBox.clone())}else a instanceof V.Mesh&&b instanceof V.Geometry&&this.fromGeometry(b);return this},updateFromObject:function(a){var b=a.geometry;if(a instanceof V.Mesh){var c=b.__directGeometry;if(void 0===c)return this.fromGeometry(b);c.verticesNeedUpdate=b.verticesNeedUpdate;c.normalsNeedUpdate=b.normalsNeedUpdate;c.colorsNeedUpdate=b.colorsNeedUpdate;
c.uvsNeedUpdate=b.uvsNeedUpdate;c.groupsNeedUpdate=b.groupsNeedUpdate;b.verticesNeedUpdate=!1;b.normalsNeedUpdate=!1;b.colorsNeedUpdate=!1;b.uvsNeedUpdate=!1;b.groupsNeedUpdate=!1;b=c}!0===b.verticesNeedUpdate&&(c=this.attributes.position,void 0!==c&&(rb(c,b.vertices),c.needsUpdate=!0),b.verticesNeedUpdate=!1);!0===b.normalsNeedUpdate&&(c=this.attributes.normal,void 0!==c&&(rb(c,b.normals),c.needsUpdate=!0),b.normalsNeedUpdate=!1);!0===b.colorsNeedUpdate&&(c=this.attributes.color,void 0!==c&&(ub(c,
b.colors),c.needsUpdate=!0),b.colorsNeedUpdate=!1);b.uvsNeedUpdate&&(c=this.attributes.uv,void 0!==c&&(sb(c,b.uvs),c.needsUpdate=!0),b.uvsNeedUpdate=!1);b.lineDistancesNeedUpdate&&(c=this.attributes.lineDistance,void 0!==c&&(vb(c,b.lineDistances),c.needsUpdate=!0),b.lineDistancesNeedUpdate=!1);b.groupsNeedUpdate&&(b.computeGroups(a.geometry),this.groups=b.groups,b.groupsNeedUpdate=!1);return this},fromGeometry:function(a){a.__directGeometry=(new V.DirectGeometry).fromGeometry(a);return this.fromDirectGeometry(a.__directGeometry)},
fromDirectGeometry:function(a){this.addAttribute("position",rb(new V.BufferAttribute(new Float32Array(3*a.vertices.length),3),a.vertices));0<a.normals.length&&this.addAttribute("normal",rb(new V.BufferAttribute(new Float32Array(3*a.normals.length),3),a.normals));0<a.colors.length&&this.addAttribute("color",ub(new V.BufferAttribute(new Float32Array(3*a.colors.length),3),a.colors));0<a.uvs.length&&this.addAttribute("uv",sb(new V.BufferAttribute(new Float32Array(2*a.uvs.length),2),a.uvs));0<a.uvs2.length&&
this.addAttribute("uv2",sb(new V.BufferAttribute(new Float32Array(2*a.uvs2.length),2),a.uvs2));0<a.indices.length&&this.setIndex(tb(new V.BufferAttribute(new (65535<a.vertices.length?Uint32Array:Uint16Array)(3*a.indices.length),1),a.indices));this.groups=a.groups;for(var b in a.morphTargets){for(var c=[],d=a.morphTargets[b],e=0,g=d.length;e<g;e++){var h=d[e],k=new V.Float32Attribute(3*h.length,3);c.push(rb(k,h))}this.morphAttributes[b]=c}0<a.skinIndices.length&&(b=new V.Float32Attribute(4*a.skinIndices.length,
4),this.addAttribute("skinIndex",qb(b,a.skinIndices)));0<a.skinWeights.length&&(b=new V.Float32Attribute(4*a.skinWeights.length,4),this.addAttribute("skinWeight",qb(b,a.skinWeights)));null!==a.boundingSphere&&(this.boundingSphere=a.boundingSphere.clone());null!==a.boundingBox&&(this.boundingBox=a.boundingBox.clone());return this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new V.Box3);var a=this.attributes.position.array;void 0!==a?bb(this.boundingBox,a):this.boundingBox.makeEmpty();
(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var a=new V.Box3,b=new V.Vector3;return function(){null===this.boundingSphere&&(this.boundingSphere=new V.Sphere);var c=this.attributes.position.array;if(c){var d=this.boundingSphere.center;bb(a,c);a.center(d);for(var e=
0,g=0,h=c.length;g<h;g+=3)b.fromArray(c,g),e=Math.max(e,d.distanceToSquared(b));this.boundingSphere.radius=Math.sqrt(e);isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var a=this.index,b=this.attributes,c=this.groups;if(b.position){var d=b.position.array;if(void 0===b.normal)this.addAttribute("normal",
new V.BufferAttribute(new Float32Array(d.length),3));else for(var e=b.normal.array,g=0,h=e.length;g<h;g++)e[g]=0;var e=b.normal.array,k=new V.Vector3,l=new V.Vector3,m=new V.Vector3,p=new V.Vector3,r=new V.Vector3;if(a){a=a.array;0===c.length&&this.addGroup(0,a.length);for(var n=0,t=c.length;n<t;++n){g=c[n];h=g.start;var q=g.count;g=h;for(h+=q;g<h;g+=3){q=3*a[g+0];var u=3*a[g+1];var v=3*a[g+2];k.fromArray(d,q);l.fromArray(d,u);m.fromArray(d,v);p.subVectors(m,l);r.subVectors(k,l);Sa(p,r);e[q]+=p.x;
e[q+1]+=p.y;e[q+2]+=p.z;e[u]+=p.x;e[u+1]+=p.y;e[u+2]+=p.z;e[v]+=p.x;e[v+1]+=p.y;e[v+2]+=p.z}}}else for(g=0,h=d.length;g<h;g+=9)k.fromArray(d,g),l.fromArray(d,g+3),m.fromArray(d,g+6),p.subVectors(m,l),r.subVectors(k,l),Sa(p,r),e[g]=p.x,e[g+1]=p.y,e[g+2]=p.z,e[g+3]=p.x,e[g+4]=p.y,e[g+5]=p.z,e[g+6]=p.x,e[g+7]=p.y,e[g+8]=p.z;this.normalizeNormals();b.normal.needsUpdate=!0}},merge:function(a,b){if(!1===a instanceof V.BufferGeometry)console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",
a);else{void 0===b&&(b=0);var c=this.attributes,d;for(d in c)if(void 0!==a.attributes[d])for(var e=c[d].array,g=a.attributes[d],h=g.array,k=0,g=g.itemSize*b;k<h.length;k++,g++)e[g]=h[k];return this}},normalizeNormals:function(){for(var a=this.attributes.normal.array,b,c,d,e=0,g=a.length;e<g;e+=3)b=a[e],c=a[e+1],d=a[e+2],b=1/Math.sqrt(b*b+c*c+d*d),a[e]*=b,a[e+1]*=b,a[e+2]*=b},toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),
this;var a=new V.BufferGeometry,b=this.index.array,c=this.attributes,d;for(d in c){for(var e=c[d],g=e.array,e=e.itemSize,h=new g.constructor(b.length*e),k,l=0,m=0,p=b.length;m<p;m++){k=b[m]*e;for(var r=0;r<e;r++)h[l++]=g[k++]}a.addAttribute(d,new V.BufferAttribute(h,e))}return a},toJSON:function(){var a={metadata:{version:4.4,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};a.uuid=this.uuid;a.type=this.type;""!==this.name&&(a.name=this.name);if(void 0!==this.parameters){var b=this.parameters;
for(var c in b)void 0!==b[c]&&(a[c]=b[c]);return a}a.data={attributes:{}};var d=this.index;null!==d&&(b=Array.prototype.slice.call(d.array),a.data.index={type:d.array.constructor.name,array:b});d=this.attributes;for(c in d){var e=d[c];b=Array.prototype.slice.call(e.array);a.data.attributes[c]={itemSize:e.itemSize,type:e.array.constructor.name,array:b,normalized:e.normalized}}c=this.groups;0<c.length&&(a.data.groups=JSON.parse(JSON.stringify(c)));c=this.boundingSphere;null!==c&&(a.data.boundingSphere=
{center:c.center.toArray(),radius:c.radius});return a},clone:function(){return(new V.BufferGeometry).copy(this)},copy:function(a){var b=a.index;null!==b&&this.setIndex(b.clone());var b=a.attributes;for(c in b)this.addAttribute(c,b[c].clone());a=a.groups;var c=0;for(b=a.length;c<b;c++){var d=a[c];this.addGroup(d.start,d.count,d.materialIndex)}return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});V.BufferGeometry.MaxIndex=65535;
V.InstancedBufferGeometry=function(){V.BufferGeometry.call(this);this.type="InstancedBufferGeometry";this.maxInstancedCount=void 0};V.InstancedBufferGeometry.prototype=Object.create(V.BufferGeometry.prototype);V.InstancedBufferGeometry.prototype.constructor=V.InstancedBufferGeometry;V.InstancedBufferGeometry.prototype.addGroup=function(a,b,c){this.groups.push({start:a,count:b,instances:c})};
V.InstancedBufferGeometry.prototype.copy=function(a){var b=a.index;null!==b&&this.setIndex(b.clone());var b=a.attributes;for(c in b)this.addAttribute(c,b[c].clone());a=a.groups;var c=0;for(b=a.length;c<b;c++){var d=a[c];this.addGroup(d.start,d.count,d.instances)}return this};V.Uniform=function(a,b){"string"===typeof a&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),a=b);this.value=a;this.dynamic=!1};
V.Uniform.prototype={constructor:V.Uniform,onUpdate:function(a){this.dynamic=!0;this.onUpdateCallback=a;return this}};V.AnimationAction=function(){throw Error("THREE.AnimationAction: Use mixer.clipAction for construction.");};
V.AnimationAction._new=function(a,b,c){this._mixer=a;this._clip=b;this._localRoot=c||null;a=b.tracks;b=a.length;c=Array(b);for(var d={endingStart:V.ZeroCurvatureEnding,endingEnd:V.ZeroCurvatureEnding},e=0;e!==b;++e){var g=a[e].createInterpolant(null);c[e]=g;g.settings=d}this._interpolantSettings=d;this._interpolants=c;this._propertyBindings=Array(b);this._weightInterpolant=this._timeScaleInterpolant=this._byClipCacheIndex=this._cacheIndex=null;this.loop=V.LoopRepeat;this._loopCount=-1;this._startTime=
null;this.time=0;this._effectiveWeight=this.weight=this._effectiveTimeScale=this.timeScale=1;this.repetitions=Infinity;this.paused=!1;this.enabled=!0;this.clampWhenFinished=!1;this.zeroSlopeAtEnd=this.zeroSlopeAtStart=!0};
V.AnimationAction._new.prototype={constructor:V.AnimationAction._new,play:function(){this._mixer._activateAction(this);return this},stop:function(){this._mixer._deactivateAction(this);return this.reset()},reset:function(){this.paused=!1;this.enabled=!0;this.time=0;this._loopCount=-1;this._startTime=null;return wb(xb(this))},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},
startAt:function(a){this._startTime=a;return this},setLoop:function(a,b){this.loop=a;this.repetitions=b;return this},setEffectiveWeight:function(a){this.weight=a;this._effectiveWeight=this.enabled?a:0;return xb(this)},getEffectiveWeight:function(){return this._effectiveWeight},crossFadeTo:function(a,b,c){yb(this,b,1,0);yb(a,b,0,1);if(c){c=a._clip.duration;var d=this._clip.duration,e=c/d;zb(this,1,d/c,b);zb(a,e,1,b)}return a},setEffectiveTimeScale:function(a){this.timeScale=a;this._effectiveTimeScale=
this.paused?0:a;return wb(this)},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(a){this.timeScale=this._clip.duration/a;return wb(this)},syncWith:function(a){this.time=a.time;this.timeScale=a.timeScale;return wb(this)},halt:function(a){return zb(this,this._effectiveTimeScale,0,a)},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(a,b,c,d){var e=this._startTime;
if(null!==e){b=(a-e)*c;if(0>b||0===c)return;this._startTime=null;b*=c}c=b;b=0;if(!this.paused&&(b=this.timeScale,e=this._timeScaleInterpolant,null!==e)){var g=e.evaluate(a)[0];b*=g;a>e.parameterPositions[1]&&(wb(this),0===b?this.paused=!0:this.timeScale=b)}this._effectiveTimeScale=b;a:if(g=c*b,c=this.time+g,0!==g){b=this._clip.duration;var h=this.loop,e=this._loopCount;if(h===V.LoopOnce)b:{if(-1===e&&(this.loopCount=0,Ab(this,!0,!0,!1)),c>=b)c=b;else if(0>c)c=0;else break b;this.clampWhenFinished?
this.paused=!0:this.enabled=!1;this._mixer.dispatchEvent({type:"finished",action:this,direction:0>g?-1:1})}else{h=h===V.LoopPingPong;-1===e&&(0<=g?(e=0,Ab(this,!0,0===this.repetitions,h)):Ab(this,0===this.repetitions,!0,h));if(c>=b||0>c){var k=Math.floor(c/b);c-=b*k;var e=e+Math.abs(k),l=this.repetitions-e;0>l?(this.clampWhenFinished?this.paused=!0:this.enabled=!1,c=0<g?b:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:0<g?1:-1})):(0===l?(g=0>g,Ab(this,g,!g,h)):Ab(this,!1,!1,h),
this._loopCount=e,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:k}))}if(h&&1===(e&1)){this.time=c;c=b-c;break a}}this.time=c}b=0;this.enabled&&(b=this.weight,e=this._weightInterpolant,null!==e&&(g=e.evaluate(a)[0],b*=g,a>e.parameterPositions[1]&&(xb(this),0===g&&(this.enabled=!1))));a=this._effectiveWeight=b;if(0<a)for(b=this._interpolants,e=this._propertyBindings,g=0,h=b.length;g!==h;++g){b[g].evaluate(c);var k=e[g],l=a,m=k.buffer,p=k.valueSize,r=d*p+p,n=k.cumulativeWeight;if(0===
n){for(n=0;n!==p;++n)m[r+n]=m[n];n=l}else n+=l,k._mixBufferRegion(m,r,0,l/n,p);k.cumulativeWeight=n}}};function yb(a,b,c,d){var e=a._mixer,g=e.time,h=a._weightInterpolant;null===h&&(h=e._lendControlInterpolant(),a._weightInterpolant=h);a=h.parameterPositions;h=h.sampleValues;a[0]=g;h[0]=c;a[1]=g+b;h[1]=d}
function Ab(a,b,c,d){var e=a._interpolantSettings;d?(e.endingStart=V.ZeroSlopeEnding,e.endingEnd=V.ZeroSlopeEnding):(e.endingStart=b?a.zeroSlopeAtStart?V.ZeroSlopeEnding:V.ZeroCurvatureEnding:V.WrapAroundEnding,e.endingEnd=c?a.zeroSlopeAtEnd?V.ZeroSlopeEnding:V.ZeroCurvatureEnding:V.WrapAroundEnding)}function wb(a){var b=a._timeScaleInterpolant;null!==b&&(a._timeScaleInterpolant=null,a._mixer._takeBackControlInterpolant(b));return a}
function zb(a,b,c,d){var e=a._mixer,g=e.time,h=a._timeScaleInterpolant,k=a.timeScale;null===h&&(h=e._lendControlInterpolant(),a._timeScaleInterpolant=h);e=h.parameterPositions;h=h.sampleValues;e[0]=g;e[1]=g+d;h[0]=b/k;h[1]=c/k;return a}function xb(a){var b=a._weightInterpolant;null!==b&&(a._weightInterpolant=null,a._mixer._takeBackControlInterpolant(b));return a}
V.AnimationClip=function(a,b,c){this.name=a;this.tracks=c;this.duration=void 0!==b?b:-1;this.uuid=V.Math.generateUUID();if(0>this.duration){b=a=0;for(c=this.tracks.length;b!==c;++b){var d=this.tracks[b];a=Math.max(a,d.times[d.times.length-1])}this.duration=a}this.trim();this.optimize()};
V.AnimationClip.prototype={constructor:V.AnimationClip,trim:function(){for(var a=0;a<this.tracks.length;a++)this.tracks[a].trim(0,this.duration);return this},optimize:function(){for(var a=0;a<this.tracks.length;a++)this.tracks[a].optimize();return this}};
Object.assign(V.AnimationClip,{parse:function(a){for(var b=[],c=a.tracks,d=1/(a.fps||1),e=0,g=c.length;e!==g;++e)b.push(V.KeyframeTrack.parse(c[e]).scale(d));return new V.AnimationClip(a.name,a.duration,b)},toJSON:function(a){var b=[],c=a.tracks;a={name:a.name,duration:a.duration,tracks:b};for(var d=0,e=c.length;d!==e;++d)b.push(V.KeyframeTrack.toJSON(c[d]));return a},CreateFromMorphTargetSequence:function(a,b,c,d){for(var e=b.length,g=[],h=0;h<e;h++){var k=[],l=[];k.push((h+e-1)%e,h,(h+1)%e);l.push(0,
1,0);var m=V.AnimationUtils.getKeyframeOrder(k),k=V.AnimationUtils.sortedArray(k,1,m),l=V.AnimationUtils.sortedArray(l,1,m);d||0!==k[0]||(k.push(e),l.push(l[0]));g.push((new V.NumberKeyframeTrack(".morphTargetInfluences["+b[h].name+"]",k,l)).scale(1/c))}return new V.AnimationClip(a,-1,g)},findByName:function(a,b){var c=a;Array.isArray(a)||(c=a.geometry&&a.geometry.animations||a.animations);for(a=0;a<c.length;a++)if(c[a].name===b)return c[a];return null},CreateClipsFromMorphTargetSequences:function(a,
b,c){for(var d,e={},g=/^([\w-]*?)([\d]+)$/,h=0,k=a.length;h<k;h++){var l=a[h],m=l.name.match(g);m&&1<m.length&&(d=m[1],(m=e[d])||(e[d]=m=[]),m.push(l))}a=[];for(d in e)a.push(V.AnimationClip.CreateFromMorphTargetSequence(d,e[d],b,c));return a},parseAnimation:function(a,b){function c(a,b,c,d,e){if(0!==c.length){var g=[],h=[];V.AnimationUtils.flattenJSON(c,g,h,d);0!==g.length&&e.push(new a(b,g,h))}}if(!a)return console.error("  no animation in JSONLoader data"),null;var d=[],e=a.name||"default",g=a.length||
-1,h=a.fps||30;a=a.hierarchy||[];for(var k=0;k<a.length;k++){var l=a[k].keys;if(l&&0!==l.length)if(l[0].morphTargets){for(var g={},m=0;m<l.length;m++)if(l[m].morphTargets)for(var p=0;p<l[m].morphTargets.length;p++)g[l[m].morphTargets[p]]=-1;for(var r in g){for(var n=[],t=[],p=0;p!==l[m].morphTargets.length;++p){var q=l[m];n.push(q.time);t.push(q.morphTarget===r?1:0)}d.push(new V.NumberKeyframeTrack(".morphTargetInfluence["+r+"]",n,t))}g=g.length*(h||1)}else m=".bones["+b[k].name+"]",c(V.VectorKeyframeTrack,
m+".position",l,"pos",d),c(V.QuaternionKeyframeTrack,m+".quaternion",l,"rot",d),c(V.VectorKeyframeTrack,m+".scale",l,"scl",d)}return 0===d.length?null:new V.AnimationClip(e,g,d)}});V.AnimationMixer=function(a){this._root=a;this._initMemoryManager();this.time=this._accuIndex=0;this.timeScale=1};
Object.assign(V.AnimationMixer.prototype,V.EventDispatcher.prototype,{clipAction:function(a,b){var c=b||this._root,d=c.uuid,c="string"===typeof a?V.AnimationClip.findByName(c,a):a;a=null!==c?c.uuid:a;var e=this._actionsByClip[a],g=null;if(void 0!==e){g=e.actionByRoot[d];if(void 0!==g)return g;g=e.knownActions[0];null===c&&(c=g._clip)}if(null===c)return null;b=new V.AnimationMixer._Action(this,c,b);this._bindAction(b,g);this._addInactiveAction(b,a,d);return b},existingAction:function(a,b){var c=b||
this._root;b=c.uuid;c="string"===typeof a?V.AnimationClip.findByName(c,a):a;a=this._actionsByClip[c?c.uuid:a];return void 0!==a?a.actionByRoot[b]||null:null},stopAllAction:function(){for(var a=this._actions,b=this._nActiveActions,c=this._bindings,d=this._nActiveBindings,e=this._nActiveBindings=this._nActiveActions=0;e!==b;++e)a[e].reset();for(e=0;e!==d;++e)c[e].useCount=0;return this},update:function(a){a*=this.timeScale;for(var b=this._actions,c=this._nActiveActions,d=this.time+=a,e=Math.sign(a),
g=this._accuIndex^=1,h=0;h!==c;++h){var k=b[h];k.enabled&&k._update(d,a,e,g)}a=this._bindings;b=this._nActiveBindings;for(h=0;h!==b;++h)a[h].apply(g);return this},getRoot:function(){return this._root},uncacheClip:function(a){var b=this._actions;a=a.uuid;var c=this._actionsByClip,d=c[a];if(void 0!==d){for(var d=d.knownActions,e=0,g=d.length;e!==g;++e){var h=d[e];this._deactivateAction(h);var k=h._cacheIndex,l=b[b.length-1];h._cacheIndex=null;h._byClipCacheIndex=null;l._cacheIndex=k;b[k]=l;b.pop();
this._removeInactiveBindingsForAction(h)}delete c[a]}},uncacheRoot:function(a){a=a.uuid;var b=this._actionsByClip;for(d in b){var c=b[d].actionByRoot[a];void 0!==c&&(this._deactivateAction(c),this._removeInactiveAction(c))}var d=this._bindingsByRootAndName[a];if(void 0!==d)for(var e in d)a=d[e],a.binding.setValue(a.buffer,3*a.valueSize),this._removeInactiveBinding(a)},uncacheAction:function(a,b){a=this.existingAction(a,b);null!==a&&(this._deactivateAction(a),this._removeInactiveAction(a))}});
V.AnimationMixer._Action=V.AnimationAction._new;
Object.assign(V.AnimationMixer.prototype,{_bindAction:function(a,b){var c=a._localRoot||this._root,d=a._clip.tracks,e=d.length,g=a._propertyBindings;a=a._interpolants;var h=c.uuid,k=this._bindingsByRootAndName,l=k[h];void 0===l&&(l={},k[h]=l);for(k=0;k!==e;++k){var m=d[k],p=m.name,r=l[p];if(void 0===r){r=g[k];if(void 0!==r){null===r._cacheIndex&&(++r.referenceCount,this._addInactiveBinding(r,h,p));continue}r=new V.PropertyMixer(V.PropertyBinding.create(c,p,b&&b._propertyBindings[k].binding.parsedPath),
m.ValueTypeName,Bb(m));++r.referenceCount;this._addInactiveBinding(r,h,p)}g[k]=r;a[k].resultBuffer=r.buffer}},_activateAction:function(a){if(!this._isActiveAction(a)){if(null===a._cacheIndex){var b=(a._localRoot||this._root).uuid,c=a._clip.uuid,d=this._actionsByClip[c];this._bindAction(a,d&&d.knownActions[0]);this._addInactiveAction(a,c,b)}b=a._propertyBindings;c=0;for(d=b.length;c!==d;++c){var e=b[c];if(0===e.useCount++){this._lendBinding(e);var g=e.buffer,h=e.valueSize,k=3*h;e.binding.getValue(g,
k);for(var l=h;l!==k;++l)g[l]=g[k+l%h];e.cumulativeWeight=0}}this._lendAction(a)}},_deactivateAction:function(a){if(this._isActiveAction(a)){for(var b=a._propertyBindings,c=0,d=b.length;c!==d;++c){var e=b[c];0===--e.useCount&&(e.binding.setValue(e.buffer,3*e.valueSize),this._takeBackBinding(e))}this._takeBackAction(a)}},_initMemoryManager:function(){this._actions=[];this._nActiveActions=0;this._actionsByClip={};this._bindings=[];this._nActiveBindings=0;this._bindingsByRootAndName={};this._controlInterpolants=
[];this._nActiveControlInterpolants=0;var a=this;this.stats={actions:{get total(){return a._actions.length},get inUse(){return a._nActiveActions}},bindings:{get total(){return a._bindings.length},get inUse(){return a._nActiveBindings}},controlInterpolants:{get total(){return a._controlInterpolants.length},get inUse(){return a._nActiveControlInterpolants}}}},_isActiveAction:function(a){a=a._cacheIndex;return null!==a&&a<this._nActiveActions},_addInactiveAction:function(a,b,c){var d=this._actions,e=
this._actionsByClip,g=e[b];void 0===g?(g={knownActions:[a],actionByRoot:{}},a._byClipCacheIndex=0,e[b]=g):(b=g.knownActions,a._byClipCacheIndex=b.length,b.push(a));a._cacheIndex=d.length;d.push(a);g.actionByRoot[c]=a},_removeInactiveAction:function(a){var b=this._actions,c=b[b.length-1],d=a._cacheIndex;c._cacheIndex=d;b[d]=c;b.pop();a._cacheIndex=null;var c=a._clip.uuid,d=this._actionsByClip,e=d[c],g=e.knownActions,h=g[g.length-1],k=a._byClipCacheIndex;h._byClipCacheIndex=k;g[k]=h;g.pop();a._byClipCacheIndex=
null;delete e.actionByRoot[(b._localRoot||this._root).uuid];0===g.length&&delete d[c];this._removeInactiveBindingsForAction(a)},_removeInactiveBindingsForAction:function(a){a=a._propertyBindings;for(var b=0,c=a.length;b!==c;++b){var d=a[b];0===--d.referenceCount&&this._removeInactiveBinding(d)}},_lendAction:function(a){var b=this._actions,c=a._cacheIndex,d=this._nActiveActions++,e=b[d];a._cacheIndex=d;b[d]=a;e._cacheIndex=c;b[c]=e},_takeBackAction:function(a){var b=this._actions,c=a._cacheIndex,d=
--this._nActiveActions,e=b[d];a._cacheIndex=d;b[d]=a;e._cacheIndex=c;b[c]=e},_addInactiveBinding:function(a,b,c){var d=this._bindingsByRootAndName,e=d[b],g=this._bindings;void 0===e&&(e={},d[b]=e);e[c]=a;a._cacheIndex=g.length;g.push(a)},_removeInactiveBinding:function(a){var b=this._bindings,c=a.binding,d=c.rootNode.uuid,c=c.path,e=this._bindingsByRootAndName,g=e[d],h=b[b.length-1];a=a._cacheIndex;h._cacheIndex=a;b[a]=h;b.pop();delete g[c];a:{for(var k in g)break a;delete e[d]}},_lendBinding:function(a){var b=
this._bindings,c=a._cacheIndex,d=this._nActiveBindings++,e=b[d];a._cacheIndex=d;b[d]=a;e._cacheIndex=c;b[c]=e},_takeBackBinding:function(a){var b=this._bindings,c=a._cacheIndex,d=--this._nActiveBindings,e=b[d];a._cacheIndex=d;b[d]=a;e._cacheIndex=c;b[c]=e},_lendControlInterpolant:function(){var a=this._controlInterpolants,b=this._nActiveControlInterpolants++,c=a[b];void 0===c&&(c=new V.LinearInterpolant(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),c.__cacheIndex=
b,a[b]=c);return c},_takeBackControlInterpolant:function(a){var b=this._controlInterpolants,c=a.__cacheIndex,d=--this._nActiveControlInterpolants,e=b[d];a.__cacheIndex=d;b[d]=a;e.__cacheIndex=c;b[c]=e},_controlInterpolantsResultBuffer:new Float32Array(1)});
V.AnimationObjectGroup=function(a){this.uuid=V.Math.generateUUID();this._objects=Array.prototype.slice.call(arguments);this.nCachedObjects_=0;var b={};this._indicesByUUID=b;for(var c=0,d=arguments.length;c!==d;++c)b[arguments[c].uuid]=c;this._paths=[];this._parsedPaths=[];this._bindings=[];this._bindingsIndicesByPath={};var e=this;this.stats={objects:{get total(){return e._objects.length},get inUse(){return this.total-e.nCachedObjects_}},get bindingsPerObject(){return e._bindings.length}}};
V.AnimationObjectGroup.prototype={constructor:V.AnimationObjectGroup,add:function(a){for(var b,c=this._objects,d=c.length,e=this.nCachedObjects_,g=this._indicesByUUID,h=this._paths,k=this._parsedPaths,l=this._bindings,m=l.length,p=0,r=arguments.length;p!==r;++p){var n=arguments[p],t=n.uuid,q=g[t];if(void 0===q){q=d++;g[t]=q;c.push(n);for(var t=0,u=m;t!==u;++t)l[t].push(new V.PropertyBinding(n,h[t],k[t]))}else if(q<e){b=c[q];var v=--e,u=c[v];g[u.uuid]=q;c[q]=u;g[t]=v;c[v]=n;t=0;for(u=m;t!==u;++t){var y=
l[t],z=y[q];y[q]=y[v];void 0===z&&(z=new V.PropertyBinding(n,h[t],k[t]));y[v]=z}}else c[q]!==b&&console.error("Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes...")}this.nCachedObjects_=e},remove:function(a){for(var b=this._objects,c=this.nCachedObjects_,d=this._indicesByUUID,e=this._bindings,g=e.length,h=0,k=arguments.length;h!==k;++h){var l=arguments[h],m=l.uuid,p=d[m];if(void 0!==p&&p>=c){var r=c++,n=b[r];d[n.uuid]=p;b[p]=n;d[m]=
r;b[r]=l;l=0;for(m=g;l!==m;++l){var n=e[l],t=n[p];n[p]=n[r];n[r]=t}}}this.nCachedObjects_=c},uncache:function(a){for(var b,c,d=this._objects,e=d.length,g=this.nCachedObjects_,h=this._indicesByUUID,k=this._bindings,l=k.length,m=0,p=arguments.length;m!==p;++m){c=arguments[m].uuid;var r=h[c];if(void 0!==r)if(delete h[c],r<g){var n=--g,t=d[n];c=--e;b=d[c];h[t.uuid]=r;d[r]=t;h[b.uuid]=n;d[n]=b;d.pop();for(var t=0,q=l;t!==q;++t){b=k[t];var u=b[c];b[r]=b[n];b[n]=u;b.pop()}}else for(c=--e,b=d[c],h[b.uuid]=
r,d[r]=b,d.pop(),t=0,q=l;t!==q;++t)b=k[t],b[r]=b[c],b.pop()}this.nCachedObjects_=g},unsubscribe_:function(a){var b=this._bindingsIndicesByPath,c=b[a];if(void 0!==c){var d=this._paths,e=this._parsedPaths,g=this._bindings,h=g.length-1,k=g[h];b[a[h]]=c;g[c]=k;g.pop();e[c]=e[h];e.pop();d[c]=d[h];d.pop()}}};
V.AnimationUtils={arraySlice:function(a,b,c){return V.AnimationUtils.isTypedArray(a)?new a.constructor(a.subarray(b,c)):a.slice(b,c)},convertArray:function(a,b,c){return!a||!c&&a.constructor===b?a:"number"===typeof b.BYTES_PER_ELEMENT?new b(a):Array.prototype.slice.call(a)},isTypedArray:function(a){return ArrayBuffer.isView(a)&&!(a instanceof DataView)},getKeyframeOrder:function(a){for(var b=a.length,c=Array(b),d=0;d!==b;++d)c[d]=d;c.sort(function(b,c){return a[b]-a[c]});return c},sortedArray:function(a,
b,c){for(var d=a.length,e=new a.constructor(d),g=0,h=0;h!==d;++g)for(var k=c[g]*b,l=0;l!==b;++l)e[h++]=a[k+l];return e},flattenJSON:function(a,b,c,d){for(var e=1,g=a[0];void 0!==g&&void 0===g[d];)g=a[e++];if(void 0!==g){var h=g[d];if(void 0!==h)if(Array.isArray(h)){do h=g[d],void 0!==h&&(b.push(g.time),c.push.apply(c,h)),g=a[e++];while(void 0!==g)}else if(void 0!==h.toArray){do h=g[d],void 0!==h&&(b.push(g.time),h.toArray(c,c.length)),g=a[e++];while(void 0!==g)}else{do h=g[d],void 0!==h&&(b.push(g.time),
c.push(h)),g=a[e++];while(void 0!==g)}}}};V.KeyframeTrack=function(a,b,c,d){if(void 0===a)throw Error("track name is undefined");if(void 0===b||0===b.length)throw Error("no keyframes in track named "+a);this.name=a;this.times=V.AnimationUtils.convertArray(b,this.TimeBufferType);this.values=V.AnimationUtils.convertArray(c,this.ValueBufferType);Cb(this,d||this.DefaultInterpolation);this.validate();this.optimize()};
V.KeyframeTrack.prototype={constructor:V.KeyframeTrack,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:V.InterpolateLinear,InterpolantFactoryMethodDiscrete:function(a){return new V.DiscreteInterpolant(this.times,this.values,Bb(this),a)},InterpolantFactoryMethodLinear:function(a){return new V.LinearInterpolant(this.times,this.values,Bb(this),a)},InterpolantFactoryMethodSmooth:function(a){return new V.CubicInterpolant(this.times,this.values,Bb(this),a)},shift:function(a){if(0!==
a)for(var b=this.times,c=0,d=b.length;c!==d;++c)b[c]+=a;return this},scale:function(a){if(1!==a)for(var b=this.times,c=0,d=b.length;c!==d;++c)b[c]*=a;return this},trim:function(a,b){for(var c=this.times,d=c.length,e=0,g=d-1;e!==d&&c[e]<a;)++e;for(;-1!==g&&c[g]>b;)--g;++g;if(0!==e||g!==d)e>=g&&(g=Math.max(g,1),e=g-1),a=Bb(this),this.times=V.AnimationUtils.arraySlice(c,e,g),this.values=V.AnimationUtils.arraySlice(this.values,e*a,g*a);return this},validate:function(){var a=!0,b=Bb(this);0!==b-Math.floor(b)&&
(console.error("invalid value size in track",this),a=!1);var c=this.times,b=this.values,d=c.length;0===d&&(console.error("track is empty",this),a=!1);for(var e=null,g=0;g!==d;g++){var h=c[g];if("number"===typeof h&&isNaN(h)){console.error("time is not a valid number",this,g,h);a=!1;break}if(null!==e&&e>h){console.error("out of order keys",this,g,h,e);a=!1;break}e=h}if(void 0!==b&&V.AnimationUtils.isTypedArray(b))for(g=0,c=b.length;g!==c;++g)if(d=b[g],isNaN(d)){console.error("value is not a valid number",
this,g,d);a=!1;break}return a},optimize:function(){for(var a=this.times,b=this.values,c=Bb(this),d=1,e=1,g=a.length-1;e<=g;++e){var h=!1,k=a[e];if(k!==a[e+1]&&(1!==e||k!==k[0]))for(var l=e*c,m=l-c,p=l+c,k=0;k!==c;++k){var r=b[l+k];if(r!==b[m+k]||r!==b[p+k]){h=!0;break}}if(h){if(e!==d)for(a[d]=a[e],h=e*c,l=d*c,k=0;k!==c;++k)b[l+k]=b[h+k];++d}}d!==a.length&&(this.times=V.AnimationUtils.arraySlice(a,0,d),this.values=V.AnimationUtils.arraySlice(b,0,d*c));return this}};
function Bb(a){return a.values.length/a.times.length}
function Cb(a,b){switch(b){case V.InterpolateDiscrete:var c=a.InterpolantFactoryMethodDiscrete;break;case V.InterpolateLinear:c=a.InterpolantFactoryMethodLinear;break;case V.InterpolateSmooth:c=a.InterpolantFactoryMethodSmooth}if(void 0===c){c="unsupported interpolation for "+a.ValueTypeName+" keyframe track named "+a.name;if(void 0===a.createInterpolant)if(b!==a.DefaultInterpolation)Cb(a,a.DefaultInterpolation);else throw Error(c);console.warn(c)}else a.createInterpolant=c}
Object.assign(V.KeyframeTrack,{parse:function(a){if(void 0===a.type)throw Error("track type undefined, can not parse");var b=V.KeyframeTrack._getTrackTypeForValueTypeName(a.type);if(void 0===a.times){var c=[],d=[];V.AnimationUtils.flattenJSON(a.keys,c,d,"value");a.times=c;a.values=d}return void 0!==b.parse?b.parse(a):new b(a.name,a.times,a.values,a.interpolation)},toJSON:function(a){var b=a.constructor;if(void 0!==b.toJSON)b=b.toJSON(a);else{var b={name:a.name,times:V.AnimationUtils.convertArray(a.times,
Array),values:V.AnimationUtils.convertArray(a.values,Array)};a:{switch(a.createInterpolant){case a.InterpolantFactoryMethodDiscrete:var c=V.InterpolateDiscrete;break a;case a.InterpolantFactoryMethodLinear:c=V.InterpolateLinear;break a;case a.InterpolantFactoryMethodSmooth:c=V.InterpolateSmooth;break a}c=void 0}c!==a.DefaultInterpolation&&(b.interpolation=c)}b.type=a.ValueTypeName;return b},_getTrackTypeForValueTypeName:function(a){switch(a.toLowerCase()){case "scalar":case "double":case "float":case "number":case "integer":return V.NumberKeyframeTrack;
case "vector":case "vector2":case "vector3":case "vector4":return V.VectorKeyframeTrack;case "color":return V.ColorKeyframeTrack;case "quaternion":return V.QuaternionKeyframeTrack;case "bool":case "boolean":return V.BooleanKeyframeTrack;case "string":return V.StringKeyframeTrack}throw Error("Unsupported typeName: "+a);}});
V.PropertyBinding=function(a,b,c){this.path=b;this.parsedPath=c||V.PropertyBinding.parseTrackName(b);this.node=V.PropertyBinding.findNode(a,this.parsedPath.nodeName)||a;this.rootNode=a};
V.PropertyBinding.prototype={constructor:V.PropertyBinding,getValue:function(a,b){this.bind();this.getValue(a,b)},setValue:function(a,b){this.bind();this.setValue(a,b)},bind:function(){var a=this.node,b=this.parsedPath,c=b.objectName,d=b.propertyName,e=b.propertyIndex;a||(this.node=a=V.PropertyBinding.findNode(this.rootNode,b.nodeName)||this.rootNode);this.getValue=this._getValue_unavailable;this.setValue=this._setValue_unavailable;if(a){if(c){var g=b.objectIndex;switch(c){case "materials":if(!a.material){console.error("  can not bind to material as node does not have a material",
this);return}if(!a.material.materials){console.error("  can not bind to material.materials as node.material does not have a materials array",this);return}a=a.material.materials;break;case "bones":if(!a.skeleton){console.error("  can not bind to bones as node does not have a skeleton",this);return}a=a.skeleton.bones;for(c=0;c<a.length;c++)if(a[c].name===g){g=c;break}break;default:if(void 0===a[c]){console.error("  can not bind to objectName of node, undefined",this);return}a=a[c]}if(void 0!==g){if(void 0===
a[g]){console.error("  trying to bind to objectIndex of objectName, but is undefined:",this,a);return}a=a[g]}}if(g=a[d]){b=this.Versioning.None;void 0!==a.needsUpdate?(b=this.Versioning.NeedsUpdate,this.targetObject=a):void 0!==a.matrixWorldNeedsUpdate&&(b=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=a);c=this.BindingType.Direct;if(void 0!==e){if("morphTargetInfluences"===d){if(!a.geometry){console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry",
this);return}if(!a.geometry.morphTargets){console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry.morphTargets",this);return}for(c=0;c<this.node.geometry.morphTargets.length;c++)if(a.geometry.morphTargets[c].name===e){e=c;break}}c=this.BindingType.ArrayElement;this.resolvedProperty=g;this.propertyIndex=e}else void 0!==g.fromArray&&void 0!==g.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=g):void 0!==g.length?(c=this.BindingType.EntireArray,this.resolvedProperty=
g):this.propertyName=d;this.getValue=this.GetterByBindingType[c];this.setValue=this.SetterByBindingTypeAndVersioning[c][b]}else console.error("  trying to update property for track: "+b.nodeName+"."+d+" but it wasn't found.",a)}else console.error("  trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null;this.getValue=this._getValue_unbound;this.setValue=this._setValue_unbound}};
Object.assign(V.PropertyBinding.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},_getValue_unbound:V.PropertyBinding.prototype.getValue,_setValue_unbound:V.PropertyBinding.prototype.setValue,BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(a,b){a[b]=this.node[this.propertyName]},function(a,b){for(var c=this.resolvedProperty,d=0,e=c.length;d!==e;++d)a[b++]=c[d]},
function(a,b){a[b]=this.resolvedProperty[this.propertyIndex]},function(a,b){this.resolvedProperty.toArray(a,b)}],SetterByBindingTypeAndVersioning:[[function(a,b){this.node[this.propertyName]=a[b]},function(a,b){this.node[this.propertyName]=a[b];this.targetObject.needsUpdate=!0},function(a,b){this.node[this.propertyName]=a[b];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(a,b){for(var c=this.resolvedProperty,d=0,e=c.length;d!==e;++d)c[d]=a[b++]},function(a,b){for(var c=this.resolvedProperty,
d=0,e=c.length;d!==e;++d)c[d]=a[b++];this.targetObject.needsUpdate=!0},function(a,b){for(var c=this.resolvedProperty,d=0,e=c.length;d!==e;++d)c[d]=a[b++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(a,b){this.resolvedProperty[this.propertyIndex]=a[b]},function(a,b){this.resolvedProperty[this.propertyIndex]=a[b];this.targetObject.needsUpdate=!0},function(a,b){this.resolvedProperty[this.propertyIndex]=a[b];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(a,b){this.resolvedProperty.fromArray(a,
b)},function(a,b){this.resolvedProperty.fromArray(a,b);this.targetObject.needsUpdate=!0},function(a,b){this.resolvedProperty.fromArray(a,b);this.targetObject.matrixWorldNeedsUpdate=!0}]]});
V.PropertyBinding.Composite=function(a,b,c){c=c||V.PropertyBinding.parseTrackName(b);this._targetGroup=a;var d=a._bindingsIndicesByPath,e=d[b],g=a._bindings;if(void 0!==e)b=g[e];else{var h=a._paths,k=a._parsedPaths,l=a._objects,m=a.nCachedObjects_;a=Array(l.length);e=g.length;d[b]=e;h.push(b);k.push(c);g.push(a);d=m;for(e=l.length;d!==e;++d)a[d]=new V.PropertyBinding(l[d],b,c);b=a}this._bindings=b};
V.PropertyBinding.Composite.prototype={constructor:V.PropertyBinding.Composite,getValue:function(a,b){this.bind();var c=this._bindings[this._targetGroup.nCachedObjects_];void 0!==c&&c.getValue(a,b)},setValue:function(a,b){for(var c=this._bindings,d=this._targetGroup.nCachedObjects_,e=c.length;d!==e;++d)c[d].setValue(a,b)},bind:function(){for(var a=this._bindings,b=this._targetGroup.nCachedObjects_,c=a.length;b!==c;++b)a[b].bind()},unbind:function(){for(var a=this._bindings,b=this._targetGroup.nCachedObjects_,
c=a.length;b!==c;++b)a[b].unbind()}};V.PropertyBinding.create=function(a,b,c){return a instanceof V.AnimationObjectGroup?new V.PropertyBinding.Composite(a,b,c):new V.PropertyBinding(a,b,c)};
V.PropertyBinding.parseTrackName=function(a){var b=/^(([\w]+\/)*)([\w-\d]+)?(\.([\w]+)(\[([\w\d\[\]\_.:\- ]+)\])?)?(\.([\w.]+)(\[([\w\d\[\]\_. ]+)\])?)$/,c=b.exec(a);if(!c)throw Error("cannot parse trackName at all: "+a);c.index===b.lastIndex&&b.lastIndex++;b={nodeName:c[3],objectName:c[5],objectIndex:c[7],propertyName:c[9],propertyIndex:c[11]};if(null===b.propertyName||0===b.propertyName.length)throw Error("can not parse propertyName from trackName: "+a);return b};
V.PropertyBinding.findNode=function(a,b){if(!b||""===b||"root"===b||"."===b||-1===b||b===a.name||b===a.uuid)return a;if(a.skeleton){var c=function(a){for(var c=0;c<a.bones.length;c++){var d=a.bones[c];if(d.name===b)return d}return null}(a.skeleton);if(c)return c}if(a.children){var d=function(a){for(var c=0;c<a.length;c++){var e=a[c];if(e.name===b||e.uuid===b)return e;if(e=d(e.children))return e}return null};if(a=d(a.children))return a}return null};
V.PropertyMixer=function(a,b,c){this.binding=a;this.valueSize=c;a=Float64Array;switch(b){case "quaternion":b=this._slerp;break;case "string":case "bool":a=Array;b=this._select;break;default:b=this._lerp}this.buffer=new a(4*c);this._mixBufferRegion=b;this.referenceCount=this.useCount=this.cumulativeWeight=0};
V.PropertyMixer.prototype={constructor:V.PropertyMixer,apply:function(a){var b=this.valueSize,c=this.buffer;a=a*b+b;var d=this.cumulativeWeight,e=this.binding;this.cumulativeWeight=0;1>d&&this._mixBufferRegion(c,a,3*b,1-d,b);for(var d=b,g=b+b;d!==g;++d)if(c[d]!==c[d+b]){e.setValue(c,a);break}},_select:function(a,b,c,d,e){if(.5<=d)for(d=0;d!==e;++d)a[b+d]=a[c+d]},_slerp:function(a,b,c,d){V.Quaternion.slerpFlat(a,b,a,b,a,c,d)},_lerp:function(a,b,c,d,e){for(var g=1-d,h=0;h!==e;++h){var k=b+h;a[k]=a[k]*
g+a[c+h]*d}}};V.BooleanKeyframeTrack=function(a,b,c){V.KeyframeTrack.call(this,a,b,c)};V.BooleanKeyframeTrack.prototype=Object.assign(Object.create(V.KeyframeTrack.prototype),{constructor:V.BooleanKeyframeTrack,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:V.InterpolateDiscrete,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});V.ColorKeyframeTrack=function(a,b,c,d){V.KeyframeTrack.call(this,a,b,c,d)};
V.ColorKeyframeTrack.prototype=Object.assign(Object.create(V.KeyframeTrack.prototype),{constructor:V.ColorKeyframeTrack,ValueTypeName:"color"});V.NumberKeyframeTrack=function(a,b,c,d){V.KeyframeTrack.call(this,a,b,c,d)};V.NumberKeyframeTrack.prototype=Object.assign(Object.create(V.KeyframeTrack.prototype),{constructor:V.NumberKeyframeTrack,ValueTypeName:"number"});V.QuaternionKeyframeTrack=function(a,b,c,d){V.KeyframeTrack.call(this,a,b,c,d)};
V.QuaternionKeyframeTrack.prototype=Object.assign(Object.create(V.KeyframeTrack.prototype),{constructor:V.QuaternionKeyframeTrack,ValueTypeName:"quaternion",DefaultInterpolation:V.InterpolateLinear,InterpolantFactoryMethodLinear:function(a){return new V.QuaternionLinearInterpolant(this.times,this.values,Bb(this),a)},InterpolantFactoryMethodSmooth:void 0});V.StringKeyframeTrack=function(a,b,c,d){V.KeyframeTrack.call(this,a,b,c,d)};
V.StringKeyframeTrack.prototype=Object.assign(Object.create(V.KeyframeTrack.prototype),{constructor:V.StringKeyframeTrack,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:V.InterpolateDiscrete,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});V.VectorKeyframeTrack=function(a,b,c,d){V.KeyframeTrack.call(this,a,b,c,d)};V.VectorKeyframeTrack.prototype=Object.assign(Object.create(V.KeyframeTrack.prototype),{constructor:V.VectorKeyframeTrack,ValueTypeName:"vector"});
V.Audio=function(a){V.Object3D.call(this);this.type="Audio";this.context=a.context;this.source=this.context.createBufferSource();this.source.onended=this.onEnded.bind(this);this.gain=this.context.createGain();this.gain.connect(a.getInput());this.autoplay=!1;this.startTime=0;this.playbackRate=1;this.isPlaying=!1;this.hasPlaybackControl=!0;this.sourceType="empty";this.filters=[]};
V.Audio.prototype=Object.assign(Object.create(V.Object3D.prototype),{constructor:V.Audio,getOutput:function(){return this.gain},setNodeSource:function(a){this.hasPlaybackControl=!1;this.sourceType="audioNode";this.source=a;this.connect();return this},setBuffer:function(a){this.source.buffer=a;this.sourceType="buffer";this.autoplay&&this.play();return this},play:function(){if(!0===this.isPlaying)console.warn("THREE.Audio: Audio is already playing.");else if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");
else{var a=this.context.createBufferSource();a.buffer=this.source.buffer;a.loop=this.source.loop;a.onended=this.source.onended;a.start(0,this.startTime);a.playbackRate.value=this.playbackRate;this.isPlaying=!0;this.source=a;return this.connect()}},pause:function(){if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return this.source.stop(),this.startTime=this.context.currentTime,this},stop:function(){if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");
else return this.source.stop(),this.startTime=0,this},connect:function(){if(0<this.filters.length){this.source.connect(this.filters[0]);for(var a=1,b=this.filters.length;a<b;a++)this.filters[a-1].connect(this.filters[a]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(0<this.filters.length){this.source.disconnect(this.filters[0]);for(var a=1,b=this.filters.length;a<b;a++)this.filters[a-1].disconnect(this.filters[a]);
this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(a){a||(a=[]);!0===this.isPlaying?(this.disconnect(),this.filters=a,this.connect()):this.filters=a;return this},getFilter:function(){return this.getFilters()[0]},setFilter:function(a){return this.setFilters(a?[a]:[])},setPlaybackRate:function(a){if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");
else return this.playbackRate=a,!0===this.isPlaying&&(this.source.playbackRate.value=this.playbackRate),this},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.source.loop},setLoop:function(a){!1===this.hasPlaybackControl?console.warn("THREE.Audio: this Audio has no playback control."):this.source.loop=a},getVolume:function(){return this.gain.gain.value},
setVolume:function(a){this.gain.gain.value=a;return this}});V.AudioAnalyser=function(a,b){this.analyser=a.context.createAnalyser();this.analyser.fftSize=void 0!==b?b:2048;this.data=new Uint8Array(this.analyser.frequencyBinCount);a.getOutput().connect(this.analyser)};
Object.assign(V.AudioAnalyser.prototype,{getFrequencyData:function(){this.analyser.getByteFrequencyData(this.data);return this.data},getAverageFrequency:function(){for(var a=0,b=this.getFrequencyData(),c=0;c<b.length;c++)a+=b[c];return a/b.length}});Object.defineProperty(V,"AudioContext",{get:function(){var a;return function(){void 0===a&&(a=new (window.AudioContext||window.webkitAudioContext));return a}}()});
V.PositionalAudio=function(a){V.Audio.call(this,a);this.panner=this.context.createPanner();this.panner.connect(this.gain)};
V.PositionalAudio.prototype=Object.assign(Object.create(V.Audio.prototype),{constructor:V.PositionalAudio,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(a){this.panner.refDistance=a},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(a){this.panner.rolloffFactor=a},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(a){this.panner.distanceModel=a},getMaxDistance:function(){return this.panner.maxDistance},
setMaxDistance:function(a){this.panner.maxDistance=a},updateMatrixWorld:function(){var a=new V.Vector3;return function(b){V.Object3D.prototype.updateMatrixWorld.call(this,b);W(a,this.matrixWorld);this.panner.setPosition(a.x,a.y,a.z)}}()});V.AudioListener=function(){V.Object3D.call(this);this.type="AudioListener";this.context=V.AudioContext;this.gain=this.context.createGain();this.gain.connect(this.context.destination);this.filter=null};
V.AudioListener.prototype=Object.assign(Object.create(V.Object3D.prototype),{constructor:V.AudioListener,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(a){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):
this.gain.disconnect(this.context.destination);this.filter=a;this.gain.connect(this.filter);this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(a){this.gain.gain.value=a},updateMatrixWorld:function(){var a=new V.Vector3,b=new V.Quaternion,c=new V.Vector3,d=new V.Vector3;return function(e){V.Object3D.prototype.updateMatrixWorld.call(this,e);e=this.context.listener;var g=this.up;this.matrixWorld.decompose(a,b,c);Oa(d.set(0,
0,-1),b);e.setPosition(a.x,a.y,a.z);e.setOrientation(d.x,d.y,d.z,g.x,g.y,g.z)}}()});V.Camera=function(){V.Object3D.call(this);this.type="Camera";this.matrixWorldInverse=new V.Matrix4;this.projectionMatrix=new V.Matrix4};V.Camera.prototype=Object.create(V.Object3D.prototype);f=V.Camera.prototype;f.constructor=V.Camera;f.getWorldDirection=function(){var a=new V.Quaternion;return function(b){b=b||new V.Vector3;this.getWorldQuaternion(a);return Oa(b.set(0,0,-1),a)}}();
f.lookAt=function(){var a=new V.Matrix4;return function(b){a.lookAt(this.position,b,this.up);this.quaternion.setFromRotationMatrix(a)}}();f.clone=function(){return(new this.constructor).copy(this)};f.copy=function(a){V.Object3D.prototype.copy.call(this,a);this.matrixWorldInverse.copy(a.matrixWorldInverse);this.projectionMatrix.copy(a.projectionMatrix);return this};
V.CubeCamera=function(a,b,c){V.Object3D.call(this);this.type="CubeCamera";var d=new V.PerspectiveCamera(90,1,a,b);d.up.set(0,-1,0);d.lookAt(new V.Vector3(1,0,0));this.add(d);var e=new V.PerspectiveCamera(90,1,a,b);e.up.set(0,-1,0);e.lookAt(new V.Vector3(-1,0,0));this.add(e);var g=new V.PerspectiveCamera(90,1,a,b);g.up.set(0,0,1);g.lookAt(new V.Vector3(0,1,0));this.add(g);var h=new V.PerspectiveCamera(90,1,a,b);h.up.set(0,0,-1);h.lookAt(new V.Vector3(0,-1,0));this.add(h);var k=new V.PerspectiveCamera(90,
1,a,b);k.up.set(0,-1,0);k.lookAt(new V.Vector3(0,0,1));this.add(k);var l=new V.PerspectiveCamera(90,1,a,b);l.up.set(0,-1,0);l.lookAt(new V.Vector3(0,0,-1));this.add(l);this.renderTarget=new V.WebGLRenderTargetCube(c,c,{format:V.RGBFormat,magFilter:V.LinearFilter,minFilter:V.LinearFilter});this.updateCubeMap=function(a,b){null===this.parent&&this.updateMatrixWorld();var c=this.renderTarget,m=c.texture.generateMipmaps;c.texture.generateMipmaps=!1;c.activeCubeFace=0;a.render(b,d,c);c.activeCubeFace=
1;a.render(b,e,c);c.activeCubeFace=2;a.render(b,g,c);c.activeCubeFace=3;a.render(b,h,c);c.activeCubeFace=4;a.render(b,k,c);c.texture.generateMipmaps=m;c.activeCubeFace=5;a.render(b,l,c);a.setRenderTarget(null)}};V.CubeCamera.prototype=Object.create(V.Object3D.prototype);V.CubeCamera.prototype.constructor=V.CubeCamera;
V.OrthographicCamera=function(a,b,c,d,e,g){V.Camera.call(this);this.type="OrthographicCamera";this.zoom=1;this.left=a;this.right=b;this.top=c;this.bottom=d;this.near=void 0!==e?e:.1;this.far=void 0!==g?g:2E3;this.updateProjectionMatrix()};
V.OrthographicCamera.prototype=Object.assign(Object.create(V.Camera.prototype),{constructor:V.OrthographicCamera,copy:function(a){V.Camera.prototype.copy.call(this,a);this.left=a.left;this.right=a.right;this.top=a.top;this.bottom=a.bottom;this.near=a.near;this.far=a.far;this.zoom=a.zoom;return this},updateProjectionMatrix:function(){var a=(this.right-this.left)/(2*this.zoom),b=(this.top-this.bottom)/(2*this.zoom),c=(this.right+this.left)/2,d=(this.top+this.bottom)/2,e=c-a,a=c+a,c=d+b,b=d-b,d=this.near,
g=this.far,h=this.projectionMatrix.elements,k=1/(a-e),l=1/(c-b),m=1/(g-d);h[0]=2*k;h[4]=0;h[8]=0;h[12]=-((a+e)*k);h[1]=0;h[5]=2*l;h[9]=0;h[13]=-((c+b)*l);h[2]=0;h[6]=0;h[10]=-2*m;h[14]=-((g+d)*m);h[3]=0;h[7]=0;h[11]=0;h[15]=1},toJSON:function(a){a=V.Object3D.prototype.toJSON.call(this,a);a.object.zoom=this.zoom;a.object.left=this.left;a.object.right=this.right;a.object.top=this.top;a.object.bottom=this.bottom;a.object.near=this.near;a.object.far=this.far;return a}});
V.PerspectiveCamera=function(a,b,c,d){V.Camera.call(this);this.type="PerspectiveCamera";this.fov=void 0!==a?a:50;this.zoom=1;this.near=void 0!==c?c:.1;this.far=void 0!==d?d:2E3;this.focus=10;this.aspect=void 0!==b?b:1;this.view=null;this.filmGauge=35;this.filmOffset=0;this.updateProjectionMatrix()};
V.PerspectiveCamera.prototype=Object.assign(Object.create(V.Camera.prototype),{constructor:V.PerspectiveCamera,copy:function(a){V.Camera.prototype.copy.call(this,a);this.fov=a.fov;this.zoom=a.zoom;this.near=a.near;this.far=a.far;this.focus=a.focus;this.aspect=a.aspect;this.view=null===a.view?null:Object.assign({},a.view);this.filmGauge=a.filmGauge;this.filmOffset=a.filmOffset;return this},setFocalLength:function(a){this.fov=2*V.Math.RAD2DEG*Math.atan(.5*this.getFilmHeight()/a);this.updateProjectionMatrix()},
getFocalLength:function(){return.5*this.getFilmHeight()/Math.tan(.5*V.Math.DEG2RAD*this.fov)},getEffectiveFOV:function(){return 2*V.Math.RAD2DEG*Math.atan(Math.tan(.5*V.Math.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(a,b,c,d,e,g){this.aspect=a/b;this.view={fullWidth:a,fullHeight:b,offsetX:c,offsetY:d,width:e,height:g};this.updateProjectionMatrix()},
clearViewOffset:function(){this.view=null;this.updateProjectionMatrix()},updateProjectionMatrix:function(){var a=this.near,b=a*Math.tan(.5*V.Math.DEG2RAD*this.fov)/this.zoom,c=2*b,d=this.aspect*c,e=-.5*d,g=this.view;if(null!==g)var h=g.fullWidth,k=g.fullHeight,e=e+g.offsetX*d/h,b=b-g.offsetY*c/k,d=g.width/h*d,c=g.height/k*c;g=this.filmOffset;0!==g&&(e+=a*g/this.getFilmWidth());jb(this.projectionMatrix,e,e+d,b-c,b,a,this.far)},toJSON:function(a){a=V.Object3D.prototype.toJSON.call(this,a);a.object.fov=
this.fov;a.object.zoom=this.zoom;a.object.near=this.near;a.object.far=this.far;a.object.focus=this.focus;a.object.aspect=this.aspect;null!==this.view&&(a.object.view=Object.assign({},this.view));a.object.filmGauge=this.filmGauge;a.object.filmOffset=this.filmOffset;return a}});
V.StereoCamera=function(){this.type="StereoCamera";this.aspect=1;this.cameraL=new V.PerspectiveCamera;this.cameraL.layers.enable(1);this.cameraL.matrixAutoUpdate=!1;this.cameraR=new V.PerspectiveCamera;this.cameraR.layers.enable(2);this.cameraR.matrixAutoUpdate=!1};
Object.assign(V.StereoCamera.prototype,{update:function(){var a,b,c,d,e,g=new V.Matrix4,h=new V.Matrix4;return function(k){if(a!==k.focus||b!==k.fov||c!==k.aspect*this.aspect||d!==k.near||e!==k.far){a=k.focus;b=k.fov;c=k.aspect*this.aspect;d=k.near;e=k.far;var l=k.projectionMatrix.clone(),m=.032*d/a,p=d*Math.tan(V.Math.DEG2RAD*b*.5);h.elements[12]=-.032;g.elements[12]=.032;var r=-p*c+m;var n=p*c+m;l.elements[0]=2*d/(n-r);l.elements[8]=(n+r)/(n-r);this.cameraL.projectionMatrix.copy(l);r=-p*c-m;n=p*
c-m;l.elements[0]=2*d/(n-r);l.elements[8]=(n+r)/(n-r);this.cameraR.projectionMatrix.copy(l)}this.cameraL.matrixWorld.copy(k.matrixWorld).multiply(h);this.cameraR.matrixWorld.copy(k.matrixWorld).multiply(g)}}()});V.Light=function(a,b){V.Object3D.call(this);this.type="Light";this.color=new V.Color(a);this.intensity=void 0!==b?b:1;this.receiveShadow=void 0};
V.Light.prototype=Object.assign(Object.create(V.Object3D.prototype),{constructor:V.Light,copy:function(a){V.Object3D.prototype.copy.call(this,a);this.color.copy(a.color);this.intensity=a.intensity;return this},toJSON:function(a){a=V.Object3D.prototype.toJSON.call(this,a);a.object.color=Fa(this.color);a.object.intensity=this.intensity;void 0!==this.groundColor&&(a.object.groundColor=Fa(this.groundColor));void 0!==this.distance&&(a.object.distance=this.distance);void 0!==this.angle&&(a.object.angle=
this.angle);void 0!==this.decay&&(a.object.decay=this.decay);void 0!==this.penumbra&&(a.object.penumbra=this.penumbra);return a}});V.LightShadow=function(a){this.camera=a;this.bias=0;this.radius=1;this.mapSize=new V.Vector2(512,512);this.map=null;this.matrix=new V.Matrix4};Object.assign(V.LightShadow.prototype,{copy:function(a){this.camera=a.camera.clone();this.bias=a.bias;this.radius=a.radius;this.mapSize.copy(a.mapSize);return this},clone:function(){return(new this.constructor).copy(this)}});
V.AmbientLight=function(a,b){V.Light.call(this,a,b);this.type="AmbientLight";this.castShadow=void 0};V.AmbientLight.prototype=Object.assign(Object.create(V.Light.prototype),{constructor:V.AmbientLight});V.DirectionalLight=function(a,b){V.Light.call(this,a,b);this.type="DirectionalLight";this.position.set(0,1,0);this.updateMatrix();this.target=new V.Object3D;this.shadow=new V.DirectionalLightShadow};
V.DirectionalLight.prototype=Object.assign(Object.create(V.Light.prototype),{constructor:V.DirectionalLight,copy:function(a){V.Light.prototype.copy.call(this,a);this.target=a.target.clone();this.shadow=a.shadow.clone();return this}});V.DirectionalLightShadow=function(){V.LightShadow.call(this,new V.OrthographicCamera(-5,5,5,-5,.5,500))};V.DirectionalLightShadow.prototype=Object.assign(Object.create(V.LightShadow.prototype),{constructor:V.DirectionalLightShadow});
V.HemisphereLight=function(a,b,c){V.Light.call(this,a,c);this.type="HemisphereLight";this.castShadow=void 0;this.position.set(0,1,0);this.updateMatrix();this.groundColor=new V.Color(b)};V.HemisphereLight.prototype=Object.assign(Object.create(V.Light.prototype),{constructor:V.HemisphereLight,copy:function(a){V.Light.prototype.copy.call(this,a);this.groundColor.copy(a.groundColor);return this}});
V.PointLight=function(a,b,c,d){V.Light.call(this,a,b);this.type="PointLight";Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(a){this.intensity=a/(4*Math.PI)}});this.distance=void 0!==c?c:0;this.decay=void 0!==d?d:1;this.shadow=new V.LightShadow(new V.PerspectiveCamera(90,1,.5,500))};
V.PointLight.prototype=Object.assign(Object.create(V.Light.prototype),{constructor:V.PointLight,copy:function(a){V.Light.prototype.copy.call(this,a);this.distance=a.distance;this.decay=a.decay;this.shadow=a.shadow.clone();return this}});
V.SpotLight=function(a,b,c,d,e,g){V.Light.call(this,a,b);this.type="SpotLight";this.position.set(0,1,0);this.updateMatrix();this.target=new V.Object3D;Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(a){this.intensity=a/Math.PI}});this.distance=void 0!==c?c:0;this.angle=void 0!==d?d:Math.PI/3;this.penumbra=void 0!==e?e:0;this.decay=void 0!==g?g:1;this.shadow=new V.SpotLightShadow};
V.SpotLight.prototype=Object.assign(Object.create(V.Light.prototype),{constructor:V.SpotLight,copy:function(a){V.Light.prototype.copy.call(this,a);this.distance=a.distance;this.angle=a.angle;this.penumbra=a.penumbra;this.decay=a.decay;this.target=a.target.clone();this.shadow=a.shadow.clone();return this}});V.SpotLightShadow=function(){V.LightShadow.call(this,new V.PerspectiveCamera(50,1,.5,500))};
V.SpotLightShadow.prototype=Object.assign(Object.create(V.LightShadow.prototype),{constructor:V.SpotLightShadow,update:function(a){var b=2*V.Math.RAD2DEG*a.angle,c=this.mapSize.width/this.mapSize.height;a=a.distance||500;var d=this.camera;if(b!==d.fov||c!==d.aspect||a!==d.far)d.fov=b,d.aspect=c,d.far=a,d.updateProjectionMatrix()}});V.AudioLoader=function(a){this.manager=void 0!==a?a:V.DefaultLoadingManager};
V.AudioLoader.prototype={constructor:V.AudioLoader,load:function(a,b,c,d){var e=new V.XHRLoader(this.manager);Db(e);e.load(a,function(a){V.AudioContext.decodeAudioData(a,function(a){b(a)})},c,d)}};V.Cache={enabled:!1,files:{},add:function(a,b){!1!==this.enabled&&(this.files[a]=b)},get:function(a){if(!1!==this.enabled)return this.files[a]},remove:function(a){delete this.files[a]},clear:function(){this.files={}}};
V.Loader=function(){this.onLoadStart=function(){};this.onLoadProgress=function(){};this.onLoadComplete=function(){}};
V.Loader.prototype={constructor:V.Loader,crossOrigin:void 0,createMaterial:function(){var a,b,c;return function(d,e,g){function h(a,c,d,h,l){a=e+a;var m=V.Loader.Handlers.get(a);null!==m?a=m.load(a):(b.setCrossOrigin(g),a=b.load(a));void 0!==c&&(a.repeat.fromArray(c),1!==c[0]&&(a.wrapS=V.RepeatWrapping),1!==c[1]&&(a.wrapT=V.RepeatWrapping));void 0!==d&&a.offset.fromArray(d);void 0!==h&&("repeat"===h[0]&&(a.wrapS=V.RepeatWrapping),"mirror"===h[0]&&(a.wrapS=V.MirroredRepeatWrapping),"repeat"===h[1]&&
(a.wrapT=V.RepeatWrapping),"mirror"===h[1]&&(a.wrapT=V.MirroredRepeatWrapping));void 0!==l&&(a.anisotropy=l);c=V.Math.generateUUID();k[c]=a;return c}void 0===a&&(a=new V.Color);void 0===b&&(b=new V.TextureLoader);void 0===c&&(c=new V.MaterialLoader);var k={},l={uuid:V.Math.generateUUID(),type:"MeshLambertMaterial"},m;for(m in d){var p=d[m];switch(m){case "DbgColor":case "DbgIndex":case "opticalDensity":case "illumination":break;case "DbgName":l.name=p;break;case "blending":l.blending=V[p];break;case "colorAmbient":case "mapAmbient":console.warn("THREE.Loader.createMaterial:",
m,"is no longer supported.");break;case "colorDiffuse":l.color=Fa(a.fromArray(p));break;case "colorSpecular":l.specular=Fa(a.fromArray(p));break;case "colorEmissive":l.emissive=Fa(a.fromArray(p));break;case "specularCoef":l.shininess=p;break;case "shading":"basic"===p.toLowerCase()&&(l.type="MeshBasicMaterial");"phong"===p.toLowerCase()&&(l.type="MeshPhongMaterial");break;case "mapDiffuse":l.map=h(p,d.mapDiffuseRepeat,d.mapDiffuseOffset,d.mapDiffuseWrap,d.mapDiffuseAnisotropy);break;case "mapDiffuseRepeat":case "mapDiffuseOffset":case "mapDiffuseWrap":case "mapDiffuseAnisotropy":break;
case "mapLight":l.lightMap=h(p,d.mapLightRepeat,d.mapLightOffset,d.mapLightWrap,d.mapLightAnisotropy);break;case "mapLightRepeat":case "mapLightOffset":case "mapLightWrap":case "mapLightAnisotropy":break;case "mapAO":l.aoMap=h(p,d.mapAORepeat,d.mapAOOffset,d.mapAOWrap,d.mapAOAnisotropy);break;case "mapAORepeat":case "mapAOOffset":case "mapAOWrap":case "mapAOAnisotropy":break;case "mapBump":l.bumpMap=h(p,d.mapBumpRepeat,d.mapBumpOffset,d.mapBumpWrap,d.mapBumpAnisotropy);break;case "mapBumpScale":l.bumpScale=
p;break;case "mapBumpRepeat":case "mapBumpOffset":case "mapBumpWrap":case "mapBumpAnisotropy":break;case "mapNormal":l.normalMap=h(p,d.mapNormalRepeat,d.mapNormalOffset,d.mapNormalWrap,d.mapNormalAnisotropy);break;case "mapNormalFactor":l.normalScale=[p,p];break;case "mapNormalRepeat":case "mapNormalOffset":case "mapNormalWrap":case "mapNormalAnisotropy":break;case "mapSpecular":l.specularMap=h(p,d.mapSpecularRepeat,d.mapSpecularOffset,d.mapSpecularWrap,d.mapSpecularAnisotropy);break;case "mapSpecularRepeat":case "mapSpecularOffset":case "mapSpecularWrap":case "mapSpecularAnisotropy":break;
case "mapAlpha":l.alphaMap=h(p,d.mapAlphaRepeat,d.mapAlphaOffset,d.mapAlphaWrap,d.mapAlphaAnisotropy);break;case "mapAlphaRepeat":case "mapAlphaOffset":case "mapAlphaWrap":case "mapAlphaAnisotropy":break;case "flipSided":l.side=V.BackSide;break;case "doubleSided":l.side=V.DoubleSide;break;case "transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity");l.opacity=p;break;case "depthTest":case "depthWrite":case "colorWrite":case "opacity":case "reflectivity":case "transparent":case "visible":case "wireframe":l[m]=
p;break;case "vertexColors":!0===p&&(l.vertexColors=V.VertexColors);"face"===p&&(l.vertexColors=V.FaceColors);break;default:console.error("THREE.Loader.createMaterial: Unsupported",m,p)}}"MeshBasicMaterial"===l.type&&delete l.emissive;"MeshPhongMaterial"!==l.type&&delete l.specular;1>l.opacity&&(l.transparent=!0);c.textures=k;return c.parse(l)}}()};function Eb(a,b,c){for(var d=V.Loader.prototype,e=[],g=0;g<a.length;++g)e[g]=d.createMaterial(a[g],b,c);return e}
function Fb(a){a=a.split("/");if(1===a.length)return"./";a.pop();return a.join("/")+"/"}V.Loader.Handlers={handlers:[],add:function(a,b){this.handlers.push(a,b)},get:function(a){for(var b=this.handlers,c=0,d=b.length;c<d;c+=2){var e=b[c+1];if(b[c].test(a))return e}return null}};V.XHRLoader=function(a){this.manager=void 0!==a?a:V.DefaultLoadingManager};
V.XHRLoader.prototype={constructor:V.XHRLoader,load:function(a,b,c,d){void 0!==this.path&&(a=this.path+a);var e=this,g=V.Cache.get(a);if(void 0!==g)return b&&setTimeout(function(){b(g)},0),g;var h=new XMLHttpRequest;h.overrideMimeType("text/plain");h.open("GET",a,!0);h.addEventListener("load",function(c){var g=c.target.response;V.Cache.add(a,g);200===this.status?(b&&b(g),e.manager.itemEnd(a)):0===this.status?(console.warn("THREE.XHRLoader: HTTP Status 0 received."),b&&b(g),e.manager.itemEnd(a)):(d&&
d(c),e.manager.itemError(a))},!1);void 0!==c&&h.addEventListener("progress",function(a){c(a)},!1);h.addEventListener("error",function(b){d&&d(b);e.manager.itemError(a)},!1);void 0!==this.responseType&&(h.responseType=this.responseType);void 0!==this.withCredentials&&(h.withCredentials=this.withCredentials);h.send(null);e.manager.itemStart(a);return h},setPath:function(a){this.path=a}};function Db(a){a.responseType="arraybuffer"}V.FontLoader=function(a){this.manager=void 0!==a?a:V.DefaultLoadingManager};
V.FontLoader.prototype={constructor:V.FontLoader,load:function(a,b,c,d){var e=this;(new V.XHRLoader(this.manager)).load(a,function(a){try{var c=JSON.parse(a)}catch(k){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),c=JSON.parse(a.substring(65,a.length-2))}a=e.parse(c);b&&b(a)},c,d)},parse:function(a){return new V.Font(a)}};V.ImageLoader=function(a){this.manager=void 0!==a?a:V.DefaultLoadingManager};
V.ImageLoader.prototype={constructor:V.ImageLoader,load:function(a,b,c,d){void 0!==this.path&&(a=this.path+a);var e=this,g=V.Cache.get(a);if(void 0!==g)return e.manager.itemStart(a),b?setTimeout(function(){b(g);e.manager.itemEnd(a)},0):e.manager.itemEnd(a),g;var h=document.createElement("img");h.addEventListener("load",function(){V.Cache.add(a,this);b&&b(this);e.manager.itemEnd(a)},!1);void 0!==c&&h.addEventListener("progress",function(a){c(a)},!1);h.addEventListener("error",function(b){d&&d(b);e.manager.itemError(a)},
!1);void 0!==this.crossOrigin&&(h.crossOrigin=this.crossOrigin);e.manager.itemStart(a);h.src=a;return h},setCrossOrigin:function(a){this.crossOrigin=a},setPath:function(a){this.path=a}};V.JSONLoader=function(a){"boolean"===typeof a&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),a=void 0);this.manager=void 0!==a?a:V.DefaultLoadingManager;this.withCredentials=!1};
V.JSONLoader.prototype={constructor:V.JSONLoader,get statusDomElement(){void 0===this._statusDomElement&&(this._statusDomElement=document.createElement("div"));console.warn("THREE.JSONLoader: .statusDomElement has been removed.");return this._statusDomElement},load:function(a,b,c,d){var e=this,g=this.texturePath&&"string"===typeof this.texturePath?this.texturePath:Fb(a),h=new V.XHRLoader(this.manager);h.withCredentials=this.withCredentials;h.load(a,function(c){c=JSON.parse(c);var d=c.metadata;if(void 0!==
d&&(d=d.type,void 0!==d)){if("object"===d.toLowerCase()){console.error("THREE.JSONLoader: "+a+" should be loaded with THREE.ObjectLoader instead.");return}if("scene"===d.toLowerCase()){console.error("THREE.JSONLoader: "+a+" should be loaded with THREE.SceneLoader instead.");return}}c=e.parse(c,g);b(c.geometry,c.materials)},c,d)},setTexturePath:function(a){this.texturePath=a},parse:function(a,b){var c=new V.Geometry,d=void 0!==a.scale?1/a.scale:1;(function(b){var d,e,k,l=a.faces;var m=a.vertices;var p=
a.normals,r=a.colors,n=0;if(void 0!==a.uvs){for(d=0;d<a.uvs.length;d++)a.uvs[d].length&&n++;for(d=0;d<n;d++)c.faceVertexUvs[d]=[]}var t=0;for(k=m.length;t<k;)d=new V.Vector3,d.x=m[t++]*b,d.y=m[t++]*b,d.z=m[t++]*b,c.vertices.push(d);t=0;for(k=l.length;t<k;){b=l[t++];var q=b&1;var u=b&2;d=b&8;var v=b&16;var y=b&32;m=b&64;b&=128;if(q){q=new V.Face3;q.a=l[t];q.b=l[t+1];q.c=l[t+3];var z=new V.Face3;z.a=l[t+1];z.b=l[t+2];z.c=l[t+3];t+=4;u&&(u=l[t++],q.materialIndex=u,z.materialIndex=u);u=c.faces.length;
if(d)for(d=0;d<n;d++){var A=a.uvs[d];c.faceVertexUvs[d][u]=[];c.faceVertexUvs[d][u+1]=[];for(e=0;4>e;e++){var x=l[t++];var E=A[2*x];x=A[2*x+1];E=new V.Vector2(E,x);2!==e&&c.faceVertexUvs[d][u].push(E);0!==e&&c.faceVertexUvs[d][u+1].push(E)}}v&&(v=3*l[t++],q.normal.set(p[v++],p[v++],p[v]),z.normal.copy(q.normal));if(y)for(d=0;4>d;d++)v=3*l[t++],y=new V.Vector3(p[v++],p[v++],p[v]),2!==d&&q.vertexNormals.push(y),0!==d&&z.vertexNormals.push(y);m&&(m=l[t++],m=r[m],za(q.color,m),za(z.color,m));if(b)for(d=
0;4>d;d++)m=l[t++],m=r[m],2!==d&&q.vertexColors.push(new V.Color(m)),0!==d&&z.vertexColors.push(new V.Color(m));c.faces.push(q);c.faces.push(z)}else{q=new V.Face3;q.a=l[t++];q.b=l[t++];q.c=l[t++];u&&(u=l[t++],q.materialIndex=u);u=c.faces.length;if(d)for(d=0;d<n;d++)for(A=a.uvs[d],c.faceVertexUvs[d][u]=[],e=0;3>e;e++)x=l[t++],E=A[2*x],x=A[2*x+1],E=new V.Vector2(E,x),c.faceVertexUvs[d][u].push(E);v&&(v=3*l[t++],q.normal.set(p[v++],p[v++],p[v]));if(y)for(d=0;3>d;d++)v=3*l[t++],y=new V.Vector3(p[v++],
p[v++],p[v]),q.vertexNormals.push(y);m&&(m=l[t++],za(q.color,r[m]));if(b)for(d=0;3>d;d++)m=l[t++],q.vertexColors.push(new V.Color(r[m]));c.faces.push(q)}}})(d);(function(){var b=void 0!==a.influencesPerVertex?a.influencesPerVertex:2;if(a.skinWeights)for(var d=0,h=a.skinWeights.length;d<h;d+=b)c.skinWeights.push(new V.Vector4(a.skinWeights[d],1<b?a.skinWeights[d+1]:0,2<b?a.skinWeights[d+2]:0,3<b?a.skinWeights[d+3]:0));if(a.skinIndices)for(d=0,h=a.skinIndices.length;d<h;d+=b)c.skinIndices.push(new V.Vector4(a.skinIndices[d],
1<b?a.skinIndices[d+1]:0,2<b?a.skinIndices[d+2]:0,3<b?a.skinIndices[d+3]:0));c.bones=a.bones;c.bones&&0<c.bones.length&&(c.skinWeights.length!==c.skinIndices.length||c.skinIndices.length!==c.vertices.length)&&console.warn("When skinning, number of vertices ("+c.vertices.length+"), skinIndices ("+c.skinIndices.length+"), and skinWeights ("+c.skinWeights.length+") should match.")})();(function(b){if(void 0!==a.morphTargets)for(var d=0,e=a.morphTargets.length;d<e;d++){c.morphTargets[d]={};c.morphTargets[d].name=
a.morphTargets[d].name;c.morphTargets[d].vertices=[];for(var k=c.morphTargets[d].vertices,l=a.morphTargets[d].vertices,m=0,p=l.length;m<p;m+=3){var r=new V.Vector3;r.x=l[m]*b;r.y=l[m+1]*b;r.z=l[m+2]*b;k.push(r)}}if(void 0!==a.morphColors&&0<a.morphColors.length)for(console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.'),b=c.faces,k=a.morphColors[0].colors,d=0,e=b.length;d<e;d++)b[d].color.fromArray(k,3*d)})(d);(function(){var b=[],d=[];void 0!==a.animation&&
d.push(a.animation);void 0!==a.animations&&(a.animations.length?d=d.concat(a.animations):d.push(a.animations));for(var h=0;h<d.length;h++){var k=V.AnimationClip.parseAnimation(d[h],c.bones);k&&b.push(k)}c.morphTargets&&(d=V.AnimationClip.CreateClipsFromMorphTargetSequences(c.morphTargets,10),b=b.concat(d));0<b.length&&(c.animations=b)})();c.computeFaceNormals();c.computeBoundingSphere();if(void 0===a.materials||0===a.materials.length)return{geometry:c};b=Eb(a.materials,b,this.crossOrigin);return{geometry:c,
materials:b}}};V.LoadingManager=function(a){var b=this,c=!1,d=0,e=0;this.onStart=void 0;this.onLoad=a;this.onError=this.onProgress=void 0;this.itemStart=function(a){e++;if(!1===c&&void 0!==b.onStart)b.onStart(a,d,e);c=!0};this.itemEnd=function(a){d++;if(void 0!==b.onProgress)b.onProgress(a,d,e);if(d===e&&(c=!1,void 0!==b.onLoad))b.onLoad()};this.itemError=function(a){if(void 0!==b.onError)b.onError(a)}};V.DefaultLoadingManager=new V.LoadingManager;
V.BufferGeometryLoader=function(a){this.manager=void 0!==a?a:V.DefaultLoadingManager};
V.BufferGeometryLoader.prototype={constructor:V.BufferGeometryLoader,load:function(a,b,c,d){var e=this;(new V.XHRLoader(e.manager)).load(a,function(a){b(e.parse(JSON.parse(a)))},c,d)},parse:function(a){var b=new V.BufferGeometry;var c=a.data.index;var d={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};void 0!==c&&(c=new d[c.type](c.array),
b.setIndex(new V.BufferAttribute(c,1)));var e=a.data.attributes;for(h in e){var g=e[h];c=new d[g.type](g.array);b.addAttribute(h,new V.BufferAttribute(c,g.itemSize,g.normalized))}d=a.data.groups||a.data.drawcalls||a.data.offsets;if(void 0!==d){var h=0;for(c=d.length;h!==c;++h)e=d[h],b.addGroup(e.start,e.count,e.materialIndex)}a=a.data.boundingSphere;void 0!==a&&(d=new V.Vector3,void 0!==a.center&&d.fromArray(a.center),b.boundingSphere=new V.Sphere(d,a.radius));return b}};
V.MaterialLoader=function(a){this.manager=void 0!==a?a:V.DefaultLoadingManager;this.textures={}};
V.MaterialLoader.prototype={constructor:V.MaterialLoader,load:function(a,b,c,d){var e=this;(new V.XHRLoader(e.manager)).load(a,function(a){b(e.parse(JSON.parse(a)))},c,d)},parse:function(a){var b=new V[a.type];void 0!==a.uuid&&(b.uuid=a.uuid);void 0!==a.name&&(b.name=a.name);void 0!==a.color&&za(b.color,a.color);void 0!==a.roughness&&(b.roughness=a.roughness);void 0!==a.metalness&&(b.metalness=a.metalness);void 0!==a.emissive&&za(b.emissive,a.emissive);void 0!==a.specular&&za(b.specular,a.specular);
void 0!==a.shininess&&(b.shininess=a.shininess);void 0!==a.uniforms&&(b.uniforms=a.uniforms);void 0!==a.vertexShader&&(b.vertexShader=a.vertexShader);void 0!==a.fragmentShader&&(b.fragmentShader=a.fragmentShader);void 0!==a.vertexColors&&(b.vertexColors=a.vertexColors);void 0!==a.shading&&(b.shading=a.shading);void 0!==a.blending&&(b.blending=a.blending);void 0!==a.side&&(b.side=a.side);void 0!==a.opacity&&(b.opacity=a.opacity);void 0!==a.transparent&&(b.transparent=a.transparent);void 0!==a.alphaTest&&
(b.alphaTest=a.alphaTest);void 0!==a.depthTest&&(b.depthTest=a.depthTest);void 0!==a.depthWrite&&(b.depthWrite=a.depthWrite);void 0!==a.colorWrite&&(b.colorWrite=a.colorWrite);void 0!==a.wireframe&&(b.wireframe=a.wireframe);void 0!==a.wireframeLinewidth&&(b.wireframeLinewidth=a.wireframeLinewidth);void 0!==a.size&&(b.size=a.size);void 0!==a.sizeAttenuation&&(b.sizeAttenuation=a.sizeAttenuation);void 0!==a.map&&(b.map=Gb(this,a.map));void 0!==a.alphaMap&&(b.alphaMap=Gb(this,a.alphaMap),b.transparent=
!0);void 0!==a.bumpMap&&(b.bumpMap=Gb(this,a.bumpMap));void 0!==a.bumpScale&&(b.bumpScale=a.bumpScale);void 0!==a.normalMap&&(b.normalMap=Gb(this,a.normalMap));if(void 0!==a.normalScale){var c=a.normalScale;!1===Array.isArray(c)&&(c=[c,c]);b.normalScale=(new V.Vector2).fromArray(c)}void 0!==a.displacementMap&&(b.displacementMap=Gb(this,a.displacementMap));void 0!==a.displacementScale&&(b.displacementScale=a.displacementScale);void 0!==a.displacementBias&&(b.displacementBias=a.displacementBias);void 0!==
a.roughnessMap&&(b.roughnessMap=Gb(this,a.roughnessMap));void 0!==a.metalnessMap&&(b.metalnessMap=Gb(this,a.metalnessMap));void 0!==a.emissiveMap&&(b.emissiveMap=Gb(this,a.emissiveMap));void 0!==a.emissiveIntensity&&(b.emissiveIntensity=a.emissiveIntensity);void 0!==a.specularMap&&(b.specularMap=Gb(this,a.specularMap));void 0!==a.envMap&&(b.envMap=Gb(this,a.envMap),b.combine=V.MultiplyOperation);a.reflectivity&&(b.reflectivity=a.reflectivity);void 0!==a.lightMap&&(b.lightMap=Gb(this,a.lightMap));
void 0!==a.lightMapIntensity&&(b.lightMapIntensity=a.lightMapIntensity);void 0!==a.aoMap&&(b.aoMap=Gb(this,a.aoMap));void 0!==a.aoMapIntensity&&(b.aoMapIntensity=a.aoMapIntensity);if(void 0!==a.materials)for(var c=0,d=a.materials.length;c<d;c++)b.materials.push(this.parse(a.materials[c]));return b}};function Gb(a,b){a=a.textures;void 0===a[b]&&console.warn("THREE.MaterialLoader: Undefined texture",b);return a[b]}
V.ObjectLoader=function(a){this.manager=void 0!==a?a:V.DefaultLoadingManager;this.texturePath=""};
V.ObjectLoader.prototype={constructor:V.ObjectLoader,load:function(a,b,c,d){""===this.texturePath&&(this.texturePath=a.substring(0,a.lastIndexOf("/")+1));var e=this;(new V.XHRLoader(e.manager)).load(a,function(a){e.parse(JSON.parse(a),b)},c,d)},setTexturePath:function(a){this.texturePath=a},setCrossOrigin:function(a){this.crossOrigin=a},parse:function(a,b){var c=Mb(this,a.geometries),d=Nb(this,a.images,function(){void 0!==b&&b(e)}),d=Ob(a.textures,d),d=Pb(a.materials,d),e=this.parseObject(a.object,
c,d);a.animations&&(e.animations=Qb(a.animations));void 0!==a.images&&0!==a.images.length||void 0===b||b(e);return e},parseObject:function(){var a=new V.Matrix4;return function(b,c,d){function e(a){void 0===c[a]&&console.warn("THREE.ObjectLoader: Undefined geometry",a);return c[a]}function g(a){if(void 0!==a)return void 0===d[a]&&console.warn("THREE.ObjectLoader: Undefined material",a),d[a]}switch(b.type){case "Scene":var h=new V.Scene;break;case "PerspectiveCamera":h=new V.PerspectiveCamera(b.fov,
b.aspect,b.near,b.far);void 0!==b.focus&&(h.focus=b.focus);void 0!==b.zoom&&(h.zoom=b.zoom);void 0!==b.filmGauge&&(h.filmGauge=b.filmGauge);void 0!==b.filmOffset&&(h.filmOffset=b.filmOffset);void 0!==b.view&&(h.view=Object.assign({},b.view));break;case "OrthographicCamera":h=new V.OrthographicCamera(b.left,b.right,b.top,b.bottom,b.near,b.far);break;case "AmbientLight":h=new V.AmbientLight(b.color,b.intensity);break;case "DirectionalLight":h=new V.DirectionalLight(b.color,b.intensity);break;case "PointLight":h=
new V.PointLight(b.color,b.intensity,b.distance,b.decay);break;case "SpotLight":h=new V.SpotLight(b.color,b.intensity,b.distance,b.angle,b.penumbra,b.decay);break;case "HemisphereLight":h=new V.HemisphereLight(b.color,b.groundColor,b.intensity);break;case "Mesh":h=e(b.geometry);var k=g(b.material);h=h.bones&&0<h.bones.length?new V.SkinnedMesh(h,k):new V.Mesh(h,k);break;case "LOD":h=new V.LOD;break;case "Line":h=new V.Line(e(b.geometry),g(b.material),b.mode);break;case "PointCloud":case "Points":h=
new V.Points(e(b.geometry),g(b.material));break;case "Sprite":h=new V.Sprite(g(b.material));break;case "Group":h=new V.Group;break;default:h=new V.Object3D}h.uuid=b.uuid;void 0!==b.name&&(h.name=b.name);void 0!==b.matrix?(a.fromArray(b.matrix),a.decompose(h.position,h.quaternion,h.scale)):(void 0!==b.position&&h.position.fromArray(b.position),void 0!==b.rotation&&h.rotation.fromArray(b.rotation),void 0!==b.scale&&h.scale.fromArray(b.scale));void 0!==b.castShadow&&(h.castShadow=b.castShadow);void 0!==
b.receiveShadow&&(h.receiveShadow=b.receiveShadow);void 0!==b.visible&&(h.visible=b.visible);void 0!==b.userData&&(h.userData=b.userData);if(void 0!==b.children)for(m in b.children)h.add(this.parseObject(b.children[m],c,d));if("LOD"===b.type)for(b=b.levels,k=0;k<b.length;k++){var l=b[k];var m=h.getObjectByProperty("uuid",l.object);void 0!==m&&h.addLevel(m,l.distance)}return h}}()};
function Ob(a,b){function c(a){if("number"===typeof a)return a;console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",a);return V[a]}var d={};if(void 0!==a)for(var e=0,g=a.length;e<g;e++){var h=a[e];void 0===h.image&&console.warn('THREE.ObjectLoader: No "image" specified for',h.uuid);void 0===b[h.image]&&console.warn("THREE.ObjectLoader: Undefined image",h.image);var k=new V.Texture(b[h.image]);k.needsUpdate=!0;k.uuid=h.uuid;void 0!==h.name&&(k.name=h.name);void 0!==h.mapping&&
(k.mapping=c(h.mapping));void 0!==h.offset&&(k.offset=new V.Vector2(h.offset[0],h.offset[1]));void 0!==h.repeat&&(k.repeat=new V.Vector2(h.repeat[0],h.repeat[1]));void 0!==h.minFilter&&(k.minFilter=c(h.minFilter));void 0!==h.magFilter&&(k.magFilter=c(h.magFilter));void 0!==h.anisotropy&&(k.anisotropy=h.anisotropy);Array.isArray(h.wrap)&&(k.wrapS=c(h.wrap[0]),k.wrapT=c(h.wrap[1]));d[h.uuid]=k}return d}
function Nb(a,b,c){function d(a){e.manager.itemStart(a);return h.load(a,function(){e.manager.itemEnd(a)})}var e=a,g={};if(void 0!==b&&0<b.length){var h=new V.ImageLoader(new V.LoadingManager(c));h.setCrossOrigin(a.crossOrigin);a=0;for(c=b.length;a<c;a++){var k=b[a],l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(k.url)?k.url:e.texturePath+k.url;g[k.uuid]=d(l)}}return g}function Qb(a){for(var b=[],c=0;c<a.length;c++){var d=V.AnimationClip.parse(a[c]);b.push(d)}return b}
function Pb(a,b){var c={};if(void 0!==a){var d=new V.MaterialLoader;d.textures=b;b=0;for(var e=a.length;b<e;b++){var g=d.parse(a[b]);c[g.uuid]=g}}return c}
function Mb(a,b){var c={};if(void 0!==b)for(var d=new V.JSONLoader,e=new V.BufferGeometryLoader,g=0,h=b.length;g<h;g++){var k=b[g];switch(k.type){case "PlaneGeometry":case "PlaneBufferGeometry":var l=new V[k.type](k.width,k.height,k.widthSegments,k.heightSegments);break;case "BoxGeometry":case "BoxBufferGeometry":case "CubeGeometry":l=new V[k.type](k.width,k.height,k.depth,k.widthSegments,k.heightSegments,k.depthSegments);break;case "CircleGeometry":case "CircleBufferGeometry":l=new V[k.type](k.radius,
k.segments,k.thetaStart,k.thetaLength);break;case "CylinderGeometry":case "CylinderBufferGeometry":l=new V[k.type](k.radiusTop,k.radiusBottom,k.height,k.radialSegments,k.heightSegments,k.openEnded,k.thetaStart,k.thetaLength);break;case "ConeGeometry":case "ConeBufferGeometry":l=new V[k.type](k.radius,k.height,k.radialSegments,k.heightSegments,k.openEnded,k.thetaStart,k.thetaLength);break;case "SphereGeometry":case "SphereBufferGeometry":l=new V[k.type](k.radius,k.widthSegments,k.heightSegments,k.phiStart,
k.phiLength,k.thetaStart,k.thetaLength);break;case "DodecahedronGeometry":case "IcosahedronGeometry":case "OctahedronGeometry":case "TetrahedronGeometry":l=new V[k.type](k.radius,k.detail);break;case "RingGeometry":case "RingBufferGeometry":l=new V[k.type](k.innerRadius,k.outerRadius,k.thetaSegments,k.phiSegments,k.thetaStart,k.thetaLength);break;case "TorusGeometry":case "TorusBufferGeometry":l=new V[k.type](k.radius,k.tube,k.radialSegments,k.tubularSegments,k.arc);break;case "TorusKnotGeometry":case "TorusKnotBufferGeometry":l=
new V[k.type](k.radius,k.tube,k.tubularSegments,k.radialSegments,k.p,k.q);break;case "LatheGeometry":case "LatheBufferGeometry":l=new V[k.type](k.points,k.segments,k.phiStart,k.phiLength);break;case "BufferGeometry":l=e.parse(k);break;case "Geometry":l=d.parse(k.data,a.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+k.type+'"');continue}l.uuid=k.uuid;void 0!==k.name&&(l.name=k.name);c[k.uuid]=l}return c}
V.TextureLoader=function(a){this.manager=void 0!==a?a:V.DefaultLoadingManager};V.TextureLoader.prototype={constructor:V.TextureLoader,load:function(a,b,c,d){var e=new V.Texture,g=new V.ImageLoader(this.manager);g.setCrossOrigin(this.crossOrigin);g.setPath(this.path);g.load(a,function(a){e.image=a;e.needsUpdate=!0;void 0!==b&&b(e)},c,d);return e},setCrossOrigin:function(a){this.crossOrigin=a},setPath:function(a){this.path=a}};V.CubeTextureLoader=function(a){this.manager=void 0!==a?a:V.DefaultLoadingManager};
V.CubeTextureLoader.prototype={constructor:V.CubeTextureLoader,load:function(a,b,c,d){function e(c){h.load(a[c],function(a){g.images[c]=a;k++;6===k&&(g.needsUpdate=!0,b&&b(g))},void 0,d)}var g=new V.CubeTexture,h=new V.ImageLoader(this.manager);h.setCrossOrigin(this.crossOrigin);h.setPath(this.path);var k=0;for(c=0;c<a.length;++c)e(c);return g},setCrossOrigin:function(a){this.crossOrigin=a},setPath:function(a){this.path=a}};
V.DataTextureLoader=V.BinaryTextureLoader=function(a){this.manager=void 0!==a?a:V.DefaultLoadingManager;this._parser=null};
V.BinaryTextureLoader.prototype={constructor:V.BinaryTextureLoader,load:function(a,b,c,d){var e=this,g=new V.DataTexture,h=new V.XHRLoader(this.manager);Db(h);h.load(a,function(a){if(a=e._parser(a))void 0!==a.image?g.image=a.image:void 0!==a.data&&(g.image.width=a.width,g.image.height=a.height,g.image.data=a.data),g.wrapS=void 0!==a.wrapS?a.wrapS:V.ClampToEdgeWrapping,g.wrapT=void 0!==a.wrapT?a.wrapT:V.ClampToEdgeWrapping,g.magFilter=void 0!==a.magFilter?a.magFilter:V.LinearFilter,g.minFilter=void 0!==
a.minFilter?a.minFilter:V.LinearMipMapLinearFilter,g.anisotropy=void 0!==a.anisotropy?a.anisotropy:1,void 0!==a.format&&(g.format=a.format),void 0!==a.type&&(g.type=a.type),void 0!==a.mipmaps&&(g.mipmaps=a.mipmaps),1===a.mipmapCount&&(g.minFilter=V.LinearFilter),g.needsUpdate=!0,b&&b(g,a)},c,d);return g}};V.CompressedTextureLoader=function(a){this.manager=void 0!==a?a:V.DefaultLoadingManager;this._parser=null};
V.CompressedTextureLoader.prototype={constructor:V.CompressedTextureLoader,load:function(a,b,c,d){function e(e){m.load(a[e],function(a){a=h._parser(a,!0);k[e]={width:a.width,height:a.height,format:a.format,mipmaps:a.mipmaps};g+=1;6===g&&(1===a.mipmapCount&&(l.minFilter=V.LinearFilter),l.format=a.format,l.needsUpdate=!0,b&&b(l))},c,d)}var g,h=this,k=[],l=new V.CompressedTexture;l.image=k;var m=new V.XHRLoader(this.manager);m.setPath(this.path);Db(m);if(Array.isArray(a))for(var p=g=0,r=a.length;p<r;++p)e(p);
else m.load(a,function(a){a=h._parser(a,!0);if(a.isCubemap)for(var c=a.mipmaps.length/a.mipmapCount,d=0;d<c;d++){k[d]={mipmaps:[]};for(var e=0;e<a.mipmapCount;e++)k[d].mipmaps.push(a.mipmaps[d*a.mipmapCount+e]),k[d].format=a.format,k[d].width=a.width,k[d].height=a.height}else l.image.width=a.width,l.image.height=a.height,l.mipmaps=a.mipmaps;1===a.mipmapCount&&(l.minFilter=V.LinearFilter);l.format=a.format;l.needsUpdate=!0;b&&b(l)},c,d);return l},setPath:function(a){this.path=a}};
V.Material=function(){Object.defineProperty(this,"id",{value:V.MaterialIdCount++});this.uuid=V.Math.generateUUID();this.name="";this.type="Material";this.lights=this.fog=!0;this.blending=V.NormalBlending;this.side=V.FrontSide;this.shading=V.SmoothShading;this.vertexColors=V.NoColors;this.opacity=1;this.transparent=!1;this.blendSrc=V.SrcAlphaFactor;this.blendDst=V.OneMinusSrcAlphaFactor;this.blendEquation=V.AddEquation;this.blendEquationAlpha=this.blendDstAlpha=this.blendSrcAlpha=null;this.depthFunc=
V.LessEqualDepth;this.depthWrite=this.depthTest=!0;this.clippingPlanes=null;this.clipShadows=!1;this.colorWrite=!0;this.precision=null;this.polygonOffset=!1;this.alphaTest=this.polygonOffsetUnits=this.polygonOffsetFactor=0;this.premultipliedAlpha=!1;this.overdraw=0;this._needsUpdate=this.visible=!0};
V.Material.prototype={constructor:V.Material,get needsUpdate(){return this._needsUpdate},set needsUpdate(a){!0===a&&this.update();this._needsUpdate=a},toJSON:function(a){function b(a){var b=[],c;for(c in a){var d=a[c];delete d.metadata;b.push(d)}return b}var c=void 0===a;c&&(a={textures:{},images:{}});var d={metadata:{version:4.4,type:"Material",generator:"Material.toJSON"}};d.uuid=this.uuid;d.type=this.type;""!==this.name&&(d.name=this.name);this.color instanceof V.Color&&(d.color=Fa(this.color));
.5!==this.roughness&&(d.roughness=this.roughness);.5!==this.metalness&&(d.metalness=this.metalness);this.emissive instanceof V.Color&&(d.emissive=Fa(this.emissive));this.specular instanceof V.Color&&(d.specular=Fa(this.specular));void 0!==this.shininess&&(d.shininess=this.shininess);this.map instanceof V.Texture&&(d.map=this.map.toJSON(a).uuid);this.alphaMap instanceof V.Texture&&(d.alphaMap=this.alphaMap.toJSON(a).uuid);this.lightMap instanceof V.Texture&&(d.lightMap=this.lightMap.toJSON(a).uuid);
this.bumpMap instanceof V.Texture&&(d.bumpMap=this.bumpMap.toJSON(a).uuid,d.bumpScale=this.bumpScale);this.normalMap instanceof V.Texture&&(d.normalMap=this.normalMap.toJSON(a).uuid,d.normalScale=this.normalScale.toArray());this.displacementMap instanceof V.Texture&&(d.displacementMap=this.displacementMap.toJSON(a).uuid,d.displacementScale=this.displacementScale,d.displacementBias=this.displacementBias);this.roughnessMap instanceof V.Texture&&(d.roughnessMap=this.roughnessMap.toJSON(a).uuid);this.metalnessMap instanceof
V.Texture&&(d.metalnessMap=this.metalnessMap.toJSON(a).uuid);this.emissiveMap instanceof V.Texture&&(d.emissiveMap=this.emissiveMap.toJSON(a).uuid);this.specularMap instanceof V.Texture&&(d.specularMap=this.specularMap.toJSON(a).uuid);this.envMap instanceof V.Texture&&(d.envMap=this.envMap.toJSON(a).uuid,d.reflectivity=this.reflectivity);void 0!==this.size&&(d.size=this.size);void 0!==this.sizeAttenuation&&(d.sizeAttenuation=this.sizeAttenuation);this.blending!==V.NormalBlending&&(d.blending=this.blending);
this.shading!==V.SmoothShading&&(d.shading=this.shading);this.side!==V.FrontSide&&(d.side=this.side);this.vertexColors!==V.NoColors&&(d.vertexColors=this.vertexColors);1>this.opacity&&(d.opacity=this.opacity);!0===this.transparent&&(d.transparent=this.transparent);0<this.alphaTest&&(d.alphaTest=this.alphaTest);!0===this.premultipliedAlpha&&(d.premultipliedAlpha=this.premultipliedAlpha);!0===this.wireframe&&(d.wireframe=this.wireframe);1<this.wireframeLinewidth&&(d.wireframeLinewidth=this.wireframeLinewidth);
c&&(c=b(a.textures),a=b(a.images),0<c.length&&(d.textures=c),0<a.length&&(d.images=a));return d},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.name=a.name;this.fog=a.fog;this.lights=a.lights;this.blending=a.blending;this.side=a.side;this.vertexColors=a.vertexColors;this.opacity=a.opacity;this.transparent=a.transparent;this.blendSrc=a.blendSrc;this.blendDst=a.blendDst;this.blendEquation=a.blendEquation;this.blendSrcAlpha=a.blendSrcAlpha;this.blendDstAlpha=a.blendDstAlpha;
this.blendEquationAlpha=a.blendEquationAlpha;this.depthFunc=a.depthFunc;this.depthTest=a.depthTest;this.depthWrite=a.depthWrite;this.colorWrite=a.colorWrite;this.precision=a.precision;this.polygonOffset=a.polygonOffset;this.polygonOffsetFactor=a.polygonOffsetFactor;this.polygonOffsetUnits=a.polygonOffsetUnits;this.alphaTest=a.alphaTest;this.premultipliedAlpha=a.premultipliedAlpha;this.overdraw=a.overdraw;this.visible=a.visible;this.clipShadows=a.clipShadows;a=a.clippingPlanes;var b=null;if(null!==
a)for(var c=a.length,b=Array(c),d=0;d!==c;++d)b[d]=a[d].clone();this.clippingPlanes=b;return this},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})}};
function Rb(a,b){if(void 0!==b)for(var c in b){var d=b[c];if(void 0===d)console.warn("THREE.Material: '"+c+"' parameter is undefined.");else{var e=a[c];void 0===e?console.warn("THREE."+a.type+": '"+c+"' is not a property of this material."):e instanceof V.Color?e.set(d):e instanceof V.Vector3&&d instanceof V.Vector3?e.copy(d):a[c]="overdraw"===c?Number(d):d}}}Object.assign(V.Material.prototype,V.EventDispatcher.prototype);V.MaterialIdCount=0;
V.LineBasicMaterial=function(a){V.Material.call(this);this.type="LineBasicMaterial";this.color=new V.Color(16777215);this.linewidth=1;this.linejoin=this.linecap="round";this.lights=!1;Rb(this,a)};V.LineBasicMaterial.prototype=Object.create(V.Material.prototype);V.LineBasicMaterial.prototype.constructor=V.LineBasicMaterial;
V.LineBasicMaterial.prototype.copy=function(a){V.Material.prototype.copy.call(this,a);this.color.copy(a.color);this.linewidth=a.linewidth;this.linecap=a.linecap;this.linejoin=a.linejoin;return this};V.LineDashedMaterial=function(a){V.Material.call(this);this.type="LineDashedMaterial";this.color=new V.Color(16777215);this.scale=this.linewidth=1;this.dashSize=3;this.gapSize=1;this.lights=!1;Rb(this,a)};V.LineDashedMaterial.prototype=Object.create(V.Material.prototype);
V.LineDashedMaterial.prototype.constructor=V.LineDashedMaterial;V.LineDashedMaterial.prototype.copy=function(a){V.Material.prototype.copy.call(this,a);this.color.copy(a.color);this.linewidth=a.linewidth;this.scale=a.scale;this.dashSize=a.dashSize;this.gapSize=a.gapSize;return this};
V.MeshBasicMaterial=function(a){V.Material.call(this);this.type="MeshBasicMaterial";this.color=new V.Color(16777215);this.aoMap=this.map=null;this.aoMapIntensity=1;this.envMap=this.alphaMap=this.specularMap=null;this.combine=V.MultiplyOperation;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.lights=this.morphTargets=this.skinning=!1;Rb(this,a)};V.MeshBasicMaterial.prototype=Object.create(V.Material.prototype);
V.MeshBasicMaterial.prototype.constructor=V.MeshBasicMaterial;
V.MeshBasicMaterial.prototype.copy=function(a){V.Material.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.combine=a.combine;this.reflectivity=a.reflectivity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;
this.skinning=a.skinning;this.morphTargets=a.morphTargets;return this};V.MeshDepthMaterial=function(a){V.Material.call(this);this.type="MeshDepthMaterial";this.depthPacking=V.BasicDepthPacking;this.morphTargets=this.skinning=!1;this.displacementMap=this.alphaMap=this.map=null;this.displacementScale=1;this.displacementBias=0;this.wireframe=!1;this.wireframeLinewidth=1;this.lights=this.fog=!1;Rb(this,a)};V.MeshDepthMaterial.prototype=Object.create(V.Material.prototype);
V.MeshDepthMaterial.prototype.constructor=V.MeshDepthMaterial;V.MeshDepthMaterial.prototype.copy=function(a){V.Material.prototype.copy.call(this,a);this.depthPacking=a.depthPacking;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.map=a.map;this.alphaMap=a.alphaMap;this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;return this};
V.MeshLambertMaterial=function(a){V.Material.call(this);this.type="MeshLambertMaterial";this.color=new V.Color(16777215);this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new V.Color(0);this.emissiveIntensity=1;this.envMap=this.alphaMap=this.specularMap=this.emissiveMap=null;this.combine=V.MultiplyOperation;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";
this.morphNormals=this.morphTargets=this.skinning=!1;Rb(this,a)};V.MeshLambertMaterial.prototype=Object.create(V.Material.prototype);V.MeshLambertMaterial.prototype.constructor=V.MeshLambertMaterial;
V.MeshLambertMaterial.prototype.copy=function(a){V.Material.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.emissive.copy(a.emissive);this.emissiveMap=a.emissiveMap;this.emissiveIntensity=a.emissiveIntensity;this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.combine=a.combine;this.reflectivity=a.reflectivity;this.refractionRatio=
a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;return this};V.MeshNormalMaterial=function(a){V.Material.call(this);this.type="MeshNormalMaterial";this.wireframe=!1;this.wireframeLinewidth=1;this.morphTargets=this.lights=this.fog=!1;Rb(this,a)};V.MeshNormalMaterial.prototype=Object.create(V.Material.prototype);
V.MeshNormalMaterial.prototype.constructor=V.MeshNormalMaterial;V.MeshNormalMaterial.prototype.copy=function(a){V.Material.prototype.copy.call(this,a);this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;return this};
V.MeshPhongMaterial=function(a){V.Material.call(this);this.type="MeshPhongMaterial";this.color=new V.Color(16777215);this.specular=new V.Color(1118481);this.shininess=30;this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new V.Color(0);this.emissiveIntensity=1;this.bumpMap=this.emissiveMap=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new V.Vector2(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.envMap=
this.alphaMap=this.specularMap=null;this.combine=V.MultiplyOperation;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.morphNormals=this.morphTargets=this.skinning=!1;Rb(this,a)};V.MeshPhongMaterial.prototype=Object.create(V.Material.prototype);V.MeshPhongMaterial.prototype.constructor=V.MeshPhongMaterial;
V.MeshPhongMaterial.prototype.copy=function(a){V.Material.prototype.copy.call(this,a);this.color.copy(a.color);this.specular.copy(a.specular);this.shininess=a.shininess;this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.emissive.copy(a.emissive);this.emissiveMap=a.emissiveMap;this.emissiveIntensity=a.emissiveIntensity;this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalScale.copy(a.normalScale);
this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.combine=a.combine;this.reflectivity=a.reflectivity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.skinning=a.skinning;this.morphTargets=a.morphTargets;
this.morphNormals=a.morphNormals;return this};
V.MeshStandardMaterial=function(a){V.Material.call(this);this.defines={STANDARD:""};this.type="MeshStandardMaterial";this.color=new V.Color(16777215);this.metalness=this.roughness=.5;this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new V.Color(0);this.emissiveIntensity=1;this.bumpMap=this.emissiveMap=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new V.Vector2(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=
0;this.envMap=this.alphaMap=this.metalnessMap=this.roughnessMap=null;this.envMapIntensity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.morphNormals=this.morphTargets=this.skinning=!1;Rb(this,a)};V.MeshStandardMaterial.prototype=Object.create(V.Material.prototype);V.MeshStandardMaterial.prototype.constructor=V.MeshStandardMaterial;
V.MeshStandardMaterial.prototype.copy=function(a){V.Material.prototype.copy.call(this,a);this.defines={STANDARD:""};this.color.copy(a.color);this.roughness=a.roughness;this.metalness=a.metalness;this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.emissive.copy(a.emissive);this.emissiveMap=a.emissiveMap;this.emissiveIntensity=a.emissiveIntensity;this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=
a.normalMap;this.normalScale.copy(a.normalScale);this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.roughnessMap=a.roughnessMap;this.metalnessMap=a.metalnessMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.envMapIntensity=a.envMapIntensity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;
this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;return this};V.MeshPhysicalMaterial=function(a){V.MeshStandardMaterial.call(this);this.defines={PHYSICAL:""};this.type="MeshPhysicalMaterial";this.reflectivity=.5;Rb(this,a)};V.MeshPhysicalMaterial.prototype=Object.create(V.MeshStandardMaterial.prototype);V.MeshPhysicalMaterial.prototype.constructor=V.MeshPhysicalMaterial;
V.MeshPhysicalMaterial.prototype.copy=function(a){V.MeshStandardMaterial.prototype.copy.call(this,a);this.defines={PHYSICAL:""};this.reflectivity=a.reflectivity;return this};V.MultiMaterial=function(a){this.uuid=V.Math.generateUUID();this.type="MultiMaterial";this.materials=a instanceof Array?a:[];this.visible=!0};
V.MultiMaterial.prototype={constructor:V.MultiMaterial,toJSON:function(a){for(var b={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type,materials:[]},c=this.materials,d=0,e=c.length;d<e;d++){var g=c[d].toJSON(a);delete g.metadata;b.materials.push(g)}b.visible=this.visible;return b},clone:function(){for(var a=new this.constructor,b=0;b<this.materials.length;b++)a.materials.push(this.materials[b].clone());a.visible=this.visible;return a}};
V.PointsMaterial=function(a){V.Material.call(this);this.type="PointsMaterial";this.color=new V.Color(16777215);this.map=null;this.size=1;this.sizeAttenuation=!0;this.lights=!1;Rb(this,a)};V.PointsMaterial.prototype=Object.create(V.Material.prototype);V.PointsMaterial.prototype.constructor=V.PointsMaterial;V.PointsMaterial.prototype.copy=function(a){V.Material.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.size=a.size;this.sizeAttenuation=a.sizeAttenuation;return this};
V.ShaderMaterial=function(a){V.Material.call(this);this.type="ShaderMaterial";this.defines={};this.uniforms={};this.vertexShader="void main() {\n\tgl_Position \x3d projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}";this.fragmentShader="void main() {\n\tgl_FragColor \x3d vec4( 1.0, 0.0, 0.0, 1.0 );\n}";this.linewidth=1;this.wireframe=!1;this.wireframeLinewidth=1;this.morphNormals=this.morphTargets=this.skinning=this.clipping=this.lights=this.fog=!1;this.extensions={derivatives:!1,fragDepth:!1,
drawBuffers:!1,shaderTextureLOD:!1};this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]};this.index0AttributeName=void 0;void 0!==a&&(void 0!==a.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),Rb(this,a))};V.ShaderMaterial.prototype=Object.create(V.Material.prototype);V.ShaderMaterial.prototype.constructor=V.ShaderMaterial;
V.ShaderMaterial.prototype.copy=function(a){V.Material.prototype.copy.call(this,a);this.fragmentShader=a.fragmentShader;this.vertexShader=a.vertexShader;this.uniforms=V.UniformsUtils.clone(a.uniforms);this.defines=a.defines;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.lights=a.lights;this.clipping=a.clipping;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;this.extensions=a.extensions;return this};
V.ShaderMaterial.prototype.toJSON=function(a){a=V.Material.prototype.toJSON.call(this,a);a.uniforms=this.uniforms;a.vertexShader=this.vertexShader;a.fragmentShader=this.fragmentShader;return a};V.RawShaderMaterial=function(a){V.ShaderMaterial.call(this,a);this.type="RawShaderMaterial"};V.RawShaderMaterial.prototype=Object.create(V.ShaderMaterial.prototype);V.RawShaderMaterial.prototype.constructor=V.RawShaderMaterial;
V.SpriteMaterial=function(a){V.Material.call(this);this.type="SpriteMaterial";this.color=new V.Color(16777215);this.map=null;this.rotation=0;this.lights=this.fog=!1;Rb(this,a)};V.SpriteMaterial.prototype=Object.create(V.Material.prototype);V.SpriteMaterial.prototype.constructor=V.SpriteMaterial;V.SpriteMaterial.prototype.copy=function(a){V.Material.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.rotation=a.rotation;return this};
V.ShadowMaterial=function(){V.ShaderMaterial.call(this,{uniforms:V.UniformsUtils.merge([V.UniformsLib.lights,{opacity:{value:1}}]),vertexShader:V.ShaderChunk.shadow_vert,fragmentShader:V.ShaderChunk.shadow_frag});this.transparent=this.lights=!0;Object.defineProperties(this,{opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(a){this.uniforms.opacity.value=a}}})};V.ShadowMaterial.prototype=Object.create(V.ShaderMaterial.prototype);
V.ShadowMaterial.prototype.constructor=V.ShadowMaterial;
V.Texture=function(a,b,c,d,e,g,h,k,l,m){Object.defineProperty(this,"id",{value:V.TextureIdCount++});this.uuid=V.Math.generateUUID();this.sourceFile=this.name="";this.image=void 0!==a?a:V.Texture.DEFAULT_IMAGE;this.mipmaps=[];this.mapping=void 0!==b?b:V.Texture.DEFAULT_MAPPING;this.wrapS=void 0!==c?c:V.ClampToEdgeWrapping;this.wrapT=void 0!==d?d:V.ClampToEdgeWrapping;this.magFilter=void 0!==e?e:V.LinearFilter;this.minFilter=void 0!==g?g:V.LinearMipMapLinearFilter;this.anisotropy=void 0!==l?l:1;this.format=
void 0!==h?h:V.RGBAFormat;this.type=void 0!==k?k:V.UnsignedByteType;this.offset=new V.Vector2(0,0);this.repeat=new V.Vector2(1,1);this.generateMipmaps=!0;this.premultiplyAlpha=!1;this.flipY=!0;this.unpackAlignment=4;this.encoding=void 0!==m?m:V.LinearEncoding;this.version=0;this.onUpdate=null};V.Texture.DEFAULT_IMAGE=void 0;V.Texture.DEFAULT_MAPPING=V.UVMapping;
V.Texture.prototype={constructor:V.Texture,set needsUpdate(a){!0===a&&this.version++},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.image=a.image;this.mipmaps=a.mipmaps.slice(0);this.mapping=a.mapping;this.wrapS=a.wrapS;this.wrapT=a.wrapT;this.magFilter=a.magFilter;this.minFilter=a.minFilter;this.anisotropy=a.anisotropy;this.format=a.format;this.type=a.type;this.offset.copy(a.offset);this.repeat.copy(a.repeat);this.generateMipmaps=a.generateMipmaps;this.premultiplyAlpha=
a.premultiplyAlpha;this.flipY=a.flipY;this.unpackAlignment=a.unpackAlignment;this.encoding=a.encoding;return this},toJSON:function(a){if(void 0!==a.textures[this.uuid])return a.textures[this.uuid];var b={metadata:{version:4.4,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy};
if(void 0!==this.image){var c=this.image;void 0===c.uuid&&(c.uuid=V.Math.generateUUID());if(void 0===a.images[c.uuid]){var d=a.images,e=c.uuid,g=c.uuid;if(void 0!==c.toDataURL)var h=c;else h=document.createElement("canvas"),h.width=c.width,h.height=c.height,h.getContext("2d").drawImage(c,0,0,c.width,c.height);h=2048<h.width||2048<h.height?h.toDataURL("image/jpeg",.6):h.toDataURL("image/png");d[e]={uuid:g,url:h}}b.image=c.uuid}return a.textures[this.uuid]=b},dispose:function(){this.dispatchEvent({type:"dispose"})},
transformUv:function(a){if(this.mapping===V.UVMapping){a.multiply(this.repeat);a.add(this.offset);if(0>a.x||1<a.x)switch(this.wrapS){case V.RepeatWrapping:a.x-=Math.floor(a.x);break;case V.ClampToEdgeWrapping:a.x=0>a.x?0:1;break;case V.MirroredRepeatWrapping:a.x=1===Math.abs(Math.floor(a.x)%2)?Math.ceil(a.x)-a.x:a.x-Math.floor(a.x)}if(0>a.y||1<a.y)switch(this.wrapT){case V.RepeatWrapping:a.y-=Math.floor(a.y);break;case V.ClampToEdgeWrapping:a.y=0>a.y?0:1;break;case V.MirroredRepeatWrapping:a.y=1===
Math.abs(Math.floor(a.y)%2)?Math.ceil(a.y)-a.y:a.y-Math.floor(a.y)}this.flipY&&(a.y=1-a.y)}}};Object.assign(V.Texture.prototype,V.EventDispatcher.prototype);V.TextureIdCount=0;V.DepthTexture=function(a,b,c,d,e,g,h,k,l){V.Texture.call(this,null,d,e,g,h,k,V.DepthFormat,c,l);this.image={width:a,height:b};this.type=void 0!==c?c:V.UnsignedShortType;this.magFilter=void 0!==h?h:V.NearestFilter;this.minFilter=void 0!==k?k:V.NearestFilter;this.generateMipmaps=this.flipY=!1};V.DepthTexture.prototype=Object.create(V.Texture.prototype);
V.DepthTexture.prototype.constructor=V.DepthTexture;V.CanvasTexture=function(a,b,c,d,e,g,h,k,l){V.Texture.call(this,a,b,c,d,e,g,h,k,l);this.needsUpdate=!0};V.CanvasTexture.prototype=Object.create(V.Texture.prototype);V.CanvasTexture.prototype.constructor=V.CanvasTexture;V.CubeTexture=function(a,b,c,d,e,g,h,k,l,m){a=void 0!==a?a:[];b=void 0!==b?b:V.CubeReflectionMapping;V.Texture.call(this,a,b,c,d,e,g,h,k,l,m);this.flipY=!1};V.CubeTexture.prototype=Object.create(V.Texture.prototype);
V.CubeTexture.prototype.constructor=V.CubeTexture;Object.defineProperty(V.CubeTexture.prototype,"images",{get:function(){return this.image},set:function(a){this.image=a}});V.CompressedTexture=function(a,b,c,d,e,g,h,k,l,m,p,r){V.Texture.call(this,null,g,h,k,l,m,d,e,p,r);this.image={width:b,height:c};this.mipmaps=a;this.generateMipmaps=this.flipY=!1};V.CompressedTexture.prototype=Object.create(V.Texture.prototype);V.CompressedTexture.prototype.constructor=V.CompressedTexture;
V.DataTexture=function(a,b,c,d,e,g,h,k,l,m,p,r){V.Texture.call(this,null,g,h,k,l,m,d,e,p,r);this.image={data:a,width:b,height:c};this.magFilter=void 0!==l?l:V.NearestFilter;this.minFilter=void 0!==m?m:V.NearestFilter;this.generateMipmaps=this.flipY=!1};V.DataTexture.prototype=Object.create(V.Texture.prototype);V.DataTexture.prototype.constructor=V.DataTexture;
V.VideoTexture=function(a,b,c,d,e,g,h,k,l){function m(){requestAnimationFrame(m);a.readyState>=a.HAVE_CURRENT_DATA&&(p.needsUpdate=!0)}V.Texture.call(this,a,b,c,d,e,g,h,k,l);this.generateMipmaps=!1;var p=this;m()};V.VideoTexture.prototype=Object.create(V.Texture.prototype);V.VideoTexture.prototype.constructor=V.VideoTexture;V.Group=function(){V.Object3D.call(this);this.type="Group"};V.Group.prototype=Object.assign(Object.create(V.Object3D.prototype),{constructor:V.Group});
V.Points=function(a,b){V.Object3D.call(this);this.type="Points";this.geometry=void 0!==a?a:new V.BufferGeometry;this.material=void 0!==b?b:new V.PointsMaterial({color:16777215*Math.random()})};
V.Points.prototype=Object.assign(Object.create(V.Object3D.prototype),{constructor:V.Points,raycast:function(){var a=new V.Matrix4,b=new V.Ray,c=new V.Sphere;return function(d,e){function g(a,c){var g=b.distanceSqToPoint(a);if(g<p){a=b.closestPointToPoint(a);a.applyMatrix4(l);var k=d.ray.origin.distanceTo(a);k<d.near||k>d.far||e.push({distance:k,distanceToRay:Math.sqrt(g),point:a.clone(),index:c,face:null,object:h})}}var h=this,k=this.geometry,l=this.matrixWorld,m=d.params.Points.threshold;null===
k.boundingSphere&&k.computeBoundingSphere();c.copy(k.boundingSphere);c.applyMatrix4(l);if(!1!==d.ray.intersectsSphere(c)){a.getInverse(l);b.copy(d.ray).applyMatrix4(a);var m=m/((this.scale.x+this.scale.y+this.scale.z)/3),p=m*m,m=new V.Vector3;if(k instanceof V.BufferGeometry){var r=k.index,k=k.attributes.position.array;if(null!==r)for(var n=r.array,r=0,t=n.length;r<t;r++){var q=n[r];m.fromArray(k,3*q);g(m,q)}else for(r=0,n=k.length/3;r<n;r++)m.fromArray(k,3*r),g(m,r)}else for(m=k.vertices,r=0,n=m.length;r<
n;r++)g(m[r],r)}}}(),clone:function(){return(new this.constructor(this.geometry,this.material)).copy(this)}});V.Line=function(a,b,c){if(1===c)return console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new V.LineSegments(a,b);V.Object3D.call(this);this.type="Line";this.geometry=void 0!==a?a:new V.BufferGeometry;this.material=void 0!==b?b:new V.LineBasicMaterial({color:16777215*Math.random()})};
V.Line.prototype=Object.assign(Object.create(V.Object3D.prototype),{constructor:V.Line,raycast:function(){var a=new V.Matrix4,b=new V.Ray,c=new V.Sphere;return function(d,e){var g=d.linePrecision,g=g*g,h=this.geometry,k=this.matrixWorld;null===h.boundingSphere&&h.computeBoundingSphere();c.copy(h.boundingSphere);c.applyMatrix4(k);if(!1!==d.ray.intersectsSphere(c)){a.getInverse(k);b.copy(d.ray).applyMatrix4(a);var l=new V.Vector3,m=new V.Vector3,k=new V.Vector3,p=new V.Vector3,r=this instanceof V.LineSegments?
2:1;if(h instanceof V.BufferGeometry){var n=h.index;var t=h.attributes.position.array;if(null!==n)for(var q=n.array,h=0,u=q.length-1;h<u;h+=r)n=q[h+1],l.fromArray(t,3*q[h]),m.fromArray(t,3*n),n=b.distanceSqToSegment(l,m,p,k),n>g||(p.applyMatrix4(this.matrixWorld),n=d.ray.origin.distanceTo(p),n<d.near||n>d.far||e.push({distance:n,point:k.clone().applyMatrix4(this.matrixWorld),index:h,face:null,faceIndex:null,object:this}));else for(h=0,u=t.length/3-1;h<u;h+=r)l.fromArray(t,3*h),m.fromArray(t,3*h+3),
n=b.distanceSqToSegment(l,m,p,k),n>g||(p.applyMatrix4(this.matrixWorld),n=d.ray.origin.distanceTo(p),n<d.near||n>d.far||e.push({distance:n,point:k.clone().applyMatrix4(this.matrixWorld),index:h,face:null,faceIndex:null,object:this}))}else if(h instanceof V.Geometry)for(l=h.vertices,m=l.length,h=0;h<m-1;h+=r)n=b.distanceSqToSegment(l[h],l[h+1],p,k),n>g||(p.applyMatrix4(this.matrixWorld),n=d.ray.origin.distanceTo(p),n<d.near||n>d.far||e.push({distance:n,point:k.clone().applyMatrix4(this.matrixWorld),
index:h,face:null,faceIndex:null,object:this}))}}}(),clone:function(){return(new this.constructor(this.geometry,this.material)).copy(this)}});V.LineSegments=function(a,b){V.Line.call(this,a,b);this.type="LineSegments"};V.LineSegments.prototype=Object.assign(Object.create(V.Line.prototype),{constructor:V.LineSegments});
V.Mesh=function(a,b){V.Object3D.call(this);this.type="Mesh";this.geometry=void 0!==a?a:new V.BufferGeometry;this.material=void 0!==b?b:new V.MeshBasicMaterial({color:16777215*Math.random()});this.drawMode=V.TrianglesDrawMode;this.updateMorphTargets()};
V.Mesh.prototype=Object.assign(Object.create(V.Object3D.prototype),{constructor:V.Mesh,setDrawMode:function(a){this.drawMode=a},updateMorphTargets:function(){if(void 0!==this.geometry.morphTargets&&0<this.geometry.morphTargets.length){this.morphTargetBase=-1;this.morphTargetInfluences=[];this.morphTargetDictionary={};for(var a=0,b=this.geometry.morphTargets.length;a<b;a++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[this.geometry.morphTargets[a].name]=a}},getMorphTargetIndexByName:function(a){if(void 0!==
this.morphTargetDictionary[a])return this.morphTargetDictionary[a];console.warn("THREE.Mesh.getMorphTargetIndexByName: morph target "+a+" does not exist. Returning 0.");return 0},raycast:function(){function a(a,b,c,d,e,g,h){V.Triangle.barycoordFromPoint(a,b,c,d,u);e.multiplyScalar(u.x);g.multiplyScalar(u.y);h.multiplyScalar(u.z);e.add(g).add(h);return e.clone()}function b(a,b,c,d,e,g,h){var k=a.material;if(null===(k.side===V.BackSide?c.intersectTriangle(g,e,d,!0,h):c.intersectTriangle(d,e,g,k.side!==
V.DoubleSide,h)))return null;y.copy(h);y.applyMatrix4(a.matrixWorld);c=b.ray.origin.distanceTo(y);return c<b.near||c>b.far?null:{distance:c,point:y.clone(),object:a}}function c(c,d,e,g,m,p,r,u){h.fromArray(g,3*p);k.fromArray(g,3*r);l.fromArray(g,3*u);if(c=b(c,d,e,h,k,l,v))m&&(n.fromArray(m,2*p),t.fromArray(m,2*r),q.fromArray(m,2*u),c.uv=a(v,h,k,l,n,t,q)),c.face=new V.Face3(p,r,u,V.Triangle.normal(h,k,l)),c.faceIndex=p;return c}var d=new V.Matrix4,e=new V.Ray,g=new V.Sphere,h=new V.Vector3,k=new V.Vector3,
l=new V.Vector3,m=new V.Vector3,p=new V.Vector3,r=new V.Vector3,n=new V.Vector2,t=new V.Vector2,q=new V.Vector2,u=new V.Vector3,v=new V.Vector3,y=new V.Vector3;return function(u,y){var x=this.geometry,z=this.material,A=this.matrixWorld;if(void 0!==z&&(null===x.boundingSphere&&x.computeBoundingSphere(),g.copy(x.boundingSphere),g.applyMatrix4(A),!1!==u.ray.intersectsSphere(g)&&(d.getInverse(A),e.copy(u.ray).applyMatrix4(d),null===x.boundingBox||!1!==e.intersectsBox(x.boundingBox)))){var D;if(x instanceof
V.BufferGeometry){var z=x.index,A=x.attributes,x=A.position.array;if(void 0!==A.uv)var F=A.uv.array;if(null!==z)for(var A=z.array,H=0,B=A.length;H<B;H+=3){z=A[H];var L=A[H+1];var K=A[H+2];if(D=c(this,u,e,x,F,z,L,K))D.faceIndex=Math.floor(H/3),y.push(D)}else for(H=0,B=x.length;H<B;H+=9)if(z=H/3,L=z+1,K=z+2,D=c(this,u,e,x,F,z,L,K))D.index=z,y.push(D)}else if(x instanceof V.Geometry){var A=z instanceof V.MultiMaterial,H=!0===A?z.materials:null,B=x.vertices;L=x.faces;K=x.faceVertexUvs[0];0<K.length&&
(F=K);for(var R=0,Q=L.length;R<Q;R++){var I=L[R];D=!0===A?H[I.materialIndex]:z;if(void 0!==D){K=B[I.a];var P=B[I.b];var O=B[I.c];if(!0===D.morphTargets){D=x.morphTargets;var G=this.morphTargetInfluences;h.set(0,0,0);k.set(0,0,0);l.set(0,0,0);for(var J=0,N=D.length;J<N;J++){var ba=G[J];if(0!==ba){var X=D[J].vertices;h.addScaledVector(m.subVectors(X[I.a],K),ba);k.addScaledVector(p.subVectors(X[I.b],P),ba);l.addScaledVector(r.subVectors(X[I.c],O),ba)}}h.add(K);k.add(P);l.add(O);K=h;P=k;O=l}if(D=b(this,
u,e,K,P,O,v))F&&(G=F[R],n.copy(G[0]),t.copy(G[1]),q.copy(G[2]),D.uv=a(v,K,P,O,n,t,q)),D.face=I,D.faceIndex=R,y.push(D)}}}}}}(),clone:function(){return(new this.constructor(this.geometry,this.material)).copy(this)}});V.Bone=function(a){V.Object3D.call(this);this.type="Bone";this.skin=a};V.Bone.prototype=Object.assign(Object.create(V.Object3D.prototype),{constructor:V.Bone,copy:function(a){V.Object3D.prototype.copy.call(this,a);this.skin=a.skin;return this}});
V.Skeleton=function(a,b,c){this.useVertexTexture=void 0!==c?c:!0;this.identityMatrix=new V.Matrix4;a=a||[];this.bones=a.slice(0);this.useVertexTexture?(a=Math.sqrt(4*this.bones.length),a=V.Math.nextPowerOfTwo(Math.ceil(a)),this.boneTextureHeight=this.boneTextureWidth=a=Math.max(a,4),this.boneMatrices=new Float32Array(this.boneTextureWidth*this.boneTextureHeight*4),this.boneTexture=new V.DataTexture(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,V.RGBAFormat,V.FloatType)):this.boneMatrices=
new Float32Array(16*this.bones.length);if(void 0===b)this.calculateInverses();else if(this.bones.length===b.length)this.boneInverses=b.slice(0);else for(console.warn("THREE.Skeleton bonInverses is the wrong length."),this.boneInverses=[],b=0,a=this.bones.length;b<a;b++)this.boneInverses.push(new V.Matrix4)};
Object.assign(V.Skeleton.prototype,{calculateInverses:function(){this.boneInverses=[];for(var a=0,b=this.bones.length;a<b;a++){var c=new V.Matrix4;this.bones[a]&&c.getInverse(this.bones[a].matrixWorld);this.boneInverses.push(c)}},pose:function(){for(var a,b=0,c=this.bones.length;b<c;b++)(a=this.bones[b])&&a.matrixWorld.getInverse(this.boneInverses[b]);b=0;for(c=this.bones.length;b<c;b++)if(a=this.bones[b])a.parent?(a.matrix.getInverse(a.parent.matrixWorld),a.matrix.multiply(a.matrixWorld)):a.matrix.copy(a.matrixWorld),
a.matrix.decompose(a.position,a.quaternion,a.scale)},update:function(){var a=new V.Matrix4;return function(){for(var b=0,c=this.bones.length;b<c;b++)Pa(a,this.bones[b]?this.bones[b].matrixWorld:this.identityMatrix,this.boneInverses[b]),a.toArray(this.boneMatrices,16*b);this.useVertexTexture&&(this.boneTexture.needsUpdate=!0)}}(),clone:function(){return new V.Skeleton(this.bones,this.boneInverses,this.useVertexTexture)}});
V.SkinnedMesh=function(a,b,c){V.Mesh.call(this,a,b);this.type="SkinnedMesh";this.bindMode="attached";this.bindMatrix=new V.Matrix4;this.bindMatrixInverse=new V.Matrix4;a=[];if(this.geometry&&void 0!==this.geometry.bones){for(var d,e=0,g=this.geometry.bones.length;e<g;++e)d=this.geometry.bones[e],b=new V.Bone(this),a.push(b),b.name=d.name,b.position.fromArray(d.pos),b.quaternion.fromArray(d.rotq),void 0!==d.scl&&b.scale.fromArray(d.scl);e=0;for(g=this.geometry.bones.length;e<g;++e)d=this.geometry.bones[e],
-1!==d.parent&&null!==d.parent&&void 0!==a[d.parent]?a[d.parent].add(a[e]):this.add(a[e])}this.normalizeSkinWeights();this.updateMatrixWorld(!0);this.bind(new V.Skeleton(a,void 0,c),this.matrixWorld)};
V.SkinnedMesh.prototype=Object.assign(Object.create(V.Mesh.prototype),{constructor:V.SkinnedMesh,bind:function(a,b){this.skeleton=a;void 0===b&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),b=this.matrixWorld);this.bindMatrix.copy(b);this.bindMatrixInverse.getInverse(b)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){if(this.geometry instanceof V.Geometry)for(var a=0;a<this.geometry.skinWeights.length;a++){var b=this.geometry.skinWeights[a];var c=1/b.lengthManhattan();
Infinity!==c?b.multiplyScalar(c):b.set(1,0,0,0)}else if(this.geometry instanceof V.BufferGeometry)for(var b=new V.Vector4,d=this.geometry.attributes.skinWeight,a=0;a<d.count;a++)b.x=d.getX(a),b.y=d.getY(a),b.z=d.getZ(a),b.w=d.getW(a),c=1/b.lengthManhattan(),Infinity!==c?b.multiplyScalar(c):b.set(1,0,0,0),d.setXYZW(a,b.x,b.y,b.z,b.w)},updateMatrixWorld:function(){V.Mesh.prototype.updateMatrixWorld.call(this,!0);"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===
this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh unrecognized bindMode: "+this.bindMode)},clone:function(){return(new this.constructor(this.geometry,this.material,this.useVertexTexture)).copy(this)}});V.LOD=function(){V.Object3D.call(this);this.type="LOD";Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})};
V.LOD.prototype=Object.assign(Object.create(V.Object3D.prototype),{constructor:V.LOD,copy:function(a){V.Object3D.prototype.copy.call(this,a,!1);a=a.levels;for(var b=0,c=a.length;b<c;b++){var d=a[b];this.addLevel(d.object.clone(),d.distance)}return this},addLevel:function(a,b){void 0===b&&(b=0);b=Math.abs(b);for(var c=this.levels,d=0;d<c.length&&!(b<c[d].distance);d++);c.splice(d,0,{distance:b,object:a});this.add(a)},getObjectForDistance:function(a){for(var b=this.levels,c=1,d=b.length;c<d&&!(a<b[c].distance);c++);
return b[c-1].object},raycast:function(){var a=new V.Vector3;return function(b,c){W(a,this.matrixWorld);this.getObjectForDistance(b.ray.origin.distanceTo(a)).raycast(b,c)}}(),update:function(){var a=new V.Vector3,b=new V.Vector3;return function(c){var d=this.levels;if(1<d.length){W(a,c.matrixWorld);W(b,this.matrixWorld);c=a.distanceTo(b);d[0].object.visible=!0;for(var e=1,g=d.length;e<g;e++)if(c>=d[e].distance)d[e-1].object.visible=!1,d[e].object.visible=!0;else break;for(;e<g;e++)d[e].object.visible=
!1}}}(),toJSON:function(a){a=V.Object3D.prototype.toJSON.call(this,a);a.object.levels=[];for(var b=this.levels,c=0,d=b.length;c<d;c++){var e=b[c];a.object.levels.push({object:e.object.uuid,distance:e.distance})}return a}});V.Sprite=function(a){V.Object3D.call(this);this.type="Sprite";this.material=void 0!==a?a:new V.SpriteMaterial};
V.Sprite.prototype=Object.assign(Object.create(V.Object3D.prototype),{constructor:V.Sprite,raycast:function(){var a=new V.Vector3;return function(b,c){W(a,this.matrixWorld);b=b.ray.distanceSqToPoint(a);b>this.scale.x*this.scale.y/4||c.push({distance:Math.sqrt(b),point:this.position,face:null,object:this})}}(),clone:function(){return(new this.constructor(this.material)).copy(this)}});
V.LensFlare=function(a,b,c,d,e){V.Object3D.call(this);this.lensFlares=[];this.positionScreen=new V.Vector3;this.customUpdateCallback=void 0;void 0!==a&&this.add(a,b,c,d,e)};
V.LensFlare.prototype=Object.assign(Object.create(V.Object3D.prototype),{constructor:V.LensFlare,copy:function(a){V.Object3D.prototype.copy.call(this,a);this.positionScreen.copy(a.positionScreen);this.customUpdateCallback=a.customUpdateCallback;for(var b=0,c=a.lensFlares.length;b<c;b++)this.lensFlares.push(a.lensFlares[b]);return this},add:function(a,b,c,d,e,g){void 0===b&&(b=-1);void 0===c&&(c=0);void 0===g&&(g=1);void 0===e&&(e=new V.Color(16777215));void 0===d&&(d=V.NormalBlending);c=Math.min(c,
Math.max(0,c));this.lensFlares.push({texture:a,size:b,distance:c,x:0,y:0,z:0,scale:1,rotation:0,opacity:g,color:e,blending:d})},updateLensFlares:function(){var a,b=this.lensFlares.length,c=2*-this.positionScreen.x,d=2*-this.positionScreen.y;for(a=0;a<b;a++){var e=this.lensFlares[a];e.x=this.positionScreen.x+c*e.distance;e.y=this.positionScreen.y+d*e.distance;e.wantedRotation=e.x*Math.PI*.25;e.rotation+=.25*(e.wantedRotation-e.rotation)}}});
V.Scene=function(){V.Object3D.call(this);this.type="Scene";this.overrideMaterial=this.fog=null;this.autoUpdate=!0};V.Scene.prototype=Object.create(V.Object3D.prototype);V.Scene.prototype.constructor=V.Scene;V.Scene.prototype.copy=function(a,b){V.Object3D.prototype.copy.call(this,a,b);null!==a.fog&&(this.fog=a.fog.clone());null!==a.overrideMaterial&&(this.overrideMaterial=a.overrideMaterial.clone());this.autoUpdate=a.autoUpdate;this.matrixAutoUpdate=a.matrixAutoUpdate;return this};
V.Fog=function(a,b,c){this.name="";this.color=new V.Color(a);this.near=void 0!==b?b:1;this.far=void 0!==c?c:1E3};V.Fog.prototype.clone=function(){return new V.Fog(Fa(this.color),this.near,this.far)};V.FogExp2=function(a,b){this.name="";this.color=new V.Color(a);this.density=void 0!==b?b:2.5E-4};V.FogExp2.prototype.clone=function(){return new V.FogExp2(Fa(this.color),this.density)};V.ShaderChunk={};V.ShaderChunk.alphamap_fragment="#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *\x3d texture2D( alphaMap, vUv ).g;\n#endif\n";
V.ShaderChunk.alphamap_pars_fragment="#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n";V.ShaderChunk.alphatest_fragment="#ifdef ALPHATEST\n\tif ( diffuseColor.a \x3c ALPHATEST ) discard;\n#endif\n";V.ShaderChunk.aomap_fragment="#ifdef USE_AOMAP\n\tfloat ambientOcclusion \x3d ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *\x3d ambientOcclusion;\n\t#if defined( USE_ENVMAP ) \x26\x26 defined( PHYSICAL )\n\t\tfloat dotNV \x3d saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *\x3d computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n";
V.ShaderChunk.aomap_pars_fragment="#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif";V.ShaderChunk.begin_vertex="\nvec3 transformed \x3d vec3( position );\n";V.ShaderChunk.beginnormal_vertex="\nvec3 objectNormal \x3d vec3( normal );\n";V.ShaderChunk.bsdfs="bool testLightInRange( const in float lightDistance, const in float cutoffDistance ) {\n\treturn any( bvec2( cutoffDistance \x3d\x3d 0.0, lightDistance \x3c cutoffDistance ) );\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t\tif( decayExponent \x3e 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\t\tfloat distanceFalloff \x3d 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\t\tfloat maxDistanceCutoffFactor \x3d pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t\t}\n\t\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel \x3d exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 \x3d pow2( alpha );\n\tfloat gl \x3d dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv \x3d dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 \x3d pow2( alpha );\n\tfloat gv \x3d dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl \x3d dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 \x3d pow2( alpha );\n\tfloat denom \x3d pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha \x3d pow2( roughness );\n\tvec3 halfDir \x3d normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL \x3d saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV \x3d saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH \x3d saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH \x3d saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F \x3d F_Schlick( specularColor, dotLH );\n\tfloat G \x3d G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D \x3d D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV \x3d saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 \x3d vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 \x3d vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r \x3d roughness * c0 + c1;\n\tfloat a004 \x3d min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB \x3d vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir \x3d normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH \x3d saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH \x3d saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F \x3d F_Schlick( specularColor, dotLH );\n\tfloat G \x3d G_BlinnPhong_Implicit( );\n\tfloat D \x3d D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n";
V.ShaderChunk.bumpmap_pars_fragment="#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx \x3d dFdx( vUv );\n\t\tvec2 dSTdy \x3d dFdy( vUv );\n\t\tfloat Hll \x3d bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx \x3d bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy \x3d bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX \x3d dFdx( surf_pos );\n\t\tvec3 vSigmaY \x3d dFdy( surf_pos );\n\t\tvec3 vN \x3d surf_norm;\n\t\tvec3 R1 \x3d cross( vSigmaY, vN );\n\t\tvec3 R2 \x3d cross( vN, vSigmaX );\n\t\tfloat fDet \x3d dot( vSigmaX, R1 );\n\t\tvec3 vGrad \x3d sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n";
V.ShaderChunk.clipping_planes_fragment="#if NUM_CLIPPING_PLANES \x3e 0\n\tfor ( int i \x3d 0; i \x3c NUM_CLIPPING_PLANES; ++ i ) {\n\t\tvec4 plane \x3d clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) \x3e plane.w ) discard;\n\t}\n#endif\n";V.ShaderChunk.clipping_planes_pars_fragment="#if NUM_CLIPPING_PLANES \x3e 0\n\t#if ! defined( PHYSICAL ) \x26\x26 ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n";
V.ShaderChunk.clipping_planes_pars_vertex="#if NUM_CLIPPING_PLANES \x3e 0 \x26\x26 ! defined( PHYSICAL ) \x26\x26 ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n";V.ShaderChunk.clipping_planes_vertex="#if NUM_CLIPPING_PLANES \x3e 0 \x26\x26 ! defined( PHYSICAL ) \x26\x26 ! defined( PHONG )\n\tvViewPosition \x3d - mvPosition.xyz;\n#endif\n";V.ShaderChunk.color_fragment="#ifdef USE_COLOR\n\tdiffuseColor.rgb *\x3d vColor;\n#endif";V.ShaderChunk.color_pars_fragment="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n";
V.ShaderChunk.color_pars_vertex="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif";V.ShaderChunk.color_vertex="#ifdef USE_COLOR\n\tvColor.xyz \x3d color.xyz;\n#endif";V.ShaderChunk.common="#define PI 3.14159265359\n#define PI2 6.28318530718\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 \x3d x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a \x3d 12.9898, b \x3d 78.233, c \x3d 43758.5453;\n\thighp float dt \x3d dot( uv.xy, vec2( a,b ) ), sn \x3d mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance \x3d dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\n";
V.ShaderChunk.cube_uv_reflection_fragment="#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection \x3d abs(direction);\n\tint face \x3d -1;\n\tif( absDirection.x \x3e absDirection.z ) {\n\t\tif(absDirection.x \x3e absDirection.y )\n\t\t\tface \x3d direction.x \x3e 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface \x3d direction.y \x3e 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z \x3e absDirection.y )\n\t\t\tface \x3d direction.z \x3e 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface \x3d direction.y \x3e 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale \x3d exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness \x3d dFdx(roughness);\n\tfloat dyRoughness \x3d dFdy(roughness);\n\tvec3 dx \x3d dFdx( vec * scale * dxRoughness );\n\tvec3 dy \x3d dFdy( vec * scale * dyRoughness );\n\tfloat d \x3d max( dot( dx, dx ), dot( dy, dy ) );\n\td \x3d clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel \x3d 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel \x3d roughnessLevel \x3e cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a \x3d 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed \x3d exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed \x3d vec2( 1.0 ) / exp2_packed;\n\tfloat powScale \x3d exp2_packed.x * exp2_packed.y;\n\tfloat scale \x3d rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset \x3d 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes \x3d mipLevel \x3d\x3d 0.0;\n\tscale \x3d  bRes \x26\x26 (scale \x3c a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face \x3d getFaceFromDirection(direction);\n\tfloat rcpPowScale \x3d 1.0 / powScale;\n\tif( face \x3d\x3d 0) {\n\t\tr \x3d vec3(direction.x, -direction.z, direction.y);\n\t\toffset \x3d vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y \x3d bRes \x26\x26 (offset.y \x3c 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face \x3d\x3d 1) {\n\t\tr \x3d vec3(direction.y, direction.x, direction.z);\n\t\toffset \x3d vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y \x3d bRes \x26\x26 (offset.y \x3c 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face \x3d\x3d 2) {\n\t\tr \x3d vec3(direction.z, direction.x, direction.y);\n\t\toffset \x3d vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y \x3d bRes \x26\x26 (offset.y \x3c 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face \x3d\x3d 3) {\n\t\tr \x3d vec3(direction.x, direction.z, direction.y);\n\t\toffset \x3d vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y \x3d bRes \x26\x26 (offset.y \x3c 2.0*a) ?  0.0 : offset.y;\n\t}\n\telse if( face \x3d\x3d 4) {\n\t\tr \x3d vec3(direction.y, direction.x, -direction.z);\n\t\toffset \x3d vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y \x3d bRes \x26\x26 (offset.y \x3c 2.0*a) ?  0.0 : offset.y;\n\t}\n\telse {\n\t\tr \x3d vec3(direction.z, -direction.x, direction.y);\n\t\toffset \x3d vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y \x3d bRes \x26\x26 (offset.y \x3c 2.0*a) ?  0.0 : offset.y;\n\t}\n\tr \x3d normalize(r);\n\tfloat texelOffset \x3d 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s \x3d ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base \x3d offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal \x3d roughness* cubeUV_maxLods3;\n\tfloat r1 \x3d floor(roughnessVal);\n\tfloat r2 \x3d r1 + 1.0;\n\tfloat t \x3d fract(roughnessVal);\n\tvec2 mipInfo \x3d MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s \x3d mipInfo.y;\n\tfloat level0 \x3d mipInfo.x;\n\tfloat level1 \x3d level0 + 1.0;\n\tlevel1 \x3d level1 \x3e 5.0 ? 5.0 : level1;\n\tlevel0 +\x3d min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 \x3d getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 \x3d envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 \x3d getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 \x3d envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result \x3d mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n";
V.ShaderChunk.defaultnormal_vertex="#ifdef FLIP_SIDED\n\tobjectNormal \x3d -objectNormal;\n#endif\nvec3 transformedNormal \x3d normalMatrix * objectNormal;\n";V.ShaderChunk.displacementmap_vertex="#ifdef USE_DISPLACEMENTMAP\n\ttransformed +\x3d normal * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n";V.ShaderChunk.displacementmap_pars_vertex="#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n";
V.ShaderChunk.emissivemap_fragment="#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor \x3d texture2D( emissiveMap, vUv );\n\temissiveColor.rgb \x3d emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *\x3d emissiveColor.rgb;\n#endif\n";V.ShaderChunk.emissivemap_pars_fragment="#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n";V.ShaderChunk.encodings_pars_fragment="\nvec4 LinearToLinear( in vec4 value ) {\n  return value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n  return vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n  return vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n  return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n  return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n  return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n  float maxComponent \x3d max( max( value.r, value.g ), value.b );\n  float fExp \x3d clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n  return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n  return vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n  float maxRGB \x3d max( value.x, max( value.g, value.b ) );\n  float M      \x3d clamp( maxRGB / maxRange, 0.0, 1.0 );\n  M            \x3d ceil( M * 255.0 ) / 255.0;\n  return vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n    return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n    float maxRGB \x3d max( value.x, max( value.g, value.b ) );\n    float D      \x3d max( maxRange / maxRGB, 1.0 );\n    D            \x3d min( floor( D ) / 255.0, 1.0 );\n    return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM \x3d mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n  vec3 Xp_Y_XYZp \x3d value.rgb * cLogLuvM;\n  Xp_Y_XYZp \x3d max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n  vec4 vResult;\n  vResult.xy \x3d Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n  float Le \x3d 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n  vResult.w \x3d fract(Le);\n  vResult.z \x3d (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n  return vResult;\n}\nconst mat3 cLogLuvInverseM \x3d mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n  float Le \x3d value.z * 255.0 + value.w;\n  vec3 Xp_Y_XYZp;\n  Xp_Y_XYZp.y \x3d exp2((Le - 127.0) / 2.0);\n  Xp_Y_XYZp.z \x3d Xp_Y_XYZp.y / value.y;\n  Xp_Y_XYZp.x \x3d value.x * Xp_Y_XYZp.z;\n  vec3 vRGB \x3d Xp_Y_XYZp.rgb * cLogLuvInverseM;\n  return vec4( max(vRGB, 0.0), 1.0 );\n}\n";
V.ShaderChunk.encodings_fragment="  gl_FragColor \x3d linearToOutputTexel( gl_FragColor );\n";V.ShaderChunk.envmap_fragment="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex \x3d normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal \x3d inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec \x3d reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec \x3d refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec \x3d vReflect;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tfloat flipNormal \x3d ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#else\n\t\tfloat flipNormal \x3d 1.0;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor \x3d textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\tsampleUV.y \x3d saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n\t\tsampleUV.x \x3d atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor \x3d texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\tvec3 reflectView \x3d flipNormal * normalize((viewMatrix * vec4( reflectVec, 0.0 )).xyz + vec3(0.0,0.0,1.0));\n\t\tvec4 envColor \x3d texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#endif\n\tenvColor \x3d envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight \x3d mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight \x3d mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight +\x3d envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n";
V.ShaderChunk.envmap_pars_fragment="#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntenstiy;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) \x26\x26 ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n";
V.ShaderChunk.envmap_pars_vertex="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n";V.ShaderChunk.envmap_vertex="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition \x3d worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex \x3d normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal \x3d inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect \x3d reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect \x3d refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n";
V.ShaderChunk.fog_fragment="#ifdef USE_FOG\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tfloat depth \x3d gl_FragDepthEXT / gl_FragCoord.w;\n\t#else\n\t\tfloat depth \x3d gl_FragCoord.z / gl_FragCoord.w;\n\t#endif\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor \x3d whiteCompliment( exp2( - fogDensity * fogDensity * depth * depth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor \x3d smoothstep( fogNear, fogFar, depth );\n\t#endif\n\tgl_FragColor.rgb \x3d mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n";
V.ShaderChunk.fog_pars_fragment="#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif";V.ShaderChunk.lightmap_fragment="#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse +\x3d PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n";V.ShaderChunk.lightmap_pars_fragment="#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif";
V.ShaderChunk.lights_lambert_vertex="vec3 diffuse \x3d vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position \x3d mvPosition.xyz;\ngeometry.normal \x3d normalize( transformedNormal );\ngeometry.viewDir \x3d normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position \x3d geometry.position;\nbackGeometry.normal \x3d -geometry.normal;\nbackGeometry.viewDir \x3d geometry.viewDir;\nvLightFront \x3d vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack \x3d vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS \x3e 0\n\tfor ( int i \x3d 0; i \x3c NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL \x3d dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse \x3d PI * directLight.color;\n\t\tvLightFront +\x3d saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack +\x3d saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS \x3e 0\n\tfor ( int i \x3d 0; i \x3c NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL \x3d dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse \x3d PI * directLight.color;\n\t\tvLightFront +\x3d saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack +\x3d saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS \x3e 0\n\tfor ( int i \x3d 0; i \x3c NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL \x3d dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse \x3d PI * directLight.color;\n\t\tvLightFront +\x3d saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack +\x3d saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS \x3e 0\n\tfor ( int i \x3d 0; i \x3c NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront +\x3d getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack +\x3d getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n";
V.ShaderChunk.lights_pars="uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance \x3d ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *\x3d PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS \x3e 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color \x3d directionalLight.color;\n\t\tdirectLight.direction \x3d directionalLight.direction;\n\t\tdirectLight.visible \x3d true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS \x3e 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector \x3d pointLight.position - geometry.position;\n\t\tdirectLight.direction \x3d normalize( lVector );\n\t\tfloat lightDistance \x3d length( lVector );\n\t\tif ( testLightInRange( lightDistance, pointLight.distance ) ) {\n\t\t\tdirectLight.color \x3d pointLight.color;\n\t\t\tdirectLight.color *\x3d punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\t\tdirectLight.visible \x3d true;\n\t\t} else {\n\t\t\tdirectLight.color \x3d vec3( 0.0 );\n\t\t\tdirectLight.visible \x3d false;\n\t\t}\n\t}\n#endif\n#if NUM_SPOT_LIGHTS \x3e 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector \x3d spotLight.position - geometry.position;\n\t\tdirectLight.direction \x3d normalize( lVector );\n\t\tfloat lightDistance \x3d length( lVector );\n\t\tfloat angleCos \x3d dot( directLight.direction, spotLight.direction );\n\t\tif ( all( bvec2( angleCos \x3e spotLight.coneCos, testLightInRange( lightDistance, spotLight.distance ) ) ) ) {\n\t\t\tfloat spotEffect \x3d smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color \x3d spotLight.color;\n\t\t\tdirectLight.color *\x3d spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible \x3d true;\n\t\t} else {\n\t\t\tdirectLight.color \x3d vec3( 0.0 );\n\t\t\tdirectLight.visible \x3d false;\n\t\t}\n\t}\n#endif\n#if NUM_HEMI_LIGHTS \x3e 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL \x3d dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight \x3d 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance \x3d mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *\x3d PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n#if defined( USE_ENVMAP ) \x26\x26 defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tfloat flipNormal \x3d ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#else\n\t\t\tfloat flipNormal \x3d 1.0;\n\t\t#endif\n\t\tvec3 worldNormal \x3d inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec \x3d flipNormal * vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor \x3d textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor \x3d textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb \x3d envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec \x3d flipNormal * vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor \x3d textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor \x3d vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar \x3d float( maxMIPLevel );\n\t\tfloat desiredMIPLevel \x3d maxMIPLevelScalar - 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec \x3d reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec \x3d refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tfloat flipNormal \x3d ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#else\n\t\t\tfloat flipNormal \x3d 1.0;\n\t\t#endif\n\t\treflectVec \x3d inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel \x3d getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec \x3d flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor \x3d textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor \x3d textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb \x3d envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec \x3d flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor \x3d textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y \x3d saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n\t\t\tsampleUV.x \x3d atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor \x3d texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor \x3d texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb \x3d envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView \x3d flipNormal * normalize((viewMatrix * vec4( reflectVec, 0.0 )).xyz + vec3(0.0,0.0,1.0));\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor \x3d texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor \x3d texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb \x3d envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n";
V.ShaderChunk.lights_phong_fragment="BlinnPhongMaterial material;\nmaterial.diffuseColor \x3d diffuseColor.rgb;\nmaterial.specularColor \x3d specular;\nmaterial.specularShininess \x3d shininess;\nmaterial.specularStrength \x3d specularStrength;\n";V.ShaderChunk.lights_phong_pars_fragment="varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL \x3d saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance \x3d dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *\x3d PI;\n\t#endif\n\treflectedLight.directDiffuse +\x3d irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular +\x3d irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse +\x3d irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n";
V.ShaderChunk.lights_physical_fragment="PhysicalMaterial material;\nmaterial.diffuseColor \x3d diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness \x3d clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor \x3d mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor \x3d mix( vec3( 0.16 * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#endif\n";V.ShaderChunk.lights_physical_pars_fragment="struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t#endif\n};\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL \x3d saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance \x3d dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *\x3d PI;\n\t#endif\n\treflectedLight.directDiffuse +\x3d irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular +\x3d irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse +\x3d irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectSpecular +\x3d radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n";
V.ShaderChunk.lights_template="\nGeometricContext geometry;\ngeometry.position \x3d - vViewPosition;\ngeometry.normal \x3d normal;\ngeometry.viewDir \x3d normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS \x3e 0 ) \x26\x26 defined( RE_Direct )\n\tPointLight pointLight;\n\tfor ( int i \x3d 0; i \x3c NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight \x3d pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *\x3d all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS \x3e 0 ) \x26\x26 defined( RE_Direct )\n\tSpotLight spotLight;\n\tfor ( int i \x3d 0; i \x3c NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight \x3d spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *\x3d all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS \x3e 0 ) \x26\x26 defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\tfor ( int i \x3d 0; i \x3c NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight \x3d directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *\x3d all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance \x3d getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance \x3d texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *\x3d PI;\n\t\t#endif\n\t\tirradiance +\x3d lightMapIrradiance;\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS \x3e 0 )\n\t\tfor ( int i \x3d 0; i \x3c NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance +\x3d getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n\t#if defined( USE_ENVMAP ) \x26\x26 defined( PHYSICAL ) \x26\x26 defined( ENVMAP_TYPE_CUBE_UV )\n\t \tirradiance +\x3d getLightProbeIndirectIrradiance( geometry, 8 );\n\t#endif\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( USE_ENVMAP ) \x26\x26 defined( RE_IndirectSpecular )\n\tvec3 radiance \x3d getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\n\tRE_IndirectSpecular( radiance, geometry, material, reflectedLight );\n#endif\n";
V.ShaderChunk.logdepthbuf_fragment="#if defined(USE_LOGDEPTHBUF) \x26\x26 defined(USE_LOGDEPTHBUF_EXT)\n\tgl_FragDepthEXT \x3d log2(vFragDepth) * logDepthBufFC * 0.5;\n#endif";V.ShaderChunk.logdepthbuf_pars_fragment="#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n";V.ShaderChunk.logdepthbuf_pars_vertex="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif";
V.ShaderChunk.logdepthbuf_vertex="#ifdef USE_LOGDEPTHBUF\n\tgl_Position.z \x3d log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth \x3d 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z \x3d (gl_Position.z - 1.0) * gl_Position.w;\n\t#endif\n#endif\n";V.ShaderChunk.map_fragment="#ifdef USE_MAP\n\tvec4 texelColor \x3d texture2D( map, vUv );\n\ttexelColor \x3d mapTexelToLinear( texelColor );\n\tdiffuseColor *\x3d texelColor;\n#endif\n";
V.ShaderChunk.map_pars_fragment="#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n";V.ShaderChunk.map_particle_fragment="#ifdef USE_MAP\n\tvec4 mapTexel \x3d texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\n\tdiffuseColor *\x3d mapTexelToLinear( mapTexel );\n#endif\n";V.ShaderChunk.map_particle_pars_fragment="#ifdef USE_MAP\n\tuniform vec4 offsetRepeat;\n\tuniform sampler2D map;\n#endif\n";V.ShaderChunk.metalnessmap_fragment="float metalnessFactor \x3d metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness \x3d texture2D( metalnessMap, vUv );\n\tmetalnessFactor *\x3d texelMetalness.r;\n#endif\n";
V.ShaderChunk.metalnessmap_pars_fragment="#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif";V.ShaderChunk.morphnormal_vertex="#ifdef USE_MORPHNORMALS\n\tobjectNormal +\x3d ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal +\x3d ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal +\x3d ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal +\x3d ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n";
V.ShaderChunk.morphtarget_pars_vertex="#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif";V.ShaderChunk.morphtarget_vertex="#ifdef USE_MORPHTARGETS\n\ttransformed +\x3d ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed +\x3d ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed +\x3d ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed +\x3d ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed +\x3d ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed +\x3d ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed +\x3d ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed +\x3d ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n";
V.ShaderChunk.normal_fragment="#ifdef FLAT_SHADED\n\tvec3 fdx \x3d vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy \x3d vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal \x3d normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal \x3d normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal \x3d normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n\t#endif\n#endif\n#ifdef USE_NORMALMAP\n\tnormal \x3d perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal \x3d perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n";
V.ShaderChunk.normalmap_pars_fragment="#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 \x3d dFdx( eye_pos.xyz );\n\t\tvec3 q1 \x3d dFdy( eye_pos.xyz );\n\t\tvec2 st0 \x3d dFdx( vUv.st );\n\t\tvec2 st1 \x3d dFdy( vUv.st );\n\t\tvec3 S \x3d normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T \x3d normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N \x3d normalize( surf_norm );\n\t\tvec3 mapN \x3d texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy \x3d normalScale * mapN.xy;\n\t\tmat3 tsn \x3d mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n";
V.ShaderChunk.packing="vec3 packNormalToRGB( const in vec3 normal ) {\n  return normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n  return 1.0 - 2.0 * rgb.xyz;\n}\nconst float PackUpscale \x3d 256. / 255.;const float UnpackDownscale \x3d 255. / 256.;\nconst vec3 PackFactors \x3d vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors \x3d UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 \x3d 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r \x3d vec4( fract( v * PackFactors ), v );\n\tr.yzw -\x3d r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthoDepth( const in float viewZ, const in float near, const in float far ) {\n  return ( viewZ + near ) / ( near - far );\n}\nfloat OrthoDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n  return linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n  return (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n  return ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n";
V.ShaderChunk.premultiplied_alpha_fragment="#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *\x3d gl_FragColor.a;\n#endif\n";V.ShaderChunk.project_vertex="#ifdef USE_SKINNING\n\tvec4 mvPosition \x3d modelViewMatrix * skinned;\n#else\n\tvec4 mvPosition \x3d modelViewMatrix * vec4( transformed, 1.0 );\n#endif\ngl_Position \x3d projectionMatrix * mvPosition;\n";V.ShaderChunk.roughnessmap_fragment="float roughnessFactor \x3d roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness \x3d texture2D( roughnessMap, vUv );\n\troughnessFactor *\x3d texelRoughness.r;\n#endif\n";
V.ShaderChunk.roughnessmap_pars_fragment="#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif";V.ShaderChunk.shadowmap_pars_fragment="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS \x3e 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS \x3e 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS \x3e 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset \x3d vec2( 0.0, 1.0 );\n\t\tvec2 texelSize \x3d vec2( 1.0 ) / size;\n\t\tvec2 centroidUV \x3d floor( uv * size + 0.5 ) / size;\n\t\tfloat lb \x3d texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt \x3d texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb \x3d texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt \x3d texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f \x3d fract( uv * size + 0.5 );\n\t\tfloat a \x3d mix( lb, lt, f.y );\n\t\tfloat b \x3d mix( rb, rt, f.y );\n\t\tfloat c \x3d mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tshadowCoord.xyz /\x3d shadowCoord.w;\n\t\tshadowCoord.z +\x3d shadowBias;\n\t\tbvec4 inFrustumVec \x3d bvec4 ( shadowCoord.x \x3e\x3d 0.0, shadowCoord.x \x3c\x3d 1.0, shadowCoord.y \x3e\x3d 0.0, shadowCoord.y \x3c\x3d 1.0 );\n\t\tbool inFrustum \x3d all( inFrustumVec );\n\t\tbvec2 frustumTestVec \x3d bvec2( inFrustum, shadowCoord.z \x3c\x3d 1.0 );\n\t\tbool frustumTest \x3d all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize \x3d vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 \x3d - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 \x3d - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 \x3d + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 \x3d + texelSize.y * shadowRadius;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize \x3d vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 \x3d - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 \x3d - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 \x3d + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 \x3d + texelSize.y * shadowRadius;\n\t\t\treturn (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn 1.0;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV \x3d abs( v );\n\t\tfloat scaleToCube \x3d 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *\x3d scaleToCube;\n\t\tv *\x3d scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar \x3d v.xy;\n\t\tfloat almostATexel \x3d 1.5 * texelSizeY;\n\t\tfloat almostOne \x3d 1.0 - almostATexel;\n\t\tif ( absV.z \x3e\x3d almostOne ) {\n\t\t\tif ( v.z \x3e 0.0 )\n\t\t\t\tplanar.x \x3d 4.0 - v.x;\n\t\t} else if ( absV.x \x3e\x3d almostOne ) {\n\t\t\tfloat signX \x3d sign( v.x );\n\t\t\tplanar.x \x3d v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y \x3e\x3d almostOne ) {\n\t\t\tfloat signY \x3d sign( v.y );\n\t\t\tplanar.x \x3d v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y \x3d v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tvec2 texelSize \x3d vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition \x3d shadowCoord.xyz;\n\t\tvec3 bd3D \x3d normalize( lightToPosition );\n\t\tfloat dp \x3d ( length( lightToPosition ) - shadowBias ) / 1000.0;\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset \x3d vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n";
V.ShaderChunk.shadowmap_pars_vertex="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS \x3e 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS \x3e 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS \x3e 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n";
V.ShaderChunk.shadowmap_vertex="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS \x3e 0\n\tfor ( int i \x3d 0; i \x3c NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] \x3d directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS \x3e 0\n\tfor ( int i \x3d 0; i \x3c NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] \x3d spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS \x3e 0\n\tfor ( int i \x3d 0; i \x3c NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] \x3d pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n";
V.ShaderChunk.shadowmask_pars_fragment="float getShadowMask() {\n\tfloat shadow \x3d 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS \x3e 0\n\tDirectionalLight directionalLight;\n\tfor ( int i \x3d 0; i \x3c NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight \x3d directionalLights[ i ];\n\t\tshadow *\x3d bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS \x3e 0\n\tSpotLight spotLight;\n\tfor ( int i \x3d 0; i \x3c NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight \x3d spotLights[ i ];\n\t\tshadow *\x3d bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS \x3e 0\n\tPointLight pointLight;\n\tfor ( int i \x3d 0; i \x3c NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight \x3d pointLights[ i ];\n\t\tshadow *\x3d bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n";
V.ShaderChunk.skinbase_vertex="#ifdef USE_SKINNING\n\tmat4 boneMatX \x3d getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY \x3d getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ \x3d getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW \x3d getBoneMatrix( skinIndex.w );\n#endif";V.ShaderChunk.skinning_pars_vertex="#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureWidth;\n\t\tuniform int boneTextureHeight;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j \x3d i * 4.0;\n\t\t\tfloat x \x3d mod( j, float( boneTextureWidth ) );\n\t\t\tfloat y \x3d floor( j / float( boneTextureWidth ) );\n\t\t\tfloat dx \x3d 1.0 / float( boneTextureWidth );\n\t\t\tfloat dy \x3d 1.0 / float( boneTextureHeight );\n\t\t\ty \x3d dy * ( y + 0.5 );\n\t\t\tvec4 v1 \x3d texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 \x3d texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 \x3d texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 \x3d texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone \x3d mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone \x3d boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n";
V.ShaderChunk.skinning_vertex="#ifdef USE_SKINNING\n\tvec4 skinVertex \x3d bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned \x3d vec4( 0.0 );\n\tskinned +\x3d boneMatX * skinVertex * skinWeight.x;\n\tskinned +\x3d boneMatY * skinVertex * skinWeight.y;\n\tskinned +\x3d boneMatZ * skinVertex * skinWeight.z;\n\tskinned +\x3d boneMatW * skinVertex * skinWeight.w;\n\tskinned  \x3d bindMatrixInverse * skinned;\n#endif\n";V.ShaderChunk.skinnormal_vertex="#ifdef USE_SKINNING\n\tmat4 skinMatrix \x3d mat4( 0.0 );\n\tskinMatrix +\x3d skinWeight.x * boneMatX;\n\tskinMatrix +\x3d skinWeight.y * boneMatY;\n\tskinMatrix +\x3d skinWeight.z * boneMatZ;\n\tskinMatrix +\x3d skinWeight.w * boneMatW;\n\tskinMatrix  \x3d bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal \x3d vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n";
V.ShaderChunk.specularmap_fragment="float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular \x3d texture2D( specularMap, vUv );\n\tspecularStrength \x3d texelSpecular.r;\n#else\n\tspecularStrength \x3d 1.0;\n#endif";V.ShaderChunk.specularmap_pars_fragment="#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif";V.ShaderChunk.tonemapping_fragment="#if defined( TONE_MAPPING )\n  gl_FragColor.rgb \x3d toneMapping( gl_FragColor.rgb );\n#endif\n";
V.ShaderChunk.tonemapping_pars_fragment="#define saturate(a) clamp( a, 0.0, 1.0 )\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n  return toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n  color *\x3d toneMappingExposure;\n  return saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n  color *\x3d toneMappingExposure;\n  return saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n  color *\x3d toneMappingExposure;\n  color \x3d max( vec3( 0.0 ), color - 0.004 );\n  return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n";
V.ShaderChunk.uv2_pars_fragment="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif";V.ShaderChunk.uv2_pars_vertex="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif";V.ShaderChunk.uv2_vertex="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 \x3d uv2;\n#endif";V.ShaderChunk.uv_pars_fragment="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif";
V.ShaderChunk.uv_pars_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform vec4 offsetRepeat;\n#endif\n";V.ShaderChunk.uv_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv \x3d uv * offsetRepeat.zw + offsetRepeat.xy;\n#endif";
V.ShaderChunk.worldpos_vertex="#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( PHYSICAL ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\t#ifdef USE_SKINNING\n\t\tvec4 worldPosition \x3d modelMatrix * skinned;\n\t#else\n\t\tvec4 worldPosition \x3d modelMatrix * vec4( transformed, 1.0 );\n\t#endif\n#endif\n";
V.UniformsUtils={merge:function(a){for(var b={},c=0;c<a.length;c++){var d=this.clone(a[c]),e;for(e in d)b[e]=d[e]}return b},clone:function(a){var b={},c;for(c in a){b[c]={};for(var d in a[c]){var e=a[c][d];b[c][d]=e instanceof V.Color||e instanceof V.Vector2||e instanceof V.Vector3||e instanceof V.Vector4||e instanceof V.Matrix3||e instanceof V.Matrix4||e instanceof V.Texture?e.clone():Array.isArray(e)?e.slice():e}}return b}};
V.UniformsLib={common:{diffuse:{type:"c",value:new V.Color(15658734)},opacity:{type:"1f",value:1},map:{type:"t",value:null},offsetRepeat:{type:"v4",value:new V.Vector4(0,0,1,1)},specularMap:{type:"t",value:null},alphaMap:{type:"t",value:null},envMap:{type:"t",value:null},flipEnvMap:{type:"1f",value:-1},reflectivity:{type:"1f",value:1},refractionRatio:{type:"1f",value:.98}},aomap:{aoMap:{type:"t",value:null},aoMapIntensity:{type:"1f",value:1}},lightmap:{lightMap:{type:"t",value:null},lightMapIntensity:{type:"1f",
value:1}},emissivemap:{emissiveMap:{type:"t",value:null}},bumpmap:{bumpMap:{type:"t",value:null},bumpScale:{type:"1f",value:1}},normalmap:{normalMap:{type:"t",value:null},normalScale:{type:"v2",value:new V.Vector2(1,1)}},displacementmap:{displacementMap:{type:"t",value:null},displacementScale:{type:"1f",value:1},displacementBias:{type:"1f",value:0}},roughnessmap:{roughnessMap:{type:"t",value:null}},metalnessmap:{metalnessMap:{type:"t",value:null}},fog:{fogDensity:{type:"1f",value:2.5E-4},fogNear:{type:"1f",
value:1},fogFar:{type:"1f",value:2E3},fogColor:{type:"c",value:new V.Color(16777215)}},lights:{ambientLightColor:{type:"3fv",value:[]},directionalLights:{type:"sa",value:[],properties:{direction:{type:"v3"},color:{type:"c"},shadow:{type:"1i"},shadowBias:{type:"1f"},shadowRadius:{type:"1f"},shadowMapSize:{type:"v2"}}},directionalShadowMap:{type:"tv",value:[]},directionalShadowMatrix:{type:"m4v",value:[]},spotLights:{type:"sa",value:[],properties:{color:{type:"c"},position:{type:"v3"},direction:{type:"v3"},
distance:{type:"1f"},coneCos:{type:"1f"},penumbraCos:{type:"1f"},decay:{type:"1f"},shadow:{type:"1i"},shadowBias:{type:"1f"},shadowRadius:{type:"1f"},shadowMapSize:{type:"v2"}}},spotShadowMap:{type:"tv",value:[]},spotShadowMatrix:{type:"m4v",value:[]},pointLights:{type:"sa",value:[],properties:{color:{type:"c"},position:{type:"v3"},decay:{type:"1f"},distance:{type:"1f"},shadow:{type:"1i"},shadowBias:{type:"1f"},shadowRadius:{type:"1f"},shadowMapSize:{type:"v2"}}},pointShadowMap:{type:"tv",value:[]},
pointShadowMatrix:{type:"m4v",value:[]},hemisphereLights:{type:"sa",value:[],properties:{direction:{type:"v3"},skyColor:{type:"c"},groundColor:{type:"c"}}}},points:{diffuse:{type:"c",value:new V.Color(15658734)},opacity:{type:"1f",value:1},size:{type:"1f",value:1},scale:{type:"1f",value:1},map:{type:"t",value:null},offsetRepeat:{type:"v4",value:new V.Vector4(0,0,1,1)}}};V.ShaderChunk.cube_frag="uniform samplerCube tCube;\nuniform float tFlip;\nvarying vec3 vWorldPosition;\n#include \x3ccommon\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main() {\n\t#include \x3cclipping_planes_fragment\x3e\n\tgl_FragColor \x3d textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\t#include \x3clogdepthbuf_fragment\x3e\n}\n";
V.ShaderChunk.cube_vert="varying vec3 vWorldPosition;\n#include \x3ccommon\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\tvWorldPosition \x3d transformDirection( position, modelMatrix );\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n}\n";V.ShaderChunk.depth_frag="#if DEPTH_PACKING \x3d\x3d 3200\n\tuniform float opacity;\n#endif\n#include \x3ccommon\x3e\n#include \x3cpacking\x3e\n#include \x3cuv_pars_fragment\x3e\n#include \x3cmap_pars_fragment\x3e\n#include \x3calphamap_pars_fragment\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main() {\n\t#include \x3cclipping_planes_fragment\x3e\n\tvec4 diffuseColor \x3d vec4( 1.0 );\n\t#if DEPTH_PACKING \x3d\x3d 3200\n\t\tdiffuseColor.a \x3d opacity;\n\t#endif\n\t#include \x3cmap_fragment\x3e\n\t#include \x3calphamap_fragment\x3e\n\t#include \x3calphatest_fragment\x3e\n\t#include \x3clogdepthbuf_fragment\x3e\n\t#if DEPTH_PACKING \x3d\x3d 3200\n\t\tgl_FragColor \x3d vec4( vec3( gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING \x3d\x3d 3201\n\t\tgl_FragColor \x3d packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n";
V.ShaderChunk.depth_vert="#include \x3ccommon\x3e\n#include \x3cuv_pars_vertex\x3e\n#include \x3cdisplacementmap_pars_vertex\x3e\n#include \x3cmorphtarget_pars_vertex\x3e\n#include \x3cskinning_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\t#include \x3cuv_vertex\x3e\n\t#include \x3cskinbase_vertex\x3e\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cdisplacementmap_vertex\x3e\n\t#include \x3cmorphtarget_vertex\x3e\n\t#include \x3cskinning_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n}\n";
V.ShaderChunk.distanceRGBA_frag="uniform vec3 lightPos;\nvarying vec4 vWorldPosition;\n#include \x3ccommon\x3e\n#include \x3cpacking\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main () {\n\t#include \x3cclipping_planes_fragment\x3e\n\tgl_FragColor \x3d packDepthToRGBA( length( vWorldPosition.xyz - lightPos.xyz ) / 1000.0 );\n}\n";V.ShaderChunk.distanceRGBA_vert="varying vec4 vWorldPosition;\n#include \x3ccommon\x3e\n#include \x3cmorphtarget_pars_vertex\x3e\n#include \x3cskinning_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\t#include \x3cskinbase_vertex\x3e\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cmorphtarget_vertex\x3e\n\t#include \x3cskinning_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3cworldpos_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n\tvWorldPosition \x3d worldPosition;\n}\n";
V.ShaderChunk.equirect_frag="uniform sampler2D tEquirect;\nuniform float tFlip;\nvarying vec3 vWorldPosition;\n#include \x3ccommon\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main() {\n\t#include \x3cclipping_planes_fragment\x3e\n\tvec3 direction \x3d normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y \x3d saturate( tFlip * direction.y * -0.5 + 0.5 );\n\tsampleUV.x \x3d atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor \x3d texture2D( tEquirect, sampleUV );\n\t#include \x3clogdepthbuf_fragment\x3e\n}\n";
V.ShaderChunk.equirect_vert="varying vec3 vWorldPosition;\n#include \x3ccommon\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\tvWorldPosition \x3d transformDirection( position, modelMatrix );\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n}\n";V.ShaderChunk.linedashed_frag="uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include \x3ccommon\x3e\n#include \x3ccolor_pars_fragment\x3e\n#include \x3cfog_pars_fragment\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main() {\n\t#include \x3cclipping_planes_fragment\x3e\n\tif ( mod( vLineDistance, totalSize ) \x3e dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight \x3d vec3( 0.0 );\n\tvec4 diffuseColor \x3d vec4( diffuse, opacity );\n\t#include \x3clogdepthbuf_fragment\x3e\n\t#include \x3ccolor_fragment\x3e\n\toutgoingLight \x3d diffuseColor.rgb;\n\tgl_FragColor \x3d vec4( outgoingLight, diffuseColor.a );\n\t#include \x3cpremultiplied_alpha_fragment\x3e\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3cencodings_fragment\x3e\n\t#include \x3cfog_fragment\x3e\n}\n";
V.ShaderChunk.linedashed_vert="uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include \x3ccommon\x3e\n#include \x3ccolor_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\t#include \x3ccolor_vertex\x3e\n\tvLineDistance \x3d scale * lineDistance;\n\tvec4 mvPosition \x3d modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position \x3d projectionMatrix * mvPosition;\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n}\n";
V.ShaderChunk.meshbasic_frag="uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include \x3ccommon\x3e\n#include \x3ccolor_pars_fragment\x3e\n#include \x3cuv_pars_fragment\x3e\n#include \x3cuv2_pars_fragment\x3e\n#include \x3cmap_pars_fragment\x3e\n#include \x3calphamap_pars_fragment\x3e\n#include \x3caomap_pars_fragment\x3e\n#include \x3cenvmap_pars_fragment\x3e\n#include \x3cfog_pars_fragment\x3e\n#include \x3cspecularmap_pars_fragment\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main() {\n\t#include \x3cclipping_planes_fragment\x3e\n\tvec4 diffuseColor \x3d vec4( diffuse, opacity );\n\t#include \x3clogdepthbuf_fragment\x3e\n\t#include \x3cmap_fragment\x3e\n\t#include \x3ccolor_fragment\x3e\n\t#include \x3calphamap_fragment\x3e\n\t#include \x3calphatest_fragment\x3e\n\t#include \x3cspecularmap_fragment\x3e\n\tReflectedLight reflectedLight;\n\treflectedLight.directDiffuse \x3d vec3( 0.0 );\n\treflectedLight.directSpecular \x3d vec3( 0.0 );\n\treflectedLight.indirectDiffuse \x3d diffuseColor.rgb;\n\treflectedLight.indirectSpecular \x3d vec3( 0.0 );\n\t#include \x3caomap_fragment\x3e\n\tvec3 outgoingLight \x3d reflectedLight.indirectDiffuse;\n\t#include \x3cenvmap_fragment\x3e\n\tgl_FragColor \x3d vec4( outgoingLight, diffuseColor.a );\n\t#include \x3cpremultiplied_alpha_fragment\x3e\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3cencodings_fragment\x3e\n\t#include \x3cfog_fragment\x3e\n}\n";
V.ShaderChunk.meshbasic_vert="#include \x3ccommon\x3e\n#include \x3cuv_pars_vertex\x3e\n#include \x3cuv2_pars_vertex\x3e\n#include \x3cenvmap_pars_vertex\x3e\n#include \x3ccolor_pars_vertex\x3e\n#include \x3cmorphtarget_pars_vertex\x3e\n#include \x3cskinning_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\t#include \x3cuv_vertex\x3e\n\t#include \x3cuv2_vertex\x3e\n\t#include \x3ccolor_vertex\x3e\n\t#include \x3cskinbase_vertex\x3e\n\t#ifdef USE_ENVMAP\n\t#include \x3cbeginnormal_vertex\x3e\n\t#include \x3cmorphnormal_vertex\x3e\n\t#include \x3cskinnormal_vertex\x3e\n\t#include \x3cdefaultnormal_vertex\x3e\n\t#endif\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cmorphtarget_vertex\x3e\n\t#include \x3cskinning_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cworldpos_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n\t#include \x3cenvmap_vertex\x3e\n}\n";
V.ShaderChunk.meshlambert_frag="uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include \x3ccommon\x3e\n#include \x3cpacking\x3e\n#include \x3ccolor_pars_fragment\x3e\n#include \x3cuv_pars_fragment\x3e\n#include \x3cuv2_pars_fragment\x3e\n#include \x3cmap_pars_fragment\x3e\n#include \x3calphamap_pars_fragment\x3e\n#include \x3caomap_pars_fragment\x3e\n#include \x3clightmap_pars_fragment\x3e\n#include \x3cemissivemap_pars_fragment\x3e\n#include \x3cenvmap_pars_fragment\x3e\n#include \x3cbsdfs\x3e\n#include \x3clights_pars\x3e\n#include \x3cfog_pars_fragment\x3e\n#include \x3cshadowmap_pars_fragment\x3e\n#include \x3cshadowmask_pars_fragment\x3e\n#include \x3cspecularmap_pars_fragment\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main() {\n\t#include \x3cclipping_planes_fragment\x3e\n\tvec4 diffuseColor \x3d vec4( diffuse, opacity );\n\tReflectedLight reflectedLight \x3d ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance \x3d emissive;\n\t#include \x3clogdepthbuf_fragment\x3e\n\t#include \x3cmap_fragment\x3e\n\t#include \x3ccolor_fragment\x3e\n\t#include \x3calphamap_fragment\x3e\n\t#include \x3calphatest_fragment\x3e\n\t#include \x3cspecularmap_fragment\x3e\n\t#include \x3cemissivemap_fragment\x3e\n\treflectedLight.indirectDiffuse \x3d getAmbientLightIrradiance( ambientLightColor );\n\t#include \x3clightmap_fragment\x3e\n\treflectedLight.indirectDiffuse *\x3d BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse \x3d ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse \x3d vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *\x3d BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include \x3caomap_fragment\x3e\n\tvec3 outgoingLight \x3d reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include \x3cenvmap_fragment\x3e\n\tgl_FragColor \x3d vec4( outgoingLight, diffuseColor.a );\n\t#include \x3cpremultiplied_alpha_fragment\x3e\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3cencodings_fragment\x3e\n\t#include \x3cfog_fragment\x3e\n}\n";
V.ShaderChunk.meshlambert_vert="#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include \x3ccommon\x3e\n#include \x3cuv_pars_vertex\x3e\n#include \x3cuv2_pars_vertex\x3e\n#include \x3cenvmap_pars_vertex\x3e\n#include \x3cbsdfs\x3e\n#include \x3clights_pars\x3e\n#include \x3ccolor_pars_vertex\x3e\n#include \x3cmorphtarget_pars_vertex\x3e\n#include \x3cskinning_pars_vertex\x3e\n#include \x3cshadowmap_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\t#include \x3cuv_vertex\x3e\n\t#include \x3cuv2_vertex\x3e\n\t#include \x3ccolor_vertex\x3e\n\t#include \x3cbeginnormal_vertex\x3e\n\t#include \x3cmorphnormal_vertex\x3e\n\t#include \x3cskinbase_vertex\x3e\n\t#include \x3cskinnormal_vertex\x3e\n\t#include \x3cdefaultnormal_vertex\x3e\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cmorphtarget_vertex\x3e\n\t#include \x3cskinning_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n\t#include \x3cworldpos_vertex\x3e\n\t#include \x3cenvmap_vertex\x3e\n\t#include \x3clights_lambert_vertex\x3e\n\t#include \x3cshadowmap_vertex\x3e\n}\n";
V.ShaderChunk.meshphong_frag="#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include \x3ccommon\x3e\n#include \x3cpacking\x3e\n#include \x3ccolor_pars_fragment\x3e\n#include \x3cuv_pars_fragment\x3e\n#include \x3cuv2_pars_fragment\x3e\n#include \x3cmap_pars_fragment\x3e\n#include \x3calphamap_pars_fragment\x3e\n#include \x3caomap_pars_fragment\x3e\n#include \x3clightmap_pars_fragment\x3e\n#include \x3cemissivemap_pars_fragment\x3e\n#include \x3cenvmap_pars_fragment\x3e\n#include \x3cfog_pars_fragment\x3e\n#include \x3cbsdfs\x3e\n#include \x3clights_pars\x3e\n#include \x3clights_phong_pars_fragment\x3e\n#include \x3cshadowmap_pars_fragment\x3e\n#include \x3cbumpmap_pars_fragment\x3e\n#include \x3cnormalmap_pars_fragment\x3e\n#include \x3cspecularmap_pars_fragment\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main() {\n\t#include \x3cclipping_planes_fragment\x3e\n\tvec4 diffuseColor \x3d vec4( diffuse, opacity );\n\tReflectedLight reflectedLight \x3d ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance \x3d emissive;\n\t#include \x3clogdepthbuf_fragment\x3e\n\t#include \x3cmap_fragment\x3e\n\t#include \x3ccolor_fragment\x3e\n\t#include \x3calphamap_fragment\x3e\n\t#include \x3calphatest_fragment\x3e\n\t#include \x3cspecularmap_fragment\x3e\n\t#include \x3cnormal_fragment\x3e\n\t#include \x3cemissivemap_fragment\x3e\n\t#include \x3clights_phong_fragment\x3e\n\t#include \x3clights_template\x3e\n\t#include \x3caomap_fragment\x3e\n\tvec3 outgoingLight \x3d reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include \x3cenvmap_fragment\x3e\n\tgl_FragColor \x3d vec4( outgoingLight, diffuseColor.a );\n\t#include \x3cpremultiplied_alpha_fragment\x3e\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3cencodings_fragment\x3e\n\t#include \x3cfog_fragment\x3e\n}\n";
V.ShaderChunk.meshphong_vert="#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include \x3ccommon\x3e\n#include \x3cuv_pars_vertex\x3e\n#include \x3cuv2_pars_vertex\x3e\n#include \x3cdisplacementmap_pars_vertex\x3e\n#include \x3cenvmap_pars_vertex\x3e\n#include \x3ccolor_pars_vertex\x3e\n#include \x3cmorphtarget_pars_vertex\x3e\n#include \x3cskinning_pars_vertex\x3e\n#include \x3cshadowmap_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\t#include \x3cuv_vertex\x3e\n\t#include \x3cuv2_vertex\x3e\n\t#include \x3ccolor_vertex\x3e\n\t#include \x3cbeginnormal_vertex\x3e\n\t#include \x3cmorphnormal_vertex\x3e\n\t#include \x3cskinbase_vertex\x3e\n\t#include \x3cskinnormal_vertex\x3e\n\t#include \x3cdefaultnormal_vertex\x3e\n#ifndef FLAT_SHADED\n\tvNormal \x3d normalize( transformedNormal );\n#endif\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cdisplacementmap_vertex\x3e\n\t#include \x3cmorphtarget_vertex\x3e\n\t#include \x3cskinning_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n\tvViewPosition \x3d - mvPosition.xyz;\n\t#include \x3cworldpos_vertex\x3e\n\t#include \x3cenvmap_vertex\x3e\n\t#include \x3cshadowmap_vertex\x3e\n}\n";
V.ShaderChunk.meshphysical_frag="#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\nuniform float envMapIntensity;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include \x3ccommon\x3e\n#include \x3cpacking\x3e\n#include \x3ccolor_pars_fragment\x3e\n#include \x3cuv_pars_fragment\x3e\n#include \x3cuv2_pars_fragment\x3e\n#include \x3cmap_pars_fragment\x3e\n#include \x3calphamap_pars_fragment\x3e\n#include \x3caomap_pars_fragment\x3e\n#include \x3clightmap_pars_fragment\x3e\n#include \x3cemissivemap_pars_fragment\x3e\n#include \x3cenvmap_pars_fragment\x3e\n#include \x3cfog_pars_fragment\x3e\n#include \x3cbsdfs\x3e\n#include \x3ccube_uv_reflection_fragment\x3e\n#include \x3clights_pars\x3e\n#include \x3clights_physical_pars_fragment\x3e\n#include \x3cshadowmap_pars_fragment\x3e\n#include \x3cbumpmap_pars_fragment\x3e\n#include \x3cnormalmap_pars_fragment\x3e\n#include \x3croughnessmap_pars_fragment\x3e\n#include \x3cmetalnessmap_pars_fragment\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main() {\n\t#include \x3cclipping_planes_fragment\x3e\n\tvec4 diffuseColor \x3d vec4( diffuse, opacity );\n\tReflectedLight reflectedLight \x3d ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance \x3d emissive;\n\t#include \x3clogdepthbuf_fragment\x3e\n\t#include \x3cmap_fragment\x3e\n\t#include \x3ccolor_fragment\x3e\n\t#include \x3calphamap_fragment\x3e\n\t#include \x3calphatest_fragment\x3e\n\t#include \x3cspecularmap_fragment\x3e\n\t#include \x3croughnessmap_fragment\x3e\n\t#include \x3cmetalnessmap_fragment\x3e\n\t#include \x3cnormal_fragment\x3e\n\t#include \x3cemissivemap_fragment\x3e\n\t#include \x3clights_physical_fragment\x3e\n\t#include \x3clights_template\x3e\n\t#include \x3caomap_fragment\x3e\n\tvec3 outgoingLight \x3d reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor \x3d vec4( outgoingLight, diffuseColor.a );\n\t#include \x3cpremultiplied_alpha_fragment\x3e\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3cencodings_fragment\x3e\n\t#include \x3cfog_fragment\x3e\n}\n";
V.ShaderChunk.meshphysical_vert="#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include \x3ccommon\x3e\n#include \x3cuv_pars_vertex\x3e\n#include \x3cuv2_pars_vertex\x3e\n#include \x3cdisplacementmap_pars_vertex\x3e\n#include \x3ccolor_pars_vertex\x3e\n#include \x3cmorphtarget_pars_vertex\x3e\n#include \x3cskinning_pars_vertex\x3e\n#include \x3cshadowmap_pars_vertex\x3e\n#include \x3cspecularmap_pars_fragment\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\t#include \x3cuv_vertex\x3e\n\t#include \x3cuv2_vertex\x3e\n\t#include \x3ccolor_vertex\x3e\n\t#include \x3cbeginnormal_vertex\x3e\n\t#include \x3cmorphnormal_vertex\x3e\n\t#include \x3cskinbase_vertex\x3e\n\t#include \x3cskinnormal_vertex\x3e\n\t#include \x3cdefaultnormal_vertex\x3e\n#ifndef FLAT_SHADED\n\tvNormal \x3d normalize( transformedNormal );\n#endif\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cdisplacementmap_vertex\x3e\n\t#include \x3cmorphtarget_vertex\x3e\n\t#include \x3cskinning_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n\tvViewPosition \x3d - mvPosition.xyz;\n\t#include \x3cworldpos_vertex\x3e\n\t#include \x3cshadowmap_vertex\x3e\n}\n";
V.ShaderChunk.normal_frag="uniform float opacity;\nvarying vec3 vNormal;\n#include \x3ccommon\x3e\n#include \x3cpacking\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main() {\n\t#include \x3cclipping_planes_fragment\x3e\n\tgl_FragColor \x3d vec4( packNormalToRGB( vNormal ), opacity );\n\t#include \x3clogdepthbuf_fragment\x3e\n}\n";V.ShaderChunk.normal_vert="varying vec3 vNormal;\n#include \x3ccommon\x3e\n#include \x3cmorphtarget_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\tvNormal \x3d normalize( normalMatrix * normal );\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cmorphtarget_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n}\n";
V.ShaderChunk.points_frag="uniform vec3 diffuse;\nuniform float opacity;\n#include \x3ccommon\x3e\n#include \x3ccolor_pars_fragment\x3e\n#include \x3cmap_particle_pars_fragment\x3e\n#include \x3cfog_pars_fragment\x3e\n#include \x3cshadowmap_pars_fragment\x3e\n#include \x3clogdepthbuf_pars_fragment\x3e\n#include \x3cclipping_planes_pars_fragment\x3e\nvoid main() {\n\t#include \x3cclipping_planes_fragment\x3e\n\tvec3 outgoingLight \x3d vec3( 0.0 );\n\tvec4 diffuseColor \x3d vec4( diffuse, opacity );\n\t#include \x3clogdepthbuf_fragment\x3e\n\t#include \x3cmap_particle_fragment\x3e\n\t#include \x3ccolor_fragment\x3e\n\t#include \x3calphatest_fragment\x3e\n\toutgoingLight \x3d diffuseColor.rgb;\n\tgl_FragColor \x3d vec4( outgoingLight, diffuseColor.a );\n\t#include \x3cpremultiplied_alpha_fragment\x3e\n\t#include \x3ctonemapping_fragment\x3e\n\t#include \x3cencodings_fragment\x3e\n\t#include \x3cfog_fragment\x3e\n}\n";
V.ShaderChunk.points_vert="uniform float size;\nuniform float scale;\n#include \x3ccommon\x3e\n#include \x3ccolor_pars_vertex\x3e\n#include \x3cshadowmap_pars_vertex\x3e\n#include \x3clogdepthbuf_pars_vertex\x3e\n#include \x3cclipping_planes_pars_vertex\x3e\nvoid main() {\n\t#include \x3ccolor_vertex\x3e\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize \x3d size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize \x3d size;\n\t#endif\n\t#include \x3clogdepthbuf_vertex\x3e\n\t#include \x3cclipping_planes_vertex\x3e\n\t#include \x3cworldpos_vertex\x3e\n\t#include \x3cshadowmap_vertex\x3e\n}\n";
V.ShaderChunk.shadow_frag="uniform float opacity;\n#include \x3ccommon\x3e\n#include \x3cpacking\x3e\n#include \x3cbsdfs\x3e\n#include \x3clights_pars\x3e\n#include \x3cshadowmap_pars_fragment\x3e\n#include \x3cshadowmask_pars_fragment\x3e\nvoid main() {\n\tgl_FragColor \x3d vec4( 0.0, 0.0, 0.0, opacity * ( 1.0  - getShadowMask() ) );\n}\n";V.ShaderChunk.shadow_vert="#include \x3cshadowmap_pars_vertex\x3e\nvoid main() {\n\t#include \x3cbegin_vertex\x3e\n\t#include \x3cproject_vertex\x3e\n\t#include \x3cworldpos_vertex\x3e\n\t#include \x3cshadowmap_vertex\x3e\n}\n";
V.ShaderLib={basic:{uniforms:V.UniformsUtils.merge([V.UniformsLib.common,V.UniformsLib.aomap,V.UniformsLib.fog]),vertexShader:V.ShaderChunk.meshbasic_vert,fragmentShader:V.ShaderChunk.meshbasic_frag},lambert:{uniforms:V.UniformsUtils.merge([V.UniformsLib.common,V.UniformsLib.aomap,V.UniformsLib.lightmap,V.UniformsLib.emissivemap,V.UniformsLib.fog,V.UniformsLib.lights,{emissive:{type:"c",value:new V.Color(0)}}]),vertexShader:V.ShaderChunk.meshlambert_vert,fragmentShader:V.ShaderChunk.meshlambert_frag},
phong:{uniforms:V.UniformsUtils.merge([V.UniformsLib.common,V.UniformsLib.aomap,V.UniformsLib.lightmap,V.UniformsLib.emissivemap,V.UniformsLib.bumpmap,V.UniformsLib.normalmap,V.UniformsLib.displacementmap,V.UniformsLib.fog,V.UniformsLib.lights,{emissive:{type:"c",value:new V.Color(0)},specular:{type:"c",value:new V.Color(1118481)},shininess:{type:"1f",value:30}}]),vertexShader:V.ShaderChunk.meshphong_vert,fragmentShader:V.ShaderChunk.meshphong_frag},standard:{uniforms:V.UniformsUtils.merge([V.UniformsLib.common,
V.UniformsLib.aomap,V.UniformsLib.lightmap,V.UniformsLib.emissivemap,V.UniformsLib.bumpmap,V.UniformsLib.normalmap,V.UniformsLib.displacementmap,V.UniformsLib.roughnessmap,V.UniformsLib.metalnessmap,V.UniformsLib.fog,V.UniformsLib.lights,{emissive:{type:"c",value:new V.Color(0)},roughness:{type:"1f",value:.5},metalness:{type:"1f",value:0},envMapIntensity:{type:"1f",value:1}}]),vertexShader:V.ShaderChunk.meshphysical_vert,fragmentShader:V.ShaderChunk.meshphysical_frag},points:{uniforms:V.UniformsUtils.merge([V.UniformsLib.points,
V.UniformsLib.fog]),vertexShader:V.ShaderChunk.points_vert,fragmentShader:V.ShaderChunk.points_frag},dashed:{uniforms:V.UniformsUtils.merge([V.UniformsLib.common,V.UniformsLib.fog,{scale:{type:"1f",value:1},dashSize:{type:"1f",value:1},totalSize:{type:"1f",value:2}}]),vertexShader:V.ShaderChunk.linedashed_vert,fragmentShader:V.ShaderChunk.linedashed_frag},depth:{uniforms:V.UniformsUtils.merge([V.UniformsLib.common,V.UniformsLib.displacementmap]),vertexShader:V.ShaderChunk.depth_vert,fragmentShader:V.ShaderChunk.depth_frag},
normal:{uniforms:{opacity:{type:"1f",value:1}},vertexShader:V.ShaderChunk.normal_vert,fragmentShader:V.ShaderChunk.normal_frag},cube:{uniforms:{tCube:{type:"t",value:null},tFlip:{type:"1f",value:-1}},vertexShader:V.ShaderChunk.cube_vert,fragmentShader:V.ShaderChunk.cube_frag},equirect:{uniforms:{tEquirect:{type:"t",value:null},tFlip:{type:"1f",value:-1}},vertexShader:V.ShaderChunk.equirect_vert,fragmentShader:V.ShaderChunk.equirect_frag},distanceRGBA:{uniforms:{lightPos:{type:"v3",value:new V.Vector3}},
vertexShader:V.ShaderChunk.distanceRGBA_vert,fragmentShader:V.ShaderChunk.distanceRGBA_frag}};V.ShaderLib.physical={uniforms:V.UniformsUtils.merge([V.ShaderLib.standard.uniforms,{}]),vertexShader:V.ShaderChunk.meshphysical_vert,fragmentShader:V.ShaderChunk.meshphysical_frag};
V.WebGLRenderer=function(a){function b(a,b,c,d){!0===P&&(a*=d,b*=d,c*=d);M.clearColor(a,b,c,d)}function c(){M.init();M.scissor(db.copy(Hb).multiplyScalar(pa));M.viewport(Ta.copy(Ua).multiplyScalar(pa));b(qa.r,qa.g,qa.b,Ja)}function d(){Aa=Ba=null;Va="";ma=-1;M.reset()}function e(a){a.preventDefault();d();c();U.clear()}function g(a){a=a.target;a.removeEventListener("dispose",g);a:{var b=U.get(a);if(a.image&&b.__image__webglTextureCube)w.deleteTexture(b.__image__webglTextureCube);else{if(void 0===b.__webglInit)break a;
w.deleteTexture(b.__webglTexture)}U.delete(a)}Ka.textures--}function h(a){a=a.target;a.removeEventListener("dispose",h);var b=U.get(a),c=U.get(a.texture);if(a){void 0!==c.__webglTexture&&w.deleteTexture(c.__webglTexture);a.depthTexture&&a.depthTexture.dispose();if(a instanceof V.WebGLRenderTargetCube)for(c=0;6>c;c++)w.deleteFramebuffer(b.__webglFramebuffer[c]),b.__webglDepthbuffer&&w.deleteRenderbuffer(b.__webglDepthbuffer[c]);else w.deleteFramebuffer(b.__webglFramebuffer),b.__webglDepthbuffer&&w.deleteRenderbuffer(b.__webglDepthbuffer);
U.delete(a.texture);U.delete(a)}Ka.textures--}function k(a){a=a.target;a.removeEventListener("dispose",k);l(a);U.delete(a)}function l(a){var b=U.get(a).program;a.program=void 0;void 0!==b&&Wa.releaseProgram(b)}function m(a,b){return Math.abs(b[0])-Math.abs(a[0])}function p(a,b){return a.object.renderOrder!==b.object.renderOrder?a.object.renderOrder-b.object.renderOrder:a.material.id!==b.material.id?a.material.id-b.material.id:a.z!==b.z?a.z-b.z:a.id-b.id}function r(a,b){return a.object.renderOrder!==
b.object.renderOrder?a.object.renderOrder-b.object.renderOrder:a.z!==b.z?b.z-a.z:a.id-b.id}function n(a,b,c,d){if(c.transparent){var e=ba;var g=++X}else e=J,g=++N;g=e[g];void 0!==g?(g.id=a.id,g.object=a,g.geometry=b,g.material=c,g.z=ia.z,g.group=d):(g={id:a.id,object:a,geometry:b,material:c,z:ia.z,group:d},e.push(g))}function t(a){if(!pc.intersectsSphere(a))return!1;var b=sa.numPlanes;if(0===b)return!0;var c=ca.clippingPlanes,d=a.center;a=-a.radius;var e=0;do if(c[e].distanceToPoint(d)<a)return!1;
while(++e!==b);return!0}function q(a,b){if(!1!==a.visible){if(a.layers.test(b.layers))if(a instanceof V.Light)G.push(a);else if(a instanceof V.Sprite){var c;if(c=!1!==a.frustumCulled)La.center.set(0,0,0),La.radius=.7071067811865476,La.applyMatrix4(a.matrixWorld),c=!0!==t(La);c||fa.push(a)}else if(a instanceof V.LensFlare)Ib.push(a);else if(a instanceof V.ImmediateRenderObject)!0===ca.sortObjects&&(W(ia,a.matrixWorld),Qa(ia,eb)),n(a,null,a.material,null);else if(a instanceof V.Mesh||a instanceof V.Line||
a instanceof V.Points)if(a instanceof V.SkinnedMesh&&a.skeleton.update(),(c=!1===a.frustumCulled)||(c=a.geometry,null===c.boundingSphere&&c.computeBoundingSphere(),La.copy(c.boundingSphere).applyMatrix4(a.matrixWorld),c=!0===t(La)),c){var d=a.material;if(!0===d.visible)if(!0===ca.sortObjects&&(W(ia,a.matrixWorld),Qa(ia,eb)),c=Xa.update(a),d instanceof V.MultiMaterial)for(var e=c.groups,g=d.materials,d=0,h=e.length;d<h;d++){var k=e[d],l=g[k.materialIndex];!0===l.visible&&n(a,c,l,k)}else n(a,c,d,null)}a=
a.children;d=0;for(h=a.length;d<h;d++)q(a[d],b)}}function u(a,b,c,d){for(var e=0,g=a.length;e<g;e++){var h=a[e],k=h.object,l=h.geometry,m=void 0===d?h.material:d,h=h.group;Pa(k.modelViewMatrix,b.matrixWorldInverse,k.matrixWorld);cb(k.normalMatrix,k.modelViewMatrix);if(k instanceof V.ImmediateRenderObject){v(m);var n=y(b,c,m,k);Va="";k.render(function(a){ca.renderBufferImmediate(a,n,m)})}else ca.renderBufferDirect(b,c,l,m,k,h)}}function v(a){a.side!==V.DoubleSide?M.enable(w.CULL_FACE):M.disable(w.CULL_FACE);
M.setFlipSided(a.side===V.BackSide);!0===a.transparent?M.setBlending(a.blending,a.blendEquation,a.blendSrc,a.blendDst,a.blendEquationAlpha,a.blendSrcAlpha,a.blendDstAlpha,a.premultipliedAlpha):M.setBlending(V.NoBlending);M.setDepthFunc(a.depthFunc);M.setDepthTest(a.depthTest);M.setDepthWrite(a.depthWrite);M.setColorWrite(a.colorWrite);M.setPolygonOffset(a.polygonOffset,a.polygonOffsetFactor,a.polygonOffsetUnits)}function y(a,b,c,d){Jb=0;var e=U.get(c);fb&&((Kb||a!==Aa)&&sa.setState(c.clippingPlanes,
c.clipShadows,a,e,a===Aa&&c.id===ma),void 0!==e.numClippingPlanes&&e.numClippingPlanes!==sa.numPlanes&&(c.needsUpdate=!0));void 0===e.program&&(c.needsUpdate=!0);void 0!==e.lightsHash&&e.lightsHash!==S.hash&&(c.needsUpdate=!0);if(c.needsUpdate){a:{var g=U.get(c),h=Wa.getParameters(c,S,b,sa.numPlanes,d),m=Wa.getProgramCode(c,h),n=g.program,p=!0;if(void 0===n)c.addEventListener("dispose",k);else if(n.code!==m)l(c);else{if(void 0!==h.shaderID)break a;p=!1}p&&(h.shaderID?(n=V.ShaderLib[h.shaderID],g.__webglShader=
{name:c.type,uniforms:V.UniformsUtils.clone(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader}):g.__webglShader={name:c.type,uniforms:c.uniforms,vertexShader:c.vertexShader,fragmentShader:c.fragmentShader},c.__webglShader=g.__webglShader,n=Wa.acquireProgram(c,h,m),g.program=n,c.program=n);h=n.getAttributes();if(c.morphTargets)for(m=c.numSupportedMorphTargets=0;m<ca.maxMorphTargets;m++)0<=h["morphTarget"+m]&&c.numSupportedMorphTargets++;if(c.morphNormals)for(m=c.numSupportedMorphNormals=
0;m<ca.maxMorphNormals;m++)0<=h["morphNormal"+m]&&c.numSupportedMorphNormals++;h=g.__webglShader.uniforms;(c instanceof V.ShaderMaterial||c instanceof V.RawShaderMaterial)&&!0!==c.clipping||(g.numClippingPlanes=sa.numPlanes,h.clippingPlanes=sa.uniform);c.lights&&(g.lightsHash=S.hash,h.ambientLightColor.value=S.ambient,h.directionalLights.value=S.directional,h.spotLights.value=S.spot,h.pointLights.value=S.point,h.hemisphereLights.value=S.hemi,h.directionalShadowMap.value=S.directionalShadowMap,h.directionalShadowMatrix.value=
S.directionalShadowMatrix,h.spotShadowMap.value=S.spotShadowMap,h.spotShadowMatrix.value=S.spotShadowMatrix,h.pointShadowMap.value=S.pointShadowMap,h.pointShadowMatrix.value=S.pointShadowMatrix);m=g.program.getUniforms();m=V.WebGLUniforms.seqWithValue(m.seq,h);g.uniformsList=m;g.dynamicUniforms=V.WebGLUniforms.splitDynamic(m,h)}c.needsUpdate=!1}var r=!1,p=n=!1,g=e.program,m=g.getUniforms(),h=e.__webglShader.uniforms;g.id!==Ba&&(w.useProgram(g.program),Ba=g.id,p=n=r=!0);c.id!==ma&&(ma=c.id,n=!0);if(r||
a!==Aa){m.set(w,a,"projectionMatrix");ta.logarithmicDepthBuffer&&m.setValue(w,"logDepthBufFC",2/(Math.log(a.far+1)/Math.LN2));a!==Aa&&(Aa=a,p=n=!0);if(c instanceof V.ShaderMaterial||c instanceof V.MeshPhongMaterial||c instanceof V.MeshStandardMaterial||c.envMap)r=m.map.cameraPosition,void 0!==r&&r.setValue(w,W(ia,a.matrixWorld));(c instanceof V.MeshPhongMaterial||c instanceof V.MeshLambertMaterial||c instanceof V.MeshBasicMaterial||c instanceof V.MeshStandardMaterial||c instanceof V.ShaderMaterial||
c.skinning)&&m.setValue(w,"viewMatrix",a.matrixWorldInverse);m.set(w,ca,"toneMappingExposure");m.set(w,ca,"toneMappingWhitePoint")}c.skinning&&(m.setOptional(w,d,"bindMatrix"),m.setOptional(w,d,"bindMatrixInverse"),r=d.skeleton)&&(ta.floatVertexTextures&&r.useVertexTexture?(m.set(w,r,"boneTexture"),m.set(w,r,"boneTextureWidth"),m.set(w,r,"boneTextureHeight")):m.setOptional(w,r,"boneMatrices"));if(n){c.lights&&(n=p,h.ambientLightColor.needsUpdate=n,h.directionalLights.needsUpdate=n,h.pointLights.needsUpdate=
n,h.spotLights.needsUpdate=n,h.hemisphereLights.needsUpdate=n);b&&c.fog&&(h.fogColor.value=b.color,b instanceof V.Fog?(h.fogNear.value=b.near,h.fogFar.value=b.far):b instanceof V.FogExp2&&(h.fogDensity.value=b.density));if(c instanceof V.MeshBasicMaterial||c instanceof V.MeshLambertMaterial||c instanceof V.MeshPhongMaterial||c instanceof V.MeshStandardMaterial||c instanceof V.MeshDepthMaterial){h.opacity.value=c.opacity;h.diffuse.value=c.color;c.emissive&&h.emissive.value.copy(c.emissive).multiplyScalar(c.emissiveIntensity);
h.map.value=c.map;h.specularMap.value=c.specularMap;h.alphaMap.value=c.alphaMap;c.aoMap&&(h.aoMap.value=c.aoMap,h.aoMapIntensity.value=c.aoMapIntensity);if(c.map)var q=c.map;else c.specularMap?q=c.specularMap:c.displacementMap?q=c.displacementMap:c.normalMap?q=c.normalMap:c.bumpMap?q=c.bumpMap:c.roughnessMap?q=c.roughnessMap:c.metalnessMap?q=c.metalnessMap:c.alphaMap?q=c.alphaMap:c.emissiveMap&&(q=c.emissiveMap);void 0!==q&&(q instanceof V.WebGLRenderTarget&&(q=q.texture),b=q.offset,q=q.repeat,h.offsetRepeat.value.set(b.x,
b.y,q.x,q.y));h.envMap.value=c.envMap;h.flipEnvMap.value=c.envMap instanceof V.CubeTexture?-1:1;h.reflectivity.value=c.reflectivity;h.refractionRatio.value=c.refractionRatio}c instanceof V.LineBasicMaterial?(h.diffuse.value=c.color,h.opacity.value=c.opacity):c instanceof V.LineDashedMaterial?(h.diffuse.value=c.color,h.opacity.value=c.opacity,h.dashSize.value=c.dashSize,h.totalSize.value=c.dashSize+c.gapSize,h.scale.value=c.scale):c instanceof V.PointsMaterial?(h.diffuse.value=c.color,h.opacity.value=
c.opacity,h.size.value=c.size*pa,h.scale.value=.5*B.clientHeight,h.map.value=c.map,null!==c.map&&(q=c.map.offset,c=c.map.repeat,h.offsetRepeat.value.set(q.x,q.y,c.x,c.y))):c instanceof V.MeshLambertMaterial?(c.lightMap&&(h.lightMap.value=c.lightMap,h.lightMapIntensity.value=c.lightMapIntensity),c.emissiveMap&&(h.emissiveMap.value=c.emissiveMap)):c instanceof V.MeshPhongMaterial?(h.specular.value=c.specular,h.shininess.value=Math.max(c.shininess,1E-4),c.lightMap&&(h.lightMap.value=c.lightMap,h.lightMapIntensity.value=
c.lightMapIntensity),c.emissiveMap&&(h.emissiveMap.value=c.emissiveMap),c.bumpMap&&(h.bumpMap.value=c.bumpMap,h.bumpScale.value=c.bumpScale),c.normalMap&&(h.normalMap.value=c.normalMap,h.normalScale.value.copy(c.normalScale)),c.displacementMap&&(h.displacementMap.value=c.displacementMap,h.displacementScale.value=c.displacementScale,h.displacementBias.value=c.displacementBias)):c instanceof V.MeshPhysicalMaterial?z(h,c):c instanceof V.MeshStandardMaterial?z(h,c):c instanceof V.MeshDepthMaterial?c.displacementMap&&
(h.displacementMap.value=c.displacementMap,h.displacementScale.value=c.displacementScale,h.displacementBias.value=c.displacementBias):c instanceof V.MeshNormalMaterial&&(h.opacity.value=c.opacity);V.WebGLUniforms.upload(w,e.uniformsList,h,ca)}m.set(w,d,"modelViewMatrix");m.set(w,d,"normalMatrix");m.setValue(w,"modelMatrix",d.matrixWorld);e=e.dynamicUniforms;null!==e&&(V.WebGLUniforms.evalDynamic(e,h,d,a),V.WebGLUniforms.upload(w,e,h,ca));return g}function z(a,b){a.roughness.value=b.roughness;a.metalness.value=
b.metalness;b.roughnessMap&&(a.roughnessMap.value=b.roughnessMap);b.metalnessMap&&(a.metalnessMap.value=b.metalnessMap);b.lightMap&&(a.lightMap.value=b.lightMap,a.lightMapIntensity.value=b.lightMapIntensity);b.emissiveMap&&(a.emissiveMap.value=b.emissiveMap);b.bumpMap&&(a.bumpMap.value=b.bumpMap,a.bumpScale.value=b.bumpScale);b.normalMap&&(a.normalMap.value=b.normalMap,a.normalScale.value.copy(b.normalScale));b.displacementMap&&(a.displacementMap.value=b.displacementMap,a.displacementScale.value=
b.displacementScale,a.displacementBias.value=b.displacementBias);b.envMap&&(a.envMapIntensity.value=b.envMapIntensity)}function A(a,b,c){c?(w.texParameteri(a,w.TEXTURE_WRAP_S,H(b.wrapS)),w.texParameteri(a,w.TEXTURE_WRAP_T,H(b.wrapT)),w.texParameteri(a,w.TEXTURE_MAG_FILTER,H(b.magFilter)),w.texParameteri(a,w.TEXTURE_MIN_FILTER,H(b.minFilter))):(w.texParameteri(a,w.TEXTURE_WRAP_S,w.CLAMP_TO_EDGE),w.texParameteri(a,w.TEXTURE_WRAP_T,w.CLAMP_TO_EDGE),b.wrapS===V.ClampToEdgeWrapping&&b.wrapT===V.ClampToEdgeWrapping||
console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",b),w.texParameteri(a,w.TEXTURE_MAG_FILTER,F(b.magFilter)),w.texParameteri(a,w.TEXTURE_MIN_FILTER,F(b.minFilter)),b.minFilter!==V.NearestFilter&&b.minFilter!==V.LinearFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",b));!(c=Z.get("EXT_texture_filter_anisotropic"))||
b.type===V.FloatType&&null===Z.get("OES_texture_float_linear")||b.type===V.HalfFloatType&&null===Z.get("OES_texture_half_float_linear")||!(1<b.anisotropy||U.get(b).__currentAnisotropy)||(w.texParameterf(a,c.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(b.anisotropy,ca.getMaxAnisotropy())),U.get(b).__currentAnisotropy=b.anisotropy)}function x(a,b){if(a.width>b||a.height>b){b/=Math.max(a.width,a.height);var c=document.createElement("canvas");c.width=Math.floor(a.width*b);c.height=Math.floor(a.height*b);c.getContext("2d").drawImage(a,
0,0,a.width,a.height,0,0,c.width,c.height);console.warn("THREE.WebGLRenderer: image is too big ("+a.width+"x"+a.height+"). Resized to "+c.width+"x"+c.height,a);return c}return a}function E(a){return V.Math.isPowerOfTwo(a.width)&&V.Math.isPowerOfTwo(a.height)}function C(a,b,c,d){var e=H(b.texture.format),g=H(b.texture.type);M.texImage2D(d,0,e,b.width,b.height,0,e,g,null);w.bindFramebuffer(w.FRAMEBUFFER,a);w.framebufferTexture2D(w.FRAMEBUFFER,c,d,U.get(b.texture).__webglTexture,0);w.bindFramebuffer(w.FRAMEBUFFER,
null)}function D(a,b){w.bindRenderbuffer(w.RENDERBUFFER,a);b.depthBuffer&&!b.stencilBuffer?(w.renderbufferStorage(w.RENDERBUFFER,w.DEPTH_COMPONENT16,b.width,b.height),w.framebufferRenderbuffer(w.FRAMEBUFFER,w.DEPTH_ATTACHMENT,w.RENDERBUFFER,a)):b.depthBuffer&&b.stencilBuffer?(w.renderbufferStorage(w.RENDERBUFFER,w.DEPTH_STENCIL,b.width,b.height),w.framebufferRenderbuffer(w.FRAMEBUFFER,w.DEPTH_STENCIL_ATTACHMENT,w.RENDERBUFFER,a)):w.renderbufferStorage(w.RENDERBUFFER,w.RGBA4,b.width,b.height);w.bindRenderbuffer(w.RENDERBUFFER,
null)}function F(a){return a===V.NearestFilter||a===V.NearestMipMapNearestFilter||a===V.NearestMipMapLinearFilter?w.NEAREST:w.LINEAR}function H(a){if(a===V.RepeatWrapping)return w.REPEAT;if(a===V.ClampToEdgeWrapping)return w.CLAMP_TO_EDGE;if(a===V.MirroredRepeatWrapping)return w.MIRRORED_REPEAT;if(a===V.NearestFilter)return w.NEAREST;if(a===V.NearestMipMapNearestFilter)return w.NEAREST_MIPMAP_NEAREST;if(a===V.NearestMipMapLinearFilter)return w.NEAREST_MIPMAP_LINEAR;if(a===V.LinearFilter)return w.LINEAR;
if(a===V.LinearMipMapNearestFilter)return w.LINEAR_MIPMAP_NEAREST;if(a===V.LinearMipMapLinearFilter)return w.LINEAR_MIPMAP_LINEAR;if(a===V.UnsignedByteType)return w.UNSIGNED_BYTE;if(a===V.UnsignedShort4444Type)return w.UNSIGNED_SHORT_4_4_4_4;if(a===V.UnsignedShort5551Type)return w.UNSIGNED_SHORT_5_5_5_1;if(a===V.UnsignedShort565Type)return w.UNSIGNED_SHORT_5_6_5;if(a===V.ByteType)return w.BYTE;if(a===V.ShortType)return w.SHORT;if(a===V.UnsignedShortType)return w.UNSIGNED_SHORT;if(a===V.IntType)return w.INT;
if(a===V.UnsignedIntType)return w.UNSIGNED_INT;if(a===V.FloatType)return w.FLOAT;var b=Z.get("OES_texture_half_float");if(null!==b&&a===V.HalfFloatType)return b.HALF_FLOAT_OES;if(a===V.AlphaFormat)return w.ALPHA;if(a===V.RGBFormat)return w.RGB;if(a===V.RGBAFormat)return w.RGBA;if(a===V.LuminanceFormat)return w.LUMINANCE;if(a===V.LuminanceAlphaFormat)return w.LUMINANCE_ALPHA;if(a===V.DepthFormat)return w.DEPTH_COMPONENT;if(a===V.AddEquation)return w.FUNC_ADD;if(a===V.SubtractEquation)return w.FUNC_SUBTRACT;
if(a===V.ReverseSubtractEquation)return w.FUNC_REVERSE_SUBTRACT;if(a===V.ZeroFactor)return w.ZERO;if(a===V.OneFactor)return w.ONE;if(a===V.SrcColorFactor)return w.SRC_COLOR;if(a===V.OneMinusSrcColorFactor)return w.ONE_MINUS_SRC_COLOR;if(a===V.SrcAlphaFactor)return w.SRC_ALPHA;if(a===V.OneMinusSrcAlphaFactor)return w.ONE_MINUS_SRC_ALPHA;if(a===V.DstAlphaFactor)return w.DST_ALPHA;if(a===V.OneMinusDstAlphaFactor)return w.ONE_MINUS_DST_ALPHA;if(a===V.DstColorFactor)return w.DST_COLOR;if(a===V.OneMinusDstColorFactor)return w.ONE_MINUS_DST_COLOR;
if(a===V.SrcAlphaSaturateFactor)return w.SRC_ALPHA_SATURATE;b=Z.get("WEBGL_compressed_texture_s3tc");if(null!==b){if(a===V.RGB_S3TC_DXT1_Format)return b.COMPRESSED_RGB_S3TC_DXT1_EXT;if(a===V.RGBA_S3TC_DXT1_Format)return b.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(a===V.RGBA_S3TC_DXT3_Format)return b.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(a===V.RGBA_S3TC_DXT5_Format)return b.COMPRESSED_RGBA_S3TC_DXT5_EXT}b=Z.get("WEBGL_compressed_texture_pvrtc");if(null!==b){if(a===V.RGB_PVRTC_4BPPV1_Format)return b.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;
if(a===V.RGB_PVRTC_2BPPV1_Format)return b.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(a===V.RGBA_PVRTC_4BPPV1_Format)return b.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(a===V.RGBA_PVRTC_2BPPV1_Format)return b.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}b=Z.get("WEBGL_compressed_texture_etc1");if(null!==b&&a===V.RGB_ETC1_Format)return b.COMPRESSED_RGB_ETC1_WEBGL;b=Z.get("EXT_blend_minmax");if(null!==b){if(a===V.MinEquation)return b.MIN_EXT;if(a===V.MaxEquation)return b.MAX_EXT}return 0}console.log("THREE.WebGLRenderer",V.REVISION);
a=a||{};var B=void 0!==a.canvas?a.canvas:document.createElement("canvas"),L=void 0!==a.context?a.context:null,K=void 0!==a.alpha?a.alpha:!1,R=void 0!==a.depth?a.depth:!0,Q=void 0!==a.stencil?a.stencil:!0,I=void 0!==a.antialias?a.antialias:!1,P=void 0!==a.premultipliedAlpha?a.premultipliedAlpha:!0,O=void 0!==a.preserveDrawingBuffer?a.preserveDrawingBuffer:!1,G=[],J=[],N=-1,ba=[],X=-1,aa=new Float32Array(8),fa=[],Ib=[];this.domElement=B;this.context=null;this.sortObjects=this.autoClearStencil=this.autoClearDepth=
this.autoClearColor=this.autoClear=!0;this.clippingPlanes=[];this.localClippingEnabled=!1;this.gammaFactor=2;this.physicallyCorrectLights=this.gammaOutput=this.gammaInput=!1;this.toneMapping=V.LinearToneMapping;this.toneMappingWhitePoint=this.toneMappingExposure=1;this.maxMorphTargets=8;this.maxMorphNormals=4;this.autoScaleCubemaps=!0;var ca=this,Ba=null,Ma=null,Ca=null,ma=-1,Va="",Aa=null,db=new V.Vector4,Lb=null,Ta=new V.Vector4,Jb=0,qa=new V.Color(0),Ja=0,gb=B.width,hb=B.height,pa=1,Hb=new V.Vector4(0,
0,gb,hb),qc=!1,Ua=new V.Vector4(0,0,gb,hb),pc=new V.Frustum,sa=new V.WebGLClipping,fb=!1,Kb=!1,La=new V.Sphere,eb=new V.Matrix4,ia=new V.Vector3,S={hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],shadows:[]},Ka={geometries:0,textures:0},Da={calls:0,vertices:0,faces:0,points:0};this.info={render:Da,memory:Ka,programs:null};try{K={alpha:K,depth:R,stencil:Q,antialias:I,
premultipliedAlpha:P,preserveDrawingBuffer:O};var w=L||B.getContext("webgl",K)||B.getContext("experimental-webgl",K);if(null===w){if(null!==B.getContext("webgl"))throw"Error creating WebGL context with your selected attributes.";throw"Error creating WebGL context.";}void 0===w.getShaderPrecisionFormat&&(w.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}});B.addEventListener("webglcontextlost",e,!1)}catch(jd){console.error("THREE.WebGLRenderer: "+jd)}var rc="undefined"!==
typeof WebGL2RenderingContext&&w instanceof WebGL2RenderingContext,Z=new V.WebGLExtensions(w);Z.get("WEBGL_depth_texture");Z.get("OES_texture_float");Z.get("OES_texture_float_linear");Z.get("OES_texture_half_float");Z.get("OES_texture_half_float_linear");Z.get("OES_standard_derivatives");Z.get("ANGLE_instanced_arrays");Z.get("OES_element_index_uint")&&(V.BufferGeometry.MaxIndex=4294967296);var ta=new V.WebGLCapabilities(w,Z,a),M=new V.WebGLState(w,Z,H),U=new V.WebGLProperties,Xa=new V.WebGLObjects(w,
U,this.info),Wa=new V.WebGLPrograms(this,ta),ib=new V.WebGLLights;this.info.programs=Wa.programs;var kd=new V.WebGLBufferRenderer(w,Z,Da),ld=new V.WebGLIndexedBufferRenderer(w,Z,Da);c();this.context=w;this.capabilities=ta;this.extensions=Z;this.properties=U;this.state=M;var sc=new V.WebGLShadowMap(this,S,Xa);this.shadowMap=sc;var md=new V.SpritePlugin(this,fa),nd=new V.LensFlarePlugin(this,Ib);this.getContext=function(){return w};this.getContextAttributes=function(){return w.getContextAttributes()};
this.forceContextLoss=function(){Z.get("WEBGL_lose_context").loseContext()};this.getMaxAnisotropy=function(){var a;return function(){if(void 0!==a)return a;var b=Z.get("EXT_texture_filter_anisotropic");return a=null!==b?w.getParameter(b.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}}();this.getPrecision=function(){return ta.precision};this.getPixelRatio=function(){return pa};this.setPixelRatio=function(){var a=window.devicePixelRatio||1;void 0!==a&&(pa=a,this.setSize(Ua.z,Ua.w,!1))};this.getSize=function(){return{width:gb,
height:hb}};this.setSize=function(a,b,c){gb=a;hb=b;B.width=a*pa;B.height=b*pa;!1!==c&&(B.style.width=a+"px",B.style.height=b+"px");this.setViewport(a,b)};this.setViewport=function(a,b){M.viewport(Ua.set(0,0,a,b))};this.setScissor=function(a,b,c,d){M.scissor(Hb.set(a,b,c,d))};this.setScissorTest=function(a){M.setScissorTest(qc=a)};this.getClearColor=function(){return qa};this.setClearColor=function(a,c){qa.set(a);Ja=void 0!==c?c:1;b(qa.r,qa.g,qa.b,Ja)};this.getClearAlpha=function(){return Ja};this.setClearAlpha=
function(a){Ja=a;b(qa.r,qa.g,qa.b,Ja)};this.clear=function(a,b,c){var d=0;if(void 0===a||a)d|=w.COLOR_BUFFER_BIT;if(void 0===b||b)d|=w.DEPTH_BUFFER_BIT;if(void 0===c||c)d|=w.STENCIL_BUFFER_BIT;w.clear(d)};this.clearColor=function(){this.clear(!0,!1,!1)};this.clearDepth=function(){this.clear(!1,!0,!1)};this.clearStencil=function(){this.clear(!1,!1,!0)};this.clearTarget=function(a,b,c,d){this.setRenderTarget(a);this.clear(b,c,d)};this.resetGLState=d;this.dispose=function(){B.removeEventListener("webglcontextlost",
e,!1)};this.renderBufferImmediate=function(a,b,c){M.initAttributes();var d=U.get(a);a.hasPositions&&!d.position&&(d.position=w.createBuffer());a.hasNormals&&!d.normal&&(d.normal=w.createBuffer());a.hasUvs&&!d.uv&&(d.uv=w.createBuffer());a.hasColors&&!d.color&&(d.color=w.createBuffer());b=b.getAttributes();a.hasPositions&&(w.bindBuffer(w.ARRAY_BUFFER,d.position),w.bufferData(w.ARRAY_BUFFER,a.positionArray,w.DYNAMIC_DRAW),M.enableAttribute(b.position),w.vertexAttribPointer(b.position,3,w.FLOAT,!1,0,
0));if(a.hasNormals){w.bindBuffer(w.ARRAY_BUFFER,d.normal);if("MeshPhongMaterial"!==c.type&&"MeshStandardMaterial"!==c.type&&"MeshPhysicalMaterial"!==c.type&&c.shading===V.FlatShading)for(var e=0,g=3*a.count;e<g;e+=9){var h=a.normalArray,k=(h[e+0]+h[e+3]+h[e+6])/3,l=(h[e+1]+h[e+4]+h[e+7])/3,m=(h[e+2]+h[e+5]+h[e+8])/3;h[e+0]=k;h[e+1]=l;h[e+2]=m;h[e+3]=k;h[e+4]=l;h[e+5]=m;h[e+6]=k;h[e+7]=l;h[e+8]=m}w.bufferData(w.ARRAY_BUFFER,a.normalArray,w.DYNAMIC_DRAW);M.enableAttribute(b.normal);w.vertexAttribPointer(b.normal,
3,w.FLOAT,!1,0,0)}a.hasUvs&&c.map&&(w.bindBuffer(w.ARRAY_BUFFER,d.uv),w.bufferData(w.ARRAY_BUFFER,a.uvArray,w.DYNAMIC_DRAW),M.enableAttribute(b.uv),w.vertexAttribPointer(b.uv,2,w.FLOAT,!1,0,0));a.hasColors&&c.vertexColors!==V.NoColors&&(w.bindBuffer(w.ARRAY_BUFFER,d.color),w.bufferData(w.ARRAY_BUFFER,a.colorArray,w.DYNAMIC_DRAW),M.enableAttribute(b.color),w.vertexAttribPointer(b.color,3,w.FLOAT,!1,0,0));M.disableUnusedAttributes();w.drawArrays(w.TRIANGLES,0,a.count);a.count=0};this.renderBufferDirect=
function(a,b,c,d,e,g){v(d);var h=y(a,b,d,e),k=!1;a=c.id+"_"+h.id+"_"+d.wireframe;a!==Va&&(Va=a,k=!0);var l=e.morphTargetInfluences;if(void 0!==l){a=[];for(var n=0,k=l.length;n<k;n++)b=l[n],a.push([b,n]);a.sort(m);8<a.length&&(a.length=8);l=c.morphAttributes;n=0;for(k=a.length;n<k;n++)b=a[n],aa[n]=b[0],0!==b[0]?(b=b[1],!0===d.morphTargets&&l.position&&c.addAttribute("morphTarget"+n,l.position[b]),!0===d.morphNormals&&l.normal&&c.addAttribute("morphNormal"+n,l.normal[b])):(!0===d.morphTargets&&c.removeAttribute("morphTarget"+
n),!0===d.morphNormals&&c.removeAttribute("morphNormal"+n));h.getUniforms().setValue(w,"morphTargetInfluences",aa);k=!0}b=c.index;n=c.attributes.position;!0===d.wireframe&&(b=Xa.getWireframeAttribute(c));null!==b?(a=ld,a.setIndex(b)):a=kd;if(k){a:{var p;if(c instanceof V.InstancedBufferGeometry){var r=Z.get("ANGLE_instanced_arrays");if(null===r){console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");
break a}}void 0===p&&(p=0);M.initAttributes();var k=c.attributes,h=h.getAttributes(),l=d.defaultAttributeValues;for(J in h){var q=h[J];if(0<=q){var t=k[J];if(void 0!==t){var u=w.FLOAT,x=t.array,z=t.normalized;x instanceof Float32Array?u=w.FLOAT:x instanceof Float64Array?console.warn("Unsupported data buffer format: Float64Array"):x instanceof Uint16Array?u=w.UNSIGNED_SHORT:x instanceof Int16Array?u=w.SHORT:x instanceof Uint32Array?u=w.UNSIGNED_INT:x instanceof Int32Array?u=w.INT:x instanceof Int8Array?
u=w.BYTE:x instanceof Uint8Array&&(u=w.UNSIGNED_BYTE);var x=t.itemSize,I=Xa.getAttributeBuffer(t);if(t instanceof V.InterleavedBufferAttribute){var A=t.data,G=A.stride,t=t.offset;A instanceof V.InstancedInterleavedBuffer?(M.enableAttributeAndDivisor(q,A.meshPerAttribute,r),void 0===c.maxInstancedCount&&(c.maxInstancedCount=A.meshPerAttribute*A.count)):M.enableAttribute(q);w.bindBuffer(w.ARRAY_BUFFER,I);w.vertexAttribPointer(q,x,u,z,G*A.array.BYTES_PER_ELEMENT,(p*G+t)*A.array.BYTES_PER_ELEMENT)}else t instanceof
V.InstancedBufferAttribute?(M.enableAttributeAndDivisor(q,t.meshPerAttribute,r),void 0===c.maxInstancedCount&&(c.maxInstancedCount=t.meshPerAttribute*t.count)):M.enableAttribute(q),w.bindBuffer(w.ARRAY_BUFFER,I),w.vertexAttribPointer(q,x,u,z,0,p*x*t.array.BYTES_PER_ELEMENT)}else if(void 0!==l&&(u=l[J],void 0!==u))switch(u.length){case 2:w.vertexAttrib2fv(q,u);break;case 3:w.vertexAttrib3fv(q,u);break;case 4:w.vertexAttrib4fv(q,u);break;default:w.vertexAttrib1fv(q,u)}}}M.disableUnusedAttributes()}null!==
b&&w.bindBuffer(w.ELEMENT_ARRAY_BUFFER,Xa.getAttributeBuffer(b))}p=Infinity;null!==b?p=b.count:void 0!==n&&(p=n.count);var J=c.drawRange.start;b=null!==g?g.start:0;r=Math.max(0,J,b);g=Math.max(0,Math.min(0+p,J+c.drawRange.count,b+(null!==g?g.count:Infinity))-1-r+1);if(e instanceof V.Mesh)if(!0===d.wireframe)M.setLineWidth(d.wireframeLinewidth*(null===Ma?pa:1)),a.setMode(w.LINES);else switch(e.drawMode){case V.TrianglesDrawMode:a.setMode(w.TRIANGLES);break;case V.TriangleStripDrawMode:a.setMode(w.TRIANGLE_STRIP);
break;case V.TriangleFanDrawMode:a.setMode(w.TRIANGLE_FAN)}else e instanceof V.Line?(d=d.linewidth,void 0===d&&(d=1),M.setLineWidth(d*(null===Ma?pa:1)),e instanceof V.LineSegments?a.setMode(w.LINES):a.setMode(w.LINE_STRIP)):e instanceof V.Points&&a.setMode(w.POINTS);c instanceof V.InstancedBufferGeometry?0<c.maxInstancedCount&&a.renderInstances(c,r,g):a.render(r,g)};this.render=function(a,b,c,d){if(!1===b instanceof V.Camera)console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");
else{var e=a.fog;Va="";ma=-1;Aa=null;!0===a.autoUpdate&&a.updateMatrixWorld();null===b.parent&&b.updateMatrixWorld();b.matrixWorldInverse.getInverse(b.matrixWorld);Pa(eb,b.projectionMatrix,b.matrixWorldInverse);ob(pc,eb);G.length=0;X=N=-1;fa.length=0;Ib.length=0;Kb=this.localClippingEnabled;fb=sa.init(this.clippingPlanes,Kb,b);q(a,b);J.length=N+1;ba.length=X+1;!0===ca.sortObjects&&(J.sort(p),ba.sort(r));fb&&sa.beginShadows();for(var g=G,h=0,k=0,l=g.length;k<l;k++){var m=g[k];m.castShadow&&(S.shadows[h++]=
m)}S.shadows.length=h;sc.render(a,b);for(var g=G,n=0,t=0,v=0,x,y,z,I,A=b.matrixWorldInverse,C=0,D=0,B=0,F=0,k=0,l=g.length;k<l;k++)if(m=g[k],x=m.color,y=m.intensity,z=m.distance,I=m.shadow&&m.shadow.map?m.shadow.map.texture:null,m instanceof V.AmbientLight)n+=x.r*y,t+=x.g*y,v+=x.b*y;else if(m instanceof V.DirectionalLight){h=ib.get(m);h.color.copy(m.color).multiplyScalar(m.intensity);W(h.direction,m.matrixWorld);W(ia,m.target.matrixWorld);h.direction.sub(ia);Ya(h.direction,A);if(h.shadow=m.castShadow)h.shadowBias=
m.shadow.bias,h.shadowRadius=m.shadow.radius,h.shadowMapSize=m.shadow.mapSize;S.directionalShadowMap[C]=I;S.directionalShadowMatrix[C]=m.shadow.matrix;S.directional[C++]=h}else if(m instanceof V.SpotLight){h=ib.get(m);W(h.position,m.matrixWorld);h.position.applyMatrix4(A);h.color.copy(x).multiplyScalar(y);h.distance=z;W(h.direction,m.matrixWorld);W(ia,m.target.matrixWorld);h.direction.sub(ia);Ya(h.direction,A);h.coneCos=Math.cos(m.angle);h.penumbraCos=Math.cos(m.angle*(1-m.penumbra));h.decay=0===
m.distance?0:m.decay;if(h.shadow=m.castShadow)h.shadowBias=m.shadow.bias,h.shadowRadius=m.shadow.radius,h.shadowMapSize=m.shadow.mapSize;S.spotShadowMap[B]=I;S.spotShadowMatrix[B]=m.shadow.matrix;S.spot[B++]=h}else if(m instanceof V.PointLight){h=ib.get(m);W(h.position,m.matrixWorld);h.position.applyMatrix4(A);h.color.copy(m.color).multiplyScalar(m.intensity);h.distance=m.distance;h.decay=0===m.distance?0:m.decay;if(h.shadow=m.castShadow)h.shadowBias=m.shadow.bias,h.shadowRadius=m.shadow.radius,h.shadowMapSize=
m.shadow.mapSize;S.pointShadowMap[D]=I;void 0===S.pointShadowMatrix[D]&&(S.pointShadowMatrix[D]=new V.Matrix4);W(ia,m.matrixWorld).negate();S.pointShadowMatrix[D].identity().setPosition(ia);S.point[D++]=h}else m instanceof V.HemisphereLight&&(h=ib.get(m),W(h.direction,m.matrixWorld),Ya(h.direction,A),h.direction.normalize(),h.skyColor.copy(m.color).multiplyScalar(y),h.groundColor.copy(m.groundColor).multiplyScalar(y),S.hemi[F++]=h);S.ambient[0]=n;S.ambient[1]=t;S.ambient[2]=v;S.directional.length=
C;S.spot.length=B;S.point.length=D;S.hemi.length=F;S.hash=C+","+D+","+B+","+F+","+S.shadows.length;fb&&sa.endShadows();Da.calls=0;Da.vertices=0;Da.faces=0;Da.points=0;void 0===c&&(c=null);this.setRenderTarget(c);(this.autoClear||d)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil);a.overrideMaterial?(d=a.overrideMaterial,u(J,b,e,d),u(ba,b,e,d)):(M.setBlending(V.NoBlending),u(J,b,e),u(ba,b,e));md.render(a,b);nd.render(a,b,Ta);c&&(a=c.texture,a.generateMipmaps&&E(c)&&a.minFilter!==
V.NearestFilter&&a.minFilter!==V.LinearFilter&&(a=c instanceof V.WebGLRenderTargetCube?w.TEXTURE_CUBE_MAP:w.TEXTURE_2D,c=U.get(c.texture).__webglTexture,M.bindTexture(a,c),w.generateMipmap(a),M.bindTexture(a,null)));M.setDepthTest(!0);M.setDepthWrite(!0);M.setColorWrite(!0)}};this.setFaceCulling=function(a,b){M.setCullFace(a);M.setFlipSided(b===V.FrontFaceDirectionCW)};this.allocTextureUnit=function(){var a=Jb;a>=ta.maxTextures&&console.warn("WebGLRenderer: trying to use "+a+" texture units while this GPU supports only "+
ta.maxTextures);Jb+=1;return a};this.setTexture2D=function(){var a=!1;return function(b,c){b instanceof V.WebGLRenderTarget&&(a||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),a=!0),b=b.texture);var d=U.get(b);if(0<b.version&&d.__version!==b.version){var e=b.image;if(void 0===e)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",b);else if(!1===e.complete)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",
b);else{void 0===d.__webglInit&&(d.__webglInit=!0,b.addEventListener("dispose",g),d.__webglTexture=w.createTexture(),Ka.textures++);M.activeTexture(w.TEXTURE0+c);M.bindTexture(w.TEXTURE_2D,d.__webglTexture);w.pixelStorei(w.UNPACK_FLIP_Y_WEBGL,b.flipY);w.pixelStorei(w.UNPACK_PREMULTIPLY_ALPHA_WEBGL,b.premultiplyAlpha);w.pixelStorei(w.UNPACK_ALIGNMENT,b.unpackAlignment);var h=x(b.image,ta.maxTextureSize);(b.wrapS!==V.ClampToEdgeWrapping||b.wrapT!==V.ClampToEdgeWrapping||b.minFilter!==V.NearestFilter&&
b.minFilter!==V.LinearFilter)&&!1===E(h)&&(c=h,c instanceof HTMLImageElement||c instanceof HTMLCanvasElement?(e=document.createElement("canvas"),e.width=V.Math.nearestPowerOfTwo(c.width),e.height=V.Math.nearestPowerOfTwo(c.height),e.getContext("2d").drawImage(c,0,0,e.width,e.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+c.width+"x"+c.height+"). Resized to "+e.width+"x"+e.height,c),h=e):h=c);c=E(h);var e=H(b.format),k=H(b.type);A(w.TEXTURE_2D,b,c);var l=b.mipmaps;if(b instanceof
V.DepthTexture){l=w.DEPTH_COMPONENT;if(b.type===V.FloatType){if(!rc)throw Error("Float Depth Texture only supported in WebGL2.0");l=w.DEPTH_COMPONENT32F}else rc&&(l=w.DEPTH_COMPONENT16);M.texImage2D(w.TEXTURE_2D,0,l,h.width,h.height,0,e,k,null)}else if(b instanceof V.DataTexture)if(0<l.length&&c){for(var m=0,n=l.length;m<n;m++)h=l[m],M.texImage2D(w.TEXTURE_2D,m,e,h.width,h.height,0,e,k,h.data);b.generateMipmaps=!1}else M.texImage2D(w.TEXTURE_2D,0,e,h.width,h.height,0,e,k,h.data);else if(b instanceof
V.CompressedTexture)for(m=0,n=l.length;m<n;m++)h=l[m],b.format!==V.RGBAFormat&&b.format!==V.RGBFormat?-1<M.getCompressedTextureFormats().indexOf(e)?M.compressedTexImage2D(w.TEXTURE_2D,m,e,h.width,h.height,0,h.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):M.texImage2D(w.TEXTURE_2D,m,e,h.width,h.height,0,e,k,h.data);else if(0<l.length&&c){m=0;for(n=l.length;m<n;m++)h=l[m],M.texImage2D(w.TEXTURE_2D,m,e,e,k,h);b.generateMipmaps=!1}else M.texImage2D(w.TEXTURE_2D,
0,e,e,k,h);b.generateMipmaps&&c&&w.generateMipmap(w.TEXTURE_2D);d.__version=b.version;if(b.onUpdate)b.onUpdate(b)}}else M.activeTexture(w.TEXTURE0+c),M.bindTexture(w.TEXTURE_2D,d.__webglTexture)}}();this.setTexture=function(){var a=!1;return function(b,c){a||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),a=!0);ca.setTexture2D(b,c)}}();this.setTextureCube=function(){var a=!1;return function(b,c){b instanceof V.WebGLRenderTargetCube&&(a||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),
a=!0),b=b.texture);if(b instanceof V.CubeTexture||Array.isArray(b.image)&&6===b.image.length){var d=U.get(b);if(6===b.image.length)if(0<b.version&&d.__version!==b.version){d.__image__webglTextureCube||(b.addEventListener("dispose",g),d.__image__webglTextureCube=w.createTexture(),Ka.textures++);M.activeTexture(w.TEXTURE0+c);M.bindTexture(w.TEXTURE_CUBE_MAP,d.__image__webglTextureCube);w.pixelStorei(w.UNPACK_FLIP_Y_WEBGL,b.flipY);c=b instanceof V.CompressedTexture;for(var e=b.image[0]instanceof V.DataTexture,
h=[],k=0;6>k;k++)h[k]=!ca.autoScaleCubemaps||c||e?e?b.image[k].image:b.image[k]:x(b.image[k],ta.maxCubemapSize);var l=E(h[0]),m=H(b.format),n=H(b.type);A(w.TEXTURE_CUBE_MAP,b,l);for(k=0;6>k;k++)if(c)for(var p,r=h[k].mipmaps,q=0,t=r.length;q<t;q++)p=r[q],b.format!==V.RGBAFormat&&b.format!==V.RGBFormat?-1<M.getCompressedTextureFormats().indexOf(m)?M.compressedTexImage2D(w.TEXTURE_CUBE_MAP_POSITIVE_X+k,q,m,p.width,p.height,0,p.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):
M.texImage2D(w.TEXTURE_CUBE_MAP_POSITIVE_X+k,q,m,p.width,p.height,0,m,n,p.data);else e?M.texImage2D(w.TEXTURE_CUBE_MAP_POSITIVE_X+k,0,m,h[k].width,h[k].height,0,m,n,h[k].data):M.texImage2D(w.TEXTURE_CUBE_MAP_POSITIVE_X+k,0,m,m,n,h[k]);b.generateMipmaps&&l&&w.generateMipmap(w.TEXTURE_CUBE_MAP);d.__version=b.version;if(b.onUpdate)b.onUpdate(b)}else M.activeTexture(w.TEXTURE0+c),M.bindTexture(w.TEXTURE_CUBE_MAP,d.__image__webglTextureCube)}else M.activeTexture(w.TEXTURE0+c),M.bindTexture(w.TEXTURE_CUBE_MAP,
U.get(b).__webglTexture)}}();this.getCurrentRenderTarget=function(){return Ma};this.setRenderTarget=function(a){if((Ma=a)&&void 0===U.get(a).__webglFramebuffer){var b=U.get(a),c=U.get(a.texture);a.addEventListener("dispose",h);c.__webglTexture=w.createTexture();Ka.textures++;var d=a instanceof V.WebGLRenderTargetCube,e=V.Math.isPowerOfTwo(a.width)&&V.Math.isPowerOfTwo(a.height);if(d){b.__webglFramebuffer=[];for(var g=0;6>g;g++)b.__webglFramebuffer[g]=w.createFramebuffer()}else b.__webglFramebuffer=
w.createFramebuffer();if(d){M.bindTexture(w.TEXTURE_CUBE_MAP,c.__webglTexture);A(w.TEXTURE_CUBE_MAP,a.texture,e);for(g=0;6>g;g++)C(b.__webglFramebuffer[g],a,w.COLOR_ATTACHMENT0,w.TEXTURE_CUBE_MAP_POSITIVE_X+g);a.texture.generateMipmaps&&e&&w.generateMipmap(w.TEXTURE_CUBE_MAP);M.bindTexture(w.TEXTURE_CUBE_MAP,null)}else M.bindTexture(w.TEXTURE_2D,c.__webglTexture),A(w.TEXTURE_2D,a.texture,e),C(b.__webglFramebuffer,a,w.COLOR_ATTACHMENT0,w.TEXTURE_2D),a.texture.generateMipmaps&&e&&w.generateMipmap(w.TEXTURE_2D),
M.bindTexture(w.TEXTURE_2D,null);if(a.depthBuffer){b=U.get(a);c=a instanceof V.WebGLRenderTargetCube;if(a.depthTexture){if(c)throw Error("target.depthTexture not supported in Cube render targets");if(a instanceof V.WebGLRenderTargetCube)throw Error("Depth Texture with cube render targets is not supported!");w.bindFramebuffer(w.FRAMEBUFFER,b.__webglFramebuffer);if(!(a.depthTexture instanceof V.DepthTexture))throw Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");U.get(a.depthTexture).__webglTexture&&
a.depthTexture.image.width===a.width&&a.depthTexture.image.height===a.height||(a.depthTexture.image.width=a.width,a.depthTexture.image.height=a.height,a.depthTexture.needsUpdate=!0);ca.setTexture2D(a.depthTexture,0);b=U.get(a.depthTexture).__webglTexture;w.framebufferTexture2D(w.FRAMEBUFFER,w.DEPTH_ATTACHMENT,w.TEXTURE_2D,b,0)}else if(c)for(b.__webglDepthbuffer=[],c=0;6>c;c++)w.bindFramebuffer(w.FRAMEBUFFER,b.__webglFramebuffer[c]),b.__webglDepthbuffer[c]=w.createRenderbuffer(),D(b.__webglDepthbuffer[c],
a);else w.bindFramebuffer(w.FRAMEBUFFER,b.__webglFramebuffer),b.__webglDepthbuffer=w.createRenderbuffer(),D(b.__webglDepthbuffer,a);w.bindFramebuffer(w.FRAMEBUFFER,null)}}b=a instanceof V.WebGLRenderTargetCube;a?(c=U.get(a),c=b?c.__webglFramebuffer[a.activeCubeFace]:c.__webglFramebuffer,db.copy(a.scissor),Lb=a.scissorTest,Ta.copy(a.viewport)):(c=null,db.copy(Hb).multiplyScalar(pa),Lb=qc,Ta.copy(Ua).multiplyScalar(pa));Ca!==c&&(w.bindFramebuffer(w.FRAMEBUFFER,c),Ca=c);M.scissor(db);M.setScissorTest(Lb);
M.viewport(Ta);b&&(b=U.get(a.texture),w.framebufferTexture2D(w.FRAMEBUFFER,w.COLOR_ATTACHMENT0,w.TEXTURE_CUBE_MAP_POSITIVE_X+a.activeCubeFace,b.__webglTexture,a.activeMipMapLevel))};this.readRenderTargetPixels=function(a,b,c,d,e,g){if(!1===a instanceof V.WebGLRenderTarget)console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");else{var h=U.get(a).__webglFramebuffer;if(h){var k=!1;h!==Ca&&(w.bindFramebuffer(w.FRAMEBUFFER,h),k=!0);try{var l=a.texture;
l.format!==V.RGBAFormat&&H(l.format)!==w.getParameter(w.IMPLEMENTATION_COLOR_READ_FORMAT)?console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format."):l.type===V.UnsignedByteType||H(l.type)===w.getParameter(w.IMPLEMENTATION_COLOR_READ_TYPE)||l.type===V.FloatType&&Z.get("WEBGL_color_buffer_float")||l.type===V.HalfFloatType&&Z.get("EXT_color_buffer_half_float")?w.checkFramebufferStatus(w.FRAMEBUFFER)===w.FRAMEBUFFER_COMPLETE?0<=b&&b<=a.width-
d&&0<=c&&c<=a.height-e&&w.readPixels(b,c,d,e,H(l.format),H(l.type),g):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete."):console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.")}finally{k&&w.bindFramebuffer(w.FRAMEBUFFER,Ca)}}}}};
V.WebGLRenderTarget=function(a,b,c){this.uuid=V.Math.generateUUID();this.width=a;this.height=b;this.scissor=new V.Vector4(0,0,a,b);this.scissorTest=!1;this.viewport=new V.Vector4(0,0,a,b);c=c||{};void 0===c.minFilter&&(c.minFilter=V.LinearFilter);this.texture=new V.Texture(void 0,void 0,c.wrapS,c.wrapT,c.magFilter,c.minFilter,c.format,c.type,c.anisotropy,c.encoding);this.depthBuffer=void 0!==c.depthBuffer?c.depthBuffer:!0;this.stencilBuffer=void 0!==c.stencilBuffer?c.stencilBuffer:!0;this.depthTexture=
null};
Object.assign(V.WebGLRenderTarget.prototype,V.EventDispatcher.prototype,{setSize:function(a,b){if(this.width!==a||this.height!==b)this.width=a,this.height=b,this.dispose();this.viewport.set(0,0,a,b);this.scissor.set(0,0,a,b)},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.width=a.width;this.height=a.height;this.viewport.copy(a.viewport);this.texture=a.texture.clone();this.depthBuffer=a.depthBuffer;this.stencilBuffer=a.stencilBuffer;this.depthTexture=a.depthTexture;return this},
dispose:function(){this.dispatchEvent({type:"dispose"})}});V.WebGLRenderTargetCube=function(a,b,c){V.WebGLRenderTarget.call(this,a,b,c);this.activeMipMapLevel=this.activeCubeFace=0};V.WebGLRenderTargetCube.prototype=Object.create(V.WebGLRenderTarget.prototype);V.WebGLRenderTargetCube.prototype.constructor=V.WebGLRenderTargetCube;
V.WebGLBufferRenderer=function(a,b,c){var d;this.setMode=function(a){d=a};this.render=function(b,g){a.drawArrays(d,b,g);c.calls++;c.vertices+=g;d===a.TRIANGLES&&(c.faces+=g/3)};this.renderInstances=function(e){var g=b.get("ANGLE_instanced_arrays");if(null===g)console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");else{var h=e.attributes.position,h=h instanceof V.InterleavedBufferAttribute?h.data.count:h.count;
g.drawArraysInstancedANGLE(d,0,h,e.maxInstancedCount);c.calls++;c.vertices+=h*e.maxInstancedCount;d===a.TRIANGLES&&(c.faces+=e.maxInstancedCount*h/3)}}};
V.WebGLClipping=function(){function a(){m.value!==d&&(m.value=d,m.needsUpdate=0<e);c.numPlanes=e}function b(a,b,d,e){var g=null!==a?a.length:0,h=null;if(0!==g){h=m.value;if(!0!==e||null===h){e=d+4*g;b=b.matrixWorldInverse;cb(l,b);if(null===h||h.length<e)h=new Float32Array(e);for(e=0;e!==g;++e,d+=4)k.copy(a[e]).applyMatrix4(b,l),k.normal.toArray(h,d),h[d+3]=k.constant}m.value=h;m.needsUpdate=!0}c.numPlanes=g;return h}var c=this,d=null,e=0,g=!1,h=!1,k=new V.Plane,l=new V.Matrix3,m={value:null,needsUpdate:!1};
this.uniform=m;this.numPlanes=0;this.init=function(a,c,h){var k=0!==a.length||c||0!==e||g;g=c;d=b(a,h,0);e=a.length;return k};this.beginShadows=function(){h=!0;b(null)};this.endShadows=function(){h=!1;a()};this.setState=function(c,k,l,t,q){if(!g||null===c||0===c.length||h&&!k)h?b(null):a();else{k=h?0:e;var n=4*k,p=t.clippingState||null;m.value=p;p=b(c,l,n,q);for(c=0;c!==n;++c)p[c]=d[c];t.clippingState=p;this.numPlanes+=k}}};
V.WebGLIndexedBufferRenderer=function(a,b,c){var d,e,g;this.setMode=function(a){d=a};this.setIndex=function(c){c.array instanceof Uint32Array&&b.get("OES_element_index_uint")?(e=a.UNSIGNED_INT,g=4):(e=a.UNSIGNED_SHORT,g=2)};this.render=function(b,k){a.drawElements(d,k,e,b*g);c.calls++;c.vertices+=k;d===a.TRIANGLES&&(c.faces+=k/3)};this.renderInstances=function(h,k,l){var m=b.get("ANGLE_instanced_arrays");null===m?console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays."):
(m.drawElementsInstancedANGLE(d,l,e,k*g,h.maxInstancedCount),c.calls++,c.vertices+=l*h.maxInstancedCount,d===a.TRIANGLES&&(c.faces+=h.maxInstancedCount*l/3))}};
V.WebGLExtensions=function(a){var b={};this.get=function(c){if(void 0!==b[c])return b[c];switch(c){case "WEBGL_depth_texture":var d=a.getExtension("WEBGL_depth_texture")||a.getExtension("MOZ_WEBGL_depth_texture")||a.getExtension("WEBKIT_WEBGL_depth_texture");break;case "EXT_texture_filter_anisotropic":d=a.getExtension("EXT_texture_filter_anisotropic")||a.getExtension("MOZ_EXT_texture_filter_anisotropic")||a.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case "WEBGL_compressed_texture_s3tc":d=
a.getExtension("WEBGL_compressed_texture_s3tc")||a.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||a.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case "WEBGL_compressed_texture_pvrtc":d=a.getExtension("WEBGL_compressed_texture_pvrtc")||a.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case "WEBGL_compressed_texture_etc1":d=a.getExtension("WEBGL_compressed_texture_etc1");break;default:d=a.getExtension(c)}null===d&&console.warn("THREE.WebGLRenderer: "+c+" extension not supported.");
return b[c]=d}};
V.WebGLCapabilities=function(a,b,c){function d(b){if("highp"===b){if(0<a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.HIGH_FLOAT).precision&&0<a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.HIGH_FLOAT).precision)return"highp";b="mediump"}return"mediump"===b&&0<a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.MEDIUM_FLOAT).precision&&0<a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.MEDIUM_FLOAT).precision?"mediump":"lowp"}this.getMaxPrecision=d;this.precision=void 0!==c.precision?c.precision:"highp";this.logarithmicDepthBuffer=
void 0!==c.logarithmicDepthBuffer?c.logarithmicDepthBuffer:!1;this.maxTextures=a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS);this.maxVertexTextures=a.getParameter(a.MAX_VERTEX_TEXTURE_IMAGE_UNITS);this.maxTextureSize=a.getParameter(a.MAX_TEXTURE_SIZE);this.maxCubemapSize=a.getParameter(a.MAX_CUBE_MAP_TEXTURE_SIZE);this.maxAttributes=a.getParameter(a.MAX_VERTEX_ATTRIBS);this.maxVertexUniforms=a.getParameter(a.MAX_VERTEX_UNIFORM_VECTORS);this.maxVaryings=a.getParameter(a.MAX_VARYING_VECTORS);this.maxFragmentUniforms=
a.getParameter(a.MAX_FRAGMENT_UNIFORM_VECTORS);this.vertexTextures=0<this.maxVertexTextures;this.floatFragmentTextures=!!b.get("OES_texture_float");this.floatVertexTextures=this.vertexTextures&&this.floatFragmentTextures;c=d(this.precision);c!==this.precision&&(console.warn("THREE.WebGLRenderer:",this.precision,"not supported, using",c,"instead."),this.precision=c);this.logarithmicDepthBuffer&&(this.logarithmicDepthBuffer=!!b.get("EXT_frag_depth"))};
V.WebGLGeometries=function(a,b,c){function d(a){var h=a.target;a=g[h.id];null!==a.index&&e(a.index);var l=a.attributes;for(m in l)e(l[m]);h.removeEventListener("dispose",d);delete g[h.id];var m=b.get(h);m.wireframe&&e(m.wireframe);b.delete(h);h=b.get(a);h.wireframe&&e(h.wireframe);b.delete(a);c.memory.geometries--}function e(c){var d=c instanceof V.InterleavedBufferAttribute?b.get(c.data).__webglBuffer:b.get(c).__webglBuffer;void 0!==d&&(a.deleteBuffer(d),c instanceof V.InterleavedBufferAttribute?
b.delete(c.data):b.delete(c))}var g={};this.get=function(a){var b=a.geometry;if(void 0!==g[b.id])return g[b.id];b.addEventListener("dispose",d);if(b instanceof V.BufferGeometry)var e=b;else b instanceof V.Geometry&&(void 0===b._bufferGeometry&&(b._bufferGeometry=(new V.BufferGeometry).setFromObject(a)),e=b._bufferGeometry);g[b.id]=e;c.memory.geometries++;return e}};
V.WebGLLights=function(){var a={};this.get=function(b){if(void 0!==a[b.id])return a[b.id];switch(b.type){case "DirectionalLight":var c={direction:new V.Vector3,color:new V.Color,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new V.Vector2};break;case "SpotLight":c={position:new V.Vector3,direction:new V.Vector3,color:new V.Color,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new V.Vector2};break;case "PointLight":c={position:new V.Vector3,color:new V.Color,
distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new V.Vector2};break;case "HemisphereLight":c={direction:new V.Vector3,skyColor:new V.Color,groundColor:new V.Color}}return a[b.id]=c}};
V.WebGLObjects=function(a,b,c){function d(c,d){c=c instanceof V.InterleavedBufferAttribute?c.data:c;var e=b.get(c);void 0===e.__webglBuffer?(e.__webglBuffer=a.createBuffer(),a.bindBuffer(d,e.__webglBuffer),a.bufferData(d,c.array,c.dynamic?a.DYNAMIC_DRAW:a.STATIC_DRAW),e.version=c.version):e.version!==c.version&&(a.bindBuffer(d,e.__webglBuffer),!1===c.dynamic||-1===c.updateRange.count?a.bufferSubData(d,0,c.array):0===c.updateRange.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):
(a.bufferSubData(d,c.updateRange.offset*c.array.BYTES_PER_ELEMENT,c.array.subarray(c.updateRange.offset,c.updateRange.offset+c.updateRange.count)),c.updateRange.count=0),e.version=c.version)}function e(a,b,c){if(b>c){var d=b;b=c;c=d}d=a[b];return void 0===d?(a[b]=[c],!0):-1===d.indexOf(c)?(d.push(c),!0):!1}var g=new V.WebGLGeometries(a,b,c);this.getAttributeBuffer=function(a){return a instanceof V.InterleavedBufferAttribute?b.get(a.data).__webglBuffer:b.get(a).__webglBuffer};this.getWireframeAttribute=
function(c){var g=b.get(c);if(void 0!==g.wireframe)return g.wireframe;var h=[];var m=c.index;var p=c.attributes;c=p.position;if(null!==m){p={};var r=m.array;for(var n=0,t=r.length;n<t;n+=3){var q=r[n+0];var u=r[n+1];m=r[n+2];e(p,q,u)&&h.push(q,u);e(p,u,m)&&h.push(u,m);e(p,m,q)&&h.push(m,q)}}else for(r=p.position.array,n=0,t=r.length/3-1;n<t;n+=3)q=n+0,u=n+1,m=n+2,h.push(q,u,u,m,m,q);h=new V.BufferAttribute(new (65535<c.count?Uint32Array:Uint16Array)(h),1);d(h,a.ELEMENT_ARRAY_BUFFER);return g.wireframe=
h};this.update=function(b){var c=g.get(b);b.geometry instanceof V.Geometry&&c.updateFromObject(b);b=c.index;var e=c.attributes;null!==b&&d(b,a.ELEMENT_ARRAY_BUFFER);for(var h in e)d(e[h],a.ARRAY_BUFFER);b=c.morphAttributes;for(h in b)for(var e=b[h],p=0,r=e.length;p<r;p++)d(e[p],a.ARRAY_BUFFER);return c}};
V.WebGLProgram=function(){function a(a){switch(a){case V.LinearEncoding:return["Linear","( value )"];case V.sRGBEncoding:return["sRGB","( value )"];case V.RGBEEncoding:return["RGBE","( value )"];case V.RGBM7Encoding:return["RGBM","( value, 7.0 )"];case V.RGBM16Encoding:return["RGBM","( value, 16.0 )"];case V.RGBDEncoding:return["RGBD","( value, 256.0 )"];case V.GammaEncoding:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw Error("unsupported encoding: "+a);}}function b(b,c){c=a(c);
return"vec4 "+b+"( vec4 value ) { return "+c[0]+"ToLinear"+c[1]+"; }"}function c(b){b=a(b);return"vec4 linearToOutputTexel( vec4 value ) { return LinearTo"+b[0]+b[1]+"; }"}function d(a){switch(a){case V.LinearToneMapping:a="Linear";break;case V.ReinhardToneMapping:a="Reinhard";break;case V.Uncharted2ToneMapping:a="Uncharted2";break;case V.CineonToneMapping:a="OptimizedCineon";break;default:throw Error("unsupported toneMapping: "+a);}return"vec3 toneMapping( vec3 color ) { return "+a+"ToneMapping( color ); }"}
function e(a,b,c){a=a||{};return[a.derivatives||b.envMapCubeUV||b.bumpMap||b.normalMap||b.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(a.fragDepth||b.logarithmicDepthBuffer)&&c.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",a.drawBuffers&&c.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(a.shaderTextureLOD||b.envMap)&&c.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(h).join("\n")}function g(a){var b=
[],c;for(c in a){var d=a[c];!1!==d&&b.push("#define "+c+" "+d)}return b.join("\n")}function h(a){return""!==a}function k(a,b){return a.replace(/NUM_DIR_LIGHTS/g,b.numDirLights).replace(/NUM_SPOT_LIGHTS/g,b.numSpotLights).replace(/NUM_POINT_LIGHTS/g,b.numPointLights).replace(/NUM_HEMI_LIGHTS/g,b.numHemiLights)}function l(a){return a.replace(/#include +<([\w\d.]+)>/g,function(a,b){a=V.ShaderChunk[b];if(void 0===a)throw Error("Can not resolve #include \x3c"+b+"\x3e");return l(a)})}function m(a){return a.replace(/for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,
function(a,b,c,d){a="";for(b=parseInt(b);b<parseInt(c);b++)a+=d.replace(/\[ i \]/g,"[ "+b+" ]");return a})}var p=0;return function(a,n,t,q){var r=a.context,v=t.extensions,y=t.defines,z=t.__webglShader.vertexShader,A=t.__webglShader.fragmentShader,x="SHADOWMAP_TYPE_BASIC";q.shadowMapType===V.PCFShadowMap?x="SHADOWMAP_TYPE_PCF":q.shadowMapType===V.PCFSoftShadowMap&&(x="SHADOWMAP_TYPE_PCF_SOFT");var E="ENVMAP_TYPE_CUBE",C="ENVMAP_MODE_REFLECTION",D="ENVMAP_BLENDING_MULTIPLY";if(q.envMap){switch(t.envMap.mapping){case V.CubeReflectionMapping:case V.CubeRefractionMapping:E=
"ENVMAP_TYPE_CUBE";break;case V.CubeUVReflectionMapping:case V.CubeUVRefractionMapping:E="ENVMAP_TYPE_CUBE_UV";break;case V.EquirectangularReflectionMapping:case V.EquirectangularRefractionMapping:E="ENVMAP_TYPE_EQUIREC";break;case V.SphericalReflectionMapping:E="ENVMAP_TYPE_SPHERE"}switch(t.envMap.mapping){case V.CubeRefractionMapping:case V.EquirectangularRefractionMapping:C="ENVMAP_MODE_REFRACTION"}switch(t.combine){case V.MultiplyOperation:D="ENVMAP_BLENDING_MULTIPLY";break;case V.MixOperation:D=
"ENVMAP_BLENDING_MIX";break;case V.AddOperation:D="ENVMAP_BLENDING_ADD"}}var F=0<a.gammaFactor?a.gammaFactor:1,v=e(v,q,a.extensions),H=g(y),B=r.createProgram();t instanceof V.RawShaderMaterial?x=y="":(y=["precision "+q.precision+" float;","precision "+q.precision+" int;","#define SHADER_NAME "+t.__webglShader.name,H,q.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+F,"#define MAX_BONES "+q.maxBones,q.map?"#define USE_MAP":"",q.envMap?"#define USE_ENVMAP":"",q.envMap?"#define "+
C:"",q.lightMap?"#define USE_LIGHTMAP":"",q.aoMap?"#define USE_AOMAP":"",q.emissiveMap?"#define USE_EMISSIVEMAP":"",q.bumpMap?"#define USE_BUMPMAP":"",q.normalMap?"#define USE_NORMALMAP":"",q.displacementMap&&q.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",q.specularMap?"#define USE_SPECULARMAP":"",q.roughnessMap?"#define USE_ROUGHNESSMAP":"",q.metalnessMap?"#define USE_METALNESSMAP":"",q.alphaMap?"#define USE_ALPHAMAP":"",q.vertexColors?"#define USE_COLOR":"",q.flatShading?"#define FLAT_SHADED":
"",q.skinning?"#define USE_SKINNING":"",q.useVertexTexture?"#define BONE_TEXTURE":"",q.morphTargets?"#define USE_MORPHTARGETS":"",q.morphNormals&&!1===q.flatShading?"#define USE_MORPHNORMALS":"",q.doubleSided?"#define DOUBLE_SIDED":"",q.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+q.numClippingPlanes,q.shadowMapEnabled?"#define USE_SHADOWMAP":"",q.shadowMapEnabled?"#define "+x:"",q.sizeAttenuation?"#define USE_SIZEATTENUATION":"",q.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":
"",q.logarithmicDepthBuffer&&a.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;",
"\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(h).join("\n"),x=[v,"precision "+
q.precision+" float;","precision "+q.precision+" int;","#define SHADER_NAME "+t.__webglShader.name,H,q.alphaTest?"#define ALPHATEST "+q.alphaTest:"","#define GAMMA_FACTOR "+F,q.useFog&&q.fog?"#define USE_FOG":"",q.useFog&&q.fogExp?"#define FOG_EXP2":"",q.map?"#define USE_MAP":"",q.envMap?"#define USE_ENVMAP":"",q.envMap?"#define "+E:"",q.envMap?"#define "+C:"",q.envMap?"#define "+D:"",q.lightMap?"#define USE_LIGHTMAP":"",q.aoMap?"#define USE_AOMAP":"",q.emissiveMap?"#define USE_EMISSIVEMAP":"",q.bumpMap?
"#define USE_BUMPMAP":"",q.normalMap?"#define USE_NORMALMAP":"",q.specularMap?"#define USE_SPECULARMAP":"",q.roughnessMap?"#define USE_ROUGHNESSMAP":"",q.metalnessMap?"#define USE_METALNESSMAP":"",q.alphaMap?"#define USE_ALPHAMAP":"",q.vertexColors?"#define USE_COLOR":"",q.flatShading?"#define FLAT_SHADED":"",q.doubleSided?"#define DOUBLE_SIDED":"",q.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+q.numClippingPlanes,q.shadowMapEnabled?"#define USE_SHADOWMAP":"",q.shadowMapEnabled?
"#define "+x:"",q.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",q.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",q.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",q.logarithmicDepthBuffer&&a.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",q.envMap&&a.extensions.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",q.toneMapping!==V.NoToneMapping?"#define TONE_MAPPING":"",q.toneMapping!==V.NoToneMapping?
V.ShaderChunk.tonemapping_pars_fragment:"",q.toneMapping!==V.NoToneMapping?d(q.toneMapping):"",q.outputEncoding||q.mapEncoding||q.envMapEncoding||q.emissiveMapEncoding?V.ShaderChunk.encodings_pars_fragment:"",q.mapEncoding?b("mapTexelToLinear",q.mapEncoding):"",q.envMapEncoding?b("envMapTexelToLinear",q.envMapEncoding):"",q.emissiveMapEncoding?b("emissiveMapTexelToLinear",q.emissiveMapEncoding):"",q.outputEncoding?c(q.outputEncoding):"",q.depthPacking?"#define DEPTH_PACKING "+t.depthPacking:"","\n"].filter(h).join("\n"));
z=l(z);z=k(z,q);A=l(A);A=k(A,q);!1===t instanceof V.ShaderMaterial&&(z=m(z),A=m(A));A=x+A;z=V.WebGLShader(r,r.VERTEX_SHADER,y+z);A=V.WebGLShader(r,r.FRAGMENT_SHADER,A);r.attachShader(B,z);r.attachShader(B,A);void 0!==t.index0AttributeName?r.bindAttribLocation(B,0,t.index0AttributeName):!0===q.morphTargets&&r.bindAttribLocation(B,0,"position");r.linkProgram(B);q=r.getProgramInfoLog(B);E=r.getShaderInfoLog(z);C=r.getShaderInfoLog(A);F=D=!0;if(!1===r.getProgramParameter(B,r.LINK_STATUS))D=!1,console.error("THREE.WebGLProgram: shader error: ",
r.getError(),"gl.VALIDATE_STATUS",r.getProgramParameter(B,r.VALIDATE_STATUS),"gl.getProgramInfoLog",q,E,C);else if(""!==q)console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",q);else if(""===E||""===C)F=!1;F&&(this.diagnostics={runnable:D,material:t,programLog:q,vertexShader:{log:E,prefix:y},fragmentShader:{log:C,prefix:x}});r.deleteShader(z);r.deleteShader(A);var L;this.getUniforms=function(){void 0===L&&(L=new V.WebGLUniforms(r,B,a));return L};var K;this.getAttributes=function(){if(void 0===
K){for(var a={},b=r.getProgramParameter(B,r.ACTIVE_ATTRIBUTES),c=0;c<b;c++){var d=r.getActiveAttrib(B,c).name;a[d]=r.getAttribLocation(B,d)}K=a}return K};this.destroy=function(){r.deleteProgram(B);this.program=void 0};Object.defineProperties(this,{uniforms:{get:function(){console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms().");return this.getUniforms()}},attributes:{get:function(){console.warn("THREE.WebGLProgram: .attributes is now .getAttributes().");return this.getAttributes()}}});
this.id=p++;this.code=n;this.usedTimes=1;this.program=B;this.vertexShader=z;this.fragmentShader=A;return this}}();
V.WebGLPrograms=function(a,b){function c(a,b){if(a)a instanceof V.Texture?c=a.encoding:a instanceof V.WebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),c=a.texture.encoding);else var c=V.LinearEncoding;c===V.LinearEncoding&&b&&(c=V.GammaEncoding);return c}var d=[],e={MeshDepthMaterial:"depth",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",
MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points"},g="precision supportsVertexTextures map mapEncoding envMap envMapMode envMapEncoding lightMap aoMap emissiveMap emissiveMapEncoding bumpMap normalMap displacementMap specularMap roughnessMap metalnessMap alphaMap combine vertexColors fog useFog fogExp flatShading sizeAttenuation logarithmicDepthBuffer skinning maxBones useVertexTexture morphTargets morphNormals maxMorphTargets maxMorphNormals premultipliedAlpha numDirLights numPointLights numSpotLights numHemiLights shadowMapEnabled shadowMapType toneMapping physicallyCorrectLights alphaTest doubleSided flipSided numClippingPlanes depthPacking".split(" ");
this.getParameters=function(d,g,l,m,p){var h=e[d.type];if(b.floatVertexTextures&&p&&p.skeleton&&p.skeleton.useVertexTexture)var k=1024;else k=Math.floor((b.maxVertexUniforms-20)/4),void 0!==p&&p instanceof V.SkinnedMesh&&(k=Math.min(p.skeleton.bones.length,k),k<p.skeleton.bones.length&&console.warn("WebGLRenderer: too many bones - "+p.skeleton.bones.length+", this GPU supports just "+k+" (try OpenGL instead of ANGLE)"));var t=a.getPrecision();null!==d.precision&&(t=b.getMaxPrecision(d.precision),
t!==d.precision&&console.warn("THREE.WebGLProgram.getParameters:",d.precision,"not supported, using",t,"instead."));var q=a.getCurrentRenderTarget();return{shaderID:h,precision:t,supportsVertexTextures:b.vertexTextures,outputEncoding:c(q?q.texture:null,a.gammaOutput),map:!!d.map,mapEncoding:c(d.map,a.gammaInput),envMap:!!d.envMap,envMapMode:d.envMap&&d.envMap.mapping,envMapEncoding:c(d.envMap,a.gammaInput),envMapCubeUV:!!d.envMap&&(d.envMap.mapping===V.CubeUVReflectionMapping||d.envMap.mapping===
V.CubeUVRefractionMapping),lightMap:!!d.lightMap,aoMap:!!d.aoMap,emissiveMap:!!d.emissiveMap,emissiveMapEncoding:c(d.emissiveMap,a.gammaInput),bumpMap:!!d.bumpMap,normalMap:!!d.normalMap,displacementMap:!!d.displacementMap,roughnessMap:!!d.roughnessMap,metalnessMap:!!d.metalnessMap,specularMap:!!d.specularMap,alphaMap:!!d.alphaMap,combine:d.combine,vertexColors:d.vertexColors,fog:l,useFog:d.fog,fogExp:l instanceof V.FogExp2,flatShading:d.shading===V.FlatShading,sizeAttenuation:d.sizeAttenuation,logarithmicDepthBuffer:b.logarithmicDepthBuffer,
skinning:d.skinning,maxBones:k,useVertexTexture:b.floatVertexTextures&&p&&p.skeleton&&p.skeleton.useVertexTexture,morphTargets:d.morphTargets,morphNormals:d.morphNormals,maxMorphTargets:a.maxMorphTargets,maxMorphNormals:a.maxMorphNormals,numDirLights:g.directional.length,numPointLights:g.point.length,numSpotLights:g.spot.length,numHemiLights:g.hemi.length,numClippingPlanes:m,shadowMapEnabled:a.shadowMap.enabled&&p.receiveShadow&&0<g.shadows.length,shadowMapType:a.shadowMap.type,toneMapping:a.toneMapping,
physicallyCorrectLights:a.physicallyCorrectLights,premultipliedAlpha:d.premultipliedAlpha,alphaTest:d.alphaTest,doubleSided:d.side===V.DoubleSide,flipSided:d.side===V.BackSide,depthPacking:void 0!==d.depthPacking?d.depthPacking:!1}};this.getProgramCode=function(a,b){var c=[];b.shaderID?c.push(b.shaderID):(c.push(a.fragmentShader),c.push(a.vertexShader));if(void 0!==a.defines)for(var d in a.defines)c.push(d),c.push(a.defines[d]);for(a=0;a<g.length;a++)c.push(b[g[a]]);return c.join()};this.acquireProgram=
function(b,c,e){for(var g,h=0,k=d.length;h<k;h++){var l=d[h];if(l.code===e){g=l;++g.usedTimes;break}}void 0===g&&(g=new V.WebGLProgram(a,e,b,c),d.push(g));return g};this.releaseProgram=function(a){0===--a.usedTimes&&(d[d.indexOf(a)]=d[d.length-1],d.pop(),a.destroy())};this.programs=d};V.WebGLProperties=function(){var a={};this.get=function(b){b=b.uuid;var c=a[b];void 0===c&&(c={},a[b]=c);return c};this.delete=function(b){delete a[b.uuid]};this.clear=function(){a={}}};
V.WebGLShader=function(){function a(a){a=a.split("\n");for(var b=0;b<a.length;b++)a[b]=b+1+": "+a[b];return a.join("\n")}return function(b,c,d){var e=b.createShader(c);b.shaderSource(e,d);b.compileShader(e);!1===b.getShaderParameter(e,b.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile.");""!==b.getShaderInfoLog(e)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",c===b.VERTEX_SHADER?"vertex":"fragment",b.getShaderInfoLog(e),a(d));return e}}();
V.WebGLShadowMap=function(a,b,c){function d(b,c,d,e){var g=b.geometry,h=q,k=b.customDepthMaterial;d&&(h=u,k=b.customDistanceMaterial);k?g=k:(b=b instanceof V.SkinnedMesh&&c.skinning,k=0,void 0!==g.morphTargets&&0<g.morphTargets.length&&c.morphTargets&&(k|=1),b&&(k|=2),g=h[k]);a.localClippingEnabled&&!0===c.clipShadows&&0!==c.clippingPlanes.length&&(k=g.uuid,h=c.uuid,b=v[k],void 0===b&&(b={},v[k]=b),k=b[h],void 0===k&&(k=g.clone(),b[h]=k),g=k);g.visible=c.visible;g.wireframe=c.wireframe;h=c.side;B.renderSingleSided&&
h==V.DoubleSide&&(h=V.FrontSide);B.renderReverseSided&&(h===V.FrontSide?h=V.BackSide:h===V.BackSide&&(h=V.FrontSide));g.side=h;g.clipShadows=c.clipShadows;g.clippingPlanes=c.clippingPlanes;g.wireframeLinewidth=c.wireframeLinewidth;g.linewidth=c.linewidth;d&&void 0!==g.uniforms.lightPos&&g.uniforms.lightPos.value.copy(e);return g}function e(a,b,c){if(!1!==a.visible){a.layers.test(b.layers)&&(a instanceof V.Mesh||a instanceof V.Line||a instanceof V.Points)&&a.castShadow&&(!1===a.frustumCulled||!0===
k.intersectsObject(a))&&!0===a.material.visible&&(Pa(a.modelViewMatrix,c.matrixWorldInverse,a.matrixWorld),t.push(a));a=a.children;for(var d=0,g=a.length;d<g;d++)e(a[d],b,c)}}var g=a.context,h=a.state,k=new V.Frustum,l=new V.Matrix4,m=b.shadows,p=new V.Vector2,r=new V.Vector3,n=new V.Vector3,t=[],q=Array(4),u=Array(4),v={},y=[new V.Vector3(1,0,0),new V.Vector3(-1,0,0),new V.Vector3(0,0,1),new V.Vector3(0,0,-1),new V.Vector3(0,1,0),new V.Vector3(0,-1,0)],z=[new V.Vector3(0,1,0),new V.Vector3(0,1,0),
new V.Vector3(0,1,0),new V.Vector3(0,1,0),new V.Vector3(0,0,1),new V.Vector3(0,0,-1)],A=[new V.Vector4,new V.Vector4,new V.Vector4,new V.Vector4,new V.Vector4,new V.Vector4];b=new V.MeshDepthMaterial;b.depthPacking=V.RGBADepthPacking;b.clipping=!0;for(var x=V.ShaderLib.distanceRGBA,E=V.UniformsUtils.clone(x.uniforms),C=0;4!==C;++C){var D=0!==(C&1),F=0!==(C&2),H=b.clone();H.morphTargets=D;H.skinning=F;q[C]=H;D=new V.ShaderMaterial({defines:{USE_SHADOWMAP:""},uniforms:E,vertexShader:x.vertexShader,
fragmentShader:x.fragmentShader,morphTargets:D,skinning:F,clipping:!0});u[C]=D}var B=this;this.enabled=!1;this.autoUpdate=!0;this.needsUpdate=!1;this.type=V.PCFShadowMap;this.renderSingleSided=this.renderReverseSided=!0;this.render=function(b,q){if(!1!==B.enabled&&(!1!==B.autoUpdate||!1!==B.needsUpdate)&&0!==m.length){h.clearColor(1,1,1,1);h.disable(g.BLEND);h.setDepthTest(!0);h.setScissorTest(!1);for(var u,v,x=0,E=m.length;x<E;x++){var C=m[x],G=C.shadow;if(void 0===G)console.warn("THREE.WebGLShadowMap:",
C,"has no shadow.");else{var J=G.camera;p.copy(G.mapSize);if(C instanceof V.PointLight){u=6;v=!0;var D=p.x,F=p.y;A[0].set(2*D,F,D,F);A[1].set(0,F,D,F);A[2].set(3*D,F,D,F);A[3].set(D,F,D,F);A[4].set(3*D,0,D,F);A[5].set(D,0,D,F);p.x*=4;p.y*=2}else u=1,v=!1;null===G.map&&(G.map=new V.WebGLRenderTarget(p.x,p.y,{minFilter:V.NearestFilter,magFilter:V.NearestFilter,format:V.RGBAFormat}),J.updateProjectionMatrix());G instanceof V.SpotLightShadow&&G.update(C);D=G.map;G=G.matrix;W(n,C.matrixWorld);J.position.copy(n);
a.setRenderTarget(D);a.clear();for(D=0;D<u;D++){v?(r.copy(J.position),r.add(y[D]),J.up.copy(z[D]),J.lookAt(r),h.viewport(A[D])):(W(r,C.target.matrixWorld),J.lookAt(r));J.updateMatrixWorld();J.matrixWorldInverse.getInverse(J.matrixWorld);G.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1);G.multiply(J.projectionMatrix);G.multiply(J.matrixWorldInverse);Pa(l,J.projectionMatrix,J.matrixWorldInverse);ob(k,l);t.length=0;e(b,q,J);for(var F=0,X=t.length;F<X;F++){var H=t[F],K=c.update(H),L=H.material;if(L instanceof
V.MultiMaterial)for(var ca=K.groups,L=L.materials,Ba=0,Ma=ca.length;Ba<Ma;Ba++){var Ca=ca[Ba];var ma=L[Ca.materialIndex];!0===ma.visible&&(ma=d(H,ma,v,n),a.renderBufferDirect(J,null,K,ma,H,Ca))}else ma=d(H,L,v,n),a.renderBufferDirect(J,null,K,ma,H,null)}}}}a.setClearColor(a.getClearColor(),a.getClearAlpha());B.needsUpdate=!1}}};
V.WebGLState=function(a,b,c){function d(b,c,d){var e=new Uint8Array(3),g=a.createTexture();a.bindTexture(b,g);a.texParameteri(b,a.TEXTURE_MIN_FILTER,a.NEAREST);a.texParameteri(b,a.TEXTURE_MAG_FILTER,a.NEAREST);for(b=0;b<d;b++)a.texImage2D(c+b,0,a.RGB,1,1,0,a.RGB,a.UNSIGNED_BYTE,e);return g}var e=this;this.buffers={color:new V.WebGLColorBuffer(a),depth:new V.WebGLDepthBuffer(a,this),stencil:new V.WebGLStencilBuffer(a,this)};var g=a.getParameter(a.MAX_VERTEX_ATTRIBS),h=new Uint8Array(g),k=new Uint8Array(g),
l=new Uint8Array(g),m={},p=null,r=null,n=null,t=null,q=null,u=null,v=null,y=null,z=!1,A=null,x=null,E=null,C=null,D=null,F=null,H=a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS),B=null,L={},K=new V.Vector4,R=new V.Vector4,Q={};Q[a.TEXTURE_2D]=d(a.TEXTURE_2D,a.TEXTURE_2D,1);Q[a.TEXTURE_CUBE_MAP]=d(a.TEXTURE_CUBE_MAP,a.TEXTURE_CUBE_MAP_POSITIVE_X,6);this.init=function(){this.clearColor(0,0,0,1);this.clearDepth(1);this.clearStencil(0);this.enable(a.DEPTH_TEST);this.setDepthFunc(V.LessEqualDepth);this.setFlipSided(!1);
this.setCullFace(V.CullFaceBack);this.enable(a.CULL_FACE);this.enable(a.BLEND);this.setBlending(V.NormalBlending)};this.initAttributes=function(){for(var a=0,b=h.length;a<b;a++)h[a]=0};this.enableAttribute=function(c){h[c]=1;0===k[c]&&(a.enableVertexAttribArray(c),k[c]=1);0!==l[c]&&(b.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(c,0),l[c]=0)};this.enableAttributeAndDivisor=function(b,c,d){h[b]=1;0===k[b]&&(a.enableVertexAttribArray(b),k[b]=1);l[b]!==c&&(d.vertexAttribDivisorANGLE(b,c),l[b]=
c)};this.disableUnusedAttributes=function(){for(var b=0,c=k.length;b!==c;++b)k[b]!==h[b]&&(a.disableVertexAttribArray(b),k[b]=0)};this.enable=function(b){!0!==m[b]&&(a.enable(b),m[b]=!0)};this.disable=function(b){!1!==m[b]&&(a.disable(b),m[b]=!1)};this.getCompressedTextureFormats=function(){if(null===p&&(p=[],b.get("WEBGL_compressed_texture_pvrtc")||b.get("WEBGL_compressed_texture_s3tc")||b.get("WEBGL_compressed_texture_etc1")))for(var c=a.getParameter(a.COMPRESSED_TEXTURE_FORMATS),d=0;d<c.length;d++)p.push(c[d]);
return p};this.setBlending=function(b,d,e,g,h,k,l,m){if(b!==V.NoBlending){this.enable(a.BLEND);if(b!==r||m!==z)b===V.AdditiveBlending?m?(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.ONE,a.ONE,a.ONE,a.ONE)):(a.blendEquation(a.FUNC_ADD),a.blendFunc(a.SRC_ALPHA,a.ONE)):b===V.SubtractiveBlending?m?(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.ZERO,a.ZERO,a.ONE_MINUS_SRC_COLOR,a.ONE_MINUS_SRC_ALPHA)):(a.blendEquation(a.FUNC_ADD),a.blendFunc(a.ZERO,a.ONE_MINUS_SRC_COLOR)):
b===V.MultiplyBlending?m?(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.ZERO,a.SRC_COLOR,a.ZERO,a.SRC_ALPHA)):(a.blendEquation(a.FUNC_ADD),a.blendFunc(a.ZERO,a.SRC_COLOR)):m?(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.ONE,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA)):(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA)),r=b,z=m;if(b===V.CustomBlending){h=h||d;k=k||e;
l=l||g;if(d!==n||h!==u)a.blendEquationSeparate(c(d),c(h)),n=d,u=h;if(e!==t||g!==q||k!==v||l!==y)a.blendFuncSeparate(c(e),c(g),c(k),c(l)),t=e,q=g,v=k,y=l}else y=v=u=q=t=n=null}else this.disable(a.BLEND),r=b};this.setColorWrite=function(a){this.buffers.color.setMask(a)};this.setDepthTest=function(a){this.buffers.depth.setTest(a)};this.setDepthWrite=function(a){this.buffers.depth.setMask(a)};this.setDepthFunc=function(a){this.buffers.depth.setFunc(a)};this.setStencilTest=function(a){this.buffers.stencil.setTest(a)};
this.setStencilWrite=function(a){this.buffers.stencil.setMask(a)};this.setStencilFunc=function(a,b,c){this.buffers.stencil.setFunc(a,b,c)};this.setStencilOp=function(a,b,c){this.buffers.stencil.setOp(a,b,c)};this.setFlipSided=function(b){A!==b&&(b?a.frontFace(a.CW):a.frontFace(a.CCW),A=b)};this.setCullFace=function(b){b!==V.CullFaceNone?(this.enable(a.CULL_FACE),b!==x&&(b===V.CullFaceBack?a.cullFace(a.BACK):b===V.CullFaceFront?a.cullFace(a.FRONT):a.cullFace(a.FRONT_AND_BACK))):this.disable(a.CULL_FACE);
x=b};this.setLineWidth=function(b){b!==E&&(a.lineWidth(b),E=b)};this.setPolygonOffset=function(b,c,d){if(b){if(this.enable(a.POLYGON_OFFSET_FILL),C!==c||D!==d)a.polygonOffset(c,d),C=c,D=d}else this.disable(a.POLYGON_OFFSET_FILL)};this.getScissorTest=function(){return F};this.setScissorTest=function(b){(F=b)?this.enable(a.SCISSOR_TEST):this.disable(a.SCISSOR_TEST)};this.activeTexture=function(b){void 0===b&&(b=a.TEXTURE0+H-1);B!==b&&(a.activeTexture(b),B=b)};this.bindTexture=function(b,c){null===B&&
e.activeTexture();var d=L[B];void 0===d&&(d={type:void 0,texture:void 0},L[B]=d);if(d.type!==b||d.texture!==c)a.bindTexture(b,c||Q[b]),d.type=b,d.texture=c};this.compressedTexImage2D=function(){try{a.compressedTexImage2D.apply(a,arguments)}catch(I){console.error(I)}};this.texImage2D=function(){try{a.texImage2D.apply(a,arguments)}catch(I){console.error(I)}};this.clearColor=function(a,b,c,d){this.buffers.color.setClear(a,b,c,d)};this.clearDepth=function(a){this.buffers.depth.setClear(a)};this.clearStencil=
function(a){this.buffers.stencil.setClear(a)};this.scissor=function(b){!1===K.equals(b)&&(a.scissor(b.x,b.y,b.z,b.w),K.copy(b))};this.viewport=function(b){!1===R.equals(b)&&(a.viewport(b.x,b.y,b.z,b.w),R.copy(b))};this.reset=function(){for(var b=0;b<k.length;b++)1===k[b]&&(a.disableVertexAttribArray(b),k[b]=0);m={};B=p=null;L={};x=A=r=null;this.buffers.color.reset();this.buffers.depth.reset();this.buffers.stencil.reset()}};
V.WebGLColorBuffer=function(a){var b=!1,c=new V.Vector4,d=null,e=new V.Vector4;this.setMask=function(c){d===c||b||(a.colorMask(c,c,c,c),d=c)};this.setLocked=function(a){b=a};this.setClear=function(b,d,k,l){c.set(b,d,k,l);!1===e.equals(c)&&(a.clearColor(b,d,k,l),e.copy(c))};this.reset=function(){b=!1;d=null;e=new V.Vector4}};
V.WebGLDepthBuffer=function(a,b){var c=!1,d=null,e=null,g=null;this.setTest=function(c){c?b.enable(a.DEPTH_TEST):b.disable(a.DEPTH_TEST)};this.setMask=function(b){d===b||c||(a.depthMask(b),d=b)};this.setFunc=function(b){if(e!==b){if(b)switch(b){case V.NeverDepth:a.depthFunc(a.NEVER);break;case V.AlwaysDepth:a.depthFunc(a.ALWAYS);break;case V.LessDepth:a.depthFunc(a.LESS);break;case V.LessEqualDepth:a.depthFunc(a.LEQUAL);break;case V.EqualDepth:a.depthFunc(a.EQUAL);break;case V.GreaterEqualDepth:a.depthFunc(a.GEQUAL);
break;case V.GreaterDepth:a.depthFunc(a.GREATER);break;case V.NotEqualDepth:a.depthFunc(a.NOTEQUAL);break;default:a.depthFunc(a.LEQUAL)}else a.depthFunc(a.LEQUAL);e=b}};this.setLocked=function(a){c=a};this.setClear=function(b){g!==b&&(a.clearDepth(b),g=b)};this.reset=function(){c=!1;g=e=d=null}};
V.WebGLStencilBuffer=function(a,b){var c=!1,d=null,e=null,g=null,h=null,k=null,l=null,m=null,p=null;this.setTest=function(c){c?b.enable(a.STENCIL_TEST):b.disable(a.STENCIL_TEST)};this.setMask=function(b){d===b||c||(a.stencilMask(b),d=b)};this.setFunc=function(b,c,d){if(e!==b||g!==c||h!==d)a.stencilFunc(b,c,d),e=b,g=c,h=d};this.setOp=function(b,c,d){if(k!==b||l!==c||m!==d)a.stencilOp(b,c,d),k=b,l=c,m=d};this.setLocked=function(a){c=a};this.setClear=function(b){p!==b&&(a.clearStencil(b),p=b)};this.reset=
function(){c=!1;p=m=l=k=h=g=e=d=null}};
V.WebGLUniforms=function(){function a(a,e,g){this.seq=[];this.map={};this.renderer=g;g=a.getProgramParameter(e,a.ACTIVE_UNIFORMS);for(var h=0;h!==g;++h){var k=a.getActiveUniform(e,h),l=k,k=a.getUniformLocation(e,k.name),m=this,n=l.name,p=n.length;for(O.lastIndex=0;;){var q=O.exec(n),r=O.lastIndex,t=q[1],u=q[3];"]"===q[2]&&(t|=0);if(void 0===u||"["===u&&r+2===p){n=m;l=void 0===u?new d(t,l,k):new c(t,l,k);n.seq.push(l);n.map[l.id]=l;break}else u=m.map[t],void 0===u&&(u=new b(t),t=m,m=u,t.seq.push(m),
t.map[m.id]=m),m=u}}}function b(a){this.id=a;this.seq=[];this.map={}}function c(a,b,c){this.id=a;this.addr=c;this.size=b.size;this.setValue=e(b.type)}function d(a,b,c){this.id=a;this.addr=c;this.setValue=u(b.type)}function e(a){switch(a){case 5126:return q;case 35664:return n;case 35665:return r;case 35666:return p;case 35674:return m;case 35675:return l;case 35676:return k;case 35678:return h;case 35680:return g;case 5124:case 35670:return t;case 35667:case 35671:return z;case 35668:case 35672:return y;
case 35669:case 35673:return v}}function g(a,b,c){var d=b.length,e=R(c,d);a.uniform1iv(this.addr,e);for(a=0;a!==d;++a){var g=b[a];g&&c.setTextureCube(g,e[a])}}function h(a,b,c){var d=b.length,e=R(c,d);a.uniform1iv(this.addr,e);for(a=0;a!==d;++a){var g=b[a];g&&c.setTexture2D(g,e[a])}}function k(a,b){a.uniformMatrix4fv(this.addr,!1,Q(b,this.size,16))}function l(a,b){a.uniformMatrix3fv(this.addr,!1,Q(b,this.size,9))}function m(a,b){a.uniformMatrix2fv(this.addr,!1,Q(b,this.size,4))}function p(a,b){a.uniform4fv(this.addr,
Q(b,this.size,4))}function r(a,b){a.uniform3fv(this.addr,Q(b,this.size,3))}function n(a,b){a.uniform2fv(this.addr,Q(b,this.size,2))}function t(a,b){a.uniform1iv(this.addr,b)}function q(a,b){a.uniform1fv(this.addr,b)}function u(a){switch(a){case 5126:return K;case 35664:return B;case 35665:return H;case 35666:return F;case 35674:return D;case 35675:return C;case 35676:return E;case 35678:return x;case 35680:return A;case 5124:case 35670:return L;case 35667:case 35671:return z;case 35668:case 35672:return y;
case 35669:case 35673:return v}}function v(a,b){a.uniform4iv(this.addr,b)}function y(a,b){a.uniform3iv(this.addr,b)}function z(a,b){a.uniform2iv(this.addr,b)}function A(a,b,c){var d=c.allocTextureUnit();a.uniform1i(this.addr,d);b&&c.setTextureCube(b,d)}function x(a,b,c){var d=c.allocTextureUnit();a.uniform1i(this.addr,d);b&&c.setTexture2D(b,d)}function E(a,b){a.uniformMatrix4fv(this.addr,!1,b.elements||b)}function C(a,b){a.uniformMatrix3fv(this.addr,!1,b.elements||b)}function D(a,b){a.uniformMatrix2fv(this.addr,
!1,b.elements||b)}function F(a,b){void 0===b.x?a.uniform4fv(this.addr,b):a.uniform4f(this.addr,b.x,b.y,b.z,b.w)}function H(a,b){void 0!==b.x?a.uniform3f(this.addr,b.x,b.y,b.z):void 0!==b.r?a.uniform3f(this.addr,b.r,b.g,b.b):a.uniform3fv(this.addr,b)}function B(a,b){void 0===b.x?a.uniform2fv(this.addr,b):a.uniform2f(this.addr,b.x,b.y)}function L(a,b){a.uniform1i(this.addr,b)}function K(a,b){a.uniform1f(this.addr,b)}function R(a,b){var c=P[b];void 0===c&&(c=new Int32Array(b),P[b]=c);for(var d=0;d!==
b;++d)c[d]=a.allocTextureUnit();return c}function Q(a,b,c){var d=a[0];if(0>=d||0<d)return a;var e=b*c,g=I[e];void 0===g&&(g=new Float32Array(e),I[e]=g);if(0!==b)for(d.toArray(g,0),d=1,e=0;d!==b;++d)e+=c,a[d].toArray(g,e);return g}var I=[],P=[];b.prototype.setValue=function(a,b){for(var c=this.seq,d=0,e=c.length;d!==e;++d){var g=c[d];g.setValue(a,b[g.id])}};var O=/([\w\d_]+)(\])?(\[|\.)?/g;a.prototype.setValue=function(a,b,c){b=this.map[b];void 0!==b&&b.setValue(a,c,this.renderer)};a.prototype.set=
function(a,b,c){var d=this.map[c];void 0!==d&&d.setValue(a,b[c],this.renderer)};a.prototype.setOptional=function(a,b,c){b=b[c];void 0!==b&&this.setValue(a,c,b)};a.upload=function(a,b,c,d){for(var e=0,g=b.length;e!==g;++e){var h=b[e],k=c[h.id];!1!==k.needsUpdate&&h.setValue(a,k.value,d)}};a.seqWithValue=function(a,b){for(var c=[],d=0,e=a.length;d!==e;++d){var g=a[d];g.id in b&&c.push(g)}return c};a.splitDynamic=function(a,b){for(var c=null,d=a.length,e=0,g=0;g!==d;++g){var h=a[g],k=b[h.id];k&&!0===
k.dynamic?(null===c&&(c=[]),c.push(h)):(e<g&&(a[e]=h),++e)}e<d&&(a.length=e);return c};a.evalDynamic=function(a,b,c,d){for(var e=0,g=a.length;e!==g;++e){var h=b[a[e].id],k=h.onUpdateCallback;void 0!==k&&k.call(h,c,d)}};return a}();
V.LensFlarePlugin=function(a,b){var c,d,e,g,h,k,l,m,p,r,n=a.context,t=a.state,q,u,v,y,z,A;this.render=function(x,E,C){if(0!==b.length){x=new V.Vector3;var D=C.w/C.z,F=.5*C.z,H=.5*C.w,B=16/C.w,L=new V.Vector2(B*D,B),K=new V.Vector3(1,1,0),R=new V.Vector2(1,1),Q=new V.Box2;Q.min.set(0,0);Q.max.set(C.z-16,C.w-16);if(void 0===y){var B=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),I=new Uint16Array([0,1,2,0,2,3]);q=n.createBuffer();u=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,q);n.bufferData(n.ARRAY_BUFFER,
B,n.STATIC_DRAW);n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,u);n.bufferData(n.ELEMENT_ARRAY_BUFFER,I,n.STATIC_DRAW);z=n.createTexture();A=n.createTexture();t.bindTexture(n.TEXTURE_2D,z);n.texImage2D(n.TEXTURE_2D,0,n.RGB,16,16,0,n.RGB,n.UNSIGNED_BYTE,null);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST);t.bindTexture(n.TEXTURE_2D,
A);n.texImage2D(n.TEXTURE_2D,0,n.RGBA,16,16,0,n.RGBA,n.UNSIGNED_BYTE,null);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST);var B=v={vertexShader:"uniform lowp int renderType;\nuniform vec3 screenPosition;\nuniform vec2 scale;\nuniform float rotation;\nuniform sampler2D occlusionMap;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nvUV \x3d uv;\nvec2 pos \x3d position;\nif ( renderType \x3d\x3d 2 ) {\nvec4 visibility \x3d texture2D( occlusionMap, vec2( 0.1, 0.1 ) );\nvisibility +\x3d texture2D( occlusionMap, vec2( 0.5, 0.1 ) );\nvisibility +\x3d texture2D( occlusionMap, vec2( 0.9, 0.1 ) );\nvisibility +\x3d texture2D( occlusionMap, vec2( 0.9, 0.5 ) );\nvisibility +\x3d texture2D( occlusionMap, vec2( 0.9, 0.9 ) );\nvisibility +\x3d texture2D( occlusionMap, vec2( 0.5, 0.9 ) );\nvisibility +\x3d texture2D( occlusionMap, vec2( 0.1, 0.9 ) );\nvisibility +\x3d texture2D( occlusionMap, vec2( 0.1, 0.5 ) );\nvisibility +\x3d texture2D( occlusionMap, vec2( 0.5, 0.5 ) );\nvVisibility \x3d        visibility.r / 9.0;\nvVisibility *\x3d 1.0 - visibility.g / 9.0;\nvVisibility *\x3d       visibility.b / 9.0;\nvVisibility *\x3d 1.0 - visibility.a / 9.0;\npos.x \x3d cos( rotation ) * position.x - sin( rotation ) * position.y;\npos.y \x3d sin( rotation ) * position.x + cos( rotation ) * position.y;\n}\ngl_Position \x3d vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\n}",
fragmentShader:"uniform lowp int renderType;\nuniform sampler2D map;\nuniform float opacity;\nuniform vec3 color;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nif ( renderType \x3d\x3d 0 ) {\ngl_FragColor \x3d vec4( 1.0, 0.0, 1.0, 0.0 );\n} else if ( renderType \x3d\x3d 1 ) {\ngl_FragColor \x3d texture2D( map, vUV );\n} else {\nvec4 texture \x3d texture2D( map, vUV );\ntexture.a *\x3d opacity * vVisibility;\ngl_FragColor \x3d texture;\ngl_FragColor.rgb *\x3d color;\n}\n}"},I=n.createProgram(),
P=n.createShader(n.FRAGMENT_SHADER),O=n.createShader(n.VERTEX_SHADER),G="precision "+a.getPrecision()+" float;\n";n.shaderSource(P,G+B.fragmentShader);n.shaderSource(O,G+B.vertexShader);n.compileShader(P);n.compileShader(O);n.attachShader(I,P);n.attachShader(I,O);n.linkProgram(I);y=I;p=n.getAttribLocation(y,"position");r=n.getAttribLocation(y,"uv");c=n.getUniformLocation(y,"renderType");d=n.getUniformLocation(y,"map");e=n.getUniformLocation(y,"occlusionMap");g=n.getUniformLocation(y,"opacity");h=
n.getUniformLocation(y,"color");k=n.getUniformLocation(y,"scale");l=n.getUniformLocation(y,"rotation");m=n.getUniformLocation(y,"screenPosition")}n.useProgram(y);t.initAttributes();t.enableAttribute(p);t.enableAttribute(r);t.disableUnusedAttributes();n.uniform1i(e,0);n.uniform1i(d,1);n.bindBuffer(n.ARRAY_BUFFER,q);n.vertexAttribPointer(p,2,n.FLOAT,!1,16,0);n.vertexAttribPointer(r,2,n.FLOAT,!1,16,8);n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,u);t.disable(n.CULL_FACE);t.setDepthWrite(!1);I=0;for(P=b.length;I<
P;I++)if(B=16/C.w,L.set(B*D,B),O=b[I],x.set(O.matrixWorld.elements[12],O.matrixWorld.elements[13],O.matrixWorld.elements[14]),x.applyMatrix4(E.matrixWorldInverse),Qa(x,E.projectionMatrix),K.copy(x),R.x=C.x+K.x*F+F-8,R.y=C.y+K.y*H+H-8,!0===Q.containsPoint(R)){t.activeTexture(n.TEXTURE0);t.bindTexture(n.TEXTURE_2D,null);t.activeTexture(n.TEXTURE1);t.bindTexture(n.TEXTURE_2D,z);n.copyTexImage2D(n.TEXTURE_2D,0,n.RGB,R.x,R.y,16,16,0);n.uniform1i(c,0);n.uniform2f(k,L.x,L.y);n.uniform3f(m,K.x,K.y,K.z);t.disable(n.BLEND);
t.enable(n.DEPTH_TEST);n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0);t.activeTexture(n.TEXTURE0);t.bindTexture(n.TEXTURE_2D,A);n.copyTexImage2D(n.TEXTURE_2D,0,n.RGBA,R.x,R.y,16,16,0);n.uniform1i(c,1);t.disable(n.DEPTH_TEST);t.activeTexture(n.TEXTURE1);t.bindTexture(n.TEXTURE_2D,z);n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0);O.positionScreen.copy(K);O.customUpdateCallback?O.customUpdateCallback(O):O.updateLensFlares();n.uniform1i(c,2);t.enable(n.BLEND);for(var G=0,J=O.lensFlares.length;G<J;G++){var N=
O.lensFlares[G];.001<N.opacity&&.001<N.scale&&(K.x=N.x,K.y=N.y,K.z=N.z,B=N.size*N.scale/C.w,L.x=B*D,L.y=B,n.uniform3f(m,K.x,K.y,K.z),n.uniform2f(k,L.x,L.y),n.uniform1f(l,N.rotation),n.uniform1f(g,N.opacity),n.uniform3f(h,N.color.r,N.color.g,N.color.b),t.setBlending(N.blending,N.blendEquation,N.blendSrc,N.blendDst),a.setTexture2D(N.texture,1),n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0))}}t.enable(n.CULL_FACE);t.enable(n.DEPTH_TEST);t.setDepthWrite(!0);a.resetGLState()}}};
V.SpritePlugin=function(a,b){var c,d,e,g,h,k,l,m,p,r,n,t,q,u,v,y,z;function A(a,b){return a.renderOrder!==b.renderOrder?a.renderOrder-b.renderOrder:a.z!==b.z?b.z-a.z:b.id-a.id}var x=a.context,E=a.state,C,D,F,H,B=new V.Vector3,L=new V.Quaternion,K=new V.Vector3;this.render=function(R,Q){if(0!==b.length){if(void 0===F){var I=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),P=new Uint16Array([0,1,2,0,2,3]);C=x.createBuffer();D=x.createBuffer();x.bindBuffer(x.ARRAY_BUFFER,C);x.bufferData(x.ARRAY_BUFFER,
I,x.STATIC_DRAW);x.bindBuffer(x.ELEMENT_ARRAY_BUFFER,D);x.bufferData(x.ELEMENT_ARRAY_BUFFER,P,x.STATIC_DRAW);var I=x.createProgram(),P=x.createShader(x.VERTEX_SHADER),O=x.createShader(x.FRAGMENT_SHADER);x.shaderSource(P,["precision "+a.getPrecision()+" float;","uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float rotation;\nuniform vec2 scale;\nuniform vec2 uvOffset;\nuniform vec2 uvScale;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvoid main() {\nvUV \x3d uvOffset + uv * uvScale;\nvec2 alignedPosition \x3d position * scale;\nvec2 rotatedPosition;\nrotatedPosition.x \x3d cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\nrotatedPosition.y \x3d sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\nvec4 finalPosition;\nfinalPosition \x3d modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\nfinalPosition.xy +\x3d rotatedPosition;\nfinalPosition \x3d projectionMatrix * finalPosition;\ngl_Position \x3d finalPosition;\n}"].join("\n"));
x.shaderSource(O,["precision "+a.getPrecision()+" float;","uniform vec3 color;\nuniform sampler2D map;\nuniform float opacity;\nuniform int fogType;\nuniform vec3 fogColor;\nuniform float fogDensity;\nuniform float fogNear;\nuniform float fogFar;\nuniform float alphaTest;\nvarying vec2 vUV;\nvoid main() {\nvec4 texture \x3d texture2D( map, vUV );\nif ( texture.a \x3c alphaTest ) discard;\ngl_FragColor \x3d vec4( color * texture.xyz, texture.a * opacity );\nif ( fogType \x3e 0 ) {\nfloat depth \x3d gl_FragCoord.z / gl_FragCoord.w;\nfloat fogFactor \x3d 0.0;\nif ( fogType \x3d\x3d 1 ) {\nfogFactor \x3d smoothstep( fogNear, fogFar, depth );\n} else {\nconst float LOG2 \x3d 1.442695;\nfogFactor \x3d exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\nfogFactor \x3d 1.0 - clamp( fogFactor, 0.0, 1.0 );\n}\ngl_FragColor \x3d mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n}\n}"].join("\n"));
x.compileShader(P);x.compileShader(O);x.attachShader(I,P);x.attachShader(I,O);x.linkProgram(I);F=I;y=x.getAttribLocation(F,"position");z=x.getAttribLocation(F,"uv");c=x.getUniformLocation(F,"uvOffset");d=x.getUniformLocation(F,"uvScale");e=x.getUniformLocation(F,"rotation");g=x.getUniformLocation(F,"scale");h=x.getUniformLocation(F,"color");k=x.getUniformLocation(F,"map");l=x.getUniformLocation(F,"opacity");m=x.getUniformLocation(F,"modelViewMatrix");p=x.getUniformLocation(F,"projectionMatrix");r=
x.getUniformLocation(F,"fogType");n=x.getUniformLocation(F,"fogDensity");t=x.getUniformLocation(F,"fogNear");q=x.getUniformLocation(F,"fogFar");u=x.getUniformLocation(F,"fogColor");v=x.getUniformLocation(F,"alphaTest");I=document.createElement("canvas");I.width=8;I.height=8;P=I.getContext("2d");P.fillStyle="white";P.fillRect(0,0,8,8);H=new V.Texture(I);H.needsUpdate=!0}x.useProgram(F);E.initAttributes();E.enableAttribute(y);E.enableAttribute(z);E.disableUnusedAttributes();E.disable(x.CULL_FACE);E.enable(x.BLEND);
x.bindBuffer(x.ARRAY_BUFFER,C);x.vertexAttribPointer(y,2,x.FLOAT,!1,16,0);x.vertexAttribPointer(z,2,x.FLOAT,!1,16,8);x.bindBuffer(x.ELEMENT_ARRAY_BUFFER,D);x.uniformMatrix4fv(p,!1,Q.projectionMatrix.elements);E.activeTexture(x.TEXTURE0);x.uniform1i(k,0);P=I=0;(O=R.fog)?(x.uniform3f(u,O.color.r,O.color.g,O.color.b),O instanceof V.Fog?(x.uniform1f(t,O.near),x.uniform1f(q,O.far),x.uniform1i(r,1),P=I=1):O instanceof V.FogExp2&&(x.uniform1f(n,O.density),x.uniform1i(r,2),P=I=2)):(x.uniform1i(r,0),P=I=0);
for(var O=0,G=b.length;O<G;O++){var J=b[O];Pa(J.modelViewMatrix,Q.matrixWorldInverse,J.matrixWorld);J.z=-J.modelViewMatrix.elements[14]}b.sort(A);Q=[];O=0;for(G=b.length;O<G;O++){J=b[O];var N=J.material;x.uniform1f(v,N.alphaTest);x.uniformMatrix4fv(m,!1,J.modelViewMatrix.elements);J.matrixWorld.decompose(B,L,K);Q[0]=K.x;Q[1]=K.y;J=0;R.fog&&N.fog&&(J=P);I!==J&&(x.uniform1i(r,J),I=J);null!==N.map?(x.uniform2f(c,N.map.offset.x,N.map.offset.y),x.uniform2f(d,N.map.repeat.x,N.map.repeat.y)):(x.uniform2f(c,
0,0),x.uniform2f(d,1,1));x.uniform1f(l,N.opacity);x.uniform3f(h,N.color.r,N.color.g,N.color.b);x.uniform1f(e,N.rotation);x.uniform2fv(g,Q);E.setBlending(N.blending,N.blendEquation,N.blendSrc,N.blendDst);E.setDepthTest(N.depthTest);E.setDepthWrite(N.depthWrite);N.map?a.setTexture2D(N.map,0):a.setTexture2D(H,0);x.drawElements(x.TRIANGLES,6,x.UNSIGNED_SHORT,0)}E.enable(x.CULL_FACE);a.resetGLState()}}};
Object.assign(V,{Face4:function(a,b,c,d,e,g,h){console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead.");return new V.Face3(a,b,c,e,g,h)},LineStrip:0,LinePieces:1,MeshFaceMaterial:V.MultiMaterial,PointCloud:function(a,b){console.warn("THREE.PointCloud has been renamed to THREE.Points.");return new V.Points(a,b)},Particle:V.Sprite,ParticleSystem:function(a,b){console.warn("THREE.ParticleSystem has been renamed to THREE.Points.");return new V.Points(a,b)},PointCloudMaterial:function(a){console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial.");
return new V.PointsMaterial(a)},ParticleBasicMaterial:function(a){console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial.");return new V.PointsMaterial(a)},ParticleSystemMaterial:function(a){console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial.");return new V.PointsMaterial(a)},Vertex:function(a,b,c){console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead.");return new V.Vector3(a,b,c)}});
Object.assign(V.Box2.prototype,{empty:function(){console.warn("THREE.Box2: .empty() has been renamed to .isEmpty().");return this.isEmpty()},isIntersectionBox:function(a){console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(a)}});
Object.assign(V.Box3.prototype,{empty:function(){console.warn("THREE.Box3: .empty() has been renamed to .isEmpty().");return this.isEmpty()},isIntersectionBox:function(a){console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(a)},isIntersectionSphere:function(a){console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere().");return this.intersectsSphere(a)}});
Object.assign(V.Matrix3.prototype,{multiplyVector3:function(a){console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.");return Za(a,this)},multiplyVector3Array:function(a){console.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead.");return this.applyToVector3Array(a)}});
Object.assign(V.Matrix4.prototype,{extractPosition:function(a){console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().");var b=this.elements;a=a.elements;b[12]=a[12];b[13]=a[13];b[14]=a[14];return this},setRotationFromQuaternion:function(a){console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().");return $a(this,a)},multiplyVector3:function(a){console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead.");
return Qa(a,this)},multiplyVector4:function(a){console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.");return a.applyMatrix4(this)},multiplyVector3Array:function(a){console.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead.");return this.applyToVector3Array(a)},rotateAxis:function(a){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.");
Ya(a,this)},crossVector:function(a){console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.");return a.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")}});
Object.assign(V.Plane.prototype,{isIntersectionLine:function(a){console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine().");var b=this.distanceToPoint(a.start);a=this.distanceToPoint(a.end);return 0>b&&0<a||0>a&&0<b}});Object.assign(V.Quaternion.prototype,{multiplyVector3:function(a){console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.");return Oa(a,this)}});
Object.assign(V.Ray.prototype,{isIntersectionBox:function(a){console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(a)},isIntersectionPlane:function(a){console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane().");return this.intersectsPlane(a)},isIntersectionSphere:function(a){console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere().");return this.intersectsSphere(a)}});
Object.assign(V.Vector3.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(a){console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().");return W(this,a)},
getScaleFromMatrix:function(a){console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().");var b=Ra(this,a,0).length(),c=Ra(this,a,1).length();a=Ra(this,a,2).length();this.x=b;this.y=c;this.z=a;return this},getColumnFromMatrix:function(a,b){console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().");return Ra(this,b,a)}});
Object.assign(V.Object3D.prototype,{getChildByName:function(a){console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().");return this.getObjectByName(a)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(a,b){console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.");return this.translateOnAxis(b,a)}});
Object.defineProperties(V.Object3D.prototype,{eulerOrder:{get:function(){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order.");return this.rotation.order},set:function(a){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order.");this.rotation.order=a}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});
Object.defineProperties(V.LOD.prototype,{objects:{get:function(){console.warn("THREE.LOD: .objects has been renamed to .levels.");return this.levels}}});V.PerspectiveCamera.prototype.setLens=function(a,b){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup.");void 0!==b&&(this.filmGauge=b);this.setFocalLength(a)};
Object.defineProperties(V.Light.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(a){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov.");this.shadow.camera.fov=a}},shadowCameraLeft:{set:function(a){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left.");this.shadow.camera.left=a}},shadowCameraRight:{set:function(a){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right.");
this.shadow.camera.right=a}},shadowCameraTop:{set:function(a){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top.");this.shadow.camera.top=a}},shadowCameraBottom:{set:function(a){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom.");this.shadow.camera.bottom=a}},shadowCameraNear:{set:function(a){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near.");this.shadow.camera.near=a}},shadowCameraFar:{set:function(a){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far.");
this.shadow.camera.far=a}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(a){console.warn("THREE.Light: .shadowBias is now .shadow.bias.");this.shadow.bias=a}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(a){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width.");
this.shadow.mapSize.width=a}},shadowMapHeight:{set:function(a){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height.");this.shadow.mapSize.height=a}}});Object.defineProperties(V.BufferAttribute.prototype,{length:{get:function(){console.warn("THREE.BufferAttribute: .length has been deprecated. Please use .count.");return this.array.length}}});
Object.assign(V.BufferGeometry.prototype,{addIndex:function(a){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex().");this.setIndex(a)},addDrawCall:function(a,b,c){void 0!==c&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset.");console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup().");this.addGroup(a,b)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups().");this.clearGroups()},
computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}});Object.defineProperties(V.BufferGeometry.prototype,{drawcalls:{get:function(){console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups.");return this.groups}},offsets:{get:function(){console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups.");return this.groups}}});
Object.defineProperties(V.Material.prototype,{wrapAround:{get:function(){console.warn("THREE."+this.type+": .wrapAround has been removed.")},set:function(){console.warn("THREE."+this.type+": .wrapAround has been removed.")}},wrapRGB:{get:function(){console.warn("THREE."+this.type+": .wrapRGB has been removed.");return new V.Color}}});
Object.defineProperties(V.MeshPhongMaterial.prototype,{metal:{get:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead.");return!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}});
Object.defineProperties(V.ShaderMaterial.prototype,{derivatives:{get:function(){console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives.");return this.extensions.derivatives},set:function(a){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives.");this.extensions.derivatives=a}}});
V.EventDispatcher.prototype=Object.assign(Object.create({constructor:V.EventDispatcher,apply:function(a){console.warn("THREE.EventDispatcher: .apply is deprecated, just inherit or Object.assign the prototype to mix-in.");Object.assign(a,this)}}),V.EventDispatcher.prototype);
Object.assign(V.WebGLRenderer.prototype,{supportsFloatTextures:function(){console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' ).");return this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' ).");return this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' ).");
return this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' ).");return this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' ).");return this.extensions.get("WEBGL_compressed_texture_pvrtc")},
supportsBlendMinMax:function(){console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' ).");return this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return this.capabilities.vertexTextures},supportsInstancedArrays:function(){console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' ).");return this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(a){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest().");
this.setScissorTest(a)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")}});
Object.defineProperties(V.WebGLRenderer.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(a){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled.");this.shadowMap.enabled=a}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(a){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type.");this.shadowMap.type=a}},shadowMapCullFace:{get:function(){return this.shadowMap.cullFace},set:function(a){console.warn("THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace.");
this.shadowMap.cullFace=a}}});Object.defineProperties(V.WebGLShadowMap.prototype,{cullFace:{get:function(){return this.renderReverseSided?V.CullFaceFront:V.CullFaceBack},set:function(a){a=a!==V.CullFaceBack;console.warn("WebGLRenderer: .shadowMap.cullFace is deprecated. Set .shadowMap.renderReverseSided to "+a+".");this.renderReverseSided=a}}});
Object.defineProperties(V.WebGLRenderTarget.prototype,{wrapS:{get:function(){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.");return this.texture.wrapS},set:function(a){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.");this.texture.wrapS=a}},wrapT:{get:function(){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.");return this.texture.wrapT},set:function(a){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.");this.texture.wrapT=
a}},magFilter:{get:function(){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.");return this.texture.magFilter},set:function(a){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.");this.texture.magFilter=a}},minFilter:{get:function(){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.");return this.texture.minFilter},set:function(a){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.");this.texture.minFilter=
a}},anisotropy:{get:function(){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.");return this.texture.anisotropy},set:function(a){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.");this.texture.anisotropy=a}},offset:{get:function(){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset.");return this.texture.offset},set:function(a){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset.");this.texture.offset=
a}},repeat:{get:function(){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat.");return this.texture.repeat},set:function(a){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat.");this.texture.repeat=a}},format:{get:function(){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format.");return this.texture.format},set:function(a){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format.");this.texture.format=a}},type:{get:function(){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type.");
return this.texture.type},set:function(a){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type.");this.texture.type=a}},generateMipmaps:{get:function(){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.");return this.texture.generateMipmaps},set:function(a){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.");this.texture.generateMipmaps=a}}});
Object.assign(V.Audio.prototype,{load:function(a){console.warn("THREE.Audio: .load has been deprecated. Please use THREE.AudioLoader.");var b=this;(new V.AudioLoader).load(a,function(a){b.setBuffer(a)});return this}});Object.assign(V.AudioAnalyser.prototype,{getData:function(){console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData().");return this.getFrequencyData()}});
V.GeometryUtils={merge:function(a,b,c){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");if(b instanceof V.Mesh){b.matrixAutoUpdate&&b.updateMatrix();var d=b.matrix;b=b.geometry}a.merge(b,d,c)},center:function(a){console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead.");return a.center()}};
V.ImageUtils={crossOrigin:void 0,loadTexture:function(a,b,c,d){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var e=new V.TextureLoader;e.setCrossOrigin(this.crossOrigin);a=e.load(a,c,void 0,d);b&&(a.mapping=b);return a},loadTextureCube:function(a,b,c,d){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var e=new V.CubeTextureLoader;e.setCrossOrigin(this.crossOrigin);a=e.load(a,c,void 0,
d);b&&(a.mapping=b);return a},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}};
V.Projector=function(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js.");this.projectVector=function(a,b){console.warn("THREE.Projector: .projectVector() is now vector.project().");a.project(b)};this.unprojectVector=function(a,b){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject().");a.unproject(b)};this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}};
V.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js");this.domElement=document.createElement("canvas");this.clear=function(){};this.render=function(){};this.setClearColor=function(){};this.setSize=function(){}};
V.CurveUtils={tangentQuadraticBezier:function(a,b,c,d){return 2*(1-a)*(c-b)+2*a*(d-c)},tangentCubicBezier:function(a,b,c,d,e){return-3*b*(1-a)*(1-a)+3*c*(1-a)*(1-a)-6*a*c*(1-a)+6*a*d*(1-a)-3*a*a*d+3*a*a*e},tangentSpline:function(a){return 6*a*a-6*a+(3*a*a-4*a+1)+(-6*a*a+6*a)+(3*a*a-2*a)},interpolate:function(a,b,c,d,e){a=.5*(c-a);d=.5*(d-b);var g=e*e;return(2*b-2*c+a+d)*e*g+(-3*b+3*c-2*a-d)*g+a*e+b}};
V.SceneUtils={createMultiMaterialObject:function(a,b){for(var c=new V.Group,d=0,e=b.length;d<e;d++)c.add(new V.Mesh(a,b[d]));return c},detach:function(a,b,c){a.applyMatrix(b.matrixWorld);b.remove(a);c.add(a)},attach:function(a,b,c){var d=new V.Matrix4;d.getInverse(c.matrixWorld);a.applyMatrix(d);b.remove(a);c.add(a)}};
V.ShapeUtils={area:function(a){for(var b=a.length,c=0,d=b-1,e=0;e<b;d=e++)c+=a[d].x*a[e].y-a[e].x*a[d].y;return.5*c},triangulate:function(a,b){var c=a.length;if(3>c)return null;var d=[],e=[],g=[],h;if(0<V.ShapeUtils.area(a))for(h=0;h<c;h++)e[h]=h;else for(h=0;h<c;h++)e[h]=c-1-h;var k=2*c;for(h=c-1;2<c;){if(0>=k--){console.warn("THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()");break}var l=h;c<=l&&(l=0);h=l+1;c<=h&&(h=0);var m=h+1;c<=m&&(m=0);a:{var p;var r=a[e[l]].x;var n=a[e[l]].y;
var t=a[e[h]].x;var q=a[e[h]].y;var u=a[e[m]].x;var v=a[e[m]].y;if(Number.EPSILON>(t-r)*(v-n)-(q-n)*(u-r))var y=!1;else{var z=u-t;var A=v-q;var x=r-u;var E=n-v;var C=t-r;y=q-n;for(p=0;p<c;p++){var D=a[e[p]].x;var F=a[e[p]].y;if(!(D===r&&F===n||D===t&&F===q||D===u&&F===v)){var H=D-r;var B=F-n;var L=D-t;var K=F-q;D-=u;F-=v;K=z*K-A*L;B=C*B-y*H;D=x*F-E*D;if(K>=-Number.EPSILON&&D>=-Number.EPSILON&&B>=-Number.EPSILON){y=!1;break a}}}y=!0}}if(y){d.push([a[e[l]],a[e[h]],a[e[m]]]);g.push([e[l],e[h],e[m]]);
l=h;for(m=h+1;m<c;l++,m++)e[l]=e[m];c--;k=2*c}}return b?g:d},triangulateShape:function(a,b){function c(a,b,c){return a.x!==b.x?a.x<b.x?a.x<=c.x&&c.x<=b.x:b.x<=c.x&&c.x<=a.x:a.y<b.y?a.y<=c.y&&c.y<=b.y:b.y<=c.y&&c.y<=a.y}function d(a,b,d,e){var g=b.x-a.x,h=b.y-a.y,k=e.x-d.x,l=e.y-d.y,m=a.x-d.x,n=a.y-d.y,p=h*k-g*l,r=h*m-g*n;if(Math.abs(p)>Number.EPSILON){if(0<p){if(0>r||r>p)return[];k=l*m-k*n;if(0>k||k>p)return[]}else{if(0<r||r<p)return[];k=l*m-k*n;if(0<k||k<p)return[]}if(0===k)return 0!==r&&r!==p?[a]:
[];if(k===p)return 0!==r&&r!==p?[b]:[];if(0===r)return[d];if(r===p)return[e];d=k/p;return[{x:a.x+d*g,y:a.y+d*h}]}if(0!==r||l*m!==k*n)return[];h=0===g&&0===h;k=0===k&&0===l;if(h&&k)return a.x!==d.x||a.y!==d.y?[]:[a];if(h)return c(d,e,a)?[a]:[];if(k)return c(a,b,d)?[d]:[];0!==g?(a.x<b.x?(g=a,k=a.x,h=b,a=b.x):(g=b,k=b.x,h=a,a=a.x),d.x<e.x?(b=d,p=d.x,l=e,d=e.x):(b=e,p=e.x,l=d,d=d.x)):(a.y<b.y?(g=a,k=a.y,h=b,a=b.y):(g=b,k=b.y,h=a,a=a.y),d.y<e.y?(b=d,p=d.y,l=e,d=e.y):(b=e,p=e.y,l=d,d=d.y));return k<=p?
a<p?[]:a===p?[]:a<=d?[b,h]:[b,l]:k>d?[]:k===d?[]:a<=d?[g,h]:[g,l]}function e(a,b,c,d){var e=b.x-a.x,g=b.y-a.y;b=c.x-a.x;c=c.y-a.y;var h=d.x-a.x;d=d.y-a.y;a=e*c-g*b;e=e*d-g*h;return Math.abs(a)>Number.EPSILON?(b=h*c-d*b,0<a?0<=e&&0<=b:0<=e||0<=b):0<e}var g,h={},k=a.concat();var l=0;for(g=b.length;l<g;l++)Array.prototype.push.apply(k,b[l]);l=0;for(g=k.length;l<g;l++){var m=k[l].x+":"+k[l].y;void 0!==h[m]&&console.warn("THREE.Shape: Duplicate point",m);h[m]=l}l=function(a,b){function c(a,b){var c=k.length-
1,d=a-1;0>d&&(d=c);var g=a+1;g>c&&(g=0);c=e(k[a],k[d],k[g],B[b]);if(!c)return!1;c=B.length-1;d=b-1;0>d&&(d=c);g=b+1;g>c&&(g=0);return(c=e(B[b],B[d],B[g],k[a]))?!0:!1}function g(a,b){var c;for(c=0;c<k.length;c++){var e=c+1;e%=k.length;e=d(a,b,k[c],k[e]);if(0<e.length)return!0}return!1}function h(a,c){var e,g;for(e=0;e<l.length;e++){var h=b[l[e]];for(g=0;g<h.length;g++){var k=g+1;k%=h.length;k=d(a,c,h[g],h[k]);if(0<k.length)return!0}}return!1}var k=a.concat(),l=[],m,p;a=[];var r,x=0;for(m=b.length;x<
m;x++)l.push(x);var E=0;for(var C=2*l.length;0<l.length;){C--;if(0>C){console.log("Infinite Loop! Holes left:"+l.length+", Probably Hole outside Shape!");break}for(p=E;p<k.length;p++){var D=k[p];m=-1;for(x=0;x<l.length;x++){var F=l[x];var H=D.x+":"+D.y+":"+F;if(void 0===a[H]){var B=b[F];for(r=0;r<B.length;r++)if(F=B[r],c(p,r)&&!g(D,F)&&!h(D,F)){m=r;l.splice(x,1);E=k.slice(0,p+1);F=k.slice(p);r=B.slice(m);var L=B.slice(0,m+1);k=E.concat(r).concat(L).concat(F);E=p;break}if(0<=m)break;a[H]=!0}}if(0<=
m)break}}return k}(a,b);k=V.ShapeUtils.triangulate(l,!1);l=0;for(g=k.length;l<g;l++)for(b=k[l],a=0;3>a;a++)m=b[a].x+":"+b[a].y,m=h[m],void 0!==m&&(b[a]=m);return k.concat()},isClockWise:function(a){return 0>V.ShapeUtils.area(a)},b2:function(a,b,c,d){var e=1-a;return e*e*b+2*(1-a)*a*c+a*a*d},b3:function(a,b,c,d,e){var g=1-a,h=1-a;return g*g*g*b+3*h*h*a*c+3*(1-a)*a*a*d+a*a*a*e}};V.Curve=function(){};
V.Curve.prototype={constructor:V.Curve,getPoint:function(){console.warn("THREE.Curve: Warning, getPoint() not implemented!");return null},getPointAt:function(a){a=Sb(this,a);return this.getPoint(a)},getPoints:function(a){a||(a=5);var b,c=[];for(b=0;b<=a;b++)c.push(this.getPoint(b/a));return c},getSpacedPoints:function(a){a||(a=5);var b,c=[];for(b=0;b<=a;b++)c.push(this.getPointAt(b/a));return c},getLength:function(){var a=Tb(this);return a[a.length-1]},updateArcLengths:function(){this.needsUpdate=
!0;Tb(this)},getTangent:function(a){var b=a-1E-4;a+=1E-4;0>b&&(b=0);1<a&&(a=1);b=this.getPoint(b);return this.getPoint(a).clone().sub(b).normalize()}};function Sb(a,b){a=Tb(a);var c=a.length;var d=b*a[c-1];for(var e=0,g=c-1,h;e<=g;)if(b=Math.floor(e+(g-e)/2),h=a[b]-d,0>h)e=b+1;else if(0<h)g=b-1;else{g=b;break}b=g;if(a[b]===d)return b/(c-1);e=a[b];return(b+(d-e)/(a[b+1]-e))/(c-1)}
function Tb(a){var b;b||(b=a.__arcLengthDivisions?a.__arcLengthDivisions:200);if(a.cacheArcLengths&&a.cacheArcLengths.length===b+1&&!a.needsUpdate)return a.cacheArcLengths;a.needsUpdate=!1;var c=[],d=a.getPoint(0),e,g=0;c.push(0);for(e=1;e<=b;e++){var h=a.getPoint(e/b);g+=h.distanceTo(d);c.push(g);d=h}return a.cacheArcLengths=c}V.Curve.create=function(a,b){a.prototype=Object.create(V.Curve.prototype);a.prototype.constructor=a;a.prototype.getPoint=b;return a};
V.CurvePath=function(){this.curves=[];this.autoClose=!1};
V.CurvePath.prototype=Object.assign(Object.create(V.Curve.prototype),{constructor:V.CurvePath,add:function(a){this.curves.push(a)},closePath:function(){var a=this.curves[0].getPoint(0),b=this.curves[this.curves.length-1].getPoint(1);a.equals(b)||this.curves.push(new V.LineCurve(b,a))},getPoint:function(a){for(var b=a*this.getLength(),c=this.getCurveLengths(),d=0;d<c.length;){if(c[d]>=b)return a=this.curves[d],b=1-(c[d]-b)/a.getLength(),a.getPointAt(b);d++}return null},getLength:function(){var a=this.getCurveLengths();
return a[a.length-1]},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var a=[],b=0,c=0,d=this.curves.length;c<d;c++)b+=this.curves[c].getLength(),a.push(b);return this.cacheLengths=a},createPointsGeometry:function(a){a=this.getPoints(a);return this.createGeometry(a)},createSpacedPointsGeometry:function(a){a=this.getSpacedPoints(a);return this.createGeometry(a)},createGeometry:function(a){for(var b=new V.Geometry,c=0,d=a.length;c<
d;c++){var e=a[c];b.vertices.push(new V.Vector3(e.x,e.y,e.z||0))}return b}});V.Font=function(a){this.data=a};
Object.assign(V.Font.prototype,{generateShapes:function(a,b,c){void 0===b&&(b=100);void 0===c&&(c=4);var d=this.data;a=String(a).split("");var e=b/d.resolution,g=0;b=[];for(var h=0;h<a.length;h++){var k;var l=e;var m=g,p=d.glyphs[a[h]]||d.glyphs["?"];if(p){var r=new V.Path,n=[],t=V.ShapeUtils.b2,q=V.ShapeUtils.b3;if(p.o)for(var u=p._cachedOutline||(p._cachedOutline=p.o.split(" ")),v=0,y=u.length;v<y;)switch(u[v++]){case "m":var z=u[v++]*l+m;var A=u[v++]*l;r.moveTo(z,A);break;case "l":z=u[v++]*l+m;
A=u[v++]*l;r.lineTo(z,A);break;case "q":var x=u[v++]*l+m;var E=u[v++]*l;var C=u[v++]*l+m;var D=u[v++]*l;r.quadraticCurveTo(C,D,x,E);if(k=n[n.length-1]){var F=k.x;k=k.y;for(var H=1;H<=c;H++){var B=H/c;t(B,F,C,x);t(B,k,D,E)}}break;case "b":if(x=u[v++]*l+m,E=u[v++]*l,C=u[v++]*l+m,D=u[v++]*l,z=u[v++]*l+m,A=u[v++]*l,r.bezierCurveTo(C,D,z,A,x,E),k=n[n.length-1])for(F=k.x,k=k.y,H=1;H<=c;H++)B=H/c,q(B,F,C,z,x),q(B,k,D,A,E)}l={offset:p.ha*l,path:r}}else l=void 0;g+=l.offset;b.push(l.path)}c=[];d=0;for(a=b.length;d<
a;d++)Array.prototype.push.apply(c,b[d].toShapes());return c}});V.Path=function(a){V.CurvePath.call(this);this.actions=[];a&&this.fromPoints(a)};
V.Path.prototype=Object.assign(Object.create(V.CurvePath.prototype),{constructor:V.Path,fromPoints:function(a){this.moveTo(a[0].x,a[0].y);for(var b=1,c=a.length;b<c;b++)this.lineTo(a[b].x,a[b].y)},moveTo:function(a,b){this.actions.push({action:"moveTo",args:[a,b]})},lineTo:function(a,b){var c=this.actions[this.actions.length-1].args;this.curves.push(new V.LineCurve(new V.Vector2(c[c.length-2],c[c.length-1]),new V.Vector2(a,b)));this.actions.push({action:"lineTo",args:[a,b]})},quadraticCurveTo:function(a,
b,c,d){var e=this.actions[this.actions.length-1].args;this.curves.push(new V.QuadraticBezierCurve(new V.Vector2(e[e.length-2],e[e.length-1]),new V.Vector2(a,b),new V.Vector2(c,d)));this.actions.push({action:"quadraticCurveTo",args:[a,b,c,d]})},bezierCurveTo:function(a,b,c,d,e,g){var h=this.actions[this.actions.length-1].args;this.curves.push(new V.CubicBezierCurve(new V.Vector2(h[h.length-2],h[h.length-1]),new V.Vector2(a,b),new V.Vector2(c,d),new V.Vector2(e,g)));this.actions.push({action:"bezierCurveTo",
args:[a,b,c,d,e,g]})},splineThru:function(a){var b=Array.prototype.slice.call(arguments),c=this.actions[this.actions.length-1].args,c=[new V.Vector2(c[c.length-2],c[c.length-1])];Array.prototype.push.apply(c,a);this.curves.push(new V.SplineCurve(c));this.actions.push({action:"splineThru",args:b})},arc:function(a,b,c,d,e,g){var h=this.actions[this.actions.length-1].args;this.absarc(a+h[h.length-2],b+h[h.length-1],c,d,e,g)},absarc:function(a,b,c,d,e,g){this.absellipse(a,b,c,c,d,e,g)},ellipse:function(a,
b,c,d,e,g,h,k){var l=this.actions[this.actions.length-1].args;this.absellipse(a+l[l.length-2],b+l[l.length-1],c,d,e,g,h,k)},absellipse:function(a,b,c,d,e,g,h,k){var l=[a,b,c,d,e,g,h,k||0];a=new V.EllipseCurve(a,b,c,d,e,g,h,k);this.curves.push(a);a=a.getPoint(1);l.push(a.x);l.push(a.y);this.actions.push({action:"ellipse",args:l})},getSpacedPoints:function(a){a||(a=40);for(var b=[],c=0;c<a;c++)b.push(this.getPoint(c/a));this.autoClose&&b.push(b[0]);return b},getPoints:function(a){a=a||12;for(var b=
V.ShapeUtils.b2,c=V.ShapeUtils.b3,d=[],e,g,h,k,l,m,p,r,n,t=0,q=this.actions.length;t<q;t++){n=this.actions[t];var u=n.args;switch(n.action){case "moveTo":d.push(new V.Vector2(u[0],u[1]));break;case "lineTo":d.push(new V.Vector2(u[0],u[1]));break;case "quadraticCurveTo":e=u[2];g=u[3];l=u[0];m=u[1];0<d.length?(n=d[d.length-1],p=n.x,r=n.y):(n=this.actions[t-1].args,p=n[n.length-2],r=n[n.length-1]);for(u=1;u<=a;u++){var v=u/a;n=b(v,p,l,e);v=b(v,r,m,g);d.push(new V.Vector2(n,v))}break;case "bezierCurveTo":e=
u[4];g=u[5];l=u[0];m=u[1];h=u[2];k=u[3];0<d.length?(n=d[d.length-1],p=n.x,r=n.y):(n=this.actions[t-1].args,p=n[n.length-2],r=n[n.length-1]);for(u=1;u<=a;u++)v=u/a,n=c(v,p,l,h,e),v=c(v,r,m,k,g),d.push(new V.Vector2(n,v));break;case "splineThru":n=this.actions[t-1].args;v=[new V.Vector2(n[n.length-2],n[n.length-1])];n=a*u[0].length;v=v.concat(u[0]);v=new V.SplineCurve(v);for(u=1;u<=n;u++)d.push(v.getPointAt(u/n));break;case "arc":e=u[0];g=u[1];m=u[2];h=u[3];n=u[4];l=!!u[5];p=n-h;r=2*a;for(u=1;u<=r;u++)v=
u/r,l||(v=1-v),v=h+v*p,n=e+m*Math.cos(v),v=g+m*Math.sin(v),d.push(new V.Vector2(n,v));break;case "ellipse":e=u[0];g=u[1];m=u[2];k=u[3];h=u[4];n=u[5];l=!!u[6];var y=u[7];p=n-h;r=2*a;if(0!==y){var z=Math.cos(y);var A=Math.sin(y)}for(u=1;u<=r;u++){v=u/r;l||(v=1-v);v=h+v*p;n=e+m*Math.cos(v);v=g+k*Math.sin(v);if(0!==y){var x=n;n=(x-e)*z-(v-g)*A+e;v=(x-e)*A+(v-g)*z+g}d.push(new V.Vector2(n,v))}}}a=d[d.length-1];Math.abs(a.x-d[0].x)<Number.EPSILON&&Math.abs(a.y-d[0].y)<Number.EPSILON&&d.splice(d.length-
1,1);this.autoClose&&d.push(d[0]);return d},toShapes:function(a,b){function c(a){for(var b=[],c=0,d=a.length;c<d;c++){var e=a[c],g=new V.Shape;g.actions=e.actions;g.curves=e.curves;b.push(g)}return b}function d(a,b){for(var c=b.length,d=!1,e=c-1,g=0;g<c;e=g++){var h=b[e],k=b[g],l=k.x-h.x,m=k.y-h.y;if(Math.abs(m)>Number.EPSILON){if(0>m&&(h=b[g],l=-l,k=b[e],m=-m),!(a.y<h.y||a.y>k.y))if(a.y===h.y){if(a.x===h.x)return!0}else{e=m*(a.x-h.x)-l*(a.y-h.y);if(0===e)return!0;0>e||(d=!d)}}else if(a.y===h.y&&
(k.x<=a.x&&a.x<=h.x||h.x<=a.x&&a.x<=k.x))return!0}return d}var e=V.ShapeUtils.isClockWise,g=function(a){for(var b=[],c=new V.Path,d=0,e=a.length;d<e;d++){var g=a[d],h=g.args,g=g.action;"moveTo"===g&&0!==c.actions.length&&(b.push(c),c=new V.Path);c[g].apply(c,h)}0!==c.actions.length&&b.push(c);return b}(this.actions);if(0===g.length)return[];if(!0===b)return c(g);b=[];if(1===g.length){var h=g[0];var k=new V.Shape;k.actions=h.actions;k.curves=h.curves;b.push(k);return b}var l=!e(g[0].getPoints()),l=
a?!l:l;k=[];var m=[],p=[],r=0;m[r]=void 0;p[r]=[];for(var n=0,t=g.length;n<t;n++){h=g[n];var q=h.getPoints();var u=e(q);(u=a?!u:u)?(!l&&m[r]&&r++,m[r]={s:new V.Shape,p:q},m[r].s.actions=h.actions,m[r].s.curves=h.curves,l&&r++,p[r]=[]):p[r].push({h:h,p:q[0]})}if(!m[0])return c(g);if(1<m.length){n=!1;a=[];e=0;for(g=m.length;e<g;e++)k[e]=[];e=0;for(g=m.length;e<g;e++)for(h=p[e],u=0;u<h.length;u++){l=h[u];r=!0;for(q=0;q<m.length;q++)d(l.p,m[q].p)&&(e!==q&&a.push({froms:e,tos:q,hole:u}),r?(r=!1,k[q].push(l)):
n=!0);r&&k[e].push(l)}0<a.length&&(n||(p=k))}n=0;for(e=m.length;n<e;n++)for(k=m[n].s,b.push(k),a=p[n],g=0,h=a.length;g<h;g++)k.holes.push(a[g].h);return b}});V.Shape=function(){V.Path.apply(this,arguments);this.holes=[]};
V.Shape.prototype=Object.assign(Object.create(V.Path.prototype),{constructor:V.Shape,extrude:function(a){return new V.ExtrudeGeometry(this,a)},makeGeometry:function(a){return new V.ShapeGeometry(this,a)},getPointsHoles:function(a){for(var b=[],c=0,d=this.holes.length;c<d;c++)b[c]=this.holes[c].getPoints(a);return b},extractAllPoints:function(a){return{shape:this.getPoints(a),holes:this.getPointsHoles(a)}},extractPoints:function(a){return this.extractAllPoints(a)}});
V.LineCurve=function(a,b){this.v1=a;this.v2=b};V.LineCurve.prototype=Object.create(V.Curve.prototype);V.LineCurve.prototype.constructor=V.LineCurve;V.LineCurve.prototype.getPoint=function(a){var b=this.v2.clone().sub(this.v1);b.multiplyScalar(a).add(this.v1);return b};V.LineCurve.prototype.getPointAt=function(a){return this.getPoint(a)};V.LineCurve.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()};V.QuadraticBezierCurve=function(a,b,c){this.v0=a;this.v1=b;this.v2=c};
V.QuadraticBezierCurve.prototype=Object.create(V.Curve.prototype);V.QuadraticBezierCurve.prototype.constructor=V.QuadraticBezierCurve;V.QuadraticBezierCurve.prototype.getPoint=function(a){var b=V.ShapeUtils.b2;return new V.Vector2(b(a,this.v0.x,this.v1.x,this.v2.x),b(a,this.v0.y,this.v1.y,this.v2.y))};V.QuadraticBezierCurve.prototype.getTangent=function(a){var b=V.CurveUtils.tangentQuadraticBezier;return(new V.Vector2(b(a,this.v0.x,this.v1.x,this.v2.x),b(a,this.v0.y,this.v1.y,this.v2.y))).normalize()};
V.CubicBezierCurve=function(a,b,c,d){this.v0=a;this.v1=b;this.v2=c;this.v3=d};V.CubicBezierCurve.prototype=Object.create(V.Curve.prototype);V.CubicBezierCurve.prototype.constructor=V.CubicBezierCurve;V.CubicBezierCurve.prototype.getPoint=function(a){var b=V.ShapeUtils.b3;return new V.Vector2(b(a,this.v0.x,this.v1.x,this.v2.x,this.v3.x),b(a,this.v0.y,this.v1.y,this.v2.y,this.v3.y))};
V.CubicBezierCurve.prototype.getTangent=function(a){var b=V.CurveUtils.tangentCubicBezier;return(new V.Vector2(b(a,this.v0.x,this.v1.x,this.v2.x,this.v3.x),b(a,this.v0.y,this.v1.y,this.v2.y,this.v3.y))).normalize()};V.SplineCurve=function(a){this.points=void 0==a?[]:a};V.SplineCurve.prototype=Object.create(V.Curve.prototype);V.SplineCurve.prototype.constructor=V.SplineCurve;
V.SplineCurve.prototype.getPoint=function(a){var b=this.points;a*=b.length-1;var c=Math.floor(a);a-=c;var d=b[0===c?c:c-1],e=b[c],g=b[c>b.length-2?b.length-1:c+1],b=b[c>b.length-3?b.length-1:c+2],c=V.CurveUtils.interpolate;return new V.Vector2(c(d.x,e.x,g.x,b.x,a),c(d.y,e.y,g.y,b.y,a))};V.EllipseCurve=function(a,b,c,d,e,g,h,k){this.aX=a;this.aY=b;this.xRadius=c;this.yRadius=d;this.aStartAngle=e;this.aEndAngle=g;this.aClockwise=h;this.aRotation=k||0};V.EllipseCurve.prototype=Object.create(V.Curve.prototype);
V.EllipseCurve.prototype.constructor=V.EllipseCurve;
V.EllipseCurve.prototype.getPoint=function(a){var b=this.aEndAngle-this.aStartAngle;0>b&&(b+=2*Math.PI);b>2*Math.PI&&(b-=2*Math.PI);b=!0===this.aClockwise?this.aEndAngle+(1-a)*(2*Math.PI-b):this.aStartAngle+a*b;a=this.aX+this.xRadius*Math.cos(b);var c=this.aY+this.yRadius*Math.sin(b);if(0!==this.aRotation){var b=Math.cos(this.aRotation),d=Math.sin(this.aRotation),e=a;a=(e-this.aX)*b-(c-this.aY)*d+this.aX;c=(e-this.aX)*d+(c-this.aY)*b+this.aY}return new V.Vector2(a,c)};
V.ArcCurve=function(a,b,c,d,e,g){V.EllipseCurve.call(this,a,b,c,c,d,e,g)};V.ArcCurve.prototype=Object.create(V.EllipseCurve.prototype);V.ArcCurve.prototype.constructor=V.ArcCurve;V.LineCurve3=V.Curve.create(function(a,b){this.v1=a;this.v2=b},function(a){var b=new V.Vector3;b.subVectors(this.v2,this.v1);b.multiplyScalar(a);b.add(this.v1);return b});
V.QuadraticBezierCurve3=V.Curve.create(function(a,b,c){this.v0=a;this.v1=b;this.v2=c},function(a){var b=V.ShapeUtils.b2;return new V.Vector3(b(a,this.v0.x,this.v1.x,this.v2.x),b(a,this.v0.y,this.v1.y,this.v2.y),b(a,this.v0.z,this.v1.z,this.v2.z))});
V.CubicBezierCurve3=V.Curve.create(function(a,b,c,d){this.v0=a;this.v1=b;this.v2=c;this.v3=d},function(a){var b=V.ShapeUtils.b3;return new V.Vector3(b(a,this.v0.x,this.v1.x,this.v2.x,this.v3.x),b(a,this.v0.y,this.v1.y,this.v2.y,this.v3.y),b(a,this.v0.z,this.v1.z,this.v2.z,this.v3.z))});
V.SplineCurve3=V.Curve.create(function(a){console.warn("THREE.SplineCurve3 will be deprecated. Please use THREE.CatmullRomCurve3");this.points=void 0==a?[]:a},function(a){var b=this.points;a*=b.length-1;var c=Math.floor(a);a-=c;var d=b[0==c?c:c-1],e=b[c],g=b[c>b.length-2?b.length-1:c+1],b=b[c>b.length-3?b.length-1:c+2],c=V.CurveUtils.interpolate;return new V.Vector3(c(d.x,e.x,g.x,b.x,a),c(d.y,e.y,g.y,b.y,a),c(d.z,e.z,g.z,b.z,a))});
V.CatmullRomCurve3=function(){function a(){}var b=new V.Vector3,c=new a,d=new a,e=new a;a.prototype.init=function(a,b,c,d){this.c0=a;this.c1=c;this.c2=-3*a+3*b-2*c-d;this.c3=2*a-2*b+c+d};a.prototype.initNonuniformCatmullRom=function(a,b,c,d,e,p,r){this.init(b,c,((b-a)/e-(c-a)/(e+p)+(c-b)/p)*p,((c-b)/p-(d-b)/(p+r)+(d-c)/r)*p)};a.prototype.initCatmullRom=function(a,b,c,d,e){this.init(b,c,e*(c-a),e*(d-b))};a.prototype.calc=function(a){var b=a*a;return this.c0+this.c1*a+this.c2*b+this.c3*b*a};return V.Curve.create(function(a){this.points=
a||[];this.closed=!1},function(a){var g=this.points;var k=g.length;2>k&&console.log("duh, you need at least 2 points");a*=k-(this.closed?0:1);var l=Math.floor(a);a-=l;this.closed?l+=0<l?0:(Math.floor(Math.abs(l)/g.length)+1)*g.length:0===a&&l===k-1&&(l=k-2,a=1);if(this.closed||0<l)var m=g[(l-1)%k];else b.subVectors(g[0],g[1]).add(g[0]),m=b;var p=g[l%k];var r=g[(l+1)%k];this.closed||l+2<k?g=g[(l+2)%k]:(b.subVectors(g[k-1],g[k-2]).add(g[k-1]),g=b);if(void 0===this.type||"centripetal"===this.type||"chordal"===
this.type){var n="chordal"===this.type?.5:.25;k=Math.pow(m.distanceToSquared(p),n);l=Math.pow(p.distanceToSquared(r),n);n=Math.pow(r.distanceToSquared(g),n);1E-4>l&&(l=1);1E-4>k&&(k=l);1E-4>n&&(n=l);c.initNonuniformCatmullRom(m.x,p.x,r.x,g.x,k,l,n);d.initNonuniformCatmullRom(m.y,p.y,r.y,g.y,k,l,n);e.initNonuniformCatmullRom(m.z,p.z,r.z,g.z,k,l,n)}else"catmullrom"===this.type&&(k=void 0!==this.tension?this.tension:.5,c.initCatmullRom(m.x,p.x,r.x,g.x,k),d.initCatmullRom(m.y,p.y,r.y,g.y,k),e.initCatmullRom(m.z,
p.z,r.z,g.z,k));return new V.Vector3(c.calc(a),d.calc(a),e.calc(a))})}();V.ClosedSplineCurve3=function(a){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Please use THREE.CatmullRomCurve3.");V.CatmullRomCurve3.call(this,a);this.type="catmullrom";this.closed=!0};V.ClosedSplineCurve3.prototype=Object.create(V.CatmullRomCurve3.prototype);
V.BoxGeometry=function(a,b,c,d,e,g){V.Geometry.call(this);this.type="BoxGeometry";this.parameters={width:a,height:b,depth:c,widthSegments:d,heightSegments:e,depthSegments:g};this.fromBufferGeometry(new V.BoxBufferGeometry(a,b,c,d,e,g));this.mergeVertices()};V.BoxGeometry.prototype=Object.create(V.Geometry.prototype);V.BoxGeometry.prototype.constructor=V.BoxGeometry;V.CubeGeometry=V.BoxGeometry;
V.BoxBufferGeometry=function(a,b,c,d,e,g){function h(a,b,c,d,e,g,h,l,m,K,R){var x=g/m,A=h/K,D=g/2,C=h/2,B=l/2;h=m+1;for(var F=K+1,E=g=0,H=new V.Vector3,X=0;X<F;X++)for(var L=X*A-C,fa=0;fa<h;fa++)H[a]=(fa*x-D)*d,H[b]=L*e,H[c]=B,r[q]=H.x,r[q+1]=H.y,r[q+2]=H.z,H[a]=0,H[b]=0,H[c]=0<l?1:-1,n[q]=H.x,n[q+1]=H.y,n[q+2]=H.z,t[u]=fa/m,t[u+1]=1-X/K,q+=3,u+=2,g+=1;for(X=0;X<K;X++)for(fa=0;fa<m;fa++)a=y+fa+h*(X+1),b=y+(fa+1)+h*(X+1),c=y+(fa+1)+h*X,p[v]=y+fa+h*X,p[v+1]=a,p[v+2]=c,p[v+3]=a,p[v+4]=b,p[v+5]=c,v+=
6,E+=6;k.addGroup(z,E,R);z+=E;y+=g}V.BufferGeometry.call(this);this.type="BoxBufferGeometry";this.parameters={width:a,height:b,depth:c,widthSegments:d,heightSegments:e,depthSegments:g};var k=this;d=Math.floor(d)||1;e=Math.floor(e)||1;g=Math.floor(g)||1;var l=function(a,b,c){return a=0+(a+1)*(b+1)*2+(a+1)*(c+1)*2+(c+1)*(b+1)*2}(d,e,g),m=function(a,b,c){a=0+a*b*2+a*c*2+c*b*2;return 6*a}(d,e,g),p=new (65535<m?Uint32Array:Uint16Array)(m),r=new Float32Array(3*l),n=new Float32Array(3*l),t=new Float32Array(2*
l),q=0,u=0,v=0,y=0,z=0;h("z","y","x",-1,-1,c,b,a,g,e,0);h("z","y","x",1,-1,c,b,-a,g,e,1);h("x","z","y",1,1,a,c,b,d,g,2);h("x","z","y",1,-1,a,c,-b,d,g,3);h("x","y","z",1,-1,a,b,c,d,e,4);h("x","y","z",-1,-1,a,b,-c,d,e,5);this.setIndex(new V.BufferAttribute(p,1));this.addAttribute("position",new V.BufferAttribute(r,3));this.addAttribute("normal",new V.BufferAttribute(n,3));this.addAttribute("uv",new V.BufferAttribute(t,2))};V.BoxBufferGeometry.prototype=Object.create(V.BufferGeometry.prototype);
V.BoxBufferGeometry.prototype.constructor=V.BoxBufferGeometry;V.CircleGeometry=function(a,b,c,d){V.Geometry.call(this);this.type="CircleGeometry";this.parameters={radius:a,segments:b,thetaStart:c,thetaLength:d};this.fromBufferGeometry(new V.CircleBufferGeometry(a,b,c,d))};V.CircleGeometry.prototype=Object.create(V.Geometry.prototype);V.CircleGeometry.prototype.constructor=V.CircleGeometry;
V.CircleBufferGeometry=function(a,b,c,d){V.BufferGeometry.call(this);this.type="CircleBufferGeometry";this.parameters={radius:a,segments:b,thetaStart:c,thetaLength:d};a=a||50;b=void 0!==b?Math.max(3,b):8;c=void 0!==c?c:0;d=void 0!==d?d:2*Math.PI;var e=b+2,g=new Float32Array(3*e),h=new Float32Array(3*e),e=new Float32Array(2*e);h[2]=1;e[0]=.5;e[1]=.5;for(var k=0,l=3,m=2;k<=b;k++,l+=3,m+=2){var p=c+k/b*d;g[l]=a*Math.cos(p);g[l+1]=a*Math.sin(p);h[l+2]=1;e[m]=(g[l]/a+1)/2;e[m+1]=(g[l+1]/a+1)/2}c=[];for(l=
1;l<=b;l++)c.push(l,l+1,0);this.setIndex(new V.BufferAttribute(new Uint16Array(c),1));this.addAttribute("position",new V.BufferAttribute(g,3));this.addAttribute("normal",new V.BufferAttribute(h,3));this.addAttribute("uv",new V.BufferAttribute(e,2));this.boundingSphere=new V.Sphere(new V.Vector3,a)};V.CircleBufferGeometry.prototype=Object.create(V.BufferGeometry.prototype);V.CircleBufferGeometry.prototype.constructor=V.CircleBufferGeometry;
V.CylinderBufferGeometry=function(a,b,c,d,e,g,h,k){function l(c){var e,g=new V.Vector2,l=new V.Vector3,n=0,p=!0===c?a:b,r=!0===c?1:-1;var A=y;for(e=1;e<=d;e++)q.setXYZ(y,0,x*r,0),u.setXYZ(y,0,r,0),g.x=.5,g.y=.5,v.setXY(y,g.x,g.y),y++;var C=y;for(e=0;e<=d;e++){var I=e/d*k+h,P=Math.cos(I),I=Math.sin(I);l.x=p*I;l.y=x*r;l.z=p*P;q.setXYZ(y,l.x,l.y,l.z);u.setXYZ(y,0,r,0);g.x=.5*P+.5;g.y=.5*I*r+.5;v.setXY(y,g.x,g.y);y++}for(e=0;e<d;e++)g=A+e,l=C+e,!0===c?(t.setX(z,l),z++,t.setX(z,l+1)):(t.setX(z,l+1),z++,
t.setX(z,l)),z++,t.setX(z,g),z++,n+=3;m.addGroup(E,n,!0===c?1:2);E+=n}V.BufferGeometry.call(this);this.type="CylinderBufferGeometry";this.parameters={radiusTop:a,radiusBottom:b,height:c,radialSegments:d,heightSegments:e,openEnded:g,thetaStart:h,thetaLength:k};var m=this;a=void 0!==a?a:20;b=void 0!==b?b:20;c=void 0!==c?c:100;d=Math.floor(d)||8;e=Math.floor(e)||1;g=void 0!==g?g:!1;h=void 0!==h?h:0;k=void 0!==k?k:2*Math.PI;var p=0;!1===g&&(0<a&&p++,0<b&&p++);var r=function(){var a=(d+1)*(e+1);!1===g&&
(a+=(d+1)*p+d*p);return a}(),n=function(){var a=d*e*6;!1===g&&(a+=d*p*3);return a}(),t=new V.BufferAttribute(new (65535<n?Uint32Array:Uint16Array)(n),1),q=new V.BufferAttribute(new Float32Array(3*r),3),u=new V.BufferAttribute(new Float32Array(3*r),3),v=new V.BufferAttribute(new Float32Array(2*r),2),y=0,z=0,A=[],x=c/2,E=0;(function(){var g,l,n=new V.Vector3,p=new V.Vector3,r=0,L=(b-a)/c;for(l=0;l<=e;l++){var K=[],R=l/e,Q=R*(b-a)+a;for(g=0;g<=d;g++){var I=g/d;p.x=Q*Math.sin(I*k+h);p.y=-R*c+x;p.z=Q*
Math.cos(I*k+h);q.setXYZ(y,p.x,p.y,p.z);n.copy(p);if(0===a&&0===l||0===b&&l===e)n.x=Math.sin(I*k+h),n.z=Math.cos(I*k+h);n.setY(Math.sqrt(n.x*n.x+n.z*n.z)*L).normalize();u.setXYZ(y,n.x,n.y,n.z);v.setXY(y,I,1-R);K.push(y);y++}A.push(K)}for(g=0;g<d;g++)for(l=0;l<e;l++)n=A[l+1][g],p=A[l+1][g+1],L=A[l][g+1],t.setX(z,A[l][g]),z++,t.setX(z,n),z++,t.setX(z,L),z++,t.setX(z,n),z++,t.setX(z,p),z++,t.setX(z,L),z++,r+=6;m.addGroup(E,r,0);E+=r})();!1===g&&(0<a&&l(!0),0<b&&l(!1));this.setIndex(t);this.addAttribute("position",
q);this.addAttribute("normal",u);this.addAttribute("uv",v)};V.CylinderBufferGeometry.prototype=Object.create(V.BufferGeometry.prototype);V.CylinderBufferGeometry.prototype.constructor=V.CylinderBufferGeometry;
V.CylinderGeometry=function(a,b,c,d,e,g,h,k){V.Geometry.call(this);this.type="CylinderGeometry";this.parameters={radiusTop:a,radiusBottom:b,height:c,radialSegments:d,heightSegments:e,openEnded:g,thetaStart:h,thetaLength:k};this.fromBufferGeometry(new V.CylinderBufferGeometry(a,b,c,d,e,g,h,k));this.mergeVertices()};V.CylinderGeometry.prototype=Object.create(V.Geometry.prototype);V.CylinderGeometry.prototype.constructor=V.CylinderGeometry;
V.ConeBufferGeometry=function(a,b,c,d,e,g,h){V.CylinderBufferGeometry.call(this,0,a,b,c,d,e,g,h);this.type="ConeBufferGeometry";this.parameters={radius:a,height:b,radialSegments:c,heightSegments:d,thetaStart:g,thetaLength:h}};V.ConeBufferGeometry.prototype=Object.create(V.BufferGeometry.prototype);V.ConeBufferGeometry.prototype.constructor=V.ConeBufferGeometry;
V.ConeGeometry=function(a,b,c,d,e,g,h){V.CylinderGeometry.call(this,0,a,b,c,d,e,g,h);this.type="ConeGeometry";this.parameters={radius:a,height:b,radialSegments:c,heightSegments:d,openEnded:e,thetaStart:g,thetaLength:h}};V.ConeGeometry.prototype=Object.create(V.CylinderGeometry.prototype);V.ConeGeometry.prototype.constructor=V.ConeGeometry;
V.EdgesGeometry=function(a,b){function c(a,b){return a-b}V.BufferGeometry.call(this);b=Math.cos(V.Math.DEG2RAD*(void 0!==b?b:1));var d=[0,0],e={},g=["a","b","c"];if(a instanceof V.BufferGeometry){var h=new V.Geometry;h.fromBufferGeometry(a)}else h=a.clone();h.mergeVertices();h.computeFaceNormals();a=h.vertices;h=h.faces;for(var k=0,l=h.length;k<l;k++)for(var m=h[k],p=0;3>p;p++){d[0]=m[g[p]];d[1]=m[g[(p+1)%3]];d.sort(c);var r=d.toString();void 0===e[r]?e[r]={vert1:d[0],vert2:d[1],face1:k,face2:void 0}:
e[r].face2=k}d=[];for(r in e)if(g=e[r],void 0===g.face2||h[g.face1].normal.dot(h[g.face2].normal)<=b)k=a[g.vert1],d.push(k.x),d.push(k.y),d.push(k.z),k=a[g.vert2],d.push(k.x),d.push(k.y),d.push(k.z);this.addAttribute("position",new V.BufferAttribute(new Float32Array(d),3))};V.EdgesGeometry.prototype=Object.create(V.BufferGeometry.prototype);V.EdgesGeometry.prototype.constructor=V.EdgesGeometry;
V.ExtrudeGeometry=function(a,b){"undefined"!==typeof a&&(V.Geometry.call(this),this.type="ExtrudeGeometry",a=Array.isArray(a)?a:[a],this.addShapeList(a,b),this.computeFaceNormals())};V.ExtrudeGeometry.prototype=Object.create(V.Geometry.prototype);V.ExtrudeGeometry.prototype.constructor=V.ExtrudeGeometry;V.ExtrudeGeometry.prototype.addShapeList=function(a,b){for(var c=a.length,d=0;d<c;d++)this.addShape(a[d],b)};
V.ExtrudeGeometry.prototype.addShape=function(a,b){function c(a,b,c){b||console.error("THREE.ExtrudeGeometry: vec does not exist");return b.clone().multiplyScalar(c).add(a)}function d(a,b,c){var d=a.x-b.x;var e=a.y-b.y;var g=c.x-a.x;var h=c.y-a.y,k=d*d+e*e;if(Math.abs(d*h-e*g)>Number.EPSILON){var l=Math.sqrt(k),m=Math.sqrt(g*g+h*h),k=b.x-e/l;b=b.y+d/l;h=((c.x-h/m-k)*h-(c.y+g/m-b)*g)/(d*h-e*g);g=k+d*h-a.x;d=b+e*h-a.y;e=g*g+d*d;if(2>=e)return new V.Vector2(g,d);e=Math.sqrt(e/2)}else a=!1,d>Number.EPSILON?
g>Number.EPSILON&&(a=!0):d<-Number.EPSILON?g<-Number.EPSILON&&(a=!0):Math.sign(e)===Math.sign(h)&&(a=!0),a?(g=-e,e=Math.sqrt(k)):(g=d,d=e,e=Math.sqrt(k/2));return new V.Vector2(g/e,d/e)}function e(a,b){for(G=a.length;0<=--G;){var c=G;var d=G-1;0>d&&(d=a.length-1);var e,g=t+2*p;for(e=0;e<g;e++){var h=I*e,k=I*(e+1),l=b+c+h,h=b+d+h,m=b+d+k,k=b+c+k,l=l+F,h=h+F,m=m+F,k=k+F;D.faces.push(new V.Face3(l,h,k,null,null,1));D.faces.push(new V.Face3(h,m,k,null,null,1));l=v.generateSideWallUV(D,l,h,m,k);D.faceVertexUvs[0].push([l[0],
l[1],l[3]]);D.faceVertexUvs[0].push([l[1],l[2],l[3]])}}}function g(a,b,c){D.vertices.push(new V.Vector3(a,b,c))}function h(a,b,c){a+=F;b+=F;c+=F;D.faces.push(new V.Face3(a,b,c,null,null,0));D.faceVertexUvs[0].push(v.generateTopUV(D,a,b,c))}var k=void 0!==b.amount?b.amount:100,l=void 0!==b.bevelThickness?b.bevelThickness:6,m=void 0!==b.bevelSize?b.bevelSize:l-2,p=void 0!==b.bevelSegments?b.bevelSegments:3,r=void 0!==b.bevelEnabled?b.bevelEnabled:!0,n=void 0!==b.curveSegments?b.curveSegments:12,t=void 0!==
b.steps?b.steps:1,q=b.extrudePath,u=!1,v=void 0!==b.UVGenerator?b.UVGenerator:V.ExtrudeGeometry.WorldUVGenerator;if(q){var y=q.getSpacedPoints(t);u=!0;r=!1;var z=void 0!==b.frames?b.frames:new V.TubeGeometry.FrenetFrames(q,t,!1);var A=new V.Vector3;var x=new V.Vector3;var E=new V.Vector3}r||(m=l=p=0);var C,D=this,F=this.vertices.length;b=a.extractPoints(n);a=b.shape;var H=b.holes;if(b=!V.ShapeUtils.isClockWise(a)){a=a.reverse();var B=0;for(C=H.length;B<C;B++){var L=H[B];V.ShapeUtils.isClockWise(L)&&
(H[B]=L.reverse())}b=!1}var K=V.ShapeUtils.triangulateShape(a,H),R=a;B=0;for(C=H.length;B<C;B++)L=H[B],a=a.concat(L);var Q,I=a.length,P,O=K.length;b=[];var G=0;var J=R.length;var N=J-1;for(Q=G+1;G<J;G++,N++,Q++)N===J&&(N=0),Q===J&&(Q=0),b[G]=d(R[G],R[N],R[Q]);var n=[],q=b.concat();B=0;for(C=H.length;B<C;B++){L=H[B];var ba=[];G=0;J=L.length;N=J-1;for(Q=G+1;G<J;G++,N++,Q++)N===J&&(N=0),Q===J&&(Q=0),ba[G]=d(L[G],L[N],L[Q]);n.push(ba);q=q.concat(ba)}for(N=0;N<p;N++){J=N/p;var X=l*(1-J);Q=m*Math.sin(J*
Math.PI/2);G=0;for(J=R.length;G<J;G++){var aa=c(R[G],b[G],Q);g(aa.x,aa.y,-X)}B=0;for(C=H.length;B<C;B++)for(L=H[B],ba=n[B],G=0,J=L.length;G<J;G++)aa=c(L[G],ba[G],Q),g(aa.x,aa.y,-X)}Q=m;for(G=0;G<I;G++)aa=r?c(a[G],q[G],Q):a[G],u?(x.copy(z.normals[0]).multiplyScalar(aa.x),A.copy(z.binormals[0]).multiplyScalar(aa.y),E.copy(y[0]).add(x).add(A),g(E.x,E.y,E.z)):g(aa.x,aa.y,0);for(J=1;J<=t;J++)for(G=0;G<I;G++)aa=r?c(a[G],q[G],Q):a[G],u?(x.copy(z.normals[J]).multiplyScalar(aa.x),A.copy(z.binormals[J]).multiplyScalar(aa.y),
E.copy(y[J]).add(x).add(A),g(E.x,E.y,E.z)):g(aa.x,aa.y,k/t*J);for(N=p-1;0<=N;N--){J=N/p;X=l*(1-J);Q=m*Math.sin(J*Math.PI/2);G=0;for(J=R.length;G<J;G++)aa=c(R[G],b[G],Q),g(aa.x,aa.y,k+X);B=0;for(C=H.length;B<C;B++)for(L=H[B],ba=n[B],G=0,J=L.length;G<J;G++)aa=c(L[G],ba[G],Q),u?g(aa.x,aa.y+y[t-1].y,y[t-1].x+X):g(aa.x,aa.y,k+X)}(function(){if(r){var a=0*I;for(G=0;G<O;G++)P=K[G],h(P[2]+a,P[1]+a,P[0]+a);a=I*(t+2*p);for(G=0;G<O;G++)P=K[G],h(P[0]+a,P[1]+a,P[2]+a)}else{for(G=0;G<O;G++)P=K[G],h(P[2],P[1],P[0]);
for(G=0;G<O;G++)P=K[G],h(P[0]+I*t,P[1]+I*t,P[2]+I*t)}})();(function(){var a=0;e(R,a);a+=R.length;B=0;for(C=H.length;B<C;B++)L=H[B],e(L,a),a+=L.length})()};
V.ExtrudeGeometry.WorldUVGenerator={generateTopUV:function(a,b,c,d){a=a.vertices;b=a[b];c=a[c];d=a[d];return[new V.Vector2(b.x,b.y),new V.Vector2(c.x,c.y),new V.Vector2(d.x,d.y)]},generateSideWallUV:function(a,b,c,d,e){a=a.vertices;b=a[b];c=a[c];d=a[d];e=a[e];return.01>Math.abs(b.y-c.y)?[new V.Vector2(b.x,1-b.z),new V.Vector2(c.x,1-c.z),new V.Vector2(d.x,1-d.z),new V.Vector2(e.x,1-e.z)]:[new V.Vector2(b.y,1-b.z),new V.Vector2(c.y,1-c.z),new V.Vector2(d.y,1-d.z),new V.Vector2(e.y,1-e.z)]}};
V.ShapeGeometry=function(a,b){V.Geometry.call(this);this.type="ShapeGeometry";!1===Array.isArray(a)&&(a=[a]);this.addShapeList(a,b);this.computeFaceNormals()};V.ShapeGeometry.prototype=Object.create(V.Geometry.prototype);V.ShapeGeometry.prototype.constructor=V.ShapeGeometry;V.ShapeGeometry.prototype.addShapeList=function(a,b){for(var c=0,d=a.length;c<d;c++)this.addShape(a[c],b);return this};
V.ShapeGeometry.prototype.addShape=function(a,b){void 0===b&&(b={});var c=b.material,d=void 0===b.UVGenerator?V.ExtrudeGeometry.WorldUVGenerator:b.UVGenerator,e,g=this.vertices.length;a=a.extractPoints(void 0!==b.curveSegments?b.curveSegments:12);var h=a.shape,k=a.holes;if(!V.ShapeUtils.isClockWise(h))for(h=h.reverse(),a=0,e=k.length;a<e;a++){var l=k[a];V.ShapeUtils.isClockWise(l)&&(k[a]=l.reverse())}b=V.ShapeUtils.triangulateShape(h,k);a=0;for(e=k.length;a<e;a++)l=k[a],h=h.concat(l);k=h.length;e=
b.length;for(a=0;a<k;a++)l=h[a],this.vertices.push(new V.Vector3(l.x,l.y,0));for(a=0;a<e;a++)k=b[a],h=k[0]+g,l=k[1]+g,k=k[2]+g,this.faces.push(new V.Face3(h,l,k,null,null,c)),this.faceVertexUvs[0].push(d.generateTopUV(this,h,l,k))};
V.LatheBufferGeometry=function(a,b,c,d){V.BufferGeometry.call(this);this.type="LatheBufferGeometry";this.parameters={points:a,segments:b,phiStart:c,phiLength:d};b=Math.floor(b)||12;c=c||0;d=d||2*Math.PI;d=V.Math.clamp(d,0,2*Math.PI);for(var e=(b+1)*a.length,g=b*a.length*6,h=new V.BufferAttribute(new (65535<g?Uint32Array:Uint16Array)(g),1),k=new V.BufferAttribute(new Float32Array(3*e),3),l=new V.BufferAttribute(new Float32Array(2*e),2),m=0,p=0,r=1/b,n=new V.Vector3,t=new V.Vector2,e=0;e<=b;e++)for(var g=
c+e*r*d,q=Math.sin(g),u=Math.cos(g),g=0;g<=a.length-1;g++)n.x=a[g].x*q,n.y=a[g].y,n.z=a[g].x*u,k.setXYZ(m,n.x,n.y,n.z),t.x=e/b,t.y=g/(a.length-1),l.setXY(m,t.x,t.y),m++;for(e=0;e<b;e++)for(g=0;g<a.length-1;g++)c=g+e*a.length,m=c+a.length,r=c+a.length+1,n=c+1,h.setX(p,c),p++,h.setX(p,m),p++,h.setX(p,n),p++,h.setX(p,m),p++,h.setX(p,r),p++,h.setX(p,n),p++;this.setIndex(h);this.addAttribute("position",k);this.addAttribute("uv",l);this.computeVertexNormals();if(d===2*Math.PI)for(d=this.attributes.normal.array,
h=new V.Vector3,k=new V.Vector3,l=new V.Vector3,c=b*a.length*3,g=e=0;e<a.length;e++,g+=3)h.x=d[g+0],h.y=d[g+1],h.z=d[g+2],k.x=d[c+g+0],k.y=d[c+g+1],k.z=d[c+g+2],l.addVectors(h,k).normalize(),d[g+0]=d[c+g+0]=l.x,d[g+1]=d[c+g+1]=l.y,d[g+2]=d[c+g+2]=l.z};V.LatheBufferGeometry.prototype=Object.create(V.BufferGeometry.prototype);V.LatheBufferGeometry.prototype.constructor=V.LatheBufferGeometry;
V.LatheGeometry=function(a,b,c,d){V.Geometry.call(this);this.type="LatheGeometry";this.parameters={points:a,segments:b,phiStart:c,phiLength:d};this.fromBufferGeometry(new V.LatheBufferGeometry(a,b,c,d));this.mergeVertices()};V.LatheGeometry.prototype=Object.create(V.Geometry.prototype);V.LatheGeometry.prototype.constructor=V.LatheGeometry;
V.PlaneGeometry=function(a,b,c,d){V.Geometry.call(this);this.type="PlaneGeometry";this.parameters={width:a,height:b,widthSegments:c,heightSegments:d};this.fromBufferGeometry(new V.PlaneBufferGeometry(a,b,c,d))};V.PlaneGeometry.prototype=Object.create(V.Geometry.prototype);V.PlaneGeometry.prototype.constructor=V.PlaneGeometry;
V.PlaneBufferGeometry=function(a,b,c,d){V.BufferGeometry.call(this);this.type="PlaneBufferGeometry";this.parameters={width:a,height:b,widthSegments:c,heightSegments:d};var e=a/2,g=b/2;c=Math.floor(c)||1;d=Math.floor(d)||1;var h=c+1,k=d+1,l=a/c,m=b/d;b=new Float32Array(h*k*3);a=new Float32Array(h*k*3);for(var p=new Float32Array(h*k*2),r=0,n=0,t=0;t<k;t++)for(var q=t*m-g,u=0;u<h;u++)b[r]=u*l-e,b[r+1]=-q,a[r+2]=1,p[n]=u/c,p[n+1]=1-t/d,r+=3,n+=2;r=0;e=new (65535<b.length/3?Uint32Array:Uint16Array)(c*
d*6);for(t=0;t<d;t++)for(u=0;u<c;u++)g=u+h*(t+1),k=u+1+h*(t+1),l=u+1+h*t,e[r]=u+h*t,e[r+1]=g,e[r+2]=l,e[r+3]=g,e[r+4]=k,e[r+5]=l,r+=6;this.setIndex(new V.BufferAttribute(e,1));this.addAttribute("position",new V.BufferAttribute(b,3));this.addAttribute("normal",new V.BufferAttribute(a,3));this.addAttribute("uv",new V.BufferAttribute(p,2))};V.PlaneBufferGeometry.prototype=Object.create(V.BufferGeometry.prototype);V.PlaneBufferGeometry.prototype.constructor=V.PlaneBufferGeometry;
V.RingBufferGeometry=function(a,b,c,d,e,g){V.BufferGeometry.call(this);this.type="RingBufferGeometry";this.parameters={innerRadius:a,outerRadius:b,thetaSegments:c,phiSegments:d,thetaStart:e,thetaLength:g};a=a||20;b=b||50;e=void 0!==e?e:0;g=void 0!==g?g:2*Math.PI;c=void 0!==c?Math.max(3,c):8;d=void 0!==d?Math.max(1,d):1;var h=(c+1)*(d+1),k=c*d*6,k=new V.BufferAttribute(new (65535<k?Uint32Array:Uint16Array)(k),1),l=new V.BufferAttribute(new Float32Array(3*h),3),m=new V.BufferAttribute(new Float32Array(3*
h),3),h=new V.BufferAttribute(new Float32Array(2*h),2),p=0,r=0,n=a,t=(b-a)/d,q=new V.Vector3,u=new V.Vector2,v;for(a=0;a<=d;a++){for(v=0;v<=c;v++){var y=e+v/c*g;q.x=n*Math.cos(y);q.y=n*Math.sin(y);l.setXYZ(p,q.x,q.y,q.z);m.setXYZ(p,0,0,1);u.x=(q.x/b+1)/2;u.y=(q.y/b+1)/2;h.setXY(p,u.x,u.y);p++}n+=t}for(a=0;a<d;a++)for(b=a*(c+1),v=0;v<c;v++)e=y=v+b,g=y+c+1,p=y+c+2,y+=1,k.setX(r,e),r++,k.setX(r,g),r++,k.setX(r,p),r++,k.setX(r,e),r++,k.setX(r,p),r++,k.setX(r,y),r++;this.setIndex(k);this.addAttribute("position",
l);this.addAttribute("normal",m);this.addAttribute("uv",h)};V.RingBufferGeometry.prototype=Object.create(V.BufferGeometry.prototype);V.RingBufferGeometry.prototype.constructor=V.RingBufferGeometry;V.RingGeometry=function(a,b,c,d,e,g){V.Geometry.call(this);this.type="RingGeometry";this.parameters={innerRadius:a,outerRadius:b,thetaSegments:c,phiSegments:d,thetaStart:e,thetaLength:g};this.fromBufferGeometry(new V.RingBufferGeometry(a,b,c,d,e,g))};V.RingGeometry.prototype=Object.create(V.Geometry.prototype);
V.RingGeometry.prototype.constructor=V.RingGeometry;V.SphereGeometry=function(a,b,c,d,e,g,h){V.Geometry.call(this);this.type="SphereGeometry";this.parameters={radius:a,widthSegments:b,heightSegments:c,phiStart:d,phiLength:e,thetaStart:g,thetaLength:h};this.fromBufferGeometry(new V.SphereBufferGeometry(a,b,c,d,e,g,h))};V.SphereGeometry.prototype=Object.create(V.Geometry.prototype);V.SphereGeometry.prototype.constructor=V.SphereGeometry;
V.SphereBufferGeometry=function(a,b,c,d,e,g,h){V.BufferGeometry.call(this);this.type="SphereBufferGeometry";this.parameters={radius:a,widthSegments:b,heightSegments:c,phiStart:d,phiLength:e,thetaStart:g,thetaLength:h};a=a||50;b=Math.max(3,Math.floor(b)||8);c=Math.max(2,Math.floor(c)||6);d=void 0!==d?d:0;e=void 0!==e?e:2*Math.PI;g=void 0!==g?g:0;h=void 0!==h?h:Math.PI;for(var k=g+h,l=(b+1)*(c+1),m=new V.BufferAttribute(new Float32Array(3*l),3),p=new V.BufferAttribute(new Float32Array(3*l),3),l=new V.BufferAttribute(new Float32Array(2*
l),2),r=0,n=[],t=new V.Vector3,q=0;q<=c;q++){for(var u=[],v=q/c,y=0;y<=b;y++){var z=y/b,A=-a*Math.cos(d+z*e)*Math.sin(g+v*h),x=a*Math.cos(g+v*h),E=a*Math.sin(d+z*e)*Math.sin(g+v*h);t.set(A,x,E).normalize();m.setXYZ(r,A,x,E);p.setXYZ(r,t.x,t.y,t.z);l.setXY(r,z,1-v);u.push(r);r++}n.push(u)}d=[];for(q=0;q<c;q++)for(y=0;y<b;y++)e=n[q][y+1],h=n[q][y],r=n[q+1][y],t=n[q+1][y+1],(0!==q||0<g)&&d.push(e,h,t),(q!==c-1||k<Math.PI)&&d.push(h,r,t);this.setIndex(new (65535<m.count?V.Uint32Attribute:V.Uint16Attribute)(d,
1));this.addAttribute("position",m);this.addAttribute("normal",p);this.addAttribute("uv",l);this.boundingSphere=new V.Sphere(new V.Vector3,a)};V.SphereBufferGeometry.prototype=Object.create(V.BufferGeometry.prototype);V.SphereBufferGeometry.prototype.constructor=V.SphereBufferGeometry;
V.TextGeometry=function(a,b){b=b||{};var c=b.font;if(!1===c instanceof V.Font)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new V.Geometry;a=c.generateShapes(a,b.size,b.curveSegments);b.amount=void 0!==b.height?b.height:50;void 0===b.bevelThickness&&(b.bevelThickness=10);void 0===b.bevelSize&&(b.bevelSize=8);void 0===b.bevelEnabled&&(b.bevelEnabled=!1);V.ExtrudeGeometry.call(this,a,b);this.type="TextGeometry"};V.TextGeometry.prototype=Object.create(V.ExtrudeGeometry.prototype);
V.TextGeometry.prototype.constructor=V.TextGeometry;
V.TorusBufferGeometry=function(a,b,c,d,e){V.BufferGeometry.call(this);this.type="TorusBufferGeometry";this.parameters={radius:a,tube:b,radialSegments:c,tubularSegments:d,arc:e};a=a||100;b=b||40;c=Math.floor(c)||8;d=Math.floor(d)||6;e=e||2*Math.PI;var g=(c+1)*(d+1),h=c*d*6,h=new (65535<h?Uint32Array:Uint16Array)(h),k=new Float32Array(3*g),l=new Float32Array(3*g),g=new Float32Array(2*g),m=0,p=0,r=0,n=new V.Vector3,t=new V.Vector3,q=new V.Vector3,u,v;for(u=0;u<=c;u++)for(v=0;v<=d;v++){var y=v/d*e,z=
u/c*Math.PI*2;t.x=(a+b*Math.cos(z))*Math.cos(y);t.y=(a+b*Math.cos(z))*Math.sin(y);t.z=b*Math.sin(z);k[m]=t.x;k[m+1]=t.y;k[m+2]=t.z;n.x=a*Math.cos(y);n.y=a*Math.sin(y);q.subVectors(t,n).normalize();l[m]=q.x;l[m+1]=q.y;l[m+2]=q.z;g[p]=v/d;g[p+1]=u/c;m+=3;p+=2}for(u=1;u<=c;u++)for(v=1;v<=d;v++)a=(d+1)*(u-1)+v-1,b=(d+1)*(u-1)+v,e=(d+1)*u+v,h[r]=(d+1)*u+v-1,h[r+1]=a,h[r+2]=e,h[r+3]=a,h[r+4]=b,h[r+5]=e,r+=6;this.setIndex(new V.BufferAttribute(h,1));this.addAttribute("position",new V.BufferAttribute(k,3));
this.addAttribute("normal",new V.BufferAttribute(l,3));this.addAttribute("uv",new V.BufferAttribute(g,2))};V.TorusBufferGeometry.prototype=Object.create(V.BufferGeometry.prototype);V.TorusBufferGeometry.prototype.constructor=V.TorusBufferGeometry;V.TorusGeometry=function(a,b,c,d,e){V.Geometry.call(this);this.type="TorusGeometry";this.parameters={radius:a,tube:b,radialSegments:c,tubularSegments:d,arc:e};this.fromBufferGeometry(new V.TorusBufferGeometry(a,b,c,d,e))};V.TorusGeometry.prototype=Object.create(V.Geometry.prototype);
V.TorusGeometry.prototype.constructor=V.TorusGeometry;
V.TorusKnotBufferGeometry=function(a,b,c,d,e,g){function h(a,b,c,d,e){var g=Math.sin(a);b=c/b*a;c=Math.cos(b);e.x=d*(2+c)*.5*Math.cos(a);e.y=d*(2+c)*g*.5;e.z=d*Math.sin(b)*.5}V.BufferGeometry.call(this);this.type="TorusKnotBufferGeometry";this.parameters={radius:a,tube:b,tubularSegments:c,radialSegments:d,p:e,q:g};a=a||100;b=b||40;c=Math.floor(c)||64;d=Math.floor(d)||8;e=e||2;g=g||3;var k=(d+1)*(c+1),l=d*c*6,l=new V.BufferAttribute(new (65535<l?Uint32Array:Uint16Array)(l),1),m=new V.BufferAttribute(new Float32Array(3*
k),3),p=new V.BufferAttribute(new Float32Array(3*k),3),k=new V.BufferAttribute(new Float32Array(2*k),2),r,n=0,t=0,q=new V.Vector3,u=new V.Vector3,v=new V.Vector2,y=new V.Vector3,z=new V.Vector3,A=new V.Vector3,x=new V.Vector3,E=new V.Vector3;for(r=0;r<=c;++r){var C=r/c*e*Math.PI*2;h(C,e,g,a,y);h(C+.01,e,g,a,z);x.subVectors(z,y);E.addVectors(z,y);Ga(A,x,E);Ga(E,A,x);A.normalize();E.normalize();for(C=0;C<=d;++C){var D=C/d*Math.PI*2,F=-b*Math.cos(D),D=b*Math.sin(D);q.x=y.x+(F*E.x+D*A.x);q.y=y.y+(F*E.y+
D*A.y);q.z=y.z+(F*E.z+D*A.z);m.setXYZ(n,q.x,q.y,q.z);u.subVectors(q,y).normalize();p.setXYZ(n,u.x,u.y,u.z);v.x=r/c;v.y=C/d;k.setXY(n,v.x,v.y);n++}}for(C=1;C<=c;C++)for(r=1;r<=d;r++)a=(d+1)*C+(r-1),b=(d+1)*C+r,e=(d+1)*(C-1)+r,l.setX(t,(d+1)*(C-1)+(r-1)),t++,l.setX(t,a),t++,l.setX(t,e),t++,l.setX(t,a),t++,l.setX(t,b),t++,l.setX(t,e),t++;this.setIndex(l);this.addAttribute("position",m);this.addAttribute("normal",p);this.addAttribute("uv",k)};V.TorusKnotBufferGeometry.prototype=Object.create(V.BufferGeometry.prototype);
V.TorusKnotBufferGeometry.prototype.constructor=V.TorusKnotBufferGeometry;V.TorusKnotGeometry=function(a,b,c,d,e,g,h){V.Geometry.call(this);this.type="TorusKnotGeometry";this.parameters={radius:a,tube:b,tubularSegments:c,radialSegments:d,p:e,q:g};void 0!==h&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead.");this.fromBufferGeometry(new V.TorusKnotBufferGeometry(a,b,c,d,e,g));this.mergeVertices()};V.TorusKnotGeometry.prototype=Object.create(V.Geometry.prototype);
V.TorusKnotGeometry.prototype.constructor=V.TorusKnotGeometry;
V.TubeGeometry=function(a,b,c,d,e,g){V.Geometry.call(this);this.type="TubeGeometry";this.parameters={path:a,segments:b,radius:c,radialSegments:d,closed:e,taper:g};b=b||64;c=c||1;d=d||8;e=e||!1;g=g||V.TubeGeometry.NoTaper;var h=[],k=b+1,l=new V.Vector3;var m=new V.TubeGeometry.FrenetFrames(a,b,e);var p=m.normals;var r=m.binormals;this.tangents=m.tangents;this.normals=p;this.binormals=r;for(m=0;m<k;m++){h[m]=[];var n=m/(k-1);var t=a.getPointAt(n);var q=p[m];var u=r[m];var v=c*g(n);for(n=0;n<d;n++){var y=
n/d*2*Math.PI;var z=-v*Math.cos(y);y=v*Math.sin(y);l.copy(t);l.x+=z*q.x+y*u.x;l.y+=z*q.y+y*u.y;l.z+=z*q.z+y*u.z;h[m][n]=this.vertices.push(new V.Vector3(l.x,l.y,l.z))-1}}for(m=0;m<b;m++)for(n=0;n<d;n++)g=e?(m+1)%b:m+1,k=(n+1)%d,a=h[m][n],c=h[g][n],g=h[g][k],k=h[m][k],l=new V.Vector2(m/b,n/d),p=new V.Vector2((m+1)/b,n/d),r=new V.Vector2((m+1)/b,(n+1)/d),q=new V.Vector2(m/b,(n+1)/d),this.faces.push(new V.Face3(a,c,k)),this.faceVertexUvs[0].push([l,p,q]),this.faces.push(new V.Face3(c,g,k)),this.faceVertexUvs[0].push([p.clone(),
r,q.clone()]);this.computeFaceNormals();this.computeVertexNormals()};V.TubeGeometry.prototype=Object.create(V.Geometry.prototype);V.TubeGeometry.prototype.constructor=V.TubeGeometry;V.TubeGeometry.NoTaper=function(){return 1};V.TubeGeometry.SinusoidalTaper=function(a){return Math.sin(Math.PI*a)};
V.TubeGeometry.FrenetFrames=function(a,b,c){var d=new V.Vector3,e=[],g=[],h=[],k=new V.Vector3,l=new V.Matrix4;b+=1;var m;this.tangents=e;this.normals=g;this.binormals=h;for(m=0;m<b;m++){var p=m/(b-1);var r=m;var n=a;p=Sb(n,p);n=n.getTangent(p);e[r]=n;e[m].normalize()}g[0]=new V.Vector3;h[0]=new V.Vector3;a=Number.MAX_VALUE;m=Math.abs(e[0].x);r=Math.abs(e[0].y);n=Math.abs(e[0].z);m<=a&&(a=m,d.set(1,0,0));r<=a&&(a=r,d.set(0,1,0));n<=a&&d.set(0,0,1);Ga(k,e[0],d).normalize();Ga(g[0],e[0],k);Ga(h[0],
e[0],g[0]);for(m=1;m<b;m++)g[m]=g[m-1].clone(),h[m]=h[m-1].clone(),Ga(k,e[m-1],e[m]),k.length()>Number.EPSILON&&(k.normalize(),d=Math.acos(V.Math.clamp(e[m-1].dot(e[m]),-1,1)),g[m].applyMatrix4(kb(l,k,d))),Ga(h[m],e[m],g[m]);if(c)for(d=Math.acos(V.Math.clamp(g[0].dot(g[b-1]),-1,1)),d/=b-1,0<e[0].dot(Ga(k,g[0],g[b-1]))&&(d=-d),m=1;m<b;m++)g[m].applyMatrix4(kb(l,e[m],d*m)),Ga(h[m],e[m],g[m])};
V.PolyhedronGeometry=function(a,b,c,d){function e(a){var b=a.normalize().clone();b.index=l.vertices.push(b)-1;b.uv=new V.Vector2(Math.atan2(a.z,-a.x)/2/Math.PI+.5,1-(Math.atan2(-a.y,Math.sqrt(a.x*a.x+a.z*a.z))/Math.PI+.5));return b}function g(a,b,c,d){d=new V.Face3(a.index,b.index,c.index,[a.clone(),b.clone(),c.clone()],void 0,d);l.faces.push(d);v.copy(a).add(b).add(c).divideScalar(3);d=Math.atan2(v.z,-v.x);l.faceVertexUvs[0].push([k(a.uv,a,d),k(b.uv,b,d),k(c.uv,c,d)])}function h(a,b){b=Math.pow(2,
b);var c=e(l.vertices[a.a]),d=e(l.vertices[a.b]),h=e(l.vertices[a.c]),k=[];a=a.materialIndex;for(var m=0;m<=b;m++){k[m]=[];for(var n=e(c.clone().lerp(h,m/b)),p=e(d.clone().lerp(h,m/b)),q=b-m,r=0;r<=q;r++)k[m][r]=0===r&&m===b?n:e(n.clone().lerp(p,r/q))}for(m=0;m<b;m++)for(r=0;r<2*(b-m)-1;r++)c=Math.floor(r/2),0===r%2?g(k[m][c+1],k[m+1][c],k[m][c],a):g(k[m][c+1],k[m+1][c+1],k[m+1][c],a)}function k(a,b,c){0>c&&1===a.x&&(a=new V.Vector2(a.x-1,a.y));0===b.x&&0===b.z&&(a=new V.Vector2(c/2/Math.PI+.5,a.y));
return a.clone()}V.Geometry.call(this);this.type="PolyhedronGeometry";this.parameters={vertices:a,indices:b,radius:c,detail:d};c=c||1;d=d||0;for(var l=this,m=0,p=a.length;m<p;m+=3)e(new V.Vector3(a[m],a[m+1],a[m+2]));a=this.vertices;for(var r=[],n=m=0,p=b.length;m<p;m+=3,n++){var t=a[b[m]],q=a[b[m+1]],u=a[b[m+2]];r[n]=new V.Face3(t.index,q.index,u.index,[t.clone(),q.clone(),u.clone()],void 0,n)}for(var v=new V.Vector3,m=0,p=r.length;m<p;m++)h(r[m],d);m=0;for(p=this.faceVertexUvs[0].length;m<p;m++)b=
this.faceVertexUvs[0][m],d=b[0].x,a=b[1].x,r=b[2].x,n=Math.min(d,a,r),.9<Math.max(d,a,r)&&.1>n&&(.2>d&&(b[0].x+=1),.2>a&&(b[1].x+=1),.2>r&&(b[2].x+=1));m=0;for(p=this.vertices.length;m<p;m++)this.vertices[m].multiplyScalar(c);this.mergeVertices();this.computeFaceNormals();this.boundingSphere=new V.Sphere(new V.Vector3,c)};V.PolyhedronGeometry.prototype=Object.create(V.Geometry.prototype);V.PolyhedronGeometry.prototype.constructor=V.PolyhedronGeometry;
V.DodecahedronGeometry=function(a,b){var c=(1+Math.sqrt(5))/2,d=1/c;V.PolyhedronGeometry.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-d,-c,0,-d,c,0,d,-c,0,d,c,-d,-c,0,-d,c,0,d,-c,0,d,c,0,-c,0,-d,c,0,-d,-c,0,d,c,0,d],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,
14,5,1,5,9],a,b);this.type="DodecahedronGeometry";this.parameters={radius:a,detail:b}};V.DodecahedronGeometry.prototype=Object.create(V.PolyhedronGeometry.prototype);V.DodecahedronGeometry.prototype.constructor=V.DodecahedronGeometry;
V.IcosahedronGeometry=function(a,b){var c=(1+Math.sqrt(5))/2;V.PolyhedronGeometry.call(this,[-1,c,0,1,c,0,-1,-c,0,1,-c,0,0,-1,c,0,1,c,0,-1,-c,0,1,-c,c,0,-1,c,0,1,-c,0,-1,-c,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],a,b);this.type="IcosahedronGeometry";this.parameters={radius:a,detail:b}};V.IcosahedronGeometry.prototype=Object.create(V.PolyhedronGeometry.prototype);
V.IcosahedronGeometry.prototype.constructor=V.IcosahedronGeometry;V.OctahedronGeometry=function(a,b){V.PolyhedronGeometry.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],a,b);this.type="OctahedronGeometry";this.parameters={radius:a,detail:b}};V.OctahedronGeometry.prototype=Object.create(V.PolyhedronGeometry.prototype);V.OctahedronGeometry.prototype.constructor=V.OctahedronGeometry;
V.TetrahedronGeometry=function(a,b){V.PolyhedronGeometry.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],a,b);this.type="TetrahedronGeometry";this.parameters={radius:a,detail:b}};V.TetrahedronGeometry.prototype=Object.create(V.PolyhedronGeometry.prototype);V.TetrahedronGeometry.prototype.constructor=V.TetrahedronGeometry;
V.ParametricGeometry=function(a,b,c){V.Geometry.call(this);this.type="ParametricGeometry";this.parameters={func:a,slices:b,stacks:c};var d=this.vertices,e=this.faces,g=this.faceVertexUvs[0],h,k,l=b+1;for(h=0;h<=c;h++){var m=h/c;for(k=0;k<=b;k++){var p=k/b;p=a(p,m);d.push(p)}}for(h=0;h<c;h++)for(k=0;k<b;k++){a=h*l+k;d=h*l+k+1;m=(h+1)*l+k+1;p=(h+1)*l+k;var r=new V.Vector2(k/b,h/c);var n=new V.Vector2((k+1)/b,h/c);var t=new V.Vector2((k+1)/b,(h+1)/c);var q=new V.Vector2(k/b,(h+1)/c);e.push(new V.Face3(a,
d,p));g.push([r,n,q]);e.push(new V.Face3(d,m,p));g.push([n.clone(),t,q.clone()])}this.computeFaceNormals();this.computeVertexNormals()};V.ParametricGeometry.prototype=Object.create(V.Geometry.prototype);V.ParametricGeometry.prototype.constructor=V.ParametricGeometry;
V.WireframeGeometry=function(a){function b(a,b){return a-b}V.BufferGeometry.call(this);var c=[0,0];var d={};var e=["a","b","c"];if(a instanceof V.Geometry){var g=a.vertices;var h=a.faces;var k=0;a=new Uint32Array(6*h.length);for(var l=0,m=h.length;l<m;l++)for(var p=h[l],r=0;3>r;r++){c[0]=p[e[r]];c[1]=p[e[(r+1)%3]];c.sort(b);var n=c.toString();void 0===d[n]&&(a[2*k]=c[0],a[2*k+1]=c[1],d[n]=!0,k++)}c=new Float32Array(6*k);l=0;for(m=k;l<m;l++)for(r=0;2>r;r++)d=g[a[2*l+r]],k=6*l+3*r,c[k+0]=d.x,c[k+1]=
d.y,c[k+2]=d.z;this.addAttribute("position",new V.BufferAttribute(c,3))}else if(a instanceof V.BufferGeometry){if(null!==a.index){m=a.index.array;g=a.attributes.position;e=a.groups;k=0;0===e.length&&a.addGroup(0,m.length);a=new Uint32Array(2*m.length);h=0;for(p=e.length;h<p;++h){l=e[h];r=l.start;n=l.count;for(var l=r,t=r+n;l<t;l+=3)for(r=0;3>r;r++)c[0]=m[l+r],c[1]=m[l+(r+1)%3],c.sort(b),n=c.toString(),void 0===d[n]&&(a[2*k]=c[0],a[2*k+1]=c[1],d[n]=!0,k++)}c=new Float32Array(6*k);l=0;for(m=k;l<m;l++)for(r=
0;2>r;r++)k=6*l+3*r,d=a[2*l+r],c[k+0]=g.getX(d),c[k+1]=g.getY(d),c[k+2]=g.getZ(d)}else for(g=a.attributes.position.array,k=g.length/3,c=new Float32Array(6*k),l=0,m=k/3;l<m;l++)for(r=0;3>r;r++)k=18*l+6*r,a=9*l+3*r,c[k+0]=g[a],c[k+1]=g[a+1],c[k+2]=g[a+2],d=9*l+(r+1)%3*3,c[k+3]=g[d],c[k+4]=g[d+1],c[k+5]=g[d+2];this.addAttribute("position",new V.BufferAttribute(c,3))}};V.WireframeGeometry.prototype=Object.create(V.BufferGeometry.prototype);V.WireframeGeometry.prototype.constructor=V.WireframeGeometry;
V.AxisHelper=function(a){a=a||1;var b=new Float32Array([0,0,0,a,0,0,0,0,0,0,a,0,0,0,0,0,0,a]),c=new Float32Array([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1]);a=new V.BufferGeometry;a.addAttribute("position",new V.BufferAttribute(b,3));a.addAttribute("color",new V.BufferAttribute(c,3));b=new V.LineBasicMaterial({vertexColors:V.VertexColors});V.LineSegments.call(this,a,b)};V.AxisHelper.prototype=Object.create(V.LineSegments.prototype);V.AxisHelper.prototype.constructor=V.AxisHelper;
V.ArrowHelper=function(){var a=new V.BufferGeometry;a.addAttribute("position",new V.Float32Attribute([0,0,0,0,1,0],3));var b=new V.CylinderBufferGeometry(0,.5,1,5,1);b.translate(0,-.5,0);return function(c,d,e,g,h,k){V.Object3D.call(this);void 0===g&&(g=16776960);void 0===e&&(e=1);void 0===h&&(h=.2*e);void 0===k&&(k=.2*h);this.position.copy(d);this.line=new V.Line(a,new V.LineBasicMaterial({color:g}));this.line.matrixAutoUpdate=!1;this.add(this.line);this.cone=new V.Mesh(b,new V.MeshBasicMaterial({color:g}));
this.cone.matrixAutoUpdate=!1;this.add(this.cone);this.setDirection(c);this.setLength(e,h,k)}}();V.ArrowHelper.prototype=Object.create(V.Object3D.prototype);V.ArrowHelper.prototype.constructor=V.ArrowHelper;V.ArrowHelper.prototype.setDirection=function(){var a=new V.Vector3,b;return function(c){.99999<c.y?this.quaternion.set(0,0,0,1):-.99999>c.y?this.quaternion.set(1,0,0,0):(a.set(c.z,0,-c.x).normalize(),b=Math.acos(c.y),Ia(this.quaternion,a,b))}}();
V.ArrowHelper.prototype.setLength=function(a,b,c){void 0===b&&(b=.2*a);void 0===c&&(c=.2*b);this.line.scale.set(1,Math.max(0,a-b),1);this.line.updateMatrix();this.cone.scale.set(c,b,c);this.cone.position.y=a;this.cone.updateMatrix()};V.ArrowHelper.prototype.setColor=function(a){this.line.material.color.copy(a);this.cone.material.color.copy(a)};
V.BoxHelper=function(a){var b=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),c=new Float32Array(24),d=new V.BufferGeometry;d.setIndex(new V.BufferAttribute(b,1));d.addAttribute("position",new V.BufferAttribute(c,3));V.LineSegments.call(this,d,new V.LineBasicMaterial({color:16776960}));void 0!==a&&this.update(a)};V.BoxHelper.prototype=Object.create(V.LineSegments.prototype);V.BoxHelper.prototype.constructor=V.BoxHelper;
V.BoxHelper.prototype.update=function(){var a=new V.Box3;return function(b){b instanceof V.Box3?a.copy(b):a.setFromObject(b);if(!a.isEmpty()){b=a.min;var c=a.max,d=this.geometry.attributes.position,e=d.array;e[0]=c.x;e[1]=c.y;e[2]=c.z;e[3]=b.x;e[4]=c.y;e[5]=c.z;e[6]=b.x;e[7]=b.y;e[8]=c.z;e[9]=c.x;e[10]=b.y;e[11]=c.z;e[12]=c.x;e[13]=c.y;e[14]=b.z;e[15]=b.x;e[16]=c.y;e[17]=b.z;e[18]=b.x;e[19]=b.y;e[20]=b.z;e[21]=c.x;e[22]=b.y;e[23]=b.z;d.needsUpdate=!0;this.geometry.computeBoundingSphere()}}}();
V.BoundingBoxHelper=function(a,b){b=void 0!==b?b:8947848;this.object=a;this.box=new V.Box3;V.Mesh.call(this,new V.BoxGeometry(1,1,1),new V.MeshBasicMaterial({color:b,wireframe:!0}))};V.BoundingBoxHelper.prototype=Object.create(V.Mesh.prototype);V.BoundingBoxHelper.prototype.constructor=V.BoundingBoxHelper;V.BoundingBoxHelper.prototype.update=function(){this.box.setFromObject(this.object);this.box.size(this.scale);this.box.center(this.position)};
V.CameraHelper=function(a){function b(a,b,d){c(a,d);c(b,d)}function c(a,b){d.vertices.push(new V.Vector3);d.colors.push(new V.Color(b));void 0===g[a]&&(g[a]=[]);g[a].push(d.vertices.length-1)}var d=new V.Geometry,e=new V.LineBasicMaterial({color:16777215,vertexColors:V.FaceColors}),g={};b("n1","n2",16755200);b("n2","n4",16755200);b("n4","n3",16755200);b("n3","n1",16755200);b("f1","f2",16755200);b("f2","f4",16755200);b("f4","f3",16755200);b("f3","f1",16755200);b("n1","f1",16755200);b("n2","f2",16755200);
b("n3","f3",16755200);b("n4","f4",16755200);b("p","n1",16711680);b("p","n2",16711680);b("p","n3",16711680);b("p","n4",16711680);b("u1","u2",43775);b("u2","u3",43775);b("u3","u1",43775);b("c","t",16777215);b("p","c",3355443);b("cn1","cn2",3355443);b("cn3","cn4",3355443);b("cf1","cf2",3355443);b("cf3","cf4",3355443);V.LineSegments.call(this,d,e);this.camera=a;this.camera.updateProjectionMatrix();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;this.pointMap=g;this.update()};
V.CameraHelper.prototype=Object.create(V.LineSegments.prototype);V.CameraHelper.prototype.constructor=V.CameraHelper;
V.CameraHelper.prototype.update=function(){function a(a,h,k,l){d.set(h,k,l).unproject(e);a=c[a];if(void 0!==a)for(h=0,k=a.length;h<k;h++)b.vertices[a[h]].copy(d)}var b,c,d=new V.Vector3,e=new V.Camera;return function(){b=this.geometry;c=this.pointMap;e.projectionMatrix.copy(this.camera.projectionMatrix);a("c",0,0,-1);a("t",0,0,1);a("n1",-1,-1,-1);a("n2",1,-1,-1);a("n3",-1,1,-1);a("n4",1,1,-1);a("f1",-1,-1,1);a("f2",1,-1,1);a("f3",-1,1,1);a("f4",1,1,1);a("u1",.7,1.1,-1);a("u2",-.7,1.1,-1);a("u3",0,
2,-1);a("cf1",-1,0,1);a("cf2",1,0,1);a("cf3",0,-1,1);a("cf4",0,1,1);a("cn1",-1,0,-1);a("cn2",1,0,-1);a("cn3",0,-1,-1);a("cn4",0,1,-1);b.verticesNeedUpdate=!0}}();
V.DirectionalLightHelper=function(a,b){V.Object3D.call(this);this.light=a;this.light.updateMatrixWorld();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;void 0===b&&(b=1);a=new V.BufferGeometry;a.addAttribute("position",new V.Float32Attribute([-b,b,0,b,b,0,b,-b,0,-b,-b,0,-b,b,0],3));b=new V.LineBasicMaterial({fog:!1});this.add(new V.Line(a,b));a=new V.BufferGeometry;a.addAttribute("position",new V.Float32Attribute([0,0,0,0,0,1],3));this.add(new V.Line(a,b));this.update()};
V.DirectionalLightHelper.prototype=Object.create(V.Object3D.prototype);V.DirectionalLightHelper.prototype.constructor=V.DirectionalLightHelper;V.DirectionalLightHelper.prototype.dispose=function(){var a=this.children[0],b=this.children[1];a.geometry.dispose();a.material.dispose();b.geometry.dispose();b.material.dispose()};
V.DirectionalLightHelper.prototype.update=function(){var a=new V.Vector3,b=new V.Vector3,c=new V.Vector3;return function(){W(a,this.light.matrixWorld);W(b,this.light.target.matrixWorld);c.subVectors(b,a);var d=this.children[0],e=this.children[1];d.lookAt(c);d.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);e.lookAt(c);e.scale.z=c.length()}}();
V.EdgesHelper=function(a,b,c){b=void 0!==b?b:16777215;V.LineSegments.call(this,new V.EdgesGeometry(a.geometry,c),new V.LineBasicMaterial({color:b}));this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1};V.EdgesHelper.prototype=Object.create(V.LineSegments.prototype);V.EdgesHelper.prototype.constructor=V.EdgesHelper;
V.FaceNormalsHelper=function(a,b,c,d){this.object=a;this.size=void 0!==b?b:1;a=void 0!==c?c:16776960;d=void 0!==d?d:1;b=0;c=this.object.geometry;c instanceof V.Geometry?b=c.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");c=new V.BufferGeometry;b=new V.Float32Attribute(6*b,3);c.addAttribute("position",b);V.LineSegments.call(this,c,new V.LineBasicMaterial({color:a,linewidth:d}));this.matrixAutoUpdate=!1;this.update()};
V.FaceNormalsHelper.prototype=Object.create(V.LineSegments.prototype);V.FaceNormalsHelper.prototype.constructor=V.FaceNormalsHelper;
V.FaceNormalsHelper.prototype.update=function(){var a=new V.Vector3,b=new V.Vector3,c=new V.Matrix3;return function(){this.object.updateMatrixWorld(!0);cb(c,this.object.matrixWorld);for(var d=this.object.matrixWorld,e=this.geometry.attributes.position,g=this.object.geometry,h=g.vertices,g=g.faces,k=0,l=0,m=g.length;l<m;l++){var p=g[l],r=p.normal;a.copy(h[p.a]).add(h[p.b]).add(h[p.c]).divideScalar(3).applyMatrix4(d);Za(b.copy(r),c).normalize().multiplyScalar(this.size).add(a);e.setXYZ(k,a.x,a.y,a.z);
k+=1;e.setXYZ(k,b.x,b.y,b.z);k+=1}e.needsUpdate=!0;return this}}();
V.GridHelper=function(a,b,c,d){c=new V.Color(void 0!==c?c:4473924);d=new V.Color(void 0!==d?d:8947848);for(var e=[],g=[],h=-a,k=0;h<=a;h+=b){e.push(-a,0,h,a,0,h);e.push(h,0,-a,h,0,a);var l=0===h?c:d;l.toArray(g,k);k+=3;l.toArray(g,k);k+=3;l.toArray(g,k);k+=3;l.toArray(g,k);k+=3}a=new V.BufferGeometry;a.addAttribute("position",new V.Float32Attribute(e,3));a.addAttribute("color",new V.Float32Attribute(g,3));e=new V.LineBasicMaterial({vertexColors:V.VertexColors});V.LineSegments.call(this,a,e)};
V.GridHelper.prototype=Object.create(V.LineSegments.prototype);V.GridHelper.prototype.constructor=V.GridHelper;V.GridHelper.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};
V.HemisphereLightHelper=function(a,b){V.Object3D.call(this);this.light=a;this.light.updateMatrixWorld();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;this.colors=[new V.Color,new V.Color];a=new V.SphereGeometry(b,4,2);a.rotateX(-Math.PI/2);for(b=0;8>b;b++)a.faces[b].color=this.colors[4>b?0:1];b=new V.MeshBasicMaterial({vertexColors:V.FaceColors,wireframe:!0});this.lightSphere=new V.Mesh(a,b);this.add(this.lightSphere);this.update()};V.HemisphereLightHelper.prototype=Object.create(V.Object3D.prototype);
V.HemisphereLightHelper.prototype.constructor=V.HemisphereLightHelper;V.HemisphereLightHelper.prototype.dispose=function(){this.lightSphere.geometry.dispose();this.lightSphere.material.dispose()};
V.HemisphereLightHelper.prototype.update=function(){var a=new V.Vector3;return function(){this.colors[0].copy(this.light.color).multiplyScalar(this.light.intensity);this.colors[1].copy(this.light.groundColor).multiplyScalar(this.light.intensity);this.lightSphere.lookAt(W(a,this.light.matrixWorld).negate());this.lightSphere.geometry.colorsNeedUpdate=!0}}();
V.PointLightHelper=function(a,b){this.light=a;this.light.updateMatrixWorld();a=new V.SphereBufferGeometry(b,4,2);b=new V.MeshBasicMaterial({wireframe:!0,fog:!1});b.color.copy(this.light.color).multiplyScalar(this.light.intensity);V.Mesh.call(this,a,b);this.matrix=this.light.matrixWorld;this.matrixAutoUpdate=!1};V.PointLightHelper.prototype=Object.create(V.Mesh.prototype);V.PointLightHelper.prototype.constructor=V.PointLightHelper;
V.PointLightHelper.prototype.dispose=function(){this.geometry.dispose();this.material.dispose()};V.PointLightHelper.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)};
V.SkeletonHelper=function(a){this.bones=Ub(this,a);for(var b=new V.Geometry,c=0;c<this.bones.length;c++)this.bones[c].parent instanceof V.Bone&&(b.vertices.push(new V.Vector3),b.vertices.push(new V.Vector3),b.colors.push(new V.Color(0,0,1)),b.colors.push(new V.Color(0,1,0)));b.dynamic=!0;c=new V.LineBasicMaterial({vertexColors:V.VertexColors,depthTest:!1,depthWrite:!1,transparent:!0});V.LineSegments.call(this,b,c);this.root=a;this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;this.update()};
V.SkeletonHelper.prototype=Object.create(V.LineSegments.prototype);V.SkeletonHelper.prototype.constructor=V.SkeletonHelper;function Ub(a,b){var c=[];b instanceof V.Bone&&c.push(b);for(var d=0;d<b.children.length;d++)c.push.apply(c,Ub(a,b.children[d]));return c}
V.SkeletonHelper.prototype.update=function(){for(var a=this.geometry,b=(new V.Matrix4).getInverse(this.root.matrixWorld),c=new V.Matrix4,d=0,e=0;e<this.bones.length;e++){var g=this.bones[e];g.parent instanceof V.Bone&&(Pa(c,b,g.matrixWorld),W(a.vertices[d],c),Pa(c,b,g.parent.matrixWorld),W(a.vertices[d+1],c),d+=2)}a.verticesNeedUpdate=!0;a.computeBoundingSphere()};
V.SpotLightHelper=function(a){V.Object3D.call(this);this.light=a;this.light.updateMatrixWorld();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;a=new V.BufferGeometry;for(var b=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],c=0,d=1;32>c;c++,d++){var e=c/32*Math.PI*2,g=d/32*Math.PI*2;b.push(Math.cos(e),Math.sin(e),1,Math.cos(g),Math.sin(g),1)}a.addAttribute("position",new V.Float32Attribute(b,3));b=new V.LineBasicMaterial({fog:!1});this.cone=new V.LineSegments(a,b);this.add(this.cone);
this.update()};V.SpotLightHelper.prototype=Object.create(V.Object3D.prototype);V.SpotLightHelper.prototype.constructor=V.SpotLightHelper;V.SpotLightHelper.prototype.dispose=function(){this.cone.geometry.dispose();this.cone.material.dispose()};
V.SpotLightHelper.prototype.update=function(){var a=new V.Vector3,b=new V.Vector3;return function(){var c=this.light.distance?this.light.distance:1E3,d=c*Math.tan(this.light.angle);this.cone.scale.set(d,d,c);W(a,this.light.matrixWorld);W(b,this.light.target.matrixWorld);this.cone.lookAt(b.sub(a));this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)}}();
V.VertexNormalsHelper=function(a,b,c,d){this.object=a;this.size=void 0!==b?b:1;a=void 0!==c?c:16711680;d=void 0!==d?d:1;b=0;c=this.object.geometry;c instanceof V.Geometry?b=3*c.faces.length:c instanceof V.BufferGeometry&&(b=c.attributes.normal.count);c=new V.BufferGeometry;b=new V.Float32Attribute(6*b,3);c.addAttribute("position",b);V.LineSegments.call(this,c,new V.LineBasicMaterial({color:a,linewidth:d}));this.matrixAutoUpdate=!1;this.update()};V.VertexNormalsHelper.prototype=Object.create(V.LineSegments.prototype);
V.VertexNormalsHelper.prototype.constructor=V.VertexNormalsHelper;
V.VertexNormalsHelper.prototype.update=function(){var a=new V.Vector3,b=new V.Vector3,c=new V.Matrix3;return function(){var d=["a","b","c"];this.object.updateMatrixWorld(!0);cb(c,this.object.matrixWorld);var e=this.object.matrixWorld,g=this.geometry.attributes.position;var h=this.object.geometry;if(h instanceof V.Geometry)for(var k=h.vertices,l=h.faces,m=h=0,p=l.length;m<p;m++)for(var r=l[m],n=0,t=r.vertexNormals.length;n<t;n++){var q=r.vertexNormals[n];a.copy(k[r[d[n]]]).applyMatrix4(e);Za(b.copy(q),
c).normalize().multiplyScalar(this.size).add(a);g.setXYZ(h,a.x,a.y,a.z);h+=1;g.setXYZ(h,b.x,b.y,b.z);h+=1}else if(h instanceof V.BufferGeometry)for(d=h.attributes.position,k=h.attributes.normal,n=h=0,t=d.count;n<t;n++)a.set(d.getX(n),d.getY(n),d.getZ(n)).applyMatrix4(e),b.set(k.getX(n),k.getY(n),k.getZ(n)),Za(b,c).normalize().multiplyScalar(this.size).add(a),g.setXYZ(h,a.x,a.y,a.z),h+=1,g.setXYZ(h,b.x,b.y,b.z),h+=1;g.needsUpdate=!0;return this}}();
V.WireframeHelper=function(a,b){b=void 0!==b?b:16777215;V.LineSegments.call(this,new V.WireframeGeometry(a.geometry),new V.LineBasicMaterial({color:b}));this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1};V.WireframeHelper.prototype=Object.create(V.LineSegments.prototype);V.WireframeHelper.prototype.constructor=V.WireframeHelper;V.ImmediateRenderObject=function(a){V.Object3D.call(this);this.material=a;this.render=function(){}};V.ImmediateRenderObject.prototype=Object.create(V.Object3D.prototype);
V.ImmediateRenderObject.prototype.constructor=V.ImmediateRenderObject;V.MorphBlendMesh=function(a,b){V.Mesh.call(this,a,b);this.animationsMap={};this.animationsList=[];a=this.geometry.morphTargets.length;Vb(this,"__default",0,a-1,a/1);if(a=this.animationsMap.__default)a.weight=1};V.MorphBlendMesh.prototype=Object.create(V.Mesh.prototype);f=V.MorphBlendMesh.prototype;f.constructor=V.MorphBlendMesh;
function Vb(a,b,c,d,e){c={start:c,end:d,length:d-c+1,fps:e,duration:(d-c)/e,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1};a.animationsMap[b]=c;a.animationsList.push(c)}
f.autoCreateAnimations=function(a){for(var b,c,d=/([a-z]+)_?(\d+)/i,e,g={},h=this.geometry,k=0,l=h.morphTargets.length;k<l;k++)(b=h.morphTargets[k].name.match(d))&&1<b.length&&(c=b[1],g[c]||(g[c]={start:Infinity,end:-Infinity}),b=g[c],k<b.start&&(b.start=k),k>b.end&&(b.end=k),e||(e=c));for(c in g)b=g[c],Vb(this,c,b.start,b.end,a);this.firstAnimation=e};f.setAnimationDirectionForward=function(a){if(a=this.animationsMap[a])a.direction=1,a.directionBackwards=!1};
f.setAnimationDirectionBackward=function(a){if(a=this.animationsMap[a])a.direction=-1,a.directionBackwards=!0};f.setAnimationFPS=function(a,b){if(a=this.animationsMap[a])a.fps=b,a.duration=(a.end-a.start)/a.fps};f.setAnimationDuration=function(a,b){if(a=this.animationsMap[a])a.duration=b,a.fps=(a.end-a.start)/a.duration};f.setAnimationTime=function(a,b){if(a=this.animationsMap[a])a.time=b};f.getAnimationTime=function(a){var b=0;if(a=this.animationsMap[a])b=a.time;return b};
f.getAnimationDuration=function(a){var b=-1;if(a=this.animationsMap[a])b=a.duration;return b};f.playAnimation=function(a){var b=this.animationsMap[a];b?(b.time=0,b.active=!0):console.warn("THREE.MorphBlendMesh: animation["+a+"] undefined in .playAnimation()")};f.stopAnimation=function(a){if(a=this.animationsMap[a])a.active=!1};
f.update=function(a){for(var b=0,c=this.animationsList.length;b<c;b++){var d=this.animationsList[b];if(d.active){var e=d.duration/d.length;d.time+=d.direction*a;if(d.mirroredLoop){if(d.time>d.duration||0>d.time)d.direction*=-1,d.time>d.duration&&(d.time=d.duration,d.directionBackwards=!0),0>d.time&&(d.time=0,d.directionBackwards=!1)}else d.time%=d.duration,0>d.time&&(d.time+=d.duration);var g=d.start+V.Math.clamp(Math.floor(d.time/e),0,d.length-1),h=d.weight;g!==d.currentFrame&&(this.morphTargetInfluences[d.lastFrame]=
0,this.morphTargetInfluences[d.currentFrame]=1*h,this.morphTargetInfluences[g]=0,d.lastFrame=d.currentFrame,d.currentFrame=g);e=d.time%e/e;d.directionBackwards&&(e=1-e);d.currentFrame!==d.lastFrame?(this.morphTargetInfluences[d.currentFrame]=e*h,this.morphTargetInfluences[d.lastFrame]=(1-e)*h):this.morphTargetInfluences[d.currentFrame]=h}}};
</script>
<script>//~~WEBPATH~~/tf-imports/OrbitControls.js
V.OrbitControls=function(a,b){function c(){return Math.pow(.95,q.zoomSpeed)}function d(a){q.object instanceof V.PerspectiveCamera?D/=a:q.object instanceof V.OrthographicCamera?(q.object.zoom=Math.max(q.minZoom,Math.min(q.maxZoom,q.object.zoom*a)),q.object.updateProjectionMatrix(),H=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),q.enableZoom=!1)}function e(a){q.object instanceof V.PerspectiveCamera?D*=a:q.object instanceof V.OrthographicCamera?
(q.object.zoom=Math.max(q.minZoom,Math.min(q.maxZoom,q.object.zoom/a)),q.object.updateProjectionMatrix(),H=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),q.enableZoom=!1)}function g(a){if(!1!==q.enabled){a.preventDefault();if(a.button===q.mouseButtons.ORBIT){if(!1===q.enableRotate)return;B.set(a.clientX,a.clientY);A=z.ROTATE}else if(a.button===q.mouseButtons.ZOOM){if(!1===q.enableZoom)return;P.set(a.clientX,a.clientY);A=z.DOLLY}else if(a.button===
q.mouseButtons.PAN){if(!1===q.enablePan)return;R.set(a.clientX,a.clientY);A=z.PAN}A!==z.NONE&&(document.addEventListener("mousemove",h,!1),document.addEventListener("mouseup",k,!1),document.addEventListener("mouseout",k,!1),q.dispatchEvent(v))}}function h(a){!1!==q.enabled&&(a.preventDefault(),A===z.ROTATE?!1!==q.enableRotate&&(L.set(a.clientX,a.clientY),K.subVectors(L,B),a=q.domElement===document?q.domElement.body:q.domElement,C.theta-=2*Math.PI*K.x/a.clientWidth*q.rotateSpeed,C.phi-=2*Math.PI*K.y/
a.clientHeight*q.rotateSpeed,B.copy(L),q.update()):A===z.DOLLY?!1!==q.enableZoom&&(O.set(a.clientX,a.clientY),G.subVectors(O,P),0<G.y?d(c()):0>G.y&&e(c()),P.copy(O),q.update()):A===z.PAN&&!1!==q.enablePan&&(Q.set(a.clientX,a.clientY),I.subVectors(Q,R),ba(I.x,I.y),R.copy(Q),q.update()))}function k(){!1!==q.enabled&&(document.removeEventListener("mousemove",h,!1),document.removeEventListener("mouseup",k,!1),document.removeEventListener("mouseout",k,!1),q.dispatchEvent(y),A=z.NONE)}function l(a){if(!1!==
q.enabled&&!1!==q.enableZoom&&(A===z.NONE||A===z.ROTATE)){a.preventDefault();a.stopPropagation();var b=0;void 0!==a.wheelDelta?b=a.wheelDelta:void 0!==a.detail&&(b=-a.detail);0<b?e(c()):0>b&&d(c());q.update();q.dispatchEvent(v);q.dispatchEvent(y)}}function m(a){if(!1!==q.enabled&&!1!==q.enableKeys&&!1!==q.enablePan)switch(a.keyCode){case q.keys.UP:ba(0,q.keyPanSpeed);q.update();break;case q.keys.BOTTOM:ba(0,-q.keyPanSpeed);q.update();break;case q.keys.LEFT:ba(q.keyPanSpeed,0);q.update();break;case q.keys.RIGHT:ba(-q.keyPanSpeed,
0),q.update()}}function p(a){if(!1!==q.enabled){switch(a.touches.length){case 1:if(!1===q.enableRotate)return;B.set(a.touches[0].pageX,a.touches[0].pageY);A=z.TOUCH_ROTATE;break;case 2:if(!1===q.enableZoom)return;var b=a.touches[0].pageX-a.touches[1].pageX;a=a.touches[0].pageY-a.touches[1].pageY;P.set(0,Math.sqrt(b*b+a*a));A=z.TOUCH_DOLLY;break;case 3:if(!1===q.enablePan)return;R.set(a.touches[0].pageX,a.touches[0].pageY);A=z.TOUCH_PAN;break;default:A=z.NONE}A!==z.NONE&&q.dispatchEvent(v)}}function r(a){if(!1!==
q.enabled)switch(a.preventDefault(),a.stopPropagation(),a.touches.length){case 1:if(!1===q.enableRotate)break;if(A!==z.TOUCH_ROTATE)break;L.set(a.touches[0].pageX,a.touches[0].pageY);K.subVectors(L,B);var b=q.domElement===document?q.domElement.body:q.domElement;C.theta-=2*Math.PI*K.x/b.clientWidth*q.rotateSpeed;C.phi-=2*Math.PI*K.y/b.clientHeight*q.rotateSpeed;B.copy(L);q.update();break;case 2:if(!1===q.enableZoom)break;if(A!==z.TOUCH_DOLLY)break;b=a.touches[0].pageX-a.touches[1].pageX;a=a.touches[0].pageY-
a.touches[1].pageY;O.set(0,Math.sqrt(b*b+a*a));G.subVectors(O,P);0<G.y?e(c()):0>G.y&&d(c());P.copy(O);q.update();break;case 3:if(!1===q.enablePan)break;if(A!==z.TOUCH_PAN)break;Q.set(a.touches[0].pageX,a.touches[0].pageY);I.subVectors(Q,R);ba(I.x,I.y);R.copy(Q);q.update();break;default:A=z.NONE}}function n(){!1!==q.enabled&&(q.dispatchEvent(y),A=z.NONE)}function t(a){a.preventDefault()}this.object=a;this.domElement=void 0!==b?b:document;this.enabled=!0;this.target=new V.Vector3;this.minDistance=0;
this.maxDistance=Infinity;this.minZoom=0;this.maxZoom=Infinity;this.minPolarAngle=0;this.maxPolarAngle=Math.PI;this.minAzimuthAngle=-Infinity;this.maxAzimuthAngle=Infinity;this.enableDamping=!1;this.dampingFactor=.25;this.enableZoom=!0;this.zoomSpeed=1;this.enableRotate=!0;this.rotateSpeed=1;this.enablePan=!0;this.keyPanSpeed=7;this.autoRotate=!1;this.autoRotateSpeed=2;this.enableKeys=!0;this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40};this.mouseButtons={ORBIT:V.MOUSE.LEFT,ZOOM:V.MOUSE.MIDDLE,PAN:V.MOUSE.RIGHT};
this.target0=this.target.clone();this.position0=this.object.position.clone();this.zoom0=this.object.zoom;this.getPolarAngle=function(){return E.phi};this.getAzimuthalAngle=function(){return E.theta};this.reset=function(){q.target.copy(q.target0);q.object.position.copy(q.position0);q.object.zoom=q.zoom0;q.object.updateProjectionMatrix();q.dispatchEvent(u);q.update();A=z.NONE};this.update=function(){var b=new V.Vector3,c=(new V.Quaternion).setFromUnitVectors(a.up,new V.Vector3(0,1,0)),d=c.clone().inverse(),
e=new V.Vector3,g=new V.Quaternion;return function(){var a=q.object.position;b.copy(a).sub(q.target);Oa(b,c);E.setFromVector3(b);q.autoRotate&&A===z.NONE&&(C.theta-=2*Math.PI/60/60*q.autoRotateSpeed);E.theta+=C.theta;E.phi+=C.phi;E.theta=Math.max(q.minAzimuthAngle,Math.min(q.maxAzimuthAngle,E.theta));E.phi=Math.max(q.minPolarAngle,Math.min(q.maxPolarAngle,E.phi));E.phi=Math.max(1E-6,Math.min(Math.PI-1E-6,E.phi));E.radius*=D;E.radius=Math.max(q.minDistance,Math.min(q.maxDistance,E.radius));q.target.add(F);
var h=E,k=Math.sin(h.phi)*h.radius;b.x=k*Math.sin(h.theta);b.y=Math.cos(h.phi)*h.radius;b.z=k*Math.cos(h.theta);Oa(b,d);a.copy(q.target).add(b);q.object.lookAt(q.target);!0===q.enableDamping?(C.theta*=1-q.dampingFactor,C.phi*=1-q.dampingFactor):C.set(0,0,0);D=1;F.set(0,0,0);return H||e.distanceToSquared(q.object.position)>x||8*(1-g.dot(q.object.quaternion))>x?(q.dispatchEvent(u),e.copy(q.object.position),g.copy(q.object.quaternion),H=!1,!0):!1}}();this.dispose=function(){q.domElement.removeEventListener("contextmenu",
t,!1);q.domElement.removeEventListener("mousedown",g,!1);q.domElement.removeEventListener("mousewheel",l,!1);q.domElement.removeEventListener("MozMousePixelScroll",l,!1);q.domElement.removeEventListener("touchstart",p,!1);q.domElement.removeEventListener("touchend",n,!1);q.domElement.removeEventListener("touchmove",r,!1);document.removeEventListener("mousemove",h,!1);document.removeEventListener("mouseup",k,!1);document.removeEventListener("mouseout",k,!1);window.removeEventListener("keydown",m,!1)};
var q=this,u={type:"change"},v={type:"start"},y={type:"end"},z={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},A=z.NONE,x=1E-6,E=new V.Spherical,C=new V.Spherical,D=1,F=new V.Vector3,H=!1,B=new V.Vector2,L=new V.Vector2,K=new V.Vector2,R=new V.Vector2,Q=new V.Vector2,I=new V.Vector2,P=new V.Vector2,O=new V.Vector2,G=new V.Vector2,J=function(){var a=new V.Vector3;return function(b,c){Ra(a,c,0);a.multiplyScalar(-b);F.add(a)}}(),N=function(){var a=new V.Vector3;return function(b,
c){Ra(a,c,1);a.multiplyScalar(b);F.add(a)}}(),ba=function(){var a=new V.Vector3;return function(b,c){var d=q.domElement===document?q.domElement.body:q.domElement;if(q.object instanceof V.PerspectiveCamera){a.copy(q.object.position).sub(q.target);var e=a.length(),e=e*Math.tan(q.object.fov/2*Math.PI/180);J(2*b*e/d.clientHeight,q.object.matrix);N(2*c*e/d.clientHeight,q.object.matrix)}else q.object instanceof V.OrthographicCamera?(J(b*(q.object.right-q.object.left)/q.object.zoom/d.clientWidth,q.object.matrix),
N(c*(q.object.top-q.object.bottom)/q.object.zoom/d.clientHeight,q.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),q.enablePan=!1)}}();q.domElement.addEventListener("contextmenu",t,!1);q.domElement.addEventListener("mousedown",g,!1);q.domElement.addEventListener("mousewheel",l,!1);q.domElement.addEventListener("MozMousePixelScroll",l,!1);q.domElement.addEventListener("touchstart",p,!1);q.domElement.addEventListener("touchend",n,!1);q.domElement.addEventListener("touchmove",
r,!1);window.addEventListener("keydown",m,!1);this.update()};V.OrbitControls.prototype=Object.create(V.EventDispatcher.prototype);V.OrbitControls.prototype.constructor=V.OrbitControls;
Object.defineProperties(V.OrbitControls.prototype,{center:{get:function(){console.warn("THREE.OrbitControls: .center has been renamed to .target");return this.target}},noZoom:{get:function(){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.");return!this.enableZoom},set:function(a){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.");this.enableZoom=!a}},noRotate:{get:function(){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.");
return!this.enableRotate},set:function(a){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.");this.enableRotate=!a}},noPan:{get:function(){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.");return!this.enablePan},set:function(a){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.");this.enablePan=!a}},noKeys:{get:function(){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.");
return!this.enableKeys},set:function(a){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.");this.enableKeys=!a}},staticMoving:{get:function(){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.");return!this.enableDamping},set:function(a){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.");this.enableDamping=!a}},dynamicDampingFactor:{get:function(){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.");
return this.dampingFactor},set:function(a){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.");this.dampingFactor=a}}});
</script>













<dom-module id="iron-autogrow-textarea">
  <template>
    <style>
      :host {
        display: inline-block;
        position: relative;
        width: 400px;
        border: 1px solid;
        padding: 2px;
        -moz-appearance: textarea;
        -webkit-appearance: textarea;
        overflow: hidden;
      }

      .mirror-text {
        visibility: hidden;
        word-wrap: break-word;
      }

      .fit {
        @apply(--layout-fit);
      }

      textarea {
        position: relative;
        outline: none;
        border: none;
        resize: none;
        background: inherit;
        color: inherit;
        /* see comments in template */
        width: 100%;
        height: 100%;
        font-size: inherit;
        font-family: inherit;
        line-height: inherit;
        text-align: inherit;
        @apply(--iron-autogrow-textarea);
      }

      ::content textarea:invalid {
        box-shadow: none;
      }

      textarea::-webkit-input-placeholder {
        @apply(--iron-autogrow-textarea-placeholder);
      }

      textarea:-moz-placeholder {
        @apply(--iron-autogrow-textarea-placeholder);
      }

      textarea::-moz-placeholder {
        @apply(--iron-autogrow-textarea-placeholder);
      }

      textarea:-ms-input-placeholder {
        @apply(--iron-autogrow-textarea-placeholder);
      }
    </style>

    
    
    <div id="mirror" class="mirror-text" aria-hidden="true">&nbsp;</div>

    
    <div class="textarea-container fit">
      <textarea id="textarea" name$="[[name]]" autocomplete$="[[autocomplete]]" autofocus$="[[autofocus]]" inputmode$="[[inputmode]]" placeholder$="[[placeholder]]" readonly$="[[readonly]]" required$="[[required]]" disabled$="[[disabled]]" rows$="[[rows]]" minlength$="[[minlength]]" maxlength$="[[maxlength]]"></textarea>
    </div>
  </template>
</dom-module>

<script>//~~WEBPATH~~/iron-autogrow-textarea/iron-autogrow-textarea.html.js
Polymer({is:"iron-autogrow-textarea",behaviors:[Polymer.IronFormElementBehavior,Polymer.IronValidatableBehavior,Polymer.IronControlState],properties:{bindValue:{observer:"_bindValueChanged",type:String},rows:{type:Number,value:1,observer:"_updateCached"},maxRows:{type:Number,value:0,observer:"_updateCached"},autocomplete:{type:String,value:"off"},autofocus:{type:Boolean,value:!1},inputmode:{type:String},placeholder:{type:String},readonly:{type:String},required:{type:Boolean},minlength:{type:Number},
maxlength:{type:Number}},listeners:{input:"_onInput"},observers:["_onValueChanged(value)"],get textarea(){return this.$.textarea},get selectionStart(){return this.$.textarea.selectionStart},get selectionEnd(){return this.$.textarea.selectionEnd},set selectionStart(a){this.$.textarea.selectionStart=a},set selectionEnd(a){this.$.textarea.selectionEnd=a},attached:function(){navigator.userAgent.match(/iP(?:[oa]d|hone)/)&&(this.$.textarea.style.marginLeft="-3px")},validate:function(){if(!this.required&&
""==this.value)return this.invalid=!1,!0;if(this.hasValidator())var a=Polymer.IronValidatableBehavior.validate.call(this,this.value);else a=this.$.textarea.validity.valid,this.invalid=!a;this.fire("iron-input-validate");return a},_bindValueChanged:function(){var a=this.textarea;a&&(a.value!==this.bindValue&&(a.value=this.bindValue||0===this.bindValue?this.bindValue:""),this.value=this.bindValue,this.$.mirror.innerHTML=this._valueForMirror(),this.fire("bind-value-changed",{value:this.bindValue}))},
_onInput:function(a){this.bindValue=a.path?a.path[0].value:a.target.value},_constrain:function(a){a=a||[""];for(a=0<this.maxRows&&a.length>this.maxRows?a.slice(0,this.maxRows):a.slice(0);0<this.rows&&a.length<this.rows;)a.push("");return a.join("\x3cbr/\x3e")+"\x26#160;"},_valueForMirror:function(){var a=this.textarea;if(a)return this.tokens=a&&a.value?a.value.replace(/&/gm,"\x26amp;").replace(/"/gm,"\x26quot;").replace(/'/gm,"\x26#39;").replace(/</gm,"\x26lt;").replace(/>/gm,"\x26gt;").split("\n"):
[""],this._constrain(this.tokens)},_updateCached:function(){this.$.mirror.innerHTML=this._constrain(this.tokens)},_onValueChanged:function(){this.bindValue=this.value}});
</script>









<dom-module id="paper-textarea">
  <template>
    <style>
      :host {
        display: block;
      }

      :host([hidden]) {
        display: none !important;
      }

      label {
        pointer-events: none;
      }
    </style>

    <paper-input-container no-label-float$="[[noLabelFloat]]" always-float-label="[[_computeAlwaysFloatLabel(alwaysFloatLabel,placeholder)]]" auto-validate$="[[autoValidate]]" disabled$="[[disabled]]" invalid="[[invalid]]">

      <label hidden$="[[!label]]" aria-hidden="true">[[label]]</label>

      <iron-autogrow-textarea id="input" class="paper-input-input" bind-value="{{value}}" invalid="{{invalid}}" disabled$="[[disabled]]" autocomplete$="[[autocomplete]]" autofocus$="[[autofocus]]" inputmode$="[[inputmode]]" name$="[[name]]" placeholder$="[[placeholder]]" readonly$="[[readonly]]" required$="[[required]]" maxlength$="[[maxlength]]" autocapitalize$="[[autocapitalize]]" rows$="[[rows]]" max-rows$="[[maxRows]]" on-change="_onChange"></iron-autogrow-textarea>

      <template is="dom-if" if="[[errorMessage]]">
        <paper-input-error>[[errorMessage]]</paper-input-error>
      </template>

      <template is="dom-if" if="[[charCounter]]">
        <paper-input-char-counter></paper-input-char-counter>
      </template>

    </paper-input-container>
  </template>
</dom-module>

<script>//~~WEBPATH~~/paper-input/paper-textarea.html.js
Polymer({is:"paper-textarea",behaviors:[Polymer.PaperInputBehavior,Polymer.IronFormElementBehavior],properties:{_ariaLabelledBy:{observer:"_ariaLabelledByChanged",type:String},_ariaDescribedBy:{observer:"_ariaDescribedByChanged",type:String},rows:{type:Number,value:1},maxRows:{type:Number,value:0}},_ariaLabelledByChanged:function(a){this.$.input.textarea.setAttribute("aria-labelledby",a)},_ariaDescribedByChanged:function(a){this.$.input.textarea.setAttribute("aria-describedby",a)},get _focusableElement(){return this.$.input.textarea}});
</script>



<dom-module id="vz-projector-styles">
<template>
<style>
:host {
  --paper-input-container-label: {
    font-size: 14px;
  };
  --paper-input-container-input: {
    font-size: 14px;
  };
  /* TODO: Figure out why this doesn't work */
  --paper-dropdown-menu-input: {
    font-size: 14px;
  };
}

paper-button {
  background: #e3e3e3;
  margin-left: 0;
  text-transform: none;
}

paper-dropdown-menu paper-item {
  font-size: 13px;
}

paper-tooltip {
  max-width: 200px;
  --paper-tooltip: {
    font-size: 12px;
  };
}

paper-checkbox {
  --paper-checkbox-checked-color: #880E4F;
}

paper-toggle-button {
  --paper-toggle-button-checked-bar-color:  #880E4F;
  --paper-toggle-button-checked-button-color:  #880E4F;
  --paper-toggle-button-checked-ink-color: #880E4F;
}

paper-icon-button {
  border-radius: 50%;
}

paper-icon-button[active] {
  color: white;
  background-color: #880E4F;
}

.slider {
  display: flex;
  align-items: center;
  margin-bottom: 10px;
  justify-content: space-between;
}

.slider span {
  width: 35px;
  text-align: right;
}

.slider label {
  align-items: center;
  display: flex;
}

.help-icon {
  height: 15px;
  left: 2px;
  min-width: 15px;
  min-height: 15px;
  margin: 0;
  padding: 0;
  top: -2px;
  width: 15px;
}

.ink-panel {
  display: flex;
  flex-direction: column;
  font-size: 14px;
}

.ink-panel h4 {
  border-bottom: 1px solid #ddd;
  font-size: 14px;
  font-weight: 500;
  margin: 0;
  margin-bottom: 10px;
  padding-bottom: 5px;
}

.ink-panel-header {
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  height: 50px;
}

.ink-panel-content {
  display: none;
  height: 100%;
}

.ink-panel-content.active {
  display: block;
}

.ink-panel-content h3 {
  font-weight: 500;
  font-size: 14px;
  margin-top: 20px;
  margin-bottom: 5px;
  text-transform: uppercase;
}

.ink-panel-header h3 {
  font-weight: 500;
  font-size: 14px;
  margin: 0;
  padding: 0 24px;
  text-transform: uppercase;
}


/* - Tabs */
.ink-tab-group {
  align-items: center;
  box-sizing: border-box;
  display: flex;
  height: 100%;
  justify-content: space-around;
}

.ink-tab-group .projection-tab {
  color: rgba(0, 0, 0, 0.5);
  cursor: pointer;
  font-weight: 300;
  line-height: 49px;
  padding: 0 12px;
  text-align: center;
  text-transform: uppercase;
}

.ink-tab-group .projection-tab:hover {
  color: black;
}

.ink-tab-group .projection-tab.active {
  border-bottom: 2px solid black;
  color: black;
  font-weight: 500;
}

h4 {
  margin: 30px 0 10px 0;
}

.dismiss-dialog-note {
  margin-top: 25px;
  font-size: 11px;
  text-align: right;
}
</style>
</template>
</dom-module>










<script>//~~WEBPATH~~/vz-projector/heap.js
var Wb=function(){function a(){this.arr=[]}a.prototype.push=function(a,c){this.arr.push({key:a,value:c});this.bubbleUp(this.arr.length-1)};a.prototype.pop=function(){if(0===this.arr.length)throw Error("pop() called on empty binary heap");var a=this.arr[0],c=this.arr.length-1;this.arr[0]=this.arr[c];this.arr.pop();0<c&&this.bubbleDown(0);return a};a.prototype.peek=function(){return this.arr[0]};a.prototype.popPush=function(a,c){if(0===this.arr.length)throw Error("pop() called on empty binary heap");
this.arr[0]={key:a,value:c};0<this.arr.length&&this.bubbleDown(0)};a.prototype.size=function(){return this.arr.length};a.prototype.items=function(){return this.arr};a.prototype.swap=function(a,c){var b=this.arr[a];this.arr[a]=this.arr[c];this.arr[c]=b};a.prototype.bubbleDown=function(a){var b=(a<<1)+1,d=b+1,e=a;b<this.arr.length&&this.arr[b].key<this.arr[e].key&&(e=b);d<this.arr.length&&this.arr[d].key<this.arr[e].key&&(e=d);e!==a&&(this.swap(e,a),this.bubbleDown(e))};a.prototype.bubbleUp=function(a){if(!(0>=
a)){var b=a-1>>1;this.arr[a].key<this.arr[b].key&&(this.swap(a,b),this.bubbleUp(b))}};return a}(),Xb=function(){function a(a){this.maxHeap=new Wb;this.k=a}a.prototype.add=function(a,c){this.maxHeap.size()<this.k?this.maxHeap.push(-a,c):a<-this.maxHeap.peek().key&&this.maxHeap.popPush(-a,c)};a.prototype.getMinKItems=function(){var a=this.maxHeap.items();a.sort(function(a,b){return b.key-a.key});return a.map(function(a){return a.value})};a.prototype.getSize=function(){return this.maxHeap.size()};a.prototype.getLargestKey=
function(){return 0===this.maxHeap.size()?null:-this.maxHeap.peek().key};return a}();
</script>
<script>//~~WEBPATH~~/vz-projector/label.js
var Yb=function(){function a(a,c,d){this.bound=a;this.cellWidth=c;this.cellHeight=d;this.numHorizCells=Math.ceil(this.boundWidth(a)/c);this.numVertCells=Math.ceil(this.boundHeight(a)/d);this.grid=Array(this.numHorizCells*this.numVertCells)}a.prototype.boundWidth=function(a){return a.hiX-a.loX};a.prototype.boundHeight=function(a){return a.hiY-a.loY};a.prototype.boundsIntersect=function(a,c){return!(a.loX>c.hiX||a.loY>c.hiY||a.hiX<c.loX||a.hiY<c.loY)};a.prototype.insert=function(a,c){void 0===c&&(c=
!1);if(a.hiX<this.bound.loX||a.loX>this.bound.hiX||a.hiY<this.bound.loY||a.loY>this.bound.hiY)return!1;for(var b=this.getCellX(a.loX),e=this.getCellX(a.hiX),g=this.getCellY(a.loY),h=this.getCellY(a.hiY),k=g*this.numHorizCells+b,l=k,m=g;m<=h;m++){for(var p=b;p<=e;p++){var r=this.grid[l++];if(r)for(var n=0;n<r.length;n++)if(this.boundsIntersect(a,r[n]))return!1}l+=this.numHorizCells-(e-b+1)}if(c)return!0;l=k;for(m=g;m<=h;m++){for(p=b;p<=e;p++)this.grid[l]?this.grid[l].push(a):this.grid[l]=[a],l++;l+=
this.numHorizCells-(e-b+1)}return!0};a.prototype.getCellX=function(a){return Math.floor((a-this.bound.loX)/this.cellWidth)};a.prototype.getCellY=function(a){return Math.floor((a-this.bound.loY)/this.cellHeight)};return a}();
</script>
<script>//~~WEBPATH~~/vz-projector/sptree.js
var Zb=function(){function a(a){if(1>a.length)throw Error("There should be at least 1 data point");this.dim=a[0].length;this.masks=Array(Math.pow(2,this.dim));for(var b=0;b<this.masks.length;++b)this.masks[b]=1<<b;for(var d=Array(this.dim),e=Number.POSITIVE_INFINITY,b=0;b<d.length;++b)d[b]=e;for(var e=Array(this.dim),b=Number.NEGATIVE_INFINITY,g=0;g<e.length;++g)e[g]=b;for(g=0;g<a.length;++g)for(b=0;b<this.dim;++b)d[b]=Math.min(d[b],a[g][b]),e[b]=Math.max(e[b],a[g][b]);for(var g=Array(this.dim),h=
0,b=0;b<this.dim;++b){var k=e[b]-d[b];g[b]=d[b]+k/2;h=Math.max(h,k/2)}this.root={box:{center:g,halfDim:h},point:a[0]};for(g=1;g<a.length;++g)this.insert(this.root,a[g])}a.prototype.visit=function(a,c){void 0===c&&(c=!1);this.visitNode(this.root,a,c)};a.prototype.visitNode=function(a,c,d){if(d)var b=c(a);else{b=Array(this.dim);for(var g=Array(this.dim),h=0;h<this.dim;++h)b[h]=a.box.center[h]-a.box.halfDim,g[h]=a.box.center[h]+a.box.halfDim;b=c(a,b,g)}if(a.children&&!b)for(b=0;b<a.children.length;++b)(g=
a.children[b])&&this.visitNode(g,c,d)};a.prototype.insert=function(a,c){null==a.children&&(a.children=Array(this.masks.length));for(var b=0,e=0;e<this.dim;++e)c[e]>a.box.center[e]&&(b|=this.masks[e]);null==a.children[b]?this.makeChild(a,b,c):this.insert(a.children[b],c)};a.prototype.makeChild=function(a,c,d){for(var b=a.box.center,g=a.box.halfDim/2,h=Array(this.dim),k=0;k<this.dim;++k)h[k]=c&1<<k?b[k]+g:b[k]-g;a.children[c]={box:{center:h,halfDim:g},point:d}};return a}();
</script>
<script>//~~WEBPATH~~/vz-projector/bh_tsne.js
/*

 The MIT License (MIT)
 Copyright (c) 2015 Andrej Karpathy
 Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated documentation files (the "Software"), to deal
 in the Software without restriction, including without limitation the rights
 to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the Software is
 furnished to do so, subject to the following conditions:

 The above copyright notice and this permission notice shall be included in
 all copies or substantial portions of the Software.
 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 THE SOFTWARE.
*/
var $b=!1,ac=0;function bc(a,b){var c=a[0]-b[0];a=a[1]-b[1];return c*c+a*a}function cc(a,b){var c=a[0]-b[0],d=a[1]-b[1];a=a[2]-b[2];return c*c+d*d+a*a}function dc(a){if($b)return $b=!1,ac;var b=2*a()-1,c=2*a()-1,d=b*b+c*c;if(0===d||1<d)return dc(a);a=Math.sqrt(-2*Math.log(d)/d);ac=c*a;$b=!0;return b*a}function ec(a,b,c){for(var d=[],e=0;e<a;++e)d.push(3===b?[c,c,c]:[c,c]);return d}function fc(a,b,c,d){a[0]+=b*(c[0]-d[0]);a[1]+=b*(c[1]-d[1])}
function gc(a,b,c,d){a[0]+=b*(c[0]-d[0]);a[1]+=b*(c[1]-d[1]);a[2]+=b*(c[2]-d[2])}
var hc=function(){function a(a){this.iter=0;a=a||{dim:2};this.perplexity=a.perplexity||30;this.epsilon=a.epsilon||10;this.rng=a.rng||Math.random;this.dim=a.dim;if(2===a.dim)this.dist2=bc,this.computeForce=fc;else if(3===a.dim)this.dist2=cc,this.computeForce=gc;else throw Error("Only 2D and 3D is supported");}a.prototype.initDataDist=function(a){var b=a.length;this.nearest=a;for(var d,e,g=a.length,h=Math.log(this.perplexity),k=new Float64Array(g*g),l=Array(a[0].length),m=0;m<g;++m){var p=a[m];d=-Infinity;
for(var r=Infinity,n=1,t=0;;){for(var q=0,u=0;u<p.length;++u)e=p[u],e=m===e.index?0:Math.exp(-e.dist*n),e=Math.max(e,1E-9),l[u]=e,q+=e;for(var v=0,u=0;u<l.length;++u)l[u]/=q,e=l[u],1E-7<e&&(v-=e*Math.log(e));v>h?(d=n,n=Infinity===r?2*n:(n+r)/2):(r=n,n=-Infinity===d?n/2:(n+d)/2);t++;if(50<=t||1E-4>Math.abs(v-h))break}for(u=0;u<l.length;++u)e=l[u],d=p[u].index,k[m*g+d]=e}a=2*g;for(m=0;m<g;++m)for(d=m+1;d<g;++d)h=m*g+d,l=d*g+m,p=(k[h]+k[l])/a,k[h]=p,k[l]=p;this.P=k;this.N=b;this.initSolution()};a.prototype.initSolution=
function(){for(var a=this.rng,c=this.N*this.dim,d=new Float64Array(c),e=0;e<c;++e)d[e]=0+1E-4*dc(a);this.Y=d;this.gains=ec(this.N,this.dim,1);this.ystep=ec(this.N,this.dim,0);this.iter=0};a.prototype.getSolution=function(){return this.Y};a.prototype.step=function(){this.iter+=1;for(var a=this.N,c=this.costGrad(this.Y),d=3===this.dim?[0,0,0]:[0,0],e=0;e<a;++e)for(var g=0;g<this.dim;++g){var h=this.ystep[e][g],k=this.gains[e][g],l=c[e][g],k=(0<l?1:0>l?-1:0)===(0<h?1:0>h?-1:0)?.8*k:k+.2;.01>k&&(k=.01);
this.gains[e][g]=k;h=(250>this.iter?.5:.8)*h-this.epsilon*k*c[e][g];this.ystep[e][g]=h;k=e*this.dim+g;this.Y[k]+=h;d[g]+=this.Y[k]}for(e=0;e<a;++e)for(g=0;g<this.dim;++g)this.Y[e*this.dim+g]-=d[g]/a};a.prototype.costGrad=function(a){function b(a){for(var b=l[a],c=3===v.dim?[0,0,0]:[0,0],d=v.nearest[a],k=0;k<d.length;++k){var m=d[k].index,n=h[a*g+m],m=l[m],p=v.dist2(b,m);v.computeForce(c,n/(1+p),b,m)}var r=3===v.dim?[0,0,0]:[0,0];t.visit(function(a){var c=e.dist2(b,a.yCell);if(null==a.children||0<
c&&.8>a.rCell/Math.sqrt(c)){var c=1/(1+c),d=a.numCells*c;q+=d;e.computeForce(r,d*c,b,a.yCell);return!0}c=1/(1+e.dist2(b,a.point));q+=c;e.computeForce(r,c*c,b,a.point);return!1},!0);u[a]=[c,r]}function d(a){var b=1;if(null==a.children)return a.numCells=b,a.yCell=a.point,{numCells:b,yCell:a.yCell};for(var c=a.point.slice(),g=0;g<a.children.length;++g){var h=a.children[g];if(null!=h)for(var h=d(h),b=b+h.numCells,k=0;k<e.dim;++k)c[k]+=h.yCell[k]}a.numCells=b;a.yCell=c.map(function(a){return a/b});return{numCells:b,
yCell:c}}for(var e=this,g=this.N,h=this.P,k=100>this.iter?4:1,l=Array(g),m=0;m<g;++m){for(var p=m*this.dim,r=Array(this.dim),n=0;n<this.dim;++n)r[n]=a[p+n];l[m]=r}var t=new Zb(l);d(t.root);t.visit(function(a,b,c){a.rCell=c[0]-b[0];return!1});a=[];for(var q=0,u=Array(g),v=this,m=0;m<g;++m)b(m);k*=4;p=4/q;for(m=0;m<g;++m){for(var n=u[m],r=n[0],y=n[1],z=Array(this.dim),n=0;n<this.dim;++n)z[n]=k*r[n]-p*y[n];a.push(z)}return a};return a}();
</script>
<script>//~~WEBPATH~~/vz-projector/logging.js
var ic=null,jc=0,kc=0;
function Y(a,b,c,d){void 0===b&&(b=null);void 0===c&&(c=null);void 0===d&&(d=!1);if(null==ic)console.warn("Can't show modal message before the dom is initialized");else{null==b&&(b=(jc++).toString());var e=ic.querySelector("#notification-dialog");e.querySelector(".close-button").style.display=d?null:"none";var g=e.querySelector(".progress");g.style.display=d?"none":null;g.active=d?null:!0;e.querySelector("#notification-title").innerHTML=c;c=e.querySelector("#notify-msgs");if(d)c.innerHTML="";else for(var g=
c.querySelectorAll(".error"),h=0;h<g.length;h++)c.removeChild(g[h]);g="notify-msg-"+b;h=e.querySelector("#"+g);null==h&&(h=document.createElement("div"),h.className="notify-msg "+(d?"error":""),h.id=g,c.insertBefore(h,c.firstChild),d?kc=0:kc++);null==a?(kc--,0===kc&&e.close(),h.remove()):(h.innerText=a,e.open());return b}}function lc(a,b){Y(a,null,"Error "+(null!=b?b:""),!0)}function mc(a){var b=ic.querySelector("#toast");b.text=a;b.duration=1E4;b.open()};
</script>
<script>//~~WEBPATH~~/vz-projector/renderContext.js
function nc(a,b,c,d,e,g){this.pointIndices=a;this.labelStrings=b;this.scaleFactors=c;this.useSceneOpacityFlags=d;this.defaultFontSize=10;this.fillColors=e;this.strokeColors=g}var oc,tc=oc||(oc={});tc[tc.Perspective=0]="Perspective";tc[tc.Orthographic=1]="Orthographic";
function uc(a,b,c,d,e,g,h,k,l,m,p,r,n,t){this.camera=a;this.cameraType=b;this.cameraTarget=c;this.screenWidth=d;this.screenHeight=e;this.nearestCameraSpacePointZ=g;this.farthestCameraSpacePointZ=h;this.backgroundColor=k;this.pointColors=l;this.pointScaleFactors=m;this.labels=p;this.polylineColors=r;this.polylineOpacities=n;this.polylineWidths=t}var vc=oc;
</script>
<script>//~~WEBPATH~~/vz-projector/scatterPlotRectangleSelector.js
var wc=function(){function a(a,c){this.svgElement=a.querySelector("#selector");this.rectElement=document.createElementNS("http://www.w3.org/2000/svg","rect");this.rectElement.style.stroke="#aaaaaa";this.rectElement.style.strokeDasharray="10 5";this.rectElement.style.strokeWidth="2";this.rectElement.style.fill="#dddddd";this.rectElement.style.fillOpacity="0.2";this.svgElement.appendChild(this.rectElement);this.selectionCallback=c;this.isMouseDown=!1}a.prototype.onMouseDown=function(a,c){this.isMouseDown=
!0;this.rectElement.style.display="block";this.startCoordinates=[a,c];this.lastBoundingBox={x:this.startCoordinates[0],y:this.startCoordinates[1],width:1,height:1}};a.prototype.onMouseMove=function(a,c){this.isMouseDown&&(this.lastBoundingBox.x=Math.min(a,this.startCoordinates[0]),this.lastBoundingBox.y=Math.max(c,this.startCoordinates[1]),this.lastBoundingBox.width=Math.max(a,this.startCoordinates[0])-this.lastBoundingBox.x,this.lastBoundingBox.height=this.lastBoundingBox.y-Math.min(c,this.startCoordinates[1]),
this.rectElement.setAttribute("x",""+this.lastBoundingBox.x),this.rectElement.setAttribute("y",""+(this.lastBoundingBox.y-this.lastBoundingBox.height)),this.rectElement.setAttribute("width",""+this.lastBoundingBox.width),this.rectElement.setAttribute("height",""+this.lastBoundingBox.height))};a.prototype.onMouseUp=function(){this.isMouseDown=!1;this.rectElement.style.display="none";this.rectElement.setAttribute("width","0");this.rectElement.setAttribute("height","0");this.selectionCallback(this.lastBoundingBox)};
return a}();
</script>
<script>//~~WEBPATH~~/vz-projector/analyticsLogger.js
var xc=function(){function a(a,c){"undefined"===typeof ga||null==ga?this.pageViewLogging=this.eventLogging=!1:(this.eventLogging=c,this.pageViewLogging=a)}a.prototype.logPageView=function(){this.pageViewLogging&&ga("send",{hitType:"pageview",page:"/v/embeddings"})};a.prototype.logProjectionChanged=function(a){this.eventLogging&&ga("send",{hitType:"event",eventCategory:"Projection",eventAction:"click",eventLabel:a})};a.prototype.logWebGLDisabled=function(){this.eventLogging&&ga("send",{hitType:"event",
eventCategory:"Error",eventAction:"PageLoad",eventLabel:"WebGL_disabled"})};return a}();
</script>
<script>//~~WEBPATH~~/vz-projector/util.js
function yc(a){for(var b=[],c=0;c<a;c++)b.push(c);return b}function zc(a,b,c){var d=a.className.split(" ");if(c){if(b in d)return;d.push(b)}else{b=d.indexOf(b);if(-1===b)return;d.splice(b,1)}a.className=d.join(" ")}function Ac(a,b){b*=3;return new V.Vector3(a[b],a[b+1],a[b+2])}
function Bc(a,b,c){var d=Infinity,e=0;c=(new V.Vector3).copy(c).sub(b);c=(new V.Vector3).copy(c).normalize();for(var g=a.length/3,h=0,k=new V.Vector3,l=new V.Vector3,m=0;m<g;m++){k.x=a[h];k.y=a[h+1];k.z=a[h+2];h+=3;l.copy(k).sub(b);var p=c.dot(l);0>p||(e=p>e?p:e,d=p<d?p:d)}return[d,e]}function Cc(a){a=new V.Texture(a);a.needsUpdate=!0;a.minFilter=V.LinearFilter;a.generateMipmaps=!1;a.flipY=!1;return a}function Dc(a,b){if(!a)throw Error(b||"Assertion failed");}
function Ec(a,b,c){if(b){var d=new RegExp(a,"i");b=function(a){return d.test(a.metadata[c].toString())}}else a=a.toLowerCase(),b=function(b){return 0<=b.metadata[c].toString().toLowerCase().indexOf(a)};return b}function Fc(a,b,c){void 0===c&&(c=null);var d=null==c;c=Y(a,c);return new Promise(function(a,g){setTimeout(function(){try{var e=b();d&&Y(null,c);a(e)}catch(k){g(k)}return!0},200)})}var Gc=["/Adagrad"];function Hc(a){for(var b=0;b<Gc.length;b++)if(0<=a.indexOf(Gc[b]))return!0;return!1}
function Ic(){try{var a=document.createElement("canvas");return null!=(a.getContext("webgl")||a.getContext("experimental-webgl"))&&"undefined"!==typeof weblas}catch(b){return!1}};
</script>
<script>//~~WEBPATH~~/vz-projector/vector.js
function Jc(a,b){Dc(a.length===b.length,"Vectors a and b must be of same length");for(var c=0,d=0;d<a.length;++d)c+=a[d]*b[d];return c}function Kc(a,b){Dc(a.length===b.length,"Vectors a and b must be of same length");for(var c=new Float32Array(a.length),d=0;d<a.length;++d)c[d]=a[d]-b[d];return c}function Lc(a){for(var b=0,c=0;c<a.length;++c)b+=a[c]*a[c];return b}function Mc(a,b){return Math.sqrt(Nc(a,b))}
function Nc(a,b){Dc(a.length===b.length,"Vectors a and b must be of same length");for(var c=0,d=0;d<a.length;++d)var e=a[d]-b[d],c=c+e*e;return c}function Oc(a){var b=Math.sqrt(Lc(a));Dc(0<=b,"Norm of the vector must be \x3e 0");for(var c=0;c<a.length;++c)a[c]/=b}function Pc(a){for(var b=a[0].length,c=a.length,d=Array(c),e=0;e<c;++e)d[e]=new Float32Array(200);for(var g=0;200>g;++g)for(var h=Qc(b),e=0;e<c;++e)d[e][g]=Jc(a[e],h);return d}
function Rc(a,b){if(0===a.length)return null;null==b&&(b=function(a){return a});Dc(0<=a.length,"`vectors` must be of length \x3e\x3d 1");for(var c=new Float32Array(b(a[0]).length),d=0;d<a.length;++d)for(var e=b(a[d]),g=0;g<c.length;++g)c[g]+=e[g];for(g=0;g<c.length;++g)c[g]/=a.length;return c}function Qc(a){for(var b=d3.randomNormal(),c=new Float32Array(a),d=0;d<a;++d)c[d]=b();return c}function Sc(a,b){return 1-Jc(a,b)/Math.sqrt(Lc(a)*Lc(b))}
function Tc(a,b){for(var c=a.length,d=b(a[0]).length,e=new Float32Array(c*d),g=0;g<c;++g)for(var h=b(a[g]),k=0;k<d;++k)e[g*d+k]=h[k];return e};
</script>
<script>//~~WEBPATH~~/vz-projector/knn.js
function Uc(a,b,c){function d(h){Fc("Finding nearest neighbors: "+(100*t).toFixed()+"%",function(){for(var d=u<r?p+1:p,h=new Float32Array(d*g),m=0;m<d;++m)for(var v=c(a[n+m]),E=0;E<g;++E)h[m*g+E]=v[E];m=new weblas.pipeline.Tensor([d,g],h);v=weblas.pipeline.sgemm(1,k,m,null,null);h=v.transfer();m.delete();v.delete();t+=q;for(m=0;m<d;m++){for(var v=new Xb(b),E=n+m,C=0;C<e;C++)if(C!==E){var D=1-h[C*d+m];v.add(D,{index:C,dist:D})}l[E]=v.getMinKItems()}t+=q;n+=d;u++},"knn-gpu").then(function(){u<m?d(h):
(Y(null,"knn-gpu"),k.delete(),h(l))},function(){Y(null,"knn-gpu");Vc(a,b,c,function(a,b){return 1-Jc(a,b)}).then(function(a){h(a)})})}var e=a.length,g=c(a[0]).length,h=Tc(a,c),k=new weblas.pipeline.Tensor([e,g],h),l=Array(e),m=Math.ceil(e/256),p=Math.floor(e/m),r=e%m,n=0,t=0,q=1/(2*m),u=0;return new Promise(function(a){return d(a)})}
function Vc(a,b,c,d){return Fc("Finding nearest neighbors...",function(){for(var e=a.length,g=Array(e),h=Array(e),k=0;k<e;k++)h[k]=new Xb(b);for(k=0;k<e;k++)for(var l=c(a[k]),m=h[k],p=k+1;p<e;p++){var r=h[p],n=m.getSize()===b?m.getLargestKey()||Number.MAX_VALUE:Number.MAX_VALUE,t=r.getSize()===b?r.getLargestKey()||Number.MAX_VALUE:Number.MAX_VALUE,n=Math.max(n,t),n=d(l,c(a[p]),n);0<=n&&(m.add(n,{index:p,dist:n}),r.add(n,{index:k,dist:n}))}for(k=0;k<e;k++)g[k]=h[k].getMinKItems();return g})}
function Wc(a,b,c,d,e){c=new Xb(c);for(var g=d(a[b]),h=0;h<a.length;++h)if(h!==b){var k=d(a[h]),k=e(g,k);c.add(k,{index:h,dist:k})}return c.getMinKItems()};
</script>
<script>//~~WEBPATH~~/vz-projector/data.js
var Xc=0<=navigator.userAgent.toLowerCase().indexOf("firefox"),Yc=Ic()&&!Xc,Zc=["__next__","__seq_next__"];function $c(a){for(var b=null,c=0;c<Zc.length;c++){var d=Zc[c];if(d in a&&""!==a[d]){b=a[d];break}}return null==b?null:+b}
var ad=function(){function a(a,c){this.shuffledDataIndices=[];this.projections={};this.tSNEIteration=0;this.tSNEShouldStop=!0;this.dim=[0,0];this.hasTSNERun=!1;this.points=a;for(var b=yc(this.points.length),e=b.length,g,h;e;)h=Math.floor(Math.random()*e--),g=b[e],b[e]=b[h],b[h]=g;this.shuffledDataIndices=b;this.sequences=this.computeSequences(a);this.dim=[this.points.length,this.points[0].vector.length];this.spriteAndMetadataInfo=c}a.prototype.computeSequences=function(a){for(var b=new Int8Array(a.length),
d={},e=[],g=0;g<a.length;g++)if(!b[g]){b[g]=1;var h=$c(a[g].metadata);if(null!=h)if(h in d)h=d[h],h.pointIndices.unshift(g),d[g]=h;else{h={pointIndices:[]};d[g]=h;e.push(h);for(var k=g;a[k];)h.pointIndices.push(k),k=$c(a[k].metadata),null!=k?b[k]=1:k=-1}}return e};a.prototype.projectionCanBeRendered=function(a){return"tsne"!==a?!0:0<this.tSNEIteration};a.prototype.getSubset=function(b){var c=this;b=(null!=b&&0<b.length?b.map(function(a){return c.points[a]}):this.points).map(function(a){return{metadata:a.metadata,
index:a.index,vector:a.vector.slice(),projections:{}}});return new a(b,this.spriteAndMetadataInfo)};a.prototype.normalize=function(){var a=Rc(this.points,function(a){return a.vector});if(null==a)throw Error("centroid should not be null");for(var c=0;c<this.points.length;++c){var d=this.points[c];d.vector=Kc(d.vector,a);Oc(d.vector)}};a.prototype.projectLinear=function(a,c){this.projections[c]=!0;this.points.forEach(function(b){b.projections[c]=Jc(b.vector,a)})};a.prototype.projectPCA=function(){var a=
this;return null!=this.projections["pca-0"]?Promise.resolve(null):Fc("Computing PCA...",function(){var b=a.points[0].vector.length,d=a.shuffledDataIndices.map(function(b){return a.points[b].vector});200<b&&(d=Pc(d));for(var b=d.slice(0,5E4),b=numeric.div(numeric.dot(numeric.transpose(b),b),b.length),e=numeric.svd(b),g=e.S,h=0,b=0;b<g.length;++b)h+=g[b];for(b=0;b<g.length;++b)g[b]/=h;a.fracVariancesExplained=g;for(var k=e.U,d=d.map(function(a){for(var b=new Float32Array(10),c=0;10>c;c++){for(var d=
0,e=0;e<a.length;e++)d+=a[e]*k[e][c];b[c]=d}return b}),e=0;10>e;e++)for(g="pca-"+e,a.projections[g]=!0,b=0;b<d.length;b++)a.points[a.shuffledDataIndices[b]].projections[g]=d[b][e]})};a.prototype.projectTSNE=function(a,c,d,e){function b(){if(h.tSNEShouldStop)e(null),h.tsne=null;else{h.tsne.step();var a=h.tsne.getSolution();l.forEach(function(b,c){b=h.points[b];b.projections["tsne-0"]=a[c*d+0];b.projections["tsne-1"]=a[c*d+1];3===d&&(b.projections["tsne-2"]=a[c*d+2])});h.tSNEIteration++;e(h.tSNEIteration);
requestAnimationFrame(b)}}var h=this;this.hasTSNERun=!0;var k=Math.floor(3*a);this.tsne=new hc({epsilon:c,perplexity:a,dim:d});this.tSNEShouldStop=!1;this.tSNEIteration=0;var l=this.shuffledDataIndices.slice(0,1E4);null!=this.nearest&&k===this.nearestK?k=Promise.resolve(this.nearest):(a=l.map(function(a){return h.points[a]}),this.nearestK=k,k=Yc?Uc(a,k,function(a){return a.vector}):Vc(a,k,function(a){return a.vector},function(a,b){return 1-Jc(a,b)}));k.then(function(a){h.nearest=a;Fc("Initializing T-SNE...",
function(){h.tsne.initDataDist(h.nearest)}).then(b)})};a.prototype.mergeMetadata=function(a){var b=this;if(a.pointsInfo.length!==this.points.length){var d="Number of tensors ("+this.points.length+") do not match the number of lines in metadata"+(" ("+a.pointsInfo.length+").");if(1===a.stats.length&&this.points.length+1===a.pointsInfo.length)return lc(d+" Single column metadata should not have a header row.","merging metadata"),!1;if(1<a.stats.length&&this.points.length-1===a.pointsInfo.length)return lc(d+
" Multi-column metadata should have a header row with column labels.","merging metadata"),!1;mc(d)}this.spriteAndMetadataInfo=a;a.pointsInfo.slice(0,this.points.length).forEach(function(a,c){return b.points[c].metadata=a});return!0};a.prototype.stopTSNE=function(){this.tSNEShouldStop=!0};a.prototype.findNeighbors=function(a,c,d){return Wc(this.points,a,d,function(a){return a.vector},c).slice(0,d)};a.prototype.query=function(a,c,d){var b=Ec(a,c,d),g=[];this.points.forEach(function(a,c){b(a)&&g.push(c)});
return g};return a}();function bd(a,b,c,d){this.projectionType=a;this.projectionComponents=b;this.dimensionality=c;this.dataSet=d}function cd(){this.label="";this.isSelected=!1;this.tSNELearningRate=this.tSNEPerplexity=this.tSNEIteration=0;this.tSNEis3d=!0;this.pcaComponentDimensions=[];this.projections=[];this.selectedPoints=[]}
function dd(a,b){if(3<b.length)throw new RangeError("components length must be \x3c\x3d 3");var c=[null,null,null];a="custom"===a?"linear":a;for(var d=0;d<b.length;++d)null!=b[d]&&(c[d]=a+"-"+b[d]);return c};
</script>
<script>//~~WEBPATH~~/vz-projector/data-provider.js
function ed(a,b,c){Y("Fetching tensor values...","tensors");var d=new XMLHttpRequest;d.open("GET",b);d.responseType="arraybuffer";d.onprogress=function(a){a.lengthComputable&&Y("Fetching tensor values: "+(100*a.loaded/a.total).toFixed(1)+"%","tensors")};d.onload=function(){if(200!==d.status){var b=String.fromCharCode.apply(null,new Uint8Array(d.response));lc(b,"fetching tensors")}else{try{b=new Float32Array(d.response)}catch(k){lc(k,"parsing tensor bytes");return}var g=a.tensorShape[1],h=b.length/
g;a.tensorShape[0]>h&&mc("Showing the first "+h.toLocaleString()+(" of "+a.tensorShape[0].toLocaleString()+" data points"));fd(b,g).then(function(a){c(new ad(a))})}};d.send()}function gd(a,b){hd(a).then(function(a){b(new ad(a))})}function id(a,b){od(a).then(function(a){return b(a)})}
function pd(a,b){var c,d;void 0===c&&(c=1E6);void 0===d&&(d="\n");return new Promise(function(e){function g(m,p){m=new Blob([a.slice(m,m+p)]);p=new FileReader;p.onload=function(a){a=a.target.result;h+=c;a=a.split(d);var m=l+a[0];if(1===a.length)l=m,g(h,c);else{l=a[a.length-1];b(m);for(m=1;m<a.length-1;m++)b(a[m]);h>=k?(l&&b(l),e()):g(h,c)}};p.readAsText(m)}var h=0,k=a.byteLength-1,l="";g(h,c)})}
function hd(a){var b;void 0===b&&(b="\t");Y("Parsing tensors...","tensors");return new Promise(function(c){var d=[],e;pd(a,function(a){a=a.trim();if(""!==a){a=a.split(b);var c={metadata:{},vector:null,index:d.length,projections:null};isNaN(a[0])||e===a.length-1?(c.metadata.label=a[0],c.vector=new Float32Array(a.slice(1).map(Number))):c.vector=new Float32Array(a.map(Number));d.push(c);null==e&&(e=c.vector.length);if(e!==c.vector.length)throw Y("Parsing failed. Vector dimensions do not match"),Error("Parsing failed");
if(1>=e)throw Y("Parsing failed. Found a vector with only one dimension?"),Error("Parsing failed");}}).then(function(){Y(null,"tensors");c(d)})})}function fd(a,b){return Fc("Parsing tensors...",function(){for(var c=a.length/b,d=[],e=0,g=0;g<c;++g)d.push({metadata:{},vector:a.subarray(e,e+b),index:g,projections:null}),e+=b;return d},"tensors").then(function(a){Y(null,"tensors");return a})}
function qd(a,b){var c=a.map(function(a){return{name:a,isNumeric:!0,tooManyUniqueValues:!1,min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY}}),d=a.map(function(){return{}});b.forEach(function(b){a.forEach(function(a,e){var g=c[e];e=d[e];var h=b[a];null!=h&&(g.tooManyUniqueValues||(h in e?e[h]++:e[h]=1,50<Object.keys(e).length&&(g.tooManyUniqueValues=!0)),isNaN(h)?g.isNumeric=!1:(b[a]=+h,g.min=Math.min(g.min,+h),g.max=Math.max(g.max,+h)))})});c.forEach(function(a,b){a.uniqueEntries=Object.keys(d[b]).map(function(a){return{label:a,
count:d[b][a]}})});return c}function od(a){Y("Parsing metadata...","metadata");return new Promise(function(b){var c=[],d=!1,e=0,g=["label"];pd(a,function(a){if(0!==a.trim().length){if(0===e&&(d=0<=a.indexOf("\t"))){g=a.split("\t");e++;return}e++;var b=a.split("\t"),h={};c.push(h);g.forEach(function(a,c){c=b[c];h[a]=""===c?null:c})}}).then(function(){Y(null,"metadata");b({stats:qd(g,c),pointsInfo:c})})})}
function rd(a){return new Promise(function(b,c){var d=new Image;d.onload=function(){return b(d)};d.onerror=function(a){return c(a)};d.crossOrigin="";d.src=a})}
function sd(a,b,c,d){var e=Promise.resolve({});a&&(e=new Promise(function(b,c){Y("Fetching metadata...","metadata");var d=new XMLHttpRequest;d.open("GET",a);d.responseType="arraybuffer";d.onerror=function(){lc(d.responseText,"fetching metadata");c()};d.onload=function(){b(od(d.response))};d.send(null)}));var g=null,h=null;b&&(g=Y("Fetching sprite image..."),h=rd(b));Promise.all([e,h]).then(function(a){g&&Y(null,g);var b=a[0];(a=a[1])&&(8192<a.height||8192<a.width)?Y("Error: Sprite image of dimensions "+
a.width+"px x "+(a.height+"px exceeds maximum dimensions ")+"8192px x 8192px"):(b.spriteImage=a,b.spriteMetadata=c,d(b))})};
</script>
<script>//~~WEBPATH~~/vz-projector/data-provider-demo.js
var td=function(){function a(a){this.projectorConfigPath=a}a.prototype.getEmbeddingInfo=function(a){for(var b=this.projectorConfig.embeddings,d=0;d<b.length;d++){var e=b[d];if(e.tensorName===a)return e}return null};a.prototype.retrieveRuns=function(a){a(["Demo"])};a.prototype.retrieveProjectorConfig=function(a,c){var b=this,e=Y("Fetching projector config..."),g=new XMLHttpRequest;g.open("GET",this.projectorConfigPath);g.onerror=function(a){a=a.message;null!=g.responseText&&(a="Cannot fetch projector config, possibly a Cross-Origin request error.");
lc(a,"fetching projector config")};g.onload=function(){var a=JSON.parse(g.responseText);Y(null,e);b.projectorConfig=a;c(a)};g.send()};a.prototype.retrieveTensor=function(a,c,d){a=this.getEmbeddingInfo(c);var b=""+a.tensorPath;if(".bytes"===a.tensorPath.substr(-6))ed(this.getEmbeddingInfo(c),b,d);else{Y("Fetching tensors...","tensors");var g=new XMLHttpRequest;g.open("GET",b);g.responseType="arraybuffer";g.onerror=function(){lc(g.responseText,"fetching tensors")};g.onload=function(){hd(g.response).then(function(a){d(new ad(a))})};
g.send()}};a.prototype.retrieveSpriteAndMetadata=function(a,c,d){a=this.getEmbeddingInfo(c);c=null;a.sprite&&a.sprite.imagePath&&(c=a.sprite.imagePath);sd(a.metadataPath,c,a.sprite,d)};a.prototype.getBookmarks=function(a,c,d){a=this.getEmbeddingInfo(c);var b=Y("Fetching bookmarks..."),g=new XMLHttpRequest;g.open("GET",a.bookmarksPath);g.onerror=function(){lc(g.responseText)};g.onload=function(){var a=JSON.parse(g.responseText);Y(null,b);d(a)};g.send()};return a}();
</script>
<script>//~~WEBPATH~~/vz-projector/data-provider-proto.js
var ud=function(){function a(a){this.dataProto=a}a.prototype.retrieveRuns=function(a){a(["proto"])};a.prototype.retrieveProjectorConfig=function(a,c){c({modelCheckpointPath:"proto",embeddings:[{tensorName:"proto",tensorShape:this.dataProto.shape,metadataPath:"proto"}]})};a.prototype.retrieveTensor=function(a,c,d){d(this.flatArrayToDataset(this.dataProto.tensor))};a.prototype.retrieveSpriteAndMetadata=function(a,c,d){a=this.dataProto.metadata.columns.map(function(a){return a.name});var b=this.dataProto.shape[0],
g=Array(b);this.dataProto.metadata.columns.forEach(function(a){for(var c=a.numericValues||a.stringValues,d=0;d<b;d++)g[d]=g[d]||{},g[d][a.name]=c[d]});d({stats:qd(a,g),pointsInfo:g})};a.prototype.getBookmarks=function(a,c,d){return d([])};a.prototype.flatArrayToDataset=function(a){var b=[],d=this.dataProto.shape[0],e=this.dataProto.shape[1];if(d*e!==a.length)throw"The shape doesn't match the length of the flattened array";for(var g=0;g<d;g++){var h=g*e;b.push({vector:new Float32Array(a.slice(h,h+
e)),metadata:{},projections:null,index:g})}return new ad(b)};return a}();
</script>
<script>//~~WEBPATH~~/vz-projector/data-provider-server.js
var vd=function(){function a(a){this.runProjectorConfigCache={};this.routePrefix=a}a.prototype.getEmbeddingInfo=function(a,c,d){this.retrieveProjectorConfig(a,function(a){a=a.embeddings;for(var b=0;b<a.length;b++){var e=a[b];if(e.tensorName===c){d(e);return}}d(null)})};a.prototype.retrieveRuns=function(a){var b=Y("Fetching runs..."),d=new XMLHttpRequest;d.open("GET",this.routePrefix+"/runs");d.onerror=function(){lc(d.responseText,"fetching runs")};d.onload=function(){var c=JSON.parse(d.responseText);
Y(null,b);a(c)};d.send()};a.prototype.retrieveProjectorConfig=function(a,c){var b=this;if(a in this.runProjectorConfigCache)c(this.runProjectorConfigCache[a]);else{var e=Y("Fetching projector config..."),g=new XMLHttpRequest;g.open("GET",this.routePrefix+"/info?run\x3d"+a);g.onerror=function(){lc(g.responseText,"fetching projector config")};g.onload=function(){var d=JSON.parse(g.responseText);Y(null,e);b.runProjectorConfigCache[a]=d;c(d)};g.send()}};a.prototype.retrieveTensor=function(a,c,d){var b=
this;this.getEmbeddingInfo(a,c,function(e){ed(e,b.routePrefix+"/tensor?run\x3d"+a+"\x26name\x3d"+c+"\x26num_rows\x3d100000",d)})};a.prototype.retrieveSpriteAndMetadata=function(a,c,d){var b=this;this.getEmbeddingInfo(a,c,function(e){var g=null;e.metadataPath&&(g=b.routePrefix+"/metadata?"+("run\x3d"+a+"\x26name\x3d"+c+"\x26num_rows\x3d100000"));var k=null;e.sprite&&e.sprite.imagePath&&(k=b.routePrefix+"/sprite_image?run\x3d"+a+"\x26name\x3d"+c);sd(g,k,e.sprite,d)})};a.prototype.getBookmarks=function(a,
c,d){var b=Y("Fetching bookmarks..."),g=new XMLHttpRequest;g.open("GET",this.routePrefix+"/bookmarks?run\x3d"+a+"\x26name\x3d"+c);g.onerror=function(){lc(g.responseText,"fetching bookmarks")};g.onload=function(){Y(null,b);var a=JSON.parse(g.responseText);d(a)};g.send()};return a}();
</script>
<script>//~~WEBPATH~~/vz-projector/projectorEventContext.js
</script>
<script>//~~WEBPATH~~/vz-projector/scatterPlot.js
var wd=new V.Vector3(.45,.9,1.6),xd=new V.Vector3(0,0,0),yd=new V.Vector3(0,0,4),zd=new V.Vector3(0,0,0),Ad,Bd=Ad||(Ad={});Bd[Bd.AREA_SELECT=0]="AREA_SELECT";Bd[Bd.CAMERA_AND_CLICK_SELECT=1]="CAMERA_AND_CLICK_SELECT";function Cd(){this.orthographic=!1}
var Dd=function(){function a(a,c){var b=this;this.container=a;this.projectorEventContext=c;this.visualizers=[];this.onCameraMoveListeners=[];this.backgroundColor=16777215;this.dimensionality=3;this.cameraDef=null;this.isDragSequence=this.mouseIsDown=this.selecting=this.orbitAnimationOnNextCameraCreation=!1;this.getLayoutValues();this.scene=new V.Scene;this.renderer=new V.WebGLRenderer({alpha:!0,premultipliedAlpha:!1,antialias:!1});this.renderer.setClearColor(16777215,1);this.container.appendChild(this.renderer.domElement);
this.light=new V.PointLight(16772287,1,0);this.scene.add(this.light);this.setDimensions(3);this.recreateCamera(this.makeDefaultCameraDef(this.dimensionality));this.renderer.render(this.scene,this.camera);this.rectangleSelector=new wc(this.container,function(a){return b.selectBoundingBox(a)});this.addInteractionListeners()}a.prototype.addInteractionListeners=function(){this.container.addEventListener("mousemove",this.onMouseMove.bind(this));this.container.addEventListener("mousedown",this.onMouseDown.bind(this));
this.container.addEventListener("mouseup",this.onMouseUp.bind(this));this.container.addEventListener("click",this.onClick.bind(this));window.addEventListener("keydown",this.onKeyDown.bind(this),!1);window.addEventListener("keyup",this.onKeyUp.bind(this),!1)};a.prototype.addCameraControlsEventListeners=function(a){var b=this;a.addEventListener("start",function(){b.stopOrbitAnimation();b.onCameraMoveListeners.forEach(function(c){return c(b.camera.position,a.target)})});a.addEventListener("change",function(){b.render()});
a.addEventListener("end",function(){})};a.prototype.makeOrbitControls=function(a,c,d){null!=this.orbitCameraControls&&this.orbitCameraControls.dispose();var b=new V.OrbitControls(a,this.renderer.domElement);b.target0=new V.Vector3(c.target[0],c.target[1],c.target[2]);b.position0=(new V.Vector3).copy(a.position);b.zoom0=c.zoom;b.enableRotate=d;b.autoRotate=!1;b.rotateSpeed=1;d?(b.mouseButtons.ORBIT=V.MOUSE.LEFT,b.mouseButtons.PAN=V.MOUSE.RIGHT):(b.mouseButtons.ORBIT=null,b.mouseButtons.PAN=V.MOUSE.LEFT);
b.reset();this.camera=a;this.orbitCameraControls=b;this.addCameraControlsEventListeners(this.orbitCameraControls)};a.prototype.makeCamera3D=function(a,c,d){c=new V.PerspectiveCamera(70,c/d,.01,100);c.position.set(a.position[0],a.position[1],a.position[2]);c.lookAt(new V.Vector3(a.target[0],a.target[1],a.target[2]));c.zoom=a.zoom;c.updateProjectionMatrix();this.camera=c;this.makeOrbitControls(c,a,!0)};a.prototype.makeCamera2D=function(a,c,d){var b=new V.Vector3(a.target[0],a.target[1],a.target[2]);
c/=d;d=-1.2;var g=1.2,h=-1.2,k=1.2;1<c?(d*=c,g*=c):(k/=c,h/=c);c=new V.OrthographicCamera(d,g,k,h,-1E3,1E3);c.position.set(a.position[0],a.position[1],a.position[2]);c.up=new V.Vector3(0,1,0);c.lookAt(b);c.zoom=a.zoom;c.updateProjectionMatrix();this.camera=c;this.makeOrbitControls(c,a,!1)};a.prototype.makeDefaultCameraDef=function(a){var b=new Cd;b.orthographic=2===a;b.zoom=1;b.orthographic?(b.position=[yd.x,yd.y,yd.z],b.target=[zd.x,zd.y,zd.z]):(b.position=[wd.x,wd.y,wd.z],b.target=[xd.x,xd.y,xd.z]);
return b};a.prototype.recreateCamera=function(a){a.orthographic?this.makeCamera2D(a,this.width,this.height):this.makeCamera3D(a,this.width,this.height);this.orbitCameraControls.minDistance=.05;this.orbitCameraControls.maxDistance=10;this.orbitCameraControls.update();this.orbitAnimationOnNextCameraCreation&&this.startOrbitAnimation()};a.prototype.onClick=function(a,c){void 0===c&&(c=!0);a&&this.selecting||(!this.isDragSequence&&c&&this.projectorEventContext.notifySelectionChanged(null!=this.nearestPoint?
[this.nearestPoint]:[]),this.isDragSequence=!1,this.render())};a.prototype.onMouseDown=function(a){this.isDragSequence=!1;this.mouseIsDown=!0;this.selecting?(this.orbitCameraControls.enabled=!1,this.rectangleSelector.onMouseDown(a.offsetX,a.offsetY),this.setNearestPointToMouse(a)):!a.ctrlKey&&this.sceneIs3D()&&this.orbitCameraControls.mouseButtons.ORBIT===V.MOUSE.RIGHT?(this.orbitCameraControls.mouseButtons.ORBIT=V.MOUSE.LEFT,this.orbitCameraControls.mouseButtons.PAN=V.MOUSE.RIGHT):a.ctrlKey&&this.sceneIs3D()&&
this.orbitCameraControls.mouseButtons.ORBIT===V.MOUSE.LEFT&&(this.orbitCameraControls.mouseButtons.ORBIT=V.MOUSE.RIGHT,this.orbitCameraControls.mouseButtons.PAN=V.MOUSE.LEFT)};a.prototype.onMouseUp=function(){this.selecting&&(this.orbitCameraControls.enabled=!0,this.rectangleSelector.onMouseUp(),this.render());this.mouseIsDown=!1};a.prototype.onMouseMove=function(a){this.isDragSequence=this.mouseIsDown;this.selecting&&this.mouseIsDown?(this.rectangleSelector.onMouseMove(a.offsetX,a.offsetY),this.render()):
this.mouseIsDown||(this.setNearestPointToMouse(a),this.projectorEventContext.notifyHoverOverPoint(this.nearestPoint))};a.prototype.onKeyDown=function(a){17===a.keyCode&&this.sceneIs3D()&&(this.orbitCameraControls.mouseButtons.ORBIT=V.MOUSE.RIGHT,this.orbitCameraControls.mouseButtons.PAN=V.MOUSE.LEFT);16===a.keyCode&&(this.selecting=!0,this.container.style.cursor="crosshair")};a.prototype.onKeyUp=function(a){17===a.keyCode&&this.sceneIs3D()&&(this.orbitCameraControls.mouseButtons.ORBIT=V.MOUSE.LEFT,
this.orbitCameraControls.mouseButtons.PAN=V.MOUSE.RIGHT);16===a.keyCode&&(this.selecting=this.getMouseMode()===Ad.AREA_SELECT,this.selecting||(this.container.style.cursor="default"),this.render())};a.prototype.getPointIndicesFromPickingTexture=function(a){if(null==this.worldSpacePointPositions)return null;var b=this.worldSpacePointPositions.length/3,d=window.devicePixelRatio||1,e=Math.floor(a.width*d),g=Math.floor(a.height*d),h=new Uint8Array(e*g*4);this.renderer.readRenderTargetPixels(this.pickingTexture,
Math.floor(a.x*d),this.pickingTexture.height-Math.floor(a.y*d),e,g,h);a=new Uint8Array(this.worldSpacePointPositions.length);for(d=0;d<e*g;d++){var k=h[4*d]<<16|h[4*d+1]<<8|h[4*d+2];16777215!==k&&k<b&&(a[k]=1)}b=[];for(d=0;d<a.length;d++)1===a[d]&&b.push(d);return b};a.prototype.selectBoundingBox=function(a){a=this.getPointIndicesFromPickingTexture(a);this.projectorEventContext.notifySelectionChanged(a)};a.prototype.setNearestPointToMouse=function(a){null==this.pickingTexture?this.nearestPoint=null:
(a=this.getPointIndicesFromPickingTexture({x:a.offsetX,y:a.offsetY,width:1,height:1}),this.nearestPoint=null!=a?a[0]:null)};a.prototype.getLayoutValues=function(){this.width=this.container.offsetWidth;this.height=Math.max(1,this.container.offsetHeight);return[this.width,this.height]};a.prototype.sceneIs3D=function(){return 3===this.dimensionality};a.prototype.remove3dAxisFromScene=function(){var a=this.scene.getObjectByName("axes");null!=a&&this.scene.remove(a);return a};a.prototype.add3dAxis=function(){var a=
new V.AxisHelper;a.name="axes";this.scene.add(a)};a.prototype.setDimensions=function(a){if(2!==a&&3!==a)throw new RangeError("dimensionality must be 2 or 3");this.dimensionality=a;var b=this.cameraDef||this.makeDefaultCameraDef(a);this.recreateCamera(b);this.remove3dAxisFromScene();3===a&&this.add3dAxis()};a.prototype.getCameraDef=function(){var a=new Cd,c=this.camera.position,d=this.orbitCameraControls.target;a.orthographic=!this.sceneIs3D();a.position=[c.x,c.y,c.z];a.target=[d.x,d.y,d.z];a.zoom=
this.camera.zoom;return a};a.prototype.setCameraParametersForNextCameraCreation=function(a,c){this.cameraDef=a;this.orbitAnimationOnNextCameraCreation=c};a.prototype.getCameraPosition=function(){var a=this.camera.position;return[a.x,a.y,a.z]};a.prototype.getCameraTarget=function(){var a=this.orbitCameraControls.target;return[a.x,a.y,a.z]};a.prototype.setCameraPositionAndTarget=function(a,c){this.stopOrbitAnimation();this.camera.position.set(a[0],a[1],a[2]);this.orbitCameraControls.target.set(c[0],
c[1],c[2]);this.orbitCameraControls.update();this.render()};a.prototype.startOrbitAnimation=function(){this.sceneIs3D()&&(null!=this.orbitAnimationId&&this.stopOrbitAnimation(),this.orbitCameraControls.autoRotate=!0,this.orbitCameraControls.rotateSpeed=7,this.updateOrbitAnimation())};a.prototype.updateOrbitAnimation=function(){var a=this;this.orbitCameraControls.update();this.orbitAnimationId=requestAnimationFrame(function(){return a.updateOrbitAnimation()})};a.prototype.stopOrbitAnimation=function(){this.orbitCameraControls.autoRotate=
!1;this.orbitCameraControls.rotateSpeed=1;null!=this.orbitAnimationId&&(cancelAnimationFrame(this.orbitAnimationId),this.orbitAnimationId=null)};a.prototype.addVisualizer=function(a){this.scene&&a.setScene(this.scene);a.onResize(this.width,this.height);a.onPointPositionsChanged(this.worldSpacePointPositions);this.visualizers.push(a)};a.prototype.removeAllVisualizers=function(){this.visualizers.forEach(function(a){return a.dispose()});this.visualizers=[]};a.prototype.setPointPositions=function(a){this.worldSpacePointPositions=
a;this.visualizers.forEach(function(b){return b.onPointPositionsChanged(a)})};a.prototype.render=function(){var a=this.camera.position.clone();a.x+=1;a.y+=1;this.light.position.set(a.x,a.y,a.z);var a=this.camera instanceof V.PerspectiveCamera?vc.Perspective:vc.Orthographic,c=[0,0];null!=this.worldSpacePointPositions&&(c=Bc(this.worldSpacePointPositions,this.camera.position,this.orbitCameraControls.target));var d=new uc(this.camera,a,this.orbitCameraControls.target,this.width,this.height,c[0],c[1],
this.backgroundColor,this.pointColors,this.pointScaleFactors,this.labels,this.polylineColors,this.polylineOpacities,this.polylineWidths);this.visualizers.forEach(function(a){return a.onPickingRender(d)});a=this.remove3dAxisFromScene();this.renderer.render(this.scene,this.camera,this.pickingTexture);null!=a&&this.scene.add(a);this.visualizers.forEach(function(a){return a.onRender(d)});this.renderer.render(this.scene,this.camera)};a.prototype.setMouseMode=function(a){this.mouseMode=a;a===Ad.AREA_SELECT?
(this.selecting=!0,this.container.style.cursor="crosshair"):(this.selecting=!1,this.container.style.cursor="default")};a.prototype.setPointColors=function(a){this.pointColors=a};a.prototype.setPointScaleFactors=function(a){this.pointScaleFactors=a};a.prototype.setLabels=function(a){this.labels=a};a.prototype.setPolylineColors=function(a){this.polylineColors=a};a.prototype.setPolylineOpacities=function(a){this.polylineOpacities=a};a.prototype.setPolylineWidths=function(a){this.polylineWidths=a};a.prototype.getMouseMode=
function(){return this.mouseMode};a.prototype.resetZoom=function(){this.recreateCamera(this.makeDefaultCameraDef(this.dimensionality));this.render()};a.prototype.setDayNightMode=function(a){var b=this.container.querySelectorAll("canvas");a=a?"invert(100%)":null;for(var d=0;d<b.length;d++)b[d].style.filter=a};a.prototype.resize=function(a){void 0===a&&(a=!0);var b=[this.width,this.height];var d=b[0],e=b[1];b=this.getLayoutValues();var g=b[0],h=b[1];3===this.dimensionality?(b=this.camera,b.aspect=g/
h):(b=this.camera,d=g/d*(b.right-b.left)/2,e=h/e*(b.top-b.bottom)/2,b.top=e,b.bottom=-e,b.left=-d,b.right=d);b.updateProjectionMatrix();this.renderer.setPixelRatio();this.renderer.setSize(g,h);b=this.renderer.getSize();d=this.renderer.getPixelRatio();this.pickingTexture=new V.WebGLRenderTarget(b.width*d,b.height*d);this.pickingTexture.texture.minFilter=V.LinearFilter;this.visualizers.forEach(function(a){return a.onResize(g,h)});a&&this.render()};a.prototype.onCameraMove=function(a){this.onCameraMoveListeners.push(a)};
a.prototype.clickOnPoint=function(a){this.nearestPoint=a;this.onClick(null,!1)};return a}(),Ed=Ad;
</script>
<script>//~~WEBPATH~~/vz-projector/scatterPlotVisualizer3DLabels.js
var Fd=function(){function a(){}a.prototype.createGlyphTexture=function(){var a=document.createElement("canvas");a.width=8192;a.height=80;var c=a.getContext("2d");c.font="bold 60px roboto";c.textBaseline="top";c.fillStyle="white";c.rect(0,0,a.width,a.height);c.fill();c.fillStyle="black";for(var d=c.measureText(" ").width,e=new Float32Array(256),g=new Float32Array(256),h=0,k=0;256>k;k++){var l=" "+String.fromCharCode(k),m=c.measureText(l).width;e[k]=m-d;g[k]=h;c.fillText(l,h-d,0);h+=m}return{texture:Cc(a),
lengths:e,offsets:g}};a.prototype.processLabelVerts=function(a){var b=0;this.labelVertexMap=[];for(var d=0;d<a;d++){for(var e=this.labelStrings[d],g=[],h=0;h<e.length;h++){for(var k=0;6>k;k++)g.push(6*b+k);b++}this.labelVertexMap.push(g)}this.totalVertexCount=6*b};a.prototype.createColorBuffers=function(a){function b(a){var b=new V.Color(a);e.labelVertexMap[a].forEach(function(a){d.pickingColors[3*a]=b.r;d.pickingColors[3*a+1]=b.g;d.pickingColors[3*a+2]=b.b;d.renderColors[3*a]=1;d.renderColors[3*
a+1]=1;d.renderColors[3*a+2]=1})}var d=this;this.pickingColors=new Float32Array(3*this.totalVertexCount);this.renderColors=new Float32Array(3*this.totalVertexCount);for(var e=this,g=0;g<a;g++)b(g)};a.prototype.createLabels=function(){var a=this;if(null!=this.labelStrings&&null!=this.worldSpacePointPositions){var c=this.worldSpacePointPositions.length/3;if(c===this.labelStrings.length){this.glyphTexture=this.createGlyphTexture();this.uniforms={texture:{type:"t"},picking:{type:"bool"}};this.material=
new V.ShaderMaterial({uniforms:this.uniforms,transparent:!0,vertexShader:"\n    attribute vec2 posObj;\n    attribute vec3 color;\n    varying vec2 vUv;\n    varying vec3 vColor;\n\n    void main() {\n      vUv \x3d uv;\n      vColor \x3d color;\n\n      // Rotate label to face camera.\n\n      vec4 vRight \x3d vec4(\n        modelViewMatrix[0][0], modelViewMatrix[1][0], modelViewMatrix[2][0], 0);\n\n      vec4 vUp \x3d vec4(\n        modelViewMatrix[0][1], modelViewMatrix[1][1], modelViewMatrix[2][1], 0);\n\n      vec4 vAt \x3d -vec4(\n        modelViewMatrix[0][2], modelViewMatrix[1][2], modelViewMatrix[2][2], 0);\n\n      mat4 pointToCamera \x3d mat4(vRight, vUp, vAt, vec4(0, 0, 0, 1));\n\n      vec2 scaledPos \x3d posObj * 0.0125 * 2.2;\n\n      vec4 posRotated \x3d pointToCamera * vec4(scaledPos, 0, 1);\n      vec4 mvPosition \x3d modelViewMatrix * (vec4(position, 0) + posRotated);\n      gl_Position \x3d projectionMatrix * mvPosition;\n    }",
fragmentShader:"\n    uniform sampler2D texture;\n    uniform bool picking;\n    varying vec2 vUv;\n    varying vec3 vColor;\n\n    void main() {\n      if (picking) {\n        gl_FragColor \x3d vec4(vColor, 1.0);\n      } else {\n        vec4 fromTexture \x3d texture2D(texture, vUv);\n        gl_FragColor \x3d vec4(vColor, 1.0) * fromTexture;\n      }\n    }"});this.processLabelVerts(c);this.createColorBuffers(c);this.positions=new V.BufferAttribute(new Float32Array(3*this.totalVertexCount),3);var d=
new Float32Array(2*this.totalVertexCount),e=new Float32Array(3*this.totalVertexCount),g=new V.BufferAttribute(new Float32Array(3*this.totalVertexCount),2),d=new V.BufferAttribute(d,2),e=new V.BufferAttribute(e,3);this.geometry=new V.BufferGeometry;this.geometry.addAttribute("posObj",g);this.geometry.addAttribute("position",this.positions);this.geometry.addAttribute("uv",d);this.geometry.addAttribute("color",e);for(var h=0,e=0;e<c;e++){for(var k=this.labelStrings[e],l=0,m=0;m<k.length;m++){var p=k.charCodeAt(m);
l+=this.glyphTexture.lengths[p]}l/=-2;for(m=0;m<k.length;m++){p=k.charCodeAt(m);var r=this.glyphTexture.lengths[p],n=(l+r)/80,t=l/80;g.setXY(6*h+0,t,0);g.setXY(6*h+1,n,0);g.setXY(6*h+2,t,1);g.setXY(6*h+3,t,1);g.setXY(6*h+4,n,0);g.setXY(6*h+5,n,1);n=this.glyphTexture.offsets[p];p=this.glyphTexture.offsets[p]+r;n/=8192;p/=8192;d.setXY(6*h+0,n,1);d.setXY(6*h+1,p,1);d.setXY(6*h+2,n,0);d.setXY(6*h+3,n,0);d.setXY(6*h+4,p,1);d.setXY(6*h+5,p,0);h++;l+=r}}for(var g=function(b){var c=Ac(q.worldSpacePointPositions,
b);q.labelVertexMap[b].forEach(function(b){a.positions.setXYZ(b,c.x,c.y,c.z)})},q=this,e=0;e<c;e++)g(e);this.labelsMesh=new V.Mesh(this.geometry,this.material);this.labelsMesh.frustumCulled=!1;this.scene.add(this.labelsMesh)}}};a.prototype.colorLabels=function(a){if(null!=this.labelStrings&&null!=this.geometry&&null!=a){var b=this.geometry.getAttribute("color");b.array=this.renderColors;for(var d=a.length/3,e=0,g=0;g<d;++g){for(var h=new V.Color(a[e],a[e+1],a[e+2]),k=this.labelVertexMap[g].length,
l=0;l<k;++l)b.setXYZ(this.labelVertexMap[g][l],h.r,h.g,h.b);e+=3}b.needsUpdate=!0}};a.prototype.setScene=function(a){this.scene=a};a.prototype.dispose=function(){this.labelsMesh&&(this.scene&&this.scene.remove(this.labelsMesh),this.labelsMesh=null);this.geometry&&(this.geometry.dispose(),this.geometry=null);null!=this.glyphTexture&&null!=this.glyphTexture.texture&&(this.glyphTexture.texture.dispose(),this.glyphTexture.texture=null)};a.prototype.onPickingRender=function(){null==this.geometry&&this.createLabels();
if(null!=this.geometry){this.material.uniforms.texture.value=this.glyphTexture.texture;this.material.uniforms.picking.value=!0;var a=this.geometry.getAttribute("color");a.array=this.pickingColors;a.needsUpdate=!0}};a.prototype.onRender=function(a){null==this.geometry&&this.createLabels();null!=this.geometry&&(this.colorLabels(a.pointColors),this.material.uniforms.texture.value=this.glyphTexture.texture,this.material.uniforms.picking.value=!1,a=this.geometry.getAttribute("color"),a.array=this.renderColors,
a.needsUpdate=!0)};a.prototype.onPointPositionsChanged=function(a){this.worldSpacePointPositions=a;this.dispose()};a.prototype.setLabelStrings=function(a){this.labelStrings=a;this.dispose()};a.prototype.onResize=function(){};return a}();
</script>
<script>//~~WEBPATH~~/vz-projector/scatterPlotVisualizerCanvasLabels.js
var Gd=function(){function a(a){this.labelsActive=!0;this.canvas=document.createElement("canvas");a.appendChild(this.canvas);this.gc=this.canvas.getContext("2d");this.canvas.style.position="absolute";this.canvas.style.left="0";this.canvas.style.top="0";this.canvas.style.pointerEvents="none"}a.prototype.removeAllLabels=function(){this.gc.clearRect(0,0,this.canvas.width*window.devicePixelRatio,this.canvas.height*window.devicePixelRatio)};a.prototype.makeLabels=function(a){if(null!=a.labels&&0!==a.labels.pointIndices.length&&
null!=this.worldSpacePointPositions){var b=a.labels,d=a.cameraType===vc.Perspective,e=parseInt(this.gc.font,10),g=window.devicePixelRatio;var h=this.canvas.width*g;var k=this.canvas.height*g;h=new Yb({loX:0,hiX:h,loY:0,hiY:k},h/25,k/50);var k=d3.scalePow().exponent(Math.E).domain([a.farthestCameraSpacePointZ,a.nearestCameraSpacePointZ]).range([.1,1]),l=a.camera.position,m=l.clone().sub(a.cameraTarget),p=new V.Vector3;this.gc.textBaseline="middle";this.gc.miterLimit=2;for(var r=Math.min(1E4,b.pointIndices.length),
n=0;n<r;++n){var t=Ac(this.worldSpacePointPositions,b.pointIndices[n]);p.copy(l).sub(t);if(!(0>m.dot(p))){var q=a.camera,u=a.screenWidth;var v=a.screenHeight;var y=window.devicePixelRatio;t=(new V.Vector3).copy(t).project(q);v=[(t.x+1)/2*u*y,-((t.y-1)/2*v)*y];u=v[0];v=v[1];u+=4;t={loX:u-2,hiX:u+1+2,loY:v-e/2-2,hiY:v+e/2+2};h.insert(t,!0)&&(y=b.labelStrings[n],this.gc.font=b.defaultFontSize*b.scaleFactors[n]*g+"px roboto",t.hiX+=this.gc.measureText(y).width-1,h.insert(t)&&(t=1,d&&1===b.useSceneOpacityFlags[n]&&
(t=k(p.length())),this.gc.fillStyle=this.styleStringFromPackedRgba(b.fillColors,n,t),this.gc.strokeStyle=this.styleStringFromPackedRgba(b.strokeColors,n,t),this.gc.lineWidth=3,this.gc.strokeText(y,u,v),this.gc.lineWidth=6,this.gc.fillText(y,u,v)))}}}};a.prototype.styleStringFromPackedRgba=function(a,c,d){c*=3;return"rgba("+a[c]+","+a[c+1]+","+a[c+2]+","+d+")"};a.prototype.onResize=function(a,c){var b=window.devicePixelRatio;this.canvas.width=a*b;this.canvas.height=c*b;this.canvas.style.width=a+"px";
this.canvas.style.height=c+"px"};a.prototype.dispose=function(){this.removeAllLabels();this.gc=this.canvas=null};a.prototype.onPointPositionsChanged=function(a){this.worldSpacePointPositions=a;this.removeAllLabels()};a.prototype.onRender=function(a){this.labelsActive&&(this.removeAllLabels(),this.makeLabels(a))};a.prototype.setScene=function(){};a.prototype.onPickingRender=function(){};return a}();
</script>
<script>//~~WEBPATH~~/vz-projector/scatterPlotVisualizerPolylines.js
var Hd=function(){function a(){this.polylinePositionBuffer={};this.polylineColorBuffer={}}a.prototype.updateSequenceIndicesInDataSet=function(a){for(var b=0;b<a.sequences.length;b++)for(var d=a.sequences[b],e=0;e<d.pointIndices.length-1;e++)a.points[d.pointIndices[e]].sequenceIndex=b,a.points[d.pointIndices[e+1]].sequenceIndex=b};a.prototype.createPolylines=function(a){if(this.dataSet&&this.dataSet.sequences){this.updateSequenceIndicesInDataSet(this.dataSet);this.polylines=[];for(var b=0;b<this.dataSet.sequences.length;b++){var d=
new V.BufferGeometry;d.addAttribute("position",this.polylinePositionBuffer[b]);d.addAttribute("color",this.polylineColorBuffer[b]);var e=new V.LineBasicMaterial({linewidth:1,opacity:1,transparent:!0,vertexColors:V.VertexColors}),d=new V.LineSegments(d,e);d.frustumCulled=!1;this.polylines.push(d);a.add(d)}}};a.prototype.dispose=function(){if(null!=this.polylines){for(var a=0;a<this.polylines.length;a++)this.scene.remove(this.polylines[a]),this.polylines[a].geometry.dispose();this.polylines=null;this.polylinePositionBuffer=
{};this.polylineColorBuffer={}}};a.prototype.setScene=function(a){this.scene=a};a.prototype.setDataSet=function(a){this.dataSet=a};a.prototype.onPointPositionsChanged=function(a){null!=a&&null==this.polylines||this.dispose();if(null!=a&&null!=this.dataSet){for(var b=0;b<this.dataSet.sequences.length;b++){var d=this.dataSet.sequences[b];d=2*(d.pointIndices.length-1);this.polylinePositionBuffer[b]=new V.BufferAttribute(new Float32Array(3*d),3);this.polylineColorBuffer[b]=new V.BufferAttribute(new Float32Array(3*
d),3)}for(b=0;b<this.dataSet.sequences.length;b++){d=this.dataSet.sequences[b];for(var e=0,g=0;g<d.pointIndices.length-1;g++){var h=Ac(a,d.pointIndices[g]),k=Ac(a,d.pointIndices[g+1]);this.polylinePositionBuffer[b].setXYZ(e,h.x,h.y,h.z);this.polylinePositionBuffer[b].setXYZ(e+1,k.x,k.y,k.z);e+=2}this.polylinePositionBuffer[b].needsUpdate=!0}null==this.polylines&&this.createPolylines(this.scene)}};a.prototype.onRender=function(a){if(null!=this.polylines)for(var b=0;b<this.polylines.length;b++)this.polylines[b].material.opacity=
a.polylineOpacities[b],this.polylines[b].material.linewidth=a.polylineWidths[b],this.polylineColorBuffer[b].array=a.polylineColors[b],this.polylineColorBuffer[b].needsUpdate=!0};a.prototype.onPickingRender=function(){};a.prototype.onResize=function(){};return a}();
</script>
<script>//~~WEBPATH~~/vz-projector/scatterPlotVisualizerSprites.js
var Id="\n  // Index of the specific vertex (passed in as bufferAttribute), and the\n  // variable that will be used to pass it to the fragment shader.\n  attribute float spriteIndex;\n  attribute vec3 color;\n  attribute float scaleFactor;\n\n  varying vec2 xyIndex;\n  varying vec3 vColor;\n\n  uniform bool sizeAttenuation;\n  uniform float pointSize;\n  uniform float spritesPerRow;\n  uniform float spritesPerColumn;\n\n  void main() {\n    // Pass index and color values to fragment shader.\n    vColor \x3d color;\n    xyIndex \x3d vec2(mod(spriteIndex, spritesPerRow),\n              floor(spriteIndex / spritesPerColumn));\n\n    // Transform current vertex by modelViewMatrix (model world position and\n    // camera world position matrix).\n    vec4 cameraSpacePos \x3d modelViewMatrix * vec4(position, 1.0);\n\n    // Project vertex in camera-space to screen coordinates using the camera's\n    // projection matrix.\n    gl_Position \x3d projectionMatrix * cameraSpacePos;\n\n    // Create size attenuation (if we're in 3D mode) by making the size of\n    // each point inversly proportional to its distance to the camera.\n    float outputPointSize \x3d pointSize;\n    if (sizeAttenuation) {\n      outputPointSize \x3d -pointSize / cameraSpacePos.z;\n    }\n\n    gl_PointSize \x3d\n      max(outputPointSize * scaleFactor, "+
(5).toFixed(1)+");\n  }",Jd="\n  varying vec2 xyIndex;\n  varying vec3 vColor;\n\n  uniform sampler2D texture;\n  uniform float spritesPerRow;\n  uniform float spritesPerColumn;\n  uniform bool isImage;\n\n  "+V.ShaderChunk.common+"\n  "+V.ShaderChunk.fog_pars_fragment+"\n  \n  bool point_in_unit_circle(vec2 spriteCoord) {\n    vec2 centerToP \x3d spriteCoord - vec2(0.5, 0.5);\n    return dot(centerToP, centerToP) \x3c (0.5 * 0.5);\n  }\n\n  bool point_in_unit_equilateral_triangle(vec2 spriteCoord) {\n    vec3 v0 \x3d vec3(0, 1, 0);\n    vec3 v1 \x3d vec3(0.5, 0, 0);\n    vec3 v2 \x3d vec3(1, 1, 0);\n    vec3 p \x3d vec3(spriteCoord, 0);\n    float p_in_v0_v1 \x3d cross(v1 - v0, p - v0).z;\n    float p_in_v1_v2 \x3d cross(v2 - v1, p - v1).z;\n    return (p_in_v0_v1 \x3e 0.0) \x26\x26 (p_in_v1_v2 \x3e 0.0);\n  }\n\n  bool point_in_unit_square(vec2 spriteCoord) {\n    return true;\n  }\n\n\n  void main() {\n    if (isImage) {\n      // Coordinates of the vertex within the entire sprite image.\n      vec2 coords \x3d\n        (gl_PointCoord + xyIndex) / vec2(spritesPerRow, spritesPerColumn);\n      gl_FragColor \x3d vec4(vColor, 1.0) * texture2D(texture, coords);\n    } else {\n      bool inside \x3d point_in_unit_circle(gl_PointCoord);\n      if (!inside) {\n        discard;\n      }\n      gl_FragColor \x3d vec4(vColor, 1);\n    }\n    "+
V.ShaderChunk.fog_fragment+"\n  }",Kd=function(){function a(){this.texture=null;this.standinTextureForPoints=Cc(document.createElement("canvas"));this.renderMaterial=this.createRenderMaterial(!1);this.pickingMaterial=this.createPickingMaterial()}a.prototype.createTextureFromSpriteAtlas=function(a,c,d){this.texture=Cc(a);this.spritesPerRow=a.width/c[0];this.spritesPerColumn=a.height/c[1];this.spriteDimensions=c;this.spriteIndexBufferAttribute=new V.BufferAttribute(d,1);null!=this.points&&this.points.geometry.addAttribute("spriteIndex",
this.spriteIndexBufferAttribute)};a.prototype.createUniforms=function(){return{texture:{type:"t"},spritesPerRow:{type:"f"},spritesPerColumn:{type:"f"},fogColor:{type:"c"},fogNear:{type:"f"},fogFar:{type:"f"},isImage:{type:"bool"},sizeAttenuation:{type:"bool"},pointSize:{type:"f"}}};a.prototype.createRenderMaterial=function(a){return new V.ShaderMaterial({uniforms:this.createUniforms(),vertexShader:Id,fragmentShader:Jd,transparent:!a,depthTest:a,depthWrite:a,fog:!0,blending:V.MultiplyBlending})};a.prototype.createPickingMaterial=
function(){return new V.ShaderMaterial({uniforms:this.createUniforms(),vertexShader:Id,fragmentShader:"\n  varying vec2 xyIndex;\n  varying vec3 vColor;\n  uniform bool isImage;\n\n  \n  bool point_in_unit_circle(vec2 spriteCoord) {\n    vec2 centerToP \x3d spriteCoord - vec2(0.5, 0.5);\n    return dot(centerToP, centerToP) \x3c (0.5 * 0.5);\n  }\n\n  bool point_in_unit_equilateral_triangle(vec2 spriteCoord) {\n    vec3 v0 \x3d vec3(0, 1, 0);\n    vec3 v1 \x3d vec3(0.5, 0, 0);\n    vec3 v2 \x3d vec3(1, 1, 0);\n    vec3 p \x3d vec3(spriteCoord, 0);\n    float p_in_v0_v1 \x3d cross(v1 - v0, p - v0).z;\n    float p_in_v1_v2 \x3d cross(v2 - v1, p - v1).z;\n    return (p_in_v0_v1 \x3e 0.0) \x26\x26 (p_in_v1_v2 \x3e 0.0);\n  }\n\n  bool point_in_unit_square(vec2 spriteCoord) {\n    return true;\n  }\n\n\n  void main() {\n    xyIndex; // Silence 'unused variable' warning.\n    if (isImage) {\n      gl_FragColor \x3d vec4(vColor, 1);\n    } else {\n      bool inside \x3d point_in_unit_circle(gl_PointCoord);\n      if (!inside) {\n        discard;\n      }\n      gl_FragColor \x3d vec4(vColor, 1);\n    }\n  }",
transparent:!0,depthTest:!0,depthWrite:!0,fog:!1,blending:V.NormalBlending})};a.prototype.createPointSprites=function(a,c){c=this.createGeometry(null!=c?c.length/3:0);this.fog=new V.Fog(16777215);this.points=new V.Points(c,this.renderMaterial);this.points.frustumCulled=!1;null!=this.spriteIndexBufferAttribute&&this.points.geometry.addAttribute("spriteIndex",this.spriteIndexBufferAttribute);a.add(this.points)};a.prototype.calculatePointSize=function(a){if(null!=this.texture)return a?30:this.spriteDimensions[0];
var b=200/Math.log(null!=this.worldSpacePointPositions?this.worldSpacePointPositions.length/3:1)/Math.log(8);return a?b:b/1.5};a.prototype.createGeometry=function(a){this.pickingColors=new Float32Array(3*a);for(var b=0,d=0;d<a;d++){var e=new V.Color(d);this.pickingColors[b++]=e.r;this.pickingColors[b++]=e.g;this.pickingColors[b++]=e.b}a=new V.BufferGeometry;a.addAttribute("position",new V.BufferAttribute(null,3));a.addAttribute("color",new V.BufferAttribute(null,3));a.addAttribute("scaleFactor",new V.BufferAttribute(null,
1));return a};a.prototype.setFogDistances=function(a,c,d){a?(a=this.worldSpacePointPositions.length/3,this.fog.near=c,this.fog.far=d*(2-Math.min(a,5E3)/5E3)):(this.fog.near=Infinity,this.fog.far=Infinity)};a.prototype.dispose=function(){this.disposeGeometry();this.disposeTextureAtlas()};a.prototype.disposeGeometry=function(){null!=this.points&&(this.scene.remove(this.points),this.points.geometry.dispose(),this.worldSpacePointPositions=this.points=null)};a.prototype.disposeTextureAtlas=function(){null!=
this.texture&&this.texture.dispose();this.pickingMaterial=this.renderMaterial=this.texture=null};a.prototype.setScene=function(a){this.scene=a};a.prototype.setSpriteAtlas=function(a,c,d){this.disposeTextureAtlas();this.createTextureFromSpriteAtlas(a,c,d);this.renderMaterial=this.createRenderMaterial(!0);this.pickingMaterial=this.createPickingMaterial()};a.prototype.clearSpriteAtlas=function(){this.disposeTextureAtlas();this.renderMaterial=this.createRenderMaterial(!1);this.pickingMaterial=this.createPickingMaterial()};
a.prototype.onPointPositionsChanged=function(a){if(null==a||0===a.length)this.dispose();else{null!=this.points&&this.worldSpacePointPositions.length!==a.length&&this.disposeGeometry();this.worldSpacePointPositions=a;null==this.points&&this.createPointSprites(this.scene,a);var b=this.points.geometry.getAttribute("position");b.array=a;b.needsUpdate=!0}};a.prototype.onPickingRender=function(a){if(null!=this.points){var b=a.cameraType===vc.Perspective;this.pickingMaterial.uniforms.spritesPerRow.value=
this.spritesPerRow;this.pickingMaterial.uniforms.spritesPerRow.value=this.spritesPerColumn;this.pickingMaterial.uniforms.sizeAttenuation.value=b;this.pickingMaterial.uniforms.pointSize.value=this.calculatePointSize(b);this.points.material=this.pickingMaterial;b=this.points.geometry.getAttribute("color");b.array=this.pickingColors;b.needsUpdate=!0;b=this.points.geometry.getAttribute("scaleFactor");b.array=a.pointScaleFactors;b.needsUpdate=!0}};a.prototype.onRender=function(a){if(this.points){var b=
a.camera instanceof V.PerspectiveCamera;this.setFogDistances(b,a.nearestCameraSpacePointZ,a.farthestCameraSpacePointZ);this.scene.fog=this.fog;this.scene.fog.color=new V.Color(a.backgroundColor);this.renderMaterial.uniforms.fogColor.value=this.scene.fog.color;this.renderMaterial.uniforms.fogNear.value=this.fog.near;this.renderMaterial.uniforms.fogFar.value=this.fog.far;this.renderMaterial.uniforms.spritesPerRow.value=this.spritesPerRow;this.renderMaterial.uniforms.spritesPerColumn.value=this.spritesPerColumn;
this.renderMaterial.uniforms.isImage.value=null!=this.texture;this.renderMaterial.uniforms.texture.value=null!=this.texture?this.texture:this.standinTextureForPoints;this.renderMaterial.uniforms.sizeAttenuation.value=b;this.renderMaterial.uniforms.pointSize.value=this.calculatePointSize(b);this.points.material=this.renderMaterial;b=this.points.geometry.getAttribute("color");this.renderColors=a.pointColors;b.array=this.renderColors;b.needsUpdate=!0;b=this.points.geometry.getAttribute("scaleFactor");
b.array=a.pointScaleFactors;b.needsUpdate=!0}};a.prototype.onResize=function(){};return a}();
</script>
<script>//~~WEBPATH~~/vz-projector/scatterPlotVisualizer.js
</script>
<script>//~~WEBPATH~~/vz-projector/projectorScatterPlotAdapter.js
var Ld=d3.scaleLinear().domain([1,.7,.4]).range(["hsl(285, 80%, 40%)","hsl(0, 80%, 65%)","hsl(40, 70%, 60%)"]).clamp(!0),Qd=function(){function a(a,c){var b=this;this.scatterPlotContainer=a;this.renderLabelsIn3D=!1;this.scatterPlot=new Dd(a,c);c.registerProjectionChangedListener(function(a){b.projection=a;b.updateScatterPlotWithNewProjection(a)});c.registerSelectionChangedListener(function(a,c){b.selectedPointIndices=a;b.neighborsOfFirstSelectedPoint=c;b.updateScatterPlotPositions();b.updateScatterPlotAttributes();
b.scatterPlot.render()});c.registerHoverListener(function(a){b.hoverPointIndex=a;b.updateScatterPlotAttributes();b.scatterPlot.render()});c.registerDistanceMetricChangedListener(function(a){b.distanceMetric=a;b.updateScatterPlotAttributes();b.scatterPlot.render()});this.createVisualizers(!1)}a.prototype.notifyProjectionPositionsUpdated=function(){this.updateScatterPlotPositions();this.scatterPlot.render()};a.prototype.setDataSet=function(a){null!=this.projection&&(this.projection.dataSet=a);null!=
this.polylineVisualizer&&this.polylineVisualizer.setDataSet(a);null!=this.labels3DVisualizer&&this.labels3DVisualizer.setLabelStrings(this.generate3DLabelsArray(a,this.labelPointAccessor));if(null!=this.spriteVisualizer&&(this.spriteVisualizer.clearSpriteAtlas(),null!=a&&null!=a.spriteAndMetadataInfo)){var b=a.spriteAndMetadataInfo;if(null!=b.spriteImage&&null!=b.spriteMetadata){for(var d=a.points.length,e=new Float32Array(d),g=0;g<d;++g)e[g]=a.points[g].index;this.spriteVisualizer.setSpriteAtlas(b.spriteImage,
b.spriteMetadata.singleImageDim,e)}}};a.prototype.set3DLabelMode=function(a){this.renderLabelsIn3D=a;this.createVisualizers(a);this.updateScatterPlotAttributes();this.scatterPlot.render()};a.prototype.setLegendPointColorer=function(a){this.legendPointColorer=a};a.prototype.setLabelPointAccessor=function(a){this.labelPointAccessor=a;null!=this.labels3DVisualizer&&this.labels3DVisualizer.setLabelStrings(this.generate3DLabelsArray(null==this.projection?null:this.projection.dataSet,a))};a.prototype.resize=
function(){this.scatterPlot.resize()};a.prototype.populateBookmarkFromUI=function(a){a.cameraDef=this.scatterPlot.getCameraDef()};a.prototype.restoreUIFromBookmark=function(a){this.scatterPlot.setCameraParametersForNextCameraCreation(a.cameraDef,!1)};a.prototype.updateScatterPlotPositions=function(){var a=this.generatePointPositionArray(null==this.projection?null:this.projection.dataSet,null==this.projection?null:this.projection.projectionComponents);this.scatterPlot.setPointPositions(a)};a.prototype.updateScatterPlotAttributes=
function(){if(null!=this.projection){var a=this.projection.dataSet,c=this.selectedPointIndices,d=this.hoverPointIndex,e=this.neighborsOfFirstSelectedPoint,g=this.legendPointColorer,h=this.generatePointColorArray(a,g,this.distanceMetric,c,e,d,this.renderLabelsIn3D,this.getSpriteImageMode()),k=this.generatePointScaleFactorArray(a,c,e,d),d=this.generateVisibleLabelRenderParams(a,c,e,d),g=this.generateLineSegmentColorMap(a,g),e=this.generateLineSegmentOpacityArray(a,c),a=this.generateLineSegmentWidthArray(a,
c);this.scatterPlot.setPointColors(h);this.scatterPlot.setPointScaleFactors(k);this.scatterPlot.setLabels(d);this.scatterPlot.setPolylineColors(g);this.scatterPlot.setPolylineOpacities(e);this.scatterPlot.setPolylineWidths(a)}};a.prototype.render=function(){this.scatterPlot.render()};a.prototype.generatePointPositionArray=function(a,c){if(null==a)return null;var b=d3.scaleLinear(),e=d3.scaleLinear(),g=null,h=d3.extent(a.points,function(b,d){return a.points[d].projections[c[0]]}),k=d3.extent(a.points,
function(b,d){return a.points[d].projections[c[1]]}),l=[-1,1];b.domain(h).range(l);e.domain(k).range(l);null!=c[2]&&(h=d3.extent(a.points,function(b,d){return a.points[d].projections[c[2]]}),g=d3.scaleLinear(),g.domain(h).range(l));var m=new Float32Array(3*a.points.length),p=0;a.points.forEach(function(d,g){m[p++]=b(a.points[g].projections[c[0]]);m[p++]=e(a.points[g].projections[c[1]]);m[p++]=0});g&&(p=2,a.points.forEach(function(b,d){m[p]=g(a.points[d].projections[c[2]]);p+=3}));return m};a.prototype.generateVisibleLabelRenderParams=
function(a,c,d,e){if(null==a)return null;var b=null==c?0:c.length,h=null==d?0:d.length,k=b+h+(null!=e?1:0),l=new Uint32Array(k),m=new Float32Array(k),p=new Int8Array(k),r=new Uint8Array(3*k),k=new Uint8Array(3*k),n=[];m.fill(1);p.fill(1);var t=0;if(null!=e){n.push(this.getLabelText(a,e,this.labelPointAccessor));l[t]=e;m[t]=2;p[t]=0;var q=Md(0);Nd(r,t,q[0],q[1],q[2]);var u=Md(16777215);Nd(k,t,u[0],u[1],u[1]);++t}q=Md(0);u=Md(16777215);for(var v=0;v<b;++v)e=c[v],n.push(this.getLabelText(a,e,this.labelPointAccessor)),
l[t]=e,m[t]=2,p[t]=1===b?0:1,Nd(r,t,q[0],q[1],q[2]),Nd(k,t,u[0],u[1],u[2]),++t;q=Md(0);u=Md(16777215);for(v=0;v<h;++v)e=d[v].index,n.push(this.getLabelText(a,e,this.labelPointAccessor)),l[t]=e,Nd(r,t,q[0],q[1],q[2]),Nd(k,t,u[0],u[1],u[2]),++t;return new nc(new Float32Array(l),n,m,p,r,k)};a.prototype.generatePointScaleFactorArray=function(a,c,d,e){if(null==a)return new Float32Array(0);var b=new Float32Array(a.points.length);b.fill(1);var h=null==d?0:d.length;var k=null==c?0:c.length;for(var l=0;l<
k;++l)a=c[l],b[a]=1.2;k=h;for(l=0;l<k;++l)a=d[l].index,b[a]=1.2;null!=e&&(b[e]=1.2);return b};a.prototype.generateLineSegmentColorMap=function(a,c){var b={};if(null==a)return b;for(var e=0;e<a.sequences.length;e++){var g=a.sequences[e],h=new Float32Array(6*(g.pointIndices.length-1)),k=0;if(c)for(var l=0;l<g.pointIndices.length-1;l++){var m=new V.Color(c(a,g.pointIndices[l]));var p=new V.Color(c(a,g.pointIndices[l+1]));h[k++]=m.r;h[k++]=m.g;h[k++]=m.b;h[k++]=p.r;h[k++]=p.g;h[k++]=p.b}else for(l=0;l<
g.pointIndices.length-1;l++)m=Od(l,g.pointIndices.length),p=Od(l+1,g.pointIndices.length),h[k++]=m.r,h[k++]=m.g,h[k++]=m.b,h[k++]=p.r,h[k++]=p.g,h[k++]=p.b;b[e]=h}return b};a.prototype.generateLineSegmentOpacityArray=function(a,c){if(null==a)return new Float32Array(0);var b=new Float32Array(a.sequences.length);0<(null==c?0:c.length)?(b.fill(.05),b[a.points[c[0]].sequenceIndex]=.9):b.fill(.2);return b};a.prototype.generateLineSegmentWidthArray=function(a,c){if(null==a)return new Float32Array(0);var b=
new Float32Array(a.sequences.length);b.fill(2);0<(null==c?0:c.length)&&(b[a.points[c[0]].sequenceIndex]=3);return b};a.prototype.generatePointColorArray=function(a,c,d,e,g,h,k,l){if(null==a)return new Float32Array(0);var b=null==e?0:e.length,p=null==g?0:g.length,r=new Float32Array(3*a.points.length);var n=14935011;var t=7697881;k&&(t=n=16777215);l&&(t=n=16777215);l=a.points.length;k=0;if(0<b)for(n=new V.Color(n),t=0;t<l;++t)r[k++]=n.r,r[k++]=n.g,r[k++]=n.b;else if(null!=c)for(t=0;t<l;++t)n=new V.Color(c(a,
t)),r[k++]=n.r,r[k++]=n.g,r[k++]=n.b;else for(n=new V.Color(t),t=0;t<l;++t)r[k++]=n.r,r[k++]=n.g,r[k++]=n.b;l=b;n=new V.Color(16410214);for(t=0;t<l;++t)k=3*e[t],r[k++]=n.r,r[k++]=n.g,r[k++]=n.b;l=p;a=0<l?g[0].dist:0;for(t=0;t<l;++t)n=new V.Color(Ld(Pd(d,g[t].dist,a))),k=3*g[t].index,r[k++]=n.r,r[k++]=n.g,r[k++]=n.b;null!=h&&(n=new V.Color(7736143),k=3*h,r[k++]=n.r,r[k++]=n.g,r[k++]=n.b);return r};a.prototype.generate3DLabelsArray=function(a,c){if(null==a||null==c)return null;for(var b=[],e=a.points.length,
g=0;g<e;++g)b.push(this.getLabelText(a,g,c));return b};a.prototype.getLabelText=function(a,c,d){return a.points[c].metadata[d].toString()};a.prototype.updateScatterPlotWithNewProjection=function(a){null==a?(this.createVisualizers(this.renderLabelsIn3D),this.scatterPlot.render()):(this.setDataSet(a.dataSet),this.scatterPlot.setDimensions(a.dimensionality),a.dataSet.projectionCanBeRendered(a.projectionType)&&(this.updateScatterPlotAttributes(),this.notifyProjectionPositionsUpdated()),this.scatterPlot.setCameraParametersForNextCameraCreation(null,
!1))};a.prototype.createVisualizers=function(a){var b=null==this.projection?null:this.projection.dataSet,d=this.scatterPlot;d.removeAllVisualizers();this.polylineVisualizer=this.spriteVisualizer=this.canvasLabelsVisualizer=this.labels3DVisualizer=null;a?(this.labels3DVisualizer=new Fd,this.labels3DVisualizer.setLabelStrings(this.generate3DLabelsArray(b,this.labelPointAccessor))):(this.spriteVisualizer=new Kd,d.addVisualizer(this.spriteVisualizer),this.canvasLabelsVisualizer=new Gd(this.scatterPlotContainer));
this.polylineVisualizer=new Hd;this.setDataSet(b);this.spriteVisualizer&&d.addVisualizer(this.spriteVisualizer);this.labels3DVisualizer&&d.addVisualizer(this.labels3DVisualizer);this.canvasLabelsVisualizer&&d.addVisualizer(this.canvasLabelsVisualizer);d.addVisualizer(this.polylineVisualizer)};a.prototype.getSpriteImageMode=function(){if(null==this.projection)return!1;var a=this.projection.dataSet;return null==a||null==a.spriteAndMetadataInfo?!1:null!=a.spriteAndMetadataInfo.spriteImage};return a}();
function Nd(a,b,c,d,e){a[3*b]=c;a[3*b+1]=d;a[3*b+2]=e}function Md(a){a=new V.Color(a);return[255*a.r|0,255*a.g|0,255*a.b|0]}function Od(a,b){a=d3.hsl(60+300*a/b,1,.3).rgb();return new V.Color(a.r/255,a.g/255,a.b/255)}function Pd(a,b,c){return a===Mc?c/b:1-b};
</script>
<script>//~~WEBPATH~~/vz-projector/vz-projector-util.js
</script>


<dom-module id="vz-projector-bookmark-panel">
<template>
<style include="vz-projector-styles"></style>
<style>
#title {
  background-color: #fafafa;
  color: black;
  font-weight: 500;
  left: 0;
  line-height: 60px;
  padding-left: 24px;
  position: absolute;
  width: 276px;
}
#bookmark-container {
  background-color: #fafafa;
}
#icon-container {
  line-height: 60px;
  position: absolute;
  right: 0;
}
#header {
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  position: relative;
}
#panel {
  background-color: #fafafa;
  position: relative;
  overflow-y: scroll;
  top: 60px;
  max-height: 50vh;
}

#save-container {
  text-align: center;
}

.state-radio {
  display: table-cell;
  vertical-align: middle;
  padding-top: 16px;
}

.state-label {
  display: table-cell;
  vertical-align: middle;
  top: 14px;
}

.state-label-input {
  width: 194px;
}

.state-clear {
  display: table-cell;
  vertical-align: middle;
  padding-top: 20px;
}
#state-file {
  display: none;
}
#no-bookmarks {
  padding: 0 24px;
}
#action-buttons-container .add-icon-button {
  background-color: #03a9f4;
  color: white;
  margin: 0 4px 4px auto;
  right: 7px;
  top: -4px;
}
.upload-download-icon-button {
  padding: 0;
}
#action-buttons-container {
  display: flex;
  margin-left: 34px;
  margin-top: 6px;
}
.ink-fab {
  border-radius: 50%;
  background: white;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
}
paper-textarea {
  --paper-input-container-input: {
    font-size: 12px;
  }
  --paper-font-caption: {
    display: none
  }
}
</style>


<div id="bookmark-container">
  <div id="header">
    <div id="title">
      BOOKMARKS ([[savedStates.length]])
      <paper-icon-button icon="help" class="help-icon"></paper-icon-button>
      <paper-tooltip animation-delay="0" position="top" offset="0">
        Open this drawer to save a set of views of the projection, including
        selected points. A file containing the bookmarks can then be saved and
        later loaded to view them.
      </paper-tooltip>
    </div>
    <div id="icon-container">
      
      <paper-icon-button id="expand-more" icon="expand-less" on-tap="_expandMore"></paper-icon-button>
      <paper-icon-button id="expand-less" style="display: none" icon="expand-more" on-tap="_expandLess"></paper-icon-button>
    </div>
  </div>
  <iron-collapse id="panel">
    
    <div id="state-section">
      <template is="dom-if" if="[[!savedStates.length]]">
        <p id="no-bookmarks">
            No bookmarks yet, upload a bookmarks file or add a new bookmark by clicking the "+" below.
        
      </template>

      <template is="dom-repeat" items="{{savedStates}}">
        <div class="state-row">
          <div class="state-radio">
            <template is="dom-if" if="{{item.isSelected}}">
              <paper-icon-button icon="radio-button-checked"></paper-icon-button>
            </template>
            <template is="dom-if" if="{{!item.isSelected}}">
              <paper-icon-button icon="radio-button-unchecked" data-index$="{{index}}" on-tap="_radioButtonHandler"></paper-icon-button>
            </template>
          </div>
          <div class="state-label">
            <paper-textarea value="[[item.label]]" class="state-label-input" on-keyup="_labelChange" data-index$="[[index]]" autoresizing>
          </paper-textarea></div>
          <div class="state-clear">
            <paper-icon-button icon="clear" data-index$="{{index}}" on-tap="_clearButtonHandler"></paper-icon-button>
          </div>
        </div>
      </template>

      <div id="action-buttons-container">
        <paper-icon-button class="upload-download-icon-button" icon="save" title="Save bookmarks" disabled="[[!hasStates]]" on-tap="_downloadFile"></paper-icon-button>
        <paper-icon-button class="upload-download-icon-button" icon="file-upload" title="Load bookmarks" on-tap="_uploadFile"></paper-icon-button>
        <paper-icon-button class="add-icon-button ink-fab" icon="add" title="Add bookmark" on-tap="_addBookmark"></paper-icon-button>
        <input type="file" id="state-file" name="state-file">
      </div>
    </div>
  </iron-collapse>
</div>

</template>
<script>//~~WEBPATH~~/vz-projector/vz-projector-bookmark-panel.js
var Rd=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b])};return function(b,c){function d(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),Sd=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.hasStates=!1;return b}Rd(b,a);b.prototype.ready=function(){this.savedStates=[];this.setupUploadButton();
this.ignoreNextProjectionEvent=!1;this.expandLessButton=this.querySelector("#expand-less");this.expandMoreButton=this.querySelector("#expand-more")};b.prototype.initialize=function(a,b){var c=this;this.projector=a;b.registerProjectionChangedListener(function(){c.ignoreNextProjectionEvent?c.ignoreNextProjectionEvent=!1:c.clearStateSelection()})};b.prototype.setSelectedTensor=function(a,b,e){var c=this;this.addStates(null);b&&b.bookmarksPath?e.getBookmarks(a,b.tensorName,function(a){c.addStates(a);
c._expandMore()}):this._expandLess()};b.prototype._expandMore=function(){this.$.panel.show();this.expandMoreButton.style.display="none";this.expandLessButton.style.display=""};b.prototype._expandLess=function(){this.$.panel.hide();this.expandMoreButton.style.display="";this.expandLessButton.style.display="none"};b.prototype._addBookmark=function(){var a=this.projector.getCurrentState();a.label="State "+this.savedStates.length;a.isSelected=!0;this.selectedState=this.savedStates.length;for(var b=0;b<
this.savedStates.length;b++)this.savedStates[b].isSelected=!1,this.notifyPath("savedStates."+b+".isSelected",!1,!1);this.push("savedStates",a);this.updateHasStates()};b.prototype._downloadFile=function(){var a=this.serializeAllSavedStates(),a=window.URL.createObjectURL(new Blob([a],{type:"text/plain"})),b=document.createElement("a");document.body.appendChild(b);b.style.display="none";b.href=a;b.download="state";b.click();document.body.removeChild(b);window.URL.revokeObjectURL(a)};b.prototype._uploadFile=
function(){this.$$("#state-file").click()};b.prototype.setupUploadButton=function(){var a=this,b=this.querySelector("#state-file");b.onchange=function(){var c=b.files[0];b.value="";var d=new FileReader;d.onload=function(){var b=JSON.parse(d.result);a.savedStatesValid(b)?(a.addStates(b),a.loadSavedState(0)):mc("Unable to load bookmarks: wrong dataset, expected dataset "+("with shape ("+b[0].dataSetDimensions+")."))};d.readAsText(c)}};b.prototype.addStates=function(a){if(null==a)this.savedStates=
[];else for(var b=0;b<a.length;b++)a[b].isSelected=!1,this.push("savedStates",a[b]);this.updateHasStates()};b.prototype.clearStateSelection=function(){for(var a=0;a<this.savedStates.length;a++)this.setSelectionState(a,!1)};b.prototype._radioButtonHandler=function(a){a=this.getParentDataIndex(a);this.loadSavedState(a);this.setSelectionState(a,!0)};b.prototype.loadSavedState=function(a){for(var b=0;b<this.savedStates.length;b++)this.savedStates[b].isSelected?this.setSelectionState(b,!1):a===b&&(this.setSelectionState(b,
!0),this.ignoreNextProjectionEvent=!0,this.projector.loadState(this.savedStates[b]))};b.prototype.setSelectionState=function(a,b){this.savedStates[a].isSelected=b;this.notifyPath("savedStates."+a+".isSelected",b,!1)};b.prototype.getParentDataIndex=function(a){for(var b=0;b<a.path.length;b++){var c=a.path[b].getAttribute("data-index");if(null!=c)return+c}return-1};b.prototype._clearButtonHandler=function(a){a=this.getParentDataIndex(a);this.splice("savedStates",a,1);this.updateHasStates()};b.prototype._labelChange=
function(a){var b=this.getParentDataIndex(a);this.savedStates[b].label=a.target.value};b.prototype._isSelectedState=function(a){return a===this.selectedState};b.prototype._isNotSelectedState=function(a){return a!==this.selectedState};b.prototype.serializeAllSavedStates=function(){return JSON.stringify(this.savedStates)};b.prototype.loadSavedStates=function(a){this.savedStates=JSON.parse(a);this.updateHasStates()};b.prototype.updateHasStates=function(){this.hasStates=0!==this.savedStates.length};b.prototype.savedStatesValid=
function(a){for(var b=0;b<a.length;b++)if(a[b].dataSetDimensions[0]!==this.projector.dataSet.dim[0]||a[b].dataSetDimensions[1]!==this.projector.dataSet.dim[1])return!1;return!0};return b}(Polymer.Class({is:"vz-projector-bookmark-panel",properties:{savedStates:Object,hasStates:{type:Boolean,value:!1},selectedState:Number}}));document.registerElement(Sd.prototype.is,Sd);
</script>
</dom-module>























<script>//~~WEBPATH~~/iron-dropdown/iron-dropdown-scroll-manager.html.js
(function(){var a=0,b=0,c=null,d=[];Polymer.IronDropdownScrollManager={get currentLockingElement(){return this._lockingElements[this._lockingElements.length-1]},elementIsScrollLocked:function(a){var b=this.currentLockingElement;if(void 0===b)return!1;if(this._hasCachedLockedElement(a))return!0;if(this._hasCachedUnlockedElement(a))return!1;(b=!!b&&b!==a&&!this._composedTreeContains(b,a))?this._lockedElementCache.push(a):this._unlockedElementCache.push(a);return b},pushScrollLock:function(a){0<=this._lockingElements.indexOf(a)||
(0===this._lockingElements.length&&this._lockScrollInteractions(),this._lockingElements.push(a),this._lockedElementCache=[],this._unlockedElementCache=[])},removeScrollLock:function(a){a=this._lockingElements.indexOf(a);-1!==a&&(this._lockingElements.splice(a,1),this._lockedElementCache=[],this._unlockedElementCache=[],0===this._lockingElements.length&&this._unlockScrollInteractions())},_lockingElements:[],_lockedElementCache:null,_unlockedElementCache:null,_hasCachedLockedElement:function(a){return-1<
this._lockedElementCache.indexOf(a)},_hasCachedUnlockedElement:function(a){return-1<this._unlockedElementCache.indexOf(a)},_composedTreeContains:function(a,b){var c,d;if(a.contains(b))return!0;a=Polymer.dom(a).querySelectorAll("content");for(c=0;c<a.length;++c){var e=Polymer.dom(a[c]).getDistributedNodes();for(d=0;d<e.length;++d)if(this._composedTreeContains(e[d],b))return!0}return!1},_scrollInteractionHandler:function(c){c.cancelable&&this._shouldPreventScrolling(c)&&c.preventDefault();c.targetTouches&&
(c=c.targetTouches[0],a=c.pageX,b=c.pageY)},_lockScrollInteractions:function(){this._boundScrollHandler=this._boundScrollHandler||this._scrollInteractionHandler.bind(this);document.addEventListener("wheel",this._boundScrollHandler,!0);document.addEventListener("mousewheel",this._boundScrollHandler,!0);document.addEventListener("DOMMouseScroll",this._boundScrollHandler,!0);document.addEventListener("touchstart",this._boundScrollHandler,!0);document.addEventListener("touchmove",this._boundScrollHandler,
!0)},_unlockScrollInteractions:function(){document.removeEventListener("wheel",this._boundScrollHandler,!0);document.removeEventListener("mousewheel",this._boundScrollHandler,!0);document.removeEventListener("DOMMouseScroll",this._boundScrollHandler,!0);document.removeEventListener("touchstart",this._boundScrollHandler,!0);document.removeEventListener("touchmove",this._boundScrollHandler,!0)},_shouldPreventScrolling:function(a){var b=Polymer.dom(a).rootTarget;"touchmove"!==a.type&&c!==b&&(c=b,d=this._getScrollableNodes(Polymer.dom(a).path));
if(!d.length)return!0;if("touchstart"===a.type)return!1;a=this._getScrollInfo(a);return!this._getScrollingNode(d,a.deltaX,a.deltaY)},_getScrollableNodes:function(a){for(var b=[],c=a.indexOf(this.currentLockingElement),d=0;d<=c;d++)if(a[d].nodeType===Node.ELEMENT_NODE){var e=a[d],m=e.style;"scroll"!==m.overflow&&"auto"!==m.overflow&&(m=window.getComputedStyle(e));"scroll"!==m.overflow&&"auto"!==m.overflow||b.push(e)}return b},_getScrollingNode:function(a,b,c){if(b||c)for(var d=Math.abs(c)>=Math.abs(b),
e=0;e<a.length;e++){var g=a[e];if(d?0>c?0<g.scrollTop:g.scrollTop<g.scrollHeight-g.clientHeight:0>b?0<g.scrollLeft:g.scrollLeft<g.scrollWidth-g.clientWidth)return g}},_getScrollInfo:function(c){var d={deltaX:c.deltaX,deltaY:c.deltaY};"deltaX"in c||("wheelDeltaX"in c?(d.deltaX=-c.wheelDeltaX,d.deltaY=-c.wheelDeltaY):"axis"in c?(d.deltaX=1===c.axis?c.detail:0,d.deltaY=2===c.axis?c.detail:0):c.targetTouches&&(c=c.targetTouches[0],d.deltaX=a-c.pageX,d.deltaY=b-c.pageY));return d}}})();
</script>




<dom-module id="iron-dropdown">
  <template>
    <style>
      :host {
        position: fixed;
      }

      #contentWrapper ::content > * {
        overflow: auto;
      }

      #contentWrapper.animating ::content > * {
        overflow: hidden;
      }
    </style>

    <div id="contentWrapper">
      <content id="content" select=".dropdown-content"></content>
    </div>
  </template>

  <script>//~~WEBPATH~~/iron-dropdown/iron-dropdown.html.js
Polymer({is:"iron-dropdown",behaviors:[Polymer.IronControlState,Polymer.IronA11yKeysBehavior,Polymer.IronOverlayBehavior,Polymer.NeonAnimationRunnerBehavior],properties:{horizontalAlign:{type:String,value:"left",reflectToAttribute:!0},verticalAlign:{type:String,value:"top",reflectToAttribute:!0},openAnimationConfig:{type:Object},closeAnimationConfig:{type:Object},focusTarget:{type:Object},noAnimations:{type:Boolean,value:!1},allowOutsideScroll:{type:Boolean,value:!1},_boundOnCaptureScroll:{type:Function,
value:function(){return this._onCaptureScroll.bind(this)}}},listeners:{"neon-animation-finish":"_onNeonAnimationFinish"},observers:["_updateOverlayPosition(positionTarget, verticalAlign, horizontalAlign, verticalOffset, horizontalOffset)"],get containedElement(){return Polymer.dom(this.$.content).getDistributedNodes()[0]},get _focusTarget(){return this.focusTarget||this.containedElement},ready:function(){this._scrollLeft=this._scrollTop=0;this._refitOnScrollRAF=null},attached:function(){this.sizingTarget&&
this.sizingTarget!==this||(this.sizingTarget=this.containedElement||this)},detached:function(){this.cancelAnimation();document.removeEventListener("scroll",this._boundOnCaptureScroll);Polymer.IronDropdownScrollManager.removeScrollLock(this)},_openedChanged:function(){this.opened&&this.disabled?this.cancel():(this.cancelAnimation(),this._updateAnimationConfig(),this._saveScrollPosition(),this.opened?(document.addEventListener("scroll",this._boundOnCaptureScroll),!this.allowOutsideScroll&&Polymer.IronDropdownScrollManager.pushScrollLock(this)):
(document.removeEventListener("scroll",this._boundOnCaptureScroll),Polymer.IronDropdownScrollManager.removeScrollLock(this)),Polymer.IronOverlayBehaviorImpl._openedChanged.apply(this,arguments))},_renderOpened:function(){!this.noAnimations&&this.animationConfig.open?(this.$.contentWrapper.classList.add("animating"),this.playAnimation("open")):Polymer.IronOverlayBehaviorImpl._renderOpened.apply(this,arguments)},_renderClosed:function(){!this.noAnimations&&this.animationConfig.close?(this.$.contentWrapper.classList.add("animating"),
this.playAnimation("close")):Polymer.IronOverlayBehaviorImpl._renderClosed.apply(this,arguments)},_onNeonAnimationFinish:function(){this.$.contentWrapper.classList.remove("animating");this.opened?this._finishRenderOpened():this._finishRenderClosed()},_onCaptureScroll:function(){this.allowOutsideScroll?(this._refitOnScrollRAF&&window.cancelAnimationFrame(this._refitOnScrollRAF),this._refitOnScrollRAF=window.requestAnimationFrame(this.refit.bind(this))):this._restoreScrollPosition()},_saveScrollPosition:function(){document.scrollingElement?
(this._scrollTop=document.scrollingElement.scrollTop,this._scrollLeft=document.scrollingElement.scrollLeft):(this._scrollTop=Math.max(document.documentElement.scrollTop,document.body.scrollTop),this._scrollLeft=Math.max(document.documentElement.scrollLeft,document.body.scrollLeft))},_restoreScrollPosition:function(){document.scrollingElement?(document.scrollingElement.scrollTop=this._scrollTop,document.scrollingElement.scrollLeft=this._scrollLeft):(document.documentElement.scrollTop=this._scrollTop,
document.documentElement.scrollLeft=this._scrollLeft,document.body.scrollTop=this._scrollTop,document.body.scrollLeft=this._scrollLeft)},_updateAnimationConfig:function(){for(var a=this.containedElement,b=[].concat(this.openAnimationConfig||[]).concat(this.closeAnimationConfig||[]),c=0;c<b.length;c++)b[c].node=a;this.animationConfig={open:this.openAnimationConfig,close:this.closeAnimationConfig}},_updateOverlayPosition:function(){this.isAttached&&this.notifyResize()},_applyFocus:function(){var a=
this.focusTarget||this.containedElement;a&&this.opened&&!this.noAutoFocus?a.focus():Polymer.IronOverlayBehaviorImpl._applyFocus.apply(this,arguments)}});
</script>
</dom-module>








<script>//~~WEBPATH~~/paper-menu-button/paper-menu-button-animations.html.js
Polymer({is:"paper-menu-grow-height-animation",behaviors:[Polymer.NeonAnimationBehavior],configure:function(a){var b=a.node,c=b.getBoundingClientRect().height;return this._effect=new KeyframeEffect(b,[{height:c/2+"px"},{height:c+"px"}],this.timingFromConfig(a))}});Polymer({is:"paper-menu-grow-width-animation",behaviors:[Polymer.NeonAnimationBehavior],configure:function(a){var b=a.node,c=b.getBoundingClientRect().width;return this._effect=new KeyframeEffect(b,[{width:c/2+"px"},{width:c+"px"}],this.timingFromConfig(a))}});
Polymer({is:"paper-menu-shrink-width-animation",behaviors:[Polymer.NeonAnimationBehavior],configure:function(a){var b=a.node,c=b.getBoundingClientRect().width;return this._effect=new KeyframeEffect(b,[{width:c+"px"},{width:c-c/20+"px"}],this.timingFromConfig(a))}});
Polymer({is:"paper-menu-shrink-height-animation",behaviors:[Polymer.NeonAnimationBehavior],configure:function(a){var b=a.node,c=b.getBoundingClientRect().height;this.setPrefixedProperty(b,"transformOrigin","0 0");return this._effect=new KeyframeEffect(b,[{height:c+"px",transform:"translateY(0)"},{height:c/2+"px",transform:"translateY(-20px)"}],this.timingFromConfig(a))}});
</script>






<dom-module id="paper-menu-button">
  <template>
    <style>
      :host {
        display: inline-block;
        position: relative;
        padding: 8px;
        outline: none;

        @apply(--paper-menu-button);
      }

      :host([disabled]) {
        cursor: auto;
        color: var(--disabled-text-color);

        @apply(--paper-menu-button-disabled);
      }

      iron-dropdown {
        @apply(--paper-menu-button-dropdown);
      }

      .dropdown-content {
        @apply(--shadow-elevation-2dp);

        position: relative;
        border-radius: 2px;
        background-color: var(--paper-menu-button-dropdown-background, --primary-background-color);

        @apply(--paper-menu-button-content);
      }

      :host([vertical-align="top"]) .dropdown-content {
        margin-bottom: 20px;
        margin-top: -10px;
        top: 10px;
      }

      :host([vertical-align="bottom"]) .dropdown-content {
        bottom: 10px;
        margin-bottom: -10px;
        margin-top: 20px;
      }
    </style>

    <div id="trigger" on-tap="toggle">
      <content select=".dropdown-trigger"></content>
    </div>

    <iron-dropdown id="dropdown" opened="{{opened}}" horizontal-align="[[horizontalAlign]]" vertical-align="[[verticalAlign]]" dynamic-align="[[dynamicAlign]]" horizontal-offset="[[horizontalOffset]]" vertical-offset="[[verticalOffset]]" no-overlap="[[noOverlap]]" open-animation-config="[[openAnimationConfig]]" close-animation-config="[[closeAnimationConfig]]" no-animations="[[noAnimations]]" focus-target="[[_dropdownContent]]" allow-outside-scroll="[[allowOutsideScroll]]" restore-focus-on-close="[[restoreFocusOnClose]]" on-iron-overlay-canceled="__onIronOverlayCanceled">
      <div class="dropdown-content">
        <content id="content" select=".dropdown-content"></content>
      </div>
    </iron-dropdown>
  </template>

  <script>//~~WEBPATH~~/paper-menu-button/paper-menu-button.html.js
function Td(){}f=Td.prototype;f.registered=function(){};f.addOwnKeyBinding=function(){};f.removeOwnKeyBindings=function(){};f.keyboardEventMatchesKeys=function(){};f._collectKeyBindings=function(){};f._prepKeyBindings=function(){};f._addKeyBinding=function(){};f._resetKeyEventListeners=function(){};f._listenKeyEventListeners=function(){};f._unlistenKeyEventListeners=function(){};f._onKeyBindingEvent=function(){};f._triggerKeyHandler=function(){};
f._focusBlurHandler=function(a){if(a.target===this)this._setFocused("focus"===a.type);else if(!this.shadowRoot){var b=Polymer.dom(a).localTarget;this.isLightDescendant(b)||this.fire(a.type,{sourceEvent:a},{node:this,bubbles:a.bubbles,cancelable:a.cancelable})}};f._changedControlState=function(){this._controlStateChanged&&this._controlStateChanged()};f._setFocused=function(){};
(function(){var a={ANIMATION_CUBIC_BEZIER:"cubic-bezier(.3,.95,.5,1)",MAX_ANIMATION_TIME_MS:400};Td=Polymer({is:"paper-menu-button",behaviors:[Polymer.IronA11yKeysBehavior,Polymer.IronControlState],properties:{opened:{type:Boolean,value:!1,notify:!0,observer:"_openedChanged"},horizontalAlign:{type:String,value:"left",reflectToAttribute:!0},verticalAlign:{type:String,value:"top",reflectToAttribute:!0},dynamicAlign:{type:Boolean},horizontalOffset:{type:Number,value:0,notify:!0},verticalOffset:{type:Number,
value:0,notify:!0},noOverlap:{type:Boolean},noAnimations:{type:Boolean,value:!1},ignoreSelect:{type:Boolean,value:!1},closeOnActivate:{type:Boolean,value:!1},openAnimationConfig:{type:Object,value:function(){return[{name:"fade-in-animation",timing:{delay:100,duration:200}},{name:"paper-menu-grow-width-animation",timing:{delay:100,duration:150,easing:a.ANIMATION_CUBIC_BEZIER}},{name:"paper-menu-grow-height-animation",timing:{delay:100,duration:275,easing:a.ANIMATION_CUBIC_BEZIER}}]}},closeAnimationConfig:{type:Object,
value:function(){return[{name:"fade-out-animation",timing:{duration:150}},{name:"paper-menu-shrink-width-animation",timing:{delay:100,duration:50,easing:a.ANIMATION_CUBIC_BEZIER}},{name:"paper-menu-shrink-height-animation",timing:{duration:200,easing:"ease-in"}}]}},allowOutsideScroll:{type:Boolean,value:!1},restoreFocusOnClose:{type:Boolean,value:!0},_dropdownContent:{type:Object}},hostAttributes:{role:"group","aria-haspopup":"true"},listeners:{"iron-activate":"_onIronActivate","iron-select":"_onIronSelect"},
get contentElement(){return Polymer.dom(this.$.content).getDistributedNodes()[0]},toggle:function(){this.opened?this.close():this.open()},open:function(){this.disabled||this.$.dropdown.open()},close:function(){this.$.dropdown.close()},_onIronSelect:function(){this.ignoreSelect||this.close()},_onIronActivate:function(){this.closeOnActivate&&this.close()},_openedChanged:function(a,c){a?(this._dropdownContent=this.contentElement,this.fire("paper-dropdown-open")):null!=c&&this.fire("paper-dropdown-close")},
_disabledChanged:function(a){Polymer.IronControlState._disabledChanged.apply(this,arguments);a&&this.opened&&this.close()},__onIronOverlayCanceled:function(a){var b=a.detail;Polymer.dom(b);var d=this.$.trigger;-1<Polymer.dom(b).path.indexOf(d)&&a.preventDefault()}});Object.keys(a).forEach(function(b){Td[b]=a[b]});Polymer.PaperMenuButton=Td})();
</script>
</dom-module>






<iron-iconset-svg name="paper-dropdown-menu" size="24">
<svg><defs>
<g id="arrow-drop-down"><path d="M7 10l5 5 5-5z"></path></g>
</defs></svg>
</iron-iconset-svg>



<dom-module id="paper-dropdown-menu-shared-styles">
  <template>
    <style>
      :host {
        display: inline-block;
        position: relative;
        text-align: left;

        /* NOTE(cdata): Both values are needed, since some phones require the
         * value to be `transparent`.
         */
        -webkit-tap-highlight-color: rgba(0,0,0,0);
        -webkit-tap-highlight-color: transparent;

        --paper-input-container-input: {
          overflow: hidden;
          white-space: nowrap;
          text-overflow: ellipsis;
          max-width: 100%;
          box-sizing: border-box;
          cursor: pointer;
        };

        @apply(--paper-dropdown-menu);
      }

      :host([disabled]) {
        @apply(--paper-dropdown-menu-disabled);
      }

      :host([noink]) paper-ripple {
        display: none;
      }

      :host([no-label-float]) paper-ripple {
        top: 8px;
      }

      paper-ripple {
        top: 12px;
        left: 0px;
        bottom: 8px;
        right: 0px;

        @apply(--paper-dropdown-menu-ripple);
      }

      paper-menu-button {
        display: block;
        padding: 0;

        @apply(--paper-dropdown-menu-button);
      }

      paper-input {
        @apply(--paper-dropdown-menu-input);
      }

      iron-icon {
        color: var(--disabled-text-color);

        @apply(--paper-dropdown-menu-icon);
      }
    </style>
  </template>
</dom-module>




<dom-module id="paper-dropdown-menu">
  <template>
    <style include="paper-dropdown-menu-shared-styles"></style>

    
    <span role="button"></span>
    <paper-menu-button id="menuButton" vertical-align="[[verticalAlign]]" horizontal-align="[[horizontalAlign]]" dynamic-align="[[dynamicAlign]]" vertical-offset="[[_computeMenuVerticalOffset(noLabelFloat)]]" disabled="[[disabled]]" no-animations="[[noAnimations]]" on-iron-select="_onIronSelect" on-iron-deselect="_onIronDeselect" opened="{{opened}}" close-on-activate allow-outside-scroll="[[allowOutsideScroll]]" restore-focus-on-close="[[restoreFocusOnClose]]">
      <div class="dropdown-trigger">
        <paper-ripple></paper-ripple>
        
        <paper-input type="text" invalid="[[invalid]]" readonly disabled="[[disabled]]" value="[[selectedItemLabel]]" placeholder="[[placeholder]]" error-message="[[errorMessage]]" always-float-label="[[alwaysFloatLabel]]" no-label-float="[[noLabelFloat]]" label="[[label]]">
          <iron-icon icon="paper-dropdown-menu:arrow-drop-down" suffix></iron-icon>
        </paper-input>
      </div>
      <content id="content" select=".dropdown-content"></content>
    </paper-menu-button>
  </template>

  <script>//~~WEBPATH~~/paper-dropdown-menu/paper-dropdown-menu.html.js
Polymer({is:"paper-dropdown-menu",behaviors:[Polymer.IronButtonState,Polymer.IronControlState,Polymer.IronFormElementBehavior,Polymer.IronValidatableBehavior],properties:{selectedItemLabel:{type:String,notify:!0,readOnly:!0},selectedItem:{type:Object,notify:!0,readOnly:!0},value:{type:String,notify:!0,readOnly:!0},label:{type:String},placeholder:{type:String},errorMessage:{type:String},opened:{type:Boolean,notify:!0,value:!1,observer:"_openedChanged"},allowOutsideScroll:{type:Boolean,value:!1},noLabelFloat:{type:Boolean,
value:!1,reflectToAttribute:!0},alwaysFloatLabel:{type:Boolean,value:!1},noAnimations:{type:Boolean,value:!1},horizontalAlign:{type:String,value:"right"},verticalAlign:{type:String,value:"top"},dynamicAlign:{type:Boolean},restoreFocusOnClose:{type:Boolean,value:!0}},listeners:{tap:"_onTap"},keyBindings:{"up down":"open",esc:"close"},hostAttributes:{role:"combobox","aria-autocomplete":"none","aria-haspopup":"true"},observers:["_selectedItemChanged(selectedItem)"],attached:function(){var a=this.contentElement;
a&&a.selectedItem&&this._setSelectedItem(a.selectedItem)},get contentElement(){return Polymer.dom(this.$.content).getDistributedNodes()[0]},open:function(){this.$.menuButton.open()},close:function(){this.$.menuButton.close()},_onIronSelect:function(a){this._setSelectedItem(a.detail.item)},_onIronDeselect:function(){this._setSelectedItem(null)},_onTap:function(a){Polymer.Gestures.findOriginalTarget(a)===this&&this.open()},_selectedItemChanged:function(a){a=a?a.label||a.getAttribute("label")||a.textContent.trim():
"";this._setValue(a);this._setSelectedItemLabel(a)},_computeMenuVerticalOffset:function(a){return a?-4:8},_getValidity:function(){return this.disabled||!this.required||this.required&&!!this.value},_openedChanged:function(){var a=this.opened?"true":"false",b=this.contentElement;b&&b.setAttribute("aria-expanded",a)}});
</script>
</dom-module>















<dom-module id="vz-projector-legend">
<template>
<style include="vz-projector-styles"></style>
<style>
.item {
  display: flex;
  align-items: flex-start;
  margin-bottom: 10px;
}

.shape {
  width: 10px;
  height: 10px;
  margin-right: 10px;
  margin-top: 5px;
  border-radius: 50%;
}

.label {
  flex-grow: 1;
}

.gradient {
  width: 100%;
  height: 10px;
}

.gradient-boundaries {
  display: flex;
  justify-content: space-between;
}
</style>

<template is="dom-repeat" items="[[renderInfo.items]]">
  <div class="item">
    <div class="shape" style="background-color: [[item.color]];"></div>
    <div class="label">[[item.label]]</div>
    <div class="info" style="color: [[item.color]];">[[item.count]]</div>
  </div>
</template>

<template is="dom-if" if="[[renderInfo.thresholds]]">
  <svg class="gradient">
    <defs>
      <lineargradient id="gradient" x1="0%" y1="100%" x2="100%" y2="100%"></lineargradient>
    </defs>
    <rect height="10" style="fill: url('#gradient');"></rect>
  </svg>
  <div class="gradient-boundaries">
    <div>[[renderInfo.thresholds.0.value]]</div>
    <div>[[_getLastThreshold(renderInfo.thresholds)]]</div>
  </div>
</template>

</template>
<script>//~~WEBPATH~~/vz-projector/vz-projector-legend.js
var Ud=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b])};return function(b,c){function d(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),Vd=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}Ud(b,a);b.prototype._renderInfoChanged=function(){var a=this;null!=this.renderInfo&&this.renderInfo.thresholds&&
this.async(function(){return a.setupLinearGradient()})};b.prototype._getLastThreshold=function(){if(null!=this.renderInfo&&null!=this.renderInfo.thresholds)return this.renderInfo.thresholds[this.renderInfo.thresholds.length-1].value};b.prototype.getOffset=function(a){var b=this.renderInfo.thresholds[0].value;return(100*(a-b)/(this.renderInfo.thresholds[this.renderInfo.thresholds.length-1].value-b)).toFixed(2)+"%"};b.prototype.setupLinearGradient=function(){var a=this,b=this.querySelector("#gradient"),
e=this.querySelector("svg.gradient").clientWidth;this.querySelector("svg.gradient rect").style.width=e+"px";b.innerHTML="";this.renderInfo.thresholds.forEach(function(b){var c=document.createElementNS("http://www.w3.org/2000/svg","stop");c.setAttribute("offset",a.getOffset(b.value));c.setAttribute("stop-color",b.color)})};return b}(Polymer.Class({is:"vz-projector-legend",properties:{renderInfo:{type:Object,observer:"_renderInfoChanged"}}}));document.registerElement(Vd.prototype.is,Vd);
</script>
</dom-module>




<dom-module id="vz-projector-data-panel">
<template>
<style include="vz-projector-styles"></style>
<style>
.container {
  padding: 10px 20px 20px 20px;
}

input[type=file] {
  display: none;
}

.file-name {
  margin-right: 10px;
}

.dirs {
  color: rgba(0, 0, 0, 0.7);
  font-size: 12px;
}

.dirs table tr {
  vertical-align: top;
}

.dirs table tr td {
  padding-bottom: 10px;
}

paper-item {
  --paper-item-disabled: {
    border-bottom: 1px solid black;
    justify-content: center;
    font-size: 12px;
    line-height: normal;
    min-height: 0px;
  };
}

.item-details {
  margin-left: 5px;
  color: gray;
  font-size: 12px;
}

paper-dropdown-menu {
  width: 100%;
}

paper-dropdown-menu paper-item {
  justify-content: space-between;
}

.title {
  align-items: center;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  color: black;
  display: flex;
  font-weight: 500;
  height: 59px;
  padding-left: 20px;
}

#normalize-data-checkbox {
  margin: 10px 0;
}

#projector-config-template {
  --paper-input-container-input: {
    line-height: 13px;
    font-family: monospace;
    font-size: 12px;
  };
}

#generate-share-url {
  padding: 16px;
  margin-left: 24px;
}

#projector-share-button-container {
  margin: 10px 0;
}

.config-checkbox {
  display: inline-block;
  font-size: 11px;
  margin-left: 10px;
}

.projector-config-options {
  margin-top: 12px;
}

.projector-config-dialog-container {
  padding: 24px;
}

.code {
  background-color: #f7f7f7;
  display: table;
  font-family: monospace;
  margin-top: 7px;
  padding: 15px;
}

.delimiter {
  color: #B71C1C;
}

.upload-step {
  display: flex;
  justify-content: space-between;
  margin-bottom: 6px;
}

.upload-step paper-button {
  margin-left: 30px;
}

.step-label {
  color: rgb(38, 180, 226);
}

.scrollable-container {
  margin-top: 0;
  min-width: 400px;
}

#projectorConfigDialog p {
  margin: 8px 0 8px;
}

.data-step {
  margin-top: 40px;
}

.data-step-contents {
  display: table;
  width: 100%;
}

.data-step-contents-contents {
  display: table-cell;
  margin-top: 6px;
}

.data-step-contents-upload {
  display: table-cell;
  text-align: right;
  vertical-align: bottom;
}

#demo-data-buttons-container {
  display: none;
}

.colorby-container {
  margin-bottom: 10px;
}
</style>
<div class="title">DATA</div>
<div class="container">
  
  <template is="dom-if" if="[[_hasChoices(runNames)]]">
    <paper-dropdown-menu no-animations label="[[_getNumRunsLabel(runNames)]] found">
      <paper-listbox attr-for-selected="value" class="dropdown-content" selected="{{selectedRun}}">
        <template is="dom-repeat" items="[[runNames]]">
          <paper-item value="[[item]]" label="[[item]]">
            [[item]]
          </paper-item>
        </template>
      </paper-listbox>
    </paper-dropdown-menu>
  </template>

  <template is="dom-if" if="[[tensorNames]]">
    
    <paper-dropdown-menu no-animations label="[[_getNumTensorsLabel(tensorNames)]] found">
      <paper-listbox attr-for-selected="value" class="dropdown-content" selected="{{selectedTensor}}">
        <template is="dom-repeat" items="[[tensorNames]]">
          <paper-item value="[[item.name]]" label="[[item.name]]">
            [[item.name]]
            <span class="item-details">
              [[item.shape.0]]x[[item.shape.1]]
            </span>
          </paper-item>
        </template>
      </paper-listbox>
    </paper-dropdown-menu>
  </template>
  
  <template is="dom-if" if="[[_hasChoices(labelOptions)]]">
    <paper-dropdown-menu no-animations label="Label by">
      <paper-listbox attr-for-selected="value" class="dropdown-content" selected="{{selectedLabelOption}}">
        <template is="dom-repeat" items="[[labelOptions]]">
          <paper-item value="[[item]]" label="[[item]]">
            [[item]]
          </paper-item>
        </template>
      </paper-listbox>
    </paper-dropdown-menu>
  </template>

  
  <div hidden$="[[!_hasChoices(colorOptions)]]" class="colorby-container">
    <paper-dropdown-menu id="colorby" no-animations label="Color by">
      <paper-listbox attr-for-selected="value" class="dropdown-content" selected="{{selectedColorOptionName}}">
        <template is="dom-repeat" items="[[colorOptions]]">
          <paper-item class$="[[getSeparatorClass(item.isSeparator)]]" value="[[item.name]]" label="[[item.name]]" disabled="[[item.isSeparator]]">
            [[item.name]]
            <span class="item-details">[[item.desc]]</span>
          </paper-item>
        </template>
      </paper-listbox>
    </paper-dropdown-menu>
    <div hidden$="[[!showForceCategoricalColorsCheckbox]]">
      <paper-checkbox id="force-categorical-checkbox"></paper-checkbox>
      Use categorical coloring
      <paper-icon-button icon="help" class="help-icon"></paper-icon-button>
      <paper-tooltip position="bottom" animation-delay="0" fit-to-visible-bounds>
        For metadata fields that have many unique values we use a gradient color map
        by default. This checkbox allows you to force categorical coloring by a given
        metadata field.
      </paper-tooltip>
    </div>
    <template dom-if="[[colorLegendRenderInfo]]">
      <vz-projector-legend render-info="[[colorLegendRenderInfo]]"></vz-projector-legend>
    </template>
  </div>
  <paper-checkbox id="normalize-data-checkbox" checked="{{normalizeData}}">
    Sphereize data
    <paper-icon-button icon="help" class="help-icon"></paper-icon-button>
    <paper-tooltip position="bottom" animation-delay="0" fit-to-visible-bounds>
      The data is normalized by shifting each point by the centroid and making
      it unit norm.
    </paper-tooltip>
  </paper-checkbox>
  <p id="demo-data-buttons-container">
    <span>
      <paper-tooltip position="bottom" animation-delay="0" fit-to-visible-bounds>
        Load data from your computer
      </paper-tooltip>
      <paper-button id="upload" class="ink-button" onclick="dataDialog.open()">Load data</paper-button>
    </span>
    <span id="publish-container">
      <paper-tooltip position="bottom" animation-delay="0" fit-to-visible-bounds>
        Publish your embedding visualization and data
      </paper-tooltip>
      <paper-button id="host-embedding" class="ink-button" onclick="projectorConfigDialog.open()">Publish</paper-button>
    </span>
  
  <div>
    <paper-dialog id="dataDialog" with-backdrop>
      <h2>Load data from your computer</h2>
      <paper-dialog-scrollable class="scrollable-container">
        <div class="data-step" id="upload-tensors-step-container">
          <div class="upload-step">
            <div>
                <b><span class="step-label">Step 1:</span> Load a TSV file of vectors.</b>
            </div>
          </div>
          <div class="data-step-contents">
            <div class="data-step-contents-contents">
              Example of 3 vectors with dimension 4:
              <div class="code">
                0.1<span class="delimiter">\t</span>0.2<span class="delimiter">\t</span>0.5<span class="delimiter">\t</span>0.9<br>
                0.2<span class="delimiter">\t</span>0.1<span class="delimiter">\t</span>5.0<span class="delimiter">\t</span>0.2<br>
                0.4<span class="delimiter">\t</span>0.1<span class="delimiter">\t</span>7.0<span class="delimiter">\t</span>0.8
              </div>
            </div>
            <div class="data-step-contents-upload">
              <paper-button id="upload-tensors" title="Choose a TSV tensor file">Choose file</paper-button>
              <input type="file" id="file" name="file">
            </div>
          </div>
        </div>
        <div class="data-step">
          <div class="upload-step">
            <div>
                <span class="step-label" id="upload-metadata-label"><b>Step 2</b> (optional):</span> <b>Load a TSV file of metadata.</b>
            </div>
          </div>
          <div class="data-step-contents">
            <div class="data-step-contents-contents">
              Example of 3 data points and 2 columns.<br>
              <i>Note: If there is more than one column, the first row will be parsed as column labels.</i>
              <div class="code">
                <b>Pokémon<span class="delimiter">\t</span>Species</b><br>
                Wartortle<span class="delimiter">\t</span>Turtle<br>
                Venusaur<span class="delimiter">\t</span>Seed<br>
                Charmeleon<span class="delimiter">\t</span>Flame
              </div>
            </div>
            <div class="data-step-contents-upload">
              <paper-button id="upload-metadata" title="Choose a TSV metadata file" class="ink-button">Choose file</paper-button>
              <input type="file" id="file-metadata" name="file-metadata">
            </div>
          </div>
        </div>
      </paper-dialog-scrollable>
      <div class="dismiss-dialog-note">Click outside to dismiss.</div>
    </paper-dialog>
    <paper-dialog id="projectorConfigDialog" with-backdrop>
      <h2>Publish your embedding visualization and data</h2>
      <paper-dialog-scrollable class="scrollable-container">
        <div>
          <p>
            If you'd like to share your visualization with the world, follow these simple steps.
            See <a target="_blank" href="https://www.tensorflow.org/get_started/embedding_viz">this tutorial</a> for more.
          
          <h4><span class="step-label">Step 1:</span> Make data public</h4>
          <p>
            Host tensors, metadata, sprite image, and bookmarks TSV files <i>publicly</i> on the web.
          
          <p>
            One option is using a <a target="_blank" href="https://gist.github.com/">github gist</a>.
            If you choose this approach, make sure to link directly to the raw file.
          
        </div>
        <div>
          <h4><span class="step-label">Step 2:</span> Projector config</h4>
          <div class="projector-config-options">
            <i>Optional:</i>
            <div class="config-checkbox">
              <paper-checkbox id="config-metadata-checkbox" checked>Metadata</paper-checkbox>
            </div>
            <div class="config-checkbox">
              <paper-checkbox id="config-sprite-checkbox">Sprite</paper-checkbox>
            </div>
            <div class="config-checkbox">
              <paper-checkbox id="config-bookmarks-checkbox">Bookmarks</paper-checkbox>
            </div>
          </div>
        </div>
        <paper-textarea id="projector-config-template" label="template_projector_config.json"></paper-textarea>
        <div>
          <h4><span class="step-label">Step 3:</span> Host projector config</h4>
          After you have hosted the projector config JSON file you built above, paste the URL to the config below.
        </div>
        <paper-input id="projector-config-url" label="Path to projector config"></paper-input>
        <paper-input id="projector-share-url" label="Your shareable URL" readonly></paper-input>
        <div id="projector-share-button-container">
          <a target="_blank" id="projector-share-url-link">
            <paper-button title="Test your shareable URL" class="ink-button">Test your shareable URL</paper-button>
          </a>
        </div>
      </paper-dialog-scrollable>
      <div class="dismiss-dialog-note">Click outside to dismiss.</div>
    </paper-dialog>
  </div>
  <div class="dirs">
    <table>
      <tr>
        <td>Checkpoint:</td>
        <td><span id="checkpoint-file"></span></td>
      </tr>
      <tr>
        <td>Metadata:</td>
        <td><span id="metadata-file"></span></td>
      </tr>
    </table>
  </div>
</div>

</template>
<script>//~~WEBPATH~~/vz-projector/vz-projector-data-panel.js
var Wd=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b])};return function(b,c){function d(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),Xd=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.forceCategoricalColoring=!1;return b}Wd(b,a);b.prototype.ready=function(){this.normalizeData=!0};
b.prototype.initialize=function(a,b){var c=this;this.projector=a;this.dataProvider=b;this.setupUploadButtons();this.querySelector("#normalize-data-checkbox").addEventListener("change",function(){c.projector.setNormalizeData(c.normalizeData)});var d=this.querySelector("#force-categorical-checkbox");d.addEventListener("change",function(){c.setForceCategoricalColoring(d.checked)});this.dataProvider.retrieveRuns(function(a){c.runNames=a;0<c.runNames.length&&(c.selectedRun=a[0])})};b.prototype.setForceCategoricalColoring=
function(a){this.forceCategoricalColoring=a;this.querySelector("#force-categorical-checkbox").checked=this.forceCategoricalColoring;this.updateMetadataUI(this.spriteAndMetadata.stats,this.metadataFile);this._selectedColorOptionNameChanged()};b.prototype.getSeparatorClass=function(a){return a?"separator":null};b.prototype.metadataChanged=function(a,b){this.spriteAndMetadata=a;this.metadataFile=b;this.updateMetadataUI(this.spriteAndMetadata.stats,this.metadataFile);this.selectedColorOptionName=this.colorOptions[0].name};
b.prototype.addWordBreaks=function(a){return null==a?"":a.replace(/([\/=-_,])/g,"$1\x3cwbr\x3e")};b.prototype.updateMetadataUI=function(a,b){var c=this,d=this.querySelector("#metadata-file");d.innerHTML=this.addWordBreaks(b);d.title=b;var h=-1;this.labelOptions=a.map(function(a,b){a.isNumeric||-1!==h||(h=b);return a.name});this.selectedLabelOption=this.labelOptions[Math.max(0,h)];b=[{name:"No color map"}];a=a.filter(function(a){return!a.tooManyUniqueValues||a.isNumeric}).map(function(a){var b=c.forceCategoricalColoring||
!a.tooManyUniqueValues;if(b){var d=d3.scaleOrdinal(d3.schemeCategory20);var e=d.range(),g=e.map(function(a,b){return e[3*b%e.length]});var h=a.uniqueEntries;d.range(g).domain(h.map(function(a){return a.label}))}else{var k=[{color:"#ffffdd",value:a.min},{color:"#1f2d86",value:a.max}];d=d3.scaleLinear().domain(k.map(function(a){return a.value})).range(k.map(function(a){return a.color}))}return{name:a.name,desc:b?a.uniqueEntries.length+(20<a.uniqueEntries.length?" non-unique":"")+" colors":"gradient",
map:d,items:h,thresholds:k,tooManyUniqueValues:a.tooManyUniqueValues}});0<a.length&&b.push({name:"Metadata",isSeparator:!0});this.colorOptions=b.concat(a)};b.prototype.setNormalizeData=function(a){this.normalizeData=a};b.prototype._selectedTensorChanged=function(){var a=this;this.projector.updateDataSet(null,null,null);null!=this.selectedTensor&&(this.dataProvider.retrieveTensor(this.selectedRun,this.selectedTensor,function(b){var c=a.getEmbeddingInfoByName(a.selectedTensor).metadataPath;a.dataProvider.retrieveSpriteAndMetadata(a.selectedRun,
a.selectedTensor,function(d){a.projector.updateDataSet(b,d,c)})}),this.projector.setSelectedTensor(this.selectedRun,this.getEmbeddingInfoByName(this.selectedTensor)))};b.prototype._selectedRunChanged=function(){var a=this;this.dataProvider.retrieveProjectorConfig(this.selectedRun,function(b){a.projectorConfig=b;b=a.projectorConfig.embeddings.map(function(a){return a.tensorName}).filter(function(b){b=a.getEmbeddingInfoByName(b).tensorShape;return 2===b.length&&1<b[0]&&1<b[1]}).sort(function(b,c){var d=
a.getEmbeddingInfoByName(b),e=a.getEmbeddingInfoByName(c),g=!!d.metadataPath,h=!!e.metadataPath;if(!(!g&&!h||g&&h))return d.metadataPath?-1:1;g=Hc(c);h=Hc(b);if(!(!h&&!g||h&&g))return g?-1:1;d=d.tensorShape[0];e=e.tensorShape[0];return d!==e?e-d:b<=c?-1:1});a.tensorNames=b.map(function(b){return{name:b,shape:a.getEmbeddingInfoByName(b).tensorShape}});var c=a.addWordBreaks(a.projectorConfig.modelCheckpointPath),d=a.querySelector("#checkpoint-file");d.innerHTML=c;d.title=a.projectorConfig.modelCheckpointPath;
b="demo"===a.projector.servingMode?a.projectorConfig.embeddings[0].tensorName:b[0];a.selectedTensor===b?a._selectedTensorChanged():a.selectedTensor=b})};b.prototype._selectedLabelOptionChanged=function(){this.projector.setSelectedLabelOption(this.selectedLabelOption)};b.prototype._selectedColorOptionNameChanged=function(){for(var a,b=0;b<this.colorOptions.length;b++)if(this.colorOptions[b].name===this.selectedColorOptionName){a=this.colorOptions[b];break}a&&(this.showForceCategoricalColorsCheckbox=
!!a.tooManyUniqueValues,this.colorLegendRenderInfo=null==a.map?null:a.items?{items:a.items.map(function(b){return{color:a.map(b.label),label:b.label,count:b.count}}),thresholds:null}:{items:null,thresholds:a.thresholds},this.projector.setSelectedColorOption(a))};b.prototype.tensorWasReadFromFile=function(a,b){var c=this;gd(a,function(a){var d=c.querySelector("#checkpoint-file");d.innerText=b;d.title=b;c.projector.updateDataSet(a)})};b.prototype.metadataWasReadFromFile=function(a,b){var c=this;id(a,
function(a){c.projector.updateDataSet(c.projector.dataSet,a,b)})};b.prototype.getEmbeddingInfoByName=function(a){for(var b=0;b<this.projectorConfig.embeddings.length;b++){var c=this.projectorConfig.embeddings[b];if(c.tensorName===a)return c}};b.prototype.setupUploadButtons=function(){var a=this,b=this.querySelector("#file");b.onchange=function(){var c=b.files[0];b.value="";var d=new FileReader;d.onload=function(){a.tensorWasReadFromFile(d.result,c.name)};d.readAsArrayBuffer(c)};this.querySelector("#upload-tensors").onclick=
function(){b.click()};var e=this.querySelector("#file-metadata");e.onchange=function(){var b=e.files[0];e.value="";var c=new FileReader;c.onload=function(){a.metadataWasReadFromFile(c.result,b.name)};c.readAsArrayBuffer(b)};this.querySelector("#upload-metadata").onclick=function(){e.click()};"demo"!==this.projector.servingMode&&(this.$$("#publish-container").style.display="none",this.$$("#upload-tensors-step-container").style.display="none",this.$$("#upload-metadata-label").style.display="none");
this.$$("#demo-data-buttons-container").style.display="block";var g=this.$$("#projector-config-template"),h={embeddings:[{tensorName:"My tensor",tensorShape:[1E3,50],tensorPath:"https://raw.githubusercontent.com/.../tensors.tsv",metadataPath:"https://raw.githubusercontent.com/.../optional.metadata.tsv"}]};this.setProjectorConfigTemplateJson(g,h);var k=this.$$("#config-sprite-checkbox");k.onchange=function(){k.checked?h.embeddings[0].sprite={imagePath:"https://github.com/.../optional.sprite.png",singleImageDim:[32,
32]}:delete h.embeddings[0].sprite;a.setProjectorConfigTemplateJson(g,h)};var l=this.$$("#config-bookmarks-checkbox");l.onchange=function(){l.checked?h.embeddings[0].bookmarksPath="https://raw.githubusercontent.com/.../bookmarks.txt":delete h.embeddings[0].bookmarksPath;a.setProjectorConfigTemplateJson(g,h)};var m=this.$$("#config-metadata-checkbox");m.onchange=function(){m.checked?h.embeddings[0].metadataPath="https://raw.githubusercontent.com/.../optional.metadata.tsv":delete h.embeddings[0].metadataPath;
a.setProjectorConfigTemplateJson(g,h)};var p=this.$$("#projector-config-url"),r=this.$$("#projector-share-url"),n=this.$$("#projector-share-url-link");p.onchange=function(){var a=location.protocol+"//"+location.host+location.pathname+"?config\x3d"+p.value;r.value=a;n.href=a}};b.prototype.setProjectorConfigTemplateJson=function(a,b){a.value=JSON.stringify(b,null,2)};b.prototype._getNumTensorsLabel=function(){return 1===this.tensorNames.length?"1 tensor":this.tensorNames.length+" tensors"};b.prototype._getNumRunsLabel=
function(){return 1===this.runNames.length?"1 run":this.runNames.length+" runs"};b.prototype._hasChoices=function(a){return 1<a.length};return b}(Polymer.Class({is:"vz-projector-data-panel",properties:{selectedTensor:{type:String,observer:"_selectedTensorChanged"},selectedRun:{type:String,observer:"_selectedRunChanged"},selectedColorOptionName:{type:String,notify:!0,observer:"_selectedColorOptionNameChanged"},selectedLabelOption:{type:String,notify:!0,observer:"_selectedLabelOptionChanged"},normalizeData:Boolean,
showForceCategoricalColorsCheckbox:Boolean}}));document.registerElement(Xd.prototype.is,Xd);
</script>
</dom-module>








<script>//~~WEBPATH~~/iron-range-behavior/iron-range-behavior.html.js
Polymer.IronRangeBehavior={properties:{value:{type:Number,value:0,notify:!0,reflectToAttribute:!0},min:{type:Number,value:0,notify:!0},max:{type:Number,value:100,notify:!0},step:{type:Number,value:1,notify:!0},ratio:{type:Number,value:0,readOnly:!0,notify:!0}},observers:["_update(value, min, max, step)"],_calcRatio:function(a){return(this._clampValue(a)-this.min)/(this.max-this.min)},_clampValue:function(a){return Math.min(this.max,Math.max(this.min,this._calcStep(a)))},_calcStep:function(a){a=parseFloat(a);
return this.step?(Math.round((a+this.min)/this.step)-this.min/this.step)/(1/this.step):a},_validateValue:function(){var a=this._clampValue(this.value);this.value=this.oldValue=isNaN(a)?this.oldValue:a;return this.value!==a},_update:function(){this._validateValue();this._setRatio(100*this._calcRatio(this.value))}};
</script>










<dom-module id="paper-progress">
  <template>
    <style>
      :host {
        display: block;
        width: 200px;
        position: relative;
        overflow: hidden;
      }

      :host([hidden]), [hidden] {
        display: none !important;
      }

      #progressContainer {
        @apply --paper-progress-container;
        position: relative;
      }

      #progressContainer,
      /* the stripe for the indeterminate animation*/
      .indeterminate::after {
        height: var(--paper-progress-height, 4px);
      }

      #primaryProgress,
      #secondaryProgress,
      .indeterminate::after {
        @apply --layout-fit;
      }

      #progressContainer,
      .indeterminate::after {
        background: var(--paper-progress-container-color, var(--google-grey-300));
      }

      :host(.transiting) #primaryProgress,
      :host(.transiting) #secondaryProgress {
        -webkit-transition-property: -webkit-transform;
        transition-property: transform;

        /* Duration */
        -webkit-transition-duration: var(--paper-progress-transition-duration, 0.08s);
        transition-duration: var(--paper-progress-transition-duration, 0.08s);

        /* Timing function */
        -webkit-transition-timing-function: var(--paper-progress-transition-timing-function, ease);
        transition-timing-function: var(--paper-progress-transition-timing-function, ease);

        /* Delay */
        -webkit-transition-delay: var(--paper-progress-transition-delay, 0s);
        transition-delay: var(--paper-progress-transition-delay, 0s);
      }

      #primaryProgress,
      #secondaryProgress {
        @apply --layout-fit;
        -webkit-transform-origin: left center;
        transform-origin: left center;
        -webkit-transform: scaleX(0);
        transform: scaleX(0);
        will-change: transform;
      }

      #primaryProgress {
        background: var(--paper-progress-active-color, var(--google-green-500));
      }

      #secondaryProgress {
        background: var(--paper-progress-secondary-color, var(--google-green-100));
      }

      :host([disabled]) #primaryProgress {
        background: var(--paper-progress-disabled-active-color, var(--google-grey-500));
      }

      :host([disabled]) #secondaryProgress {
        background: var(--paper-progress-disabled-secondary-color, var(--google-grey-300));
      }

      :host(:not([disabled])) #primaryProgress.indeterminate {
        -webkit-transform-origin: right center;
        transform-origin: right center;
        -webkit-animation: indeterminate-bar var(--paper-progress-indeterminate-cycle-duration, 2s) linear infinite;
        animation: indeterminate-bar var(--paper-progress-indeterminate-cycle-duration, 2s) linear infinite;
      }

      :host(:not([disabled])) #primaryProgress.indeterminate::after {
        content: "";
        -webkit-transform-origin: center center;
        transform-origin: center center;

        -webkit-animation: indeterminate-splitter var(--paper-progress-indeterminate-cycle-duration, 2s) linear infinite;
        animation: indeterminate-splitter var(--paper-progress-indeterminate-cycle-duration, 2s) linear infinite;
      }

      @-webkit-keyframes indeterminate-bar {
        0% {
          -webkit-transform: scaleX(1) translateX(-100%);
        }
        50% {
          -webkit-transform: scaleX(1) translateX(0%);
        }
        75% {
          -webkit-transform: scaleX(1) translateX(0%);
          -webkit-animation-timing-function: cubic-bezier(.28,.62,.37,.91);
        }
        100% {
          -webkit-transform: scaleX(0) translateX(0%);
        }
      }

      @-webkit-keyframes indeterminate-splitter {
        0% {
          -webkit-transform: scaleX(.75) translateX(-125%);
        }
        30% {
          -webkit-transform: scaleX(.75) translateX(-125%);
          -webkit-animation-timing-function: cubic-bezier(.42,0,.6,.8);
        }
        90% {
          -webkit-transform: scaleX(.75) translateX(125%);
        }
        100% {
          -webkit-transform: scaleX(.75) translateX(125%);
        }
      }

      @keyframes indeterminate-bar {
        0% {
          transform: scaleX(1) translateX(-100%);
        }
        50% {
          transform: scaleX(1) translateX(0%);
        }
        75% {
          transform: scaleX(1) translateX(0%);
          animation-timing-function: cubic-bezier(.28,.62,.37,.91);
        }
        100% {
          transform: scaleX(0) translateX(0%);
        }
      }

      @keyframes indeterminate-splitter {
        0% {
          transform: scaleX(.75) translateX(-125%);
        }
        30% {
          transform: scaleX(.75) translateX(-125%);
          animation-timing-function: cubic-bezier(.42,0,.6,.8);
        }
        90% {
          transform: scaleX(.75) translateX(125%);
        }
        100% {
          transform: scaleX(.75) translateX(125%);
        }
      }
    </style>

    <div id="progressContainer">
      <div id="secondaryProgress" hidden$="[[_hideSecondaryProgress(secondaryRatio)]]"></div>
      <div id="primaryProgress"></div>
    </div>
  </template>
</dom-module>

<script>//~~WEBPATH~~/paper-progress/paper-progress.html.js
Polymer({is:"paper-progress",behaviors:[Polymer.IronRangeBehavior],properties:{secondaryProgress:{type:Number,value:0},secondaryRatio:{type:Number,value:0,readOnly:!0},indeterminate:{type:Boolean,value:!1,observer:"_toggleIndeterminate"},disabled:{type:Boolean,value:!1,reflectToAttribute:!0,observer:"_disabledChanged"}},observers:["_progressChanged(secondaryProgress, value, min, max)"],hostAttributes:{role:"progressbar"},_toggleIndeterminate:function(a){this.toggleClass("indeterminate",a,this.$.primaryProgress)},
_transformProgress:function(a,b){a.style.transform=a.style.webkitTransform="scaleX("+b/100+")"},_mainRatioChanged:function(a){this._transformProgress(this.$.primaryProgress,a)},_progressChanged:function(a,b,c,d){a=this._clampValue(a);b=this._clampValue(b);var e=100*this._calcRatio(a),g=100*this._calcRatio(b);this._setSecondaryRatio(e);this._transformProgress(this.$.secondaryProgress,e);this._transformProgress(this.$.primaryProgress,g);this.secondaryProgress=a;this.setAttribute("aria-valuenow",b);
this.setAttribute("aria-valuemin",c);this.setAttribute("aria-valuemax",d)},_disabledChanged:function(a){this.setAttribute("aria-disabled",a?"true":"false")},_hideSecondaryProgress:function(a){return 0===a}});
</script>





<dom-module id="paper-slider">
  <template strip-whitespace>
    <style>
      :host {
        @apply(--layout);
        @apply(--layout-justified);
        @apply(--layout-center);
        width: 200px;
        cursor: default;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
        --paper-progress-active-color: var(--paper-slider-active-color, --google-blue-700);
        --paper-progress-secondary-color: var(--paper-slider-secondary-color, --google-blue-300);
        --paper-progress-disabled-active-color: var(--paper-slider-disabled-active-color, --paper-grey-400);
        --paper-progress-disabled-secondary-color: var(--paper-slider-disabled-secondary-color, --paper-grey-400);
        --calculated-paper-slider-height: var(--paper-slider-height, 2px);
      }

      /* focus shows the ripple */
      :host(:focus) {
        outline: none;
      }

      #sliderContainer {
        position: relative;
        width: 100%;
        height: calc(30px + var(--calculated-paper-slider-height));
        margin-left: calc(15px + var(--calculated-paper-slider-height)/2);
        margin-right: calc(15px + var(--calculated-paper-slider-height)/2);
      }

      #sliderContainer:focus {
        outline: 0;
      }

      #sliderContainer.editable {
        margin-top: 12px;
        margin-bottom: 12px;
      }

      .bar-container {
        position: absolute;
        top: 0;
        bottom: 0;
        left: 0;
        right: 0;
        overflow: hidden;
      }

      .ring > .bar-container {
        left: calc(5px + var(--calculated-paper-slider-height)/2);
        transition: left 0.18s ease;
      }

      .ring.expand.dragging > .bar-container {
        transition: none;
      }

      .ring.expand:not(.pin) > .bar-container {
        left: calc(8px + var(--calculated-paper-slider-height)/2);
      }

      #sliderBar {
        padding: 15px 0;
        width: 100%;
        background-color: var(--paper-slider-bar-color, transparent);
        --paper-progress-container-color: var(--paper-slider-container-color, --paper-grey-400);
        --paper-progress-height: var(--calculated-paper-slider-height);
      }

      .slider-markers {
        position: absolute;
        top: calc(14px + var(--paper-slider-height,2px)/2);
        height: var(--calculated-paper-slider-height);
        left: 0;
        right: -1px;
        box-sizing: border-box;
        pointer-events: none;
        @apply(--layout-horizontal);
      }

      .slider-marker {
        @apply(--layout-flex);
      }
      .slider-markers::after,
      .slider-marker::after {
        content: "";
        display: block;
        margin-left: -1px;
        width: 2px;
        height: var(--calculated-paper-slider-height);
        border-radius: 50%;
        background-color: var(--paper-slider-markers-color, #000);
      }

      .slider-knob {
        position: absolute;
        left: 0;
        top: 0;
        margin-left: calc(-15px - var(--calculated-paper-slider-height)/2);
        width: calc(30px + var(--calculated-paper-slider-height));
        height: calc(30px + var(--calculated-paper-slider-height));
      }

      .transiting > .slider-knob {
        transition: left 0.08s ease;
      }

      .slider-knob:focus {
        outline: none;
      }

      .slider-knob.dragging {
        transition: none;
      }

      .snaps > .slider-knob.dragging {
        transition: -webkit-transform 0.08s ease;
        transition: transform 0.08s ease;
      }

      .slider-knob-inner {
        margin: 10px;
        width: calc(100% - 20px);
        height: calc(100% - 20px);
        background-color: var(--paper-slider-knob-color, --google-blue-700);
        border: 2px solid var(--paper-slider-knob-color, --google-blue-700);
        border-radius: 50%;

        -moz-box-sizing: border-box;
        box-sizing: border-box;

        transition-property: -webkit-transform, background-color, border;
        transition-property: transform, background-color, border;
        transition-duration: 0.18s;
        transition-timing-function: ease;
      }

      .expand:not(.pin) > .slider-knob > .slider-knob-inner {
        -webkit-transform: scale(1.5);
        transform: scale(1.5);
      }

      .ring > .slider-knob > .slider-knob-inner {
        background-color: var(--paper-slider-knob-start-color, transparent);
        border: 2px solid var(--paper-slider-knob-start-border-color, --paper-grey-400);
      }

      .slider-knob-inner::before {
        background-color: var(--paper-slider-pin-color, --google-blue-700);
      }

      .pin > .slider-knob > .slider-knob-inner::before {
        content: "";
        position: absolute;
        top: 0;
        left: 50%;
        margin-left: -13px;
        width: 26px;
        height: 26px;
        border-radius: 50% 50% 50% 0;

        -webkit-transform: rotate(-45deg) scale(0) translate(0);
        transform: rotate(-45deg) scale(0) translate(0);
      }

      .slider-knob-inner::before,
      .slider-knob-inner::after {
        transition: -webkit-transform .18s ease, background-color .18s ease;
        transition: transform .18s ease, background-color .18s ease;
      }

      .pin.ring > .slider-knob > .slider-knob-inner::before {
        background-color: var(--paper-slider-pin-start-color, --paper-grey-400);
      }

      .pin.expand > .slider-knob > .slider-knob-inner::before {
        -webkit-transform: rotate(-45deg) scale(1) translate(17px, -17px);
        transform: rotate(-45deg) scale(1) translate(17px, -17px);
      }

      .pin > .slider-knob > .slider-knob-inner::after {
        content: attr(value);
        position: absolute;
        top: 0;
        left: 50%;
        margin-left: -16px;
        width: 32px;
        height: 26px;
        text-align: center;
        color: var(--paper-slider-font-color, #fff);
        font-size: 10px;

        -webkit-transform: scale(0) translate(0);
        transform: scale(0) translate(0);
      }

      .pin.expand > .slider-knob > .slider-knob-inner::after {
        -webkit-transform: scale(1) translate(0, -17px);
        transform: scale(1) translate(0, -17px);
      }

      /* paper-input */
      .slider-input {
        width: 50px;
        overflow: hidden;
        --paper-input-container-input: {
          text-align: center;
        };
        @apply(--paper-slider-input);
      }

      /* disabled state */
      #sliderContainer.disabled {
        pointer-events: none;
      }

      .disabled > .slider-knob > .slider-knob-inner {
        background-color: var(--paper-slider-disabled-knob-color, --paper-grey-400);
        border: 2px solid var(--paper-slider-disabled-knob-color, --paper-grey-400);
        -webkit-transform: scale3d(0.75, 0.75, 1);
        transform: scale3d(0.75, 0.75, 1);
      }

      .disabled.ring > .slider-knob > .slider-knob-inner {
        background-color: var(--paper-slider-knob-start-color, transparent);
        border: 2px solid var(--paper-slider-knob-start-border-color, --paper-grey-400);
      }

      paper-ripple {
        color: var(--paper-slider-knob-color, --google-blue-700);
      }
    </style>

    <div id="sliderContainer" class$="[[_getClassNames(disabled, pin, snaps, immediateValue, min, expand, dragging, transiting, editable)]]">
      <div class="bar-container">
        <paper-progress disabled$="[[disabled]]" id="sliderBar" aria-hidden="true" min="[[min]]" max="[[max]]" step="[[step]]" value="[[immediateValue]]" secondary-progress="[[secondaryProgress]]" on-down="_bardown" on-up="_resetKnob" on-track="_onTrack">
        </paper-progress>
      </div>

      <template is="dom-if" if="[[snaps]]">
        <div class="slider-markers">
          <template is="dom-repeat" items="[[markers]]">
            <div class="slider-marker"></div>
          </template>
        </div>
      </template>

      <div id="sliderKnob" class="slider-knob" on-down="_knobdown" on-up="_resetKnob" on-track="_onTrack" on-transitionend="_knobTransitionEnd">
          <div class="slider-knob-inner" value$="[[immediateValue]]"></div>
      </div>
    </div>

    <template is="dom-if" if="[[editable]]">
      <paper-input id="input" type="number" step="[[step]]" min="[[min]]" max="[[max]]" class="slider-input" disabled$="[[disabled]]" value="[[immediateValue]]" on-change="_changeValue" on-keydown="_inputKeyDown" no-label-float>
      </paper-input>
    </template>
  </template>

  <script>//~~WEBPATH~~/paper-slider/paper-slider.html.js
Polymer({is:"paper-slider",behaviors:[Polymer.IronA11yKeysBehavior,Polymer.IronFormElementBehavior,Polymer.PaperInkyFocusBehavior,Polymer.IronRangeBehavior],properties:{snaps:{type:Boolean,value:!1,notify:!0},pin:{type:Boolean,value:!1,notify:!0},secondaryProgress:{type:Number,value:0,notify:!0,observer:"_secondaryProgressChanged"},editable:{type:Boolean,value:!1},immediateValue:{type:Number,value:0,readOnly:!0,notify:!0},maxMarkers:{type:Number,value:0,notify:!0},expand:{type:Boolean,value:!1,readOnly:!0},
dragging:{type:Boolean,value:!1,readOnly:!0},transiting:{type:Boolean,value:!1,readOnly:!0},markers:{type:Array,readOnly:!0,value:function(){return[]}}},observers:["_updateKnob(value, min, max, snaps, step)","_valueChanged(value)","_immediateValueChanged(immediateValue)","_updateMarkers(maxMarkers, min, max, snaps)"],hostAttributes:{role:"slider",tabindex:0},keyBindings:{"left down pagedown home":"_decrementKey","right up pageup end":"_incrementKey"},increment:function(){this.value=this._clampValue(this.value+
this.step)},decrement:function(){this.value=this._clampValue(this.value-this.step)},_updateKnob:function(a,b,c){this.setAttribute("aria-valuemin",b);this.setAttribute("aria-valuemax",c);this.setAttribute("aria-valuenow",a);this._positionKnob(this._calcRatio(a))},_valueChanged:function(){this.fire("value-change")},_immediateValueChanged:function(){this.dragging?this.fire("immediate-value-change"):this.value=this.immediateValue},_secondaryProgressChanged:function(){this.secondaryProgress=this._clampValue(this.secondaryProgress)},
_expandKnob:function(){this._setExpand(!0)},_resetKnob:function(){this.cancelDebouncer("expandKnob");this._setExpand(!1)},_positionKnob:function(a){this._setImmediateValue(this._calcStep(this._calcKnobPosition(a)));this._setRatio(this._calcRatio(this.immediateValue));this.$.sliderKnob.style.left=100*this.ratio+"%";this.dragging&&(this._knobstartx=this.ratio*this._w,this.translate3d(0,0,0,this.$.sliderKnob))},_calcKnobPosition:function(a){return(this.max-this.min)*a+this.min},_onTrack:function(a){a.stopPropagation();
switch(a.detail.state){case "start":this._trackStart(a);break;case "track":this._trackX(a);break;case "end":this._trackEnd()}},_trackStart:function(){this._w=this.$.sliderBar.offsetWidth;this._knobstartx=this._startx=this._x=this.ratio*this._w;this._minx=-this._startx;this._maxx=this._w-this._startx;this.$.sliderKnob.classList.add("dragging");this._setDragging(!0)},_trackX:function(a){this.dragging||this._trackStart(a);this._x=this._startx+Math.min(this._maxx,Math.max(this._minx,a.detail.dx));this._setImmediateValue(this._calcStep(this._calcKnobPosition(this._x/
this._w)));this.translate3d(this._calcRatio(this.immediateValue)*this._w-this._knobstartx+"px",0,0,this.$.sliderKnob)},_trackEnd:function(){var a=this.$.sliderKnob.style;this.$.sliderKnob.classList.remove("dragging");this._setDragging(!1);this._resetKnob();this.value=this.immediateValue;a.transform=a.webkitTransform="";this.fire("change")},_knobdown:function(a){this._expandKnob();a.preventDefault();this.focus()},_bardown:function(a){this._w=this.$.sliderBar.offsetWidth;var b=this.$.sliderBar.getBoundingClientRect(),
b=(a.detail.x-b.left)/this._w,c=this.ratio;this._setTransiting(!0);this._positionKnob(b);this.debounce("expandKnob",this._expandKnob,60);c===this.ratio&&this._setTransiting(!1);this.async(function(){this.fire("change")});a.preventDefault();this.focus()},_knobTransitionEnd:function(a){a.target===this.$.sliderKnob&&this._setTransiting(!1)},_updateMarkers:function(a,b,c,d){d||this._setMarkers([]);b=Math.round((c-b)/this.step);b>a&&(b=a);if(0>b||!isFinite(b))b=0;this._setMarkers(Array(b))},_mergeClasses:function(a){return Object.keys(a).filter(function(b){return a[b]}).join(" ")},
_getClassNames:function(){return this._mergeClasses({disabled:this.disabled,pin:this.pin,snaps:this.snaps,ring:this.immediateValue<=this.min,expand:this.expand,dragging:this.dragging,transiting:this.transiting,editable:this.editable})},_incrementKey:function(a){this.disabled||("end"===a.detail.key?this.value=this.max:this.increment(),this.fire("change"),a.preventDefault())},_decrementKey:function(a){this.disabled||("home"===a.detail.key?this.value=this.min:this.decrement(),this.fire("change"),a.preventDefault())},
_changeValue:function(a){this.value=a.target.value;this.fire("change")},_inputKeyDown:function(a){a.stopPropagation()},_createRipple:function(){this._rippleContainer=this.$.sliderKnob;return Polymer.PaperInkyFocusBehaviorImpl._createRipple.call(this)},_focusedChanged:function(a){a&&this.ensureRipple();this.hasRipple()&&(this._ripple.style.display=a?"":"none",this._ripple.holdDown=a)}});
</script>
</dom-module>








<dom-module id="vz-projector-input">
<template>
<style include="vz-projector-styles"></style>
<style>
.info {
  color: rgba(0, 0, 0, 0.5);
  display: block;
  font-size: 11px;
}

.toggle {
  font-size: 12px;
  height: 21px;
  margin: 0px;
  min-width: 0px;
  min-height: 0px;
  padding: 0;
  width: 17px;
}

.toggle[active] {
  background-color: #880E4F;
  color: white;
}
</style>

<paper-input label="[[label]]">
  <div class="slash" prefix>/</div>
  <div class="slash" suffix>/</div>
  <div suffix>
    <paper-button id="regex" toggles class="toggle">.*</paper-button>
  </div>
</paper-input>
<paper-tooltip for="regex" position="bottom" animation-delay="0" fit-to-visible-bounds>
  Enable/disable regex mode.
</paper-tooltip>
<span class="info">[[message]]</span>


</template>
<script>//~~WEBPATH~~/vz-projector/vz-projector-input.js
var Yd=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b])};return function(b,c){function d(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),Zd=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}Yd(b,a);b.prototype.registerInputChangedListener=function(a){this.textChangedListeners.push(a)};b.prototype.ready=
function(){var a=this;this.inRegexMode=!1;this.textChangedListeners=[];this.paperInput=this.querySelector("paper-input");this.inRegexModeButton=this.querySelector("paper-button");this.paperInput.setAttribute("error-message","Invalid regex");this.paperInput.addEventListener("input",function(){a.onTextChanged()});this.paperInput.addEventListener("keydown",function(a){a.stopPropagation()});this.inRegexModeButton.addEventListener("click",function(){return a.onClickRegexModeButton()});this.updateRegexModeDisplaySlashes();
this.onTextChanged()};b.prototype.onClickRegexModeButton=function(){this.inRegexMode=this.inRegexModeButton.active;this.updateRegexModeDisplaySlashes();this.onTextChanged()};b.prototype.notifyInputChanged=function(a,b){this.textChangedListeners.forEach(function(c){return c(a,b)})};b.prototype.onTextChanged=function(){try{this.inRegexMode&&new RegExp(this.paperInput.value)}catch(c){this.paperInput.setAttribute("invalid","true");this.message="";this.notifyInputChanged(null,!0);return}this.paperInput.removeAttribute("invalid");
this.notifyInputChanged(this.paperInput.value,this.inRegexMode)};b.prototype.updateRegexModeDisplaySlashes=function(){for(var a=this.paperInput.querySelectorAll(".slash"),b=this.inRegexMode?"":"none",e=0;e<a.length;e++)a[e].style.display=b};b.prototype.getValue=function(){return this.paperInput.value};b.prototype.getInRegexMode=function(){return this.inRegexMode};b.prototype.set=function(a,b){this.inRegexModeButton.active=b;this.paperInput.value=a;this.onClickRegexModeButton()};return b}(Polymer.Class({is:"vz-projector-input",
properties:{label:String,message:String}}));document.registerElement(Zd.prototype.is,Zd);
</script>
</dom-module>




<dom-module id="vz-projector-inspector-panel">
<style include="vz-projector-styles"></style>
<style>
:host {
   display: flex;
   flex-direction: column;
   /* Account for the bookmark pane at the bottom */
   height: calc(100% - 55px);
}

.container {
  display: block;
  padding: 10px 20px 0 20px;
}

.buttons {
  display: flex;
  height: 60px;
}

.button {
  margin-right: 10px;
  border: none;
  border-radius: 7px;
  font-size: 13px;
  padding: 10px;
  background: #e3e3e3;
}

.button:last-child {
  margin-right: 0;
}

.nn {
  display: flex;
  flex-direction: column;
}

.nn > * {
  padding: 0 20px;
}

.nn-list {
  overflow-y: auto;
}

.nn-list .neighbor {
  font-size: 12px;
  margin-bottom: 8px;
}

.nn-list .label-and-value {
  display: flex;
  justify-content: space-between;
}

.label {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.nn-list .value {
  color: #666;
  float: right;
  font-weight: 300;
  margin-left: 8px;
}

.nn-list .bar {
  position: relative;
  border-top: 1px solid rgba(0, 0, 0, 0.15);
  margin: 2px 0;
}

.nn-list .bar .fill {
  position: absolute;
  top: -1px;
  border-top: 1px solid white;
}

.nn-list .tick {
  position: absolute;
  top: 0px;
  height: 3px;
  border-left: 1px solid rgba(0, 0, 0, 0.15);
}

.nn-list .neighbor-link:hover {
  cursor: pointer;
}

.search-by {
  display: flex;
}

.search-by vz-projector-input {
  width: 100%;
}

.search-by paper-dropdown-menu {
  margin-left: 10px;
  width: 100px;
}

.distance .options {
  float: right;
}

.options a {
  color: #727272;
  font-size: 13px;
  margin-left: 12px;
  text-decoration: none;
}

.options a.selected {
  color: #009EFE;
}

.neighbors {
  margin-bottom: 30px;
}

.neighbors-options {
  margin-top: 6px;
}

.neighbors-options .option-label, .distance .option-label {
  color: #727272;
  margin-right: 2px;
  width: auto;
}

.num-neighbors-container {
  display: inline-block;
}

#nn-slider {
  margin: 0 -12px 0 10px;
}

.euclidean {
  margin-right: 10px;
}

.matches-list {
  padding: 0 20px;
}

.matches-list .row {
  border-bottom: 1px solid #ddd;
  cursor: pointer;
  display: flex;
  font-size: 12px;
  margin: 5px 0;
  padding: 4px 0;
}

.results {
  display: flex;
  flex-direction: column;
}
</style>
<template>
<div class="container">
  <div class="buttons">
    <button class="button reset-filter">Show All Data</button>
    <button class="button set-filter">Isolate selection</button>
    <button class="button clear-selection">Clear selection</button>
  </div>
  <div class="search-by">
    <vz-projector-input id="search-box" label="Search"></vz-projector-input>
    <paper-dropdown-menu no-animations label="by">
      <paper-listbox attr-for-selected="value" class="dropdown-content" selected="{{selectedMetadataField}}">
        <template is="dom-repeat" items="[[metadataFields]]">
          <paper-item value="[[item]]" label="[[item]]">
            [[item]]
          </paper-item>
        </template>
      </paper-listbox>
    </paper-dropdown-menu>
  </div>
</div>
<div class="results">
  <div class="nn" style="display: none">
    <div class="neighbors">
      <div class="neighbors-options">
        <div class="slider num-nn">
          <span class="option-label">neighbors</span>
          <paper-icon-button icon="help" class="help-icon"></paper-icon-button>
          <paper-tooltip position="bottom" animation-delay="0" fit-to-visible-bounds>
            The number of neighbors (in the original space) to show when clicking on a point.
          </paper-tooltip>
          <paper-slider id="nn-slider" pin min="5" max="1000" value="100"></paper-slider>
          <span class="nn-count"></span>
        </div>
      </div>
      <div class="distance">
        <span class="option-label">distance</span>
        <div class="options">
          <a class="selected cosine" href="javascript:void(0);">COSINE</a>
          <a class="euclidean" href="javascript:void(0);">EUCLIDEAN</a>
        </div>
      </div>
    </div>
    <p>Nearest points in the original space:
    <div class="nn-list"></div>
  </div>
  <div class="matches-list" style="display: none">
    <div class="list"></div>
    <div class="limit-msg">Showing only the first 100 results...</div>
  </div>
</div>

</template>
<script>//~~WEBPATH~~/vz-projector/vz-projector-inspector-panel.js
var $d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b])};return function(b,c){function d(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),ae=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}$d(b,a);b.prototype.ready=function(){this.resetFilterButton=this.querySelector(".reset-filter");this.setFilterButton=
this.querySelector(".set-filter");this.clearSelectionButton=this.querySelector(".clear-selection");this.limitMessage=this.querySelector(".limit-msg");this.searchBox=this.querySelector("#search-box");this.scopeSubtree(this,!0)};b.prototype.initialize=function(a,b){var c=this;this.projector=a;this.projectorEventContext=b;this.setupUI(a);b.registerSelectionChangedListener(function(a,b){return c.updateInspectorPane(a,b)})};b.prototype.updateInspectorPane=function(a,b){this.neighborsOfFirstPoint=b;this.selectedPointIndices=
a;this.updateFilterButtons(a.length+b.length);this.updateNeighborsList(b);0===b.length?this.updateSearchResults(a):this.updateSearchResults([])};b.prototype.enableResetFilterButton=function(a){this.resetFilterButton.disabled=!a};b.prototype.restoreUIFromBookmark=function(a){this.enableResetFilterButton(null!=a.filteredPoints)};b.prototype.metadataChanged=function(a){var b=-1;this.metadataFields=a.stats.map(function(a,c){a.isNumeric||-1!==b||(b=c);return a.name});b=Math.max(0,b);this.selectedMetadataField=
a.stats[b].name};b.prototype.datasetChanged=function(){this.enableResetFilterButton(!1)};b.prototype.updateSearchResults=function(a){var b=this,c=this.querySelector(".matches-list");c.style.display=a.length?null:"none";var g=c.querySelector(".list");g.innerHTML="";if(0!==a.length){this.limitMessage.style.display=100>=a.length?"none":null;a=a.slice(0,100);for(var c=function(c){var d=a[c];c=document.createElement("div");c.className="row";var e=h.getLabelFromIndex(d),k=document.createElement("a");k.className=
"label";k.title=e;k.innerText=e;k.onmouseenter=function(){b.projectorEventContext.notifyHoverOverPoint(d)};k.onmouseleave=function(){b.projectorEventContext.notifyHoverOverPoint(null)};k.onclick=function(){b.projectorEventContext.notifySelectionChanged([d])};c.appendChild(k);g.appendChild(c)},h=this,k=0;k<a.length;k++)c(k)}};b.prototype.getLabelFromIndex=function(a){return this.projector.dataSet.points[a].metadata[this.selectedMetadataField].toString()};b.prototype.updateNeighborsList=function(a){var b=
this,c=this.querySelector(".nn-list");c.innerHTML="";this.querySelector(".nn").style.display=a.length?null:"none";if(0!==a.length){this.searchBox.message="";for(var g=0<a.length?a[0].dist:0,h=function(d){var e=a[d];d=document.createElement("div");d.className="neighbor";var h=document.createElement("a");h.className="neighbor-link";h.title=k.getLabelFromIndex(e.index);var l=document.createElement("div");l.className="label-and-value";var m=document.createElement("div");m.className="label";m.style.color=
Ld(Pd(k.distFunc,e.dist,g));m.innerText=k.getLabelFromIndex(e.index);var q=document.createElement("div");q.className="value";q.innerText=e.dist.toFixed(3);l.appendChild(m);l.appendChild(q);m=document.createElement("div");m.className="bar";q=document.createElement("div");q.className="fill";q.style.borderTopColor=Ld(Pd(k.distFunc,e.dist,g));q.style.width=100*Pd(k.distFunc,e.dist,g)+"%";m.appendChild(q);for(q=1;4>q;q++){var u=document.createElement("div");u.className="tick";u.style.left=100*q/4+"%";
m.appendChild(u)}h.appendChild(l);h.appendChild(m);d.appendChild(h);c.appendChild(d);h.onmouseenter=function(){b.projectorEventContext.notifyHoverOverPoint(e.index)};h.onmouseleave=function(){b.projectorEventContext.notifyHoverOverPoint(null)};h.onclick=function(){b.projectorEventContext.notifySelectionChanged([e.index])}},k=this,l=0;l<a.length;l++)h(l)}};b.prototype.updateFilterButtons=function(a){1<a?(this.setFilterButton.innerText="Isolate "+a+" points",this.setFilterButton.disabled=null,this.clearSelectionButton.disabled=
null):(this.setFilterButton.disabled=!0,this.clearSelectionButton.disabled=!0)};b.prototype.setupUI=function(a){function b(){c.numNN=+k.value;c.querySelector(".num-nn .nn-count").innerText=""+c.numNN;null!=c.selectedPointIndices&&c.projectorEventContext.notifySelectionChanged([c.selectedPointIndices[0]])}var c=this;this.distFunc=Sc;var g=this.querySelector(".distance a.euclidean");g.onclick=function(){for(var b=c.querySelectorAll(".distance a"),d=0;d<b.length;d++)zc(b[d],"selected",!1);zc(g,"selected",
!0);c.distFunc=Mc;c.projectorEventContext.notifyDistanceMetricChanged(c.distFunc);b=a.dataSet.findNeighbors(c.selectedPointIndices[0],c.distFunc,c.numNN);c.updateNeighborsList(b)};var h=this.querySelector(".distance a.cosine");h.onclick=function(){for(var b=c.querySelectorAll(".distance a"),d=0;d<b.length;d++)zc(b[d],"selected",!1);zc(h,"selected",!0);c.distFunc=Sc;c.projectorEventContext.notifyDistanceMetricChanged(c.distFunc);b=a.dataSet.findNeighbors(c.selectedPointIndices[0],c.distFunc,c.numNN);
c.updateNeighborsList(b)};this.searchBox.registerInputChangedListener(function(b,d){null==b||""===b.trim()?(c.searchBox.message="",c.projectorEventContext.notifySelectionChanged([])):(b=a.dataSet.query(b,d,c.selectedMetadataField),c.searchBox.message=0===b.length?"0 matches.":b.length+" matches.",c.projectorEventContext.notifySelectionChanged(b))});var k=this.$$("#nn-slider");k.addEventListener("change",b);b();this.setFilterButton.onclick=function(){var b=c.selectedPointIndices.concat(c.neighborsOfFirstPoint.map(function(a){return a.index}));
a.filterDataset(b);c.enableResetFilterButton(!0);c.updateFilterButtons(0)};this.resetFilterButton.onclick=function(){a.resetFilterDataset();c.enableResetFilterButton(!1)};this.clearSelectionButton.onclick=function(){a.adjustSelectionAndHover([])};this.enableResetFilterButton(!1)};return b}(Polymer.Class({is:"vz-projector-inspector-panel",properties:{selectedMetadataField:String,metadataFields:Array}}));document.registerElement(ae.prototype.is,ae);
</script>
</dom-module>







<dom-module id="vz-projector-metadata-card">
<template>
<style>
#metadata-card {
  background-color: rgba(255,255,255,0.9);
  box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14),
      0 1px 5px 0 rgba(0, 0, 0, 0.12), 0 3px 1px -2px rgba(0, 0, 0, 0.2);
  width: 280px;
}

#header {
  background: #e9e9e9;
}

#icon-container {
  position: absolute;
  right: 0;
  top: 4px;
}

#metadata-label {
  font-weight: 400;
  font-size: 14px;
  line-height: 24px;
  padding: 12px 12px 8px;
  width: 230px;
}

#metadata-table {
  display: table;
  padding: 8px 12px 4px;
}

.metadata-row {
  display: table-row;
}

.metadata-key {
  font-weight: bold;
}

.metadata-key, .metadata-value {
  display: table-cell;
  font-size: 12px;
  padding: 3px 3px;
}
</style>

<template is="dom-if" if="[[hasMetadata]]">
  <div id="metadata-card">
    <div id="icon-container">
      <paper-icon-button id="expand-more" style="display: none" icon="expand-more" on-tap="_expandMore"></paper-icon-button>
      <paper-icon-button id="expand-less" on-tap="_expandLess" icon="expand-less"></paper-icon-button>
    </div>
    <div id="header">
      <div id="metadata-label">[[label]]</div>
    </div>
    <iron-collapse id="metadata-container" opened>
      <div id="metadata-table">
        <template is="dom-repeat" items="[[metadata]]">
          <div class="metadata-row">
            <div class="metadata-key">[[item.key]]</div>
            <div class="metadata-value">[[item.value]]</div>
          </div>
        </template>
      </div>
    </iron-collapse>
  </div>
</template>
</template>
<script>//~~WEBPATH~~/vz-projector/vz-projector-metadata-card.js
var be=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b])};return function(b,c){function d(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),ce=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}be(b,a);b.prototype.ready=function(){this.expandLessButton=this.querySelector("#expand-less");this.expandMoreButton=
this.querySelector("#expand-more")};b.prototype._expandMore=function(){this.$$("#metadata-container").toggle();this.expandMoreButton.style.display="none";this.expandLessButton.style.display=""};b.prototype._expandLess=function(){this.$$("#metadata-container").toggle();this.expandMoreButton.style.display="";this.expandLessButton.style.display="none"};b.prototype.updateMetadata=function(a){this.pointMetadata=a;this.hasMetadata=null!=a;if(a){var b=[],c;for(c in a)a.hasOwnProperty(c)&&b.push({key:c,value:a[c]});
this.metadata=b;this.label=""+this.pointMetadata[this.labelOption]}};b.prototype.setLabelOption=function(a){this.labelOption=a;this.pointMetadata&&(this.label=""+this.pointMetadata[this.labelOption])};return b}(Polymer.Class({is:"vz-projector-metadata-card",properties:{hasMetadata:{type:Boolean,value:!1},metadata:{type:Array},label:String}}));document.registerElement(ce.prototype.is,ce);
</script>
</dom-module>


















<dom-module id="vz-projector-projections-panel">
<template>
<style include="vz-projector-styles"></style>
<style>
:host {
  transition: height 0.2s;
}

.ink-button, ::shadow .ink-button {
  border: none;
  border-radius: 2px;
  font-size: 13px;
  padding: 10px;
  min-width: 100px;
  flex-shrink: 0;
  background: #e3e3e3;
}

.ink-panel-buttons {
  margin-bottom: 10px;
}

.two-way-toggle {
  display: flex;
  flex-direction: row;
}

.two-way-toggle span {
  padding-right: 7px;
}

.has-border {
  border: 1px solid rgba(0, 0, 0, 0.1);
}

.toggle {
  min-width: 0px;
  font-size: 12px;
  width: 17px;
  min-height: 0px;
  height: 21px;
  padding: 0;
  margin: 0px;
}

.toggle[active] {
  background-color: #880E4F;
  color: white;
}

.two-columns {
  display:flex;
  justify-content: space-between;
}

.two-columns > :first-child {
  margin-right: 15px;
}

.two-columns > div {
  width: 50%;
}

.dropdown-item {
  justify-content: space-between;
  min-height: 35px;
}

#z-container {
  display: flex;
  align-items: center;
  width: 50%;
}

#z-checkbox {
  margin: 27px 0 0 5px;
  width: 18px;
}

#z-dropdown {
  flex-grow: 1;
}

.notice {
  color: #880E4F;
}

.container {
  padding: 20px;
}

.book-icon {
  height: 20px;
  color: rgba(0, 0, 0, 0.7);
}

.item-details {
  color: gray;
  font-size: 12px;
  margin-left: 5px;
}

.pca-dropdown {
  width: 100%;
}

.pca-dropdown paper-listbox {
  width: 135px;
}

.dropdown-item.header {
  border-bottom: 1px solid #aaa;
  color: #333;
  font-weight: bold;
}

#total-variance {
  color: rgba(0, 0, 0, 0.7);
}
</style>
<div id="main">
  <div class="ink-panel-header">
    <div class="ink-tab-group">

      <div data-tab="tsne" id="tsne-tab" class="ink-tab projection-tab">t-SNE</div>
      <paper-tooltip for="tsne-tab" position="bottom" animation-delay="0" fit-to-visible-bounds>
        t-distributed stochastic neighbor embedding
      </paper-tooltip>

      <div data-tab="pca" id="pca-tab" class="ink-tab projection-tab">PCA</div>
      <paper-tooltip for="pca-tab" position="bottom" animation-delay="0" fit-to-visible-bounds>
        Principal component analysis
      </paper-tooltip>

      <div data-tab="custom" id="custom-tab" class="ink-tab projection-tab" title="Linear projection of two custom vectors">Custom</div>
      <paper-tooltip for="custom-tab" position="bottom" animation-delay="0" fit-to-visible-bounds>
        Search for two vectors upon which to project all points.
      </paper-tooltip>

    </div>
  </div>
  <div class="container">
    
    <div data-panel="tsne" class="ink-panel-content">
      <div class="slider">
        <label>Dimension</label>
        <div class="two-way-toggle">
          <span>2D</span>
          <paper-toggle-button id="tsne-toggle" checked="{{tSNEis3d}}">3D</paper-toggle-button>
        </div>
      </div>
      <div class="slider tsne-perplexity">
        <label>
          Perplexity
          <paper-icon-button icon="help" class="help-icon"></paper-icon-button>
          <paper-tooltip position="right" animation-delay="0" fit-to-visible-bounds>
            The most appropriate perplexity value depends on the density of the
            data. Loosely speaking, a larger / denser dataset
            requires a larger perplexity. Typical values for perplexity range
            between 5 and 50.
          </paper-tooltip>
        </label>
        <paper-slider id="perplexity-slider" pin min="2" max="100" value="30"></paper-slider>
        <span></span>
      </div>
      <div class="slider tsne-learning-rate">
        <label>
          Learning rate
          <paper-icon-button icon="help" class="help-icon"></paper-icon-button>
          <paper-tooltip position="right" animation-delay="0" fit-to-visible-bounds>
            The ideal learning rate often depends on the size of the data,
            with smaller datasets requiring smaller learning rates.
          </paper-tooltip>
        </label>
        <paper-slider id="learning-rate-slider" snaps min="-3" max="2" step="1" value="1" max-markers="6">
        </paper-slider>
        <span></span>
      </div>
      <p>
        <button class="run-tsne ink-button" title="Re-run t-SNE">Re-run</button>
        <button class="stop-tsne ink-button" title="Stop t-SNE">Stop</button>
      
      <p>Iteration: <span class="run-tsne-iter">0</span>
      <p id="tsne-sampling" class="notice">
        For fast results, the data will be sampled down to [[getTsneSampleSizeText()]] points.
      
      <p>
        <iron-icon icon="book" class="book-icon"></iron-icon>
        <a target="_blank" href="http://distill.pub/2016/misread-tsne/">
          How to use t-SNE effectively.
        </a>
      
    </div>
    
    <div data-panel="pca" class="ink-panel-content">
      <div class="two-columns">
        <div> 
          <paper-dropdown-menu class="pca-dropdown" vertical-align="bottom" no-animations label="X">
            <paper-listbox attr-for-selected="value" class="dropdown-content" selected="{{pcaX}}">
              <paper-item disabled class="dropdown-item header">
                  <div>#</div>
                  <div>Variance (%)</div>
              </paper-item>
              <template is="dom-repeat" items="[[pcaComponents]]">
                <paper-item class="dropdown-item" value="[[item.id]]" label="Component #[[item.componentNumber]]">
                  <div>[[item.componentNumber]]</div>
                  <div class="item-details">[[item.percVariance]]</div>
                </paper-item>
              </template>
            </paper-listbox>
          </paper-dropdown-menu>
          <paper-dropdown-menu class="pca-dropdown" no-animations vertical-align="bottom" label="Z" disabled="[[!hasPcaZ]]" id="z-dropdown">
            <paper-listbox attr-for-selected="value" class="dropdown-content" selected="{{pcaZ}}">
              <paper-item disabled class="dropdown-item header">
                  <div>#</div>
                  <div>Variance (%)</div>
              </paper-item>
              <template is="dom-repeat" items="[[pcaComponents]]">
                <paper-item class="dropdown-item" value="[[item.id]]" label="Component #[[item.componentNumber]]">
                  <div>[[item.componentNumber]]</div>
                  <div class="item-details">[[item.percVariance]]</div>
                </paper-item>
              </template>
            </paper-listbox>
          </paper-dropdown-menu>
        </div>
        <div> 
          <paper-dropdown-menu class="pca-dropdown" vertical-align="bottom" no-animations label="Y">
            <paper-listbox attr-for-selected="value" class="dropdown-content" selected="{{pcaY}}">
              <paper-item disabled class="dropdown-item header">
                  <div>#</div>
                  <div>Variance (%)</div>
              </paper-item>
              <template is="dom-repeat" items="[[pcaComponents]]">
                <paper-item class="dropdown-item" value="[[item.id]]" label="Component #[[item.componentNumber]]">
                  <div>[[item.componentNumber]]</div>
                  <div class="item-details">[[item.percVariance]]</div>
                </paper-item>
              </template>
            </paper-listbox>
          </paper-dropdown-menu>
          <paper-checkbox id="z-checkbox" checked="{{pcaIs3d}}"></paper-checkbox>
        </div>
      </div>
      <p id="pca-sampling" class="notice">
        PCA is approximate.
        <paper-icon-button icon="help" class="help-icon"></paper-icon-button>
      
      <div id="total-variance">Total variance</div>
      <paper-tooltip for="pca-sampling" position="top" animation-delay="0" fit-to-visible-bounds>
        For fast results, the data was sampled to [[getPcaSampleSizeText()]] points and randomly projected down to [[getPcaSampledDimText()]] dimensions.
      </paper-tooltip>
    </div>
    
    <div data-panel="custom" class="ink-panel-content">
      <paper-dropdown-menu style="width: 100%" no-animations label="Search by">
        <paper-listbox attr-for-selected="value" class="dropdown-content" selected="{{customSelectedSearchByMetadataOption}}">
          <template is="dom-repeat" items="[[searchByMetadataOptions]]">
            <paper-item class="dropdown-item" value="[[item]]" label="[[item]]">
              [[item]]
            </paper-item>
          </template>
        </paper-listbox>
      </paper-dropdown-menu>
      <div class="two-columns">
        <vz-projector-input id="xLeft" label="Left"></vz-projector-input>
        <vz-projector-input id="xRight" label="Right"></vz-projector-input>
      </div>
      <div class="two-columns">
        <vz-projector-input id="yUp" label="Up"></vz-projector-input>
        <vz-projector-input id="yDown" label="Down"></vz-projector-input>
      </div>
    </div>
  </div>
</div>
</template>
<script>//~~WEBPATH~~/vz-projector/vz-projector-projections-panel.js
var de=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b])};return function(b,c){function d(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),ee=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}de(b,a);b.prototype.initialize=function(a){this.polymerChangesTriggerReprojection=!0;this.projector=
a;this.perplexity=30;this.learningRate=10;this.centroidValues={xLeft:null,xRight:null,yUp:null,yDown:null};this.clearCentroids();this.setupUIControls()};b.prototype.ready=function(){this.zDropdown=this.querySelector("#z-dropdown");this.runTsneButton=this.querySelector(".run-tsne");this.stopTsneButton=this.querySelector(".stop-tsne");this.perplexitySlider=this.querySelector("#perplexity-slider");this.learningRateInput=this.querySelector("#learning-rate-slider");this.iterationLabel=this.querySelector(".run-tsne-iter")};
b.prototype.disablePolymerChangesTriggerReprojection=function(){this.polymerChangesTriggerReprojection=!1};b.prototype.enablePolymerChangesTriggerReprojection=function(){this.polymerChangesTriggerReprojection=!0};b.prototype.updateTSNEPerplexityFromSliderChange=function(){this.perplexitySlider&&(this.perplexity=+this.perplexitySlider.value);this.querySelector(".tsne-perplexity span").innerText=""+this.perplexity};b.prototype.updateTSNELearningRateFromUIChange=function(){this.learningRateInput&&(this.learningRate=
Math.pow(10,+this.learningRateInput.value));this.querySelector(".tsne-learning-rate span").innerText=""+this.learningRate};b.prototype.setupUIControls=function(){for(var a=this,b=this,e=this.querySelectorAll(".ink-tab"),g=0;g<e.length;g++)e[g].addEventListener("click",function(){var a=this.getAttribute("data-tab");b.showTab(a)});this.runTsneButton.addEventListener("click",function(){return a.runTSNE()});this.stopTsneButton.addEventListener("click",function(){return a.dataSet.stopTSNE()});this.perplexitySlider.value=
this.perplexity.toString();this.perplexitySlider.addEventListener("change",function(){return a.updateTSNEPerplexityFromSliderChange()});this.updateTSNEPerplexityFromSliderChange();this.learningRateInput.addEventListener("change",function(){return a.updateTSNELearningRateFromUIChange()});this.updateTSNELearningRateFromUIChange();this.setupCustomProjectionInputFields();e=this.querySelectorAll("paper-dropdown-menu paper-input input");for(g=0;g<e.length;g++)e[g].style.fontSize="14px"};b.prototype.restoreUIFromBookmark=
function(a){this.disablePolymerChangesTriggerReprojection();this.pcaX=a.pcaComponentDimensions[0];this.pcaY=a.pcaComponentDimensions[1];3===a.pcaComponentDimensions.length&&(this.pcaZ=a.pcaComponentDimensions[2]);this.pcaIs3d=3===a.pcaComponentDimensions.length;this.perplexitySlider&&(this.perplexitySlider.value=a.tSNEPerplexity.toString());this.learningRateInput&&(this.learningRateInput.value=a.tSNELearningRate.toString());this.tSNEis3d=a.tSNEis3d;this.customSelectedSearchByMetadataOption=a.customSelectedSearchByMetadataOption;
this.customProjectionXLeftInput&&this.customProjectionXLeftInput.set(a.customXLeftText,a.customXLeftRegex);this.customProjectionXRightInput&&this.customProjectionXRightInput.set(a.customXRightText,a.customXRightRegex);this.customProjectionYUpInput&&this.customProjectionYUpInput.set(a.customYUpText,a.customYUpRegex);this.customProjectionYDownInput&&this.customProjectionYDownInput.set(a.customYDownText,a.customYDownRegex);this.computeAllCentroids();this.setZDropdownEnabled(this.pcaIs3d);this.updateTSNEPerplexityFromSliderChange();
this.updateTSNELearningRateFromUIChange();this.iterationLabel&&(this.iterationLabel.innerText=a.tSNEIteration.toString());null!=a.selectedProjection&&this.showTab(a.selectedProjection);this.enablePolymerChangesTriggerReprojection()};b.prototype.populateBookmarkFromUI=function(a){this.disablePolymerChangesTriggerReprojection();a.pcaComponentDimensions=[this.pcaX,this.pcaY];this.pcaIs3d&&a.pcaComponentDimensions.push(this.pcaZ);null!=this.perplexitySlider&&(a.tSNEPerplexity=+this.perplexitySlider.value);
null!=this.learningRateInput&&(a.tSNELearningRate=+this.learningRateInput.value);a.tSNEis3d=this.tSNEis3d;a.customSelectedSearchByMetadataOption=this.customSelectedSearchByMetadataOption;null!=this.customProjectionXLeftInput&&(a.customXLeftText=this.customProjectionXLeftInput.getValue(),a.customXLeftRegex=this.customProjectionXLeftInput.getInRegexMode());null!=this.customProjectionXRightInput&&(a.customXRightText=this.customProjectionXRightInput.getValue(),a.customXRightRegex=this.customProjectionXRightInput.getInRegexMode());
null!=this.customProjectionYUpInput&&(a.customYUpText=this.customProjectionYUpInput.getValue(),a.customYUpRegex=this.customProjectionYUpInput.getInRegexMode());null!=this.customProjectionYDownInput&&(a.customYDownText=this.customProjectionYDownInput.getValue(),a.customYDownRegex=this.customProjectionYDownInput.getInRegexMode());this.enablePolymerChangesTriggerReprojection()};b.prototype.setZDropdownEnabled=function(a){this.zDropdown&&(a?this.zDropdown.removeAttribute("disabled"):this.zDropdown.setAttribute("disabled",
"true"))};b.prototype.dataSetUpdated=function(a,b,e){this.dataSet=a;this.originalDataSet=b;this.dim=e;b=null==a?0:a.points.length;this.perplexitySlider.value=Math.max(5,Math.ceil(Math.sqrt(b)/4)).toString();this.updateTSNEPerplexityFromSliderChange();this.clearCentroids();this.querySelector("#tsne-sampling").style.display=1E4<b?null:"none";a=null==a?!1:200<a.dim[0]||200<a.dim[1];this.querySelector("#pca-sampling").style.display=a?null:"none";this.showTab("pca")};b.prototype._pcaDimensionToggleObserver=
function(){this.setZDropdownEnabled(this.pcaIs3d);this.beginProjection(this.currentProjection)};b.prototype._tsneDimensionToggleObserver=function(){this.beginProjection(this.currentProjection)};b.prototype.metadataChanged=function(a){var b=-1;this.searchByMetadataOptions=a.stats.map(function(a,c){a.isNumeric||-1!==b||(b=c);return a.name});this.customSelectedSearchByMetadataOption=this.searchByMetadataOptions[Math.max(0,b)]};b.prototype.showTab=function(a){var b=this;this.currentProjection=a;for(var c=
this.querySelector('.ink-tab[data-tab\x3d"'+a+'"]'),g=this.querySelectorAll(".ink-tab"),h=0;h<g.length;h++)zc(g[h],"active",!1);zc(c,"active",!0);c=this.querySelectorAll(".ink-panel-content");for(h=0;h<c.length;h++)zc(c[h],"active",!1);zc(this.querySelector('.ink-panel-content[data-panel\x3d"'+a+'"]'),"active",!0);if(null!=this.$){var k=this.$.main;requestAnimationFrame(function(){b.style.height=k.clientHeight+"px"})}this.beginProjection(a)};b.prototype.beginProjection=function(a){!1!==this.polymerChangesTriggerReprojection&&
("pca"===a?(null!=this.dataSet&&this.dataSet.stopTSNE(),this.showPCA()):"tsne"===a?this.showTSNE():"custom"===a&&(null!=this.dataSet&&this.dataSet.stopTSNE(),this.computeAllCentroids(),this.reprojectCustom()))};b.prototype.showTSNE=function(){var a=this.dataSet;if(null!=a){var b=dd("tsne",[0,1,this.tSNEis3d?2:null]),a=new bd("tsne",b,this.tSNEis3d?3:2,a);this.projector.setProjection(a);this.dataSet.hasTSNERun?this.projector.notifyProjectionPositionsUpdated():this.runTSNE()}};b.prototype.runTSNE=function(){var a=
this;this.runTsneButton.disabled=!0;this.stopTsneButton.disabled=null;this.dataSet.projectTSNE(this.perplexity,this.learningRate,this.tSNEis3d?3:2,function(b){null!=b?(a.iterationLabel.innerText=""+b,a.projector.notifyProjectionPositionsUpdated()):(a.runTsneButton.disabled=null,a.stopTsneButton.disabled=!0)})};b.prototype.showPCAIfEnabled=function(){this.polymerChangesTriggerReprojection&&this.showPCA()};b.prototype.updateTotalVarianceMessage=function(){var a=this.dataSet.fracVariancesExplained,b=
a[this.pcaX]+a[this.pcaY];this.pcaIs3d&&(b+=a[this.pcaZ]);a="Total variance described: "+((100*b).toFixed(1)+"%.");this.querySelector("#total-variance").innerHTML=a};b.prototype.showPCA=function(){var a=this;null!=this.dataSet&&this.dataSet.projectPCA().then(function(){var b=dd("pca",[a.pcaX,a.pcaY,a.pcaZ]),b=new bd("pca",b,a.pcaIs3d?3:2,a.dataSet);a.projector.setProjection(b);b=Math.min(10,a.dataSet.dim[1]);a.updateTotalVarianceMessage();a.pcaComponents=yc(b).map(function(b){return{id:b,componentNumber:b+
1,percVariance:(100*a.dataSet.fracVariancesExplained[b]).toFixed(1)}})})};b.prototype.reprojectCustom=function(){if(null!=this.centroids&&null!=this.centroids.xLeft&&null!=this.centroids.xRight&&null!=this.centroids.yUp&&null!=this.centroids.yDown){var a=Kc(this.centroids.xRight,this.centroids.xLeft);this.dataSet.projectLinear(a,"linear-x");a=Kc(this.centroids.yUp,this.centroids.yDown);this.dataSet.projectLinear(a,"linear-y");a=dd("custom",["x","y"]);a=new bd("custom",a,2,this.dataSet);this.projector.setProjection(a)}};
b.prototype.clearCentroids=function(){this.centroids={xLeft:null,xRight:null,yUp:null,yDown:null};this.allCentroid=null};b.prototype._customSelectedSearchByMetadataOptionChanged=function(){!1!==this.polymerChangesTriggerReprojection&&"custom"===this.currentProjection&&(this.computeAllCentroids(),this.reprojectCustom())};b.prototype.setupCustomProjectionInputFields=function(){this.customProjectionXLeftInput=this.setupCustomProjectionInputField("xLeft");this.customProjectionXRightInput=this.setupCustomProjectionInputField("xRight");
this.customProjectionYUpInput=this.setupCustomProjectionInputField("yUp");this.customProjectionYDownInput=this.setupCustomProjectionInputField("yDown")};b.prototype.computeAllCentroids=function(){this.computeCentroid("xLeft");this.computeCentroid("xRight");this.computeCentroid("yUp");this.computeCentroid("yDown")};b.prototype.computeCentroid=function(a){var b=this.querySelector("#"+a);if(null!=b){var c=b.getValue();if(null!=c){var g=this.getCentroid(c,b.getInRegexMode());0===g.numMatches?(b.message=
"0 matches. Using a random vector.",g.centroid=Qc(this.dim)):b.message=g.numMatches+" matches.";this.centroids[a]=g.centroid;this.centroidValues[a]=c}}};b.prototype.setupCustomProjectionInputField=function(a){var b=this,c=this.querySelector("#"+a);c.registerInputChangedListener(function(){b.polymerChangesTriggerReprojection&&(b.computeCentroid(a),b.reprojectCustom())});return c};b.prototype.getCentroid=function(a,b){var c=this;if(null==a||""===a)return{numMatches:0};a=this.originalDataSet.query(a,
b,this.customSelectedSearchByMetadataOption);return{centroid:Rc(a,function(a){return c.originalDataSet.points[a].vector}),numMatches:a.length}};b.prototype.getPcaSampledDimText=function(){return(200).toLocaleString()};b.prototype.getPcaSampleSizeText=function(){return(5E4).toLocaleString()};b.prototype.getTsneSampleSizeText=function(){return(1E4).toLocaleString()};return b}(Polymer.Class({is:"vz-projector-projections-panel",properties:{pcaIs3d:{type:Boolean,value:!0,observer:"_pcaDimensionToggleObserver"},
tSNEis3d:{type:Boolean,value:!0,observer:"_tsneDimensionToggleObserver"},pcaComponents:Array,pcaX:{type:Number,value:0,observer:"showPCAIfEnabled"},pcaY:{type:Number,value:1,observer:"showPCAIfEnabled"},pcaZ:{type:Number,value:2,observer:"showPCAIfEnabled"},customSelectedSearchByMetadataOption:{type:String,observer:"_customSelectedSearchByMetadataOptionChanged"}}}));document.registerElement(ee.prototype.is,ee);
</script>
</dom-module>




<dom-module id="vz-projector">
<template>
<style include="vz-projector-styles"></style>
<style>
:host {
  display: flex;
  width: 100%;
  height: 100%;
}

#container {
  display: flex;
  width: 100%;
  height: 100%;
  overflow: hidden;
}

.hidden {
  display: none !important;
}

/* Main */

#main {
  position: relative;
  flex-grow: 2;
}

#main .stage {
  position: relative;
  flex-grow: 2;
}

#scatter {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
}

#selector {
  display: none;
  height: 100%;
  position: absolute;
  width: 100%;
}

#left-pane {
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  min-width: 312px;
  width: 312px;
  border-right: 1px solid rgba(0, 0, 0, 0.1);
  background: #fafafa;
}

#right-pane {
  border-left: 1px solid rgba(0, 0, 0, 0.1);
  background: #fafafa;
  display: flex;
  height: 100%;
  min-width: 300px;
  width: 300px;
}

.file-name {
  margin-right: 5px;
}

.control input[type=text]:focus {
  outline: none;
  border-bottom: 1px solid rgba(0, 0, 0, 1);
}

.control {
  display: inline-block;
  width: 45%;
  vertical-align: top;
  margin-right: 10px;
  overflow-x: hidden;
}

.control.last {
  margin-right: 0;
}

#notification-dialog {
  width: 400px;
  padding-bottom: 20px;
}

#notification-dialog paper-button {
  background: none;
  text-transform: uppercase;
}

#notification-dialog .progress {
  --paper-spinner-color: #880E4F;
  --paper-spinner-stroke-width: 2px;
}

#notify-msgs {
  text-align: center;
  display: block;
}

.notify-msg {
  font-weight: 500;
  margin: 0;
  padding: 0;
}

.notify-msg.error {
  text-align: left;
}

.brush .extent {
  stroke: #fff;
  fill-opacity: .125;
  shape-rendering: crispEdges;
}

.origin text {
  font-size: 12px;
  font-weight: 500;
}

.origin line {
  stroke: black;
  stroke-opacity: 0.2;
}

/* Ink Framework */

/* - Buttons */
.ink-button, ::shadow .ink-button {
  border: none;
  border-radius: 2px;
  font-size: 13px;
  padding: 10px;
  min-width: 100px;
  flex-shrink: 0;
  background: #e3e3e3;
}

.status-bar-panel {
  display: flex;
  align-items: center;
}

.status-bar-entry {
  border-left: 1px solid rgba(0, 0, 0, 0.5);
  margin-left: 5px;
  padding-left: 5px;
}

/* - Menubar */

.ink-panel-menubar {
  align-items: center;
  position: relative;
  height: 60px;
  border-bottom: solid 1px #eee;
  padding: 0 24px;
  display: flex;
}

.ink-panel-menubar .ink-fabs {
  position: absolute;
  right: 12px;
  top: 40px;
  z-index: 1;
}

#bookmark-panel {
  bottom: 0;
  position: absolute;
  width: 300px;
}
#bookmark-panel-container {
  bottom: 60px;
  position: absolute;
}

.ink-fab {
  margin-left: 8px;
  border: 1px solid rgba(0, 0, 0, 0.02);
  background: white;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
}

#metadata-card {
  position: absolute;
  right: 5px;
  top: 25px;
}

#help-3d-icon {
  position: absolute;
  top: 20px;
  left: 20px;
}

#help3dDialog .main {
  margin: 0;
  padding: 20px;
}

#help3dDialog h3 {
  margin-top: 20px;
  margin-bottom: 5px;
}

#help3dDialog h3:first-child {
  margin-top: 0;
}

#data-panel {
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  overflow-y: auto;
}

#toast {
  display: flex;
  align-items: center;
  --paper-toast-color: #eeff41;
}
</style>
<paper-dialog id="notification-dialog" modal>
  <h2 id="notification-title"></h2>
  <paper-dialog-scrollable>
    <div id="notify-msgs"></div>
  </paper-dialog-scrollable>
  <div style="text-align: center;"><paper-spinner-lite active class="progress"></paper-spinner-lite></div>
  <div class="buttons">
    <paper-button class="close-button" dialog-confirm autofocus>Close</paper-button>
  </div>
</paper-dialog>
<div id="container">
  <div id="left-pane" class="ink-panel">
    <vz-projector-data-panel id="data-panel"></vz-projector-data-panel>
    <vz-projector-projections-panel id="projections-panel"></vz-projector-projections-panel>
  </div>
  <div id="main" class="ink-panel">
    <div class="ink-panel-menubar">
      <paper-icon-button id="selectMode" alt="Bounding box selection" toggles icon="image:photo-size-select-small"></paper-icon-button>
      <paper-tooltip for="selectMode" position="bottom" animation-delay="0" fit-to-visible-bounds>Bounding box selection</paper-tooltip>

      <paper-icon-button id="nightDayMode" alt="Enable/disable night mode" toggles icon="image:brightness-2"></paper-icon-button>
      <paper-tooltip for="nightDayMode" position="bottom" animation-delay="0" fit-to-visible-bounds>Enable/disable night mode</paper-tooltip>

      <paper-icon-button id="labels3DMode" alt="Enable/disable 3D labels mode" toggles icon="font-download"></paper-icon-button>
      <paper-tooltip for="labels3DMode" position="bottom" animation-delay="0" fit-to-visible-bounds>Enable/disable 3D labels mode</paper-tooltip>
      <div class="status-bar-panel">
        <div class="status-bar-entry">Points: <span class="numDataPoints">Loading...</span></div>
        <div class="status-bar-entry">Dimension: <span class="dim">Loading...</span></div>
        <div id="status-bar" class="status-bar-entry" style="display: none;"></div>
      </div>
      <div class="ink-fabs">
        <paper-icon-button id="reset-zoom" class="ink-fab" alt="Reset zoom to fit all points" icon="home"></paper-icon-button>
        <paper-tooltip for="reset-zoom" position="left" animation-delay="0">Reset zoom to fit all points</paper-tooltip>
      </div>
    </div>
    <div class="stage">
      <div id="scatter">
        <svg id="selector"></svg>
      </div>
      <vz-projector-metadata-card id="metadata-card"></vz-projector-metadata-card>
      <paper-icon-button raised onclick="help3dDialog.open()" icon="help-outline" id="help-3d-icon"></paper-icon-button>
      <paper-tooltip animation-delay="0" for="help-3d-icon">Help with interaction controls.</paper-tooltip>
      <paper-dialog id="help3dDialog" with-backdrop>
        <div class="main" dialog-confirm autofocus>
          <h3>3D controls</h3>
            <b>Rotate</b> Mouse left click.<br>
            <b>Pan</b> Mouse right click.<br>
            <b>Zoom</b> Mouse wheel.<br>
            Holding <b>ctrl</b> reverses the mouse clicks.
          <h3>2D controls</h3>
            <b>Pan</b> Mouse left click.<br>
            <b>Zoom</b> Mouse wheel.
          <div class="dismiss-dialog-note"> Click anywhere to dismiss.</div>
        </div>
      </paper-dialog>
    </div>
  </div>
  <div id="right-pane" class="ink-panel">
    <div class="ink-panel-content active">
      <vz-projector-inspector-panel id="inspector-panel"></vz-projector-inspector-panel>
    </div>
    <div id="bookmark-panel-container">
      <vz-projector-bookmark-panel id="bookmark-panel"></vz-projector-bookmark-panel>
    </div>
  </div>
</div>
<paper-toast id="toast" always-on-top></paper-toast>

</template> 
<script>//~~WEBPATH~~/vz-projector/vz-projector.js
var fe=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b])};return function(b,c){function d(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),ge=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}fe(b,a);b.prototype.ready=function(){ic=this;this.analyticsLogger=new xc(this.pageViewLogging,this.eventLogging);
this.analyticsLogger.logPageView();Ic()?(this.selectionChangedListeners=[],this.hoverListeners=[],this.projectionChangedListeners=[],this.distanceMetricChangedListeners=[],this.selectedPointIndices=[],this.neighborsOfFirstPoint=[],this.dataPanel=this.$["data-panel"],this.inspectorPanel=this.$["inspector-panel"],this.inspectorPanel.initialize(this,this),this.projectionsPanel=this.$["projections-panel"],this.projectionsPanel.initialize(this),this.bookmarkPanel=this.$["bookmark-panel"],this.bookmarkPanel.initialize(this,
this),this.metadataCard=this.$["metadata-card"],this.statusBar=this.querySelector("#status-bar"),this.scopeSubtree(this.$$("#notification-dialog"),!0),this.setupUIControls(),this.initializeDataProvider()):(this.analyticsLogger.logWebGLDisabled(),lc("Your browser or device does not have WebGL enabled. Please enable hardware acceleration, or use a browser that supports WebGL."))};b.prototype.setSelectedLabelOption=function(a){this.selectedLabelOption=a;this.metadataCard.setLabelOption(this.selectedLabelOption);
this.projectorScatterPlotAdapter.setLabelPointAccessor(a);this.projectorScatterPlotAdapter.updateScatterPlotAttributes();this.projectorScatterPlotAdapter.render()};b.prototype.setSelectedColorOption=function(a){this.selectedColorOption=a;this.projectorScatterPlotAdapter.setLegendPointColorer(this.getLegendPointColorer(a));this.projectorScatterPlotAdapter.updateScatterPlotAttributes();this.projectorScatterPlotAdapter.render()};b.prototype.setNormalizeData=function(a){this.normalizeData=a;this.setCurrentDataSet(this.originalDataSet.getSubset())};
b.prototype.updateDataSet=function(a,b,e){this.dataSetFilterIndices=null;this.originalDataSet=a;if(null!=a){this.normalizeData=50<=this.originalDataSet.dim[1];b=b||{};if(null==b.pointsInfo){var c=this.makeDefaultPointsInfoAndStats(a.points),d=c[1];b.pointsInfo=c[0];b.stats=d}if(!a.mergeMetadata(b))return}null!=this.projectorScatterPlotAdapter&&(null==a?(this.projectorScatterPlotAdapter.setLabelPointAccessor(null),this.setProjection(null)):(this.projectorScatterPlotAdapter.updateScatterPlotPositions(),
this.projectorScatterPlotAdapter.updateScatterPlotAttributes(),this.projectorScatterPlotAdapter.resize(),this.projectorScatterPlotAdapter.render()));null!=a?(this.dataPanel.setNormalizeData(this.normalizeData),this.setCurrentDataSet(a.getSubset()),this.projectorScatterPlotAdapter.setLabelPointAccessor(this.selectedLabelOption),this.inspectorPanel.datasetChanged(),this.inspectorPanel.metadataChanged(b),this.projectionsPanel.metadataChanged(b),this.dataPanel.metadataChanged(b,e),a=this.querySelector("#container"),
a.style.height=a.clientHeight+"px"):this.setCurrentDataSet(null)};b.prototype.setSelectedTensor=function(a,b){this.bookmarkPanel.setSelectedTensor(a,b,this.dataProvider)};b.prototype.registerSelectionChangedListener=function(a){this.selectionChangedListeners.push(a)};b.prototype.filterDataset=function(a){var b=this.selectedPointIndices.length;null==this.dataSetBeforeFilter&&(this.dataSetBeforeFilter=this.dataSet);this.setCurrentDataSet(this.dataSet.getSubset(a));this.dataSetFilterIndices=a;this.projectorScatterPlotAdapter.updateScatterPlotPositions();
this.projectorScatterPlotAdapter.updateScatterPlotAttributes();this.adjustSelectionAndHover(yc(b))};b.prototype.resetFilterDataset=function(){var a=this,b=this.selectedPointIndices.map(function(b){return a.dataSet.points[b].index});this.setCurrentDataSet(this.dataSetBeforeFilter);null!=this.projection&&(this.projection.dataSet=this.dataSetBeforeFilter);this.dataSetBeforeFilter=null;this.projectorScatterPlotAdapter.updateScatterPlotPositions();this.projectorScatterPlotAdapter.updateScatterPlotAttributes();
this.dataSetFilterIndices=[];this.adjustSelectionAndHover(b)};b.prototype.notifySelectionChanged=function(a){var b=this;this.selectedPointIndices=a;var c=[];1===a.length?(c=this.dataSet.findNeighbors(a[0],this.inspectorPanel.distFunc,this.inspectorPanel.numNN),this.metadataCard.updateMetadata(this.dataSet.points[a[0]].metadata)):this.metadataCard.updateMetadata(null);this.selectionChangedListeners.forEach(function(a){return a(b.selectedPointIndices,c)})};b.prototype.registerHoverListener=function(a){this.hoverListeners.push(a)};
b.prototype.notifyHoverOverPoint=function(a){this.hoverListeners.forEach(function(b){return b(a)})};b.prototype.registerProjectionChangedListener=function(a){this.projectionChangedListeners.push(a)};b.prototype.notifyProjectionChanged=function(a){this.projectionChangedListeners.forEach(function(b){return b(a)})};b.prototype.registerDistanceMetricChangedListener=function(a){this.distanceMetricChangedListeners.push(a)};b.prototype.notifyDistanceMetricChanged=function(a){this.distanceMetricChangedListeners.forEach(function(b){return b(a)})};
b.prototype._dataProtoChanged=function(a){a=a?JSON.parse(a):null;this.initializeDataProvider(a)};b.prototype.makeDefaultPointsInfoAndStats=function(a){var b=[];a.forEach(function(a){var c={};c.__index__=a.index;b.push(c)});return[b,[{name:"__index__",isNumeric:!1,tooManyUniqueValues:!0,min:0,max:b.length-1}]]};b.prototype.initializeDataProvider=function(a){if("demo"===this.servingMode){if(a=window.location.search){a=-1!==a.indexOf("?")?a.split("?")[1]:a;a.indexOf("#")&&(a=a.split("#")[0]);a=a.split("\x26");
for(var b={},c=0;c<a.length;c++){var g=a[c].split("\x3d");b[g[0].toLowerCase()]=decodeURIComponent(g[1])}a=b}else a={};this.dataProvider=new td("config"in a?a.config:this.projectorConfigJsonPath)}else if("server"===this.servingMode){if(!this.routePrefix)throw"route-prefix is a required parameter";this.dataProvider=new vd(this.routePrefix)}else"proto"===this.servingMode&&null!=a&&(this.dataProvider=new ud(a));this.dataPanel.initialize(this,this.dataProvider)};b.prototype.getLegendPointColorer=function(a){var b=
this;return null==a||null==a.map?null:function(c,d){c=c.points[d].metadata[b.selectedColorOption.name];return null==c?"black":a.map(c)}};b.prototype.get3DLabelModeButton=function(){return this.querySelector("#labels3DMode")};b.prototype.get3DLabelMode=function(){return this.get3DLabelModeButton().active};b.prototype.adjustSelectionAndHover=function(a){this.notifySelectionChanged(a);this.notifyHoverOverPoint(void 0);this.setMouseMode(Ed.CAMERA_AND_CLICK_SELECT)};b.prototype.setMouseMode=function(a){this.querySelector("#selectMode").active=
a===Ed.AREA_SELECT;this.projectorScatterPlotAdapter.scatterPlot.setMouseMode(a)};b.prototype.setCurrentDataSet=function(a){this.adjustSelectionAndHover([]);null!=this.dataSet&&this.dataSet.stopTSNE();null!=a&&this.normalizeData&&a.normalize();this.dim=null==a?0:a.dim[1];this.querySelector("span.numDataPoints").innerText=null==a?"0":""+a.dim[0];this.querySelector("span.dim").innerText=null==a?"0":""+a.dim[1];this.dataSet=a;this.projectionsPanel.dataSetUpdated(this.dataSet,this.originalDataSet,this.dim);
this.projectorScatterPlotAdapter.setDataSet(this.dataSet);this.projectorScatterPlotAdapter.scatterPlot.setCameraParametersForNextCameraCreation(null,!0)};b.prototype.setupUIControls=function(){var a=this;this.querySelector("#reset-zoom").addEventListener("click",function(){a.projectorScatterPlotAdapter.scatterPlot.resetZoom();a.projectorScatterPlotAdapter.scatterPlot.startOrbitAnimation()});var b=this.querySelector("#selectMode");b.addEventListener("click",function(){a.setMouseMode(b.active?Ed.AREA_SELECT:
Ed.CAMERA_AND_CLICK_SELECT)});var e=this.querySelector("#nightDayMode");e.addEventListener("click",function(){a.projectorScatterPlotAdapter.scatterPlot.setDayNightMode(e.active)});this.get3DLabelModeButton().addEventListener("click",function(){a.projectorScatterPlotAdapter.set3DLabelMode(a.get3DLabelMode())});window.addEventListener("resize",function(){var b=a.querySelector("#container");b.style.height=b.parentNode.clientHeight+"px";a.projectorScatterPlotAdapter.resize()});this.projectorScatterPlotAdapter=
new Qd(this.getScatterContainer(),this);this.projectorScatterPlotAdapter.setLabelPointAccessor(this.selectedLabelOption);this.projectorScatterPlotAdapter.scatterPlot.onCameraMove(function(){return a.bookmarkPanel.clearStateSelection()});this.registerHoverListener(function(b){return a.onHover(b)});this.registerSelectionChangedListener(function(b,c){return a.onSelectionChanged(b,c)})};b.prototype.onHover=function(a){this.hoverPointIndex=a;var b=null;null!=a&&(a=this.dataSet.points[a],a.metadata[this.selectedLabelOption]&&
(b=a.metadata[this.selectedLabelOption].toString()));0===this.selectedPointIndices.length&&(this.statusBar.style.display=b?null:"none",this.statusBar.innerText=b)};b.prototype.getScatterContainer=function(){return this.querySelector("#scatter")};b.prototype.onSelectionChanged=function(a,b){this.selectedPointIndices=a;this.neighborsOfFirstPoint=b;a=this.selectedPointIndices.length+b.length;this.statusBar.innerText="Selected "+a+" points";this.statusBar.style.display=0<a?null:"none"};b.prototype.setProjection=
function(a){this.projection=a;null!=a&&this.analyticsLogger.logProjectionChanged(a.projectionType);this.notifyProjectionChanged(a)};b.prototype.notifyProjectionPositionsUpdated=function(){this.projectorScatterPlotAdapter.notifyProjectionPositionsUpdated()};b.prototype.getCurrentState=function(){var a=new cd;a.projections=[];for(var b=0;b<this.dataSet.points.length;b++){for(var e=this.dataSet.points[b],g={},h=Object.keys(e.projections),k=0;k<h.length;++k)g[h[k]]=e.projections[h[k]];a.projections.push(g)}a.selectedProjection=
this.projection.projectionType;a.dataSetDimensions=this.dataSet.dim;a.tSNEIteration=this.dataSet.tSNEIteration;a.selectedPoints=this.selectedPointIndices;a.filteredPoints=this.dataSetFilterIndices;this.projectorScatterPlotAdapter.populateBookmarkFromUI(a);a.selectedColorOptionName=this.dataPanel.selectedColorOptionName;a.forceCategoricalColoring=this.dataPanel.forceCategoricalColoring;a.selectedLabelOption=this.selectedLabelOption;this.projectionsPanel.populateBookmarkFromUI(a);return a};b.prototype.loadState=
function(a){this.setProjection(null);this.projectionsPanel.disablePolymerChangesTriggerReprojection();null!=this.dataSetBeforeFilter&&this.resetFilterDataset();null!=a.filteredPoints&&this.filterDataset(a.filteredPoints);this.projectionsPanel.enablePolymerChangesTriggerReprojection();for(var b=0;b<a.projections.length;b++){var c=this.dataSet.points[b];var g=a.projections[b];for(var h=Object.keys(g),k=0;k<h.length;++k)c.projections[h[k]]=g[h[k]]}this.dataSet.hasTSNERun="tsne"===a.selectedProjection;
this.dataSet.tSNEIteration=a.tSNEIteration;this.projectionsPanel.restoreUIFromBookmark(a);this.inspectorPanel.restoreUIFromBookmark(a);this.dataPanel.selectedColorOptionName=a.selectedColorOptionName;this.dataPanel.setForceCategoricalColoring(!!a.forceCategoricalColoring);this.selectedLabelOption=a.selectedLabelOption;this.projectorScatterPlotAdapter.restoreUIFromBookmark(a);switch(a.selectedProjection){case "pca":g=a.pcaComponentDimensions.slice();break;case "tsne":g=[0,1];a.tSNEis3d&&g.push(2);
break;case "custom":g=["x","y"];break;default:throw Error("Unexpected fallthrough");}b=dd(a.selectedProjection,g);g=new bd(a.selectedProjection,b,g.length,this.dataSet);this.setProjection(g);this.notifySelectionChanged(a.selectedPoints)};return b}(Polymer.Class({is:"vz-projector",properties:{routePrefix:String,dataProto:{type:String,observer:"_dataProtoChanged"},servingMode:String,projectorConfigJsonPath:String,pageViewLogging:Boolean,eventLogging:Boolean}}));
document.registerElement(ge.prototype.is,ge);
</script>
</dom-module>



<dom-module id="vz-projector-app">
<template>
<style include="vz-projector-styles"></style>
<style>
#appbar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 24px;
  height: 60px;
  color: white;
  background: #560731;
}

#appbar .logo {
  font-size: 18px;
  font-weight: 300;
}

.icons {
  display: flex;
}

.icons a {
  color: white;
}

vz-projector {
  height: calc(100% - 60px);
}

#container {
  height: 100%;
}
</style>

<div id="container">
  <div id="appbar">
    <div>Embedding Projector</div>
    <div class="icons">
      <a title="Documentation" target="_blank" href="[[documentationLink]]">
        <paper-icon-button icon="help-outline"></paper-icon-button>
        <paper-tooltip position="bottom" animation-delay="0" fit-to-visible-bounds>
          Open documentation
        </paper-tooltip>
      </a>
      <a title="Report bug" target="_blank" href="[[bugReportLink]]">
        <paper-icon-button icon="bug-report"></paper-icon-button>
        <paper-tooltip position="bottom" animation-delay="0" fit-to-visible-bounds>
          Report a bug
        </paper-tooltip>
      </a>
    </div>
  </div>
  <vz-projector route-prefix="[[routePrefix]]" serving-mode="[[servingMode]]" projector-config-json-path="[[projectorConfigJsonPath]]" page-view-logging="[[pageViewLogging]]" event-logging="[[eventLogging]]">
  </vz-projector>
</div>
</template>


<script>//~~WEBPATH~~/vz-projector/vz-projector-app.html.js
Polymer({is:"vz-projector-app",properties:{pageViewLogging:{type:Boolean,value:!1},eventLogging:{type:Boolean,value:!1}}});</script>
</dom-module>

  
  
  

  <title>Embedding projector - visualization of high-dimensional data</title>
  <style include="vz-projector-styles"></style>
  <style>
    html {
      width: 100%;
      height: 100%;
    }

    body {
      font-family: "Roboto", "Helvetica", "Arial", sans-serif;
      margin: 0;
      width: 100%;
      height: 100%;
    }
  </style>

<body>
  <vz-projector-app documentation-link="https://www.tensorflow.org/get_started/embedding_viz" bug-report-link="https://github.com/tensorflow/tensorflow/issues" serving-mode="demo" projector-config-json-path="oss_data/oss_demo_projector_config.json" page-view-logging>
  </vz-projector-app>


